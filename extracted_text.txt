Don'tforgettocheckouttheOnlineLearning Center,www.mhhe.com/forouzan for
additional resources!
Instructors andstudentsusingDataCommunications andNetworking, FourthEdition
byBehrouz A.Forouzan willfindawidevarietyofresources available atthe Online
Learning Center,www.mhhe.comlforouzan
Instructor Resources
Instructors canaccessthefollowing resources bycontacting theirMcGraw-Hill Repre­
sentative forasecurepassword.
aPowerPoint Slides.Containfigures,tables,highlighted points,andbriefdescriptions
ofeachsection.
oComplete Solutions Manual. Password-protected solutions toallend-of-chapter
problems areprovided.
aPageout. Afreetoolthathelpsyoucreateyourowncoursewebsite.
DInstructor Message Board.Allowsyoutoshareideaswithotherinstructors
usingthetext.
StudentResources
Thestudentresources areavailable tothosestudentsusingthebook.Onceyouhave
accessed theOnlineLearning Center,clickon"Student Resources," thenselectachap­
terfromthedropdownmenuthatappears.Eachchapterhasawealthofmaterials to
helpyoureviewcommunications andnetworking concepts. Included are:
aChapter Summaries. Bulleted summary pointsprovideanessential reviewof
majorideasandconcepts coveredineachchapter.
aStudentSolutions Manual. Contains answersforodd-numbered problems.oGlossary. Defineskeytermspresented inthebook.oFlashcards. Facilitate learningthroughpracticeandreview.
aAnimated Figures. Visualrepresentations modelkeynetworking concepts, bringing
themtolife.
DAutomated Quizzes. Easy-to-use quizzesstrengthen learningandemphasize impor­
tantideasfromthebook.aWeblinks.Connectstudentstoadditional resources available online.DATA
COMMUNICATIONS
AND
NETWORKINGMcGraw-Hill Forouzan Networking Series
TitlesbyBehrouzA.Forouzan:
DataCommunications andNetworking
TCPflPProtocol Suite
LocalAreaNetworks
Business DataCommunicationsDATA
COMMUNICATIONS
AND
NETWORKING
FourthEdition
BehrouzA.Forouzan
DeAnzaCollege
with
SophiaChungFegan
•HigherEducation
BostonBurrRidge,ILDubuque, IAMadison, WINewYorkSanFrancisco S1.Louis
Bangkok BogotaCaracas KualaLumpur LisbonLondon MadridMexicoCity
MilanMontreal NewDelhiSantiago SeoulSingapore Sydney TaipeiTorontoTheMcGraw·HiII Companies .~I
IIHigherEducation
DATACOMMUNICATIONS ANDNETWORKING, FOURTH EDITION
Published byMcGraw-Hill, abusinessunitofTheMcGraw-Hill Companies. Inc.,1221Avenue
oftheAmericas, NewYork,NY10020.Copyright ©2007byTheMcGraw-Hill Companies, Inc.
AlIrightsreserved. Nopartofthispublication maybereproduced ordistributed inanyformor
byanymeans,orstoredinadatabase orretrievalsystem,withoutthepriorwrittenconsentof
TheMcGraw-Hill Companies, Inc.,including, butnotlimitedto,inanynetworkorother
electronic storageortransmission, orbroadcast fordistancelearning.
Someancillaries, including electronic andprintcomponents, maynotbeavailable tocustomers
outsidetheUnitedStates.
Thisbookisprintedonacid-free paper.
1234567890DOC/DOC09876
ISBN-13 978-0-07-296775-3
ISBN-to 0-07-296775-7
Publisher: AlanR.Apt
Developmental Editor:Rebecca Olson
Executive Marketing Manager: MichaelWeitz
SeniorProjectManager: SheilaM.Frank
SeniorProduction Supervisor: KaraKudronowicz
SeniorMediaProjectManager: JodiK.Banowetz
Associate MediaProducer: Christina Nelson
SeniorDesigner: DavidWHash
CoverDesigner: RokusekDesign
(USE)CoverImage:Womenascending MountMcKinley, Alaska.MountMcKinley (Denali)
12,000feet, ©AllanKearney/Getty Images
Compositor: Interactive Composition Corporation
Typeface: 10/12TimesRoman
Printer:R. R.Donnelley Crawfordsville, IN
LibraryofCongress Cataloging-in~Publication Data
Forouzan, BehrouzA.
Datacommunications andnetworking IBehrouzAForouzan. -4thed.
p.em.-(McGraw-HilI Forouzan networking series)
Includesindex.
ISBN978-0-07-296775-3 -ISBN0-07-296775-7 (hardeopy:alk.paper)
1.Datatransmission systems. 2.Computer networks. I.Title.II.Series.
TK5105.F6617
004.6--dc22
www.mhhe.com2007
2006000013
CIPTolnywife,Faezeh,withlove
Behrouz ForouzanPreface XXlX
PART1Overview 1
Chapter 1Introduction 3
Chapter 2Network Models 27
PART2
Chapter 3
Chapter 4
Chapter 5
Chapter 6
Chapter 7
Chapter 8
Chapter 9
PART3
Chapter 10
Chapter 11
Chapter 12
Chapter 13
Chapter 14
Chapter 15
Chapter 16
Chapter 17
Chapter 18Physical LayerandMedia 55
DataandSignals 57
DigitalTransmission 101
AnalogTransmission 141
Bandwidth Utilization: Multiplexing andSpreading 161
Transmission Media 191
Switching 213
UsingTelephone andCableNetworksfor DataTransmission 241
DataLinkLayer265
ErrorDetection andCorrection 267
DataLinkControl 307
Multiple Access 363
WiredLANs:Ethernet 395
Wireless LANs421
Connecting LANs,Backbone Networks, andVirtualLANs445
WirelessWANs:CellularTelephone andSatelliteNetworks 467
SONETISDH 491
Virtual-Circuit Nenvorks: FrameRelayandATM 517
viiviiiBRIEFCONTENTS
PART4
Chapter 19
Chapter 20
Chapter 21
Chapter 22
PARTS
Chapter 23
Chapter 24
PART6
Chapter 25
Chapter 26
Chapter 27
Chapter28
Chapter 29Network Layer547
Netvvork Layer:LogicalAddressing 549
Netvvork Layer:InternetProtocol 579
Netl,vork La.ver:Address Mapping, ErrorReporting,
andMulticasting 611
Network Layer:Delivery, Fonvarding, andRouting 647
Transport Layer 701
Process-to-Process Delivery: UDp,TCP,andSCTP703
Congestion ControlandQualityql'Sen'ice 761
Application Layer795
Domain NameSystem 797
RemoteLogging, Electronic Mail,andFileTransfer 817
WWWandHTTP851
Network Management: SNMP 873
Multimedia 901
PART7Security 929
Chapter 30Cf}1Jtography931
Chapter 31Network Security 961
Chapter 32Securit}' intheInternet: IPSec,SSLlTLS, PCp,VPN,
andFirewalls 995
Appendix AUnicode 1029
Appendix BNumbering Systems 1037
Appendix CMathematical Review 1043
Appendix D8B/6TCode1055
Appendix ETelephone History 1059
Appendix FCo!1tactAddresses 1061
Appendix GRFCs1063
Appendix HUDPandTCPPorts1065
Acron.Vl11s 1067
ClOSSOlY 1071
References 1107
IndexIIIIPreface xxix
PART1Overview 1
Chapter 1Introduction 3
1.1DATACOMMUNICATIONS 3
Components 4
DataRepresentation 5
DataFlow 6
1.2NETWORKS 7
Distributed Processing 7
Network Criteria 7
Physical Structures 8
Network Models 13
Categories ofNetworks 13
Interconnection ofNetworks: Internetwork IS
1.3THEINTERNET 16
ABriefHistory 17
TheInternetToday 17
1.4PROTOCOLS ANDSTANDARDS 19
Protocols 19
Standards 19
Standards Organizations 20
InternetStandards 21
1.5RECOMMENDED READING 21
Books 21
Sites22
RFCs22
1.6KEYTERMS 22
1.7SUMMARY 23
1.8PRACTICE SET24
ReviewQuestions 24
Exercises 24
Research Activities 25
Chapter 2Network Models 27
2.1LAYERED TASKS 27
Sender,Receiver, andCarrier 28
Hierarchy 29
ixxCONTENTS
2.2THEOSIMODEL 29
LayeredArchitecture 30
Peer-to-Peer Processes 30
Encapsulation 33
2.3LAYERS INTHEOSIMODEL 33
Physical Layer33
DataLinkLayer34
Network Layer36
Transport Layer37
SessionLayer39
Presentation Layer39
Application Layer41
Summary ofLayers 42
2.4TCP/IPPROTOCOL SUITE 42
PhysicalandDataLinkLayers 43
Network Layer 43
Transport Layer 44
Application Layer45
2.5ADDRESSING 45
PhysicalAddresses 46
LogicalAddresses 47
PortAddresses 49
SpecificAddresses 50
2.6RECOMMENDED READING 50
Books 51
Sites51
RFCs51
2.7KEYlERMS 51
2.8SUMMARY 52
2.9PRACTICE SET52
ReviewQuestions 52
Exercises 53
Research Activities 54
PART2Physical LayerandMedia 55
Chapter 3DataandSignals 57
3.1ANALOG ANDDIGITAL 57
AnalogandDigitalData57
AnalogandDigitalSignals 58
PeriodicandNonperiodic Signals 58
3.2PERIODIC ANALOG SIGNALS 59
SineWave59
Phase63
Wavelength 64
TimeandFrequency Domains 65
Composite Signals 66
Bandwidth 69
3.3DIGITAL SIGNALS 71
BitRate73
BitLength 73
DigitalSignalasaComposite AnalogSignal74
Transmission ofDigitalSignals 743.4TRANSMISSION IMPAIRMENT 80
Attenuation 81
Distortion 83
Noise84
3.5DATARATELIMITS 85
Noiseless Channel: NyquistBitRate86
NoisyChannel: Shannon Capacity 87
UsingBothLimits 88
3.6PERFORMANCE 89
Bandwidth 89
Throughput 90
Latency(Delay) 90
Bandwidth-Delay Product 92
Jitter94
3.7RECOMMENDED READING 94
Books94
3.8KEYTERMS 94
3.9SUMMARY 95
3.10PRACTICE SET96
ReviewQuestions 96
Exercises 96
Chapter 4DigitalTransmission 101
4.1DIGITAL-TO-DIGITAL CONVERSION 101
LineCoding 101
LineCodingSchemes 106
BlockCoding 115
Scrambling 118
4.2ANALOG-TO-DIGITAL CONVERSION 120
PulseCodeModulation (PCM) 121
DeltaModulation (DM)129
4.3TRANSMISSION MODES 131
ParallelTransmission 131
SerialTransmission 132
4.4RECOMMENDED READING 135
Books135
4.5KEYTERMS 135
4.6SUMMARY 136
4.7PRACTICE SET137
ReviewQuestions 137
Exercises 137
Chapter 5AnalogTranSl1'lission 141
5.1DIGITAL-TO-ANALOG CONVERSION 141
AspectsofDigital-to-Analog Conversion 142
Amplitude ShiftKeying 143
Frequency ShiftKeying 146
PhaseShiftKeying 148
Quadrature Amplitude Modulation 152
5.2ANALOG- TO-ANALOG CONVERSION 152
Amplitude Modulation 153
Frequency Modulation 154
PhaseModulation 155CONTENTS xixiiCONTENTS
5.3RECOMMENDED READING 156
Books156
5.4KEYlERMS 157
5.5SUMMARY 157
5.6PRACTICE SET158
ReviewQuestions 158
Exercises 158
Chapter 6Ba17chridth Utili::.ation: Multiplexing
andSpreading 161
6.1MULTIPLEXING 161
Frequency-Division Multiplexing 162
Wavelength-Division Multiplexing 167
Synchronous Time-Division Multiplexing 169
Statistical Time-Division Multiplexing 179
6.2SPREAD SPECTRUM 180
Frequency Hopping SpreadSpectrum (FHSS) 181
DirectSequence SpreadSpectrum 184
6.3RECOMMENDED READING 185
Books 185
6.4KEYlERMS 185
6.5SUMMARY 186
6.6PRACTICE SET187
ReviewQuestions 187
Exercises 187
Chapter 7Transmission Media 191
7.1GUIDED MEDIA 192
Twisted-Pair Cable193
CoaxialCable195
Fiber-Optic Cable198
7.2UNGUIDED MEDIA: WIRELESS 203
RadioWaves205
Microwaves 206
Infrared 207
7.3RECOMMENDED READING 208
Books208
7.4KEYlERMS 208
7.5SUMMARY 209
7.6PRACTICE SET209
ReviewQuestions 209
Exercises 210
Chapter 8Svvitching 213
8.1CIRCUIT-SWITCHED NETWORKS 214
ThreePhases 217
Efficiency 217
Delay217
Circuit-Switched Technology inTelephone Networks 218
8.2DATAGRAM NETWORKS 218
RoutingTable220CONTENTS xiii
Efficiency 220
Delay221
Datagram Networks intheInternet 221
8.3VIRTUAL-CIRCUIT NETWORKS 221
Addressing 222
ThreePhases 223
Efficiency 226
DelayinVirtual-Circuit Networks 226
Circuit-Switched Technology inWANs227
8.4STRUCTURE OFASWITCH 227
Structure ofCircuitSwitches 227
Structure ofPacketSwitches 232
8.5RECOMMENDED READING 235
Books235
8.6KEYTERMS 235
8.7SUMMARY 236
8.8PRACTICE SET236
ReviewQuestions 236
Exercises 237
Chapter 9UsingTelephone andCableNetworks forData
Transm,ission 241
9.11ELEPHONE NETWORK 241
MajorComponents 241
LATAs 242
Signaling 244
ServicesProvided byTelephone Networks 247
9.2DIAL-UP MODEMS 248
ModemStandards 249
9.3DIGITAL SUBSCRIBER LINE251
ADSL252
ADSLLite254
HDSL255
SDSL255
VDSL255
Summary 255
9.4CABLETVNETWORKS 256
Traditional CableNetworks 256
HybridFiber-Coaxial (HFC)Network 256
9.5CABLETVFORDATATRANSFER 257
Bandwidth 257
Sharing 259
CMandCMTS 259
DataTransmission Schemes: DOCSIS 260
9.6RECOMMENDED READING 261
Books261
9.7KEYTERMS 261
9.8SUMMARY 262
9.9PRACTICE SET263
ReviewQuestions 263
Exercises 264xivCONTENTS
PART3DataLinkLayer265
Chapter10ErrorDetection andCorrection 267
10.1INTRODUCTION 267
TypesofErrors267
Redundancy 269
Detection VersusCorrection 269
ForwardErrorCorrection VersusRetransmission 269
Coding 269
Modular Arithmetic 270
10.2BLOCKCODING 271
ErrorDetection 272
ErrorCorrection 273
Hamming Distance 274
Minimum Hamming Distance 274
10.3LINEAR BLOCKCODES 277
Minimum Distance forLinearBlockCodes278
SomeLinearBlockCodes278
10.4CYCLIC CODES 284
CyclicRedundancy Check284
Hardware Implementation 287
Polynomials 291
CyclicCodeAnalysis 293
Advantages ofCyclic Codes 297
OtherCyclicCodes297
10.5CHECKSUM 298
Idea298
One'sComplement 298
InternetChecksum 299
10.6RECOMMENDED READING 30I
Books301
RFCs301
10.7KEYlERMS 301
10.8SUMMARY 302
10.9PRACTICE SET303
ReviewQuestions 303
Exercises 303
Chapter 11DataLinkControl 307
11.1FRAMING 307
Fixed-Size Framing 308
Variable-Size Framing 308
11.2FLOW AND ERRORCONTROL 311
FlowControl 311
ErrorControl 311
11.3PROTOCOLS 311
11.4NOISELESS CHANNELS 312
Simplest Protocol 312
Stop-and- WaitProtocol 315
11.5NOISYCHANNELS 318
Stop-and-Wait Automatic RepeatRequest 318
Go-Back-N Automatic RepeatRequest 32411.6
11.7
11.8
11.9
11.10
11.11Selective RepeatAutomatic RepeatRequest
Piggybacking 339
HDLC 340
Configurations andTransferModes 340
Frames 341
ControlField343
POINT-TO-POINT PROTOCOL 346
Framing 348
Transition Phases 349
Multiplexing 350
Multilink PPP355
RECOMMENDED READING 357
Books357
KEYTERMS 357
SUMMARY 358
PRACTICE SET359
ReviewQuestions 359
Exercises 359332CONTENTS xv
Chapter 12Multiple Access 363
12.1RANDOMACCESS 364
ALOHA 365
CarrierSenseMultiple Access(CSMA) 370
CarrierSenseMultiple AccesswithCollision Detection (CSMAlCD) 373
CarrierSenseMultiple AccesswithCollision Avoidance (CSMAlCA) 377
12.2CONTROLLED ACCESS 379
Reservation 379
Polling 380
TokenPassing 381
12.3CHANNELIZATION 383
Frequency-Division Multiple Access(FDMA) 383
Time-Division Multiple Access(TDMA) 384
Code-Division Multiple Access(CDMA) 385
12.4RECOMMENDED READING 390
Books391
12.5KEYTERMS 391
12.6SUMMARY 391
12.7PRACTICE SET392
ReviewQuestions 392
Exercises 393
Research Activities 394
Chapter 13WiredLANs:Ethernet 395
13.1IEEESTANDARDS 395
DataLinkLayer396
Physical Layer397
13.2STANDARD ETHERNET 397
MACSublayer 398
Physical Layer402
13.3CHANGES INTHESTANDARD 406
BridgedEthernet 406
Switched Ethernet 407
Full-Duplex Ethernet 408xviCONTENTS
13.4FASTETHERNET 409
MACSublayer409
PhysicalLayer410
13.5GIGABIT ETHERNET 412
MACSublayer 412
PhysicalLayer414
Ten-Gigabit Ethernet 416
13.6RECOMMENDED READING 417
Books417
13.7KEYTERMS 417
13.8SUMMARY 417
13.9PRACTICE SET418
ReviewQuestions 418
Exercises 419
Chapter 14Wireless LANs421
14.1IEEE802.11 421
Architecture 421
MACSublayer 423
Addressing Mechanism 428
PhysicalLayer432
14.2BLUETOOTH 434
Architecture 435
Bluetooth Layers 436
RadioLayer436
Baseband Layer437
L2CAP 440
OtherUpperLayers 441
14.3RECOMMENDED READING 44I
Books442
14.4KEYTERMS 442
14.5SUMMARY 442
14.6PRACTICE SET443
ReviewQuestions 443
Exercises 443
Chapter 15Connecting LANs,Backbone Networks,
andVirtuaLLANs445
15.1CONNECTING DEVICES 445
PassiveHubs446
Repeaters 446
ActiveHubs447
Bridges 447
Two-Layer Switches 454
Routers 455
Three-Layer Switches 455
Gateway 455
15.2BACKBONE NETWORKS 456
BusBackbone 456
StarBackbone 457
Connecting RemoteLANs45715.3VIRTUAL LANs 458
Membership 461
Configuration 461
Communication Between Switches 462
IEEE Standard 462
Advantages 463
15.4RECOMMENDED READING 463
Books463
Site463
15.5KEYTERMS 463
15.6SUMMARY 464
15.7PRACTICE SET464
ReviewQuestions 464
Exercises 465CONTENTS xvii
Chapter 16WirelessWANs:Cellular Telephone and
SatelliteNetworks 467
16.1CELLULAR TELEPHONY 467
Frequency-Reuse Principle 467
Transmitting 468
Receiving 469
Roaming 469
FirstGeneration 469
SecondGeneration 470
ThirdGeneration 477
16.2SATELLITE NETWORKS 478
Orbits479
Footprint 480
ThreeCategories ofSatellites 480
GEOSatellites 481
MEOSatellites 481
LEOSatellites 484
16.3RECOMMENDED READING 487
Books487
16.4KEYTERMS 487
16.5SUMMARY 487
16.6PRACTICE SET488
ReviewQuestions 488
Exercises 488
Chapter 17SONETISDH 491
17.1ARCHITECTURE 491
Signals 491
SONETDevices 492
Connections 493
17.2SONETLAYERS 494
PathLayer494
LineLayer495
SectionLayer495
Photonic Layer495
Device-Layer Relationships 495xviii CONTENTS
17.3SONETFRAMES 496
Frame,Byte,andBitTransmission 496
STS-lFrameFormat 497
Overhead Summary 501
Encapsulation 501
17.4STSMULTIPLEXING 503
ByteInterleaving 504
Concatenated Signal 505
AddlDrop Multiplexer 506
17.5SONETNETWORKS 507
LinearNetworks 507
RingNetworks 509
MeshNetworks 510
17.6VIRTUAL TRIBUTARIES 512
TypesofVTs 512
17.7RECOMMENDED READING 513
Books 513
17.8KEYlERMS 513
17.9SUMMARY 514
17.10PRACTICE SET514
ReviewQuestions 514
Exercises 515
Chapter 18Virtual-Circuit Networks: FrameRelm'andATM517
18.1FRAMERELAY 517
Architecture 518
FrameRelayLayers 519
Extended Address 521
FRADs 522
VOFR 522
LMI522
Congestion ControlandQualityofService 522
18.2ATM523
DesignGoals523
Problems 523
Architecture 526
Switching 529
ATMLayers 529
Congestion ControlandQualityofService 535
18.3ATMLANs536
ATMLANArchitecture 536
LANEmulation (LANE) 538
Client/Server Model 539
MixedArchitecture withClient/Server 540
18.4RECOMMENDED READING 540
Books 541
18.5KEYlERMS 541
18.6SUMMARY 541
18.7PRACTICE SET543
ReviewQuestions 543
Exercises 543CONTENTS xix
PART4Network Layer547
Chapter 19Netvl/ark Layer:LogicalAddressing 549
19.1IPv4ADDRESSES 549
AddressSpace550
Notations 550
ClassfulAddressing 552
Classless Addressing 555
Network AddressTranslation (NAT)563
19.2IPv6ADDRESSES 566
Structure 567
AddressSpace568
19.3RECOMMENDED READING 572
Books572
Sites572
RFCs572
19.4KEYTERMS 572
19.5SUMMARY 573
19.6PRACTICE SET574
ReviewQuestions 574
Exercises 574
Research Activities 577
Chapter20Network Layer:InternetProtocol 579
20.1INTERNETWORKING 579
NeedforNetwork Layer579
InternetasaDatagram Network 581
InternetasaConnectionless Network 582
20.2IPv4582
Datagram 583
Fragmentation 589
Checksum 594
Options 594
20.3IPv6596
Advantages 597
PacketFormat 597
Extension Headers 602
20.4TRANSITION FROMIPv4TOIPv6603
DualStack604
Tunneling 604
HeaderTranslation 605
20.5RECOMMENDED READING 605
Books606
Sites606
RFCs606
20.6KEYTERMS 606
20.7SUMMARY 607
20.8PRACTICE SET607
ReviewQuestions 607
Exercises 608
Research Activities 609xxCONTENTS
Chapter 21Network Layer:AddressMapping, ErrorReporting,
andMulticasting 611
21.1ADDRESS MAPPING 611
Mapping LogicaltoPhysicalAddress: ARP612
Mapping PhysicaltoLogicalAddress: RARp,BOOTP,andDHCP618
21.2ICMP621
TypesofMessages 621
Message Format 621
ErrorReporting 622
Query625
Debugging Tools627
21.3IGMP630
GroupManagement 630
IGMPMessages 631
Message Format 631
IGMPOperation 632
Encapsulation 635
NetstatUtility637
21.4ICMPv6 638
ErrorReporting 638
Query639
21.5RECOMMENDED READING 640
Books641
Site641
RFCs641
21.6KEYTERMS 641
21.7SUMMARY 642
21.8PRACTICE SET643
ReviewQuestions 643
Exercises 644
Research Activities 645
Chapter 22Network Layer:Delivery, Forwarding,
andRouting 647
22.1DELIVERY 647
DirectVersusIndirectDelivery 647
22.2FORWARDING 648
Forwarding Techniques 648
Forwarding Process 650
RoutingTable655
22.3UNICAST ROUTING PROTOCOLS 658
Optimization 658
Intra-andInterdomain Routing 659
Distance VectorRouting 660
LinkStateRouting 666
PathVectorRouting 674
22.4MULTICAST ROUTING PROTOCOLS 678
Unicast,Multicast, andBroadcast 678
Applications 681
Multicast Routing 682
RoutingProtocols 684CONTENTS xxi
22.5RECOMMENDED READING 694
Books694
Sites694
RFCs694
22.6KEYlERMS 694
22.7SUMMARY 695
22.8PRACTICE SET697
ReviewQuestions 697
Exercises 697
Research Activities 699
PART5Transport Layer 701
Chapter 23Process-fa-Process Delivery: UDp,TCp,
andSeTP703
23.1PROCESS-TO-PROCESS DELIVERY 703
Client/Server Paradigm 704
Multiplexing andDemultiplexing 707
Connectionless VersusConnection-Oriented Service 707
ReliableVersusUnreliable 708
ThreeProtocols 708
23.2USERDATAGRAM PROTOCOL (UDP)709
Well-KnownPortsforUDP709
UserDatagram 710
Checksum 711
UDPOperation 713
UseofUDP 715
23.3TCP715
TCPServices 715
TCPFeatures 719
Segment 721
ATCPConnection 723
FlowControl 728
ErrorControl 731
Congestion Control 735
23.4SCTP736
SCTPServices 736
SCTPFeatures 738
PacketFormat 742
AnSCTPAssociation 743
FlowControl 748
ErrorControl 751
Congestion Control 753
23.5RECOMMENDED READING 753
Books753
Sites753
RFCs753
23.6KEYlERMS 754
23.7SUMMARY 754
23.8PRACTICE SET756
ReviewQuestions 756
Exercises 757
Research Activities 759xxiiCONTENTS
Chapter 24Congestion ControlandQuality (~j'Service 767
24.1DATAlRAFFIC 761
TrafficDescriptor 76]
TrafficProfiles 762
24.2CONGESTION 763
Network Performance 764
24.3CONGESTION CONTROL 765
Open-Loop Congestion Control 766
Closed-Loop Congestion Control 767
24.4lWOEXAMPLES 768
Congestion ControlinTCP769
Congestion ControlinFrameRelay773
24.5QUALITY OFSERVICE 775
FlowCharacteristics 775
FlowClasses 776
24.6TECHNIQUES TOIMPROVE QoS776
Scheduling 776
TrafficShaping 777
Resource Reservation 780
Admission Control 780
24.7INTEGRATED SERVICES 780
Signaling 781
FlowSpecification 781
Admission 781
ServiceClasses 781
RSVP782
Problems withIntegrated Services 784
24.8DIFFERENTIATED SERVICES 785
DSField785
24.9QoSINSWITCHED NETWORKS 786
QoSinFrameRelay787
QoSinATM 789
24.10RECOMMENDED READING 790
Books 791
24.11KEYTERMS 791
24.12SUMMARY 791
24.13PRACTICE SET792
ReviewQuestions 792
Exercises 793
PART6Application Layer795
Chapter 25DO/nain NameSvstem 797
25.1NAMESPACE 798
FlatNameSpace798
Hierarchical NameSpace798
25.2DOMAIN NAMESPACE 799
Label799
DomainNarne799
Domain 80125.3
25.4
25.5
25.6
25.7
25.8
25.9
25.10
25.11
25.12
25.13
25.14DISTRIBUTION OFNAMESPACE 801
Hierarchy ofNameServers 802
Zone802
RootServer803
PrimaryandSecondary Servers 803
DNSINTHEINTERNET 803
GenericDomains 804
CountryDomains 805
InverseDomain 805
RESOLUTION 806
Resolver 806
Mapping NamestoAddresses 807
Mapping AddresstoNames 807
Recursive Resolution 808
IterativeResolution 808
Caching 808
DNSMESSAGES 809
Header 809
TYPESOFRECORDS 811
Question Record 811
Resource Record 811
REGISTRARS 811
DYNAMIC DOMAIN NAMESYSTEM (DDNS)
ENCAPSULATION 812
RECOMMENDED READING 812
Books 813
Sites813
RFCs813
KEYTERMS 813
SUMMARY 813
PRACTICE SET814
ReviewQuestions 814
Exercises 815812CONTENTS xxiii
Chapter 26RemoteLogging, Electronic Mail,andFileTransfer 817
26.1REMOTE LOGGING 817
TELNET 817
26.2ELECTRONIC MAIL824
Architecture 824
UserAgent828
Message TransferAgent:SMTP834
Message AccessAgent:POPandIMAP837
Web-Based Mail839
26.3FILETRANSFER 840
FileTransferProtocol (FTP)840
Anonymous FTP844
26.4RECOMMENDED READING 845
Books845
Sites845
RFCs845
26.5KEYlERMS 845
26.6SUMMARY 846xxiv CONTENTS
26.7PRACTICE SET847
ReviewQuestions 847
Exercises 848
Research Activities 848
Chapter 27WWWandHTTP851
27.1ARCHITECTURE 851
Client(Browser) 852
Server 852
Uniform Resource Locator 853
Cookies 853
27.2WEBDOCUMENTS 854
StaticDocuments 855
Dynamic Documents 857
ActiveDocuments 860
27.3HTTP861
HTTPTransaction 861
Persistent VersusNonpersistent Connection 868
ProxyServer 868
27.4RECOMMENDED READING 869
Books 869
Sites869
RFCs869
27.5KEY1ERMS 869
27.6SUMMARY 870
27.7PRACTICE SET871
ReviewQuestions 871
Exercises 871
Chapter 28Network Management: SNMP 873
28.1NETWORK MANAGEMENT SYSTEM 873
Configuration Management 874
FaultManagement 875
Performance Management 876
SecurityManagement 876
Accounting Management 877
28.2SIMPLE NETWORK MANAGEMENT PROTOCOL (SNMP) 877
Concept 877
Management Components 878
Structure ofManagement Information 881
Management Information Base(MIB)886
Lexicographic Ordering 889
SNMP 891
Messages 893
UDPPorts895
Security 897
28.3RECOMMENDED READING 897
Books 897
Sites897
RFCs897
28.4KEY1ERMS 897
28.5SUMMARY 89828.6PRACTICE SET899
ReviewQuestions 899
Exercises 899
Chapter 29Multimedia 901
29.1DIGITIZING AUDIOANDVIDEO 902
Digitizing Audio902
Digitizing Video902
29.2AUDIOANDVIDEOCOMPRESSION 903
AudioCompression 903
VideoCompression 904
29.3STREAMING STORED AUDIO/VIDEO 908
FirstApproach: UsingaWebServer909
SecondApproach: UsingaWebServerwithMetafile 909
ThirdApproach: UsingaMediaServer910
FourthApproach: UsingaMediaServerandRTSP911
29.4STREAMING LIVEAUDIOIVIDEO 912
29.5REAL-TIME INTERACTIVE AUDIOIVIDEO 912
Characteristics 912
29.6RTP916
RTPPacketFormat 917
UDPPort 919
29.7RTCP919
SenderReport 919
Receiver Report 920
SourceDescription Message 920
ByeMessage 920
Application-Specific Message 920
UDPPort920
29.8VOICEOVERIP920
SIP920
H.323923
29.9RECOMMENDED READING 925
Books 925
Sites925
29.10KEY1ERMS 925
29.11SUMMARY 926
29.12PRACTICE SET927
ReviewQuestions 927
Exercises 927
Research Activities 928
PART7Security 929
Chapter 30Cryptography 931
30.1INTRODUCTION 931
Definitions 931
TwoCategories 932
30.2SYMMETRIC-KEY CRYPTOGRAPHY 935
Traditional Ciphers 935
SimpleModemCiphers 938CONTENTS xxvxxvi CONTENTS
ModernRoundCiphers 940
ModeofOperation 945
30.3ASYMMETRIC-KEY CRYPTOGRAPHY 949
RSA 949
Diffie-Hellman 952
30.4RECOMMENDED READING 956
Books956
30.5KEYTERMS 956
30.6SUMMARY 957
30.7PRACTICE SET958
ReviewQuestions 958
Exercises 959
Research Activities 960
Chapter 31Network Security 961
31.1SECURITY SERVICES 961
Message Confidentiality 962
Message Integrity 962
Message Authentication 962
Message Nonrepudiation 962
EntityAuthentication 962
31.2MESSAGE CONFIDENTIALITY 962
Confidentiality withSymmetric-Key Cryptography 963
Confidentiality withAsymmetric-Key Cryptography 963
31.3MESSAGE INTEGRITY 964
Document andFingerprint 965
Message andMessage Digest965
Difference 965
Creating andChecking theDigest966
HashFunction Criteria 966
HashAlgorithms: SHA-1 967
31.4MESSAGE AUTHENTICATION 969
MAC969
31.5DIGITAL SIGNATURE 971
Comparison 97I
NeedforKeys972
Process 973
Services 974
Signature Schemes 976
31.6ENTITY AUTHENTICATION 976
Passwords 976
Challenge-Response 978
31.7KEYMANAGEMENT 981
Symmetric-Key Distribution 981
Public-Key Distribution 986
31.8RECOMMENDED READING 990
Books990
31.9KEYTERMS 990
31.10SUMMARY 991
31.11PRACTICE SET992
ReviewQuestions 992
Exercises 993
Research Activities 994CONTENTS xxvii
Chapter 32Security intheInternet: IPSec,SSUFLS, PGP,VPN,
andFirewalls 995
32.1IPSecurity (lPSec) 996
TwoModes 996
TwoSecurityProtocols 998
SecurityAssociation 1002
InternetKeyExchange (IKE) 1004
VirtualPrivateNetwork 1004
32.2SSLffLS 1008
SSLServices 1008
SecurityParameters 1009
Sessions andConnections 1011
FourProtocols 1012
Transport LayerSecurity 1013
32.3PGP1014
SecurityParameters 1015
Services 1015
AScenario 1016
PGPAlgorithms 1017
KeyRings1018
PGPCertificates 1019
32.4FIREWALLS 1021
Packet-Filter Firewall 1022
ProxyFirewall 1023
32.5RECOMMENDED READING 1024
Books1024
32.6KEYlERMS 1024
32.7SUMMARY 1025
32.8PRACTICE SET1026
ReviewQuestions 1026
Exercises 1026
Appendix AUnicode 1029
A.lUNICODE 1029
Planes 1030
BasicMultilingual Plane(BMP) 1030
SupplementaryMultilingual Plane (SMP) 1032
Supplementary Ideographic Plane(SIP)1032
Supplementary SpecialPlane(SSP)1032
PrivateUsePlanes(PUPs) 1032
A.2ASCII1032
SomeProperties ofASCII 1036
Appendix BNumbering Systems 1037
B.lBASE10:DECIMAL 1037
Weights 1038
B.2BASE2:BINARY 1038
Weights 1038
Conversion 1038xxviii CONTENTS
B.3BASE16:HEXADECIMAL 1039
Weights 1039
Conversion 1039
AComparison 1040
BABASE256:IPADDRESSES 1040
Weights 1040
Conversion 1040
B.5OTHERCONVERSIONS 1041
BinaryandHexadecimal 1041
Base256andBinary 1042
Appendix CMathenwtical Revietv 1043
C.1TRIGONOMETRIC FUNCTIONS 1043
SineWave1043
CosineWave1045
OtherTrigonometric Functions 1046
Trigonometric Identities 1046
C.2FOURIER ANALYSIS 1046
FourierSeries1046
FourierTransform 1048
C.3EXPONENT ANDLOGARITHM 1050
Exponential Function 1050
Logarithmic Function 1051
Appendix 08B/6TCode1055
Appendix ETelephone History 1059
Before19841059
Between 1984and19961059
After1996 1059
Appendix FContactAddresses 1061
Appendix GRFCs1063
Appendix HUDPandTCPPorts1065
Acronyms 1067
Glossary 1071
References 1107
Index1111Datacommunications andnetworking maybethefastestgrowing technologies inour
culturetoday.Oneoftheramifications ofthatgrowthisadramatic increaseinthenumber
ofprofessions whereanunderstanding ofthesetechnologies isessential forsuccess­
andaproportionate increaseinthenumberandtypesofstudentstakingcoursestolearn
aboutthem.
Features oftheBook
Severalfeaturesofthistextaredesigned tomakeitparticularly easyforstudents to
understand datacommunications andnetworking.
Structure
Wehaveusedthefive-layer Internetmodelastheframework forthetextnotonlybecause
athorough understanding ofthemodelisessential tounderstanding mostcurrentnetwork­
ingtheorybutalsobecauseitisbasedonastructure ofinterdependencies: Eachlayer
buildsuponthelayerbeneathitandsupportsthelayeraboveit.Inthesameway,eachcon­
ceptintroduced inourtextbuildsupontheconcepts examined intheprevioussections.The
Internetmodelwaschosenbecauseitisaprotocolthatisfullyimplemented.
Thistextisdesigned forstudentswithlittleornobackground intelecommunica­
tionsordatacommunications. Forthisreason,weuseabottom-up approach. Withthis
approach, studentslearnfirstaboutdatacommunications (lowerlayers)beforelearning
aboutnetworking (upperlayers).
VisualApproach
Thebookpresentshighlytechnical subjectmatterwithoutcomplex formulas byusinga
balanceoftextandfigures.Morethan700figuresaccompanying thetextprovidea
visualandintuitiveopportunity forunderstanding thematerial. Figuresareparticularly
important inexplaining networking concepts, whicharebasedonconnections and
transmission. Bothoftheseideasareeasytograspvisually.
Highlighted Points
Weemphasize important concepts inhighlighted boxesforquickreference andimme­
diateattention.
xxixxxxPREFACE
Examples andApplications
Whenappropriate, wehaveselectedexamples toreflecttrue-to-life situations. Forexam­
ple,inChapter6wehaveshownseveralcasesoftelecommunications incurrenttelephone
networks.
Recommended Reading
Eachchapterincludes alistofbooksandsitesthatcanbeusedforfurtherreading.
KeyTerms
Eachchapterincludesalistofkeytermsforthestudent.
Summary
Eachchapterendswithasummary ofthematerial coveredinthatchapter.Thesum­
maryprovides abriefoverview ofalltheimportant pointsinthechapter.
PracticeSet
Eachchapterincludes apracticesetdesigned toreinforce andapplysalientconcepts.It
consistsofthreeparts:reviewquestions, exercises, andresearch activities (onlyfor
appropriate chapters). Reviewquestions areintendedtotestthestudent'sfirst-level under­
standingofthematerialpresented inthechapter.Exercises requiredeeperunderstanding
ofthemateriaL Research activities aredesigned tocreatemotivation forfurtherstudy.
Appendixes
Theappendixes areintended toprovidequickreference materialorareviewofmateri­
alsneededtounderstand theconcepts discussed inthebook.
Glossary andAcronyms
Thebookcontains anextensive glossary andalistofacronyms.
Changes intheFourthEdition
TheFourthEditionhasmajorchangesfromtheThirdEdition,bothintheorganization
andinthecontents.
Organization
Thefollowing liststhechangesintheorganization ofthebook:
1.Chapter6nowcontains multiplexing aswellasspreading.
2.Chapter8isnowtotallydevotedtoswitching.
3.ThecontentsofChapter12aremovedtoChapter11.
4.Chapter17coversSONETtechnology.
5.Chapter19discusses IPaddressing.
6.Chapter20isdevotedtotheInternetProtocol.
7.Chapter21discusses threeprotocols: ARP,ICMP,andIGMP.
8.Chapter28isnewanddevotedtonetworkmanagement intheInternet.
9.Theprevious Chapters 29to31arenowChapters 30to32.PREFACE xxxi
Contents
Wehaverevisedthecontents ofmanychapters including thefollowing:
1.Thecontents ofChapters 1to5arerevisedandaugmented. Examples areaddedto
clarifythecontents.
2.Thecontents ofChapter10arerevisedandaugmented toincludemethodsoferror
detection andcorrection.
3.Chapter 11isrevisedtoincludeafulldiscussion ofseveralcontrollinkprotocols.
4.Delivery, forwarding, androutingofdatagrams areaddedtoChapter22.
5.Thenewtransport protocol, SCTP,isaddedtoChapter23.
6.Thecontents ofChapters 30, 31,and32arerevisedandaugmented to include
additional discussion aboutsecurityissuesandtheInternet.
7.Newexamples areaddedtoclarifytheunderstanding ofconcepts.
EndMaterials
1.Asectionisaddedtotheendofeachchapterlistingadditional sourcesforstudy.
2.Thereviewquestions arechanged andupdated.
3.Themultiple-choice questions aremovedtothebooksitetoallowstudentstoself-test
theirknowledge aboutthecontentsofthechapterandreceiveimmediate feedback.
4.Exercises arerevisedandnewonesareaddedtotheappropriate chapters.
5.Somechapters containresearch activities.
Instructional Materials
Instructional materials forboththestudentandtheteacherarerevisedandaugmented.
Thesolutions toexercises containboththeexplanation andanswerincluding fullcol­
oredfiguresortableswhenneeded.ThePowerpoint presentations aremorecompre­
hensiveandincludetextandfigures.
Contents
Thebookisdividedintosevenparts.Thefirstpartisanoverview; thelastpartconcerns
network security. Themiddlefivepartsaredesigned torepresent thefivelayersofthe
Internetmodel.Thefollowing summarizes thecontentsofeachpart.
PartOne:Overview
Thefirstpartgivesageneraloverview ofdatacommunications andnetworking. Chap­
ter1coversintroductory concepts neededfortherestofthebook.Chapter2introduces
theInternetmodel.
PartTwo:Physical Layer
Thesecondpartisadiscussion ofthephysical layeroftheInternetmodel.Chapters 3
to6discusstelecommunication aspectsofthephysical layer.Chapter7introduces the
transmission media,which,although notpartofthephysical layer,iscontrolled byit.
Chapter8isdevotedtoswitching, whichcanbeusedinseverallayers.Chapter9shows
howtwopublicnetworks, telephone andcableTV,canbeusedfordatatransfer.xxxii PREFACE
PartThree:DataLinkLayer
Thethirdpartisdevotedtothediscussion ofthedatalinklayeroftheInternetmodel.
Chapter10coverserrordetection andcorrection. Chapters 11,12discussissuesrelated
todatalinkcontrol.Chapters 13through16dealwithLANs.Chapters 17and]8are
aboutWANs.LANsandWANsareexamples ofnetworks operating inthefirsttwolay­
ersoftheInternetmodel.
PartFour:Network Layer
Thefourthpartisdevotedtothediscussion ofthenetworklayeroftheInternetmodel.
Chapter19coversIPaddresses. Chapters 20and21aredevotedtothenetworklayer
protocols suchasIP,ARP,ICMP,andIGMP.Chapter22discusses delivery,forwarding,
androutingofpacketsintheInternet.
PartFive:Transport Layer
Thefifthpartisdevotedtothediscussion ofthetransport layeroftheInternetmodel.
Chapter23givesanoverview ofthetransport layeranddiscusses theservices and
dutiesofthislayer.Italsointroduces threetransport-layer protocols: UDP,TCP,and
SCTP.Chapter 24discusses congestion controlandqualityofservice,twoissues
relatedtothetransport layerandtheprevious twolayers.
PartSix:Application Layer
Thesixthpartisdevotedtothediscussion oftheapplication layeroftheInternetmodel.
Chapter25isaboutDNS,theapplication programthatisusedbyotherapplication pro­
gramstomapapplication layeraddresses tonetworklayeraddresses. Chapter26to29
discusssomecommon applications protocols intheInternet.
PartSeven:Security
Theseventhpartisadiscussion ofsecurity.Itservesasapreludetofurtherstudyinthis
subject.Chapter30brieflydiscusses cryptography. Chapter 31introduces security
aspects.Chapter32showshowdifferent securityaspectscanbeappliedtothreelayers
oftheInternetmodel.
OnlineLearning Center
TheMcGraw-Hill OnlineLearning Centercontains muchadditional material. Avail­
ableatwww.mhhe.com/forouzan. AsstudentsreadthroughDataCommunications and
Networking, theycangoonlinetotakeself-grading quizzes.Theycanalsoaccesslec­
turematerials suchasPowerPoint slides,andgetadditional reviewfromanimated fig­
uresfromthebook.Selectedsolutions arealsoavailable overtheWeb.Thesolutions to
odd-numbered problems areprovided tostudents, andinstructors canuseapassword to
accessthecomplete setofsolutions.
Additionally, McGraw-Hill makesiteasytocreateawebsiteforyournetworking
coursewithanexclusive McGraw-Hill productcalledPageOut. Itrequiresnoprior
knowledge ofHTML,nolonghours,andnodesignskillsonyourpart.Instead,Page:­
Outoffersaseriesoftemplates. Simplyfillthemwithyourcourseinformation andPREFACE xxxiii
clickononeof16designs.Theprocesstakesunderanhourandleavesyouwithapro­
fessionally designed website.
Although PageOut offers"instant" development, thefinishedwebsiteprovides pow­
erfulfeatures.Aninteractive coursesyllabusallowsyoutopostcontenttocoincide with
yourlectures,sowhenstudentsvisityourPageOutwebsite,yoursyllabuswilldirectthem
tocomponents ofForouzan's OnlineLearning Center,orspecificmaterialofyourown.
HowtoUsetheBook
Thisbookiswrittenforbothanacademic andaprofessional audience. Thebookcanbe
usedasaself-study guideforinterested professionals. Asatextbook, itcanbeusedfor
aone-semester orone-quarter course.Thefollowing aresomeguidelines.
oPartsonetothreearestronglyrecommended.
oPartsfourtosixcanbecoveredifthereisnofollowing courseinTCP/IPprotocol.
oPartsevenisrecommended ifthereisnofollowing courseinnetworksecurity.
Acknowledgments
Itisobviousthatthedevelopment ofabookofthisscopeneedsthesupportofmanypeople.
PeerReview
Themostimportant contribution tothedevelopment ofabooksuchasthiscomesfrom
peerreviews. Wecannotexpressourgratitude inwordstothemanyreviewers who
spentnumerous hoursreadingthemanuscript andproviding uswithhelpfulcomments
andideas.Wewouldespecially liketoacknowledge thecontributions ofthefollowing
reviewers forthethirdandfourtheditionsofthisbook.
FaridAhmed,Catholic University
KavehAshenayi, University ofTulsa
YorisAu,University ofTexas,SanAntonio
EssieBakhtiar, ClaytonCollege&StateUniversity
Anthony Barnard, University ofAlabama, Brimingham
A.T.Burrell,Oklahoma StateUniversity
ScottCampbell, MiamiUniversity
TeresaCarrigan, Blackburn College
HwaChang,TuftsUniversity
EdwardChlebus, IllinoisInstituteofTechnology
PeterCooper,SamHouston StateUniversity
RichardCoppins, VirginiaCommonwealth University
HarpalDhillon,Southwestern Oklahoma StateUniversity
Hans-Peter Dommel, SantaClaraUniversity
M.BarryDumas,BaruchCollege,CUNY
WilliamFigg,DakotaStateUniversity
DaleFox,Quinnipiac University
Terrence Fries,CoastalCarolina University
ErrinFulp,WakeForestUniversityxxxiv PREFACE
Sandeep Gupta,ArizonaStateUniversity
GeorgeHamer,SouthDakotaStateUniversity
JamesHenson, California StateUniversity, Fresno
TomHilton,UtahStateUniversity
AllenHolliday, California StateUniversity, Fullerton
SeyedHosseinHosseini, University ofWisconsin, Milwaukee
GeraldIsaacs,CarrollCollege,Waukesha
Hrishikesh Joshi,DeVryUniversity
E.S.Khosravi, Southern University
BobKinicki,Worcester Polytechnic University
KevinKwiat,Hamilton College
Ten-Hwang Lai,OhioStateUniversity
Chung-Wei Lee,AuburnUniversity
Ka-Cheong Leung,TexasTechUniversity
Gertrude Levine,Fairleigh Dickinson University
AlvinSekSeeLim,AuburnUniversity
CharlesLiu,California StateUniversity, LosAngeles
Wenhang Liu,California StateUniversity, LosAngeles
MarkLlewellyn, University ofCentralFlorida
Sanchita Mal-Sarkar, Cleveland StateUniversity
LouisMarseille, HarfordCommunity College
KevinMcNeill, University ofArizona
ArnoldC.Meltzer, GeorgeWashington University
Rayman Meservy, Brigham YoungUniversity
PrasantMohapatra, University ofCalifornia, Davis
HungZNgo,SUNY,Buffalo
LarryOwens,California StateUniversity, Fresno
ArnoldPatton,BradleyUniversity
DollySamson, HawaiiPacificUniversity
JosephSherif,California StateUniversity, Fullerton
RobertSimon,GeorgeMasonUniversity
Ronald1.Srodawa, Oakland University
DanielTian,California StateUniversity, Monterey Bay
RichardTibbs,RadfordUniversity
Christophe Veltsos,Minnesota StateUniversity, Mankato
YangWang,University ofMaryland, CollegePark
SheraliZeadally, WayneStateUniversity
McGraw-Hill Staff
SpecialthanksgotothestaffofMcGraw-Hill. AlanApt,ourpublisher, provedhowa
proficient publisher canmaketheimpossible possible. Rebecca Olson,thedevelopmen­
taleditor,gaveushelpwhenever weneededit.SheilaFrank,ourprojectmanager,
guidedusthroughtheproduction processwithenormous enthusiasm. Wealsothank
DavidHashindesign,KaraKudronowicz inproduction, andPattiScott,thecopyeditor.Overview
Objectives
Part1provides ageneralideaofwhatwewillseeintherestofthebook.Fourmajor
concepts arediscussed: datacommunications, networking, protocols andstandards,
andnetworking models.
Networks existsothatdatamaybesentfromoneplacetoanother-the basiccon­
ceptofdatacommunications. Tofullygraspthissubject,wemustunderstand thedata
communication components, howdifferent typesofdatacanberepresented, andhow
tocreateadataflow.
Datacommunications between remotepartiescanbeachieved throughaprocess
callednetworking, involving theconnection ofcomputers, media,andnetworking
devices.Networks aredividedintotwomaincategories: localareanetworks (LANs)
andwideareanetworks (WANs). Thesetwotypesofnetworks havedifferent charac­
teristicsanddifferent functionalities. TheInternet, themainfocusofthebook,isa
collection ofLANsandWANsheldtogetherbyinternetworking devices.
Protocols andstandards arevitaltotheimplementation ofdatacommunications
andnetworking. Protocols refertotherules;astandard isaprotocol thathasbeen
adoptedbyvendorsandmanufacturers.
Networkmodelsservetoorganize, unify,andcontrolthehardware andsoftwarecom­
ponentsofdatacommunications andnetworking. Although theterm"network model"
suggestsarelationship tonetworking, themodelalsoencompasses datacommunications.
Chapters
Thispartconsistsoftwochapters: Chapter1andChapter2.
Chapter1
InChapter1,weintroduce theconceptsofdatacommunications andnetworking. Wedis­
cussdatacommunications components, datarepresentation, anddataflow.Wethenmove
tothestructure ofnetworks thatcarrydata.Wediscussnetworktopologies, categories
ofnetworks, andthegeneralideabehindtheInternet. Thesectiononprotocols and
standards givesaquickoverview oftheorganizations thatsetstandards indatacommuni­
cationsandnetworking.Chapter2
Thetwodominant networking modelsaretheOpenSystems Interconnection (OSI)and
theInternet model(TCP/IP).The firstisatheoretical framework; thesecondisthe
actualmodelusedintoday'sdatacommunications. InChapter2,wefirstdiscussthe
OSImodeltogiveageneralbackground. Wethenconcentrate ontheInternetmodel,
whichisthefoundation fortherestofthebook.CHAPTERl
Introduction
Datacommunications andnetworking arechanging thewaywedobusinessandtheway
welive.Business decisions havetobemadeevermorequickly,andthedecisionmakers
requireimmediate accesstoaccurate information. Whywaitaweekforthatreport
fromGermany toarrivebymailwhenitcouldappearalmostinstantaneously through
computer networks? Businesses todayrelyoncomputer networks andinternetworks.
Butbeforeweaskhowquicklywecangethookedup,weneedtoknowhownetworks
operate,whattypesoftechnologies areavailable, andwhichdesignbestfillswhichset
ofneeds.
Thedevelopment ofthepersonalcomputer broughtabouttremendous changesfor
business, industry, science,andeducation. Asimilarrevolution isoccurring indata
communications andnetworking. Technological advances aremakingitpossiblefor
communications linkstocarrymoreandfastersignals.Asaresult,servicesareevolving
toallowuseofthisexpanded capacity. Forexample, established telephone services
suchasconference calling,callwaiting,voicemail,andcallerIDhavebeenextended.
Research indatacommunications andnetworking hasresultedinnewtechnolo­
gies.Onegoalistobeabletoexchange datasuchastext,audio, and videofromall
pointsintheworld.WewanttoaccesstheInternettodownload anduploadinformation
quicklyandaccurately andatanytime.
Thischapteraddresses fourissues:data communications, networks, theInternet,
andprotocols andstandards. Firstwegiveabroaddefinition ofdatacommunications.
Thenwedefinenetworks asahighway onwhichdatacantravel.TheInternetisdis­
cussedasagoodexampleofaninternetwork (i.e.,anetworkofnetworks). Finally,we
discussdifferent typesofprotocols, thedifference between protocols andstandards,
andtheorganizations thatsetthosestandards.
1.1DATACOMMUNICATIONS
Whenwecommunicate, wearesharinginformation. Thissharingcanbelocalor
remote.Between individuals, localcommunication usuallyoccursfacetoface,while
remotecommunication takesplaceoverdistance. Thetermtelecommunication, which
3I I,I4CHAPTER 1INTRODUCTION
includes telephony, telegraphy, andtelevision, meanscommunication atadistance(tele
isGreekfor"far").
Theworddatareferstoinformation presented inwhatever formisagreeduponby
thepartiescreatingandusingthedata.
Datacommunications aretheexchange ofdatabetween twodevicesviasome
formoftransmission medium suchasawirecable.Fordatacommunications tooccur,
thecommunicating devicesmustbepartofacommunication systemmadeupofacom­
binationofhardware (physical equipment) andsoftware (programs). Theeffectiveness
ofadatacommunications systemdepends onfourfundamental characteristics: deliv­
ery,accuracy, timeliness, andjitter.
I.Delivery. Thesystemmustdeliverdatatothecorrectdestination. Datamustbe
received bytheintended deviceoruserandonlybythatdeviceoruser.
7Accuracy. Thesystemmustdeliverthedataaccurately. Datathathavebeen
alteredintransmission andleftuncorrected areunusable.
3.Timeliness. Thesystemmustdeliverdatainatimelymanner.Datadelivered lateare
useless.Inthecaseofvideoandaudio,timelydelivery meansdelivering dataas
theyareproduced, inthesameorderthattheyareproduced, andwithoutsignifi­
cantdelay.Thiskindofdeliveryiscalledreal-time transmission.
-\..Jitter.Jitterreferstothevariation inthepacketarrivaltime.Itistheunevendelayin
thedeliveryofaudioorvideopackets.Forexample, letusassumethatvideopackets
aresentevery3Dms.Ifsomeofthepacketsarrivewith3D-msdelayandotherswith
4D-msdelay,anunevenqualityinthevideoistheresult.
COinponents
Adatacommunications systemhasfivecomponents (seeFigure1.1).
Figure1.1Fivecomponents ofdatacommunication
Rule1:
Rule2:
Rulen:Protocol
-1 Messager
MediumProtocolRule1:
Rule2:
Rulen:
I.Message. Themessage istheinformation (data)tobecommunicated. Popular
formsofinformation includetext,numbers, pictures, audio,andvideo.
ISender. Thesenderisthedevicethatsendsthedatamessage. Itcanbeacom­
puter,workstation, telephone handset, videocamera,andsoon.
3.Receiver. Thereceiver isthedevicethatreceives themessage.Itcanbeacom­
puter,workstation, telephone handset, television, andsoon.
-1..Transmission medium. Thetransmission medium isthephysical pathbywhich
amessage travelsfromsendertoreceiver. Someexamples oftransmission media
includetwisted-pair wire,coaxialcable,fiber-optic cable,andradiowaves.SECTION 1.1DATACOMMUNICATIONS 5
5.Protocol. Aprotocol isasetofrulesthatgoverndatacommunications. Itrepre­
sentsanagreement betweenthecommunicating devices.Withoutaprotocol, two
devicesmaybeconnected butnotcommunicating, justasapersonspeaking French
cannotbeunderstood byapersonwhospeaksonlyJapanese.
DataRepresentation
Information todaycomesindifferent formssuchastext,numbers, images,audio,and
video.
Text
Indatacommunications, textisrepresented asabitpattern,asequence ofbits(Osor
Is).Different setsofbitpatternshavebeendesigned torepresent textsymbols. Eachset
iscalledacode,andtheprocessofrepresenting symbols iscalledcoding.Today,the
prevalent codingsystemiscalledUnicode, whichuses32bitstorepresent asymbolor
character usedinanylanguage intheworld.TheAmerican Standard CodeforInfor­
mationInterchange (ASCII), developed somedecadesagointheUnitedStates,now
constitutes thefirst127characters inUnicode andisalsoreferredtoasBasicLatin.
Appendix AincludespartoftheUnicode.
Numbers
Numbers arealsorepresented bybitpatterns.However, acodesuchasASCIIisnotused
torepresent numbers; thenumberisdirectlyconverted toabinarynumbertosimplify
mathematical operations. Appendix Bdiscusses severaldifferentnumbering systems.
Images
Imagesarealsorepresented bybitpatterns. Initssimplestform,animageiscomposed
ofamatrixofpixels(pictureelements), whereeachpixelisasmalldot.Thesizeofthe
pixeldependsontheresolution. Forexample, animagecanbedividedinto1000pixels
or10,000pixels.Inthesecondcase,thereisabetterrepresentation oftheimage(better
resolution), butmorememoryisneededtostoretheimage.
Afteranimageisdividedintopixels,eachpixelisassigned abitpattern.Thesize
andthevalueofthepatterndependonthe image. Foranimagemadeofonlyblack­
and-white dots(e.g.,achessboard), aI-bitpatternisenoughtorepresent apixel.
Ifanimageisnotmadeofpurewhiteandpureblackpixels,youcanincreasethe
sizeofthebitpatterntoincludegrayscale.Forexample, toshowfourlevelsofgray
scale,youcanuse2-bitpatterns. Ablackpixelcanberepresented by00,adarkgray
pixelby01,alightgraypixelby10,andawhitepixelby11.
Thereareseveralmethods torepresent colorimages.OnemethodiscalledRGB,
socalledbecauseeachcolorismadeofacombination ofthreeprimarycolors:red,
green,andblue.Theintensityofeachcolorismeasured, andabitpatternisassigned to
it.AnothermethodiscalledYCM,inwhichacolorismadeofacombination ofthree
otherprimarycolors:yellow,cyan,andmagenta.
Audio
Audioreferstotherecording orbroadcasting ofsoundormusic.Audioisbynature
different fromtext,numbers, orimages.Itiscontinuous, notdiscrete. Evenwhenwe6CHAPTER 1INTRODUCTION
useamicrophone tochangevoiceormusictoanelectricsignal,wecreateacontinuous
signal.InChapters 4and5,welearnhowtochangesoundormusictoadigitaloran
analogsignal.
Video
Videoreferstotherecording orbroadcasting ofapictureormovie.Videocaneitherbe
produced asacontinuous entity(e.g.,byaTVcamera), oritcanbeacombination of
images,eachadiscrete entity,arranged toconveytheideaofmotion.Againwecan
changevideotoadigitalorananalogsignal,aswewillseeinChapters 4and5.
DataFlow
Communication between twodevicescan besimplex, half-duplex, orfull-duplex as
showninFigure1.2.
Figure1.2Dataflow(simplex, half-duplex, andfull-duplex)
Mainframe
a.Simplex
b.Half-duplex
c.Full·duplexDirection ofdata
Direction ofdataattimeI
~
Direction ofdataattime2
Direction ofdataallthetime
)Monitor
Simplex
Insimplexmode,thecommunication isunidirectional, asonaone-way street.Onlyone
ofthetwodevicesonalinkcantransmit; theothercanonly receive(seeFigure1.2a).
Keyboards andtraditional monitors areexamples ofsimplex devices. Thekey­
boardcanonlyintroduce input;themonitorcanonlyacceptoutput.Thesimplexmode
canusetheentirecapacityofthechanneltosenddatainonedirection.
Half-Duplex
Inhalf-duplex mode,eachstationcanbothtransmitandreceive,butnotatthesametime.:
Whenonedeviceissending,theothercanonlyreceive,andviceversa(seeFigure1.2b).SECTION 1.2NETWORKS 7
Thehalf-duplex modeislikeaone-lane roadwithtrafficallowedinbothdirec­
tions.Whencarsaretraveling inonedirection, carsgoingtheotherwaymustwait.Ina
half-duplex transmission, theentirecapacityofachannelistakenoverbywhichever of
thetwodevicesistransmitting atthetime.Walkie-talkies andCB(citizens band)radios
arebothhalf-duplex systems.
Thehalf-duplex modeisusedincaseswherethereisnoneedforcommunication
inbothdirections atthesametime;theentirecapacityofthechannelcanbeutilizedfor
eachdirection.
Full-Duplex
Infull-duplex m.,lle(als@calledduplex), bothstationscantransmitandreceivesimul­
taneously (seeFigure1.2c).
Thefull-duplex modeislikeatW<D-way streetwithtrafficflowinginbothdirec­
tionsatthesametime.Infull-duplex mode, si~nalsgoinginonedirection sharethe
capacityofthelink:withsignalsgoingintheother din~c~on. Thissharingcanoccurin
twoways:Eitherthelinkmustcontaintwophysically separate t:nmsmissiIDn paths,one
forsending andtheotherforreceiving; orthecapacity ofthech:arillilel isdivided
betweensignalstraveling inbothdirections.
Onecommon example offull-duplex communication isthetelephone network.
Whentwopeoplearecommunicating byatelephone line,bothcantalkandlistenatthe
sametime.
Thefull-duplex modeisusedwhencommunication inbothdirections isrequired
allthetime.Thecapacityofthechannel, however, mustbedividedbetween thetwo
directions.
1.2NETWORKS
Anetwork isasetofdevices(oftenreferredtoasnodes)connected bycommunication
links.Anodecanbeacomputer, printer,oranyotherdevicecapableofsendingand/or
receiving datagenerated byothernodesonthenetwork.
Distributed Processing
Mostnetworks usedistributed processing, inwhichataskisdividedamongmultiple
computers. Insteadofonesinglelargemachine beingresponsible forallaspectsofa
process, separate computers (usually apersonal computer orworkstation) handlea
subset.
Network Criteria
Anetwork mustbeabletomeetacertainnumberofcriteria.Themost important of
theseareperformance, reliability, andsecurity.
Performance
Performance canbemeasured inmanyways,including transittimeandresponse time.
Transittimeistheamountoftimerequired foramessage totravelfromonedeviceto8CHAPTER 1INTRODUCTION
another.Response timeistheelapsedtimebetweenaninquiryandaresponse. Theper­
formance ofanetworkdependsonanumberoffactors,including thenumberofusers,
thetypeoftransmission medium, thecapabilities oftheconnected hardware, andthe
efficiency ofthesoftware.
Performance isoftenevaluated bytwonetworking metrics:throughput anddelay.
Weoftenneedmorethroughput andlessdelay.However, thesetwocriteriaareoften
contradictory. Ifwetrytosendmoredatatothenetwork, wemayincreasethroughput
butweincreasethedelaybecauseoftrafficcongestion inthenetwork.
Reliability
Inadditiontoaccuracy ofdelivery,networkreliability ismeasured bythefrequency of
failure,thetimeittakesalinktorecoverfromafailure,andthenetwork's robustness in
acatastrophe.
Security
Network security issuesincludeprotecting datafromunauthorized access,protecting
datafromdamageanddevelopment, andimplementing policiesandprocedures for
recovery frombreaches anddatalosses.
Physical Structures
Beforediscussing networks, weneedtodefinesomenetworkattributes.
TypeofConnection
Anetworkistwoormoredevicesconnected throughlinks.Alinkisacommunications
pathwaythattransfers datafromonedevicetoanother.Forvisualization purposes, itis
simplesttoimagineanylinkasalinedrawnbetweentwopoints.Forcommunication to
occur,twodevicesmustbeconnected insomewaytothesamelinkatthesametime.
Therearetwopossibletypesofconnections: point-to-point andmultipoint.
Point-to-Point Apoint-to-point connection provides adedicated linkbetweentwo
devices.Theentirecapacityofthelinkisreserved fortransmission betweenthosetwo
devices.Mostpoint-to-point connections useanactuallengthofwireorcabletocon­
nectthetwoends,butotheroptions,suchasmicrowave orsatellitelinks,arealsopossi­
ble(seeFigure1.3a).Whenyouchangetelevision channels byinfraredremotecontrol,
youareestablishing apoint-to-point connection between theremotecontrolandthe
television's controlsystem.
Multipoint Amultipoint (alsocalledmultidrop) connection isoneinwhichmore
thantwospecificdevicesshareasinglelink(seeFigure1.3b).
Inamultipoint environment, thecapacityofthechannelisshared,eitherspatially
ortemporally. Ifseveraldevicescanusethelinksimultaneously, itisaspatially shared
connection. Ifusersmust take turns,itisatimeshared connection.
Physical Topology
Thetermphysical topology referstothewayinwhichanetworkislaidoutphysically.:
1\voormoredevicesconnecttoalink;twoormorelinksformatopology. ThetopologySECTION 1.2NETWORKS 9
Figure1.3Typesofconnections: point-to-point andmultipoint
Link
a.Point-to-point
MainframeLink
b.Multipoint
ofanetwork isthegeometric representation oftherelationship ofallthelinksand
linkingdevices(usuallycallednodes)tooneanother.Therearefourbasictopologies
possible: mesh,star,bus,andring(seeFigure1.4).
Figure1.4Categories oftopology
MeshInameshtopology, everydevicehasadedicated point-to-point linktoevery
otherdevice.Thetermdedicated meansthatthelinkcarriestrafficonlybetween the
twodevicesitconnects. Tofindthenumberofphysicallinksinafullyconnected mesh
network withnnodes,wefirstconsider thateachnodemustbeconnected toevery
othernode.Node1mustbeconnected ton-Inodes,node2mustbeconnected ton-1
nodes,andfinallynodenmustbeconnected ton-1nodes.Weneedn(n-1)physical
links.However, ifeachphysicallinkallowscommunication inbothdirections (duplex
mode),wecandividethenumberoflinksby2.Inotherwords,wecansaythatina
meshtopology, weneed
n(n-1)/2
duplex-mode links.
Toaccommodate thatmanylinks,everydeviceonthenetwork musthaven-1
input/output (VO)ports(seeFigure1.5)tobeconnected totheothern-1stations.10CHAPTER 1INTRODUCTION
Figure1.5Afullyconnected meshtopology (fivedevices)
Ameshoffersseveraladvantages overothernetworktopologies. First,theuseof
dedicated linksguarantees thateachconnection cancarryitsowndataload,thuselimi­
natingthetrafficproblems thatcanoccurwhenlinksmustbesharedbymultipledevices.
Second,ameshtopology isrobust.Ifonelinkbecomes unusable, itdoesnotincapaci­
tatetheentiresystem.Third,thereistheadvantage ofprivacyorsecurity.Whenevery
message travelsalongadedicated line,onlytheintended recipient seesit.Physical
boundaries preventotherusersfromgainingaccesstomessages. Finally,point-to-point
linksmakefaultidentification andfaultisolation easy.Trafficcanberoutedtoavoid
linkswithsuspected problems. Thisfacilityenablesthenetworkmanager todiscoverthe
preciselocationofthefaultandaidsinfindingitscauseandsolution.
Themaindisadvantages ofamesharerelatedtotheamountofcablingandthe
numberofI/Oportsrequired. First,becauseeverydevicemustbeconnected toevery
otherdevice,installation andreconnection aredifficult. Second,thesheerbulkofthe
wiringcanbegreaterthantheavailable space(inwalls,ceilings, orfloors)canaccom­
modate.Finally,thehardware requiredtoconnecteachlink(I/Oportsandcable)canbe
prohibitively expensive. Forthesereasonsameshtopology isusuallyimplemented ina
limitedfashion,forexample, asabackbone connecting themaincomputers ofahybrid
networkthatcanincludeseveralothertopologies.
Onepractical exampleofameshtopology istheconnection oftelephone regional
officesinwhicheachregionalofficeneeds tobeconnected toeveryotherregionaloffice.
StarTopology Inastartopology, eachdevicehasadedicated point-to-point link
onlytoacentralcontroller, usuallycalledahub.Thedevicesarenotdirectlylinkedto
oneanother. Unlikeameshtopology, astartopology doesnotallowdirecttraffic
betweendevices.Thecontroller actsasanexchange:Ifonedevicewantstosenddatato
another,itsendsthedatatothecontroller, whichthenrelaysthedatatotheothercon­
necteddevice(seeFigure1.6).
Astartopology islessexpensive thanameshtopology. Inastar,eachdeviceneeds
onlyonelinkandoneI/Oporttoconnectittoanynumberofothers.Thisfactoralso
makesiteasytoinstallandreconfigure. Farlesscablingneedstobehoused,andaddi­
tions,moves,anddeletions involveonlyoneconnection: betweenthatdeviceandthehub.
Otheradvantages includerobustness. Ifonelinkfails,onlythatlinkisaffected.All
otherlinksremainactive.Thisfactoralsolendsitselftoeasyfaultidentification andSECTION 1.2NETWORKS 11
Figure1.6Astartopology connecting fourstations
Hub
faultisolation. Aslongasthehubisworking, itcanbeusedtomonitorlinkproblems
andbypassdefective links.
Onebigdisadvantage ofastartopology isthedependency ofthewholetopology
ononesinglepoint,thehub.Ifthehubgoesdown,thewholesystemisdead.
Although astarrequiresfarlesscablethanamesh,eachnodemustbelinkedtoa
centralhub.Forthisreason,oftenmorecablingisrequired inastarthaninsomeother
topologies (suchasringorbus).
Thestartopology isusedinlocal-area networks (LANs),aswewillseeinChapter13.
High-speed LANsoftenuseastartopology withacentralhub.
BusTopology Thepreceding examples alldescribepoint-to-point connections. Abus
topology, ontheotherhand,ismultipoint. Onelongcableactsasabackbone tolinkall
thedevicesinanetwork(seeFigure1.7).
Figure1.7Abustopology connecting threestations
Dropline Dropline Dropline
Cableend11I-----1..----- ..----- ..----11 Cableend
Tap Tap Tap
Nodesareconnected tothebuscablebydroplinesandtaps.Adroplineisacon­
nectionrunningbetween thedeviceandthemaincable.Atapisaconnector thateither
splicesintothemaincableorpunctures thesheathing ofacabletocreateacontactwith
themetalliccore.Asasignaltravelsalongthebackbone, someofitsenergyistransformed
intoheat.Therefore, itbecomes weakerandweakerasittravelsfartherandfarther.For
thisreasonthereisalimitonthenumberoftapsabuscansupportandonthedistance
betweenthosetaps.
Advantages ofabustopology includeeaseofinstallation. Backbone cablecanbe
laidalongthemostefficientpath,thenconnected tothenodesbydroplinesofvarious
lengths.Inthisway,abususeslesscablingthanmeshorstartopologies. Inastar,for
example, fournetworkdevicesinthesameroomrequirefourlengthsofcablereaching12CHAPTER 1INTRODUCTION
allthewaytothehub.Inabus,thisredundancy iseliminated. Onlythebackbone cable
stretches throughtheentirefacility.Eachdroplinehastoreachonlyasfarasthenear­
estpointonthebackbone.
Disadvantages includedifficultreconnection andfaultisolation. Abusisusually
designed tobeoptimally efficientatinstallation. Itcantherefore bedifficulttoaddnew
devices.Signalreflection atthetapscancausedegradation inquality.Thisdegradation
canbecontrolled bylimitingthenumberandspacingofdevicesconnected toagiven
lengthofcable.Addingnewdevicesmaytherefore requiremodification orreplacement
ofthebackbone.
Inaddition, afaultorbreakinthebuscablestopsalltransmission, evenbetween
devicesonthesamesideoftheproblem. Thedamaged areareflectssignalsbackinthe
direction oforigin,creatingnoiseinbothdirections.
Bustopology wastheoneofthefirsttopologies usedinthedesignofearlylocal­
areanetworks. Ethernet LANscanuseabustopology, buttheyarelesspopularnowfor
reasonswewilldiscussinChapter13.
RingTopology Inaringtopology, eachdevicehasadedicated point-to-point con­
nectionwithonlythetwodevicesoneithersideofit.Asignalispassedalongthering
inonedirection, fromdevicetodevice,untilitreachesitsdestination. Eachdevicein
theringincorporates arepeater. Whenadevicereceives asignalintended foranother
device,itsrepeaterregenerates thebitsandpassesthemalong(seeFigure1.8).
Figure1.8Aringtopology connecting sixstations
Repeater
Repeater
RepeaterRepeater
RepeaterRepeater
Aringisrelatively easytoinstallandreconfigure. Eachdeviceislinkedtoonlyits
immediate neighbors (eitherphysically orlogically). Toaddordeleteadevice requires
changing onlytwoconnections. Theonlyconstraints aremediaandtrafficconsider­
ations(maximum ringlengthandnumberofdevices). Inaddition, faultisolation issim­
plified.Generally inaring,asignaliscirculating atalltimes.Ifonedevicedoesnot
receiveasignalwithinaspecified period,itcanissueanalarm.Thealarmalertsthe
networkoperator totheproblem anditslocation.
However, unidirectional trafficcanbeadisadvantage. Inasimplering,abreakin
thering(suchasadisabled station)candisabletheentirenetwork. Thisweakness can
besolvedbyusingadualringoraswitchcapableofclosingoffthebreak.SECTION 1.2NETWORKS 13
Ringtopology wasprevalent whenIBMintroduced itslocal-area network Token
Ring.Today,theneedforhigher-speed LANshasmadethistopology lesspopular.
HybridTopology Anetworkcanbehybrid.Forexample, wecanhaveamainstartopol­
ogywitheachbranchconnecting severalstationsinabustopology asshowninFigure1.9.
Figure1.9Ahybridtopology: astarbackbone withthreebusnetworks
Hub
Network Models
Computer networks arecreatedbydifferent entities.Standards areneededsothatthese
heterogeneous networks cancommunicate withoneanother.Thetwobest-known stan­
dardsaretheOSImodelandtheInternetmodel.InChapter2wediscussthesetwo
models.TheOSI(OpenSystems Interconnection) modeldefinesaseven-layer net­
work;theInternetmodeldefinesafive-layer network. ThisbookisbasedontheInternet
modelwithoccasional references totheOSImodel.
Categories ofNetworks
Todaywhenwespeakofnetworks, wearegenerally referring totwoprimarycatego­
ries:local-area networks andwide-area networks. Thecategory intowhichanetwork
fallsisdetermined byitssize.ALANnormally coversanarealessthan2mi;aWANcan
beworldwide. Networks ofasizeinbetween arenormally referredtoasmetropolitan­
areanetworks andspantensofmiles.
LocalAreaNetwork
Alocalareanetwork (LAN)isusuallyprivately ownedandlinksthedevicesinasingle
office,building, orcampus(seeFigure1.10).Depending ontheneedsofanorganization
andthetypeoftechnology used,aLANcanbeassimpleastwoPCsandaprinterin
someone's homeoffice;oritcanextendthroughout acompany andincludeaudioand
videoperipherals. Currently, LANsizeislimitedtoafewkilometers.14CHAPTER 1INTRODUCTION
Figure1.10AnisolatedIANconnecting 12computers toahubinacloset
Hub
LANsaredesigned toallowresources tobesharedbetween personal computers or
workstations. Theresources tobesharedcanincludehardware (e.g.,aprinter),software
(e.g.,anapplication program), ordata.Acommon example ofaLAN,foundinmany
business environments, linksaworkgroup oftask-related computers, forexample, engi­
neeringworkstations oraccounting PCs.Oneofthecomputers maybegivenalarge­
capacity diskdriveandmaybecomeaservertoclients.Software canbestoredonthis
centralserverandusedasneededbythewholegroup.Inthisexample, thesizeofthe
LANmaybedetermined bylicensing restrictions onthenumberofuserspercopyofsoft­
ware,orbyrestrictions onthenumberofuserslicensedtoaccesstheoperating system.
Inaddition tosize,LANsaredistinguished fromothertypesofnetworks bytheir
transmission mediaandtopology. Ingeneral, agivenLANwilluseonlyonetypeof
transmission medium. Themostcommon LANtopologies arebus,ring,andstar.
EarlyLANshaddataratesinthe4to16megabits persecond(Mbps)range.Today,
however, speedsarenormally 100or1000Mbps.LANsarediscussed atlengthin
Chapters 13, 14,and15.
Wireless LANsarethenewestevolution inLANtechnology. Wediscusswireless
LANsindetailinChapter14.
WideAreaNetwork
Awideareanetwork(WAN)provides long-distance transmission ofdata,image,audio,
andvideoinformation overlargegeographic areasthatmaycomprise acountry,aconti­
nent,oreventhewholeworld.InChapters 17and18wediscusswide-area networks in
greaterdetail.AWANcanbeascomplex asthebackbones thatconnecttheInternetoras
simpleasadial-uplinethatconnects ahomecomputer totheInternet.Wenormally refer
tothefirstasaswitched WANandtothesecondasapoint-to-point WAN(Figure1.11).
Theswitched WANconnects theendsystems, whichusuallycomprise arouter(internet­
working connecting device)thatconnects toanotherLANorWAN.Thepoint-to-point
WANisnormally alineleasedfromatelephone orcableTVprovider thatconnects a
homecomputer orasmallLANtoanInternetserviceprovider (lSP).ThistypeofWAN
isoftenusedtoprovideInternetaccess.ComputerSECTION 1.2NETWORKS
Figure1.11WANs:aswitched WANandapoint-to-point WAN
a.Switched WAN
Point-te-point
 ~d::_:
WAN .c'.-- cu::J::W
~ii~~;-E=~~~· "",,~!j.,..;~,-,E::J
Modem Modem -
ISP
b.Point-to-point WAN15
ii
I
Anearlyexample ofaswitched WANisX.25,anetwork designed toprovidecon­
nectivity between end users.AswewillseeinChapter 18,X.25isbeinggradually
replaced byahigh-speed, moreefficientnetwork calledFrameRelay.Agoodexample
ofaswitched WANistheasynchronous transfermode(ATM)network, whichisanet­
workwithfixed-size dataunitpacketscalledcells.WewilldiscussATMinChapter18.
Anotherexample ofWANs isthewirelessWANthatisbecoming moreandmorepopu­
lar.WediscusswirelessWANsandtheirevolution inChapter16.
Metropolitan AreaNetworks
Ametropolitan areanetwork (MAN)isanetwork withasizebetween aLANanda
WAN.Itnormally coverstheareainsideatownoracity.Itisdesigned forcustomers
whoneedahigh-speed connectivity, normally totheInternet, andhaveendpoints
spreadoveracityorpartofcity.AgoodexampleofaMANisthepartofthetelephone
company network thatcanprovideahigh-speed DSLlinetothecustomer. Another
example isthecableTVnetwork thatoriginally wasdesigned forcableTV,buttoday
canalsobeusedforhigh-speed dataconnection totheInternet. WediscussDSLlines
andcableTVnetworks inChapter9.
Interconnection ofNetworks: Internetwork
Today,itisveryraretoseeaLAN,aMAN,oraLANinisolation; theyarecon­
nectedtooneanother. Whentwoormorenetworks areconnected, theybecome an
internetwork, orinternet.
Asanexample, assumethatanorganization hastwooffices,oneontheeastcoast
andtheotheronthewestcoast.Theestablished officeonthewestcoasthasabustopology
LAN;thenewlyopenedofficeontheeastcoasthasastartopology LAN.Thepresident of
thecompany livessomewhere inthemiddleandneedstohavecontroloverthecompany16CHAPTER 1INTRODUCTION
fromherhorne.Tocreateabackbone WANforconnecting thesethreeentities(two
LANsandthepresident's computer), aswitched WAN(operated byaserviceprovider
suchasatelecomcompany) hasbeenleased.ToconnecttheLANstothisswitched
WAN,however, threepoint-to-point WANsarerequired. Thesepoint-to-point WANs
canbeahigh-speed DSLlineofferedbyatelephone company oracablemodernline
offeredbyacableTVprovider asshowninFigure1.12.
Figure1.12Aheterogeneous networkmadeoffourWANsandtwoLANs
President
1_....
..,',Mod,m
••Point-to-point:
WAN:•
MOdem~~'
•':,Point-to-point
':.WAN
••
~Point-to-point
~WAN.
LAN
LAN
1.3THEINTERNET
TheInternethasrevolutionized manyaspectsofourdailylives.Ithasaffectedtheway
wedobusiness aswellasthewaywespendourleisuretime.Countthewaysyou've
usedtheInternetrecently. Perhapsyou'vesentelectronic mail(e-mail)toabusiness
associate, paidautilitybill,readanewspaper fromadistantcity,orlookedupalocal
movieschedule-all byusingtheInternet. Ormaybeyouresearched amedicaltopic,
bookedahotelreservation, chattedwithafellowTrekkie,orcomparison-shopped fora
car.TheInternetisacommunication systemthathasbroughtawealthofinformation to
ourfingertips andorganized itforouruse.
TheInternetisastructured, organized system.Webeginwithabriefhistoryofthe
Internet.Wefollowwithadescription oftheInternettoday.SECTION 1.3THEINTERNET 17
ABriefHistory
Anetwork isagroupofconnected communicating devicessuchascomputers and
printers.Aninternet(notethelowercase letteri)istwoormorenetworks thatcancom­
municate witheachother.ThemostnotableinternetiscalledtheInternet (uppercase
letterI),acollaboration ofmorethanhundreds ofthousands ofinterconnected net­
works.Privateindividuals aswellasvariousorganizations suchasgovernment agen­
cies,schools,researchfacilities, corporations, andlibrariesinmorethan100countries
usetheInternet.Millionsofpeopleareusers.Yetthisextraordinary communication sys­
temonlycameintobeingin1969.
Inthemid-1960s, mainframe computers inresearch organizations werestand­
alonedevices.Computers fromdifferent manufacturers wereunabletocommunicate
withoneanother.TheAdvanced Research Projects Agency(ARPA)intheDepart­
mentofDefense(DoD)wasinterested infindingawaytoconnectcomputers sothat
theresearchers theyfundedcouldsharetheirfindings, therebyreducing costsandelim­
inatingduplication ofeffort.
In1967,atanAssociation forComputing Machinery (ACM)meeting, ARPApre­
senteditsideasforARPANET, asmallnetworkofconnected computers. Theideawas
thateachhostcomputer (notnecessarily fromthesamemanufacturer) wouldbe
attachedtoaspecialized computer, calledaninteiface message processor (IMP).The
IMPs,intum,wouldbeconnected tooneanother.EachIMPhadtobeabletocommu­
nicatewithotherIMPsaswellaswithitsownattachedhost.
By1969,ARPANET wasareality.Fournodes,attheUniversity ofCalifornia at
LosAngeles(UCLA), theUniversity ofCalifornia atSantaBarbara(UCSB), Stanford
Research Institute(SRI),andtheUniversity ofUtah,wereconnected viatheIMPsto
formanetwork. Software calledtheNetwork ControlProtocol (NCP)provided com­
munication betweenthehosts.
In1972,VintCerfandBobKahn,bothofwhomwerepartofthecoreARPANET
group,collaborated onwhattheycalledtheInternetting Projec1.CerfandKahn'sland­
mark1973paperoutlinedtheprotocols toachieveend-to-end deliveryofpackets.This
paperonTransmission ControlProtocol (TCP)included concepts suchasencapsula­
tion,thedatagram, andthefunctions ofagateway.
Shortlythereafter, authorities madeadecision tosplitTCPintotwoprotocols:
Transmission ControlProtocol (TCP)andInternetworking Protocol (lP).IPwould
handledatagram routingwhileTCPwouldberesponsible forhigher-level functions
suchassegmentation, reassembly, anderrordetection. Theinternetworking protocol
becameknownasTCPIIP.
TheInternetToday
TheInternethascomealongwaysincethe1960s.TheInternettodayisnotasimple
hierarchical structure.Itismadeupofmanywide-andlocal-area networks joinedby
connecting devicesandswitching stations.Itisdifficulttogiveanaccuraterepresen­
tationoftheInternetbecauseitiscontinually changing-new networks arebeing
added,existingnetworks areaddingaddresses, andnetworks ofdefunctcompanies are
beingremoved. TodaymostenduserswhowantInternetconnection usetheservicesof
Internet serviceproviders (lSPs).Thereareinternational serviceproviders, national18CHAPTER 1INTRODUCTION
serviceproviders, regionalserviceproviders, andlocalserviceproviders. TheInternet
todayisrunbyprivatecompanies, notthegovernment. Figure1.13showsaconceptual
(notgeographic) viewoftheInternet.
Figure1.13Hierarchical organization oftheInternet
National
ISP
a.Structure ofanationalISP
National
ISP
National
ISP
b.Interconnection ofnationalISPs
International InternetServiceProviders
Atthetopofthehierarchy aretheinternational serviceproviders thatconnectnations
together.
National InternetServiceProviders
Thenational Internet serviceproviders arebackbone networks createdandmain­
tainedby specialized companies. TherearemanynationalISPsoperating inNorth
America; someofthemostwellknownareSprintLink, PSINet,UUNetTechnology,
AGIS,andinternetMel.Toprovideconnectivity between theendusers,theseback­
bonenetworks areconnected bycomplex switching stations(normally runbyathird
party)callednetwork accesspoints(NAPs). SomenationalISPnetworks arealso
connected tooneanotherbyprivateswitching stationscalledpeeringpoints.These
normally operateatahighdatarate(upto600Mbps).SECTION 1.4PROTOCOLS ANDSTANDARDS 19
Regional InternetServiceProviders
Regional internetserviceproviders orregionalISPsaresmallerISPsthatareconnected
tooneormorenationalISPs.Theyareatthethirdlevelofthehierarchy withasmaller
datarate.
LocalInternetServiceProviders
LocalInternet serviceproviders providedirectservicetotheendusers.Thelocal
ISPscanbeconnected toregionalISPsordirectlytonationalISPs.Mostendusersare
connected tothelocalISPs.Notethatinthissense,alocalISPcanbeacompany that
justprovides Internetservices, acorporation withanetworkthatsuppliesservicestoits
ownemployees, oranonprofit organization, suchasacollegeorauniversity, thatruns
itsownnetwork. EachoftheselocalISPscanbeconnected toaregional ornational
serviceprovider.
1.4PROTOCOLS ANDSTANDARDS
Inthissection,wedefinetwowidelyusedterms:protocols andstandards. First,we
defineprotocol, whichissynonymous withrule.Thenwediscussstandards, whichare
agreed-upon rules.
Protocols
Incomputer networks, communication occursbetweenentitiesindifferent systems.An
entityisanythingcapableofsendingorreceiving information. However, twoentitiescan­
notsimplysendbitstreamstoeachotherandexpecttobeunderstood. Forcommunication
tooccur,theentitiesmustagreeonaprotocol. Aprotocolisasetofrulesthatgoverndata
communications. Aprotocoldefineswhatiscommunicated, howitiscommunicated, and
whenitiscommunicated. Thekeyelements ofaprotocolaresyntax,semantics, andtiming.
oSyntax. Thetermsyntaxreferstothestructure orformatofthedata,meaning the
orderinwhichtheyarepresented. Forexample, asimpleprotocolmightexpectthe
first8bitsofdatatobetheaddressofthesender,thesecond8bitstobetheaddress
ofthereceiver, andtherestofthestreamtobethemessage itself.
oSemantics. Thewordsemantics referstothemeaning ofeachsectionofbits.
Howisaparticular patterntobeinterpreted, andwhatactionistobetakenbased
onthatinterpretation? Forexample, doesanaddressidentifytheroutetobetaken
orthefinaldestination ofthemessage?
oTiming. Thetermtimingreferstotwocharacteristics: whendatashouldbesent
andhowfasttheycanbesent.Forexample, ifasenderproduces dataat100Mbps
butthereceivercanprocessdataatonly1Mbps,thetransmission willoverload the
receiverandsomedatawillbelost.
Standards
Standards areessential increatingandmaintaining anopenandcompetitive marketfor
equipment manufacturers andinguaranteeing nationalandinternational interoperability
ofdataandtelecommunications technology andprocesses. Standards provideguidelines20CHAPTER 1INTRODUCTION
tomanufacturers, vendors,government agencies, andotherserviceproviders toensure
thekindofinterconnectivity necessary intoday'smarketplace andininternational com­
munications. Datacommunication standards fallintotwocategories: defacto(meaning
"byfact"or"byconvention") anddejure(meaning "bylaw"or"byregulation").
oDefacto.Standards thathavenotbeenapproved byanorganized bodybuthave
beenadoptedasstandards throughwidespread usearedefactostandards. Defacto
standards areoftenestablished originally bymanufacturers whoseektodefinethe
functionality ofanewproductortechnology.
oDejure.Thosestandards thathavebeenlegislated byanofficially recognized body
aredejurestandards.
Standards Organizations
Standards aredeveloped throughthecooperation ofstandards creationcommittees,
forums,andgovernment regulatory agencies.
Standards Creation Committees
Whilemanyorganizations arededicated totheestablishment ofstandards, datatele­
communications inNorthAmerica relyprimarily onthosepublished bythefollowing:
oInternational Organization forStandardization (ISO).TheISOisamultinational
bodywhosemembership isdrawnmainlyfromthestandards creationcommittees
ofvariousgovernments throughout theworld.TheISOisactiveindeveloping
cooperation intherealmsofscientific, technological, andeconomic activity.
oInternational Telecommunication Union-Telecommunication Standards
Sector(ITU-T). Bytheearly1970s,anumberofcountries weredefiningnational
standards fortelecommunications, buttherewasstilllittleinternational compati­
bility.TheUnitedNationsresponded byforming, aspartofitsInternational
Telecommunication Union(ITU),acommittee, theConsultative Committee
forInternational Telegraphy andTelephony (CCITT). Thiscommittee was
devotedtotheresearchandestablishment ofstandards fortelecommunications in
generalandforphoneanddatasystemsinparticular. OnMarch1,1993,thename
ofthiscommittee waschanged totheInternational Telecommunication Union­
Telecommunication Standards Sector(ITU-T).oAmerican National Standards Institute (ANSI). Despiteitsname,theAmerican
NationalStandards Instituteisacompletely private,nonprofit corporation notaffili­
atedwiththeU.S.federalgovernment. However, allANSIactivities areundertaken
withthewelfareoftheUnitedStatesanditscitizensoccupying primaryimportance.
oInstitute ofElectrical andElectronics Engineers (IEEE). TheInstitute of
Electrical andElectronics Engineers isthelargestprofessional engineering societyin
theworld.International inscope,itaimstoadvancetheory,creativity, andproduct
qualityinthefieldsofelectrical engineering, electronics, andradioaswellasinall
relatedbranches ofengineering. Asoneofitsgoals,theIEEEoverseesthedevelop­
mentandadoptionofinternational standards forcomputing andcommunications.
oElectronic Industries Association (EIA).Aligned withANSI,theElectronic
Industries Association isanonprofit organization devotedtothepromotion ofSECTION 1.5RECOMMENDED READING 21
electronics manufacturing concerns. Itsactivities includepublicawareness education
andlobbying effortsinadditiontostandards development. Inthefieldofinformation
technology, theEIAhasmadesignificantcontributions bydefiningphysicalconnec­
tioninterfaces andelectronic signaling specifications fordatacommunication.
Forums
Telecommunications technology development ismovingfasterthantheabilityofstan­
dardscommittees toratifystandards. Standards committees areprocedural bodiesand
bynatureslow-moving. Toaccommodate theneedforworkingmodelsandagreements
andtofacilitate thestandardization process,manyspecial-interest groupshavedevel­
opedforumsmadeupofrepresentatives frominterested corporations. Theforums
workwithuniversities anduserstotest,evaluate, andstandardize newtechnologies. By
concentrating theireffortsonaparticular technology, theforumsare abletospeed
acceptance anduseofthosetechnologies inthetelecommunications community. The
forumspresenttheirconclusions tothestandards bodies.
Regulatory Agencies
Allcommunications technology issubjecttoregulation bygovernment agencies such
astheFederalCommunications Commission (FCC)intheUnitedStates.Thepur­
poseoftheseagencies istoprotectthepublicinterestbyregulating radio,television,
andwire/cable communications. TheFCChasauthority overinterstate andinterna­
tionalcommerce asitrelatestocommunications.
Internet Standards
AnInternet standard isathoroughly testedspecification thatisusefultoandadhered
tobythosewhoworkwiththeInternet. Itisaformalized regulation thatmustbefol­
lowed.Thereisastrictprocedure bywhichaspecification attainsInternetstandard
status. A specification beginsasanInternetdraft.AnInternet draftisaworkingdocu­
ment(aworkinprogress) withnoofficialstatusanda6-month lifetime. Upon recom­
mendation fromtheInternetauthorities, adraftmaybepublished asaRequest for
Comment (RFC).EachRFCisedited,assigned anumber,andmadeavailable toall
interested parties.RFCsgothroughmaturity levelsandarecategorized according to
theirrequirement level.
1.5RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
booksandsites.Theitemsenclosed inbrackets[...]refertothereference listattheend
ofthebook.
Books
Theintroductory materials coveredinthischaptercanbefoundin[Sta04]and[PD03].
[Tan03]discusses standardization inSection1.6.22CHAPTER 1INTRODUCTION
Sites
Thefollowing sitesarerelatedtotopicsdiscussed inthischapter.
owww.acm.org/sigcomm/sos.html Thissitegivesthestatusofvarililusnetworking
standards.
owww.ietf.org/ TheInternetEngineering TaskForce(IETF)homepage.
RFCs
Thefollowing sitelistsallRFCs,including thoserelatedtoIPandTCP.Infuturechap­
terswecitetheRFCspertinent tothechaptermaterial.
owww.ietf.org/rfc.html
1.6KEYTERMS
Advanced Research Projects
Agency(ARPA)
American National Standards
Institute(ANSI)
American Standard Codefor
Information Interchange (ASCII)
ARPANET
audio
backbone
BasicLatin
bustopology
code
Consultative Committee for
International Telegraphy
andTelephony (CCITT)
data
datacommunications
defactostandards
dejurestandards
delay
distributed processing
Electronic Industries Association (EIA)
entity
FederalCommunications Commission
(FCC)forumfull-duplex mode,orduplex
half-duplex mode
hub
image
Institute
ofElectrical andElectronics
Engineers (IEEE)
International Organization for
Standardization (ISO)
International Telecommunication
Union-Telecommunication
Standards Sector(ITU-T)
Internet
Internetdraft
Internetserviceprovider (ISP)
Internetstandard
internetwork orinternet
localareanetwork(LAN)
localInternetserviceproviders
meshtopology
message
metropolitan areanetwork(MAN)
multipoint ormultidrop connection
nationalInternetserviceprovider
networknetworkaccesspoints(NAPs)
node
performance
physicaltopology
point-to-point connection
protocol
receiverregionalISP
reliability
RequestforComment (RFC)
ROB
ringtopology
security
semantics
1.7SUMMARYSECTION 1.7SUMMARY 23
sendersimplexmode
startopology
syntax
telecommunication
throughput
timing
Transmission ControlProtocol!
Internetworking Protocol (TCPIIP)
transmission medium
Unicode
video
wideareanetwork(WAN)
YCM
oDatacommunications arethetransferofdatafromonedevicetoanotherviasome
formoftransmission medium.
oAdatacommunications systemmusttransmitdatatothecorrectdestination inan
accurateandtimelymanner.
oThefivecomponents thatmakeupadatacommunications systemarethemessage,
sender,receiver, medium, andprotocol.
oText,numbers, images,audio,andvideoaredifferent formsofinformation.
oDataflowbetweentwodevicescanoccurinoneofthreeways:simplex,half-duplex,
orfull-duplex.
oAnetworkisasetofcommunication devicesconnected bymedialinks.
oInapoint-to-point connection, twoandonlytwodevicesareconnected bya
dedicated link.Inamultipoint connection, threeormoredevicessharealink.
oTopology refers tothephysical orlogicalarrangement ofanetwork. Devicesmay
bearranged inamesh,star,bus,orringtopology.
oAnetworkcanbecategorized asalocalareanetworkorawideareanetwork.
oALANisadatacommunication systemwithinabuilding, plant,orcampus, or
betweennearbybuildings.oAWANisadatacommunication systemspanning states,countries, orthewhole
world.
oAninternetisanetworkofnetworks.
oTheInternetisacollection ofmanyseparatenetworks.
oTherearelocal,regional, national, andinternational Internetserviceproviders.
oAprotocol isasetofrulesthatgoverndatacommunication; thekeyelements of
aprotocolaresyntax,semantics, andtiming.24CHAPTER 1INTRODUCTION
oStandards arenecessary toensurethatproducts fromdifferent manufacturers can
worktogetherasexpected.
oTheISO,ITD-T,ANSI,IEEE,andEIAaresomeoftheorganizations involved
instandards creation.
oForumsarespecial-interest groupsthatquicklyevaluate andstandardize new
technologies.
oARequest forComment isanideaorconceptthatisaprecursor toanInternet
standard.
1.8PRACTICE SET
ReviewQuestions
1.Identifythefivecomponents ofadatacommunications system.
2.Whataretheadvantages ofdistributed processing?
3.Whatarethethreecriterianecessary foraneffective andefficientnetwork?
4.Whataretheadvantages ofamultipoint connection overapoint-to-point
connection?
5.Whatarethetwotypesoflineconfiguration?
6.Categorize thefourbasictopologies intermsoflineconfiguration.
7.Whatisthedifference between half-duplex andfull-duplex transmission modes?
8.Namethefourbasicnetworktopologies, andciteanadvantage ofeachtype.
9.Forndevicesinanetwork, whatisthenumberofcablelinksrequired foramesh,
ring,bus,andstartopology?
10.Whataresomeofthefactorsthatdetermine whetheracommunication systemisa
LANorWAN?
1I.Whatisaninternet? WhatistheInternet?
12.Whyareprotocols needed?
13.Whyarestandards needed?
Exercises
14.Whatisthemaximum numberofcharacters orsymbols thatcanberepresented by
Unicode?
15.Acolorimageuses16bitstorepresent apixel.Whatisthemaximum numberof
different colorsthatcanberepresented?
16.Assumesixdevicesarearranged inameshtopology. Howmanycablesareneeded?
Howmanyportsareneededforeachdevice?
17.Foreachofthefollowing fournetworks, discusstheconsequences ifaconnection fails.
a.Fivedevicesarranged inameshtopology
b.Fivedevicesarranged inastartopology (notcounting thehub)
c.Fivedevicesarranged inabustopology
d.Fivedevicesarranged inaringtopologySECTION 1.8PRACTICE SET 25
18.Youhavetwocomputers connected byanEthernet hubathome.IsthisaLAN,a
MAN,oraWAN?Explainyourreason.
19.Intheringtopology inFigure1.8,whathappensifoneofthestationsisunplugged?
20.Inthebustopology inFigure1.7,whathappensifoneofthestationsisunplugged?
21.Drawahybridtopology withastarbackbone andthreeringnetworks.
22.Drawahybridtopology witharingbackbone andtwobusnetworks.
23.Performance isinversely relatedtodelay.WhenyouusetheInternet, whichofthe
following applications aremoresensitive todelay?
a.Sendingane-mail
b.Copying afile
c.SurfingtheInternet
24.Whenapartymakesalocaltelephone calltoanotherparty,isthisapoint-to-point
ormultipoint connection? Explainyouranswer.
25.Compare thetelephone networkandtheInternet.Whatarethesimilarities? What
arethedifferences?
Research Activities
26.Usingthesite\\iww.cne.gmu.edu/modules/network/osi.html, discusstheOSImodel.
27.Usingthesitewww.ansi.org, discussANSI'sactivities.
28.Usingthesitewww.ieee.org, discussIEEE'sactivities.
29.Usingthesitewww.ietf.org/, discussthedifferent typesofRFCs.CHAPTER 2
Network Models
Anetworkisacombination ofhardware andsoftware thatsendsdatafromonelocation
toanother.Thehardware consistsofthephysical equipment thatcarriessignalsfrom
onepointofthenetworktoanother.The software consistsofinstruction setsthatmake
possibletheservicesthatweexpectfromanetwork.
Wecancomparethetaskofnetworking tothetaskofsolvingamathematics problem
withacomputer. Thefundamental jobofsolvingtheproblem withacomputer isdone
bycomputer hardware. However, thisisaverytedioustaskifonlyhardware isinvolved.
Wewouldneedswitches foreverymemory locationtostoreandmanipulate data.The
taskismucheasierifsoftware isavailable. Atthehighestlevel,aprogram candirect
theproblem-solving process;thedetailsofhowthisisdonebytheactualhardware can
belefttothelayersofsoftware thatarecalledbythehigherlevels.
Compare thistoaserviceprovided byacomputer network. Forexample, thetask
ofsendingane-mailfromonepointintheworldtoanothercanbebrokenintoseveral
tasks,eachperformed byaseparatesoftware package. Eachsoftware packageusesthe
servicesofanothersoftware package. Atthelowestlayer,asignal,orasetofsignals,is
sentfromthesourcecomputer tothedestination computer.
Inthischapter,wegiveageneralideaofthelayersofanetwork anddiscussthe
functions ofeach.Detailed descriptions oftheselayersfollowinlaterchapters.
2.1LAYERED TASKS
Weusetheconceptoflayersinourdailylife.Asanexample, letusconsider two
friendswhocommunicate throughpostalmaiLTheprocessofsendingalettertoa
friendwouldbecomplex iftherewerenoservicesavailable fromthepostoffice.Fig­
ure2.1showsthestepsinthistask.
2728CHAPTER 2NETWORK MODELS
Figure2.1Tasksinvolved insendingaletter
Sender
tReceiver
t
I t
Theletteriswritten, Theletterispickedup,
putinanenvelope, and Higherlayers removed fromthe
droppedinamailbox. envelope, andread.
I -,
Theletteriscarried Theletteriscarried
fromthemailbox Middlelayers fromthepostoffice
toapostoffice. tothemailbox.
I I
Theletterisdelivered Theletterisdelivered
toacarrierbythepost Lowerlayers fromthecarrier
office. tothepostoffice.
•II
Theparceliscarriedfrom
thesourcetothedestination.
Sender,Receiver, andCarrier
InFigure2.1wehaveasender,areceiver, and acarrierthattransports theletter.There
isahierarchy oftasks.
AttheSellderSite
Letusfirstdescribe, inorder,theactivities thattakeplaceatthesendersite.
oHigherlayer.Thesenderwritestheletter,insertstheletterinanenvelope, writes
thesenderandreceiveraddresses, anddropstheletterinamailbox.
oMiddlelayer.Theletterispickedupbyalettercarrieranddelivered tothepost
office.
oLowerlayer.Theletterissortedatthepostoffice;acarriertransports theletter.
011theWay
Theletteristhenonitswaytotherecipient. Onthewaytotherecipient's localpost
office,thelettermayactuallygothroughacentraloffice.Inaddition, itmaybetrans­
portedbytruck,train,airplane, boat,oracombination ofthese.
AttheReceiver Site
oLowerlayer.Thecarriertransports thelettertothepostoffice.
oMiddlelayer.Theletterissortedanddelivered totherecipient's mailbox.
oHigherlayer.Thereceiverpicksuptheletter,openstheenvelope, andreadsit.SECTION 2.2THEOS!MODEL 29
Hierarchy
According toouranalysis, therearethreedifferent activities atthesendersiteand
anotherthreeactivities atthereceiversite.Thetaskoftransporting theletterbetween
thesenderandthereceiver isdonebythecarrier.Something thatisnotobvious
immediately isthatthetasksmustbedoneintheordergiveninthehierarchy. Atthe
sendersite,thelettermustbewrittenanddroppedinthemailboxbeforebeingpicked
upbythelettercarrieranddelivered tothepostoffice.Atthereceiversite,theletter
mustbedropped intherecipient mailbox beforebeingpickedupandreadbythe
recipient.
Services
Eachlayeratthesendingsiteusestheservicesofthelayerimmediately belowit.The
senderatthehigherlayerusestheservicesofthemiddlelayer.Themiddlelayeruses
theservicesofthelowerlayer.Thelowerlayerusestheservicesofthecarrier.
Thelayeredmodelthatdominated datacommunications andnetworking literature
before1990wastheOpenSystems Interconnection (OSI)model.Everyone believed
thattheOSImodelwouldbecometheultimatestandard fordatacommunications, but
thisdidnothappen.TheTCPIIPprotocolsuitebecamethedominant commercial archi­
tecturebecauseitwasusedandtestedextensively intheInternet; theOSImodelwas
neverfullyimplemented.
Inthischapter,firstwebrieflydiscusstheOSImodel,andthenweconcentrate on
TCPIIPasaprotocolsuite.
2.2THEOSIMODEL
Established in1947,theInternational Standards Organization (ISO)isamultinational
bodydedicated toworldwide agreement oninternational standards. AnISOstandard
thatcoversallaspectsofnetworkcommunications istheOpenSystemsInterconnection
model.Itwasfirstintroduced inthelate1970s.Anopensystemisasetofprotocols that
allowsanytwodifferent systemstocommunicate regardless oftheirunderlying archi­
tecture.ThepurposeoftheOSImodelistoshowhowtofacilitate communication
betweendifferent systemswithoutrequiring changestothelogicoftheunderlying hard­
wareandsoftware. TheOSImodelisnotaprotocol; itisamodelforunderstanding and
designing anetworkarchitecture thatisflexible,robust,andinteroperable.
ISOistheorganization. OSIisthemodel.
TheOSImodelisalayeredframework forthedesignofnetwork systemsthat
allowscommunication betweenalltypesofcomputer systems. Itconsistsofsevensep­
aratebutrelatedlayers,eachofwhichdefinesapartoftheprocessofmovinginformation
acrossanetwork(seeFigure2.2).Anunderstanding ofthefundamentals oftheOSI
modelprovides asolidbasisforexploring data communications.30CHAPTER 2NETWORK MODELS
Figure2.2SevenlayersoftheOSImodel
71Application
61Presentation
51Session
41Transport
31Network
21Datalink
1IPhysical
Layered Architecture
TheOSImodeliscomposed ofsevenorderedlayers:physical(layer1),datalink(layer2),
network (layer3),transport (layer4),session(layer5),presentation (layer6),and
application (layer7).Figure2.3showsthelayersinvolved whenamessage issentfrom
deviceAtodeviceB.Asthemessage travelsfromAtoB,itmaypassthroughmany
intermediate nodes.Theseintermediate nodesusuallyinvolveonlythefirstthreelayers
oftheOSImodel.
Indeveloping themodel,thedesigners distilledtheprocessoftransmitting datato
itsmostfundamental elements. Theyidentified whichnetworking functions hadrelated
usesandcollected thosefunctions intodiscretegroupsthatbecamethelayers.Each
layerdefinesafamilyoffunctions distinctfromthoseoftheotherlayers.Bydefining
andlocalizing functionality inthisfashion,thedesigners createdanarchitecture thatis
bothcomprehensive andflexible. Mostimportantly, theOSImodelallowscomplete
interoperability between otherwise incompatible systems.
Withinasinglemachine, eachlayercallsupontheservicesofthelayerjustbelow
it.Layer3,forexample, usestheservicesprovided bylayer2andprovides servicesfor
layer4.Between machines, layerxononemachine communicates withlayerxon
anothermachine. Thiscommunication isgoverned byanagreed-upon seriesofrules
andconventions calledprotocols. Theprocesses oneachmachine thatcommunicate at
agivenlayerarecalledpeer-to-peer processes. Communication between machines is
therefore apeer-to-peer processusingtheprotocols appropriate toagivenlayer.
Peer-to-Peer Processes
Atthephysical layer,communication isdirect:InFigure2.3,deviceAsendsastream
ofbitstodeviceB(through intermediate nodes).Atthehigherlayers,however, com­
munication mustmovedownthroughthelayersondeviceA,overtodeviceB,andthenSECTION 2.2THEOSIMODEL 31
Figure2.3Theinteraction betweenlayersintheOSImodel
Device
ADevice
B
Intermediate
nodeIntermediate
node
Peer-to-peer protocol Othlayer)
7Application ------------------------ Application 7
7-6interface 7-6interfacePeer-to-peer protocol(6thlayer)
6Presentation ------------------------ Presentation 6
6-5interface 6-5interfacePeer-to-peer protocol(5thlayer)
5 Session------------------------ Session 5
5-4interfacePeer-to-peer protocol(4thlayer)5-4interface
4 Transport ------------------------ Transport 4
4-3interface 4-3interface
3 Network Network 3
3-2interface 3-2interface
2 Datalink Datalink 2
2-1interface 2-1interface
Physical Physical
Physical communication
backupthroughthelayers.Eachlayerinthesendingdeviceaddsitsowninformation
tothemessage itreceivesfromthelayerjustaboveitandpassesthewholepackageto
thelayerjustbelowit.
AtlayerItheentirepackageisconverted toaformthatcanbetransmitted tothe
receiving device.Atthereceiving machine, themessage isunwrapped layerbylayer,
witheachprocessreceiving andremoving thedatameantforit.Forexample, layer2
removesthedatameantforit,thenpassestheresttolayer3.Layer3thenremovesthe
datameantforitandpassestheresttolayer4,andsoon.
Interfaces Between Layers
Thepassingofthedataandnetworkinformation downthroughthelayersofthesend­
ingdeviceandbackupthroughthelayersofthereceiving deviceismadepossibleby
aninterface betweeneachpairofadjacentlayers.Eachinterface definestheinforma­
tionandservicesalayermustprovideforthelayeraboveit.Well-defined interfaces and
layerfunctions providemodularity toanetwork. Aslongasalayerprovides the
expected servicestothelayeraboveit,thespecificimplementation ofitsfunctions can
bemodified orreplaced withoutrequiring changestothesurrounding layers.
Organization oftheLayers
Thesevenlayerscanbethoughtofasbelonging tothreesubgroups. LayersI,2,and
3-physical, datalink,andnetwork-are thenetworksupportlayers;theydealwith32CHAPTER 2NETWORK MODELS
thephysical aspectsofmovingdatafromonedevicetoanother(suchaselectrical
specifications, physical connections, physical addressing, andtransport timingand
reliability). Layers5,6,and7-session, presentation, andapplication-can be
thoughtofastheusersupportlayers;theyallowinteroperability amongunrelated
software systems. Layer4,thetransport layer,linksthetwosubgroups andensures
thatwhatthelowerlayershavetransmitted isinaformthattheupperlayerscanuse.
TheupperOSIlayersarealmostalwaysimplemented insoftware; lowerlayersarea
combination ofhardware andsoftware, exceptfor thephysical layer,whichismostly
hardware.
InFigure2.4,whichgivesanoverallviewoftheOSIlayers,D7meansthedata
unitatlayer7,D6meansthedataunitatlayer6,andsoon.Theprocessstartsatlayer
7(theapplication layer),thenmovesfromlayertolayerindescending, sequential
order.Ateachlayer,aheader,orpossibly atrailer,canbeaddedtothedataunit.
Commonly, thetrailerisaddedonlyatlayer2.Whentheformatted dataunitpasses
throughthephysical layer(layer1),itischangedintoanelectromagnetic signaland
transported alongaphysicallink.
Figure2.4Anexchange usingtheOS!model
:HiiD7l
t---~
~~§JD6I
:Hs-1D5Ir-_J
:H4j D4Ir---.------
:-HilD3Ir--J---=-=----
:HiJ D2 ~.j!
1-- - .10--1
:_~i§j010101010101101010000010000 I
Trn",m;"io" =dium1~
~ D6I
~ D5I
~ D4I
~ D3I
~ D2 •
@IQj010101010101101010000010000 I
L...
Uponreaching itsdestination, thesignalpassesintolayer1andistransformed
backintodigitalform.ThedataunitsthenmovebackupthroughtheOSIlayers.As
eachblockofdatareachesthenexthigherlayer,theheadersandtrailersattachedtoitat
thecorresponding sendinglayerareremoved, andactionsappropriate tothatlayerare
taken.By thetimeitreacheslayer7,themessage isagaininaformappropriate tothe
application andismadeavailable totherecipient.SECTION 2.3LAYERS INTHEOSIMODEL 33
Encapsulation
Figure2.3revealsanotheraspectofdatacommunications intheOSImodel:encapsula­
tion.Apacket(headeranddata)atlevel7isencapsulated inapacketatlevel6.The
wholepacketatlevel6isencapsulated inapacketatlevel5,andsoon.
Inotherwords,thedataportionofapacketatlevelN-1carriesthewholepacket
(dataandheaderandmaybetrailer)fromlevelN.Theconceptiscalledencapsulation;
levelN-1isnotawareofwhichpartoftheencapsulated packetisdataandwhichpart
istheheaderortrailer.ForlevelN-1,thewholepacketcomingfromlevelNistreated
asoneintegralunit.
2.3LAYERS INTHEOSIMODEL
Inthissectionwebrieflydescribethefunctions ofeachlayerintheOSImodel.
Physical Layer
Thephysicallayercoordinates thefunctions requiredtocarryabitstreamoveraphysi­
calmedium.Itdealswiththemechanical andelectrical specifications oftheinterface and
transmission medium.Italsodefinestheprocedures andfunctions thatphysicaldevices
andinterfaces havetoperformfortransmission toOccur.Figure2.5showsthepositionof
thephysicallayerwithrespecttothetransmission mediumandthedatalinklayer.
Figure2.5Physical layer
Fromdatalinklayer Todatalinklayer
Physical
layerPhysical
layer
Transmission medium
Thephysicallayerisresponsible formovements of
individual bitsfromonehop(node)tothenext.
Thephysicallayerisalsoconcerned withthefollowing:
oPhysical characteristics ofinterfaces andmedium. Thephysical layerdefines
thecharacteristics oftheinterface between thedevicesandthetransmission
medium.Italsodefinesthetypeoftransmission medium.
oRepresentation ofbits.Thephysical layerdataconsists ofastreamofbits
(sequence ofOsor1s)withnointerpretation. Tobetransmitted, bitsmustbe34CHAPTER 2NETWORK MODELS
encoded intosignals--electrical oroptical.Thephysical layerdefinesthetypeof
encoding (howOsandIsarechangedtosignals).
oDatarate.Thetransmission rate-the numberofbitssenteachsecond-is also
definedbythephysicallayer.Inotherwords,thephysical layerdefinesthedura­
tionofabit,whichishowlongitlasts.
oSynchronization ofbits.Thesenderandreceivernotonlymustusethesamebit
ratebutalsomustbesynchronized atthebitlevel.Inotherwords,thesenderand
thereceiverclocksmustbesynchronized.
oLineconfiguration. Thephysical layerisconcerned withtheconnection of
devicestothemedia.Inapoint-to-point configuration, twodevicesareconnected
throughadedicated link.Inamultipoint configuration, alinkissharedamong
severaldevices.
oPhysical topology. Thephysical topology defineshowdevicesareconnected to
makeanetwork. Devicescanbeconnected byusingameshtopology (everydevice
isconnected toeveryotherdevice), a startopology (devicesareconnected through
acentraldevice),aringtopology (eachdeviceisconnected tothenext,forminga
ring),abustopology (everydeviceisonacommon link),orahybridtopology (this
isacombination oftwoormoretopologies).
oTransmission mode.Thephysicallayeralso defines thedirectionoftransmission
betweentwodevices:simplex, half-duplex, orfull-duplex. Insimplexmode,only
onedevicecansend;theothercanonlyreceive.Thesimplexmodeisaone-way
communication. Inthehalf-duplex mode,twodevicescansendandreceive,but
notatthesametime.Inafull-duplex (orsimplyduplex)mode,twodevicescan
sendandreceiveatthesametime.
DataLinkLayer
Thedatalinklayertransforms thephysicallayer,arawtransmission facility,toareli­
ablelink.Itmakesthephysical layerappearerror-free totheupperlayer(network
layer).Figure2.6showstherelationship ofthedatalinklayertothenetworkandphys­
icallayers.
Figure2.6Datalinklayer
Fromnetworklayer
Datalinklayer
TophysicallayerH2Tonetworklayer
Datalinklayer
FromphysicallayerSECTION 2.3LAYERS INTHEOSIMODEL 35
Thedatalinklayerisresponsible formovingframesfromonehop(node)tothenext.
Otherresponsibilities ofthedatalinklayerincludethefollowing:
[IFraming. Thedatalinklayerdividesthestreamofbitsreceivedfromthenetwork
layerintomanageable dataunitscalledframes.
oPhysical addressing. Ifframesaretobedistributed todifferent systemsonthe
network, thedatalinklayeraddsaheadertotheframetodefinethesenderand/or
receiveroftheframe.Iftheframeisintended forasystemoutsidethesender's
network, thereceiveraddressistheaddressofthedevicethatconnects thenetwork
tothenextone.
DFlowcontrol. Iftherateatwhichthedataareabsorbed bythereceiverislessthan
therateatwhichdataareproduced inthesender,thedatalinklayerimposesaflow
controlmechanism toavoidoverwhelming thereceiver.
oErrorcontrol. Thedatalinklayeraddsreliability tothephysicallayerbyadding
mechanisms todetectandretransmit damaged orlostframes.Italsousesamecha­
nismtorecognize duplicate frames.Errorcontrolisnormally achieved througha
traileraddedtotheendoftheframe.
DAccesscontrol. Whentwoormoredevicesareconnected tothesamelink,data
linklayerprotocols arenecessary todetermine whichdevicehascontroloverthe
linkatanygiventime.
Figure2.7illustrates hop-to-hop (node-to-node) delivery bythedatalinklayer.
Figure2.7Hop-fa-hop delivery
End
system
r
LinkLink
AEnd
system
rEnd
system
EF
Hop-ta-hop delivery Hop-to-hop delivery Hop-to-hop delivery
A B E F
Datalink Datalink Datalink
Physical Physical Physical
Hop-to-hop delivery Hop-to-hop delivery Hop-to-hop delivery
Asthefigureshows,communication atthedatalinklayer occurs between two
adjacent nodes.TosenddatafromAtoF,threepartialdeliveries aremade.First,the
datalinklayeratAsendsaframetothedatalinklayeratB(arouter).Second,thedata36CHAPTER 2NETWORK MODELS
linklayeratBsendsanewframetothedatalinklayeratE.Finally,thedatalinklayer
atEsendsanewframetothedatalinklayeratF.Notethattheframesthatare
exchanged betweenthethreenodeshavedifferentvaluesintheheaders.Theframefrom
AtoBhasBasthedestination addressandAasthesourceaddress.TheframefromBto
EhasEasthedestination addressandBasthesourceaddress.TheframefromEtoF
hasFasthedestination addressandEasthesourceaddress.Thevaluesofthetrailers
canalsobedifferentiferrorchecking includestheheaderoftheframe.
Network Layer
Thenetwork layerisresponsible forthesource-to-destination deliveryofapacket,
possibly acrossmultiple networks (links).Whereas thedatalinklayeroversees the
deliveryofthepacket between twosystemsonthesamenetwork(links),thenetwork
layerensuresthateachpacketgetsfromitspointoforigintoitsfinaldestination.
Iftwosystemsareconnected tothesamelink,thereisusuallynoneedforanet­
worklayer.However, ifthetwosystemsareattachedtodifferent networks (links)with
connecting devicesbetweenthenetworks (links),thereisoftenaneedforthenetwork
layertoaccomplish source-to-destination delivery.Figure2.8showstherelationship of
thenetworklayertothedatalinkandtransport layers.
Figure2.8Network layer
Fromtransport layer
I
1 -,,-_1
~: Data .1Packet
I ITotransport layer...
I
',,---H-3--_]1..
.j I
.Data,. Packeti------'-----'-------1
Network
layer...,
TodatalinklayerNetwork
layer
Fromdatalinklayer
Thenetworklayerisresponsible forthedeliveryofindividual
packetsfromthesourcehosttothedestination host.
Otherresponsibilities ofthenetworklayerincludethefollowing:
oLogicaladdressing. Thephysicaladdressing implemented bythedatalinklayer
handlestheaddressing problemlocally.Ifapacketpassesthenetworkboundary,
weneedanotheraddressing systemtohelpdistinguish thesourceanddestination
systems. Thenetworklayeraddsaheadertothepacketcomingfromtheupper
layerthat,amongotherthings,includes thelogicaladdresses ofthesenderand
receiver. Wediscusslogicaladdresses laterinthischapter.
oRouting. Whenindependent networks orlinksareconnected tocreateintemetworks
(network ofnetworks) oralargenetwork, theconnecting devices(calledroutersSECTION 2.3LAYERS INTHEOSIMODEL 37
orswitches) routeorswitchthepacketstotheirfinaldestination. Oneofthefunc­
tionsofthenetworklayeristoprovidethismechanism.
Figure2.9illustrates end-to-end deliverybythenetworklayer.
Figure2.9Source-to-destination delivery
End
system
r
LinkIntermediate
systemAEnd
system
rEnd
system
r
EF
HOP-lO-hop delivery Hop-to-hop delivery HOp-lO-hop delivery
Source-to-destination delivery
A B E F
Network-Network-Network
Datalink Datalink Datalink
Physical Physical Physical
I.Source-to-destination delivery,I
Asthefigureshows,nowweneedasource-to-destination delivery. Thenetworklayer
atAsendsthepackettothenetworklayeratB.WhenthepacketarrivesatrouterB,the
routermakesadecisionbasedonthefinaldestination (F)ofthepacket.Aswewillsee
inlaterchapters, routerBusesitsroutingtabletofindthatthenexthopisrouterE.The
networklayeratB,therefore, sendsthepackettothenetworklayeratE.Thenetwork
layeratE,intum,sendsthepackettothenetworklayeratF.
Transport Layer
Thetransport layerisresponsible forprocess-to-process delivery oftheentiremes­
sage.Aprocessisanapplication programrunningonahost.Whereas thenetworklayer
oversees source-to-destination delivery ofindividual packets,itdoesnotrecognize
anyrelationship between thosepackets.Ittreatseachoneindependently, asthough
eachpiecebelonged toaseparatemessage, whetherornotitdoes.Thetransport layer,
ontheotherhand,ensuresthatthewholemessagearrivesintactandinorder,overseeing
botherrorcontrolandflowcontrolatthesource-to-destination level.Figure2.10shows
therelationship ofthetransport layertothenetworkandsessionlayers.38CHAPTER 2NETWORK MODELS
Figure2.10Transport layer
Fromsessionlayer Tosessionlayer
\
\
\
\
Transport
layerSegments
Fromnetworklayer/
/
CH!lDataI
I I
Tonetworklayer/ / I I \ \
IH4(DatarIH4fDatarIH4)Data1
I II II I
Segments
Transport
layer
Thetransport layerisresponsible forthedeliveryofamessagefromoneprocesstoanother.
Otherresponsibilities ofthetransport layerincludethefollowing:
oService-point addressing. Computers oftenrunseveralprograms atthesame
time.Forthisreason,source-to-destination deliverymeansdeliverynotonlyfrom
onecomputer tothenextbutalsofromaspecificprocess(running program) on
onecomputer toaspecificprocess(running program) ontheother.Thetransport
layerheadermusttherefore includeatypeofaddresscalledaservice-point
address(orportaddress). Thenetwork layergetseachpackettothecorrect
computer; thetransport layergetstheentiremessage tothecorrectprocesson
thatcomputer.oSegmentation andreassembly. Amessageisdividedintotransmittable segments,
witheachsegmentcontaining asequence number.Thesenumbersenablethetrans­
portlayertoreassemble themessagecorrectly uponarrivingatthedestination and
toidentifyandreplacepacketsthatwerelostintransmission.
oConnection control. Thetransportlayercanbeeitherconnectionless orconnection­
oriented. Aconnectionless transport layertreatseachsegmentasanindependent
packetanddeliversittothetransport layeratthedestination machine. Aconnection­
orientedtransport layermakesaconnection withthetransport layeratthedestina­
tionmachine firstbeforedelivering thepackets.Afterallthedataaretransferred,
theconnection isterminated.
oFlowcontrol. Likethedatalinklayer,thetransport layerisresponsible forflow
control.However, flowcontrolatthislayerisperformed endtoendratherthan
acrossasinglelink.
oErrorcontrol. Likethedatalinklayer,thetransport layerisresponsible for
errorcontrol. However, errorcontrolatthislayerisperformed process-to­
processratherthanacrossasinglelink.Thesendingtransport layermakessure
thattheentiremessage arrivesatthereceiving transport layerwithouterror
(damage, loss,orduplication). Errorcorrection isusuallyachieved through
retransmission.SECTION 2.3LAYERS INTHEOSIMODEL 39
Figure2.11illustrates process-to-process deliverybythetransport layer.
Figure2.11Reliable process-to-process deliveryofamessage
Processes Processes
\
\
\
\
\
\
)-----~~~~'C)\\
\
\
\
\
\
\
\
~AninternetI
I
I,,,
,/~~~~,....-----<
, I I
/ I I
,I-.I.----------------------.J.I
/ I Network layer I
, Host-to-host deliveryL
Transport layer
Process-to-process delivery
SessionLayer
Theservicesprovided bythefirstthreelayers(physical, datalink,andnetwork) are
notsufficient forsomeprocesses. Thesessionlayeristhenetworkdialogcontroller.
Itestablishes, maintains, andsynchronizes theinteraction amongcommunicating
systems.
Thesessionlayerisresponsible fordialogcontrolandsynchronization.
Specificresponsibilities ofthesessionlayerincludethefollowing:
oDialogcontrol. Thesessionlayerallowstwosystemstoenterintoadialog.It
allowsthecommunication between twoprocesses totakeplaceineitherhalf­
duplex(onewayatatime)orfull-duplex (twowaysatatime)mode.
oSynchronization. Thesessionlayerallowsaprocesstoaddcheckpoints, orsyn­
Chronization points,toastreamofdata.Forexample, ifasystemissendingafile
of2000pages,itisadvisable toinsertcheckpoints afterevery100pagestoensure
thateach100-page unitisreceivedandacknowledged independently. Inthiscase,
ifacrashhappensduringthetransmission ofpage523,theonlypagesthatneedto
beresentaftersystemrecovery arepages501to523.Pagesprevious to501need
notberesent.Figure2.12illustrates therelationship ofthesessionlayertothe
transport andpresentation layers.
Presentation Layer
Thepresentation layerisconcerned withthesyntaxandsemantics oftheinformation
exchanged betweentwosystems. Figure2.13showstherelationship betweenthepre­
sentation layerandtheapplication andsessionlayers.40CHAPTER 2NETWORK MODELS
Figure2.12Sessionlayer
II II
1/ II I
I I II I•,I
I~')~:{~ ~,
r'~"''' 9~,
I
syn syn syn
ITopresentation layer
~i
1-,
I
I
I
I
I
II
I
IFrompresentation layer
1I
/ ;f t
/ I~ II
~.•.l
syn syn syn
1
Session
layerSession
layer
Totransport layer Fromtransport layer
Figure2.13Presentation layer
Fromapplication layer
IToapplication layer..
I
;.......,.1 --1
~l...,i"J)8,tfi~~.,.J
I I
Presentation
layer...
TosessionlayerPresentation
layer
Fromsessionlayer
Thepresentation layerisresponsible fortranslation, compression, andencryption.
Specificresponsibilities ofthepresentation layerincludethefollowing:
oTranslation. Theprocesses (running programs) intwosystemsareusuallyexchang­
inginformation intheformofcharacter strings,numbers, andsoon.Theinfonna­
tionmustbechanged tobitstreamsbeforebeingtransmitted. Because different
computers usedifferent encoding systems, thepresentation layerisresponsible for
interoperability between thesedifferent encoding methods. Thepresentation layer
atthesenderchanges the information fromitssender-dependent formatintoa
common format.Thepresentation layer atthereceiving machine changes the
common formatintoitsreceiver-dependent format.
oEncryption. Tocarrysensitive information, asystemmustbeabletoensure
privacy.Encryption meansthatthesendertransforms theoriginalinformation toSECTION 2.3LAYERS INTHEOSIMODEL 41
anotherformandsendstheresulting message outoverthenetwork. Decryption
reversestheoriginalprocesstotransform themessagebacktoitsoriginalform.
oCompression. Datacompression reducesthenumberofbitscontained inthe
information. Datacompression becomes particularly important inthetransmission
ofmultimedia suchastext,audio,andvideo.
Application Layer
Theapplication layerenablestheuser,whetherhumanorsoftware, toaccessthenet­
work.Itprovides userinterfaces andsupportforservices suchaselectronic mail,
remotefileaccessandtransfer,shareddatabasemanagement, andothertypesofdistrib­
utedinformation services.
Figure2.14showstherelationship oftheapplication layertotheuserandthepre­
sentation layer.Ofthemanyapplication servicesavailable, thefigureshowsonlythree:
XAOO(message-handling services), X.500(directory services), andfiletransfer,
access,andmanagement (FTAM). TheuserinthisexampleemploysXAOOtosendan
e-mailmessage.
Figure2.14Application layer
Data' ~:.User
(humanorprogram)
Application
layer
Topresentation layerUser
(humanorprogram)
Application
layer
Frompresentation layer
Theapplication layerisresponsible forproviding servicestotheuser.
Specificservicesprovided bytheapplication layerincludethefollowing:
oNetwork virtualterminal. Anetworkvirtualterminal isasoftware versionof
aphysicalterminal, anditallowsausertologontoaremotehost.Todoso,the
application createsasoftware emulation ofaterminal attheremotehost.The
user'scomputer talkstothesoftware terminal which,inturn,talkstothehost,
andviceversa.Theremotehostbelievesitiscommunicating withoneofitsown
terminals andallowstheusertologon.42CHAPTER 2NETWORK MODELS
oFiletransfer, access,andmanagement. Thisapplication allowsausertoaccess
filesinaremotehost(tomakechangesorreaddata),toretrievefilesfromaremote
computer foruseinthelocalcomputer, andtomanageorcontrolfilesinaremote
computer locally.
oMailservices. Thisapplication provides thebasisfore-mailforwarding and
storage.
oDirectory services. Thisapplication provides distributed database sourcesand
accessforglobalinformation aboutvariousobjectsandservices.
Summary ofLayers
Figure2.15showsasummary ofdutiesforeachlayer.
Figure2.15Summary oflayers
Totranslate, encrypt,and
compress data
Toprovidereliableprocess-to­
processmessage deliveryand
errorrecovery
Toorganize bitsintoframes;
toprovidehop-to-hop deliveryApplication
Presentation
Session
Transport
Network
Datalink
PhysicalToallowaccesstonetwork
resources
Toestablish, manage, and
terminate sessions
Tomovepacketsfromsource
todestination; toprovide
internetworking
Totransmitbitsoveramedium;
toprovidemechanical and
electrical specifications
2.4TCP/IPPROTOCOL SUITE
TheTCPIIPprotocol suitewasdeveloped priortotheOSImodel.Therefore, thelay­
ersintheTCP/IPprotocol suitedonotexactlymatchthoseintheOSImodel.The
originalTCP/IPprotocol suitewasdefinedashavingfourlayers:host-to-network,
internet,transport, andapplication. However, whenTCP/IPiscompared toOSI,wecan
saythatthehost-to-network layerisequivalent tothecombination ofthephysicaland
datalinklayers.Theinternetlayerisequivalent tothenetworklayer,andtheapplica­
tionlayerisroughlydoingthejobofthesession,presentation, andapplication layers
withthetransport layerinTCPIIPtakingcareofpartofthedutiesofthesessionlayer.
Sointhisbook,weassumethattheTCPIIPprotocolsuiteismadeoffivelayers:physi­
cal,datalink,network, transport, andapplication. Thefirstfourlayersprovidephysical
standards, networkinterfaces, internetworking, andtransport functions thatcorrespond
tothefirstfourlayersoftheOSImodel.ThethreetopmostlayersintheOSImodel,
however, arerepresented inTCPIIPbyasinglelayercalledtheapplication layer(see
Figure2.16).SECTION 2.4TCPIIPPROTOCOL SUITE 43
Figure2.16TCPIIPandOSImodel
IApplicationApplicationsJ
8GB8GBIPresentation ...]
ISession 1
ITransport___ SC_TP__!IL-.-__TC_P__II UD_P__II
IICMPIIIGMPI
NetworkIP(internet)
IRARPIIARPI
IDatalink
IPhysicalProtocols definedby
theunderlying networks
(host-to-network)J
1
TCP/IPisahierarchical protocolmadeupofinteractive modules, eachofwhich
provides aspecificfunctionality; however, themodulesarenotnecessarily interdepen­
dent.Whereas theOSImodelspecifies whichfunctions belongtoeachofitslayers,
thelayersoftheTCP/IPprotocol suitecontainrelatively independent protocols that
canbemixedandmatched depending ontheneedsofthesystem.Thetermhierarchi­
calmeansthateachupper-level protocol issupported byoneormorelower-level
protocols.
Atthetransport layer,TCP/IPdefinesthreeprotocols: Transmission Control
Protocol (TCP),UserDatagram Protocol (UDP),andStreamControlTransmission
Protocol (SCTP).Atthenetwork layer,themainprotocol definedbyTCP/IPisthe
Internetworking Protocol (IP);therearealsosomeotherprotocols thatsupportdata
movement inthislayer.
Physical andDataLinkLayers
Atthephysical anddatalinklayers,TCPIIPdoesnotdefineanyspecificprotocol. It
supportsallthestandardandproprietary protocols. AnetworkinaTCPIIPinternetwork
canbealocal-area networkorawide-area network.
Network Layer
Atthenetworklayer(or,moreaccurately, theinternetwork layer),TCP/IPsupports
theInternetworking Protocol. IP,inturn,usesfoursupporting protocols: ARP,
RARP,ICMP,andIGMP.Eachoftheseprotocols isdescribed ingreaterdetailinlater
chapters.44CHAPTER 2NETWORK MODELS
Internetworking Protocol (IP)
TheInternetworking Protocol (IP)isthetransmission mechanism usedbytheTCP/IP
protocols. Itisanunreliable andconnectionless protocol-a best-effort delivery service.
ThetermbesteffortmeansthatIPprovides noerrorchecking ortracking. IPassumes
theunreliability oftheunderlying layersanddoesitsbesttogetatransmission through
toitsdestination, butwithnoguarantees.
IPtransports datainpacketscalleddatagrams, eachofwhichistransported sepa­
rately.Datagrams cantravelalongdifferent routesandcanarriveoutofsequence orbe
duplicated. IPdoesnotkeeptrackoftheroutesandhasnofacilityforreordering data­
gramsoncetheyarriveattheirdestination.
Thelimitedfunctionality ofIPshouldnotbeconsidered aweakness, however. IP
provides bare-bones transmission functions thatfreetheusertoaddonlythosefacilities
necessary foragivenapplication andtherebyallowsformaximum efficiency. IPisdis­
cussedinChapter20.
AddressResolution Protocol
TheAddress Resolution Protocol (ARP)isusedtoassociate alogicaladdresswitha
physical address.Onatypicalphysical network, suchasaLAN,eachdeviceonalink
isidentified byaphysicalorstationaddress,usually imprinted onthenetworkinterface
card(NIC).ARPisusedtofindthephysical addressofthenodewhenitsInternet
addressisknown.ARPisdiscussed inChapter21.
ReverseAddressResolution Protocol
TheReverseAddress Resolution Protocol (RARP) allowsahosttodiscover itsInter­
netaddresswhenitknowsonlyitsphysical address.Itisusedwhenacomputer iscon­
nectedtoanetworkforthefirsttimeorwhenadisklesscomputer isbooted.Wediscuss
RARPinChapter21.
InternetControlMessage Protocol
TheInternet Control Message Protocol (ICMP) isamechanism usedbyhostsand
gateways tosendnotification ofdatagram problems backtothesender.ICMPsends
queryanderrorreporting messages. WediscussICMPinChapter21.
InternetGroupMessage Protocol
TheInternet GroupMessage Protocol (IGMP) isusedtofacilitate thesimultaneous
transmission ofamessage toagroupofrecipients. WediscussIGMPinChapter22.
Transport Layer
Traditionally thetransport layerwasrepresented inTCP/IPbytwoprotocols: TCPand
UDP.IPisahost-to-host protocol, meaning thatitcandeliverapacketfromone
physical devicetoanother.UDPandTCParetransport levelprotocols responsible
fordeliveryofamessage fromaprocess(running program) toanotherprocess.Anew
transport layerprotocol, SCTP,hasbeendevisedtomeettheneedsofsomenewer
applications.SECTION 2.5ADDRESSING 45
UserDatagram Protocol
TheUserDatagram Protocol(UDP)isthesimplerofthetwostandardTCPIIPtransport
protocols. Itisaprocess-to-process protocol thataddsonlyportaddresses, checksum
errorcontrol,andlengthinformation tothedatafromtheupperlayer.UDPisdiscussed
inChapter23.
Transmission ControlProtocol
TheTransmission ControlProtocol (TCP)provides fulltransport-layer servicesto
applications. TCPisareliablestreamtransport protocol. Thetermstream,inthiscon­
text,meansconnection-oriented: Aconnection mustbeestablished betweenbothends
ofatransmission beforeeithercantransmitdata.
Atthesendingendofeachtransmission, TCPdividesastreamofdataintosmaller
unitscalledsegments. Eachsegmentincludes asequence numberforreordering after
receipt,togetherwithanacknowledgment numberforthesegments received. Segments
arecarriedacrosstheinternetinsideofIPdatagrams. Atthereceiving end,TCPcol­
lectseachdatagram asitcomesinandreordersthetransmission basedonsequence
numbers. TCPisdiscussed inChapter23.
StreamControlTransmission Protocol
TheStreamControlTransmission Protocol (SCTP)provides supportfornewer
applications suchasvoiceovertheInternet.Itisatransport layerprotocol thatcom­
binesthebestfeaturesofUDPandTCP.WediscussSCTPinChapter23.
Application Layer
Theapplication layerinTCPIIPisequivalent tothecombined session,presentation,
andapplication layersintheOSImodeLManyprotocols aredefinedatthislayer.We
covermanyofthestandardprotocols inlaterchapters.
2.5ADDRESSING
Fourlevelsofaddresses areusedinaninternetemploying theTCP/IPprotocols:
physical (link)addresses, logical(IP)addresses, portaddresses, andspecific
addresses (seeFigure2.17).
Figure2.17Addresses inTCPIIP
Addresses
I
I I I I
Physical Logical Port Specific
addresses addresses addresses addresses46CHAPTER 2NETWORK MODELS
EachaddressisrelatedtoaspecificlayerintheTCPIIParchitecture, asshownin
Figure2.18.
Figure2.18Relationship oflayersandaddresses inTCPIIP
Physical
addresses•Specific
addresses
•Port
addresses
..Logical
addressesI IIPand
otherprotocols
Underlying
~ physical ~
networks
Physical layerAppli"tio" I,,",II p=,=
 11-----.-'---..I
T""portI,,",IEJG[j~1-----.-'---..I
Network layer
Datalinklayer
Physical Addresses
Thephysicaladdress,alsoknownasthelinkaddress,istheaddressofanodeasdefined
byitsLANorWAN.Itisincluded intheframeusedbythedatalinklayer.Itisthe
lowest-level address.
Thephysical addresses haveauthority overthenetwork(LANorWAN).Thesize
andformatoftheseaddresses varydepending onthenetwork. Forexample, Ethernet
usesa6-byte(48-bit)physical addressthatisimprinted onthenetworkinterface card
(NIC).LocalTalk (Apple), however, hasaI-bytedynamic addressthatchangeseach
timethestationcomesup.
Example 2.1
InFigure2.19anodewithphysical address10sendsaframetoanodewithphysical address87.
Thetwonodesareconnected byalink(bustopology LAN).Atthedatalinklayer,thisframe
contains physical (link)addresses intheheader.Thesearetheonlyaddresses needed.Therestof
theheadercontains otherinformation neededatthislevel.Thetrailerusuallycontains extrabits
neededforerrordetection. Asthefigureshows,thecomputer withphysical addresslOisthe
sender,andthecomputer withphysical address87isthereceiver. Thedatalinklayeratthe
senderreceivesdatafromanupperlayer.Itencapsulates thedatainaframe,addingaheaderand
atrailer.Theheader,amongotherpiecesofinformation, carriesthereceiverandthesenderphys­
ical(link)addresses. Notethatinmostdatalinkprotocols, thedestination address, 87inthis
case,comesbeforethesourceaddress(10inthiscase).
Wehaveshownabustopology foranisolatedLAN.Inabustopology, theframeispropa­
gatedinbothdirections (leftandright).Theframepropagated totheleftdieswhenitreachesthe
endofthecableifthecableendisterminated appropriately. Theframepropagated totherightisSECTION 2.5ADDRESSING 47
Figure2.19Physical addresses
53__Sender
__28
Destination addressdoes
notmatch;thepacketis
dropped
•••
LAN"Receiver
senttoeverystationonthenetwork. Eachstationwithaphysicaladdresses otherthan87drops
theframebecausethedestination addressintheframedoesnotmatchitsownphysicaladdress.
Theintended destination computer, however, findsamatchbetweenthedestination addressinthe
frameanditsownphysicaladdress.Theframeischecked, theheaderandtraileraredropped, and
thedatapartisdecapsulated anddelivered totheupperlayer.
Example 2.2
AswewillseeinChapter13,mostlocal-area networks usea48-bit(6-byte)physical address
writtenas12hexadecimal digits;everybyte(2hexadecimal digits)isseparated byacolon,as
shownbelow:
07:01:02:01 :2C:4B
A6-byte(12hexadecimal digits)physicaladdress
LogicalAddresses
Logicaladdresses arenecessary foruniversal communications thatareindependent of
underlying physical networks. Physical addresses arenotadequate inaninternetwork
environment wheredifferent networks canhavedifferent address formats.Auniversal
addressing systemisneededinwhicheachhostcanbeidentified uniquely, regardless
oftheunderlying physicalnetwork.
Thelogicaladdresses aredesigned forthispurpose.AlogicaladdressintheInternet
iscurrently a32-bitaddressthatcanuniquely defineahostconnected totheInternet.No
twopubliclyaddressed andvisiblehostsontheInternetcanhavethesameIPaddress.
Example 2.3
Figure2.20showsapartofaninternetwithtworoutersconnecting threeLANs.Eachdevice
(computer orrouter)hasapairofaddresses (logicalandphysical) foreachconnection. Inthis
case,eachcomputer isconnected toonlyonelinkandtherefore hasonlyonepairofaddresses.
Eachrouter,however, isconnected tothreenetworks (onlytwoareshowninthefigure).Soeach
routerhasthreepairsofaddresses, oneforeachconnection. Although itmayobviousthateach
routermusthaveaseparatephysicaladdressforeachconnection, itmaynotbeobviouswhyit
needsalogicaladdressforeachconnection. WediscusstheseissuesinChapter22whenwedis­
cussrouting.48CHAPTER 2NETWORK MODELS
Figure2.20IPaddresses
AI10
LAN2
Toanother
network Y/55Toanother XJ44
network
Ph)sical
addl'esscs
changedLAN3-~~_~I~I
 JRouterll
~tE]
LAN1
P/95
Thecomputer withlogicaladdressAandphysical address10needstosenda
packettothecomputer withlogicaladdressPandphysical address95.Weuselettersto
showthelogicaladdresses andnumbers forphysical addresses, butnotethatbothare
actuallynumbers, aswewillseelaterinthechapter.
Thesenderencapsulates itsdatainapacketatthenetworklayerandaddstwological
addresses (AandP).Notethatinmostprotocols, thelogicalsourceaddresscomesbefore
thelogicaldestination address(contrary totheorderofphysicaladdresses). Thenetwork
layer,however, needstofindthephysicaladdressofthenexthopbeforethepacketcanbe
delivered. Thenetwork layerconsults itsroutingtable(seeChapter22)andfindsthe
logicaladdressofthenexthop(routerI)tobeF.TheARPdiscussed previously finds
thephysical addressofrouter1thatcorresponds tothelogicaladdressof20.Nowthe
networklayerpassesthisaddresstothedatalinklayer,whichintum,encapsulates the
packetwithphysicaldestination address20andphysicalsourceaddress10.
Theframeisreceived byeverydeviceonLAN1,butisdiscarded byallexcept
router1,whichfindsthatthedestination physicaladdressintheframematcheswithits
ownphysicaladdress.Therouterdecapsulates thepacketfromtheframetoreadthelog­
icaldestination address P.Sincethelogicaldestination addressdoesnotmatchthe
router'slogicaladdress, therouterknowsthatthepacketneedstobeforwarded. TheSECTION 2.5ADDRESSING 49
routerconsultsitsroutingtableandARPtofindthephysicaldestination addressofthe
nexthop(router2),createsanewframe,encapsulates thepacket,andsendsittorouter2.
Notethephysical addresses intheframe.Thesourcephysical addresschanges
from10to99.Thedestination physical addresschangesfrom20(router1physical
address)to33(router2physicaladdress). Thelogicalsourceanddestination addresses
mustremainthesame;otherwise thepacketwillbelost.
Atrouter2wehaveasimilarscenario. Thephysicaladdresses arechanged, anda
newframeissenttothedestination computer. Whentheframereachesthedestination,
thepacketisdecapsulated. Thedestination logicaladdressPmatchesthelogicaladdress
ofthecomputer. Thedataaredecapsulated fromthepacketanddelivered totheupper
layer.Notethatalthough physical addresses willchangefromhoptohop,logical
addresses remainthesamefromthesourcetodestination. Therearesomeexceptions to
thisrulethatwediscoverlaterinthebook.
Thephysical addresses willchangefromhoptohop,
butthelogicaladdresses usuallyremainthesame.
PortAddresses
TheIPaddressandthephysical addressarenecessary foraquantityofdatatotravel
fromasourcetothedestination host.However, arrivalatthedestination hostisnotthe
finalobjective ofdatacommunications ontheInternet.Asystemthatsendsnothingbut
datafromonecomputer toanotherisnotcomplete. Today,computers aredevicesthat
canrunmultipleprocesses atthesametime.Theendobjective ofInternetcommunica­
tionisaprocesscommunicating withanotherprocess.Forexample, computer Acan
communicate withcomputer CbyusingTELNET. Atthesametime,computer Acom­
municates withcomputer BbyusingtheFileTransfer Protocol (FTP).Forthesepro­
cessestoreceivedatasimultaneously, weneedamethodtolabelthedifferent processes.
Inotherwords,theyneedaddresses. IntheTCPIIParchitecture, thelabelassigned toa
processiscalledaportaddress.AportaddressinTCPIIPis16bitsinlength.
Example 2.4
Figure2.21showstwocomputers communicating viatheInternet.Thesendingcomputer isrun­
ningthreeprocesses atthistimewith portaddresses a,b,andc.Thereceiving computer isrunning
twoprocesses atthistimewithportaddressesjandk.Processainthesendingcomputer needsto
communicate withprocessjinthereceiving computer. Notethatalthough bothcomputers are
usingthesameapplication, FTP,forexample, theportaddresses aredifferentbecauseoneisaclient
program andtheotherisaserverprogram, aswewillseeinChapter23.Toshowthatdatafrom
processaneedtobedelivered to process j,andnotk,thetransport layerencapsulates datafrom
theapplication layerinapacketandaddstwoportaddresses (aandj),sourceanddestination. The
packetfromthetransport layeristhenencapsulated inanotherpacketatthenetworklayerwith
logicalsourceanddestination addresses (AandP).Finally,thispacketisencapsulated inaframe
withthephysical source anddestination addresses ofthenexthop.Wehavenotshownthephysi­
caladdresses becausetheychangefromhoptohopinsidetheclouddesignated astheInternet.
Notethatalthough physicaladdresses changefromhoptohop,logicalandportaddresses remain
thesamefromthesourcetodestination. Therearesomeexceptions tothisrulethatwediscuss
laterinthebook.50CHAPTER 2NETWORK MODELS
Figure2.21Portaddresses
abcDD
- - - - Datalinklayer- ---
InternetjkDD
Thephysicaladdresses changefromhoptohop,
butthelogicalandportaddresses usuallyremainthesame.
Example 2.5
AswewillseeinChapter23,aportaddressisa16-bitaddressrepresented byonedecimalnum­
herasshown.
753
A16-bitportaddressrepresented asonesinglenumber
SpecificAddresses
Someapplications haveuser-friendly addresses thataredesigned forthatspecificaddress.
Examples includethee-mailaddress(forexample, forouzan@fhda.edu) andtheUniversal
Resource Locator(URL)(forexample, www.mhhe.com). Thefirstdefinestherecipient of
ane-mail(seeChapter26);thesecondisusedtofindadocument ontheWorldWideWeb
(seeChapter27).Theseaddresses, however, getchanged tothecorresponding portand
logicaladdresses bythesendingcomputer, aswewillseeinChapter25.
2.6RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
booksandsites.Theitemsenclosed inbrackets, [...]refertothereference listatthe
endofthetext.SECTION 2.7KEYTERMS 51
Books
Network modelsarediscussed inSection1.3of[Tan03],Chapter2of[For06],Chapter2
of[Sta04],Sections 2.2and2.3of[GW04], Section1.3of[PD03],andSection1.7of
[KR05].Agooddiscussion aboutaddresses canbefoundinSection1.7of[Ste94].
Sites
Thefollowing siteisrelatedtotopicsdiscussed inthischapter.
owww.osi.org! Information aboutOS1.
RFCs
Thefollowing sitelistsallRFCs,including thoserelatedtoIPandportaddresses.
owww.ietLorg/rfc.html
2.7KEYTERMS
accesscontrol
AddressResolution Protocol (ARP)
application layer
best-effortdelivery
bits
connection control
datalinklayer
encoding
error
errorcontrol
flowcontrol
frame
header
hop-to-hop delivery
host-to-host protocol
interface
InternetControlMessage Protocol
(ICMP)
InternetGroupMessage Protocol(IGMP)
logicaladdressing
mailservice
networklayer
node-to-node delivery
opensystemOpenSystems Interconnection (OSI)
model
peer-to-peer process
physical addressing
physical layer
portaddress
presentation layer
process-to-process delivery
ReverseAddressResolution Protocol
(RARP)
routing
segmentationsessionlayer
source-to-destination delivery
StreamControlTransmission Protocol
(SCTP)
synchronization point
TCPIIPprotocol suite
trailer
Transmission ControlProtocol (TCP)
transmission rate
transport layer
transport levelprotocols
UserDatagram Protocol (UDP)52CHAPTER 2NETWORK MODELS
2.8SUMMARY
oTheInternational Standards Organization createdamodelcalledtheOpenSystems
Interconnection, whichallows diverse systemstocommunicate.
UTheseven-layer OSImodelprovides guidelines forthedevelopment ofuniversally
compatible networking protocols.
oThephysical, datalink,andnetworklayersarethenetworksupportlayers.
oThesession,presentation, andapplication layersaretheusersupportlayers.
DThetransport layerlinksthenetworksupportlayersandtheusersupportlayers.
oThephysical layercoordinates thefunctions required totransmitabitstreamover
aphysicalmedium.
oThedatalinklayerisresponsible fordelivering dataunitsfromonestationtothe
nextwithouterrors.
oThenetworklayerisresponsible forthesource-to-destination deliveryofapacket
acrossmultiplenetworklinks.
[JThetransport layerisresponsible fortheprocess-to-process deliveryoftheentire
message.
DThesessionlayerestablishes, maintains, andsynchronizes theinteractions between
communicating devices.
UThepresentation layerensuresinteroperability between communicating devices
throughtransformation ofdataintoamutually agreeduponformat.
oTheapplication layerenablestheuserstoaccessthenetwork.
oTCP/IPisafive-layer hierarchical protocolsuitedeveloped beforetheOSImodel.
UTheTCP/IPapplication layerisequivalent tothecombined session,presentation,
andapplication layersoftheOSImodel.
UFourlevelsofaddresses areusedinaninternetfollowing theTCP/IPprotocols: phys­
ical(link)addresses, logical(IP)addresses, portaddresses, andspecificaddresses.
oThephysical address,alsoknownasthelinkaddress,istheaddressofanodeas
definedbyitsLANorWAN.
L,JTheIPaddressuniquely definesahostontheInternet.
UTheportaddressidentifies aprocessonahost.
oAspecificaddressisauser-friendly address.
2.9PRACTICE SET
ReviewQuestions
I.ListthelayersoftheInternetmodel.
2.WhichlayersintheInternetmodelarethenetworksupportlayers?
3.WhichlayerintheInternetmodelistheusersupportlayer?
4.Whatisthedifference betweennetworklayerdeliveryandtransport layerdelivery?SECTION 2.9PRACTICE SET 53
5.Whatisapeer-to-peer process?
6.Howdoesinformation getpassedfromonelayertothenextintheInternet
model?
7.Whatareheadersandtrailers,andhowdotheygetaddedandremoved?
X.Whataretheconcerns ofthephysicallayerintheInternetmodel?
9.Whataretheresponsibilities ofthedatalinklayerintheInternetmodel?
10.Whataretheresponsibilities ofthenetworklayerintheInternetmodel?
II.Whataretheresponsibilities ofthetransport layerintheInternetmodel?
12.Whatisthedifference between aportaddress,alogicaladdress,andaphysical
address?
13.Namesomeservicesprovided bytheapplication layerintheInternetmodel.
14.HowdothelayersoftheInternetmodelcorrelate tothelayersoftheOSImodel?
Exercises
15.HowareOSIandISOrelatedtoeachother?
16.Matchthefollowing tooneormorelayersoftheOSImodel:
a.Routedetermination
b.Flowcontrol
c.Interface totransmission media
d.Provides accessfortheenduser
I7.Matchthefollowing tooneormorelayersoftheOSImodel:
a.Reliableprocess-to-process message delivery
b.Routeselection
c.Definesframes
d.Provides userservicessuchase-mailandfiletransfer
e.Transmission ofbitstreamacrossphysicalmedium
\8.Matchthefollowing tooneormorelayersoftheOSlmodel:
a.Communicates directlywithuser'sapplication program
b.Errorcorrection andretransmission
c.Mechanical, electrical, andfunctional interface
d.Responsibility forcarryingframesbetweenadjacentnodes
I9.Matchthefollowing tooneormorelayersoftheOSImodel:
a.Formatandcodeconversion services
b.Establishes, manages, andterminates sessions
c.Ensuresreliabletransmission ofdata
d.Log-inandlog-outprocedures
e.Provides independence fromdifferences indatarepresentation
20.InFigure2.22,computer Asendsamessage tocomputer DviaLANl,routerRl,
andLAN2.Showthecontentsofthepacketsandframesatthenetworkanddata
linklayerforeachhopinterface.54CHAPTER 2NETWORK MODELS
Figure2.22Exercise 20
Sender 8/42
LAN1Rl
LAN2Sender
21.InFigure2.22,assumethatthecommunication isbetween aprocessrunningat
computer Awithportaddressiandaprocessrunningatcomputer Dwithport
addressj.Showthecontentsofpacketsandframesatthenetwork, datalink,and
transport layerforeachhop.
22.Suppose acomputer sendsaframetoanothercomputer onabustopology LAN.
Thephysicaldestination addressoftheframeiscorrupted duringthetransmission.
Whathappenstotheframe?Howcanthesenderbeinformed aboutthesituation?
23.Suppose acomputer sendsapacketatthenetwork layertoanothercomputer
somewhere intheInternet. Thelogicaldestination addressofthepacketiscor­
rupted.Whathappenstothepacket?Howcanthesourcecomputer beinformed of
thesituation?
24.Suppose acomputer sendsapacketatthetransport layertoanothercomputer
somewhere intheInternet. Thereisnoprocesswiththedestination portaddress
runningatthedestination computer. Whatwillhappen?
25.Ifthedatalinklayercandetecterrorsbetween hops,whydoyouthinkweneed
anotherchecking mechanism atthetransport layer?
Research Activities
26.Givesomeadvantages anddisadvantages ofcombining the session, presentation,
andapplication layerintheOSImodelintoonesingleapplication layerinthe
Internetmodel.
27.Dialogcontrolandsynchronization aretworesponsibilities ofthesessionlayerin
theOSImodel.Whichlayerdoyouthinkisresponsible forthesedutiesinthe
Internetmodel?Explainyouranswer.
28.Translation, encryption, andcompression aresomeofthedutiesofthepresentation
layerintheOSImodel.Whichlayerdoyouthinkisresponsible forthesedutiesin
theInternetmodel?Explainyouranswer.
29.Thereareseveraltransport layermodelsproposed intheOSImodel.Findallof
them.Explainthedifferences betweenthem.
30.Thereareseveralnetwork layermodelsproposed intheOSImodel.Findallof
them.Explainthedifferences betweenthem.Physical Layer
andMedia
Objectives
Westartthediscussion oftheInternetmodelwiththebottom-most layer,thephysical
layer.Itisthelayerthatactuallyinteracts withthetransmission media,thephysical part
ofthenetwork thatconnects network components together. Thislayerisinvolved in
physically carrying information fromonenodeinthenetworktothenext.
Thephysical layerhascomplex taskstoperform. Onemajortaskistoprovide
servicesforthedatalinklayer.ThedatainthedatalinklayerconsistsofOsandIsorga­
nizedintoframesthatarereadytobesentacrossthetransmission medium. Thisstream
ofOsandIsmustfirstbeconverted intoanotherentity:signals.Oneoftheservicespro­
videdbythephysical layeristocreateasignalthatrepresents thisstreamofbits.
Thephysical layermustalsotakecareofthephysical network, thetransmission
medium. Thetransmission medium isapassiveentity;ithasnointernalprogram or
logicforcontrollikeotherlayers.Thetransmission medium mustbecontrolled bythe
physical layer.Thephysical layerdecidesonthedirections ofdataflow.Thephysical
layerdecidesonthenumberoflogicalchannels fortransporting datacomingfrom
different sources.
InPart2ofthebook,wediscussissuesrelatedtothephysical layerandthetrans­
missionmediumthatiscontrolled bythephysical layer.InthelastchapterofPart2,we
discussthestructure andthephysical layersofthetelephone network andthecable
network.
Part2ofthebookisdevotedtothephysicallayer
andthetransmission media.Chapters
Thispartconsistsofsevenchapters: Chapters 3to9.
Chapter3
Chapter3discusses therelationship between data,whicharecreatedbyadevice,and
electromagnetic signals,whicharetransmitted overamedium.
Chapter4
Chapter4dealswithdigitaltransmission. Wediscusshowwecancovertdigitalor
analogdatatodigitalsignals.
Chapter5
Chapter5dealswithanalogtransmission. Wediscusshowwecancovertdigitalor
analogdatatoanalogsignals.
Chapter6
Chapter6showshowwecanusetheavailable bandwidth efficiently. Wediscusstwo
separate, butrelatedtopics,multiplexing andspreading.
Chapter7
Afterexplaining someideasaboutdataandsignalsandhowwecanusethemeffi­
ciently,wediscussthecharacteristics oftransmission media,bothguidedand
unguided, inthischapter.Although transmission mediaoperates underthephysical
layer,theyarecontrolled bythephysicallayer.
Chapter8
Although theprevious chapters inthispartareissuesrelatedtothephysical layeror
transmission media,Chapter8discusses switching, atopicthatcanberelatedtoseveral
layers.Wehaveincluded thistopicinthispartofthebooktoavoidrepeating thedis­
cussionforeachlayer.
Chapter9
Chapter9showshowtheissuesdiscussed intheprevious chapterscanbeusedinactual
networks. Inthischapter,wefirstdiscussthetelephone network asdesigned tocarry
voice.Wethenshowhowitcanbeusedtocarrydata.Second,wediscussthecablenet­
workasatelevision network. Wethenshowhowitcanalsobeusedtocarrydata.CHAPTER 3
DataandSignals
Oneofthemajorfunctions ofthephysical layeristomovedataintheformofelectro­
magnetic signalsacrossatransmission medium. Whether youarecollecting numerical
statistics fromanothercomputer, sendinganimated picturesfromadesignworkstation,
orcausingabelltoringatadistantcontrolcenter,youareworking withthetransmis­
sionofdataacrossnetworkconnections.
Generally, thedatausabletoapersonorapplication arenotinaformthatcanbe
transmitted overanetwork. Forexample, aphotograph mustfirstbechanged toaform
thattransmission mediacanaccept.Transmission mediaworkbyconducting energy
alongaphysical path.
Tobetransmitted, datamustbetransformed toelectromagnetic signals.
3.1ANALOG ANDDIGITAL
Bothdataandthesignalsthatrepresent themcanbeeitheranalogordigitalinform.
AnalogandDigitalData
Datacanbeanalogordigital.Thetermanalogdatareferstoinformation thatiscontin­
uous;digitaldatareferstoinformation thathasdiscretestates.Forexample, ananalog
clockthathashour,minute,andsecondhandsgivesinformation inacontinuous form;
themovements ofthehandsarecontinuous. Ontheotherhand,adigitalclockthat
reportsthehoursandtheminuteswillchangesuddenly from8:05to8:06.
Analogdata,suchasthesoundsmadebyahumanvoice,takeoncontinuous values.
Whensomeone speaks,ananalogwaveiscreatedintheair.Thiscanbecaptured bya
microphone andconverted toananalogsignalorsampled andconverted toadigital
signal.
Digitaldatatakeondiscrete values.Forexample, dataarestoredincomputer
memory intheformofOsand1s.Theycanbeconverted toadigitalsignalormodu­
latedintoananalogsignalfortransmission acrossamedium.
5758CHAPTER 3DATAANDSIGNALS
Datacanbeanalogordigital.Analogdataarecontinuous andtakecontinuous values.
Digitaldatahavediscretestatesandtakediscretevalues.
AnalogandDigitalSignals
Likethedatatheyrepresent, signalscanbeeitheranalogordigital.Ananalogsignal
hasinfinitely manylevelsofintensity overaperiodoftime.Asthewavemovesfrom
valueAtovalueB,itpassesthroughandincludes aninfinitenumberofvaluesalongits
path.Adigitalsignal,ontheotherhand,canhaveonlyalimitednumberofdefined
values.Although eachvaluecanbeanynumber,itisoftenassimpleas1andO.
Thesimplest waytoshowsignalsisbyplottingthemonapairofperpendicular
axes.Theverticalaxisrepresents thevalueorstrengthofasignal.Thehorizontal axis
represents time.Figure3.1illustrates ananalogsignalandadigitalsignal.Thecurve
representing theanalogsignalpassesthroughaninfinitenumberofpoints.Thevertical
linesofthedigitalsignal,however, demonstrate thesuddenjumpthatthesignalmakes
fromvaluetovalue.
Signalscanbeanalogordigital.Analogsignalscanhaveaninfinitenumberof
valuesinarange;digitalsignalscanhaveonlyalimitednumberofvalues.
Figure3.1Comparison ofanaloganddigitalsignals
Value Value
Time-
Tim
'----e
a.Analogsignal b.Digitalsignal
Periodic andNonperiodic Signals
Bothanaloganddigitalsignalscantakeoneoftwoforms:periodic ornonperiodic
(sometimes refertoasaperiodic, becausetheprefixainGreekmeans"non").
Aperiodic signalcompletes apatternwithinameasurable timeframe,calleda
period,andrepeatsthatpatternoversubsequent identical periods.Thecompletion of
onefullpatterniscalledacycle.Anonperiodic signalchangeswithoutexhibiting apat­
ternorcyclethatrepeatsovertime.
Bothanaloganddigitalsignalscanbeperiodic ornonperiodic. Indatacommuni­
cations,wecommonly useperiodic analogsignals(because theyneedlessbandwidth,SECTION 3.2PERIODIC ANALOG SIGNALS 59
aswewillseeinChapter5)andnonperiodic digitalsignals(because theycanrepresent
variation indata,aswewillseeinChapter6).
Indatacommunications, wecommonly useperiodic
analogsignalsandnonperiodic digitalsignals.
3.2PERIODIC ANALOG SIGNALS
Periodic analogsignalscanbeclassified assimpleorcomposite. Asimpleperiodic
analogsignal,asinewave,cannotbedecomposed intosimplersignals.Acomposite
periodicanalogsignaliscomposed ofmultiplesinewaves.
SineWave
Thesinewaveisthemostfundamental formofaperiodic analogsignal.Whenwe
visualize itasasimpleoscillating curve,itschangeoverthecourseofacycleissmooth
andconsistent, acontinuous, rollingflow.Figure3.2showsasinewave.Eachcycle
consistsofasinglearcabovethetimeaxisfollowed byasinglearcbelowit.
Figure3.2Asinewave
Value
Time
Wediscussamathematical approach tosinewavesinAppendix C.
Asinewavecanberepresented bythreeparameters: thepeakamplitude, thefre­
quency,andthephase.Thesethreeparameters fullydescribeasinewave.
PeakAmplitude
Thepeakamplitude ofasignalistheabsolutevalueofitshighestintensity, propor­
tionaltotheenergyitcarries.Forelectricsignals,peakamplitude isnormally measured
involts.Figure3.3showstwo signals andtheirpeakamplitudes.
Example 3.1
Thepowerinyourhousecanberepresented byasinewavewithapeakamplitude of155to170V.
However, itiscommon knowledge thatthevoltageofthepowerinU.S.homesis110to120V.60CHAPTER 3DATAANDSIGNALS
Figure3.3Twosignalswiththesamephaseandfrequency, butdifferent amplitudes
Amplitude
Peakamplitude
Time
a.Asignalwithhighpeakamplitude
Amplitude
Time
b.Asignalwithlowpeakamplitude
Thisdiscrepancy isduetothefactthatthesearerootmeansquare(rms)values.Thesignalis
squaredandthentheaverageamplitude iscalculated. Thepeakvalueisequalto2112xrms
value.
Example 3.2
Thevoltageofbatteryisaconstant; thisconstantvaluecanbeconsidered asinewave,aswewill
seelater.Forexample, thepeakvalueofanAAbatteryisnormally 1.5V.
PeriodandFrequency
Periodreferstotheamountoftime,inseconds, asignalneedstocomplete 1cycle.
Frequency referstothenumberofperiodsinIs.Notethatperiodandfrequency arejust
onecharacteristic definedintwoways.Periodistheinverseoffrequency, andfrequency
istheinverseofperiod,asthefollowing formulas show.
1f=­Tand1T=-f
Frequency andperiodaretheinverseofeachother.
Figure3.4showstwosignalsandtheirfrequencies.SECTION 3.2PERIODIC ANALOG SIGNALS 61
Figure3.4Twosignalswiththesameamplitude andphase,butdifferentfrequencies
Amplitude
12periodsinIs-----+- Frequency is12Hz
1s
Time
Period:ns
a.Asignalwithafrequency of12Hz
Amplitude
6periodsinIs-----+- Frequency is6Hz
1s
I•••
Time
T
Period:ts
b.Asignalwithafrequency of6Hz
Periodisformally expressed inseconds. Frequency isformally expressed in
Hertz(Hz),whichiscyclepersecond.Unitsofperiodandfrequency areshownin
Table3.1.
Table3.1Unitsofperiodandfrequency
Unit Equivalent Unit Equivalent
Seconds(s) 1s Hertz(Hz) 1Hz
Milliseconds (ms) 10-3s Kilohertz (kHz) 103Hz
Microseconds (Ils) 10-6s Megahertz (MHz) 106Hz
Nanoseconds (ns) 10-9s Gigahertz (GHz) 109Hz
Picoseconds (ps) 10-12s Terahertz (THz) 1012Hz
Example 3.3
Thepowerweuseathomehasafrequency of60Hz(50HzinEurope). Theperiodofthissine
wavecanbe determined asfollows:
T=1=610=0.0166s=0.0166x103ms=16.6illS
Thismeansthattheperiodofthepowerforourlightsathomeis0.0116s,or16.6ms.Our
eyesarenotsensitive enoughtodistinguish theserapidchangesinamplitude.62CHAPTER 3DATAANDSIGNALS
Example 3.4
Expressaperiodof100msinmicroseconds.
Solution
FromTable3.1wefindtheequivalents of1ms(lmsis10-3s)and1s(1sis106118).Wemake
thefollowing substitutions:
100ms:;;::;100X10-3s:;;::;100X10-3X106JlS:;;::;102X10-3X106JlS::::::105JlS
Example 3.5
Theperiodofasignalis100ms.Whatisitsfrequency inkilohertz?
Solution
FirstwechangelOOmstoseconds, and thenwecalculate thefrequency fromtheperiod(1Hz=
10-3kHz).
100ms=100X10-3S=10-1S
f=1.=_1_Hz=10Hz=10X10-3kHz=10-2kHz
T10-1
MoreAboutFrequency
Wealreadyknowthatfrequency istherelationship ofasignaltotimeandthatthefrequency
ofawaveisthenumberofcyclesitcompletes in1s.Butanotherwaytolookatfrequency
isasameasurement oftherateofchange.Electromagnetic signalsareoscillating wave­
forms;thatis,theyfluctuate continuously andpredictably aboveandbelowameanenergy
level.A40-Hzsignalhasone-halfthefrequency ofan80-Hzsignal;itcompletes 1cyclein
twicethetimeofthe80-Hzsignal,soeachcyclealsotakestwiceaslongtochangefromits
lowesttoitshighestvoltagelevels.Frequency, therefore, thoughdescribed incyclespersec­
ond(hertz),isageneralmeasurement oftherateofchangeofasignalwithrespecttotime.
Frequency istherateofchangewithrespecttotime.Changeinashortspanoftime
meanshighfrequency. Changeoveralongspanoftimemeanslowfrequency.
Ifthevalueofasignalchanges overaveryshortspanoftime,itsfrequency is
high.Ifitchangesoveralongspanoftime,itsfrequency islow.
TwoExtremes
Whatifasignaldoesnotchangeatall?Whatifitmaintains aconstantvoltagelevelforthe
entiretimeitisactive?Insuchacase,itsfrequency iszero.Conceptually, thisideaisasim­
pleone.Ifasignaldoesnotchangeatall,itnevercompletes acycle,soitsfrequency isaHz.
Butwhatifasignalchanges instantaneously? Whatifitjumpsfromonelevelto
anotherinnotime?Thenitsfrequency isinfinite.Inotherwords,whenasignalchanges
instantaneously, itsperiodiszero;sincefrequency istheinverseofperiod,inthiscase,
thefrequency is1/0,orinfinite(unbounded).SECTION 3.2PERiODIC ANALOG SIGNALS 63
Ifasignaldoesnotchangeatall,itsfrequency iszero.
Ifasignalchangesinstantaneously, itsfrequency isinfinite.
Phase
Thetermphasedescribes thepositionofthewaveform relativetotimeO.Ifwethinkof
thewaveassomething thatcanbeshiftedbackward orforwardalongthetimeaxis,
phasedescribes theamountofthatshift.Itindicates thestatusofthefirstcycle.
Phasedescribes thepositionofthewaveform relativetotimeO.
Phaseismeasured indegreesorradians[360°is2nrad;1°is2n/360rad,and1rad
is360/(2n)]. Aphaseshiftof360°corresponds toashiftofacomplete period; aphase
shiftof180°corresponds toashiftofone-halfofaperiod;andaphaseshiftof90°cor­
responds toashiftofone-quarter ofaperiod(seeFigure3.5).
Figure3.5Threesinewaveswiththesameamplitude andfrequency, butdifferentphases
a.0degrees
*AAL
1!4TO\J~
b.90degrees
c.180degrees•Time
~
Time
)I
Time
Looking atFigure3.5,wecansaythat
I.Asinewavewithaphaseof0°startsattime0withazeroamplitude. The
amplitude isincreasing.
2.Asinewavewithaphaseof90°startsattime0withapeakamplitude. The
amplitude isdecreasing.64CHAPTER 3DATAANDSIGNALS
3.Asinewavewithaphaseof180°startsattime0withazeroamplitude. The
amplitude isdecreasing.
Anotherwaytolookatthephaseisintermsofshiftoroffset.Wecansaythat
1.Asinewavewithaphaseof0°isnotshifted.
2.Asinewavewithaphaseof90°isshiftedtotheleftby!cycle.However, note4thatthesignaldoesnotreallyexistbeforetimeO.
3.Asinewavewithaphaseof180°isshiftedtotheleftby~cycle.However, note
thatthesignaldoesnotreallyexistbeforetimeO.
Example 3.6
Asinewaveisoffset ~cyclewithrespecttotimeO.Whatisitsphaseindegreesandradians?
Solution
Weknowthat1complete cycleis360°.Therefore,icycleis
!x360;::;60°=60x2ntad;::;~fad;::;1.046rad6 360 3
Wavelength
Wavelength isanothercharacteristic ofasignaltraveling through atransmission
medium. Wavelength bindstheperiodorthefrequency ofasimplesinewavetothe
propagation speedofthemedium(seeFigure3.6).
Figure3.6Wavelength andperiod
Wavelength""":.': Transmission medium /'-~ /'-
Direction of
propagation
Whilethefrequency ofasignalisindependent ofthemedium, thewavelength
dependsonboththefrequency andthemedium. Wavelength isaproperty ofanytype
ofsignal.Indatacommunications, weoftenusewavelength todescribe thetransmis­
sionoflightinanopticalfiber.Thewavelength isthedistanceasimplesignalcantravel
inoneperiod.
Wavelength canbecalculated ifoneisgiventhepropagation speed(thespeedof
light)andtheperiodofthesignal.However, sinceperiodandfrequency arerelatedto
eachother,ifwerepresent wavelength byA,propagation speedbyc(speedoflight),and
frequency by1,weget
. •propagation speedWavelength =propagatJon speedxperJod ;::;{\requencySECTION 3.2PERIODIC ANALOG SIGNALS 6S
Thepropagation speedofelectromagnetic signalsdependsonthemediumandon
thefrequency ofthesignal.Forexample, inavacuum, lightispropagated withaspeed
of3 x108mls.Thatspeedislowerinairandevenlowerincable.
Thewavelength isnormally measured inmicrometers (microns) insteadofmeters.
Forexample, thewavelength ofredlight(frequency=4 x1014)inairis
8c3xlO -6A=- = =0.75x10m=0.75!J.m
f4x1014
Inacoaxialorfiber-optic cable,however, thewavelength isshorter(0.5!Jm)becausethe
propagation speedinthecableisdecreased.
TimeandFrequency Domains
Asinewaveiscomprehensively definedbyitsamplitude, frequency, andphase.We
havebeenshowing asinewavebyusingwhatiscalledatime-domain plot.The
time-domain plotshowschanges insignalamplitude withrespecttotime(itisan
amplitude-versus-time plot).Phaseisnotexplicitly shownonatime-domain plot.
Toshowtherelationship between amplitude andfrequency, wecanusewhatis
calledafrequency-domain plot.Afrequency-domain plotisconcerned withonlythe
peakvalueandthefrequency. Changes ofamplitude duringoneperiodarenotshown.
Figure3.7showsasignalinboththetimeandfrequency domains.
Figure3.7Thetime-domain andfrequency-domain plotsofasinewave
Amplitude
Frequency: 6Hz
Peakvalue:5V5----------
Time
(s)
a.Asinewaveinthetimedomain(peakvalue:5V,frequency: 6Hz)
Amplitude
rPeakvalue:5 V
5--;-1-1--;--1--1'--+-1 -----111--+1-----111--+1-+-1-+1-+-1 ~.
1 2 3 4 5 6 7 8 9 1011121314 Frequency
(Hz)
b.Thesamesinewaveinthefrequency domain(peakvalue:5V,frequency: 6Hz)66CHAPTER 3DATAANDSIGNALS
Itisobviousthatthefrequency domainiseasytoplotandconveystheinformation
thatonecanfindinatimedomainplot.Theadvantage ofthefrequency domainisthat
wecanimmediately seethevaluesofthefrequency andpeakamplitude. Acomplete
sinewaveisrepresented byonespike.Thepositionofthespikeshowsthefrequency;
itsheightshowsthepeakamplitude.
Acomplete sinewaveinthetimedomaincanberepresented
byonesinglespikeinthefrequency domain.
Example 3.7
Thefrequency domainismorecompactandusefulwhenwearedealingwithmorethanonesine
wave.Forexample, Figure3.8showsthreesinewaves,eachwithdifferentamplitude andfre­
quency.Allcanberepresented bythreespikesinthefrequency domain.
Figure3.8Thetimedomainandfrequency domainofthreesinewaves
Amplitude
15-
10-I5-
o 8 16Frequency
a.Time-domain representation ofthreesinewaveswith
frequencies 0,8,and16b.Frequency-domain representation of
thesamethreesignals
---------------------------------------
Composite Signals
Sofar,wehavefocusedonsimplesinewaves.Simplesinewaveshavemanyapplica­
tionsindailylife.Wecansendasinglesinewavetocarryelectricenergyfromone
placetoanother.Forexample, thepowercompany sendsasinglesinewavewithafre­
quencyof60Hztodistribute electricenergytohousesandbusinesses. Asanother
example, wecanuseasinglesinewavetosendanalarmtoasecuritycenterwhena
burglaropensadoororwindowinthehouse.Inthefirstcase,thesinewaveiscarrying
energy;inthesecond,thesinewaveisasignalofdanger.
Ifwehadonlyonesinglesinewavetoconveyaconversation overthephone,it
wouldmakenosenseandcarrynoinformation. Wewouldjusthearabuzz.Aswewill
seeinChapters 4and5,weneedtosendacomposite signaltocommunicate data.A
composite signalismadeofmanysimplesinewaves.
Asingleafrequency sinewaveisnotusefulindatacommunications;
weneedtosendacomposite signal,asignalmadeofmanysimplesinewaves.SECTION 3.2PERIODIC ANALOG SIGNALS 67
Intheearly1900s,theFrenchmathematician Jean-Baptiste Fouriershowedthat
anycomposite signalisactuallyacombination ofsimplesinewaveswithdifferent fre­
quencies, amplitudes, andphases.Fourieranalysisisdiscussed inAppendix C;forour
purposes, wejustpresenttheconcept.
According toFourieranalysis, anycomposite signalisacombination of
simplesinewaveswithdifferent frequencies, amplitudes, andphases.
Fourieranalysis isdiscussed inAppendix C.
Acomposite signalcanbeperiodicornonperiodic. Aperiodiccomposite signal
canbedecomposed intoaseriesofsimplesinewaveswithdiscretefrequencies­
frequencies thathaveintegervalues(1,2,3,andsoon).Anonperiodic composite sig­
nalcanbedecomposed intoacombination ofaninfinitenumberofsimplesinewaves
withcontinuous frequencies, frequencies thathaverealvalues.
Ifthecomposite signalisperiodic, thedecomposition givesaseriesofsignalswith
discretefrequencies; ifthecomposite signalisnonperiodic, thedecomposition
givesacombination ofsinewaveswithcontinuous frequencies.
Example 3.8
Figure3.9showsaperiodiccomposite signalwithfrequencyfThistypeofsignalisnottypical
ofthosefoundindatacommunications.We canconsider ittobethreealarmsystems, eachwitha
different frequency. Theanalysisofthissignalcangiveusagoodunderstanding ofhowto
decompose signals.
Figure3.9Acomposite periodic signal
...
Time
Itisverydifficulttomanually decompose thissignalintoaseriesofsimplesinewaves.
However, therearetools,bothhardware andsoftware, thatcanhelpusdothejob.Wearenotcon­
cernedabouthowitisdone;weareonlyinterested intheresult.Figure3.10showstheresultof
decomposing theabovesignalinboththetimeandfrequency domains.
Theamplitude ofthesinewavewithfrequencyfisalmostthesameasthepeakamplitude of
thecomposite signal.Theamplitude ofthesinewavewithfrequency 3fisone-third ofthatofthe
first,andtheamplitude ofthesinewavewithfrequency 9fisone-ninth ofthefirst.Thefrequency68CHAPTER 3DATAANDSIGNALS
Figure3.10Decomposition ofacomposite periodic signalinthetimeandfrequency domains
Amplitude
a.Time-domain decomposition ofacomposite signal-Frequency1
-Frequency 31
-Frequency 91
Time
Amplitude
WL...-----'3~L...-------9L-'!---------T~i~e
b.Frequency-domain decomposition ofthecomposite signal
ofthesinewavewithfrequencyfisthesameasthefrequency ofthecomposite signal;itiscalled
thefundamental frequency, orfirstharmonic. Thesinewavewithfrequency 3fhasafrequency
of3timesthefundamental frequency; itiscalledthethirdharmonic. Thethirdsinewavewithfre­
quency9fhasafrequency of9timesthefundamental frequency; itiscalledtheninthharmonic.
Notethatthefrequency decomposition ofthesignalisdiscrete; ithasfrequenciesf, 3f,and
9fBecause fisanintegralnumber,3fand9farealsointegralnumbers. Therearenofrequencies
suchas1.2for2.6fThefrequency domainofaperiodiccomposite signalisalwaysmadeofdis­
cretespikes.
Example 3.9
Figure3.11showsanonperiodic composite signal.Itcanbethesignalcreatedbyamicrophone ora
telephone setwhenawordortwoispronounced. Inthiscase,thecomposite signalcannotbeperi­
odic,becausethatimpliesthatwearerepeating thesamewordorwordswithexactlythesametone.
Figure3.11Thetimeandfrequency domainsofanonperiodic signal
Amplitude Amplitude
Amplitude forsine
waveoffrequency1
IAIA
a.Timedomain,
vTime 1
b.Frequency domain4kHzFrequencySECTION 3.2PERIODIC ANALOG SIGNALS 69
Inatime-domain representation ofthiscomposite signal,thereareaninfinitenum­
berofsimplesinefrequencies. Although thenumberoffrequencies inahumanvoiceis
infinite,therangeislimited.Anormalhumanbeingcancreateacontinuous rangeof
frequencies between 0and4kHz.
Notethatthefrequency decomposition ofthesignalyieldsacontinuous curve.
Thereareaninfinitenumberoffrequencies between 0.0and4000.0(realvalues).Tofind
theamplitude relatedtofrequency J,wedrawaverticallineatftointersect theenvelope
curve.Theheightoftheverticallineistheamplitude ofthecorresponding frequency.
Bandwidth
Therangeoffrequencies contained inacomposite signalisitsbandwidth. Theband­
widthisnormally adifference between twonumbers. Forexample, ifacomposite signal
contains frequencies between 1000and5000,itsbandwidth is5000-1000,or4000.
Thebandwidth ofacomposite signalisthedifference betweenthe
highestandthelowestfrequencies contained inthatsignal.
Figure3.12showstheconceptofbandwidth. Thefiguredepictstwocomposite
signals,oneperiodic andtheothernonperiodic. Thebandwidth oftheperiodic signal
containsallintegerfrequencies between 1000and5000(1000,100I,1002,...).Theband­
widthofthenonperiodic signalshasthesamerange,butthefrequencies arecontinuous.
Figure3.12Thebandwidth ofperiodicandnonperiodic composite signals
Amplitude
1000
I·Bandwidth =5000-1000=4000Hz5000Frequency
·1
a.Bandwidth ofaperiodic signal
Amplitude
1000
I·Bandwidth=5000-1000=4000Hz5000Frequency
·1
b.Bandwidth ofanonperiodic signal70CHAPTER 3DATAANDSIGNALS
Example 3.10
Ifaperiodic signal isdecomposed intofivesinewaveswithfrequencies of100,300,500,700,
and900Hz,whatisitsbandwidth? Drawthespectrum, assuming allcomponents haveamaxi­
mumamplitude of10V.
Solution
Letfhbethehighestfrequency,flthelowestfrequency, andBthebandwidth. Then
B=fh-it=900-100=800Hz
Thespectrum hasonlyfivespikes,at100,300,500,700,and900Hz(seeFigure3.13).
Figure3.13Thebandwidthfor Example 3.10
Amplitude
10+-----]
Bandwidth=900-100=800Hz100
I,300 500 700 900
-IFrequency
Example 3.11
Aperiodic signal hasabandwidth of20Hz.Thehighestfrequency is60Hz.Whatisthelowest
frequency? Drawthespectrum ifthesignalcontains allfrequencies ofthesameamplitude.
Solution
Letfhbethehighestfrequency,fz thelowestfrequency, andBthebandwidth. Then
B=fh-fz:::::}20=60-it=}.ft=60-20=40Hz
Thespectrum containsallintegerfrequencies. Weshowthisbyaseriesofspikes(seeFigure3.14).
Figure3.14Thebandwidth forExample 3.11
III
404142
I,Bandwidth =60-40=20Hz585960
·1Frequency
(Hz)
Example 3.12
Anonperiodic composite signalhasabandwidth of200kHz,withamiddlefrequency of
140kHzandpeakamplitude of20V.Thetwoextremefrequencies haveanamplitude of0.Draw
thefrequency domainofthesignal.SECT/ON 3.3DIGITAL SIGNALS 71
Solution
Thelowestfrequency mustbeat40kHzandthehighestat240kHz.Figure3.15showsthefre­
quencydomainandthebandwidth.
Figure3.15Thebandwidth forExample 3.12
Amplitude
40kHz 140kHz 240kHz Frequency
Example 3.J3
Anexampleofanonperiodic composite signalisthesignalpropagated byanAMradiostation,In
theUnitedStates,eachAMradiostationisassignedalO-kHzbandwidth. Thetotalbandwidth ded­
icatedtoAMradiorangesfrom530to1700kHz.Wewillshowtherationale behindthislO-kHz
bandwidth inChapter5.
Example 3.J4
Anotherexampleofanonperiodic composite signalisthesignalpropagated byanFMradiosta­
tion.IntheUnitedStates,eachFMradiostationisassigned a200-kHz bandwidth. Thetotal
bandwidth dedicated toFMradiorangesfrom88to108MHz.Wewillshowtherationale behind
this200-kHz bandwidth inChapter5.
Example 3./5
Anotherexampleofanonperiodic composite signalisthesignalreceived byanold-fashioned
analogblack-and-white TV.ATVscreenismadeupofpixels(pictureelements) witheachpixel
beingeitherwhiteorblack.Thescreenisscanned30timespersecond.(Scanning isactually
60timespersecond,butoddlinesarescannedinoneroundandevenlinesinthenextandthen
interleaved.) Ifweassumearesolution of525x700(525verticallinesand700horizontal lines),
whichisaratioof3:4,wehave367,500pixelsperscreen.Ifwescanthescreen30timespersec­
ond,thisis367,500x30=11,025,000 pixelspersecond.Theworst-case scenarioisalternating
blackandwhitepixels.Inthiscase,weneedtorepresent onecolorbytheminimum amplitude
andtheothercolorbythemaximum amplitude. Wecansend2pixelspercycle.Therefore, we
need11,025,000/2 =5,512,500 cyclespersecond,orHz.Thebandwidth neededis5.5124MHz.
Thisworst-case scenariohassuchalowprobability ofoccurrence thattheassumption isthatwe
needonly70percentofthisbandwidth, whichis3.85MHz.Sinceaudioandsynchronization sig­
nalsarealsoneeded,a4-MHzbandwidth hasbeensetasideforeachblackandwhiteTVchan­
nel.AnanalogcolorTVchannelhasa6-MHzbandwidth.
3.3DIGITAL SIGNALS
Inadditiontobeingrepresented byananalogsignal,information canalsoberepre­
sentedbyadigitalsignal.Forexample, a Icanbeencodedasapositivevoltageanda0
aszerovoltage.Adigitalsignalcanhavemorethantwolevels.Inthiscase,wecan72CHAPTER 3DATAANDSIGNALS
sendmorethan1bitforeachlevel.Figure3.16showstwosignals,onewithtwolevels
andtheotherwithfour.
Figure3.16Twodigitalsignals:onewithtwosignallevelsandtheotherwithfoursignallevels
Amplitude 8bitssentinIs,
Levell
LevellBitrate=8bps
1I0I1III0I0I0I1I
I I I I I I I I
I I
I I I
I I I
I I I
I I I...
I I I I I I IIsI I I I I I I Tim
I I I I I I Ie
a.Adigitalsignalwithtwolevels
e6b""1 IItssentIIIs,
Bitrate=16bps
III10I01[01I00 00[00I10I
I I I I I I I
el4,I I I I I III I I I I I
I I I I I Iel3 [ I II...I I I [
I I I IIsI I I I Timell III
I I [ [
ellI I [ I
I I I
[ I I I I ILevAmplitude
LevLevLev
b.Adigitalsignalwithfourlevels
Wesend1bitperlevelinpartaofthefigureand2bitsperlevelinpartbofthe
figure.Ingeneral,ifasignalhasLlevels,eachlevelneedslog2Lbits.
Appendix Creviewsinformation aboutexponential andlogarithmic functions.
Example 3.16
Adigitalsignalhaseightlevels.Howmanybitsareneededperlevel?Wecalculate thenumber
ofbitsfromtheformula
Numberofbitsperlevel=log28=3
Eachsignallevelisrepresented by3bits.
Example 3.17
Adigitalsignalhasninelevels.Howmanybitsareneededperlevel?Wecalculate thenumberof
bitsbyusingtheformula. Eachsignal level isrepresented by3.17bits.However, thisansweris
notrealistic. Thenumberofbitssentperlevelneedstobeanintegeraswellasapowerof2.For
thisexample, 4bitscanrepresent onelevel.SECTION 3.3DIGITAL SIGNALS 73
BitRate
Mostdigitalsignalsarenonperiodic, andthusperiodandfrequency arenotappropri­
atecharacteristics. Anotherterm-bit rate(insteadofjrequency)-is usedtodescribe
digitalsignals.ThebitrateisthenumberofbitssentinIs,expressed inbitsper
second(bps).Figure3.16showsthebitratefortwosignals.
Example 3.18
Assumeweneedtodownload textdocuments attherateof100pagesperminute.Whatisthe
requiredbitrateofthechannel?
Solution
Apageisanaverageof24lineswith80characters ineachline.Ifweassumethatonecharacter
requires8bits,thebitrateis
100x24x80x8=1,636,000 bps=1.636Mbps
Example 3.19
Adigitized voicechannel, aswewillseeinChapter4,ismadebydigitizing a4-kHzbandwidth
analogvoicesignal.Weneedtosamplethesignalattwicethehighestfrequency (twosamples
perhertz).Weassumethateachsamplerequires8bits.Whatistherequiredbitrate?
Solution
Thebitratecanbecalculated as
2x4000x8=64,000bps=64kbps
Example 3.20
Whatisthebitrateforhigh-definition TV(HDTV)?
Solution
HDTVusesdigitalsignalstobroadcast highqualityvideosignals.TheHDTVScreenisnormally
aratioof16:9(incontrastto4:3forregularTV),whichmeansthescreeniswider.Thereare
1920by1080pixelsperscreen,andthescreenisrenewed 30timespersecond.Twenty-four bits
represents onecolorpixel.Wecancalculate thebitrateas
1920x1080x30x24=1,492,992,000 or1.5Gbps
TheTVstationsreducethisrateto20to40Mbpsthroughcompression.
BitLength
Wediscussed theconceptofthewavelength forananalogsignal:thedistanceonecycle
occupies onthetransmission medium. Wecandefinesomething similarforadigital
signal:thebitlength.Thebitlengthisthedistanceonebitoccupies onthetransmis­
sionmedium.
Bitlength=propagation speedxbitduration74CHAPTER 3DATAANDSIGNALS
DigitalSignalasaComposite AnalogSignal
BasedonFourieranalysis, adigitalsignalisacomposite analogsignal.Thebandwidth
isinfinite,asyoumayhaveguessed. Wecanintuitively corneupwiththisconceptwhen
weconsider adigitalsignal.Adigitalsignal,inthetimedomain, comprises connected
verticalandhorizontal linesegments. Averticallineinthetimedomainmeansafre­
quencyofinfinity(suddenchangeintime);ahorizontal lineinthetimedomainmeansa
frequency ofzero(nochangeintime).Goingfromafrequency ofzerotoafrequency of
infinity(andviceversa)impliesallfrequencies inbetween arepartofthedomain.
Fourieranalysis canbeusedtodecompose adigitalsignal.Ifthedigitalsignalis
periodic, whichisrareindatacommunications, thedecomposed signalhasafrequency­
domainrepresentation withaninfinitebandwidth anddiscretefrequencies. Ifthedigital
signalisnonperiodic, the decomposed signalstillhasaninfinitebandwidth, butthefre­
quencies arecontinuous. Figure3.17showsaperiodic andanonperiodic digitalsignal
andtheirbandwidths.
Figure3.17Thetimeandfrequency domainsofperiodic andnonperiodic digitalsignals
----------------
-.---.---
Lu...IIII.....
Time/3/5f7f9fIlfI3f Frequency
'--- '--- '---
a.Timeandfrequency domains ofperIodicdigitalsignal
o
b~)
Time
~~~-----=------+-.
Frequency
b.Timeandfrequency domains ofnonperiodicdigitalsignal
Notethatbothbandwidths areinfinite,buttheperiodic signalhasdiscretefrequen­
cieswhilethenonperiodic signalhascontinuous frequencies.
Transmission ofDigitalSignals
Theprevious discussion assertsthatadigitalsignal,periodic ornonperiodic, isacom­
positeanalogsignalwithfrequencies between zeroandinfinity.Fortheremainder of
thediscussion, letusconsider thecaseofanonperiodic digitalsignal,similartothe
onesweencounter indatacommunications. Thefundamental question is,Howcanwe
sendadigitalsignalfrompointAtopointB?Wecantransmit adigitalsignalbyusing
oneoftwodifferent approaches: baseband transmission orbroadband transmission
(usingmodulation).SECTION 3.3DIGITAL SIGNALS 75
Baseband Transmission
Baseband transmission meanssendingadigitalsignaloverachannelwithoutchanging
thedigitalsignaltoananalogsignal.Figure3.18showsbaseband transmission.
Figure3.18Baseband transmission
-----D •
Digitalsignal
&i;;~;;;;_;;;~a
Channel
Adigitalsignalisacomposite analogsignalwithaninfinitebandwidth.
Baseband transmission requiresthatwehavealow-pass channel, achannelwitha
bandwidth thatstartsfromzero.Thisisthecaseifwehaveadedicated mediumwitha
bandwidth constituting onlyonechannel.Forexample, theentirebandwidth ofacable
connecting twocomputers isonesinglechannel.Asanotherexample, wemayconnect
severalcomputers toabus,butnotallowmorethantwostationstocommunicate ata
time.Againwehavealow-pass channel,andwecanuseitforbaseband communication.
Figure3.19showstwolow-pass channels: onewithanarrowbandwidth andtheother
withawidebandwidth. Weneedtoremember thatalow-pass channelwithinfiniteband­
widthisideal,butwecannothavesuchachannelinreallife.However, wecangetclose.
Figure3.19Bandwidths oftwolow-pass channels
o
a.Low-pass channel, widebandwidth
o
b.Low-pass channel, narrowbandwidth
Letusstudytwocasesofabaseband communication: alow-pass channelwitha
widebandwidth andonewithalimitedbandwidth.76CHAPTER 3DATAANDSIGNALS
Case1:Low-Pass Channel withWideBandwidth
Ifwewanttopreservetheexactformofanonperiodic digitalsignalwithverticalseg­
mentsverticalandhorizontal segments horizontal, weneedtosendtheentirespectrum,
thecontinuous rangeoffrequencies between zeroandinfinity.Thisispossibleifwe
haveadedicated mediumwithaninfinitebandwidth betweenthesenderandreceiver
thatpreserves theexactamplitude ofeachcomponent ofthecomposite signal.
Although thismaybepossibleinsideacomputer (e.g.,betweenCPUandmemory), it
isnotpossiblebetweentwodevices.Fortunately, theamplitudes ofthefrequencies at
theborderofthebandwidth aresosmallthattheycanbeignored.Thismeansthatifwe
haveamedium, suchasacoaxialcableorfiberoptic,withaverywidebandwidth, two
stationscancommunicate byusingdigitalsignalswithverygoodaccuracy, asshownin
Figure3.20.Notethat!iisclosetozero,andhisveryhigh.
Figure3.20Baseband transmission usingadedicated medium
Inputsignalbandwidth
,<::;S>:,:,,...-,:.">~
o
InputsignalBandwidth supported bymediumJw_,,",L
~.~:~''",,"...'-.;:.~ "
Wide-bandwidth channelOutputsignalbandwidth
_C c:~::.:.~.•.•..c<l
II h
Outputsignal
Although theoutputsignalisnotanexactreplicaoftheoriginalsignal,thedata
canstillbededucedfromthereceivedsignal.Notethatalthough someofthefrequen­
ciesareblockedbythemedium, theyarenotcritical.
Baseband transmission ofadigitalsignalthatpreserves theshapeofthedigitalsignalis
possibleonlyifwehavealow-pass channelwithaninfiniteorverywidebandwidth.
Example 3.21
Anexampleofadedicated channelwheretheentirebandwidth ofthemediumisusedasonesingle
channelisaLAN.AlmosteverywiredLANtodayusesadedicated channelfortwostationscom­
municating witheachother.Inabustopology LANwithmultipoint connections, onlytwostations
cancommunicate witheachotherateachmomentintime(timesharing); theotherstationsneedto
refrainfromsendingdata.Inastartopology LAN,theentirechannelbetweeneachstationandthe
hubisusedforcommunication betweenthesetwoentities.WestudyLANsinChapter14.
Case2:Low-Pass Channel withLimitedBandwidth
Inalow-pass channelwithlimitedbandwidth, weapproximate thedigitalsignalwith
ananalogsignal.Thelevelofapproximation dependsonthebandwidth available.
RoughApproximation LetusassumethatwehaveadigitalsignalofbitrateN.Ifwe
wanttosendanalogsignalstoroughlysimulatethissignal,weneedtoconsidertheworst
case,amaximum numberofchangesinthedigitalsignal.ThishappenswhenthesignalSECTION 3.3DIGITAL SIGNALS 77
carriesthesequence 01010101...orthesequence 10101010· ...Tosimulatethesetwo
cases,weneedananalogsignaloffrequencyf=N12.Let1bethepositivepeakvalueand
obethenegativepeakvalue.Wesend2bitsineachcycle;thefrequency oftheanalog
signalisone-halfofthebitrate,orN12.However, justthisonefrequency cannotmakeall
patterns; weneedmorecomponents. Themaximum frequency isNI2.Asanexample of
thisconcept,letusseehowadigital signal witha3-bitpatterncanbesimulated byusing
analogsignals.Figure3.21showstheidea.Thetwosimilarcases(000and111)aresimu­
latedwithasignalwithfrequencyf=0andaphaseof180°for000andaphaseof0°for
111.Thetwoworstcases(010and101)aresimulated withananalogsignalwithfre­
quencyf=NI2andphasesof180°and0°.Theotherfourcasescanonlybesimulated with
ananalogsignalwithf=NI4andphasesof180°,270°,90°,and0°.Inotherwords,we
needachannelthatcanhandlefrequencies 0,N14,andNI2.Thisroughapproximation is
referredtoasusingthefirstharmonic (NI2)frequency. Therequiredbandwidth is
Bandwidth =lJ.-0=lJ.2 2
Figure3.21Roughapproximation ofadigitalsignalusingthefirstharmonic forworstcase
Amplitude
Bandwidth ==~
o N/4 N/2Frequency
Digital:bitrateN
1°10I01
I1I1
I1I1
I1!! , ,
1 1 I1
1II1
iiiI
II.,, ,, ,
Analog:f =0,p=180
Digital:bitrateN
1IIo101
-A=±i:• ~1
1III~1~,.,,
Analog:f=N/4, p=90Digital:bitrateN
I01o~ I 1::,, , ,
II I I
I In~l I, ,,.
Analog:f==N/4,p= 180
Digital:bitrateN
I1Io11I
-R=R-
AA
IM I,,.,
Analog:j== N/2,P=0Digital:bitrateN
~I I-I--
I 1
J I I I
1{"'\j:1MM, , , ,
Analog:j==N/2, p==180
Digital:bitrateN
11I1
I°I:,8-I
1I, ,
I I jI~II:~N
J,J,
Analog:f=N/4,p== 0Digital:bitrateN
*I I, ,,
I~I I I I
~~~,,, ,
Analog:j==N/4, p==270
Digital: bit rateN
I11III1
iiIi
I I I I
I1I1, , , ,
I!1,
III I
IIiI
I1II,, , ,
Analog:j==0,p=0
BetterApproximation Tomaketheshapeoftheanalogsignallookmorelikethat
ofadigitalsignal,weneedtoaddmoreharmonics ofthefrequencies. Weneedto
increasethebandwidth. Wecanincreasethebandwidth to3N12,5N12,7NI2,andsoon.
Figure3.22showstheeffectofthisincreaseforoneoftheworstcases,thepattern010.78CHAPTER 3DATAANDSIGNALS
Figure3.22Simulating adigitalsignalwiththreefirstharmonics
I1..
5N/4 5N12 Frequency oN/4NI2
W_I I'---~
3N/4 3N12Amplitude 5NBandwidth =T
Digital:bitrateN Analog:/= NI2and3N12
0 1I0I I I
I I
I I
I I
I I
I I
I I
I
I I I
Iv=s.\2:V
II
cf':.U~U__
I
I
ft.~~-
1
Analog:! =N/2 Analog:!= N12,3N12,and5NI2
Notethatwehaveshownonlythehighestfrequency foreachhannonic. Weusethefirst,
third,andfifthhannonics. Therequiredbandwidth isnow5NJ2,thedifference betweenthe
lowestfrequency 0andthehighestfrequency 5NJ2.Asweemphasized before,weneed
toremember thattherequired bandwidth isproportional tothebitrate.
Inbaseband transmission, therequired bandwidth isproportional tothebitrate;
ifweneedtosendbitsfaster,weneedmorebandwidth.
Byusingthismethod,Table3.2showshowmuchbandwidth weneedtosenddata
atdifferent rates.
Table3.2Bandwidth requirements
Bit Harmonic Harmonics Harmonics
Rate 1 1,3 1,3,5
n=1kbps B=500Hz B=1.5kHz B=2.5kHz
n=10kbps B=5kHz B=15kHz B=25kHz
n=100kbps B=50kHz B=150kHz B=250kHz
Example 3.22
Whatistherequired bandwidth ofalow-pass channelifweneedtosend1Mbpsbyusingbase­
bandtransmission?Bandpass channelSECTION 3.3DIGITAL SIGNALS 79
Solution
Theanswerdependsontheaccuracy desired.
a.Theminimum bandwidth, aroughapproximation, isB=:bitrate/2,or500kHz.Weneed
alow-pass channelwithfrequencies between0and500kHz.
b.Abetterresultcanbeachieved byusingthefirstandthethirdharmonics withtherequired
bandwidth B=:3x500kHz=:1.5MHz.
c.Stillabetterresultcanbeachieved byusingthe first, third,andfifthharmonics with
B=:5 x500kHz =02.5MHz.
Example 3.23
Wehavealow-pass channelwithbandwidth 100kHz.Whatisthemaximum bitrateofthis
channel?
Solution
Themaximum bitratecanbeachieved ifweusethefirstharmonic. Thebitrateis2timesthe
available bandwidth, or200kbps.
Broadband Transmission (UsingModulation)
Broadband transmission ormodulation meanschanging thedigitalsignaltoananalog
signalfortransmission. Modulation allowsustouseabandpass channel-a channelwith
abandwidth thatdoesnotstartfromzero.Thistypeofchannelismoreavailable thana
low-pass channel.Figure3.23showsabandpass channel.
Figure3.23Bandwidth ofabandpass channel
Amplitude
1_~~.
Frequency
Notethatalow-pass channelcanbeconsidered abandpass channelwiththelower
frequency startingatzero.
Figure3.24showsthemodulation ofadigitalsignal.Inthefigure,adigitalsignalis
converted toacomposite analogsignal.Wehaveusedasingle-frequency analogsignal
(calledacarrier);theamplitude ofthecarrierhasbeenchanged tolooklikethedigital
signal.Theresult,however, isnotasingle-frequency signal;itisacomposite signal,as
wewillseeinChapter5.Atthereceiver,thereceivedanalogsignalisconverted todigital,
andtheresultisareplicaofwhathasbeensent.
Iftheavailable channelisabandpass channel~ wecannotsendthedigitalsignaldirectlyto
thechannel; weneedtoconvertthedigitalsignaltoananalogsignalbeforetransmission.80CHAPTER 3DATAANDSIGNALS
Figure3.24Modulation ofadigitalsignalfortransmission onabandpass channel
0 _D'-- ~.
Inputdigitalsignal Outputdigitalsignal
Inputanalogsignalbandwidth
L"Outputanalogsignalbandwidth
/ -,>:~,;:>~Analog/digital
converter t--~'>'''''''--
Available bandwidthDigitaUanalog
converter
--IBandpass channel
Inputanalogsignal Inputanalogsignal
Example 3.24
Anexampleofbroadband transmission usingmodulation isthesendingofcomputer datathrough
atelephone subscriber line,thelineconnecting aresidenttothecentraltelephone office.These
lines,installed manyyearsago,aredesigned tocarryvoice(analogsignal)withalimitedband­
width(frequencies between0and4kHz).Although thischannelcanbeusedasalow-pass chan­
nel,itisnormally considered abandpass channel. Onereasonisthatthebandwidth issonarrow
(4kHz)thatifwetreatthechannelaslow-pass anduseitforbaseband transmission, themaximum
bitratecanbeonly8kbps.Thesolutionistoconsiderthechannelabandpass channel,convertthe
digitalsignalfromthecomputer toananalogsignal,andsendtheanalogsignal.Wecaninstalltwo
converters tochangethedigitalsignaltoanalogandviceversaatthereceiving end.Theconverter,
inthiscase,iscalledamodem(modulator/demodulator), whichwediscussindetailinChapter5.
Example 3.25
Asecondexample isthedigitalcellulartelephone. Forbetterreception, digitalcellularphones
converttheanalogvoicesignaltoadigitalsignal(seeChapter16).Although thebandwidth allo­
catedtoacompany providing digitalcellularphoneserviceisverywide,westillcannotsendthe
digitalsignalwithoutconversion. Thereasonisthatweonlyhaveabandpass channelavailable
betweencallerandcallee.Forexample, iftheavailable bandwidth isWandweallowlOOOcou­
plestotalksimultaneously, thismeanstheavailable channelisWIlOOO, justpartoftheentire
bandwidth. Weneedtoconvertthedigitized voicetoacomposite analogsignalbeforesending.
Thedigitalcellularphonesconverttheanalogaudiosignaltodigitaland then convertitagainto
analogfortransmission overabandpass channel.
3.4TRANSMISSION IMPAIRMENT
Signalstravelthroughtransmission media,whicharenotpetfect.Theimpetfection causes
signalimpairment. Thismeansthatthesignalatthebeginning ofthemedium isnotthe
sameasthesignalattheendofthemedium. Whatissentisnotwhatisreceived. Three
causesofimpairment areattenuation, distortion, andnoise(seeFigure3.25).SECTION 3.4TRANSMISSION IMPAIRMENT 81
Figure3.25Causesofimpairment
Attenuation
Attenuation meansalossofenergy.Whenasignal,simpleorcomposite, travels
throughamedium, itlosessomeofitsenergyinovercoming theresistance ofthe
medium. Thatiswhyawirecarrying electricsignalsgetswarm,ifnothot,aftera
while.Someoftheelectrical energyinthesignalisconverted toheat.Tocompensate
forthisloss,amplifiers areusedtoamplifythesignal.Figure3.26showstheeffectof
attenuation andamplification.
Figure3.26Attenuation
Original Attenuated Amplified
-Affi
Point1Transmission mediumPoint2 Point3
Decibel
Toshowthatasignalhaslostorgainedstrength, engineers usetheunitofthedecibel.
Thedecibel(dB)measures therelativestrengths oftwosignalsoronesignalattwodif­
ferentpoints.Notethatthedecibelisnegativeifasignalisattenuated andpositiveifa
signalisamplified.
Variables PIandP2arethepowersofasignalatpoints1and2,respectively. Notethat
someengineering booksdefinethedecibelintermsofvoltageinsteadofpower.Inthis
case,becausepowerisproportional tothesquareofthevoltage,theformulaisdB=
20log10(V2IV1).Inthistext,weexpressdBintermsofpower.82CHAPTER 3DATAANDSIGNALS
Example 3.26
Suppose asignaltravelsthroughatransmission medium anditspowerisreducedtoone-half.
ThismeansthatP2=~PI'Inthiscase,theattenuation (lossofpower)canbecalculated as
Pz 0.5PI1010glO- =1010gl0--=10Ioglo0.5=10(-0.3)=-3dB
PI PI
A lossof3dB(-3dB)isequivalent tolosingone-halfthepower.
Example 3.27
Asignaltravelsthroughanamplifier, anditspowerisincreased 10times.ThismeansthatPz=
1OPI'Inthiscase,theamplification (gainofpower)canbecalculated as
Example 3.28
Onereasonthatengineers usethedecibeltomeasurethechangesinthestrengthofasignalisthat
decibelnumbers canbeadded(orsubtracted) whenwearemeasuring severalpoints(cascading)
insteadofjusttwo.InFigure3.27asignaltravelsfrompoint1topoint4.Thesignalisattenuated
bythetimeitreachespoint2.Between points2and3,thesignalisamplified. Again,between
points3and4,thesignalisattenuated. Wecanfindtheresultant decibelvalueforthesignaljust
byaddingthedecibelmeasurements betweeneachsetofpoints.
Figure3.27DecibelsforExample 3.28
IdB
:17dB'I'-3dB
Point3Transmission Point4
mediumPoint2 Transmission
mediumPoint11_:_---'--'-=-.3dB__ •
1•----'----
Inthiscase,thedecibelvaluecanbecalculated as
dB=-3+7-3=+1
Thesignalhasgainedinpower.
Example 3.29
Sometimes thedecibelisusedtomeasuresignalpowerinmilliwatts. Inthiscase, itisreferredto
asdBmandiscalculated asdBm=10loglOPm'wherePmisthepowerinmilliwatts. Calculate
thepowerofasignalifitsdBm=-30.SECTION 3.4TRANSMISSION IMPAIRMENT 83
Solution
Wecancalculate thepowerinthesignalas
dBm=10log10Pm=-30
loglOPm:=-3Pm=10-3rnW
Example 3.30
Thelossinacableisusuallydefinedindecibels perkilometer (dB/km).Ifthesignalatthe
beginning ofacablewith-0.3dBlkmhasapowerof2mW,whatisthepowerofthesignal
at5km?
Solution
Thelossinthecableindecibelsis5x(-0.3):::-1.5dB.Wecancalculate thepoweras
Distortion
Distortion meansthatthesignalchangesitsformorshape.Distortion canoccurina
composite signalmadeofdifferent frequencies. Eachsignalcomponent hasitsown
propagation speed(seethenextsection)throughamedium and,therefore, itsown
delayinarrivingatthefinaldestination. Differences indelaymaycreateadifference in
phaseifthedelayisnotexactlythesameastheperiodduration. Inotherwords,signal
components atthereceiverhavephasesdifferent fromwhattheyhadatthesender.The
shapeofthecomposite signalistherefore notthesame.Figure3.28showstheeffectof
distortion onacomposite signal.
Figure3.28Distortion
Composite signal
sent
AtthesenderComponents,
inphaseComposite signal
received
Components,
outofphase
Atthereceiver84CHAPTER 3DATAANDSIGNALS
Noise
Noiseisanothercauseofimpairment. Severaltypesofnoise,suchasthermalnoise,
induced noise,crosstalk, andimpulse noise,maycorruptthesignal.Thermal noiseis
therandommotionofelectrons inawirewhich creates anextrasignalnotoriginally
sentbythetransmitter. Induced noisecomes from sourcessuchasmotorsandappli­
ances.Thesedevicesactasasendingantenna, andthetransmission medium actsasthe
receiving antenna. Crosstalk istheeffectofonewireontheother.Onewireactsasa
sendingantennaandtheotherasthereceiving antenna. Impulse noiseisaspike(asig­
nalwithhighenergyinaveryshorttime)thatcomes from powerlines,lightning, andso
on.Figure3.29showstheeffectofnoiseonasignal.WediscusserrorinChapter10.
Figure3.29Noise
Transmitted
I
II•Point1Noise
Transmission mediumI
I
I•Point2
Signal-to-Noise Ratio(SNR)
Aswewillseelater,tofindthetheoretical bitratelimit,weneedtoknowtheratioof
thesignalpowertothenoisepower.Thesignal-to-noise ratioisdefinedas
SNR=averagesignalpower
averagenoisepower
Weneedtoconsider theaveragesignalpowerandtheaveragenoisepowerbecause
thesemaychangewithtime.Figure3.30showstheideaofSNR.
SNRisactuallytheratioofwhatiswanted(signal)towhatisnotwanted(noise).
AhighSNRmeansthesignalislesscorrupted bynoise;alowSNRmeansthesignalis
morecorrupted bynoise.
Because SNRistheratiooftwopowers, itisoftendescribed indecibelunits,
SNRdB,definedas
SNRcm=lOlogloSNR
Example 3.31
Thepowerofasignalis10mWandthepowerofthenoiseis1/lW;whatarethevaluesofSNR
andSNRdB?SECTION 3.5DATARATELIMITS 85
Figure3.30TwocasesofSNR:ahighSNRandalowSNR
Signal
-
a.LargeSNR
b.SmallSNRNoise
Noise Signal+noise
Solution
ThevaluesofSNRandSN~Bcanbecalculated asfollows:
SNR=10.000flW=10000
ImW '
SNRdB=10loglO10,000=10loglO104=40
Example 3.32
ThevaluesofSNRandSNRdBforanoiseless channelare
SNR=signalpower=<>0o
SNRdB=10loglO 00=<>0
Wecanneverachievethisratioinreallife;itisanideal.
3.5DATARATELIMITS
Averyimportant consideration indatacommunications ishowfastwecansenddata,in
bitspersecond.overachannel.Dataratedependsonthreefactors:
1.Thebandwidth available
2.Thelevelofthesignalsweuse
3.Thequalityofthechannel(thelevelofnoise)
Twotheoretical formulas weredeveloped tocalculate thedatarate:onebyNyquistfor
anoiseless channel. anotherbyShannon foranoisychannel.86CHAPTER 3DATAANDSIGNALS
Noiseless Channel: NyquistBitRate
Foranoiseless channel, theNyquistbitrateformuladefinesthetheoretical maximum
bitrate
BitRate=2xbandwidth x10g2L
Inthisformula, bandwidth isthebandwidth ofthechannel, Lis thenumberofsignal
levelsusedtorepresent data,andBitRateisthebitrateinbitspersecond.
According totheformula, wemightthinkthat,givenaspecificbandwidth, wecan
haveanybitratewewantbyincreasing thenumberofsigna11eve1s. Although theidea
istheoretically correct,practically thereisalimit.Whenweincreasethenumberofsig­
nal1eve1s, weimposeaburdenonthereceiver.Ifthenumberoflevelsinasignalisjust2,
thereceivercaneasilydistinguish between a 0anda1.Ifthelevelofasignalis64,the
receivermustbeverysophisticated todistinguish between 64different levels.Inother
words,increasing thelevelsofasignalreducesthereliability ofthesystem.
Increasing thelevelsofasignalmayreducethereliability ofthesystem.
Example 3.33
DoestheNyquist theorem bitrateagreewiththeintuitive bitratedescribed inbaseband
transmission?
Solution
Theymatchwhenwehaveonlytwolevels.Wesaid,inbaseband transmission, thebitrateis2
timesthebandwidth ifweuseonlythefirstharmonic intheworstcase.However, theNyquist
formulaismoregeneralthanwhatwederivedintuitively; itcanbeappliedtobaseband transmis­
sionandmodulation. Also,itcanbeappliedwhenwehavetwoormorelevelsofsignals.
Example 3.34
Consider anoiseless channelwithabandwidth of3000Hztransmitting asignalwithtwosignal
levels.Themaximum bitratecanbecalculated as
BitRate=2 x3000xlog22=6000bps
Example 3.35
Consider thesamenoiseless channeltransmitting asignalwithfoursignallevels(foreachlevel,
wesend2bits).Themaximum bitratecanbecalculated as
BitRate=2 x3000Xlog24=12,000bps
Example 3.36
Weneedtosend265kbpsoveranoiseless channelwithabandwidth of20kHz.Howmanysig­
nallevels doweneed?SECTION 3.5DATARATELIMITS 87
Solution
WecanusetheNyquistformulaasshown:
265,000=2X20,000XlogzL
log2L=6.625 L=26.625=98.7levels
Sincethisresultisnotapowerof2,weneedtoeitherincrease thenumberoflevelsorreduce
thebitrate.Ifwehave128levels,thebitrateis280kbps.Ifwehave64levels,thebitrateis
240kbps.
NoisyChannel: Shannon Capacity
Inreality,wecannothaveanoiseless channel; thechannelisalwaysnoisy.In1944,
ClaudeShannon introduced aformula, calledtheShannon capacity, todetermine the
theoretical highestdatarateforanoisychannel:
Capacity=bandwidth Xlog2(1+SNR)
Inthisformula, bandwidth isthebandwidth ofthechannel, SNRisthesignal-to­
noiseratio,andcapacityisthecapacityofthechannelinbitspersecond.Notethatinthe
Shannon formulathereisnoindication ofthesignallevel,whichmeansthatnomatter
howmanylevelswehave,wecannotachieveadataratehigherthanthecapacityofthe
channel.Inotherwords,theformuladefinesacharacteristic ofthechannel,notthemethod
oftransmission.
Example 3.37
Consider anextremely noisychannelinwhichthevalueofthesignal-to-noise ratioisalmost
zero.Inotherwords,thenoiseissostrongthatthesignalisfaint.Forthischannelthecapacity C
iscalculated as
C=Blog2(1+SNR)=B10gz(l+0)=Blog21::;;:Bx0:;;;;0
Thismeansthatthecapacity ofthischanneliszeroregardless ofthebandwidth. Inother
words,wecannotreceiveanydatathroughthischannel.
Example 3.38
Wecancalculate thetheoretical highestbitrateofaregulartelephone line.Atelephone linenor­
mallyhasabandwidth of3000Hz(300to3300Hz)assigned fordatacommunications. Thesig­
nal-to-noise ratioisusually3162.Forthischannelthecapacity iscalculated as
C=Blog2(1+SNR)=3000log2(l+3162)=3000log23163
::::::3000x11.62=34,860bps
Thismeansthatthehighestbitrateforatelephone lineis34.860kbps.Ifwewanttosend
datafasterthanthis,wecaneitherincrease thebandwidth ofthelineorimprove thesignal-to­
noiseratio.88CHAPTER 3DATAANDSIGNALS
Example 3.39
Thesignal-to-noise ratioisoftengivenindecibels. AssumethatSN~B=36andthechannel
bandwidth is2MHz.Thetheoretical channelcapacitycanbecalculated as
SNRdB=10loglOSNR...SNR=lOSNRoB/10 ...SNR::;103.6=3981
C=Blog2(1+SNR)= 2X106Xlog23982=24Mbps
Example 3.40
Forpractical purposes, whentheSNRisveryhigh,wecanassumethatSNR+Iisalmostthe
sameasSNR.Inthesecases,thetheoretical channelcapacitycanbesimplified to
SNRdBC=BX--=3
Forexample, wecancalculate thetheoretical capacityoftheprevious exampleas
36C=2MHzX -=24Mbps3
UsingBothLimits
Inpractice, weneedtousebothmethods tofindthelimitsandsignallevels.Letusshow
thiswithanexample.
Example 3.41
WehaveachannelwithaI-MHzbandwidth. TheSNRforthischannelis63.Whataretheappro­
priatebitrateandsignallevel?
Solution
First,weusetheShannon formulatofindtheupperlimit.
C=Blog2(l+SNR)=106log2(1+63)=10610g264=6Mbps
TheShannon formulagivesus6Mbps,theupperlimit.Forbetterperformance wechoose
something lower,4Mbps,forexample. ThenweusetheNyquistformulatofindthenumberof
signallevels.
4Mbps=2x 1MHzxlog2L...L=4
TheShannon capacity givesustheupperlimit;
theNyquistformulatellsushowmanysignallevelsweneed.SECTION 3.6PERFORMANCE 89
3.6PERFORMANCE
Uptonow,wehavediscussed thetoolsoftransmitting data(signals) overanetwork
andhowthedatabehave.Oneimportant issueinnetworking istheperformance ofthe
network-how goodisit?Wediscussqualityofservice,anoverallmeasurement of
network performance, ingreaterdetailinChapter24.Inthissection,weintroduce
termsthatweneedforfuturechapters.
Bandwidth
Onecharacteristic thatmeasures networkperformance isbandwidth. However, theterm
canbeusedintwodifferent contextswithtwodifferent measuring values:bandwidth in
hertzandbandwidth inbitspersecond.
Bandwidth inHertz
Wehavediscussed thisconcept. Bandwidth inhertzistherangeoffrequencies con­
tainedinacomposite signalortherangeoffrequencies achannelcanpass.Forexam­
ple,wecansaythebandwidth ofasubscriber telephone lineis4kHz.
Bandwidth inBitsperSeconds
Thetermbandwidth canalsorefertothenumberofbitspersecondthatachannel, a
link,orevenanetworkcantransmit. Forexample, onecansaythebandwidth ofaFast
Ethernet network(orthelinksinthisnetwork) isamaximum of100Mbps.Thismeans
thatthisnetworkcansend100Mbps.
Relationship
Thereisanexplicitrelationship betweenthebandwidth inhertzandbandwidth inbits
perseconds.Basically, anincreaseinbandwidth inhertzmeansanincreaseinbandwidth
inbitspersecond.Therelationship dependsonwhetherwehavebaseband transmission
ortransmission withmodulation. Wediscussthisrelationship inChapters 4and5.
Innetworking, weusethetermbandwidth intwocontexts.
oThefirst,bandwidth inhertz,referstotherangeoffrequencies inacomposite
signalortherangeoffrequencies thatachannelcanpass.
oThesecond,bandwidth inbitspersecond,referstothespeedofbittransmis­
sioninachannelorlink.
Example 3.42
Thebandwidth ofasubscriber lineis4kHzforvoiceordata.Thebandwidth ofthislinefordatatrans­
missioncanbeupto56,000bpsusingasophisticated modemtochangethedigitalsignaltoanalog.
Example 3.43
Ifthetelephone company improves thequalityofthelineandincreases thebandwidth to8kHz,
wecansend112,000bpsbyusingthesametechnology asmentioned inExample 3.42.90CHAPTER 3DATAANDSIGNALS
Throughput
Thethroughput isameasureofhowfastwecanactuallysenddatathroughanetwork.
Although, atfirstglance,bandwidth inbitspersecondandthroughput seemthesame,
theyaredifferent. Alinkmayhaveabandwidth ofBbps,butwecanonlysendTbps
throughthislinkwithTalwayslessthanB.Inotherwords,thebandwidth isapotential
measurement ofalink;thethroughput isanactualmeasurement ofhowfastwecan
senddata.Forexample, wemayhavealinkwithabandwidth of1Mbps,butthe
devicesconnected totheendofthelinkmayhandleonly200kbps.Thismeansthatwe
cannotsendmorethan200kbpsthroughthislink.
Imagine ahighway designed totransmit 1000carsperminutefromonepoint
toanother.However, ifthereiscongestion ontheroad,thisfiguremaybereducedto
100carsperminute.Thebandwidth is1000carsperminute;thethroughput is100cars
perminute.
Example 3.44
Anetworkwithbandwidth of10Mbpscanpass only anaverageof12,000framesperminute
witheachframecarryinganaverageof10,000bits.Whatisthethroughput ofthisnetwork?
Solution
Wecancalculate thethroughput as
Throughput=12,000x10,000=2Mbps
60
Thethroughput isalmostone-fifthofthebandwidth inthiscase.
Latency(Delay)
Thelatencyordelaydefineshowlongittakesforanentiremessage tocompletely
arriveatthedestination fromthetimethefirstbitissentoutfromthesource.Wecan
saythat latency ismadeoffourcomponents: propagation time,transmission time,
queuingtimeandprocessing delay.
Latency=propagation time+transmission time+queuingtime+processing delay
Propagation Time
Propagation timemeasures thetimerequired forabittotravelfromthesourcetothe
destination. Thepropagation timeiscalculated bydividingthedistancebythepropaga­
tionspeed.
Propagation time=Dist:mce
Propagation speed
Thepropagation speedofelectromagnetic signalsdependsonthemediumandon
thefrequency ofthesignaLForexample, inavacuum, lightispropagated withaspeed
of3 x108mfs.Itislowerinair;itismuchlowerincable.SECTION 3.6PERFORMANCE 91
Example 3.45
Whatisthepropagation timeifthedistancebetween thetwopointsis12,000km?Assumethe
propagation speedtobe2.4x108mlsincable.
Solution
Wecancalculate thepropagation timeas
.. 12000x1000Propagation tIme= ' =50ms
2.4x108
Theexample showsthatabitcangoovertheAtlanticOceaninonly50msifthereisadirect
cablebetweenthesourceandthedestination.
Tra/lsmissio/l Time
Indatacommunications wedon'tsendjust1bit,wesendamessage. Thefirstbitmay
takeatimeequaltothepropagation timetoreachitsdestination; thelastbitalsomay
takethesameamountoftime.However, thereisatimebetween thefirstbitleavingthe
senderandthelastbitarrivingatthereceiver. Thefirstbitleavesearlierandarrivesear­
lier;thelastbitleaveslaterandarriveslater.Thetimerequired fortransmission ofa
message depends onthesizeofthemessage andthebandwidth ofthechannel.
Transmission time=Message size
Bandwidth
Example 3.46
Whatarethepropagation timeandthetransmission timefora2.5-kbyte message (ane-mail)if
thebandwidth ofthenetworkis1Gbps?Assumethatthedistancebetweenthesenderandthe
receiveris12,000kmandthatlighttravelsat2.4x108mls.
Solution
Wecancalculate thepropagation andtransmission timeas
.. 12000x1000PropagatIon Hme=~.4x108=50ms
T... 2500x80020ranSIlllSSlOn tIme= 9=.ms
10
Notethatinthiscase,because themessage isshortandthebandwidth ishigh,the
dominant factoristhepropagation time,notthetransmission time.Thetransmission
timecanbeignored.
Example 3.47
Whatarethepropagation timeandthetransmission timefora5-Mbyte message(animage)ifthe
bandwidth ofthenetwork is1Mbps?Assumethatthedistance between thesenderandthe
receiveris12,000kmandthatlighttravelsat2.4x108mls.92CHAPTER 3DATAANDSIGNALS
Solution
Wecancalculate thepropagation andtransmission timesas
., 12000X1000PropagatIon tIme::::' 8::::50ms
2.4x10
T...5,000,000x840ranSffilSSlOn tIme:::: 6 ::::S
10
Notethatinthiscase,becausethemessage isverylongandthebandwidth isnotvery
high,thedominant factoristhetransmission time,notthepropagation time.Thepropa­
gationtimecanbeignored.
Queuing Time
Thethirdcomponent inlatencyisthequeuingtime,thetimeneededforeachinterme­
diateorenddevicetoholdthemessage beforeitcanbeprocessed. Thequeuingtimeis
notafixedfactor;itchanges withtheloadimposed onthenetwork. Whenthereis
heavytrafficonthenetwork, thequeuingtimeincreases. Anintermediate device,such
asarouter,queuesthearrivedmessages andprocesses themonebyone.Ifthereare
manymessages, eachmessage willhavetowait.
Bandwidth-Delay Product
Bandwidth anddelayaretwoperformance metricsofalink.However, aswewillseein
thischapterandfuturechapters, whatisveryimportant indatacommunications isthe
productofthetwo,thebandwidth-delay product. Letuselaborate onthisissue,using
twohypothetical casesasexamples.
oCase1.Figure3.31showscase1.
Figure3.31Fillingthelinkwithbitsforcase1
Sender Receiver
1sBandwidth: 1bpsDelay:5 s
Bandwidth xdelay=5bits
1stbit ~_...
1stbit
1s
LetUSassumethatwehavealinkwithabandwidth of1bps(unrealistic, butgood
fordemonstration purposes). Wealsoassumethatthedelayofthelinkis5 s(also
unrealistic). Wewanttoseewhatthebandwidth-delay productmeansinthiscase.SECTION 3.6PERFORMANCE 93
Looking atfigure,wecansaythatthisproduct1x 5isthemaximum numberof
bitsthatcanfillthelink.Therecanbenomorethan5bitsatanytimeonthelink.
oCase2.Nowassumewehaveabandwidth of4bps.Figure3.32showsthatthere
canbemaximum 4 x 5=20bitsontheline.Thereasonisthat,ateachsecond,
thereare4bitsontheline;thedurationofeachbitis0.25s.
Figure3.32Fillingthelinkwithbitsincase2
Bandwidth: 4bps Delay:5 s
Bandwidth xdelay=20bits
After1sI---'-----'----.l..-.L-l
After2 s
After4 s
1s 1s 1s 1s 1sReceiver
r
Theabovetwocasesshowthattheproductofbandwidth anddelayisthenumberof
bitsthatcanfillthelink.Thismeasurement isimportant ifweneedtosenddatainbursts
andwaitfortheacknowledgment ofeachburstbeforesendingthenextone.Tousethe
maximum capability ofthelink,weneedtomakethesizeofourburst2timestheproduct
ofbandwidth anddelay;weneedtofillupthefull-duplex channel(twodirections). The
sendershouldsendaburstofdataof(2xbandwidth xdelay)bits.Thesenderthenwaits
forreceiver acknowledgment forpartoftheburstbeforesendinganotherburst.The
amount2 xbandwidth xdelayisthenumberofbitsthatcanbeintransition atanytime.
Thebandwidth~delay productdefinesthenumberofbitsthatcanrdlthelink.
Example 3.48
Wecanthinkaboutthelinkbetween twopointsasapipe.Thecrosssectionofthepiperepresents
thebandwidth, andthelengthofthepiperepresents thedelay.Wecansaythevolumeofthepipe
definesthebandwidth-delay product,asshowninFigure3.33.
Figure3.33Conceptofbandwidth-delay product
Length:delay
Crosssection:bandwidth94CHAPTER 3DATAANDSIGNALS
Jitter
Anotherperformance issuethatisrelatedtodelayisjitter.Wecanroughlysaythatjitter
isaproblemifdifferent packetsofdataencounter different delaysandtheapplication
usingthedataatthe receiver siteistime-sensitive (audioandvideodata,forexample).
Ifthedelayforthefirstpacketis20ms,forthesecondis45ms,andforthethirdis
40ms,thenthereal-time application thatusesthepacketsenduresjitter.Wediscussjitter
ingreaterdetailinChapter29.
3.7RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
books.Theitemsinbrackets [...]refertothereference listattheendofthetext.
Books
Dataandsignalsareelegantly discussed inChapters 1to6of[Pea92]. [CouOl]gives
anexcellent coverage aboutsignalsinChapter 2.Moreadvanced materials canbe
foundin[Ber96]. [Hsu03]givesagoodmathematical approach tosignaling. Complete
coverage ofFourierAnalysis canbefound in [Spi74].Dataand signals arediscussed in
Chapter3of[Sta04]andSection2.1of[Tan03].
3.8KEYTERMS
analog
analogdata
analogsignal
attenuation
bandpass channel
bandwidth
baseband transmission
bitrate
bitspersecond(bps)
broadband transmission
composite signal
cycle
decibel(dB)
digital
digitaldata
digitalsignal
distortionFourieranalysis
frequencyfrequency-domain
fundamental frequency
harmonic
Hertz(Hz)
jitter
low-pass channel
noise
nonperiodic signal
Nyquistbitrate
peakamplitude
periodperiodicsignal
phase
processing delay
propagation speedpropagation time
queuingtime
Shannon capacity
signal
signal-to-noise ratio(SNR)SECTION 3.9SUMMARY 95
sinewave
throughput
time-domain
transmission time
wavelength
3.9SUMMARY
oDatamustbetransformed toelectromagnetic signalstobetransmitted.
oDatacanbeanalogordigital.Analogdataarecontinuous andtakecontinuous
values.Digitaldatahavediscretestatesandtakediscretevalues.
oSignalscanbeanalogordigital.Analogsignalscanhaveaninfinitenumberof
valuesinarange;digital,signalscanhaveonlyalimitednumberofvalues.
oIndatacommunications, wecommonly useperiodic analogsignalsandnonperi-
odicdigitalsignals.
oFrequency andperiodaretheinverseofeachother.
oFrequency istherateofchangewithrespecttotime.
oPhasedescribes thepositionofthewaveform relativetotimeO.
oAcomplete sinewaveinthetimedomaincanberepresented byonesinglespikein
thefrequency domain.
oAsingle-frequency sinewaveisnotusefulindatacommunications; weneedto
sendacomposite signal,asignalmadeofmanysimplesinewaves.
oAccording toFourieranalysis, anycomposite signalisacombination ofsimple
sinewaveswithdifferent frequencies, amplitudes, andphases.
oThebandwidth ofacomposite signalisthedifference between thehighestandthe
lowestfrequencies contained inthatsignal.
oAdigitalsignalisacomposite analogsignalwithaninfinitebandwidth.
oBaseband transmission ofadigitalsignalthatpreserves theshapeofthedigital
signalispossibleonlyifwehavealow-pass channelwithaninfiniteorverywide
bandwidth.
oIftheavailable channelisabandpass channel, wecannotsendadigitalsignal
directlytothechannel; weneedtoconvertthedigitalsignaltoananalogsignal
beforetransmission.
oForanoiseless channel, theNyquistbitrateformuladefinesthetheoretical maxi­
mumbitrate.Foranoisychannel, weneedtousetheShannon capacity tofindthe
maximum bitrate.
oAttenuation, distortion, andnoisecanimpairasignal.
oAttenuation isthelossofasignal'senergyduetotheresistance ofthemedium.
oDistortion isthealteration ofasignalduetothediffering propagation speedsof
eachofthefrequencies thatmakeupasignal.
oNoiseistheexternalenergythatcorruptsasignal.
oThebandwidth-delay productdefinesthenumberofbits thatcanfillthelink.96CHAPTER 3DATAANDSIGNALS
3.10PRACTICE SET
ReviewQuestions
1.Whatistherelationship between periodandfrequency?
2.Whatdoestheamplitude ofasignalmeasure? Whatdoesthefrequency ofasignal
measure? Whatdoesthephaseofasignalmeasure?
3.Howcanacomposite signalbedecomposed intoitsindividual frequencies?
4.Namethreetypesoftransmission impairment.
5.Distinguish between baseband transmission andbroadband transmission.
6.Distinguish between alow-pass channelandaband-pass channel.
7.WhatdoestheNyquisttheorem havetodowithcommunications?
8.WhatdoestheShannon capacity havetodowithcommunications?
9.Whydoopticalsignalsusedinfiberopticcableshaveaveryshortwavelength?
10.Canwesayifasignalisperiodic or nonperiodic byjustlookingatitsfrequency
domainplot?How?
11.Isthefrequency domainplotofavoicesignaldiscreteorcontinuous?
12.Isthefrequency domainplotofanalarmsystemdiscreteorcontinuous?
13.Wesendavoicesignalfromamicrophone toarecorder. Isthisbaseband orbroad­
bandtransmission?
14.WesendadigitalsignalfromonestationonaLANtoanotherstation.Isthisbase­
bandorbroadband transmission?
15.Wemodulate severalvoicesignalsandsendthemthroughtheair.Isthisbaseband
orbroadband transmission?
Exercises
16.Giventhefrequencies listedbelow,calculate thecorresponding periods.
a.24Hz
b.8MHz
c.140KHz
17.Giventhefollowing periods,calculate thecorresponding frequencies.
a.5s
b.12Jls
c.220ns
18.WhatisthephaseshiftforthefoIlowing?
a.Asinewavewiththemaximum amplitude attimezero
b.Asinewavewithmaximum amplitude after1/4cycle
c.Asinewavewithzeroamplitude after3/4cycleandincreasing
19.Whatisthebandwidth ofasignalthatcanbedecomposed intofivesinewaves
with frequencies at0,20,50,100,and200Hz?Allpeakamplitudes arethesame.
Drawthebandwidth.SECTION 3.10PRACTICE SET 97
20.Aperiodiccomposite signalwithabandwidth of2000Hziscomposed oftwosine
waves.Thefirstonehasafrequency of100Hzwithamaximum amplitude of20V;
thesecondonehasamaximum amplitude of5V.Drawthebandwidth.
21.Whichsignalhasawiderbandwidth, asinewavewithafrequency of100Hzora
sine wave withafrequency of200Hz?
22.Whatisthebitrateforeachofthefollowing signals?
a.Asignalinwhich1bitlasts0.001s
b.Asignalinwhich1bitlasts2ms
c.Asignalinwhich10bitslast20J-ls
23.Adeviceissendingoutdataattherateof1000bps.
a.Howlongdoesittaketosendout10bits?
b.Howlongdoesittaketosendoutasinglecharacter (8bits)?
c.Howlongdoesittaketosendafileof100,000characters?
24.WhatisthebitrateforthesignalinFigure3.34?
Figure3.34Exercise 24
16ns
---t=:i--J~-...;..---+-.....;.--.;....-d ...~
1 TI~
25.Whatisthefrequency ofthesignalinFigure3.35?
Figure3.35Exercise 25
Time \TVVVVV V~I, 4ms .1
1 I
V\f\f\f\f\f\f\f\:...
26.Whatisthebandwidth ofthecomposite signalshowninFigure3.36.
Figure3.36Exercise 26
Frequency
5 5 5 55I9SCHAPTER 3DATAANDSIGNALS
27.Aperiodiccomposite signalcontainsfrequencies from10to30KHz,eachwithan
amplitude of10V.Drawthefrequency spectrum.
2K.Anon-periodic composite signalcontains frequencies from10to30KHz.The
peakamplitude is10Vforthelowestandthehighestsignalsandis30Vforthe
20-KHzsignal.Assuming thattheamplitudes changegradually fromtheminimum
tothemaximum, drawthefrequency spectrum.
20.ATVchannelhasabandwidth of6MHz.Ifwesendadigitalsignalusingone
channel,whatarethedataratesifweuseoneharmonic, threeharmonics, andfive
harmonics?
30.AsignaltravelsfrompointAtopointB.AtpointA,thesignalpoweris100W.At
pointB,thepoweris90W.Whatistheattenuation indecibels?
31.Theattenuation ofasignalis-10dB.Whatisthefinalsignalpowerifitwasorigi­
nally5W?
32.Asignalhaspassedthroughthreecascaded amplifiers, eachwitha 4dBgain.
Whatisthetotalgain?Howmuchisthesignalamplified?
33.Ifthebandwidth ofthechannelis5Kbps,howlongdoesittaketosendaframeof
100,000bitsoutofthisdevice?
3cf.Thelightofthesuntakesapproximately eightminutestoreachtheearth.Whatis
thedistancebetweenthesunandtheearth?
35.Asignalhasawavelength of111minair.Howfarcanthefrontofthewavetravel
during1000periods?
36.Alinehasasignal-to-noise ratioof1000andabandwidth of4000KHz.Whatis
themaximum dataratesupported bythisline?
37.Wemeasuretheperformance ofatelephone line(4KHzofbandwidth). Whenthe
signalis10V,thenoiseis5 mV.Whatisthemaximum dataratesupported bythis
telephone line?
3X.Afilecontains2millionbytes.Howlongdoesittaketodownload thisfileusinga
56-Kbps channel? 1-Mbpschannel?
39.Acomputer monitorhasaresolution of1200by1000pixels.Ifeachpixeluses
1024colors,howmanybitsareneededtosendthecomplete contentsofascreen?
40.Asignalwith200milliwatts powerpassesthrough10devices,eachwithanaverage
noiseof2microwatts. WhatistheSNR?WhatistheSNRdB?
4I.Ifthepeakvoltagevalueofasignalis20timesthepeakvoltagevalueofthenoise,
whatistheSNR?WhatistheSNRdB?
42.Whatisthetheoretical capacityofachannelineachofthefollowing cases:
a.Bandwidth: 20KHzSNRdB=40
b.Bandwidth: 200KHzSNRdB=4
c.Bandwidth: 1MHz SNRdB=20
43.Weneedtoupgrade achanneltoahigherbandwidth. Answerthefollowing
questions:
a.Howistherateimproved ifwedoublethebandwidth?
b.Howistherateimproved ifwedoubletheSNR?SECTION 3.10PRACTICE SET99
44.Wehaveachannelwith4KHzbandwidth. Ifwewanttosenddataat100Kbps,
whatistheminimum SNRdB?WhatisSNR?
45.Whatisthetransmission timeofapacketsentbyastationifthelengthofthe
packetis1millionbytesandthebandwidth ofthechannelis200Kbps?
46.Whatisthelengthofabitinachannelwithapropagation speedof2 x108mlsif
thechannel bandwidth is
a.1Mbps?
h.10Mbps?
c.100Mbps?
-1-7.Howmanybitscanfitonalinkwitha 2msdelayifthebandwidth ofthelinkis
a.1Mbps?
h.10Mbps?
c.100Mbps?
-1-X.Whatisthetotaldelay(latency) foraframeofsize5millionbitsthatisbeingsent
onalinkwith10routerseachhavingaqueuingtimeof2Ilsandaprocessing time
of1Ils.Thelengthofthelinkis2000Km.Thespeedoflightinsidethelinkis2 x
108mls.Thelinkhasabandwidth of5Mbps.Whichcomponent ofthetotaldelay
isdominant? Whichoneisnegligible?CHAPTER 4
DigitalTransmission
Acomputer network isdesigned tosendinformation fromonepointtoanother.This
information needstobeconverted toeitheradigitalsignalorananalogsignalfortrans­
mission. Inthischapter,wediscussthefirstchoice,conversion todigitalsignals;in
Chapter5,wediscussthesecondchoice,conversion toanalogsignals.
Wediscussed theadvantages anddisadvantages ofdigitaltransmission overanalog
transmission inChapter3.Inthischapter,weshowtheschemes andtechniques that
weusetotransmit datadigitally. First,wediscussdigital-to-digital conversion tech­
niques,methodswhichconvertdigitaldatatodigitalsignals.Second,wediscussanalog­
to-digital conversion techniques, methods whichchangeananalogsignaltoadigital
signaLFinally,wediscusstransmission modes.
4.1
DIGITAL~TO~DIGITAL CONVERSION
InChapter3,wediscussed dataandsignals.Wesaidthatdatacanbeeitherdigitalor
analog.Wealsosaidthatsignalsthatrepresent datacanalsobedigitaloranalog.Inthis
section,weseehowwecanrepresent digitaldatabyusingdigitalsignals.Theconver­
sioninvolvesthreetechniques: linecoding,blockcoding,andscrambling. Linecoding
isalways needed~blockcodingandscrambling mayormaynotbeneeded.
LineCoding
Linecodingistheprocessofconverting digitaldatatodigitalsignals.Weassumethat
data,intheformoftext,numbers, graphical images,audio,orvideo,arestoredincom­
putermemoryassequences ofbits(seeChapter 1).Linecodingconverts asequence of
bitstoadigitalsignal.Atthesender,digitaldataareencodedintoadigitalsignal;atthe
receiver, thedigitaldataarerecreated bydecoding thedigitalsignal.Figure4.1shows
theprocess.
Characteristics
Beforediscussing differentlinecoding schemes, weaddresstheircommon characteristics.
101102CHAPTER 4DIGITAL TRANSMISSION
Figure4.1Linecodinganddecoding
Sender Receiver
Digitaldata
1°101". 1011DigitalsignalDigitaldata
1°101••'1011
SignalElement VersusDataElement Letusdistinguish between adataelement
andasignalelement. Indatacommunications, ourgoalistosenddataelements. A
dataelementisthesmallestentitythatcanrepresent apieceofinformation: thisisthe
bit.Indigitaldata communications, asignalelementcarriesdataelements. Asignal
elementistheshortestunit(timewise) ofadigitalsignal.Inotherwords,dataelements
arewhatweneedtosend;signalelements arewhatwecansend.Dataelements are
beingcarried;signalelements arethecarriers.
Wedefinearatiorwhichisthenumberofdataelements carriedbyeachsignalele­
ment.Figure4.2showsseveralsituations withdifferentvaluesofr.
Figure4.2Signalelementversusdataelement
Idataelement Idataelement
o o
~-
element 2signal
elements
a.Onedataelementperonesignal
element(r=1)b.Onedataelementpertwosignal
elements(r=t)
2dataelements 4dataelements
1101
---16_­
3signal
elementsIsignal
elementIII01II
I---'
-l=:F
c.Twodataelements peronesignal
element(r=2)d.Fourdataelements perthreesignal
elements(r=1)
Inpartaofthefigure,onedataelementiscarriedbyonesignalelement(r=1).In
partbofthefigure,weneedtwosignalelements (twotransitions) tocarryeachdataSECTION 4.1DIGITAL-TO-DIGITAL CONVERSION 103
element(r=!).Wewillseelaterthattheextrasignalelementisneededtoguarantee2synchronization. Inpartcofthefigure,asignalelementcarriestwodataelements (r=2).
Finally,inpartd,agroupof4bitsisbeingcarriedbyagroupofthreesignalelements
(r=~).Foreverylinecodingschemewediscuss,wewillgivethevalueofr.
3 .Ananalogymayhelphere.Supposeeachdataelement ISapersonwhoneedstobe
carriedfromoneplacetoanother.Wecanthinkofasignalelementasavehiclethatcan
carrypeople.Whenr=1,itmeanseachpersonisdrivingavehicle.Whenr>1,it
meansmorethanonepersonistravelling inavehicle(acarpool,forexample). Wecan
alsohavethecasewhereonepersonisdrivingacarandatrailer(r=~).
DataRateVersusSignalRateThedataratedefinesthenumberofdataelements
(bits)sentinIs.Theunitisbitspersecond(bps).Thesignalrateisthenumberofsig­
nalelements sentinIs.Theunitisthebaud.Thereareseveralcommon terminologies
usedintheliterature. Thedatarateissometimes calledthebitrate;thesignalrateis
sometimes calledthepulserate,themodulation rate,orthebaudrate.
Onegoalindatacommunications istoincreasethedataratewhile decreasing the
signalrate.Increasing thedatarateincreases thespeedoftransmission; decreasing the
signalratedecreases thebandwidth requirement. Inourvehicle-people analogy, we
needtocarrymorepeopleinfewervehiclestopreventtrafficjams.Wehavealimited
bandwidth inourtransportation system.
Wenowneedtoconsidertherelationship betweendatarateandsignalrate(bitrate
andbaudrate).Thisrelationship, ofcourse,dependsonthevalueofr.Italsodepends
onthedatapattern.Ifwehaveadatapatternofall1sorallOs,thesignalratemaybe
different fromadatapatternofalternating OsandIs.Toderiveaformulafortherela­
tionship, weneedtodefinethreecases:theworst,best,andaverage.Theworstcaseis
whenweneedthemaximum signalrate;thebestcaseiswhenweneedtheminimum.
Indatacommunications, weareusuallyinterested intheaveragecase.Wecanformu­
latetherelationship betweendatarateandsignalrateas
1S=cxNx-baudr
whereNisthedatarate(bps);cisthecasefactor,whichvariesforeachcase;Sisthe
numberofsignalelements; andristhepreviously definedfactor.
Example 4.1
Asignaliscarrying datain which onedataelementisencoded asonesignalelement(r=1).If
thebitrateis100kbps,whatistheaveragevalueofthebaudrateifcisbetween0andl?
Solution
Weassumethattheaveragevalueofcis~.Thebaudrateisthen
111S=cxNx -= -x100,000x-1=50,000=50kbaudr 2
Bandwidth Wediscussed inChapter3thatadigitalsignalthatcarriesinfonnation is
nonperiodic. Wealsoshowedthatthebandwidth ofanonperiodic signaliscontinuous
withaninfiniterange.However, mostdigitalsignalsweencounter inreallifehavea104CHAPTER 4DIGITAL TRANSMISSION
bandwidth withfinitevalues.Inotherwords,thebandwidth istheoretically infinite,but
manyofthecomponents havesuchasmallamplitude thattheycanbeignored. The
effective bandwidth isfinite.Fromnowon,whenwetalkaboutthebandwidth ofadig­
italsignal,weneedtoremember thatwearetalkingaboutthiseffective bandwidth.
Although theactualbandwidth ofadigitalsignalisinfinite,theeffectivebandwidth isfinite.
Wecansaythatthebaudrate,notthebitrate,determines therequired bandwidth
foradigitalsignal.IfweusethetranspOltation analogy,thenumberofvehiclesaffects
thetraffic,notthenumberofpeoplebeingcarried.Morechangesinthesignalmean
injecting morefrequencies intothesignal.(Recallthatfrequency meanschangeand
changemeansfrequency.) Thebandwidth reflectstherangeoffrequencies weneed.
Thereisarelationship between thebaudrate(signalrate)andthebandwidth. Band­
widthisacomplex idea.Whenwetalkaboutthebandwidth, wenormally definea
rangeoffrequencies. Weneedtoknowwherethisrangeislocatedaswellasthevalues
ofthelowestandthehighestfrequencies. Inaddition, theamplitude (ifnotthephase)
ofeachcomponent isanimpOltant issue.Inotherwords,weneedmoreinformation
aboutthebandwidth thanjustitsvalue;weneedadiagramofthebandwidth. Wewill
showthebandwidth formostschemes wediscussinthechapter.Forthemoment, we
cansaythatthebandwidth (rangeoffrequencies) isproportional tothesignalrate
(baudrate).Theminimum bandwidth canbegivenas
1Bmin=:c><N><­r
Wecansolveforthemaximum datarateifthebandwidth ofthechannelisgiven.
1Nmax=-xBxrc
Example 4.2
Themaximum datarateofachannel(seeChapter3)isNmax=2><B><log2L(definedbythe
Nyquistformula). Doesthisagreewiththeprevious formulaforNmax?
Solution
AsignalwithLlevelsactuallycancarrylog2Lbitsperlevel.Ifeachlevelcorresponds toonesig­
nalelementandweassumetheaveragecase(c=~),thenwehave
Baseline Wandering Indecoding adigitalsignal,thereceivercalculates arunning
averageofthereceived signalpower.Thisaverageiscalledthebaseline. Theincoming
signalpowerisevaluated againstthisbaseline todetermine thevalueofthedataele­
ment.AlongstringofOsor1scancauseadriftinthebaseline(baseline wandering)
andmakeitdifficultforthereceivertodecodecorrectly. Agoodlinecodingscheme
needstopreventbaselinewandering.SECTION 4.1DIGITAL-TO-DIGITAL CONVERSION 105
DCComponents Whenthevoltagelevelinadigitalsignalisconstant forawhile,
thespectrum createsverylowfrequencies (resultsofFourieranalysis). Thesefre­
quencies aroundzero,calledDC(direct-current) components, presentproblems fora
systemthatcannotpasslowfrequencies orasystemthatuseselectrical coupling
(viaatransformer). Forexample, atelephone linecannotpassfrequencies below
200Hz.Alsoalong-distance linkmayuseoneormoretransformers toisolate
different partsofthelineelectrically. Forthesesystems, weneedaschemewithno
DCcomponent.
Self-synchronization Tocorrectly interpret thesignalsreceived fromthesender,
thereceiver's bitintervals mustcorrespond exactlytothesender's bitintervals.Ifthe
receiverclockisfasterorslower,thebitintervals arenotmatched andthereceivermight
misinterpret thesignals.Figure4.3showsasituation inwhichthereceiverhasashorter
bitduration. Thesendersends10110001,whilethereceiverreceives110111000011.
Figure4.3Effectoflackofsynchronization
a.SentJoI
I
IoJ I
o :0 :
J I
I1""'"----;
I
Time
I
I
1I
I
b.ReceivedII
1I1 0 0 0 0
III
1I1
I
Time
Aself-synchronizing digitalsignalincludes timinginformation inthedatabeing
transmitted. Thiscanbeachieved iftherearetransitions inthesignalthatalertthe
receivertothebeginning, middle,orendofthepulse.Ifthereceiver's clockisoutof
synchronization, thesepointscanresettheclock.
Example 4.3
Inadigitaltransmission, thereceiverclockis0.1percentfasterthanthesenderclock.Howmany
extrabitsperseconddoesthereceiver receiveifthedatarateis1kbps?Howmanyifthedata
rateis1Mbps?
Solution
At1kbps,thereceiverreceives1001bpsinsteadof1000bps.
1000bitssent 1001bitsreceived 1extrabps106CHAPTER 4DIGITAL TRANSMISSION
At1Mbps,thereceiverreceives 1,001,000 bpsinsteadof1,000,000 bps.
1,000,000 bitssent 1,001,000 bitsreceived 1000extrabps
Built-inErrorDetection Itisdesirable tohaveabuilt-inerror-detecting capability
inthegenerated codetodetectsomeoforalltheerrorsthatoccurred duringtransmis­
sion.Someencoding schemes thatwewilldiscusshavethiscapability tosomeextent.
Immunity toNoiseandInterference Anotherdesirable codecharacteristic isacode I
thatisimmunetonoiseandotherinterferences. Someencoding schemes thatwewill
discusshavethiscapability.
Complexity Acomplex schemeismorecostlytoimplement thanasimpleone.For
example, aschemethatusesfoursignallevelsismoredifficulttointerpret thanonethat
usesonlytwolevels.
LineCodingSchemes
Wecanroughlydividelinecodingschemes intofivebroadcategories, asshownin
Figure4.4.
Figure4.4Linecodingschemes
Multitransition--MLT-3Multilevel--2B/IQ,8B/6T,and4U-PAM5LinecodingUnipolar
Polar
Bipolar--NRZ
NRZ,RZ,andbiphase(Manchester.
anddifferential Manchester)
--AMIandpseudoternary
Thereareseveralschemes ineachcategory. Weneedtobefamiliar withall
schemes discussed inthissectiontounderstand therestofthebook.Thissectioncanbe
usedasareference forschemes encountered later.
Unipolar Scheme
Inaunipolar scheme,allthesignallevelsareononesideofthetimeaxis,eitherabove
orbelow.
NRZ(Non-Return-to-Zero) Traditionally, aunipolar schemewasdesigned asa
non-return-to-zero (NRZ)schemeinwhichthepositivevoltagedefinesbitIandthe
zerovoltagedefinesbitO.ItiscalledNRZbecausethesignaldoesnotreturntozeroat
themiddleofthebit.Figure4.5showaunipolar NRZscheme.SECTION 4.1DIGITAL-TO-DIGITAL CONVERSION 107
Figure4.5Unipolar NRZscheme
Amplitude
v1f0
f: 1I0
I
o1------'1---1---1--+---.-- __
ITime Nonnalized power
Compared withitspolarcounterpart (seethenextsection), thisschemeisvery
costly.Aswewillseeshortly,thenormalized power(powerneededtosend1bitper
unitlineresistance) isdoublethatforpolarNRZ.Forthisreason,thisschemeisnor­
mallynotusedindatacommunications today.
PolarSchemes
Inpolarschemes, thevoltagesareonthebothsidesofthetimeaxis.Forexample, the
voltagelevelfor0canbepositiveandthevoltagelevelforIcanbenegative.
Non-Return-to-Zero (NRZ) InpolarNRZencoding, weusetwolevelsofvoltage
amplitude. WecanhavetwoversionsofpolarNRZ:NRZ-LandNRZ-I,asshownin
Figure4.6.Thefigurealsoshowsthevalueofr,theaveragebaudrate,andtheband­
width.Inthefirstvariation, NRZ-L(NRZ-Level), thelevelofthevoltagedetermines
thevalueofthebit.Inthesecondvariation, NRZ-I(NRZ-Invert), thechangeorlackof
changeinthelevelofthevoltagedetermines thevalueofthebit.Ifthereisnochange,
thebitis0;ifthereisachange,thebitis1.
Figure4.6PolarNRZ-LandNRZ-Ischemes
T=:=1 Save"'NIl
p
0:
~illdWidth
o
G""Iil""""'~I=-=-"""'r' -----'l..~
o I 2fINTime
Time1 : 1 0
I
I011
I
I
NRZ-If-----I----J---I---+--+--+----+----'--~NRZ-L f--+--1---I---+--I---1------t----'--~
oNoinversion: Nextbitis0 •Inversion: Nextbitis1
InNRZ-Lthelevelofthevoltagedetermines thevalueofthebit.InNRZ-I
theinversion orthelackofinversion determines thevalueofthebit.
Letuscompare thesetwoschemes basedonthecriteriawepreviously defined.
Although baselinewandering isaproblemforbothvariations, itistwiceasseverein
NRZ-L.Ifthereisalongsequence ofOsorIsinNRZ-L,theaveragesignalpower108CHAPTER 4DIGITAL TRANSMISSION
becomes skewed.Thereceiver mighthavedifficulty discerning thebitvalue.InNRZ-I
thisproblem occursonly for alongsequence ofas.Ifsomehow wecaneliminate the
longsequence ofas,wecanavoidbaseline wandering. Wewillseeshortlyhowthiscan
bedone.
Thesynchronization problem (senderandreceiver clocksarenotsynchronized)
alsoexistsinbothschemes. Again,thisproblem ismoreseriousinNRZ-Lthanin
NRZ-I.Whilealongsequence ofascancauseaproblem inbothschemes, along
sequence of1saffectsonlyNRZ-L.
Another problem withNRZ-Loccurswhenthereisasuddenchangeofpolarityin
thesystem.Forexample, iftwisted-pair cableisthemedium, achangeinthepolarityof
thewireresultsinallasinterpreted asIsandallIsinterpreted asas.NRZ-Idoesnot
havethisproblem. Bothschemes haveanaveragesignalrateofNI2Bd.
NRZ-LandNRZ-JbothhaveanaveragesignalrateofNI2Bd.
Letusdiscussthebandwidth. Figure4.6alsoshowsthenormalized bandwidth for
bothvariations. Theverticalaxisshowsthepowerdensity(thepowerforeachIHzof
bandwidth); thehorizontal axisshowsthefrequency. Thebandwidth revealsavery
seriousproblem forthistypeofencoding. ThevalueofthepowerdensityisvelYhigh
aroundfrequencies closetozero.ThismeansthatthereareDCcomponents thatcarrya
highlevelofenergy.Asamatteroffact,mostoftheenergyisconcentrated infrequen­
ciesbetween aandNIl.Thismeansthatalthough theaverageofthesignalrateisN12,
theenergyisnotdistributed evenlybetween thetwohalves.
NRZ-LandNRZ-JbothhaveaDCcomponent problem.
Example 4.4
AsystemisusingNRZ-Itotransfer10-Mbps data.Whataretheaveragesignalrateandmini­
mumbandwidth?
Solution
TheaveragesignalrateisS=NI2=500kbaud.Theminimum bandwidth forthisaveragebaud
rateisBnlin=S=500kHz.
ReturntoZero(RZ)Themainproblem withNRZencoding occurswhenthesender
andreceiver clocksarenotsynchronized. Thereceiver doesnotknowwhenonebithas
endedandthenextbitisstarting. Onesolution isthereturn-to-zero (RZ)scheme,
whichusesthreevalues:positive, negative, andzero.InRZ,thesignalchanges not
between bitsbutduringthebit.InFigure4.7weseethatthesignalgoesto0inthemid­
dleofeachbit.Itremains thereuntilthebeginning ofthenextbit.Themaindisadvan­
tageofRZencoding isthatitrequires twosignalchanges toencodeabitandtherefore
occupies greaterbandwidth. Thesameproblem wementioned, asuddenchangeof
polarity resulting inallasinterpreted as1sandall1sinterpreted asas,stillexisthere,
butthereisnoDCcomponent problem. Another problem isthecomplexity: RZuses
threelevelsofvoltage, whichismorecomplex tocreateanddiscern.Asaresultofall
thesedeficiencies, theschemeisnotusedtoday.Instead, ithasbeenreplaced bythe
better-performing Manchester anddifferential Manchester schemes (discussed next).SECTION 4.1DIGITAL-TO-DIGITAL CONVERSION 109
Figure4.7PolarRZscheme
Amplitude
ol
l
l1l
1
l
Timep
o:lLo I~o 1 2 fiN
Biphase: Manchester andDifferential Manchester TheideaofRZ(transition at
themiddleofthebit)andtheideaofNRZ-Larecombined intotheManchester scheme.
InManchester encoding, thedurationofthebitisdividedintotwohalves.Thevoltage
remainsatonelevelduringthefirsthalfandmovestotheotherlevelinthesecondhalf.
Thetransition atthemiddleofthebitprovidessynchronization. Differential Manchester,
ontheotherhand,combines theideasofRZandNRZ-I.Thereisalwaysatransition at
the middle ofthebit,butthebitvaluesaredetermined atthebeginning ofthebit.Ifthe
nextbitis0,thereisatransition; ifthenextbitis1,thereisnone.Figure4.8shows
bothManchester anddifferential Manchester encoding.
Figure4.8Polarbiphase: Manchester anddifferential Manchester schemes
(OisL lisS)
0I1I0I0I1I1I
I I I I I I
I I I I I I.....Ir+-1,...-I_,--4 I 1
I I I I
Manchester
I I I ITimel..+-I-I-+-I-I
I I
I I l I I I
r¢-I,.... 1,...-Irt-I
I I
DifferentialI I I
Manchester I I I ITime1 L...¢-I I~1~-I
1 I I I I I
oNoinversion: Nextbitis1•Inversion: Nextbitis0p
11Bandwidth
O.~~~
o 1)0
2fiN
InManchester anddifferential Manchester encoding, thetransition
atthemiddleofthebitisusedforsynchronization.
TheManchester schemeovercomes severalproblems associated withNRZ-L,and
differential Manchester overcomes severalproblems associated withNRZ-I.First,there
isnobaselinewandering. ThereisnoDCcomponent becauseeachbithasapositiveand110CHAPTER 4DIGITAL TRANSMISSION
negativevoltagecontribution. Theonlydrawback isthesignalrate.Thesignalratefor
Manchester anddifferential Manchester isdoublethatforNRZ.Thereasonisthatthereis
alwaysonetransition atthemiddleofthebitandmaybeonetransition attheendofeach
bit.Figure4.8showsbothManchester anddifferential Manchester encoding schemes.
NotethatManchester anddifferential Manchester schemes arealsocalledbiphase
schemes.
Theminimum bandwidth ofManchester anddifferential Manchester is2timesthatofNRZ.
BipolarSchemes
Inbipolarencoding (sometimes calledmultilevel binary),therearethreevoltagelev­
els:positive,negative, andzero.Thevoltagelevelforonedataelementisatzero,while
thevoltagelevelfortheotherelementalternates betweenpositiveandnegative.
Inbipolarencoding, weusethreelevels:positive, zero,andnegative.
AMIandPseudoternary Figure4.9showstwovariations ofbipolarencoding: AMI
andpseudoternary. Acommon bipolarencoding schemeiscalledbipolaralternate
markinversion (AMI).Inthetermalternate markinversion, thewordmarkcomes
fromtelegraphy andmeans1.SoAMImeansalternate I inversion. A neutralzerovolt­
agerepresents binaryO.BinaryIsarerepresented byalternating positiveandnegative
voltages. Avariation ofAMIencoding iscalledpseudoternary inwhichthe1bitis
encoded asazerovoltageandthe0bitisencodedasalternating positiveandnegative
voltages.
Figure4.9Bipolarschemes: AMIandpseudoternary
Amplitude
oI
II(I
IoI
I
I
I:(I
I
Ir=1
p
Time
TimeAMIr--~-~--1--+----+---;-+
Pseudoternary I-----+--~----If----t--...,....-____r--+
Thebipolarschemewasdeveloped asanalternative toNRZ.Thebipolarscheme
hasthesamesignalrateasNRZ,butthereisnoDCcomponent. TheNRZschemehas
mostofitsenergyconcentrated nearzerofrequency, whichmakesitunsuitable for
transmission overchannels withpoorperformance aroundthisfrequency. Theconcen­
trationoftheenergyinbipolarencoding isaroundfrequency N12.Figure4.9showsthe
typicalenergyconcentration forabipolarscheme.SECTION 4.1DIGITAL-TO-DIGITAL CONVERSION 111
OnemayaskwhywedonothaveDCcomponent inbipolarencoding. Wecan
answerthisquestionbyusingtheFouriertransform, butwecanalsothinkaboutitintu­
itively.Ifwehavealongsequence of1s,thevoltagelevelalternates between positive
andnegative; itisnotconstant. Therefore, thereisnoDCcomponent. Foralong
sequence ofOs,thevoltageremainsconstant, butitsamplitude iszero,whichisthe
sameashavingnoDCcomponent. Inotherwords,asequence thatcreatesaconstant
zerovoltagedoesnothaveaDCcomponent.
AMIiscommonly usedforlong-distance communication, butithasasynchroniza­
tionproblemwhenalongsequence ofOsispresentinthedata.Laterinthechapter,we
willseehowascrambling technique cansolvethisproblem.
Multilevel Schemes
Thedesiretoincreasethedataspeedordecrease therequiredbandwidth hasresultedin
thecreationofmanyschemes. Thegoalistoincreasethenumberofbitsperbaudby
encoding apatternofmdataelements intoapatternofnsignalelements. Weonlyhave
twotypesofdataelements (OsandIs),whichmeansthatagroupofmdataelements
canproduceacombination of2mdatapatterns. Wecanhavedifferent typesofsignal
elements byallowing different signallevels.IfwehaveLdifferent levels,thenwecan
produce Lncombinations ofsignalpatterns. If2m=Ln,theneachdatapatternis
encodedintoonesignalpattern.If2m<Ln,datapatterns occupyonlyasubsetofsignal
patterns. Thesubsetcanbecarefully designed topreventbaseline wandering, topro­
videsynchronization, andtodetecterrorsthatoccurred duringdatatransmission. Data
encoding isnotpossible if2m>Lnbecause someofthedatapatterns cannotbe
encoded.
Thecodedesigners haveclassified thesetypesofcodingasmBnL,wheremisthe
lengthofthebinarypattern,Bmeansbinarydata,nisthelengthofthesignalpattern,
andListhenumberoflevelsinthesignaling. AletterisoftenusedinplaceofL:B
(binary)forL=2,T(ternary) forL=3,andQ(quaternary) forL=4.Notethatthefirst
twolettersdefinethedatapattern,andthesecondtwodefinethesignalpattern.
InmBnLschemes, apatternofmdataelements isencodedasapatternofnsignal
elements inwhich2m::::;Ln.
2BIQThefirstmBnLschemewediscuss,twobinary,onequaternary (2BIQ),uses
datapatternsofsize2andencodesthe2-bitpatternsasonesignalelementbelonging
toafour-level signal.Inthistypeofencoding m=2,n=1,andL=4(quatemary). Fig­
ure4.10showsanexampleofa2B1Qsignal.
Theaveragesignalrateof2BlQisS=N/4.Thismeansthatusing2BIQ,wecan
senddata2timesfasterthanbyusingNRZ-L.However, 2BlQusesfourdifferent sig­
nallevels,whichmeansthereceiver hastodiscernfourdifferent thresholds. The
reducedbandwidth comeswithaprice.Therearenoredundant signalpatternsinthis
schemebecause22=41.
AswewillseeinChapter9,2BIQisusedinDSL(DigitalSubscriber Line)tech­
nologytoprovideahigh-speed connection totheInternetbyusingsubscriber telephone
lines.112CHAPTER 4DIGITAL TRANSMISSION
Figure4.10Multilevel: 2B1Qscheme
Previous level:Previous level:
positive negative
Next Next Next
bits level level
00 +1 -I
01 +3 -3
10 -I +1
II -3 +3
Transition table
2fiNSave=N14
o1/2p
1 \ Bandwidth
0.5
o-me00III0]IHII0]
I I I
I I
I I
I I
I I
ITi I
I
I
I
I I I
I I I,~1+3
-3+1
Assuming positiveoriginallevel
8B6TAveryinteresting schemeiseightbinary,sixternary(8B6T).Thiscodeisused
with100BASE-4T cable,aswewillseeinChapter13.Theideaistoencodeapatternof
8bitsasapatternof6signalelements, wherethesignalhasthreelevels(ternary). Inthis
typeofscheme,wecanhave28=256different datapatternsand36=478different signal
patterns.Themapping tableisshowninAppendix D.Thereare478-256=222redundant
signalelements thatprovidesynchronization anderrordetection. Partoftheredundancy is
alsousedtoprovide DCbalance.Eachsignalpatternhasaweightof0or+1DCvalues.This
meansthatthereisnopatternwiththeweight-1.TomakethewholestreamDc-balanced,
thesenderkeepstrackoftheweight.Iftwogroupsofweight1areencountered oneafter
another,thefirstoneissentasis,whilethenextoneistotallyinvertedtogiveaweightof-1.
Figure4.11showsanexample ofthreedatapatternsencoded asthreesignalpat­
terns.Thethreepossible signallevelsarerepresented as-,0,and+.Thefirst8-bitpat­
tern00010001 isencoded asthesignalpattern-0-0++ withweight0;thesecond8-bit
pattern01010011isencoded as- + - + + 0 withweight+1.Thethirdbitpatternshould
beencoded as+ - - + 0+withweight+1.TocreateDCbalance, thesenderinvertsthe
actualsignal.Thereceivercaneasilyrecognize thatthisisaninverted patternbecause
theweightis-1.Thepatternisinvertedbeforedecoding.
Figure4.11Multilevel: 8B6Tscheme
Time01()10011 OOOIO()O( O!OIOO()() I
I
Inverted:
pattern:o+----.--,--..,.....---l---I-+--I--I----L---r--t----- ..--r-----It---r----..+v
-v
-0-0++ -+-++0 +--+0+SECTION 4.1DIGITAL-TO-DIGITAL CONVERSION 113
Theaveragesignalrateoftheschemeistheoretically Save=!XNX§;inpractice
theminimum bandwidth isverycloseto6N18. 2 8
4D-PAMS Thelastsignaling schemewediscussinthiscategory iscalledfour­
dimensional five-level pulseamplitude modulation (4D-PAM5). The4Dmeansthatdata
issentoverfourwiresatthesametime.Itusesfivevoltagelevels,suchas-2,-1,0,1,and2.
However, onelevel,level0,isusedonlyforforwarderrordetection (discussed inChap­
ter10).Ifweassumethatthecodeisjustone-dimensional, thefourlevelscreatesomething
similarto8B4Q.Inotherwords,an8-bitwordistranslated toasignalelementoffourdiffer­
entlevels.Theworstsignalrateforthisimaginary one-dimensional versionisNX4/8,orN12.
Thetechnique isdesigned tosenddataoverfourchannels (fourwires).Thismeans
thesignalratecanbereducedtoN18,asignificant achievement. All8bitscanbefedintoa
wiresimultaneously andsentbyusingonesignalelement. Thepointhereisthatthefour
signalelements comprising onesignalgrouparesentsimultaneously inafour-dimensional
setting.Figure4.12showstheimaginary one-dimensional andtheactualfour-dimensional
implementation. GigabitLANs(seeChapter13)usethistechnique tosend1-Gbpsdata
overfourcoppercablesthatcanhandle125Mbaud.Thisschemehasalotofredundancy
inthesignalpatternbecause28datapatternsarematched to44=256signalpatterns. The
extrasignalpatternscanbeusedforotherpurposes suchaserrordetection.
Figure4.12Multilevel: 4D-PAM5 scheme
00011110 1Gbps
250Mbps
Wire1(125MBd)
250Mbps
Wire2(125MBd)
+2
+1
250Mbps
Wire3(125MBd)-1
-2
250Mbps
Wire4(125MBd)
Multiline Transmission: MLT-3
NRZ-Ianddifferential Manchester areclassified asdifferential encoding butusetwotransi­
tionrulestoencodebinarydata(noinversion, inversion).Ifwehaveasignalwithmorethan
twolevels,wecandesignadifferential encoding schemewithmorethantwotransition
rules.MLT-3isoneofthem.Themultiline transmission, threelevel(MLT-3) scheme
usesthreelevels(+v,0,and-V)andthreetransition rulestomovebetweenthelevels.
1.Ifthenextbitis0,thereisnotransition.
2.Ifthenextbitis1andthecurrentlevelisnot0,thenextlevelis0.
3.Ifthenextbitis1andthecutTentlevelis0,thenextlevelistheopposite ofthelast
nonzerolevel.114CHAPTER 4DIGITAL TRANSMISSION
Thebehavior ofMLT-3canbestbedescribed bythestatediagramshowninFigure4.13.
Thethreevoltagelevels(-V,0,and+V)areshownbythreestates(ovals).Thetransition
fromonestate(level)toanotherisshownbytheconnecting lines.Figure4.13also
showstwoexamples ofanMLT-3signal.
Figure4.13Multitransition: MLT-3scheme
Last
non-zero non-zero
Nextbit:0level:+Vlevel:-VNextbit:0Nextbit:0
Nextbit:1
c.Transition states:Time
1
I011101111011111I I I I1
+V I I
I I
I IOVr--__---t- --t--+-------j-- _ __+_~
1
OVl----+O---i--r--+v
-v-v
b.Worsecasea.Typicalcase
OnemightwonderwhyweneedtouseMLT-3,aschemethatmapsonebittoone
signalelement. ThesignalrateisthesameasthatforNRZ-I,butwithgreatercomplexity
(threelevelsandcomplex transition rules).Itturnsoutthattheshapeofthesignalinthis
schemehelpstoreducetherequired bandwidth. Letuslookattheworst-case scenario, a
sequence ofIs.Inthiscase,thesignalelementpattern+VO-VOisrepeated every4bits.
Anonperiodicsignalhaschanged toaperiodicsignalwiththeperiodequalto4timesthe
bitduration. Thisworst-case situation canbesimulated asananalogsignalwithafre­
quencyone-fourth ofthebitrate.Inotherwords,thesignalrateforMLT-3isone-fourth
thebitrate.ThismakesMLT-3asuitablechoicewhenweneedtosend100Mbpsona
copperwirethatcannotsupportmorethan32MHz(frequencies abovethislevelcreate
electromagnetic emissions). MLT-3andLANsarediscussed inChapter13.
Summary ofLineCodingSchemes
Wesummarize inTable4.1thecharacteristics ofthedifferent schemes discussed.
Table4.1Summary oflinecodingschemes
Bandwidth
Category Scheme (average) Characteristics
Unipolar NRZ B=N/2 Costly,noself-synchronization iflongOsorIs,DC
NRZ-L B=N/2 Noself-synchronization iflongOsor1s,DC
Unipolar NRZ-I B=N/2 Noself-synchronization forlongaS,DC
Biphase B=N Self-synchronization, noDC,highbandwidthSECTION 4.1DIGITAL-TO-DIGITAL CONVERSION 115
Table4.1Summary oflinecodingschemes (continued)
Bandwidth
Category Scheme (average) Characteristics
Bipolar AMI B=NI2 Noself-synchronization forlongOS,DC
2BIQ B=N/4 Noself-synchronization forlongsamedoublebits
Multilevel 8B6T B=3N/4 Self-synchronization, noDC
4D-PAM5 B=N/8 Self-synchronization, noDC
Multiline MLT-3 B=N/3 Noself-synchronization forlongOs
BlockCoding
Weneedredundancy toensuresynchronization andtoprovidesomekindofinherent
errordetecting. Blockcodingcangiveusthisredundancy andimprove theperfor­
manceoflinecoding.Ingeneral,blockcodingchangesablockofmbitsintoablock
ofnbits,wherenislargerthanm.BlockcodingisreferredtoasanmB/nBencoding
technique.
Blockcodingisnormally referred toasmBlnBcoding;
itreplaces each m~bitgroupwithann~bitgroup.
Theslashinblockencoding (forexample, 4B/5B)distinguishes blockencoding
frommultilevel encoding (forexample, 8B6T),whichiswrittenwithoutaslash.Block
codingnormally involves threesteps:division, substitution, andcombination. Inthe
divisionstep,asequence ofbitsisdividedintogroupsofmbits.Forexample, in4B/5B
encoding, theoriginalbitsequence isdividedinto4-bitgroups.Theheartofblockcod­
ingisthesubstitution step.Inthisstep,wesubstitute anm-bitgroupforann-bitgroup.
Forexample, in4B/5Bencoding wesubstitute a4-bitcodefora5-bitgroup.Finally,
then-bitgroupsarecombined togethertoformastream.Thenewstreamhasmorebits
thantheoriginalbits.Figure4.14showstheprocedure.
Figure4.14Blockcodingconcept
Division ofastreamintom-bitgroups
mbits mbits mbits
[110"'111000'''11 •••1010'''11
11
m&-to-nB
substitution
Jl
1010"'10111000'''00 11...1°11''.1111
nbits nbits nbits
Combining n-bitgroupsintoastream116CHAPTER 4DIGITAL TRANSMISSION
4B/5B
Thefourbinary/five binary(4B/5B)codingschemewasdesigned tobeusedincom­
bination withNRZ-I.RecallthatNRZ-Ihasagoodsignalrate,one-half thatofthe
biphase, butithasasynchronization problem. Alongsequence ofascanmakethe
receiverclocklosesynchronization. Onesolutionistochangethebitstream,priorto
encoding withNRZ-I,sothatitdoesnothavealongstreamofas.The4B/5Bscheme
achieves thisgoal.Theblock-codedstreamdoesnothavemore that threeconsecutive
as,aswewillseelater.Atthereceiver, theNRZ-Iencoded digitalsignalisfirst
decoded intoastreamofbitsandthendecoded toremovetheredundancy. Figure4.15
showstheidea.
Figure4.15Usingblockcoding4B/5BwithNRZ-Ilinecodingscheme
Sender Receiver
Digitalsignal
--::Ft:F-
Link
In4B/5B,the5-bitoutputthatreplacesthe4-bitinputhasnomorethanoneleading
zero(leftbit)andnomorethantwotrailingzeros(rightbits).Sowhendifferent groups
arecombined tomakeanewsequence, therearenevermorethanthreeconsecutive as.
(NotethatNRZ-Ihasnoproblem withsequences ofIs.)Table4.2showsthecorre­
sponding pairsusedin4B/5Bencoding. Notethatthefirsttwocolumns paira4-bit
groupwitha5-bitgroup.Agroupof4bitscanhaveonly16different combinations
whileagroupof5bitscanhave32different combinations. Thismeansthatthereare16
groupsthatarenotusedfor4B/5Bencoding. Someoftheseunusedgroupsareusedfor
controlpurposes; theothersarenotusedatall.Thelatterprovideakindoferrordetec­
tion.Ifa5-bitgrouparrivesthatbelongstotheunusedportionofthetable,thereceiver
knowsthatthereisanerrorinthetransmission.
Table4.24B/5Bmapping codes
DataSequence Encoded Sequence ControlSequence Encoded Sequence
0000 11110 Q(Quiet) 00000
0001 01001 I(Idle) 11111
0010 10100 H(Halt) 00100
0011 10101 J(Startdelimiter) 11000
0100 01010 K(Startdelimiter) 10001
0101 01011 T(Enddelimiter) 01101SECTION 4.1DIGITAL-TO-DIGITAL CONVERSION 117
Table4.24B/5Bmapping codes(continued)
DataSequence Encoded Sequence ControlSequence Encoded Sequence
0110 01110 S(Set) 11001
0111 01111 R(Reset) 00111
1000 10010
1001 10011
1010 10110
1011 10111
1100 11010
1101 11011
1110 11100
1111 11101
Figure4.16showsanexampleofsubstitution in4B/5Bcoding.4B/5Bencoding
solvestheproblemofsynchronization andovercomes oneofthedeficiencies ofNRZ-1.
However, weneedtoremember thatitincreases thesignalrateofNRZ-1.Theredun­
dantbitsadd20percentmorebaud.Still,theresultislessthanthebiphasescheme
whichhasasignalrateof2timesthatofNRZ-1.However, 4B/5Bblockencoding does
notsolvetheDCcomponent problemofNRZ-1.IfaDCcomponent isunacceptable, we
needtousebiphaseorbipolarencoding.
Figure4.16Substitution in48/5Bblockcoding
4-bitblocks
I1111I•••I000III00001
I
11111~l11110I
LI11101
': "0'I
oooo~r
5-bitblocks
Example 4.5
Weneedtosenddataata1-Mbpsrate.Whatistheminimum required bandwidth, usingacombi­
nationof4B/5BandNRZ-IorManchester coding?
Solution
First4B/5Bblockcodingincreases thebitrateto1.25Mbps.Theminimum bandwidth using
NRZ-IisNI2or625kHz.TheManchester schemeneedsaminimum bandwidth of1MHz.The
firstchoiceneedsalowerbandwidth, buthasaDCcomponent problem; thesecondchoiceneeds
ahigherbandwidth, butdoesnothaveaDCcomponent problem.118CHAPTER 4DIGITAL TRANSMISSION
8RIlOR
Theeightbinary/ten binary(SBIlOB) encoding issimilarto4B/5Bencoding except
thatagroupof8bitsofdataisnowsubstituted byalO-bitcode.Itprovides greater
errordetection capability than4B/5B.The8BIlOBblockcodingisactuallyacombina­
tionof5B/6Band3B/4Bencoding, asshowninFigure4.17.
Figure4.178B/lOBblockencoding
8B/IOBencoder
8-bitblock&-+--+-IO-bit block
Themostfivesignificant bitsofa10-bitblockisfedintothe5B/6Bencoder; the
least3significant bitsisfedintoa3B/4Bencoder. Thesplitisdonetosimplify the
mapping table.Topreventalongrunofconsecutive OsorIs,thecodeusesadisparity
controller whichkeepstrackofexcessOsoverIs(orIsoverOs).Ifthebitsinthecur­
rentblockcreateadisparity thatcontributes totheprevious disparity (eitherdirection),
theneachbitinthecodeiscomplemented (a0ischangedtoa 1anda 1ischangedtoa0).
Thecodinghas210-28=768redundant groupsthatcanbeusedfordisparity checking
anderrordetection. Ingeneral,thetechnique issuperior to4B/5Bbecauseofbetter
built-inerror-checking capability andbettersynchronization.
Scramblin~
Biphaseschemes thataresuitable for dedicated linksbetweenstationsinaLANarenot
suitableforlong-distance communication becauseoftheirwidebandwidth requirement.
Thecombination ofblockcodingandNRZlinecodingisnotsuitableforlong-distance
encoding either,becauseoftheDCcomponent. BipolarAMIencoding, ontheother
hand,hasanarrowbandwidth anddoesnotcreateaDCcomponent. However, along
sequence ofOsupsetsthesynchronization. Ifwecanfindawaytoavoidalongsequence
ofOsintheoriginalstream,wecanusebipolarAMIforlong distances. Wearelooking
foratechnique thatdoesnotincreasethenumberofbitsanddoesprovidesynchroniza­
tion.Wearelookingforasolutionthatsubstitutes longzero-level pulseswithacombi­
nationofotherlevelstoprovidesynchronization. Onesolutioniscalledscrambling. We
modifypartoftheAMIruletoincludescrambling, asshowninFigure4.18.Notethat
scrambling, asopposed toblockcoding,isdoneatthesametimeasencoding. The
systemneedstoinserttherequired pulsesbasedonthedefinedscrambling rules.Two
common scrambling techniques areB8ZSandHDB3.
R8ZS
Bipolar withS-zerosubstitution (BSZS)iscommonly usedinNorthAmerica. In
thistechnique, eightconsecutive zero-level voltages arereplaced bythesequenceSECTION 4.1DIGITAL-TO-DIGITAL CONVERSION 119
Figure4.18AMIusedwithscrambling
Sender Receiver
Violated digitalsignal
--=ftF-
OOOVBOVB. TheVinthesequence denotesviolation; thisisanonzero voltagethat
breaksanAMIruleofencoding (opposite polarityfromtheprevious). TheBinthe
sequence denotesbipolm;whichmeansanonzerolevelvoltageinaccordance withthe
AMIrule.Therearetwocases,asshowninFigure4.19.
Figure4.19TwocasesofB8ZSscrambling technique
I000000 0~:i::: ~~i,'":
t"jtI'tj11
1tI IBI IVI':1
I{II 11010101 0 I
a.Previous levelispositive. b.Previous levelisnegative.
Notethatthescrambling inthiscasedoesnotchangethebitrate.Also,thetech­
niquebalances thepositiveandnegative voltagelevels(twopositives andtwonega­
tives),whichmeansthattheDCbalanceismaintained. Notethatthesubstitution may
changethepolarityofa 1because, afterthesubstitution, AMIneedstofollowitsrules.
B8ZSsubstitutes eightconsecutive zeroswithOOOVBOVB.
Onemorepointisworthmentioning. TheletterV(violation) orB(bipolar) here is
relative.TheVmeansthesamepolarityasthepolarityoftheprevious nonzero pulse; B
meansthepolarityoppositetothepolarityoftheprevious nonzeropulse.
HDB3
High-density bipolar3-zero(HDB3)iscommonly usedoutsideofNorthAmerica. Inthis
technique, whichismoreconservative thanB8ZS,fourconsecutive zero-level voltagesare
replacedwithasequence ofOOOVorBOO\:Thereasonfortwodifferentsubstitutions isto120CHAPTER 4DIGITAL TRANSMISSION
maintain theevennumberofnonzeropulsesaftereachsubstitution. Thetworulescanbe
statedasfollows:
1.Ifthenumberofnonzeropulsesafterthelastsubstitution isodd,thesubstitution
patternwillbeOOOV,whichmakesthetotalnumberofnonzeropulseseven.
2.Ifthenumberofnonzeropulsesafterthelastsubstitution iseven,thesubstitution
patternwillbeBOOV,whichmakesthetotalnumberofnonzeropulseseven.
Figure4.20showsanexample.
Figure4.20Different situations inHDB3scrambling technique
First
substitutionSecond Third
substitution substitution
t
Event t
EvenOdd Even Even
Thereareseveralpointsweneedtomentionhere.First,beforethefirstsubstitu­
tion,thenumberofnonzeropulsesiseven,sothefirstsubstitution isBODY.Afterthis
substitution, thepolarityofthe1bitischanged becausetheAMIscheme, aftereach
substitution, mustfollowitsownrule.Afterthisbit,weneedanothersubstitution,
whichisOOOVbecausewehaveonlyonenonzeropulse(odd)afterthelastsubstitution.
Thethirdsubstitution isBOOVbecausetherearenononzeropulsesafterthesecond
substitution (even).
HDB3substitutes fourconsecutive zeroswithOOOVorBOOVdepending
onthenumberofnonzeropulsesafterthelastsubstitution.
4.2ANALOG- TO-DIGITAL CONVERSION
Thetechniques described inSection4.1convertdigitaldatatodigitalsignals.Some­
times,however, wehaveananalogsignalsuchasonecreatedbyamicrophone orcam­
era.WehaveseeninChapter3thatadigitalsignalissuperiortoananalogsignal.The
tendency todayistochangeananalogsignaltodigitaldata.Inthissectionwedescribe
twotechniques, pulsecodemodulation anddeltamodulation. Afterthedigitaldataare
created(digitization), wecanuseoneofthetechniques described inSection4.1tocon­
vertthedigitaldatatoadigitalsignal.SECTION 4.2ANALOG-TO-DIGITAL CONVERSION 121
PulseCodeModulation (PCM)
Themostcommon technique tochangeananalogsignaltodigitaldata(digitization)
iscalledpulsecodemodulation (PCM).APCMencoderhasthreeprocesses, asshown
inFigure4.21.
Figure4.21Components ofPCMencoder
Quantized signal
~'-'-T
!.•··1······:ti~'i
t=lJl::I::=t=J;.:;=~,
peMencoder
~.HSampling;IQuantizingJ- EncodingJ411"'11°°1
Digitaldata
Analogsignal
tuL I.II.,
PAMsignal
1.Theanalogsignalissampled.
2.Thesampledsignalisquantized.
3.Thequantized valuesareencodedasstreamsofbits.
Sampling
ThefirststepinPCMissampling. TheanalogsignalissampledeveryTss,whereTsis
thesampleintervalorperiod.Theinverseofthesampling intervaliscalledthesam­
plingrateorsampling frequency anddenotedbyis,whereis=IITs'Therearethree
sampling methods-ideal, natural,andflat-top-as showninFigure4.22.
Inideal sampling, pulsesfromtheanalogsignalaresampled. Thisisanidealsam­
plingmethodandcannotbeeasilyimplemented. Innaturalsampling, ahigh-speed
switchisturnedonforonlythesmallperiodoftimewhenthesampling occurs.The
resultisasequence ofsamplesthatretainstheshapeoftheanalogsignal.Themost
common sampling method,calledsampleandhold,however, createsflat-topsamples
byusingacircuit.
Thesampling processissometimes referredtoaspulseamplitude modulation
(PAM).Weneedtoremember, however, thattheresultisstillananalogsignalwith
nonintegral values.
Sampling RateOneimportant consideration isthesampling rateorfrequency. What
aretherestrictions onTs?Thisquestionwaselegantly answered byNyquist.According
totheNyquisttheorem, toreproduce theoriginalanalogsignal,onenecessary condition
isthatthesampling ratebeatleasttwicethehighestfrequency intheoriginalsignal.122 CHAPTER 4DIGITAL TRANSMISSION
Figure4.22Threedifferent sampling methodsforPCM
Amplitude Amplitude
,~Analog signal
...
"~s
a.Idealsampling
Amplitude
c.Flat-top samplingTime
b.Naturalsampling/Analogsignal
...
According totheNyquisttheorem, thesampling ratemustbe
atleast2timesthehighestfrequency contained inthesignal.
Weneedtoelaborate onthetheorem atthispoint.First,wecansampleasignal
onlyifthesignalisband-limited. Inotherwords,asignalwithaninfinitebandwidth
cannotbesampled. Second,thesampling ratemustbeatleast2timesthehighestfre­
quency,notthebandwidth. Iftheanalogsignalislow-pass, thebandwidth andthe
highestfrequency arethesamevalue.Iftheanalogsignalisbandpass, thebandwidth
valueislowerthanthevalueofthemaximum frequency. Figure4.23showsthevalue
ofthesampling ratefortwotypesofsignals.
Figure4.23Nyquistsampling rateforlow-pass andbandpass signals-------------------------------------
Amplitude
Nyquistrate=2xfm"x
Low-pass signal
frnin
Amplitude
oNyquistrate=2 xfmax
Bandpass signal
fminfmaxFrequency
FrequencySECTION 4.2ANALOG-TO-DIGITAL CONVERSION 123
Example 4.6
ForanintuitiveexampleoftheNyquisttheorem, letussampleasimplesinewaveatthreesam­
plingrates:fs=4f(2timestheNyquist rate)'/s=2f(Nyquist rate),andfs=f(one-half the
Nyquistrate).Figure4.24showsthesampling andthesubsequent recovery ofthesignal.
Figure4.24Recovery ofasampled sinewavefordifferent sampling rates
,,,,,.,
¥,,,,,
'".'a.Nyquistratesampling:fs=2f
b.Oversampling:fs=4f•,.,.,.,..
,.,
,.,,,'•,.,.,.,.,.
",.
;,,,•,.,.,.,.,
•,,,,,,,,
c.Undersampling: fs=f.....,
"
'.....'
Itcanbeseenthatsampling attheNyquistratecancreateagoodapproximation oftheorig­
inalsinewave(parta).Oversampling inpartbcanalsocreatethesameapproximation, butitis
redundant andunnecessary. Sampling belowtheNyquistrate(partc)doesnotproduceasignal
thatlooksliketheoriginalsinewave.
Example 4.7
Asaninteresting example, letusseewhathappensifwesampleaperiodiceventsuchastherevolu­
tionofahandofaclock.Thesecondhandofaclockhasaperiodof60s.According totheNyquist
theorem, weneedtosamplethehand(takeandsendapicture)every30s(Ts=~Torfs=2f).In
Figure4.25a,thesamplepoints,inorder,are12,6,12,6,12,and6.Thereceiverofthesamples
cannottelliftheclockismovingforwardorbackward. Inpartb,wesampleatdoubletheNyquist
rate(every15s).Thesamplepoints,inorder,are12,3,6,9,and12.Theclockismovingforward.
Inpartc,wesamplebelowtheNyquistrate(Ts=~Torfs=~f).Thesamplepoints,inorder,are12,
9,6,3,and12.Although theclockismovingforward, thereceiverthinksthattheclockismoving
backward.124CHAPTER 4DIGITAL TRANSMISSION
Figure4.25Sampling ofaclockwithonlyonehand
a.Sampling atNyquistrate:Ts=!T
rnG2
~~rn
U9:-3
\JY~U
b.Oversampling (aboveNyquistrate):Ts=~T
rn~~~rn
ug\J)~U
c.Undersampling (belowNyquistrate):Ts=~TSamples canmeanthat
theclockismoving
eitherforwardor
backward.
(12-6-12-6-12)
Samples showclock
ismovingforward.
(12·3-6-9-12)
Samples showclock
ismovingbackward.
(12-9-6-3-12)
Example 4.8
AnexamplerelatedtoExample 4.7istheseemingly backward rotationofthewheelsofaforward­
movingcarinamovie.Thiscanbeexplained byundersampling. Amovieisfilmedat24frames
persecond.Ifawheelisrotatingmorethan12timespersecond,theundersampling createsthe
impression ofabackward rotation.
Example 4.9
Telephone companies digitizevoicebyassuming amaximum frequency of4000Hz.Thesam­
plingratetherefore is8000samplespersecond.
Example 4.10
Acomplex low-pass signalhasabandwidth of200kHz.Whatistheminimum sampling ratefor
thissignal?
Solution
Thebandwidth ofalow-pass signalisbetween0andj,wherefisthemaximum frequency inthe
signal.Therefore, wecansamplethissignalat2timesthehighestfrequency (200kHz).Thesam­
plingrateistherefore 400,000samplespersecond.
Example 4.1J
Acomplex bandpass signalhasabandwidth of200kHz.Whatistheminimum sampling ratefor
thissignal?SECTION 4.2ANALOG-TO-DIGITAL CONVERSION 125
Solution
Wecannotfindtheminimum sampling rateinthiscasebecausewedonotknowwheretheband­
widthstartsorends.Wedonotknowthemaximum frequency inthesignal.
Quantization
Theresultofsampling isaseriesofpulseswithamplitude valuesbetween themaxi­
mumandminimum amplitudes ofthesignal.Thesetofamplitudes canbeinfinitewith
nonintegral valuesbetweenthetwolimits.Thesevaluescannotbeusedintheencoding
process.Thefollowing arethestepsinquantization:
1.Weassumethattheoriginalanalogsignalhasinstantaneous amplitudes between
VminandVmax'
2.WedividetherangeintoLzones,eachofheight ~(delta).
Vmax-Vrnin~=-==-:::--=L
3.Weassignquantized valuesof0toL-Itothemidpoint ofeachzone.
4.Weapproximate thevalueofthesampleamplitude tothequantized values.
Asasimpleexample, assumethatwehaveasampled signalandthesampleampli­
tudesarebetween-20and+20V.Wedecidetohaveeightlevels(L=8).Thismeans
that~=5V.Figure4.26showsthisexample.
Figure4.26Quantization andencoding ofasampled signal
Quantization Normalized
codes amplitude
746.19.7
36.
526.
7.511.0
-5.5
Ol--------L...---L...------lL...-----''------,,---,-----,-----,_1,1Time
-6,0
-9.4-11.3'-6.-6.1
-26.2
-36.
-4.11
Normalized -1.22
PAMvalues
Normalized -1.50
quantized values1.50 3.24 3.94 2.20-1.10 -2.26 -1.88 -1.20
1.50 3.50 3.50 2.50-1.50 -2.50 -1.50 -1.50
Normalized -0.38
erroro+0.26 -0.44 +0.30 -0.40 -0.24 +0.38 -0.30
Quantization code 2 5 7 7 6 2 2 2
Encoded words 010 101 111 111 110 010 001 010ow126CHAPTER 4DIGITAL TRANSMISSION
Wehaveshownonlyninesamples usingidealsampling (forsimplicity). The
valueatthetopofeachsampleinthegraphshowstheactualamplitude. Inthechart,
thefirstrowisthenormalized valueforeachsample(actualamplitude/.:1). Thequan­
tizationprocessselectsthequantization valuefromthemiddleofeachzone.This
meansthatthenormalized quantized values(secondrow)aredifferent fromthenor­
malizedamplitudes. Thedifference iscalledthenormalized error(thirdrow).The
fourthrowisthequantization codeforeachsamplebasedonthequantization levels
attheleftofthegraph.Theencoded words(fifthrow)arethefinalproducts ofthe
conversion.
Quantization Levels Intheprevious example, weshowedeightquantization levels.
ThechoiceofL,thenumberoflevels,depends ontherangeoftheamplitudes ofthe
analogsignalandhowaccurately weneedtorecoverthesignal.Iftheamplitude ofa
signalfluctuates between twovaluesonly,weneedonlytwolevels;ifthesignal,like
voice,hasmanyamplitude values,weneedmorequantization levels.Inaudiodigitiz­
ing,Lisnormally chosentobe256;invideoitisnormally thousands. Choosing
lowervaluesofLincreases thequantization errorifthereisalotoffluctuation inthe
signal.
Quantization ErrorOneimportant issueistheerrorcreatedinthequantization pro­
cess.(Later,wewillseehowthisaffectshigh-speed modems.) Quantization isan
approximation process.Theinputvaluestothequantizer aretherealvalues;theoutput
valuesaretheapproximated values.Theoutputvaluesarechosentobethemiddle
valueinthezone.Iftheinputvalueisalsoatthemiddleofthezone,thereisnoquanti­
zationerror;otherwise, thereisanerror.Intheprevious example, thenormalized
amplitude ofthethirdsampleis3.24,butthenormalized quantized valueis3.50.This
meansthatthereisanerrorof+0.26.Thevalueoftheerrorforanysampleislessthan
.:112.Inotherwords,wehave-.:112-::;;error-::;;.:112.
Thequantization errorchangesthesignal-to-noise ratioofthesignal,whichinturn
reducestheupperlimitcapacityaccording toShannon.
Itcanbeproventhatthecontribution ofthequantization errortotheSNRdBof
thesignaldependsonthenumberofquantization levelsL,orthebitspersamplenb'as
showninthefollowing formula:
SNRdB=6.02nb+1.76dB
Example 4.12
WhatistheSNRdBintheexampleofFigure4.26?
Solution
Wecanusetheformulatofindthequantization. Wehaveeightlevelsand3bitspersample,so
SNRdB=6.02(3)+1.76=19.82dB.Increasing thenumberoflevelsincreases theSNR.
Example 4.13
Atelephone subscriber linemusthaveanSN~Babove40.Whatistheminimum numberofbits
persample?SECTION 4.2ANALOG-TO-DIGITAL CONVERSION 127
Solution
Wecancalculate thenumberofbitsas
SN~:::: 6.02nb+1.76::::40.....n::::6.35
Telephone companies usuallyassign7or8bitspersample.
Uniform VersusNonuniform Quantization Formanyapplications, thedistribu­
tionoftheinstantaneous amplitudes intheanalogsignalisnotuniform. Changes in
amplitude oftenoccurmorefrequently intheloweramplitudes thaninthehigher
ones.Forthesetypesofapplications itisbettertousenonuniform zones.Inother
words,theheightof~isnotfixed;itisgreaterneartheloweramplitudes andless
nearthehigheramplitudes. Nonuniform quantization canalsobeachieved byusinga
processcalledcompanding andexpanding. Thesignaliscompanded atthesender
beforeconversion; itisexpanded atthereceiverafterconversion. Companding means
reducing theinstantaneous voltageamplitude forlargevalues;expanding istheoppo­
siteprocess. Companding givesgreaterweighttostrongsignalsandlessweightto
weakones.Ithasbeenprovedthatnonuniform quantization effectively reducesthe
SNRdBofquantization.
Encoding
ThelaststepinPCMisencoding. Aftereachsampleisquantized andthenumberof
bitspersampleisdecided, eachsamplecanbechangedtoanllb-bitcodeword.InFig­
ure4.26theencoded wordsareshowninthelastrow.Aquantization codeof2is
encoded as010;5isencoded as101;andsoon.Note that thenumberofbitsforeach
sampleisdetermined fromthenumberofquantization levels.Ifthenumberofquanti­
zationlevelsisL,thenumberofbitsisllb=log2L.Inourexample Lis8andllbis
therefore 3.Thebitratecanbefoundfromtheformula
Bitrate::::sampling ratexnumberofbitspersample::::isxnb
Example 4.14
Wewanttodigitizethehumanvoice.Whatisthebitrate,assuming 8bitspersample?
Solution
Thehumanvoicenormally containsfrequencies from0to4000Hz.Sothesampling rateandbit
ratearecalculated asfollows:
Sampling rate::::4000x 2::::8000samples/s
Bitrate==8000x 8::::64,000bps==64kbps
Original SignalRecovery
Therecovery oftheoriginalsignalrequires thePCMdecoder. Thedecoderfirstuses
circuitry toconvertthecodewordsintoapulsethatholdstheamplitude untilthenext
pulse.Afterthestaircase signaliscompleted, itispassedthroughalow-pass filterto128CHAPTER 4DIGITAL TRANSMISSION
smooththestaircase signalintoananalogsignal.Thefilterhasthesamecutofffre­
quencyastheoriginalsignalatthesender.Ifthesignalhasbeensampled at(or
greaterthan)theNyquistsampling rateandifthereareenoughquantization levels,
theoriginalsignalwillberecreated. Notethatthemaximum andminimum valuesof
theoriginalsignalcanbeachieved byusingamplification. Figure4.27showsthe
simplified process.
Figure4.27Components ofaPCMdecoder
Amplitude
~TI~'
PCMdecoder
AmplitudeAnalogsignal"%'
Makeand.........,
!lloool100r-'.-+Low-pass '.connect ",Timefilter' ,
samples,.
Digitaldata , ,,..',-.-..,
PCMBandwidth
Supposewearegiventhebandwidth ofalow-pass analogsignal.Ifwethendigitizethe
signal,whatisthenewminimum bandwidth ofthechannelthatcanpassthisdigitized
signal?Wehavesaidthattheminimum bandwidth ofaline-encoded signalisBmin=ex
Nx(lIr).Wesubstitute thevalueofNinthisformula:
111Bmin=cxNx -=cXnbxisx -=c xnbx 2 xBanalogx -r r r
WhenlIr=I(foraNRZorbipolarsignal)andc=(12)(theaveragesituation), the
minimum bandwidth is
Thismeanstheminimum bandwidth ofthedigitalsignalisnbtimesgreaterthanthe
bandwidth oftheanalogsignal.Thisisthepricewepayfordigitization.
Example 4.15
Wehavealow-pass analog signal of4kHz.Ifwesendtheanalogsignal,weneedachannelwith
aminimum bandwidth of4kHz.Ifwedigitizethesignalandsend8bitspersample,weneeda
channelwithaminimum bandwidth of8X4kHz=32kHz.SECTION 4.2ANALOG-TO-DIGITAL CONVERSION 129
Maximum DataRateofaChannel
InChapter3,wediscussed theNyquisttheorem whichgivesthedatarateofachannel
asNmax=2 xBxlog2L.WecandeducethisratefromtheNyquistsampling theorem
byusingthefollowing arguments.
1.Weassumethattheavailable channelislow-pass withbandwidth B.
2.WeassumethatthedigitalsignalwewanttosendhasLlevels,whereeachlevelis
asignalelement. Thismeansr=1/10g2L.
3.Wefirstpassthedigitalsignalthroughalow-pass filtertocutoffthefrequencies
aboveBHz.
4.Wetreattheresulting signalasananalogsignalandsampleitat2 xBsamplesper
secondandquantize itusingLlevels.Additional quantization levelsareuseless
becausethesignaloriginally hadLlevels.
S.Theresulting bitrateisN=fsxnb=2 xBxlog2L.Thisisthemaximum band­
width;ifthecasefactorcincreases, thedatarateisreduced.
Nmax:::::2xBxlogzLbps
Minimum Required Bandwidth
Theprevious argument cangiveustheminimum bandwidth ifthedatarateandthe
numberofsignallevelsarefixed.Wecansay
B.=NHz
mm2xlogzL
DeltaModulation (DM)
PCMisaverycomplex technique. Othertechniques havebeendeveloped toreduce
thecomplexity ofPCM.Thesimplest isdeltamodulation. PCMfindsthevalueofthe
signalamplitude foreachsample;DMfindsthechangefromtheprevious sample.Fig­
ure4.28showstheprocess. Notethattherearenocodewordshere;bitsaresentone
afteranother.
Figure4.28Theprocessofdeltamodulation
Amplitude
~.oT
?enerated 1_~_1 1_1Timebmarydata. 0 0 0 0 0 0 .130CHAPTER 4DIGITAL TRANSMISSION
Modulator
Themodulator isusedatthesendersitetocreateastreamofbitsfromananalogsignal.
Theprocessrecordsthesmallpositiveornegative changes, calleddeltaO.Ifthedeltais
positive, theprocessrecordsaI;ifitisnegative, theprocessrecordsaO.However, the
processneedsabaseagainstwhichtheanalogsignaliscompared. Themodulator
buildsasecondsignalthatresembles astaircase. Findingthechangeisthenreducedto
comparing theinputsignalwiththegradually madestaircase signal.Figure4.29shows
adiagramoftheprocess.
Figure4.29Deltamodulation components
OMmodulator
DigitaldataAnalogsignalt~ I---+---~c at...-----.-+-~ I I•..I100 ~.. ompraor
Themodulator, ateachsampling interval, compares thevalueoftheanalogsignal
withthelastvalueofthestaircase signal.Iftheamplitude oftheanalogsignalislarger,
thenextbitinthedigitaldatais1;otherwise, itisO.Theoutputofthecomparator, how­
ever,alsomakesthestaircase itself.IfthenextbitisI,thestaircase makermovesthe
lastpointofthestaircase signal0up;itthenextbitis0,itmovesit0down.Notethatwe
needadelayunittoholdthestaircase functionforaperiodbetweentwocomparisons.
Demodulator
Thedemodulator takesthedigitaldataand,usingthestaircase makerandthedelay
unit,createstheanalogsignal.Thecreatedanalogsignal,however, needstopass
throughalow-pass filterforsmoothing. Figure4.30showstheschematic diagram.
Figure4.30Deltademodulation components
OMdemodulator
11"'1100
Digitaldata
AnalogsignalSECTION 4.3TRANSMISSION MODES 131
Adaptive DA1
Abetterperformance canbeachieved ifthevalueof0isnotfixed.Inadaptive delta
modulation, thevalueof0changesaccording totheamplitude oftheanalogsignal.
Quantization Error
ItisobviousthatDMisnotperfect.Quantization errorisalwaysintroduced inthepro­
cess.Thequantization errorofDM,however, ismuchlessthanthatforPCM.
4.3TRANSMISSION MODES
Ofprimaryconcernwhenweareconsidering thetransmission ofdatafromonedevice
toanotheristhewiring,andofprimaryconcernwhenweareconsidering thewiringis
thedatastream.Dowesend1bitatatime;ordowegroupbitsintolargergroupsand,
ifso,how?Thetransmission ofbinarydataacrossalinkcanbeaccomplished ineither
parallelorserialmode.Inparallelmode,multiple bitsaresentwitheachclocktick.
Inserialmode,1bitissentwitheachclocktick.Whilethereisonlyonewaytosend
paralleldata,therearethreesubclasses ofserialtransmission: asynchronous, synchro­
nous,andisochronous (seeFigure4.31).
Figure4.31Datatransmission andmodes
Datatransmission
ParallelTransmission
Binarydata,consisting ofIsandOs,maybeorganized intogroupsofnbitseach.
Computers produceandconsume dataingroupsofbitsmuchasweconceive ofanduse
spokenlanguage intheformofwordsratherthanletters.Bygrouping, wecansend
datanbitsatatimeinsteadof1.Thisiscalledparalleltransmission.
Themechanism forparalleltransmission isaconceptually simpleone:Usenwires
tosendnbitsatonetime.Thatwayeachbithasitsownwire,andallnbitsofone
groupcanbetransmitted witheachclocktickfromonedevicetoanother.Figure4.32
showshowparalleltransmission worksforn=8.Typically, theeightwiresarebundled
inacablewithaconnector ateachend.
Theadvantage ofparalleltransmission isspeed.Allelsebeingequal,parallel
transmission canincreasethetransferspeedbyafactorofnoverserialtransmission.132CHAPTER 4DIGITAL TRANSMISSION
Figure4.32Paralleltransmission
The8bitsaresenttogether
,--"j/ ,/'-,.
Iv\ I\
f<I\1
<1I
SenderIvI Receiver
Ivj
vI\ \
<I A'\/ \'::/ //"-J
Weneedeightlines
Butthereisasignificant disadvantage: cost.Paralleltransmission requiresncommuni­
cationlines(wiresintheexample) justtotransmit thedatastream.Because thisis
expensive, paralleltransmission isusuallylimitedtoshortdistances.
SerialTransmission
Inserialtransmission onebitfollowsanother, soweneedonlyonecommunica­
tionchannelratherthanntotransmitdatabetween twocommunicating devices(see
Figure4.33).
Figure4.33Serialtransmission
Weneedonly
oneline(wire).o
1
1
Sender 0oo
1oThe8bitsaresent
oneafteranother.o
1
o00010 1
-1-----------+1 gReceiver
o
1o
Parallel/serial
converterSerial/parallel
converter
Theadvantage ofserialoverparalleltransmission isthatwithonlyonecommuni­
cationchannel, serialtransmission reducesthecostoftransmission overparallelby
roughlyafactorofn.
Sincecommunication withindevicesisparallel,conversion devicesarerequiredat
theinterface between thesenderandtheline(parallel-to-serial) andbetween theline
andthereceiver(serial-to-parallel).
Serialtransmission occursinoneofthreeways:asynchronous, synchronous, and
isochronous.SECTION 4.3TRANSMISSION MODES 133
Asynchronous Transmission
Asynchronous transmission issonamedbecausethetimingofasignalisunimportant.
Instead,information isreceivedandtranslated byagreeduponpatterns.Aslongasthose
patternsarefollowed, thereceiving devicecanretrievetheinformation withoutregard
totherhythminwhichitissent.Patternsarebasedongrouping thebitstreaminto
bytes.Eachgroup,usually8bits,issentalongthelinkasaunit.Thesendingsystem
handleseachgroupindependently, relayingittothelinkwhenever ready,withoutregard
toatimer.
Withoutsynchronization, thereceivercannotusetimingtopredictwhenthenext
groupwillarrive.Toalertthereceivertothearrivalofanewgroup,therefore, anextra
bitisaddedtothebeginning ofeachbyte.Thisbit,usuallya0,iscalledthestartbit.
Toletthereceiverknowthatthebyteisfinished, 1ormoreadditional bitsareappended
totheendofthebyte.Thesebits,usuallyIs,arecalledstopbits.Bythismethod,each
byteisincreased insizetoatleast10bits,ofwhich8bitsisinformation and2bitsor
morearesignalstothereceiver. Inaddition, thetransmission ofeachbytemaythenbe
followed byagapofvaryingduration. Thisgapcanberepresented eitherbyanidle
channelorbyastreamofadditional stopbits.
Inasynchronous transmission, wesend1startbit(0)atthebeginning and1ormore
stopbits(Is)attheendofeachbyte.Theremaybeagapbetweeneach byte.
Thestartandstopbitsandthegapalertthereceivertothebeginning andendof
eachbyteandallowittosynchronize withthedatastream.Thismechanism iscalled
asynchronous because, atthebytelevel,thesenderandreceiverdonothavetobesyn­
chronized. Butwithineachbyte,thereceiver must still besynchronized with the
incoming bitstream.Thatis,somesynchronization isrequired, butonlyforthedura­
tionofasinglebyte.Thereceiving deviceresynchronizes attheonsetofeachnewbyte.
Whenthereceiverdetectsastartbit,itsetsatimerandbeginscounting bitsasthey
comein.Afternbits,thereceiverlooksforastopbit.Assoonasitdetectsthestopbit,
itwaitsuntilitdetectsthenextstartbit.
Asynchronous heremeans"asynchronous atthebytelevel;'
butthebitsarestillsynchronized; theirdurations arethesame.
Figure4.34isaschematic illustration ofasynchronous transmission. Inthisexam­
ple,thestartbitsareas,thestopbitsare1s,andthegapisrepresented byanidleline
ratherthanbyadditional stopbits.
Theaddition ofstopandstartbitsandtheinsertion ofgapsintothebitstream
makeasynchronous transmission slowerthanformsoftransmission thatcanoperate
withouttheadditionofcontrolinformation. Butitischeapandeffective, twoadvan­
tagesthatmakeitanattractive choiceforsituations suchaslow-speed communication.
Forexample, theconnection ofakeyboard toacomputer isanaturalapplication for
asynchronous transmission. Ausertypesonlyonecharacter atatime,typesextremely
slowlyindataprocessing terms,andleavesunpredictable gapsoftimebetween each
character.134CHAPTER 4DIGITAL TRANSMISSION
Figure4.34Asynchronous transmission
Direction offlow
"or~n",~rtbit
~1'_111l1011 0
Sender
01101I0I@j1111101 10W000101 11011111
~~ r~~
Gapsbetween
dataunitsReceiver
Synchronous Transmission
Insynchronous transmission, thebitstreamiscombined intolonger"frames," which
maycontainmultiple bytes.Eachbyte,however, isintroduced ontothetransmission
linkwithoutagapbetween itandthenextone.Itislefttothereceivertoseparatethe
bitstreamintobytesfordecoding purposes. Inotherwords,dataaretransmitted asan
unbroken stringof1s andOs,andthereceiverseparates thatstringintothebytes,or
characters, itneedstoreconstruct theinformation.
Insynchronous transmission, wesendbitsoneafteranotherwithoutstartorstop
bitsorgaps.Itistheresponsibility ofthereceivertogroupthebits.
Figure4.35givesaschematic illustration ofsynchronous transmission. Wehave
drawninthedivisions betweenbytes.Inreality,thosedivisions donotexist;thesender
putsitsdataontothelineasonelongstring.Ifthesenderwishestosenddatainseparate
bursts,thegapsbetweenburstsmustbefilledwithaspecialsequence ofOsandIsthat
meansidle.Thereceivercountsthebitsastheyarriveandgroupsthemin8-bitunits.
Figure4.35Synchronous transmission
Direction offlow
Sender 1101IIIFrame
111111011111110110 I···j111101111Frame
1,----tReceiver
11111
Without gapsandstartandstopbits,thereisnobuilt-inmechanism tohelpthe
receiving deviceadjustitsbitsynchronization midstream. Timingbecomes veryimpor­
tant,therefore, becausetheaccuracy ofthereceivedinformation iscompletely dependent
ontheabilityofthereceiving devicetokeepanaccuratecountofthebitsastheycomein.SECTION 4.5KEYTERMS 135
Theadvantage ofsynchronous transmission isspeed.Withnoextrabitsorgapsto
introduce atthesendingendandremoveatthereceiving end,and,byextension, with
fewerbitstomove across thelink,synchronous transmission isfasterthanasynchro­
noustransmission. Forthisreason,itismoreusefulforhigh-speed applications suchas
thetransmission ofdatafromonecomputer toanother.Bytesynchronization isaccom­
plishedinthedatalinklayer.
Weneedtoemphasize onepointhere.Although thereisnogapbetweencharacters
insynchronous serialtransmission, theremaybeunevengapsbetweenframes.
Isochronous
Inreal-time audioandvideo,inwhichunevendelaysbetween framesarenotaccept­
able,synchronous transmission fails.Forexample, TVimagesarebroadcast attherate
of30imagespersecond;theymustbeviewedatthesamerate.Ifeachimageissent
byusingoneormoreframes,thereshouldbenodelaysbetween frames.Forthistype
ofapplication, synchronization between characters isnotenough;theentirestreamof
bitsmustbesynchronized. Theisochronous transmission guarantees thatthedata
arriveatafixedrate.
4.4RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
books.Theitemsinbrackets [...]refertothereference listattheendofthetext.
Books
Digitaltodigitalconversion isdiscussed inChapter 7of[Pea92], Chapter 3of
[CouOl], andSection5.1of[Sta04].Sampling isdiscussed inChapters 15,16, 17,and
18of[Pea92],Chapter3of[CouO!], andSection5.3of[Sta04].[Hsu03]givesagood
mathematical approach tomodulation andsampling. Moreadvanced materials canbe
foundin[Ber96].
4.5KEYTERMS
adaptivedeltamodulation
alternate markinversion (AMI)
analog-to-digital conversion
asynchronous transmission
baseline
baselinewandering
baudrate
biphase
bipolar
bipolarwith8-zerosubstitution (B8ZS)bitrate
blockcoding
companding andexpanding
dataelement
datarate
DCcomponent
deltamodulation (DM)
differential Manchester
digital-to-digital conversion
digitization136CHAPTER 4DIGITAL TRANSMISSION
eightbinary/ten binary(8B/lOB)
eight-binary, six-ternary (8B6T)
fourbinary/five binary(4B/5B)
fourdimensional, five-level pulse
amplitude modulation (4D-PAM5)
high-density bipolar3-zero(HDB3)
isochronous transmission
linecoding
Manchester
modulation rate
multilevel binary
multiline transmission, 3level(MLT-3)
nonreturn tozero(NRZ)
nonreturn tozero,invert(NRZ-I)
nonreturn tozero,level(NRZ-L)
Nyquisttheorem
paralleltransmission
polar
pseudoternarypulseamplitude modulation (PAM)
pulsecodemodulation (PCM)
pulserate
quantization
quantization error
returntozero(RZ)
sampling
sampling rate
scrambling
self-synchronizing
serialtransmission
signalelement
signalrate
startbit
stopbit
synchronous transmission
transmission mode
two-binary, onequaternary (2BIQ)
unipolar
4.6SUMMARY
oDigital-to-digital conversion involves threetechniques: linecoding,blockcoding,
andscrambling.
oLinecodingistheprocessofconverting digitaldatatoadigitalsignal.
oWecanroughlydividelinecodingschemes intofivebroadcategories: unipolar,
polar,bipolar,multilevel, andmultitransition.
oBlockcodingprovides redundancy toensuresynchronization andinherent error
detection. Blockcodingisnormally referredtoasmB/nBcoding;itreplaces each
m-bitgroupwithann-bitgroup.
oScrambling provides synchronization withoutincreasing thenumberofbits.Two
common scrambling techniques areB8ZSandHDB3.
oThemostcommon technique tochangeananalogsignaltodigitaldata(digitiza­
tion)iscalledpulsecodemodulation (PCM).
oThefirststepinPCMissampling. TheanalogsignalissampledeveryTss,whereTs
isthesampleintervalorperiod.Theinverseofthesampling intervaliscalledthe
sampling rateorsampling frequency anddenotedbyfs,wherefs=lITs.Thereare
threesampling methods-ideal, natural,andflat-top.
oAccording totheNyquisttheorem, toreproduce theoriginalanalogsignal,one
necessary condition isthatthesampling ratebeatleasttwicethehighestfrequency
intheoriginalsignal.SECTION 4.7PRACTICE SET137
oOthersampling techniques havebeendeveloped toreducethecomplexity ofPCM.
Thesimplest isdeltamodulation. PCMfindsthevalueofthesignalamplitude for
eachsample;DMfindsthechangefromtheprevious sample.
oWhilethereisonlyonewaytosendparalleldata,therearethreesubclasses of
serialtransmission: asynchronous, synchronous, andisochronous.
oInasynchronous transmission, wesend1startbit(0)atthebeginning and1or
morestopbits(1s)attheendofeachbyte.
oInsynchronous transmission, wesendbitsoneafteranotherwithoutstartorstop
bitsorgaps.Itistheresponsibility ofthereceivertogroupthebits.
oTheisochronous modeprovides synchronized fortheentirestreamofbitsmust.In
otherwords,itguarantees thatthedataarriveatafixedrate.
4.7PRACTICE SET
ReviewQuestions
1.Listthreetechniques ofdigital-to-digital conversion.
2.Distinguish between asignalelementandadataelement.
3.Distinguish between datarateandsignalrate.
4.Definebaseline wandering anditseffectondigitaltransmission.
5.DefineaDCcomponent anditseffectondigitaltransmission.
6.Definethecharacteristics ofaself-synchronizing signal.
7.Listfivelinecodingschemes discussed inthisbook.
8.Defineblockcodingandgiveitspurpose.
9.Definescrambling andgiveitspurpose.
10.Compare andcontrastPCMandDM.
11.Whatarethedifferences between parallelandserialtransmission?
12.Listthreedifferent techniques inserialtransmission andexplainthedifferences.
Exercises
13.Calculate thevalueofthesignalrateforeachcaseinFigure4.2ifthedatarateis
1Mbpsandc=1/2.
14.Inadigitaltransmission, thesenderclockis0.2percentfasterthanthereceiverclock.
Howmanyextrabitsperseconddoesthesendersendifthedatarateis1Mbps?
15.DrawthegraphoftheNRZ-Lschemeusingeachofthefollowing datastreams,
assuming thatthelastsigna11evel hasbeenpositive. Fromthegraphs,guessthe
bandwidth forthisschemeusingtheaveragenumberofchangesinthesignallevel.
Compare yourguesswiththecorresp.onding entryinTable4.1.
a.00000000
b.11111111
c.01010101
d.00110011138 CHAPTER 4DIGITAL TRANSMISSION
16.RepeatExercise 15fortheNRZ-Ischeme.
17.RepeatExercise 15fortheManchester scheme.
18.RepeatExercise 15forthedifferential Manchester scheme.
19.RepeatExercise 15forthe2B1Qscheme,butusethefollowing datastreams.
a.0000000000000000
b.1111111111111111
c.0101010101010101
d.0011001100110011
20.RepeatExercise 15fortheMLT-3scheme,butusethefollowing datastreams.
a.00000000
b.11111111
c.01010101
d.00011000
21.Findthe8-bitdatastreamforeachcasedepictedinFigure4.36.
Figure4.36Exercise 21
t
Time
a.NRZ-I
Time
b.differential Manchester
Time
c.AMI
22.AnNRZ-Isignalhasadatarateof100Kbps.UsingFigure4.6,calculate thevalue
ofthenormalized energy(P)forfrequencies at0Hz,50KHz,and100KHz.
23.AManchester signalhasadatarateof100Kbps.UsingFigure4.8,calculate the
valueofthenormalized energy(P)forfrequencies at0Hz,50KHz,100KHz.SECTION 4.7PRACTICE SET 139
24.Theinputstreamtoa4B/5Bblockencoderis01000000000000000000OOOI.
Answerthefollowing questions:
a.Whatistheoutputstream?
b.Whatisthelengthofthelongestconsecutive sequence ofOsintheinput?
c.Whatisthelengthofthelongestconsecutive sequence ofOsintheoutput?
25.Howmanyinvalid(unused) codesequences canwehavein5B/6Bencoding? How
manyin3B/4Bencoding?
26.Whatistheresultofscrambling thesequence 11100000000000 usingoneofthe
following scrambling techniques? Assume thatthelastnon-zero signallevelhas
beenpositive.
a.B8ZS
b.HDB3(Thenumberofnonzeropulesisoddafterthelastsubstitution)
27.WhatistheNyquistsampling rateforeachofthefollowing signals?
a.Alow-pass signalwithbandwidth of200KHz?
b.Aband-pass signalwithbandwidth of200KHzifthelowestfrequency is
100KHz?
28.Wehavesampledalow-pass signalwithabandwidth of200KHzusing1024levels
ofquantization.
a.Calculate thebitrateofthedigitized signal.
b.Calculate theSNRdBforthissignal.
c.Calculate thePCMbandwidth ofthissignal.
29.Whatisthemaximum datarateofachannelwithabandwidth of200KHzifwe
usefourlevelsofdigitalsignaling.
30.Ananalogsignalhasabandwidth of20KHz.Ifwesamplethissignalandsendit
througha30KbpschannelwhatistheSNRdB?
31.Wehaveabaseband channelwithaI-MHzbandwidth. Whatisthedataratefor
thischannelifweuseoneofthefollowing linecodingschemes?
a.NRZ-L
b.Manchester
c.MLT-3
d.2B1Q
32.Wewanttotransmit 1000characters witheachcharacter encoded as8bits.
a.Findthenumberoftransmitted bitsforsynchronous transmission.
b.Findthenumberoftransmitted bitsforasynchronous transmission.
c.Findtheredundancy percentineachcase.CHAPTERS
AnalogTransmission
InChapter3,wediscussed theadvantages anddisadvantages ofdigitalandanalogtrans­
mission. Wesawthatwhiledigitaltransmission isverydesirable, alow-pass channelis
needed.Wealsosawthatanalogtransmission istheonlychoiceifwehaveabandpass
channel. Digitaltransmission wasdiscussed inChapter4;wediscussanalogtransmis­
sioninthischapter.
Converting digitaldatatoabandpass analogsignal.is traditionally calleddigital­
to-analog conversion. Converting alow-pass analogsignaltoabandpass analogsignal
istraditionally calledanalog-to-analog conversion. Inthischapter,wediscussthesetwo
typesofconversions.
5.1DIGITAL-TO-ANALOG CONVERSION
Digital-to-analog conversion istheprocessofchanging oneofthecharacteristics of
ananalogsignalbasedontheinformation indigitaldata.Figure5.1showstherela­
tionship between thedigitalinformation, thedigital-to-analog modulating process,
andtheresultant analog signal.
Figure5.1Digital-to-analog conversion
DigitaldataSender
Analogsignal
LinkReceiver
Digitaldata
1°101...1011
141142CHAPTER 5ANALOG TRANSMISSION
Asdiscussed inChapter3,asinewaveisdefinedbythreecharacteristics: amplitude,
frequency, andphase.Whenwevaryanyoneofthesecharacteristics, wecreateadiffer­
entversionofthatwave.So,bychanging onecharacteristic ofasimpleelectricsignal,we
canuseittorepresent digitaldata.Anyofthethreecharacteristics can bealteredinthis
way,givingusatleastthreemechanisms formodulating digitaldataintoananalogsignal:
amplitude shiftkeying(ASK),frequency shiftkeying(FSK),andphaseshiftkeying
(PSK).Inaddition, thereisafourth(andbetter)mechanism thatcombines changing both
theamplitude andphase,calledquadrature amplitude modulation (QAM). QAM
isthemostefficient oftheseoptionsandisthemechanism commonly usedtoday(see
Figure5.2).
Figure5.2Typesofdigital-to-analog conversion
"'------Digital-to-analog
conversion
Quadrature amplitude modulation
(QAM)
AspectsofDigital-to-Analog Conversion
Beforewediscussspecificmethods ofdigital-to-analog modulation, twobasicissues
mustbereviewed: bitandbaudratesandthecarriersignal.
DataElementVersusSignalElement
InChapter4,wediscussed theconceptofthedataelementversusthesignalelement.
Wedefinedadataelement asthesmallest pieceofinformation tobeexchanged, the
bit.Wealsodefinedasignalelement asthesmallest unitofasignalthatisconstant.
Although wecontinue tousethesametermsinthischapter,wewillseethatthenature
ofthesignalelementisalittlebitdifferent inanalogtransmission.
DataRateVersusSignalRate
Wecandefinethedatarate(bitrate)andthesignalrate(baudrate)aswedidfordigital
transmission. Therelationship between themis
S=Nx! baudr
whereNisthedatarate(bps)andristhenumberofdataelements carriedinonesignal
element. Thevalueofrinanalogtransmission isr=log2L,whereListhetypeofsig­
nalelement, notthelevel.Thesamenomenclature isusedtosimplify thecomparisons.SECTION 5.1DIGITAL-TO-ANALOG CONVERSION 143
Bitrateisthenumberofbitspersecond.Baudrateisthenumberofsignal
elements persecond.Intheanalogtransmission ofdigitaldata,
thebaudrateislessthanorequaltothebitrate.
ThesameanalogyweusedinChapter4forbitrateandbaudrateapplieshere.In
transportation, abaudisanalogous toavehicle,andabitisanalogous toapassenger.
Weneedtomaximize thenumberofpeoplepercartoreducethetraffic.
Example 5.1
Ananalogsignalcarries4bitspersignalelement. If1000signalelements aresentpersecond,
findthebitrate.
Solution
Inthiscase,r=4,S=1000,andNisunknown. WecanfindthevalueofNfrom
S=Nx!
rorN=Sxr= 1000x4=4000bps
Example 5.2
Ananalogsignalhasabitrateof8000bpsandabaudrateof1000baud.Howmanydataelements
arecarriedbyeachsignalelement? Howmanysignalelements doweneed?
Solution
Inthisexample, S=1000,N=8000,andrandLareunknown. Wefindfirstthevalueofrand
thenthevalueofL.
1S=Nx­
r
r=logzLN8000 .r=-=--=8bltslbaudS1000
L=y=28=256
Bandwidth
Therequired bandwidth foranalogtransmission ofdigitaldataisproportional tothe
signalrateexceptforFSK,inwhichthedifference between thecarriersignalsneedsto
beadded.Wediscussthebandwidth foreachtechnique.
CarrierSignal
Inanalogtransmission, thesendingdeviceproduces ahigh-frequency signalthatacts
asabasefortheinformation signal.Thisbasesignaliscalledthecarriersignalorcar­
rierfrequency. Thereceiving deviceistunedtothefrequency ofthecarriersignalthatit
expectsfromthesender.Digitalinformation thenchangesthecarriersignalbymodify­
ingoneormoreofitscharacteristics (amplitude, frequency, orphase).Thiskindof
modification iscalledmodulation (shiftkeying).
Amplitude ShiftKeying
Inamplitude shiftkeying,theamplitude ofthecarriersignalisvariedtocreatesignal
elements. Bothfrequency andphaseremainconstantwhiletheamplitude changes.144CHAPTER 5ANALOG TRANSMISSION
BinaryASK(BASK)
Although wecanhaveseverallevels(kinds)ofsignalelements, eachwithadifferent
amplitude, ASKisnormally implemented usingonlytwolevels.Thisisreferredtoas
binaryamplitude shiftkeyingoron-offkeying(OOK).Thepeakamplitude ofonesig­
nallevelis0;theotheristhesameastheamplitude ofthecarrierfrequency. Figure5.3
givesaconceptual viewofbinaryASK.
Figure5.3Binmyamplitude shiftkeying
Amplitude Bitrate:5
1signal
elemento
1signal
element1
Isignal
element
1s
Baudrate:5Isignal
elemento
Isignal
elementI
ITime
I
I
I
Ir=:=1S=N B=(I+d)S
Bandwidth forASKFigure5.3alsoshowsthebandwidth forASK.Although the
carriersignalisonlyonesimplesinewave,theprocessofmodulation produces a
nonperiodic composite signal.Thissignal,aswasdiscussed inChapter3,hasacontin­
uoussetoffrequencies. Asweexpect,thebandwidth isproportional tothesignalrate
(baudrate).However, thereisnormally anotherfactorinvolved, calledd,which
dependsonthemodulation andfilteringprocess.Thevalueofdisbetween0and1.This
meansthatthebandwidth canbeexpressed asshown,where5isthesignalrateandtheB
isthebandwidth.
B=(1+d)xS
Theformulashowsthattherequired bandwidth hasaminimum valueof5anda
maximum valueof25.Themostimportant pointhereisthelocationofthebandwidth.
Themiddleofthebandwidth iswhereIethecarrierfrequency, islocated.Thismeansif
wehaveabandpass channelavailable, wecanchooseourIesothatthemodulated
signaloccupies thatbandwidth. Thisisinfactthemostimportant advantage ofdigital­
to-analog conversion. Wecanshifttheresulting bandwidth tomatchwhatisavailable.
Implementation Thecomplete discussion ofASKimplementation isbeyondthe
scopeofthisbook.However, thesimpleideasbehindtheimplementation mayhelpus
tobetterunderstand theconceptitself.Figure5.4showshowwecansimplyimplement
binaryASK.
Ifdigitaldataarepresented asaunipolarNRZ(seeChapter4)digitalsignalwitha
highvoltageofIVandalowvoltageof0V,theimplementation canachieved by
multiplying theNRZdigitalsignalbythecarriersignalcomingfromanoscillator.
Whentheamplitude oftheNRZsignalis1,theamplitude ofthecarrierfrequency isSECTION 5.1DIGITAL-TO-ANALOG CONVERSION 145
Figure5.4Implementation ofbinaryASK
o
Carriersignal
II0
I
held;whentheamplitude oftheNRZsignalis0,theamplitude ofthecarrierfrequency
ISzero.
Example 5.3
Wehaveanavailable bandwidth of100kHzwhichspansfrom200to300kHz.Whatarethecar­
rierfrequency andthebitrateifwemodulated ourdatabyusingASKwithd=I?
Solution
Themiddleofthebandwidth islocatedat250kHz.Thismeansthatourcarrierfrequency canbe
atfe=250kHz.Wecanusetheformulaforbandwidth tofindthebitrate(withd=1andr=1).
B=(l+d)xS=2xNX!=2XN=100kHz......N=50kbps
r
Example 5.4
Indatacommunications, wenormally usefull-duplex linkswithcommunication inbothdirec­
tions.Weneedtodividethebandwidth intotwowithtwocarrierfrequencies, asshowninFig­
ure5.5.Thefigureshowsthepositions oftwocarrierfrequencies andthebandwidths. The
available bandwidth foreachdirection isnow50kHz,whichleavesuswithadatarateof25kbps
ineachdirection.
Figure5.5Bandwidth offull-duplex ASKusedinExample 5.4
I'B=50kHz'11B=50kHz'I
~"~~~ ~,~Jf:L
200(225) (275) 300
Multilevel ASK
Theabovediscussion usesonlytwoamplitude levels.Wecanhavemultilevel ASKin
whichtherearemorethantwolevels.Wecanuse4,8,16,ormoredifferent amplitudes
forthesignalandmodulate thedatausing2,3,4,ormorebitsatatime.Inthesecases,146CHAPTER 5ANALOG TRANSMISSION
r=2,r=3,r=4,andsoon.Although thisisnotimplemented withpureASK,itis
implemented withQAM(aswewillseelater).
Frequency ShiftKeying
Infrequency shiftkeying,thefrequency ofthecarriersignalisvariedtorepresent data.
Thefrequency ofthemodulated signalisconstant forthedurationofonesignalele­
ment,butchangesforthenextsignalelementifthedataelementchanges. Bothpeak
amplitude andphaseremainconstantforallsignalelements.
BinaryFSK(BFSK)
OnewaytothinkaboutbinaryFSK(orBFSK)istoconsidertwocarrierfrequencies. In
Figure5.6,wehaveselectedtwocarrierfrequencies,f} and12.Weusethefirstcarrierif
thedataelementis0;weusethesecondifthedataelementis1.However, notethatthis
isanunrealistic example usedonlyfordemonstration purposes. Normally thecarrier
frequencies areveryhigh,andthedifference betweenthemisverysmall.
Figure5.6Binaryfrequency shiftkeying
AmplitudeBitrate:5 r=lS=NB=(1+d)S+2t-.j
1signal 1signal 1signal 1signal 1signal
element element element element element
Is Ith
I'21-.!-Io+-~--1-L....JL..--l--..I...-_oIl Il 1
Baudrate:5
AsFigure5.6shows,themiddleofonebandwidth isJIandthemiddleoftheother
ish.BothJIand12areil/apartfromthemidpoint betweenthetwobands.Thediffer­
encebetweenthetwo frequencies is211f
Bandwidth forBFSKFigure5.6alsoshowsthebandwidth ofFSK.Againthecar­
riersignalsareonlysimplesinewaves,butthemodulation createsanonperiodiccom­
positesignalwithcontinuous frequencies. WecanthinkofFSKastwoASKsignals,
eachwithitsowncarrierfrequency Cilorh).Ifthedifference between thetwofre­
quencies is211j,thentherequiredbandwidth is
B=(l+d)xS+2iij
Whatshouldbetheminimum valueof211/?InFigure5.6,wehavechosenavalue
greaterthan(l+d)S.Itcanbeshownthattheminimum valueshouldbeatleastSfor
theproperoperation ofmodulation anddemodulation.SECTION 5.1DIGITAL-TO-ANALOG CONVERSION 147
Example 5.5
Wehaveanavailable bandwidth of100kHzwhichspansfrom200to300kHz.Whatshouldbe
thecarrierfrequency andthebitrateifwemodulated ourdatabyusingFSKwithd=1?
Solution
Thisproblem issimilartoExample 5.3,butwearemodulating byusingFSK.Themidpoint of
thebandisat250kHz.Wechoose 2~ftobe50kHz;thismeans
B=(1+d)x S+28f=100-.2S=50kHzS=25kbaud N;;;;25kbps
Compared toExample 5.3,wecanseethebitrateforASKis50kbpswhilethebitrateforFSKis
25kbps.
Implementation Therearetwoimplementations ofBFSK:noncoherent andcoher­
ent.Innoncoherent BFSK,theremaybediscontinuity inthephasewhenonesignal
elementendsandthenextbegins.Incoherent BFSK,thephasecontinues throughthe
boundary oftwosignalelements. Noncoherent BFSKcanbeimplemented bytreating
BFSKastwoASKmodulations andusingtwocarrierfrequencies. Coherent BFSKcan
beimplemented byusingonevoltage-controlled oscillator (VeO)thatchangesitsfre­
quencyaccording totheinputvoltage.Figure5.7showsthesimplified ideabehindthe
secondimplementation. Theinputtotheoscillator istheunipolar NRZsignal.When
theamplitude ofNRZiszero,theoscillator keepsitsregularfrequency; whenthe
amplitude ispositive, thefrequency isincreased.
Figure5.7Implementation ofBFSK
1o 1o
_lD1_I_I_I_-;"~1 veo
I~
Voltage-controlled
oscillator
Multilevel FSK
Multilevel modulation (MFSK) isnotuncommon withtheFSKmethod. Wecanuse
morethantwofrequencies. Forexample, wecanusefourdifferent frequenciesfIJ2,!3,
and14tosend2bitsatatime.Tosend3bitsatatime,wecanuseeightfrequencies.
Andsoon.However, weneedtoremember thatthefrequencies needtobe2~1apart.
Fortheproperoperation ofthemodulator anddemodulator, itcanbeshownthatthe
minimum valueof2~lneeds tobeS.Wecanshowthatthebandwidth withd=0is
B;;;;(l+d)xS+(L-1)24{-.B=LxS148CHAPTER 5ANALOG TRANSMISSION
Example 5.6
Weneedtosenddata3bitsatatimeatabitrateof3Mbps.Thecarrierfrequency is
10MHz.Calculate thenumberoflevels(different frequencies), thebaudrate,andthe
bandwidth.
Solution
WecanhaveL=23=8.ThebaudrateisS=3MHz/3=1000Mbaud.Thismeansthatthecarrier
frequencies mustbe1MHzapart(211f=1MHz).Thebandwidth isB=8x1000=8000.Figure5.8
showstheallocation offrequencies andbandwidth.
Figure5.8Bandwidth ofMFSKusedinExample 5.6
'I
r~~'¥'::L
is
13.5
MHzI
h
12.5
MHzBandwidth =8MHz
II
6.5
MHzI'
-(.-----.."--,,I~~~lf5~~1I:
I--Ji~~l~;~r'·'
 ·t':~
hh 14j~15 16
7.5 8.5 9.5HI10.5 11.5
MHz MHz MHz MHzMHz MHz
PhaseShiftKeying
Inphaseshiftkeying,thephaseofthecarrierisvariedtorepresent twoormorediffer­
entsignalelements. Bothpeakamplitude andfrequency remainconstant asthephase
changes. Today,PSKismorecommon thanASKorFSK.However, wewillsee
Sh0l1lythatQAM,whichcombines ASKandPSK,isthedominant methodofdigital­
to-analog modulation.
BinaryPSK(BPSK)
ThesimplestPSKisbinaryPSK,inwhichwehaveonlytwosignalelements, onewith
aphaseof0°,andtheotherwithaphaseof180°.Figure5.9givesaconceptual view
ofPSK.BinaryPSKisassimpleasbinaryASKwithonebigadvantage-it isless
Figure5.9Binaryphaseshiftkeying
Amplitude Bitrate:5
o 1 I) r=1 S=N B={I+d)S
Isignal Isignal Isignal Isignal Isignal
element element element element element
Is
Baudrate:5SECTION 5.1DIGITAL-TO-ANALOG CONVERSION 149
susceptible tonoise.InASK,thecriterion forbitdetection istheamplitude ofthesig­
nal;inPSK,itisthephase.Noisecanchangetheamplitude easierthanitcanchange
thephase.Inotherwords,PSKislesssusceptible tonoisethanASK.PSKissuperiorto
FSKbecausewedonotneedtwocarriersignals.
Bandwidth Figure5.9alsoshowsthebandwidth forBPSK.Thebandwidth isthe
sameasthatforbinaryASK,butlessthanthatforBFSK.Nobandwidth iswastedfor
separating twocarriersignals.
Implementation Theimplementation ofBPSKisassimpleasthatforASK.Therea­
sonisthatthesignalelementwithphase180°canbeseenasthecomplement ofthesig­
nalelementwithphase0°.Thisgivesusaclueonhowtoimplement BPSK.Weuse
thesameideaweusedforASKbutwithapolarNRZsignalinsteadofaunipolarNRZ
signal,asshowninFigure5.10.ThepolarNRZsignalismultiplied bythecarrierfre­
quency;the1bit(positive voltage)isrepresented byaphasestartingat0°;theabit
(negative voltage)isrepresented byaphasestartingat180°.
Figure5.10Implementation ofBASK
o 1
I
I
Carrie~signalo-=t:f=tt Multiplier~
------.tX I---'-;';';"";";"':":"';";';'~
*fc
Quadrature PSK(QPSK)
Thesimplicity ofBPSKenticeddesigners touse2bitsatatimeineachsignalelement,
therebydecreasing thebaudrateandeventually therequiredbandwidth. Theschemeis
calledquadrature PSKorQPSKbecauseitusestwoseparateBPSKmodulations; one
isin-phase, theotherquadrature (out-of-phase). Theincoming bitsarefirstpassed
throughaserial-to-parallel conversion thatsendsonebittoonemodulator andthenext
bittotheothermodulator.Iftheduration ofeachbitintheincoming signalisT,the
durationofeachbitsenttothecorresponding BPSKsignalis2T.Thismeansthatthe
bittoeachBPSKsignalhasone-half thefrequency oftheoriginalsignal.Figure5.11
showstheidea.
Thetwocomposite signalscreatedbyeachmultiplier aresinewaveswiththe
samefrequency, butdifferent phases.Whentheyareadded,theresultisanother sine
wave,withoneoffourpossible phases:45°,-45°,135°,and-135°.Therearefour
kindsofsignalelements intheoutputsignal(L=4),sowecansend2bitspersignal
element(r=2).150 CHAPTER 5ANALOG TRANSMISSION
Figure5.11QPSKanditsimplementation
00
o1 U
101
o1 I
1
I I I
I I I
·p·,J\-:/YfAf\f~-tPtj'}/f'J\-lllJ~
I I I I
I I I I
I I I Io:0I I I
I
-135 -45 135 45
Example 5.7
Findthebandwidth forasignaltransmitting at12MbpsforQPSK.Thevalueofd=O.
Solution
ForQPSK,2bitsiscarriedbyonesignalelement. Thismeansthatr=2.Sothesignalrate(baud
rate)isS=Nx(lIr)=6Mbaud.Withavalueofd=0,wehaveB=S=6MHz.
Constellation Diagram
Aconstellation diagram canhelpusdefinetheamplitude andphaseofasignalelement,
particularly whenweareusingtwocarriers(onein-phase andonequadrature), The
diagram isusefulwhenwearedealingwithmultilevel ASK,PSK,orQAM(seenext
section). Inaconstellation diagram, asignalelementtypeisrepresented asa dot.The
bitorcombination ofbitsitcancarryisoftenwrittennexttoit.
Thediagramhastwoaxes.Thehorizontal Xaxisisrelatedtothein-phase carrier;
theverticalYaxisisrelatedtothequadrature carrier.Foreachpointonthediagram,
fourpiecesofinformation canbededuced. Theprojection ofthepointontheXaxis
definesthepeakamplitude ofthein-phase component; theprojection ofthepointon
theYaxisdefinesthepeakamplitude ofthequadrature component. Thelengthofthe
line(vector)thatconnects thepointtotheoriginisthepeakamplitude ofthesignal
element(combination oftheXandYcomponents); theanglethelinemakeswiththe
Xaxisis thephaseofthesignalelement.Alltheinformation weneed,caneasilybefound
onaconstellation diagram. Figure5.12showsaconstellation diagram.SECTION 5.1DIGITAL-TO-ANALOG CONVERSION 151
Figure5.12Conceptofaconstellation diagram
Y(Quadrature carrier)
-----------~,
,I
f+-<--' ~e.~~ Iol=: •..:S5~ I
~~ ?f" I
B8.. ~<$'/ I:.:::E ., I
0..0#1"', IE0 ~:<::>,' I«C)lV, I
"Angle:phase I
, I__---L+_-----.J'---- ---'--~ X(In-phase carrier)
Amplitude of
Icomponent
Example 5.8
Showtheconstellation diagrams foranASK(OOK),BPSK,andQPSKsignals.
Solution
Figure5.13showsthethreeconstellation diagrams.
Figure5.13Threeconstellation diagrams
~--,
01'-.11
/ \
-. -. .-1 \
0---\I 0 1 \I
00.,__~1O
a.ASK(OOK) b.BPSK c.QPSK
Letusanalyzeeachcaseseparately:
a.ForASK,weareusingonlyanin-phase carrier.Therefore, thetwopointsshouldbeonthe
Xaxis.Binary0hasanamplitude of0V;binary1hasanamplitude of1V(forexample).
Thepointsarelocatedattheoriginandat1unit.
h.BPSKalsousesonlyanin-phase carrier.However, weuseapolarNRZsignalformodu­
lation.Itcreatestwotypesofsignalelements, onewithamplitude 1andtheotherwith
amplitude -1.Thiscanbestatedinotherwords:BPSKcreatestwodifferent signalelements,
onewithamplitude I Vandinphaseandtheotherwithamplitude 1Vand1800outofphase.
c.QPSKusestwocarriers,onein-phase andtheotherquadrature. Thepointrepresenting 11is
madeoftwocombined signalelements, bothwithanamplitude of1V.Oneelementisrep­
resentedbyanin-phasecarrier,theotherelementbyaquadrature carrier.Theamplitude of
thefinalsignalelementsentforthis2-bitdataelementis2112,andthephaseis45°.The
argument issimilarfortheotherthreepoints.Allsignalelements haveanamplitude of2112,
buttheirphasesaredifferent (45°,135°,-135°,and-45°).Ofcourse,wecouldhavechosen
theamplitude ofthecarriertobe1/(21/2)tomakethefinalamplitudes 1V.152CHAPTER 5ANALOG TRANSMISSION
Quadrature Amplitude Modulation
PSKislimitedbytheabilityoftheequipment todistinguish smalldifferences inphase.
Thisfactorlimitsitspotential bitrate.Sofar,wehavebeenalteringonlyoneofthe
threecharacteristics ofasinewaveatatime;butwhatifwealtertwo?Whynotcom­
bineASKandPSK?Theideaofusingtwocarriers,onein-phase andtheotherquadra­
ture,withdifferent amplitude levelsforeachcarrieristheconceptbehindquadrature
amplitude modulation (QAM).
Quadrature amplitude modulation isacombination ofASKandPSK.
Thepossiblevariations ofQAMarenumerous. Figure5.14showssomeofthese
schemes. Figure5.14ashowsthesimplest 4-QAMscheme(fourdifferent signal ele­
menttypes)usingaunipolar NRZsignaltomodulate eachcarrier.Thisisthesame
mechanism weusedforASK(OOK).Partbshowsanother4-QAMusingpolarNRZ,
butthisisexactlythesameasQPSK.PartcshowsanotherQAM-4inwhichweuseda
signalwithtwopositivelevelstomodulate eachofthetwocarriers.Finally,Figure5.14d
showsa16-QAM constellation ofasignalwitheightlevels,fourpositiveandfour
negative.
Figure5.14Constellation diagrams forsomeQAMs
t•• • ••••• •L•• • • ••••
I~ • •••• • ••••
a.4·QAM b.4-QAM c.4.QAM d.16·QAM
Bandwidth forQAM
Theminimum bandwidth requiredforQAMtransmission isthesameasthatrequired
forASKandPSKtransmission. QAMhasthesameadvantages asPSKoverASK.
5.2ANALOG-TO-ANALOG CONVERSION
Analog-to-analog conversion, oranalogmodulation, istherepresentation ofanalog
information byananalogsignal.Onemayaskwhyweneedtomodulate ananalogsig­
nal;itisalreadyanalog.Modulation isneededifthemediumisbandpass innatureorif
onlyabandpass channelisavailable tous.Anexampleisradio.Thegovernment assigns
anarrowbandwidth toeachradiostation.Theanalogsignalproduced byeachstationis
alow-pass signal,allinthesamerange.Tobeabletolistentodifferent stations,the
low-pass signalsneedtobeshifted,eachtoadifferentrange.SECTION 5.2ANALOG-TO-ANALOG CONVERSION 153
Analog-to-analog conversion canbeaccomplished inthreeways:amplitude
modulation (AM),frequency modulation (FM),andphasemodulation (PM).FM
andPMareusuallycategorized together. SeeFigure5.15.
Figure5.15Typesofanalog-to-analog modulation
Analog-lo-analog
conversion
Frequency modulation
Amplitude Modulation
InAMtransmission, thecarriersignalismodulated sothatitsamplitude varieswiththe
changing amplitudes ofthemodulating signal.Thefrequency andphaseofthecarrier
remainthesame;onlytheamplitude changestofollowvariations intheinformation. Fig­
ure5.16showshowthisconceptworks.Themodulating signalistheenvelope ofthecarrier.
Figure5.16Amplitude modulation
JjBAM=2B
:Lo I
1;
AsFigure5.16shows,AMisnormally implemented byusingasimplemultiplier
becausetheamplitude ofthecarriersignalneedstobechangedaccording totheampli­
tudeofthemodulating signal.
AMBandwidth
Figure5.16alsoshowsthebandwidth ofanAMsignal.Themodulation createsaband­
widththatistwicethebandwidth ofthemodulating signalandcoversarangecentered
onthecarrierfrequency. However, thesignalcomponents aboveandbelowthecarrier154CHAPTER 5ANALOG TRANSMISSION
frequency carryexactlythesameinformation. Forthisreason,someimplementations
discardone-halfofthesignalsandcutthebandwidth inhalf.
ThetotalbandwIdth required forAMcanbedetermined
fromthebandwidth oftheaudiosignal:BAM=2B.
------------------_~-~,~_-
Stalldard Balldwidth Allocatioll forAiHl(adio
Thebandwidth ofanaudiosignal(speechandmusic)isusually5kHz.Therefore, an
AMradiostationneedsabandwidth of10kHz.Infact,theFederalCommunications
Commission (FCC)allows10kHzforeachAMstation.
AMstationsareallowedcarrierfrequencies anywhere between530and1700kHz
(1.7MHz).However, eachstation'scarrierfrequency mustbeseparated fromthoseon
eithersideofitbyatleast10kHz(oneAMbandwidth) toavoidinterference. Ifone
stationusesacarrierfrequency of1100kHz,thenextstation'scarrierfrequency cannot
belowerthan1110kHz(seeFigure5.17).
Figure5.17AMbandallocation
__*_*_*_....I....- .....t-'"....=u.;[IJ
530 I',I 1700
kHz 10kHz kHz
Frequency Modulation
InFMtransmission, thefrequency ofthecarriersignalismodulated tofollowthechang­
ingvoltagelevel(amplitude) ofthemodulating signal.Thepeakamplitude andphaseof
thecarriersignalremainconstant, butastheamplitude oftheinformation signal
changes, thefrequency ofthecarrierchangescorrespondingly. Figure5.18showsthe
relationships ofthemodulating signal,thecarriersignal,andtheresultantFMsignal.
AsFigure5.18shows,FMisnOimalIy implemented byusingavoltage-controlled
oscillator aswithFSK.Thefrequency oftheoscillator changesaccording totheinput
voltagewhichistheamplitude ofthemodulating signal.
FiHBalldwidth
Figure5.18alsoshowsthebandwidth ofanFMsignal.Theactualbandwidth isdiffi­
culttodetermine exactly,butitcanbeshownempirically thatitisseveraltimesthat
oftheanalogsignalor2(1+~)Bwhere ~isafactordependsonmodulation technique
withacommon valueof4.
Thetotalbandwidth required forFMcanbedetermined from
thebandwidth oftheaudiosignal:BFM=2(1+j3)B.SECTION 5.2ANALOG-TO-ANALOG CONVERSION 155
:Figure5.1gFrequency modulation------------ ----------
Amplitude
Modulating signal(audio)
DB,"=2(1+filR
:Lo I
IeC".I
I~ ___ "0-----,J~~veo .-
VOltage-controlled
oscillator
Time
TimeTime
FMsignal
n!
------ ------_._-----------------
,c.,'twllhm! Bandwidth A.llo('((tiOll forF,\fRadio
Thebandwidth ofanaudiosignal(speechandmusic)broadcast instereoisalmost
15kHz.TheFCCallows200kHz(0.2MHz)foreachstation.Thismean ~=4with
someextraguardband.FMstationsareallowedcarrierfrequencies anywhere between
88and108MHz.Stationsmustbeseparated byatleast200kHztokeeptheirband­
widthsfromoverlapping. Tocreateevenmoreprivacy,theFCCrequiresthatinagiven
area,onlyalternate bandwidth allocations maybeused.Theothersremainunusedtopre­
ventanypossibility oftwostationsinterfering witheachother.Given88to108MHzas
arange,thereare100potential PM bandwidths inanarea,ofwhich50canoperateat
anyonetime.Figure5.19illustrates thisconcept.
Figure5.19FMbandallocation
,--_t,-e_Ist~~on
88
MHzIe
t
I-200kHz,I...Iet------_. __._--
No
station
108
MHz
Phast',\loduiation
InPMtransmission, thephaseofthecarriersignalismodulated tofollowthechanging
voltagelevel(amplitude) ofthemodulating signal.Thepeakamplitude andfrequency
ofthecarriersignalremainconstant, butastheamplitude oftheinformation signal
changes, thephaseofthecarrierchangescorrespondingly. Itcanprovedmathemati­
cally(seeAppendix C)thatPMisthesameasFMwithonedifference. InFM,the
instantaneous changeinthecarrierfrequency isproportional totheamplitude ofthe156CHAPTER 5ANALOG TRANSMISSION
modulating signal;inPMtheinstantaneous changeinthecarrierfrequency ispropor­
tionaltothederivative oftheamplitude ofthemodulating signal.Figure5.20showsthe
relationships ofthemodulating signal,thecarriersignal,andtheresultant PMsignal.
Figure5.20Phasemodulation
Amplitude
Modulating signal(audio)
PMsignalTime
Time
Time
VCOI~Ir
~I'J1dldtI 1
AsFigure5.20shows,PMisnormally implemented byusingavoltage-controlled
oscillator alongwithaderivative. Thefrequency oftheoscillator changesaccording to
thederivative oftheinputvoltagewhichistheamplitude ofthemodulating signal.
PMBandwidth
Figure5.20alsoshowsthebandwidth ofaPMsignal.Theactualbandwidth isdifficult
todetermine exactly,butitcanbeshownempirically thatitisseveraltimesthatofthe
analogsignal.Although, theformulashowsthesamebandwidth forFMandPM,the
valueof~islowerinthecaseofPM(around1fornarrowband and3forwideband).
Thetotalbandwidth required forPMcanbedetermined fromthebandwidth and
maximum amplitude ofthemodulating signal:BpM=2(1+~)B.
5.3RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
books.Theitemsinbrackets [...]refertothereference listattheendofthetext.
Books
Digital-to-analog conversion isdiscussed inChapter 14of[Pea92], Chapter 5of
[CouOl], andSection5.2of[Sta04].Analog-to-analog conversion isdiscussed in
Chapters 8to13of[Pea92],Chapter5of[CouOl], andSection5.4of[Sta04].[Hsu03]SECTION 5.5SUMMARY 157
givesagoodmathematical approach toallmaterials discussed inthischapter.More
advanced materials canbefoundin[Ber96].
5.4KEYTERMS
amplitude modulation (AM)
amplitude shiftkeying(ASK)
analog-to-analog conversion
carriersignal
constellation diagram
digital-to-analog conversionfrequency modulation (PM)
frequency shiftkeying(FSK)
phasemodulation (PM)
phaseshiftkeying(PSK)
quadrature amplitude modulation
(QAM)
5.5SUMMARY
oDigital-to-analog conversion istheprocessofchanging oneofthecharacteristics
ofananalogsignalbasedontheinformation inthedigitaldata.
oDigital-to-analog conversion canbeaccomplished inseveralways:amplitude shift
keying(ASK),frequency shiftkeying(FSK),andphaseshiftkeying(PSK).
Quadrature amplitude modulation (QAM)combines ASKandPSK.
oInamplitude shiftkeying,theamplitude ofthecarriersignalisvariedtocreatesignal
elements. Bothfrequency andphaseremainconstantwhiletheamplitude changes.
oInfrequency shiftkeying,thefrequency ofthecarriersignalisvariedtorepresent
data.Thefrequency ofthemodulated signalisconstantforthedurationofonesig­
nalelement, butchangesforthenextsignalelementifthedataelementchanges.
Bothpeakamplitude andphaseremainconstantforallsignalelements.
oInphaseshiftkeying,thephaseofthecarrierisvariedtorepresent twoormoredif­
ferentsignalelements. Bothpeakamplitude andfrequency remainconstant asthe
phasechanges.
oAconstellation diagram showsustheamplitude andphaseofasignalelement,
particularly whenweareusingtwocarriers(onein-phase andonequadrature).
oQuadrature amplitude modulation (QAM)isacombination ofASKandPSK.
QAMusestwocarriers, onein-phase andtheotherquadrature, withdifferent
amplitude levelsforeachcarrier.
oAnalog-to-analog conversion istherepresentation ofanaloginformation byan
analogsignal.Conversion isneededifthemediumisbandpass innatureorifonly
abandpass bandwidth isavailable tous.
oAnalog-to-analog conversion canbeaccomplished inthreeways:amplitude modu­
lation(AM),frequency modulation (FM),andphasemodulation (PM).
oInAMtransmission, thecarriersignalismodulated sothatitsamplitude varieswiththe
changing amplitudes ofthemodulating signal.Thefrequency andphaseofthecarrier
remainthesame;onlytheamplitude changestofollowvariations intheinformation.
oInPMtransmission, thefrequency ofthecarriersignalismodulated tofollowthe
changing voltagelevel(amplitude) ofthemodulating signal.Thepeakamplitude158CHAPTER 5ANALOG TRANSMISSION
andphaseofthecarriersignalremainconstant, butastheamplitude oftheinfor­
mationsignalchanges, thefrequency ofthecarrierchanges correspondingly.
oInPMtransmission, thephaseofthecarriersignalismodulated tofollowthe
changing voltagelevel(amplitude) ofthemodulating signal.Thepeakamplitude
andfrequency ofthecarriersignalremainconstant, butastheamplitude ofthe
information signalchanges, thephaseofthecarrierchanges correspondingly.
5.6PRACTICE SET
ReviewQuestions
1.Defineanalogtransmission.
2.Definecarriersignalanditsroleinanalogtransmission.
3.Definedigital-to-analog conversion.
4.Whichcharacteristics ofananalogsignalarechanged torepresent thedigitalsignal
ineachofthefollowing digital-to-analog conversion?
a.ASK
b.FSK
c.PSK
d.QAM
5.Whichofthefourdigital-to-analog conversion techniques (ASK,FSK,PSKor
QAM)isthemostsusceptible tonoise?Defendyouranswer.
6.Defineconstellation diagram anditsroleinanalogtransmission.
7.Whatarethetwocomponents ofasignalwhenthesignalisrepresented onacon-.
stellation diagram? Whichcomponent isshownonthehorizontal axis?Whichis
shownontheverticalaxis?
8.Defineanalog-to-analog conversion?
9.Whichcharacteristics ofananalogsignalarechangedtorepresent thelowpassanalog
signalineachofthefollowing analog-to-analog conversions?
a.AM
b.FM
c.PM
]0.Whichofthethreeanalog-to-analog conversion techniques (AM,FM,orPM)is
themostsusceptible tonoise?Defendyouranswer.
Exercises
11.Calculate thebaudrateforthegivenbitrateandtypeofmodulation.
a.2000bps,FSK
b.4000bps,ASK
c.6000bps,QPSK
d.36,000bps,64-QAMSECTION 5.6PRACTICE SET 159
12.Calculate thebitrateforthegivenbaudrateandtypeofmodulation.
a.1000baud,FSK
b.1000baud,ASK
c.1000baud,BPSK
d.1000baud,16-QAM
13.Whatisthenumberofbitsperbaudforthefollowing techniques?
a.ASKwithfourdifferent amplitudes
b.FSKwith8different frequencies
c.PSKwithfourdifferent phases
d.QAMwithaconstellation of128points.
14.Drawtheconstellation diagramforthefollowing:
a.ASK,withpeakamplitude valuesof1and3
b.BPSK,withapeakamplitude valueof2
c.QPSK,withapeakamplitude valueof3
d.8-QAMwithtwodifferent peakamplitude values,Iand3,andfourdifferent
phases.
15.Drawtheconstellation diagram forthefollowing cases.Findthepeakamplitude
valueforeachcaseanddefinethetypeofmodulation (ASK,FSK,PSK,orQAM).
Thenumbers inparentheses definethevaluesofIandQrespectively.
a.Twopointsat(2,0)and(3,0).
b.Twopointsat(3,0)and(-3,0).
c.Fourpointsat(2,2),(-2,2),(-2,-2),and(2,-2).
d.Twopointsat(0,2)and(0,-2).
16.Howmanybitsperbaudcanwesendineachofthefollowing casesifthesignal
constellation hasoneofthefollowing numberofpoints?
a.2
b.4
c.16
d.1024
17.Whatistherequiredbandwidth forthefollowing casesifweneedtosend4000bps?
Letd=1.
a.ASK
b.FSKwith2~f=4KHz
c.QPSK
d.16-QAM
18.Thetelephone linehas4KHzbandwidth. Whatisthemaximum numberofbitswe
cansendusingeachofthefollowing techniques? Letd=O.
a.ASK
b.QPSK
c.16-QAM
d.64-QAM160CHAPTER 5ANALOG TRANSMISSION
19.Acorporation hasamedium withaI-MHzbandwidth (lowpass). Thecorporation
needstocreate10separate independent channels eachcapableofsendingatleast
10Mbps.Thecompany hasdecidedtouseQAMtechnology. Whatisthemini­
mumnumberofbitsperbaudforeachchannel? Whatisthenumberofpointsin
theconstellation diagram foreachchannel? Letd=O.
20.Acablecompany usesoneofthecableTVchannels (withabandwidth of6MHz)
toprovidedigitalcommunication foreachresident. Whatistheavailable datarate
foreachresidentifthecompany usesa64-QAM technique?
21.Findthebandwidth forthefollowing situations ifweneedtomodulate a5-KHz
voice.
a.AM
b.PM(set~=5)
c.PM(set~=1)
22.Findthetotalnumberofchannels inthecorresponding bandallocated byFCC.
a.AM
b.FMCHAPTER 6
Bandwidth Utilization:
Multiplexing andSpreading
Inreallife,wehavelinkswithlimitedbandwidths. Thewiseuseofthesebandwidths
hasbeen,andwillbe,oneofthemainchallenges ofelectronic communications. How­
ever,themeaningofwisemaydependontheapplication. Sometimes weneedtocombine
severallow-bandwidth channels tomakeuseofonechannelwithalargerbandwidth.
Sometimes weneedtoexpandthebandwidth ofachanneltoachievegoalssuchas
privacyandantijamming. Inthischapter, weexplorethesetwobroadcategories of
bandwidth utilization: multiplexing andspreading. Inmultiplexing, ourgoaliseffi­
ciency;wecombine severalchannels intoone.Inspreading, ourgoalsareprivacyand
antijamming; weexpandthebandwidth ofachanneltoinsertredundancy, whichis
necessary toachievethesegoals.
Bandwidth utilization isthewiseuseofavailable bandwidth toachievespecificgoals.
Efficiency canbeachieved bymultiplexing;
privacyandantijamming canbeachieved byspreading.
6.1MULTIPLEXING
Whenever thebandwidth ofamedium linkingtwodevicesisgreaterthantheband­
widthneedsofthedevices,thelinkcanbeshared.Multiplexing is thesetoftechniques
thatallowsthesimultaneous transmission ofmultiple signalsacrossasingledatalink.
Asdataandtelecommunications useincreases, sodoestraffic.Wecanaccommodate
thisincreasebycontinuing toaddindividual linkseachtimeanewchannelisneeded;
orwecaninstallhigher-bandwidth linksanduseeachtocarrymultiple signals.As
described inChapter 7,today'stechnology includes high-bandwidth mediasuchas
opticalfiberandterrestrial andsatellitemicrowaves. Eachhasabandwidth farinexcess
ofthatneededfortheaveragetransmission signal.Ifthebandwidth ofalinkisgreater
thanthebandwidth needsofthedevicesconnected toit,thebandwidth iswasted.An
efficient system maximizes theutilization ofallresources; bandwidth isoneofthe
mostprecious resources wehaveindatacommunications.
161162CHAPTER 6BANDWIDTH UTILIZATION: MULTIPLEXING ANDSPREADING
Inamultiplexed system,nlinessharethebandwidth ofonelink.Figure6.1shows
thebasicformatofamultiplexed system.Thelinesontheleftdirecttheirtransmission
streamstoamultiplexer (MUX),whichcombines themintoasinglestream(many-to­
one).Atthereceiving end,thatstreamisfedintoademultiplexer (DEMUX), which
separates thestreambackintoitscomponent transmissions (one-to-many) and
directsthemtotheircorresponding lines.Inthefigure,thewordlinkreferstothe
physicalpath.Thewordchannelreferstotheportionofalinkthatcarriesatransmis­
sionbetweenagivenpairoflines.Onelinkcanhavemany(n)channels.
Figure6.1Dividing alinkintochannels
nInput
lines~MUX:Multiplexer /
DEMUX: Demultiplexer D
M E
•U ,M· ·X U· · X· Ilink,11channels
/ ~nOutput
lines
Therearethreebasicmultiplexing techniques: frequency-division multiplexing,
wavelength-division multiplexing, andtime-division multiplexing. Thefirsttwoare
techniques designed foranalogsignals,thethird,fordigitalsignals(seeFigure6.2).
Figure6.2Categories ofmultiplexing
Multiplexing
I
I I I
Frequency-divisionIWavelength-division Time-division
multiplexing multiplexing multiplexing
Analog Analog Digital
Although sometextbooks consider carrierdivisionmultipleaccess(COMA) asa
fourthmultiplexing category, wediscussCOMAasanaccessmethod(seeChapter12).
Frequency -Division Multiplexing
Frequency-division multiplexing (FDM)isananalogtechnique thatcanbeapplied
whenthebandwidth ofalink(inhertz)isgreaterthanthecombined bandwidths of
thesignalstobetransmitted. InFOM,signalsgenerated byeachsendingdevice modu­
latedifferentcarrierfrequencies. Thesemodulated signalsarethencombined intoasingle
composite signalthatcanbetransported bythelink.Carrierfrequencies areseparated by
sufficient bandwidth toaccommodate themodulated signal.Thesebandwidth rangesare
thechannels throughwhichthevarioussignalstravel.Channels canbeseparated bySECTION 6.1MULTIPLEXING 163
stripsofunusedbandwidth-guard bands-to preventsignalsfromoverlapping. In
addition, carrierfrequencies mustnotinterferewiththeoriginaldatafrequencies.
Figure6.3givesaconceptual viewofFDM.Inthisillustration, thetransmission path
isdividedintothreeparts,eachrepresenting achannelthatcarriesonetransmission.
Figure6.3Frequency-division multiplexing
D
MChannel J EInputU Chanllel2 MOutput
lines JinesX U
X
Weconsider FDMtobeananalogmultiplexing technique; however, thisdoesnot
meanthatFDMcannotbeusedtocombine sourcessendingdigitalsignals.Adigital
signalcanbeconverted toananalogsignal(withthetechniques discussed inChapter5)
beforeFDMisusedtomultiplex them.
FDMisananalogmultiplexing technique thatcombines analogsignals.
Multiplexing Process
Figure6.4isaconceptual illustration ofthemultiplexing process.Eachsourcegener­
atesasignalofasimilarfrequency range.Insidethemultiplexer, thesesimilarsignals
modulates different carrierfrequencies (/1,12,andh).Theresulting modulated signals
arethencombined intoasinglecomposite signalthatissentoutoveramedialinkthat
hasenoughbandwidth toaccommodate it.
Figure6.4FDMprocess
Modulator
U!UUUUA!!!Amvmvmnm
CarrierhModulator
flOflflflflflflVVlJl)l)VVV
Carrierh
Baseband
analogsignalsModulator/\/\/\/\V\TV\)
Carrier!1164CHAPTER 6BANDWIDTH UTILIZATION: MULTIPLEXING ANDSPREADING
Demultiplexing Process
Thedemultiplexer usesaseriesoffilterstodecompose themultiplexed signalintoits
constituent component signals.Theindividual signalsarethenpassedtoademodulator
thatseparates themfromtheircarriersandpassesthemtotheoutputlines.Figure6.5is
aconceptual illustration ofdemultiplexing process.
Figure6.5FDMdemultiplexing example
DemodulatorAAAAVVVV
Carrier!l
Baseband
analogsignalsDemodulator
AA!!AAAAAAAAAA!!mvmvmmn
Carrierh
~/-- ,
\ '
\"-
•:==D=e=m=o=d=ul=at=or==~
" \AAAAAnAAvvvvvvvv
'----~ ....~'./1' ~~ Carrierh
Example 6.1
Assumethatavoicechanneloccupies abandwidth of4kHz.Weneedtocombine threevoice
channels intoalinkwithabandwidth of12kHz,from20to32kHz.Showtheconfiguration,
usingthefrequency domain.Assumetherearenoguardbands.
Solution
Weshift(modulate) eachofthethreevoicechannels toadifferent bandwidth, asshowninFig­
ure6.6.Weusethe20-to24-kHzbandwidth forthefirstchannel, the24-to28-kHzbandwidth
forthesecondchannel, andthe28-to32-kHzbandwidth forthethirdone.Thenwecombine
themasshowninFigure6.6.Atthereceiver, eachchannelreceivestheentiresignal,usinga
filtertoseparate outitsownsignal.Thefirstchannelusesafilterthatpassesfrequencies
between 20and24kHzandfiltersout(discards) anyotherfrequencies. Thesecondchannel
usesafilterthatpassesfrequencies between 24and28kHz,andthethirdchannelusesafilter
thatpassesfrequencies between28and32kHz.Eachchannelthenshiftsthefrequency tostart
fromzero.
Example 6.2
Fivechannels, eachwithalOa-kHz bandwidth, aretobemultiplexed together. Whatisthemini­
mumbandwidth ofthelinkifthereisaneedforaguardbandof10kHzbetweenthechannels to
preventinterference?
Solution
Forfivechannels, weneedatleastfourguardbands.Thismeansthattherequiredbandwidth isat
least5x100+4x10=540kHz,asshowninFigure6.7.SECTION 6.1MULTIPLEXING 165
Figure6.6Example 6.1
Shiftandcombine
Higher-bandwidth link
Bandpass
filter
Bandpass
filter
Figure6.7Example 6.2
Guardband
of10kHz
I.100kHz-Ill'100kHz_I
I·2024-_.._-
2428
540kHz
Example 6.3
Fourdatachannels (digital), eachtransmitting atIMbps,useasatellitechannelofIMHz.
Designanappropriate configuration, usingFDM.
Solution
Thesatellitechannelisanalog.Wedivideitintofourchannels, eachchannelhavinga2S0-kHz
bandwidth. EachdigitalchannelofIMbpsismodulated suchthateach4bitsismodulated to
1Hz.Onesolutionis16-QAM modulation. Figure6.8showsonepossibleconfiguration.
TheAnalogCarrierSystem
Tomaximize theefficiency oftheirinfrastructure, telephone companies havetradition­
allymultiplexed signalsfromlower-bandwidth linesontohigher-bandwidth lines.Inthis
way,manyswitched orleasedlinescanbecombined intofewerbutbiggerchannels. For
analoglines,FDMisused.166 CHAPTER 6BANDWIDTH UTILIZATION: MULTIPLEXING ANDSPREADING
Figure6.8Example 6.3
IMbps 250kHz
Digital Analog
IMbps 250kHz
Digital AnalogIMHz
IMbps 250kHz
Digital Analog
IMbps 250kHz
Digital Analog
Oneofthesehierarchical systems usedbyAT&Tismadeupofgroups,super­
groups,mastergroups,andjumbogroups(seeFigure6.9).
Figure6.9Analoghierarchy
48kHz
12voicechannels
Jumbo
group16.984MHz
3600voicechannels
§.- ~F
~-..-jD
!:l M
~-.....~E
'.Q-.....~en
g.----i~ FMastergroup
~ D
~----:l.~1 M
:=:F
Dt------i~
MGroup
Inthisanaloghierarchy, 12voicechannels aremultiplexed ontoahigher-bandwidth
linetocreateagroup.Agrouphas48kHzofbandwidth andsupports 12voicechannels.
Atthenextlevel,uptofivegroupscanbemultiplexed tocreateacomposite signal
calledasupergroup. Asupergroup hasabandwidth of240kHzandsupports upto
60voicechannels. Supergroups canbemadeupofeitherfivegroupsor60independent
voicechannels.
Atthenextlevel,10supergroups aremultiplexed tocreateamastergroup.A
mastergroupmusthave2.40MHzofbandwidth, buttheneedforguardbands between
thesupergroups increases thenecessary bandwidth to2.52MHz.Mastergroupssupport
upto600voicechannels.
Finally,sixmastergroupscanbecombined intoajumbogroup.Ajumbogroup
musthave15.12MHz(6x2.52MHz)butisaugmented to16.984MHztoallowfor
guard bands betweenthemastergroups.SECTION 6.1MULTIPLEXING 167
OtherApplications ofFDM
Averycommon application ofFDMisAMandFMradiobroadcasting. Radiousesthe
airasthetransmission medium. Aspecialbandfrom530to1700kHzisassignedtoAM
radio.Allradiostationsneedtosharethisband. As discussed inChapter5,eachAMsta­
tionneeds10kHzofbandwidth. Eachstationusesadifferent carrierfrequency, which
meansitisshiftingitssignalandmultiplexing. Thesignalthatgoestotheairisacombi­
nationofsignals.Areceiverreceivesallthesesignals,butfilters(bytuning)onlytheone
whichisdesired.Withoutmultiplexing, onlyoneAMstationcouldbroadcast tothecom­
monlink,theair.However, weneedtoknowthatthereisphysicalmultiplexer ordemulti­
plexerhere.AswewillseeinChapter12multiplexing isdoneatthedatalinklayer.
Thesituation issimilarinFMbroadcasting. However, FMhasawiderbandof88
to108MHzbecauseeachstationneedsabandwidth of200kHz.
Anothercommon useofFDMisintelevision broadcasting. EachTVchannelhas
itsownbandwidth of6MHz.
Thefirstgeneration ofcellulartelephones (stillinoperation) alsousesFDM.Each
userisassigned two30-kHzchannels, oneforsendingvoiceandtheotherforreceiving.
Thevoicesignal,whichhasabandwidth of3kHz(from300to3300Hz),ismodulated by
usingFM.Remember thatanFMsignalhasabandwidth 10timesthatofthemodulating
signal,whichmeanseachchannelhas30kHz(10x3)ofbandwidth. Therefore, eachuser
isgiven,bythebasestation,a60-kHzbandwidth inarangeavailable atthetimeofthecall.
Example 6.4
TheAdvanced MobilePhoneSystem(AMPS) usestwobands.Thefirstbandof824to849MHz
isusedforsending, and869to894MHzisusedforreceiving. Eachuserhasabandwidth of
30kHzineachdirection. The3-kHzvoiceismodulated usingFM,creating30kHzofmodulated
signal.Howmany people canusetheircellularphonessimultaneously?
Solution
Eachbandis25MHz.Ifwedivide25MHzby30kHz,weget833.33.Inreality,thebandisdivided
into832channels. Ofthese,42channels areusedforcontrol,whichmeansonly790channels are
available forcellularphoneusers.WediscussAMPSingreaterdetailinChapter16.
Implementation
FDMcanbeimplemented veryeasily.Inmanycases,suchasradioandtelevision
broadcasting, thereisnoneedforaphysical multiplexer ordemultiplexer. Aslongas
thestations agree tosendtheirbroadcasts totheairusingdifferent carrierfrequencies,
multiplexing isachieved. Inothercases,suchasthecellulartelephone system,abase
stationneedstoassignacarrierfrequency tothetelephone user.Thereisnotenough
bandwidth inacelltopermanently assignabandwidth rangetoeverytelephone user.
Whenauserhangsup,herorhisbandwidth isassigned toanothercaller.
Wavelength -Division Multiplexing
Wavelength-division multiplexing (WDM) isdesigned tousethehigh-data-rate
capability offiber-optic cable.Theopticalfiberdatarateishigherthanthedatarateof
metallictransmission cable.Usingafiber-optic cableforonesinglelinewastesthe
available bandwidth. Multiplexing allowsustocombine severallinesintoone.168 CHAPTER 6BANDWIDTH UTILIZATION: MULTIPLEXING ANDSPREADING
WDMisconceptually thesameasFDM,exceptthatthemultiplexing anddemulti­
plexinginvolveopticalsignalstransmitted throughfiber-optic channels. Theideaisthe
same:Wearecombining different signalsofdifferent frequencies. Thedifference is
thatthefrequencies areveryhigh.
Figure6.10givesaconceptual viewofaWDMmultiplexer anddemultiplexer.
Verynarrowbandsoflightfromdifferent sourcesarecombined tomakeawiderband
oflight.Atthereceiver, thesignalsareseparated bythedemultiplexer.
Figure6.10Wavelength-division multiplexing
AIfl f\.
AI
AZflflflfl flAzAi+Az+A3fl fl
A:J A:J
WDMisananalogmultiplexing technique tocombineopticalsignals.
Although WDMtechnology isverycomplex, thebasicideaisverysimple.We
wanttocombine multiplelightsourcesintoonesinglelightatthemultiplexer anddo
thereverseatthedemultiplexer. Thecombining andsplittingoflightsourcesareeasily
handledbyaprism.Recallfrombasicphysicsthataprismbendsabeamoflightbased
ontheangleofincidence andthefrequency. Usingthistechnique, amultiplexer canbe
madetocombine severalinputbeamsoflight,eachcontaining anarrowbandoffre­
quencies, intooneoutputbeamofawiderbandoffrequencies. Ademultiplexer can
alsobemadetoreversetheprocess.Figure6.11showstheconcept.
:Figure6.11Prismsinwavelength-division multiplexing anddemultiplexing
MultiplexerFiber-optic cable
Demultiplexer
Oneapplication ofWDMistheSONET network inwhichmultiple optical
fiberlinesaremultiplexed anddemultiplexed. WediscussSONETinChapter17.
Anewmethod,calleddenseWDM(DWDM), canmultiplex averylargenumber
ofchannels byspacingchannels veryclosetooneanother.Itachieves evengreater
efficiency.SECTION 6.1MULTIPLEXING 169
Synchronous Time-Division Multiplexing
Time-division multiplexing (TDM)isadigitalprocessthatallowsseveralconnections
tosharethehighbandwidth ofalinleInsteadofsharingaportionofthebandwidth asin
FDM,timeisshared.Eachconnection occupies aportionoftimeinthelink.Figure6.12
givesaconceptual viewofTDM.NotethatthesamelinkisusedasinFDM;here,how­
ever,thelinkisshownsectioned bytimeratherthanbyfrequency. Inthefigure,portions
ofsignals1,2,3,and4occupythelinksequentially.
Figure6.12TDM
Dataflow
. D 2EJ--..::--{§:~
l'4321M
U 3Xt---~=~-~_t--L-L-.l...--'--= .........-"'=..L...;;...J...-...l...-...l...-...J.........j2
M ~,
U 4 3 2 1t'3
3 X
r=:~---l
NotethatinFigure6.12weareconcerned withonlymultiplexing, notswitching.
Thismeansthatallthedatainamessage fromsource1alwaysgotoonespecificdesti­
nation,beit1,2,3,or4.Thedelivery isfixedandunvarying, unlikeswitching.
Wealsoneedtoremember thatTDMis,inprinciple, adigitalmultiplexing technique.
Digitaldatafromdifferent sourcesarecombined intoonetimesharedlink.However, this
doesnotmeanthatthesourcescannotproduceanalogdata;analogdatacanbesampled,
changed todigitaldata,andthenmultiplexed byusingTDM.
TDMisadigitalmultiplexing technique forcombining
severallow-ratechannels intoonehigh-rate one.
WecandivideTDMintotwodifferent schemes: synchronous andstatistical. Wefirst
discusssynchronous TDMandthenshowhowstatistical TDMdiffers.Insynchronous
TDM,eachinputconnection hasanallotment intheoutputevenifitisnotsendingdata.
TimeSlotsandFrames
Insynchronous TDM,thedataflowofeachinputconnection isdividedintounits,where
eachinputoccupies oneinputtimeslot.Aunitcanbe1bit,onecharacter, oroneblockof
data.Eachinputunitbecomes oneoutputunitandoccupies oneoutputtimeslot.How­
ever,thedurationofanoutputtimeslotisntimesshorterthantheduration ofaninput
timeslot.IfaninputtimeslotisTs,theoutputtimeslotisTins,wherenisthenumber
ofconnections. Inotherwords,aunitintheoutputconnection hasashorterduration; it
travelsfaster.Figure6.13showsanexample ofsynchronous TDMwherenis3.170 CHAPTER 6BANDWIDTH UTILIZATION: MULTIPLEXING ANDSPREADING
Figure6.13Synchronous time-division multiplexing
Dataaretakenfromeach
lineeveryTs.Eachframeis3timeslots.
EachtimeslotdurationisTf3s.BlT
Al
ClJil
A2
B2T
C2JlfT
C3A3
B3If
Insynchronous TDM,aroundofdataunitsfromeachinputconnection iscollected
intoaframe(wewillseethereasonforthisshortly).Ifwehavenconnections, aframe
isdividedintontimeslotsandoneslotisallocated foreachunit,oneforeachinput
line.IfthedurationoftheinputunitisT,thedurationofeachslotisTinandthedura­
tionofeachframeisT(unlessaframecarriessomeotherinformation, aswewillsee
shortly).
Thedatarateoftheoutputlinkmustbentimesthedatarateofaconnection to
guarantee theflowofdata.InFigure6.13,thedatarateofthelinkis3timesthedata
rateofaconnection; likewise, theduration ofaunitonaconnection is3timesthatof
thetimeslot(duration ofaunitonthelink).Inthefigurewerepresent thedatapriorto
multiplexing as3timesthesizeofthedataaftermultiplexing. Thisisjusttoconveythe
ideathateachunitis3timeslongerindurationbeforemultiplexing thanafter.
Insynchronous TDM,thedatarateofthelinkisntimesfaster,
andtheunitduration isntimesshorter.
Timeslotsaregrouped intoframes.Aframeconsistsofonecomplete cycleof
timeslots,withone slotdedicated toeachsendingdevice.Inasystemwithninput
lines,eachframehasnslots,witheachslotallocated tocarrying datafromaspecific
inputline.
Example 6.5
InFigure6.13,thedatarateforeachinputconnection is3kbps.If1bitatatimeismultiplexed (a
unitis1bit),whatisthedurationof(a)eachinputslot,(b)eachoutputslot,and(c)eachframe?
Solution
Wecananswerthequestions asfollows:
a.Thedatarateofeachinputconnection is1kbps.Thismeansthatthebitdurationis111000s
or1ms.Thedurationoftheinputtimeslotis1ms(sameasbitduration).
b.Thedurationofeachoutputtimeslotisone-third oftheinputtimeslot.Thismeansthatthe
durationoftheoutputtimeslotis1/3ms.
c.Eachframecarriesthreeoutputtimeslots.Sothedurationofaframeis3x113ms,or1ms.
Thedurationofaframeisthesameasthedurationofaninputunit.SECTION 6.1MULTIPLEXING 171
Example 6.6
Figure6.14showssynchronous TOMwithadatastreamforeachinputandonedatastreamfor
theoutput.Theunitofdatais1bit.Find(a)theinputbitduration, (b)theoutputbitduration,
(c)theoutputbitrate,and(d)theoutputframerate.
Figure6.14Example 6.6
IMbps•••1
1Mbps•••00 0 0
1Mbps•••10 0
1Mbps•••00 0o
oFrames
•••ffilQI!][Q]QJQliJ1III[Q[QJQli]"
Solution
Wecananswerthequestions asfollows:
a.Theinputbitdurationistheinverseofthebitrate:1/1Mbps=1lls.
b.Theoutputbitdurationisone-fourth oftheinputbitduration, or1/411s.
c.Theoutputbitrateistheinverseoftheoutputbitdurationor1/4lls,or4Mbps.Thiscanalso
bededucedfromthefactthattheoutputrateis4timesasfastasanyinputrate;sotheoutput
rate=4 x 1Mbps=4Mbps.
d.Theframerateisalwaysthesameasanyinputrate.Sotheframerateis1,000,000 framesper
second.Becausewearesending4bitsineachframe,wecanverifytheresultoftheprevious
questionbymultiplying theframeratebythenumberofbitsperframe.
Example 6.7
Fourl-kbpsconnections aremultiplexed together. AunitisIbit.Find(a)theduration ofIbit
beforemultiplexing, (b)thetransmission rateofthelink,(c)theduration ofatimeslot,and
(d)thedurationofaframe.
Solution
Wecananswerthequestions asfollows:
a.Thedurationof1bitbeforemultiplexing is1/1kbps,or0.001s(lms).
b.Therateofthelinkis4timestherateofaconnection, or4kbps.
c.Theduration ofeachtimeslotisone-fourth ofthedurationofeachbitbeforemultiplexing,
or1/4msor250I.ls.Notethatwecanalsocalculate thisfromthedatarateofthelink,4kbps.
Thebitdurationistheinverseofthedatarate,or1/4kbpsor250I.ls.
d.Theduration ofaframeisalwaysthesameasthedurationofaunitbeforemultiplexing, or
Ims.Wecanalsocalculate thisinanotherway.Eachframeinthiscasehasfouftimeslots.
Sothedurationofaframeis4times250I.ls,orIms.
Interleaving
TDMcanbevisualized astwofast-rotating switches, oneonthemultiplexing sideand
theotheronthedemultiplexing side.Theswitches aresynchronized androtateatthe
samespeed,butinopposite directions. Onthemultiplexing side,astheswitchopens172CHAPTER 6BANDWIDTH UTILIZATION: MULTIPLEXING ANDSPREADING
infrontofaconnection, thatconnection hastheopportunity tosendaunitontothe
path.Thisprocessiscalledinterleaving. Onthedemultiplexing side,astheswitch
opensinfrontofaconnection, thatconnection hastheopportunity toreceiveaunit
fromthepath.
Figure6.15showstheinterleaving processfortheconnection showninFigure6.13.
Inthisfigure,weassumethatnoswitching isinvolved andthatthedatafromthefirst
connection atthemultiplexer sitegotothefirstconnection atthedemultiplexer. We
discussswitching inChapter8.
Figure6.15Interleaving
A3 A2Alc=J[==:Jc::::::J
B3B2Bl~~~
C3C2CI
c=:::J[==:Jc::::::Jr - - - - - - - - - - Synchronization - - - - - - - - - ,
I
IIIIA3 A2 Al
[==:J[==:Jc:::J
B3B2Bl~~~
C3C2Clc:::Jr:::::Jc=:::J
Example 6.8
Fourchannels aremultiplexed usingTDM.Ifeachchannelsends100bytesisandwemultiplex
1byteperchannel, showtheframetraveling onthelink,thesizeoftheframe,theduration ofa
frame,theframerate,andthebitrateforthelink.
Solution
Themultiplexer isshowninFigure6.16.Eachframecarries1bytefromeachchannel;thesizeof
eachframe,therefore, is4bytes,or32bits.Becauseeachchannelissending100bytes/sanda
framecarries1bytefromeachchannel,theframeratemustbe100framespersecond.Thedura­
tionofaframeistherefore 11100s.Thelinkiscarrying 100framespersecond,andsinceeach
framecontains32bits,thebitrateis100x32,or3200bps.Thisisactually4timesthebitrateof
eachchannel,whichis100x 8=800bps.
Figure6.16Example 6.8
-100bytes/sFrame4bytes Frame4bytes
32bits 32bits
II1,*"tiJ'I...IIg~II
100frames/s
3200bps
Frameduration ==160sSECTION 6.1MULTIPLEXING 173
Example 6.9
Amultiplexer combines four100-kbps channels usingatimeslotof2bits.Showtheoutputwith
fourarbitrary inputs.Whatistheframerate?Whatistheframeduration? Whatisthebitrate?
Whatisthebitduration?
Solution
Figure6.17showstheoutputforfourarbitrary inputs.Thelinkcarries50,000framespersecond
sinceeachframecontains2bitsperchannel.Theframedurationistherefore 1/50,000 sor20~s.
Theframerateis50,000framespersecond,andeachframecarries8bits;thebitrateis50,000x
8=400,000bitsor400kbps.Thebitdurationis1/400,000 s,or2.5IJ.s.Notethattheframedura­
tionis8timesthebitdurationbecauseeachframeiscarrying8bits.
Figure6.17Example 6.9
·..110010100kbps...001010100kbps·..101101
100kbps·..000111100kbpsFrameduration=lI50,000 s=20Ils
Frame:8bitsFrame:8bitsFrame:8bits...
~~~
50,000frames/s
400kbps
EmptySlots
Synchronous TDMisnotasefficientasitcouldbe.Ifasourcedoesnothavedatato
send,thecorresponding slotintheoutputframeisempty.Figure6.18showsacasein
whichoneoftheinputlineshasnodatatosendandoneslotinanotherinputlinehas
discontinuous data.
Figure6.18Emptyslots
II II
I~0110 DII~01
Thefirstoutputframehasthreeslotsfilled,thesecondframehastwoslotsfilled,
andthethirdframehasthreeslotsfilled.Noframeisfull.Welearninthenextsection
thatstatistical TDMcanimprovetheefficiency byremoving theemptyslotsfromthe
frame.
DataRateManagement
Oneproblem withTDMishowtohandleadisparity intheinputdatarates.Inallour
discussion sofar,weassumedthatthedataratesofallinputlineswerethesame.However,174CHAPTER 6BANDWIDTH UTILIZATION: MULTIPLEXING ANDSPREADING
ifdataratesarenotthesame,threestrategies, oracombination ofthem,canbeused.
Wecallthesethreestrategies multilevel multiplexing, multiple-slot allocation, and
pulsestuffing.
Multilevel Multiplexing Multilevel multiplexing isatechnique usedwhenthedata
rateofaninputlineisamultipleofothers.Forexample, inFigure6.19,wehavetwo
inputsof20kbpsandthreeinputsof40kbps.Thefirsttwoinputlinescanbemulti­
plexedtogethertoprovideadatarateequaltothelastthree.Asecondlevelofmulti­
plexingcancreateanoutputof160kbps.
Figure6.19Multilevel multiplexing
20kbps----;"\>------t20kbps----I
40kbps--------1
40kbps--------1
40kbps--------1160kbps
Multiple-Slot Allocation Sometimes itismoreefficienttoallotmorethanoneslotin
aframetoasingleinputline.Forexample, wemighthaveaninputlinethathasadata
ratethatisamultipleofanotherinput.InFigure6.20,theinputlinewithaSO-kbpsdata
ratecanbegiventwoslotsintheoutput.Weinsertaserial-to-parallel converter inthe
linetomaketwoinputsoutofone.
Figure6.20Multiple-slot multiplexing
50kbps
25kbps-------1
25kbps-------1
25kbps-------1/Theinputwitha
50-kHzdataratehastwo
slotsineachframe.
PulseStuffing Sometimes thebitratesofsourcesarenotmultiple integersofeach
other.Therefore, neitherofthe above twotechniques canbeapplied.Onesolutionisto
makethehighestinputdataratethedominant datarateandthenadddummybitstothe
inputlineswithlowerrates.Thiswillincreasetheirrates.Thistechnique iscalledpulse
stuffing,bitpadding, orbitstuffing.TheideaisshowninFigure6.21.Theinputwitha
datarateof46ispulse-stuffed toincreasetherateto50kbps.Nowmultiplexing can
takeplace.SECTION 6.1MULTIPLEXING 175
Figure6.21Pulsestuffing
50kbps----------1
50kbps----------1
46kbps---I150kbps
FrameSynchronizing
Theimplementation ofTDMisnotassimpleasthatofFDM.Synchronization between
themultiplexer anddemultiplexer isamajorissue.Ifthe.multiplexer andthedemulti­
plexerarenotsynchronized, abitbelonging toonechannelmaybe received bythe
wrongchannel. Forthisreason,oneormoresynchronization bitsareusuallyaddedto
thebeginning ofeachframe.Thesebits,calledframing bits,followapattern,frameto
frame,thatallowsthedemultiplexer tosynchronize withtheincoming streamsothatit
canseparatethetimeslotsaccurately. Inmostcases,thissynchronization information
consistsof1bitperframe,alternating between0andI,asshowninFigure6.22.
Figure6.22Framing bits
I1 0 1ISynchronization
pattern
Frame3 Frame2 Frame1
C3IB3IA3 182IA2 CIIIAl.:11II:00I I I:0 :11I:0I
I
Example 6.10
Wehavefoursources,eachcreating250characters persecond.Iftheinterleaved unitisacharacter
and1synchronizing bitisaddedtoeachframe,find(a)thedatarateofeachsource,(b)theduration
ofeachcharacter ineachsource,(c)theframerate,(d)theduration ofeachframe,(e)thenumberof
bitsineachframe,and(f)thedatarateofthelink.
Solution
Wecananswerthequestions asfollows:
a.Thedatarateofeachsourceis250x8=2000bps=2kbps.
b.Eachsourcesends250characters persecond;therefore, thedurationofacharacter is1/250s,
or4ms.
c.Eachframehasonecharacter fromeachsource,whichmeansthelinkneedstosend
250framespersecondtokeepthetransmission rateofeachsource.
d.Theduration ofeachframeis11250s,or4ms.Notethatthedurationofeachframeisthe
sameasthedurationofeachcharacter comingfromeachsource.
e.Eachframecarries4characters andIextrasynchronizing bit.Thismeansthateachframeis
4 x 8+1=33bits.176CHAPTER 6BANDWIDTH UTILIZATION: MULTIPLEXING ANDSPREADING
f.Thelinksends250framespersecond,andeachframecontains 33bits.Thismeansthatthe
datarateofthelinkis250x33,or8250bps.Notethatthebitrateofthelinkisgreaterthan
thecombined bitratesofthefourchannels. Ifweaddthebitratesoffourchannels, weget
8000bps.Because 250framesaretraveling persecondandeachcontains 1extrabitfor
synchronizing, weneedtoadd250tothesumtoget8250bps.
Example 6.11
Twochannels, onewithabitrateof100kbpsandanotherwithabitrateof200kbps,aretobe
multiplexed. Howthiscanbeachieved? Whatistheframerate?Whatistheframeduration?
Whatisthebitrateofthelink?
Solution
Wecanallocateoneslottothefirstchannelandtwoslotstothesecondchannel.Eachframecar­
ries3bits.Theframerateis100,000framespersecondbecauseitcarries1bitfromthefirst
channel.Theframe duration is1/100,000 s,or10ms.Thebitrateis100,000frames/sx 3bitsper
frame,or300kbps.Notethatbecauseeachframecarries1bitfromthefirstchannel,thebitrate
forthefirstchannelispreserved. Thebitrateforthesecondchannelisalsopreserved because
eachframecarries2bitsfromthesecondchannel.
DigitalSignalService
Telephone companies implement TDMthroughahierarchy ofdigitalsignals,called
digitalsignal(DS)serviceordigitalhierarchy. Figure6.23showsthedataratessup­
portedbyeachlevel.
Figure6.23Digitalhierarchy
OS-4•274.176Mbps
60S-3
OS-3
T
D
M--+-\6.312Mbps
405-1
T
D:--- ......~
--~MOS-2T
D
M
1.544Mbps
24DS-OOS-1os-o
oADS-Oserviceisasingledigitalchannelof64kbps.
ODS-I isa1.544-Mbps service;1.544Mbpsis24times64kbpsplus8kbpsof
overhead. Itcanbeusedasasingleservicefor1.544-Mbps transmissions, oritcan
beusedtomultiplex 24DS-Ochannels ortocarryanyothercombination desired
bytheuserthatcanfitwithinits1.544-Mbps capacity.
oDS-2isa6.312-Mbps service;6.312Mbpsis96times64kbpsplus168kbpsof
overhead.Itcanbeusedasasingleservicefor6.312-Mbps transmissions; oritcanSECTION 6.1MULTIPLEXING 177
beusedtomultiplex 4DS-lchannels, 96DS-Ochannels, oracombination ofthese
servicetypes.
oDS-3isa44.376-Mbps service;44.376Mbps is672times64kbpsplus1.368Mbps
ofoverhead.Itcanbeusedasasingleservicefor44.376-Mbps transmissions; orit
canbeusedtomultiplex 7DS-2channels, 28DS-lchannels, 672DS-Ochannels,
oracombination oftheseservicetypes.
oDS-4isa274.176-Mbps service;274.176is4032times64kbpsplus16.128Mbpsof
overhead.Itcanbeusedtomultiplex 6DS-3channels, 42DS-2channels, 168DS-l
channels, 4032DS-Ochannels, oracombination oftheseservicetypes.
TLines
DS-O,DS-l,andsoonarethenamesofservices. Toimplement thoseservices, thetele­
phonecompanies useTlines(T-ltoT-4).Thesearelineswithcapacities precisely
matched tothedataratesoftheDS-ltoDS-4services(seeTable6.1).SofaronlyT-l
andT-3linesarecommercially available.
Table6.1DSandTlinerates
Sen/ice Line Rate(Mbps) VoiceChannels
DS-1 T-1 1.544 24
DS-2 T-2 6.312 96
DS-3 T-3 44.736 672
DS-4 T-4 274.176 4032
TheT-llineisusedtoimplement DS-l;T-2isusedtoimplement DS-2;andsoon.
AsyoucanseefromTable6.1,DS-Oisnotactuallyofferedasaservice,butithasbeen
definedasabasisforreference purposes.
TLinesforAnalogTransmission
Tlinesaredigitallinesdesigned forthetransmission ofdigitaldata,audio,orvideo.
However, theyalsocanbeusedforanalogtransmission (regulartelephone connec­
tions),provided theanalogsignalsarefirstsampled, thentime-division multiplexed.
Thepossibility ofusingTlinesasanalogcarriersopenedupanewgeneration of
servicesforthetelephone companies. Earlier,whenanorganization wanted24separate
telephone lines,itneededtorun24twisted-pair cablesfromthecompany tothecentral
exchange. (Remember thoseoldmoviesshowing abusyexecutive with10telephones
lineduponhisdesk?Ortheoldofficetelephones withabigfatcablerunningfrom
them?Thosecablescontained abundleofseparatelines.)Today,thatsameorganization
cancombine the24linesintooneT-llineandrunonlytheT-llinetotheexchange.
Figure6.24showshow24voicechannels canbemultiplexed ontooneT-Iline.(Refer
toChapter5forPCMencoding.)
TheT-1Frame Asnotedabove,DS-lrequires8kbpsofoverhead. Tounderstand how
thisoverhead iscalculated, wemustexaminetheformatofa24-voice-channel frame.
TheframeusedonaT-llineisusually193bitsdividedinto24slotsof8bitseach
plus1extrabitforsynchronization (24x 8+1=193);seeFigure6.25.Inotherwords,178CHAPTER 6BANDWIDTH UTILIZATION: MULTIPLEXING ANDSPREADING
Figure6.24T-llineformultiplexing telephone lines
Sampling at8000sampJes/s
Llsing8bitspersample
t
I)
MT-Iline1.544Mbps
24x64kbps+8kbpsoverhead
Figure6.25T-lframestructure
Samplen
I
1frame=193bitsIChannelI···1ChannelIIChannelI24 2 I
1bit8bits 8bits 8bits
FrameIFrameIIFrame ... ...n 2 1
T-I:8000frames/s=8000x193bps=1.544Mbps
eachslotcontains onesignalsegmentfromeachchannel; 24segments areinterleaved
inoneframe.IfaT-llinecarries8000frames,thedatarateis1.544Mbps(193x8000=
1.544Mbps)-the capacityoftheline.
ELines
Europeans useaversionofTlinescalledElines.Thetwosystemsareconceptually iden­
tical,buttheircapacities differ.Table6.2showstheElinesandtheircapacities.SECTION 6.1MULTIPLEXING 179
Table6.2Elinerates
Line Rate(Mbps) VoiceChannels
E-1 2.048 30
E-2 8.448 120
E-3 34.368 480
E-4 139.264 1920
MoreSynchronous TDMApplications
Somesecond-generation cellulartelephone companies usesynchronous TDM.For
example, thedigitalversionofcellulartelephony dividestheavailable bandwidth into
3D-kHzbands.Foreachband,TDMisappliedsothatsixuserscansharetheband.This
meansthateach3D-kHzbandisnowmadeofsixtimeslots,andthedigitized voicesig­
nalsoftheusersareinsertedintheslots.UsingTDM,thenumberoftelephone usersin
eachareaisnow6timesgreater.Wediscusssecond-generation cellulartelephony in
Chapter16.
Statistical Time-Division Multiplexing
Aswesawintheprevious section,insynchronous TDM,eachinputhasareserved slot
intheoutputframe.Thiscanbeinefficient ifsomeinputlineshavenodatatosend.In
statistical time-division multiplexing, slotsaredynamically allocated toimprove band­
widthefficiency. Onlywhenaninputlinehasaslot'sworthofdatatosendisitgivena
slotintheoutputframe.Instatistical multiplexing, thenumberofslotsineachframeis
lessthanthenumberofinputlines.Themultiplexer checkseachinput line inround­
robinfashion;itallocates aslotforaninputlineifthelinehasdatatosend;otherwise,
itskipsthelineandchecksthenextline.
Figure6.26showsasynchronous andastatistical TDMexample. Intheformer,
someslotsareemptybecause thecorresponding linedoesnothavedatatosend.In
thelatter,however, noslotisleftemptyaslongastherearedatatobesentbyany
inputline.
Addressing
Figure6.26alsoshowsamajordifference between slotsinsynchronous TDMand
statistical TDM.Anoutputslotinsynchronous TDMistotallyoccupied bydata;in
statistical TDM,aslotneedstocarrydataaswellastheaddressofthedestination.
Insynchronous TDM,thereisnoneedfor addressing; synchronization andpreassigned
relationships between theinputsandoutputsserveasanaddress.Weknow,forexam­
ple,thatinput1alwaysgoestoinput2.Ifthemultiplexer andthedemultiplexer are
synchronized, thisisguaranteed. Instatistical multiplexing, thereisnofixedrelation­
shipbetween theinputsandoutputsbecause therearenopreassigned orreserved
slots.Weneedtoincludetheaddressofthereceiverinsideeachslottoshowwhereit
istobedelivered. Theaddressing initssimplest formcanbenbitstodefineNdifferent
outputlineswithn=10g2N.Forexample, foreightdifferent outputlines,weneeda
3-bitaddress.180CHAPTER 6BANDWIDTH UTILIZATION: MULTIPLEXING ANDSPREADING
Figure6.26TDMslotcomparison
LineA----[:3:0
LineB
LineC--------{
Line0--i.iI~=~LineE
a.Synchronous TDM
LineA-----[=:ACH
LineB
LineC--------i
Line0
---:~~
LineE--I
b.Statistical TDM
SlotSize
Sinceaslotcarriesbothdataandanaddressinstatistical TDM,theratioofthedatasize
toaddresssizemustbereasonable tomaketransmission efficient. Forexample, it
wouldbeinefficient tosend1bitperslotasdatawhentheaddressis3bits.Thiswould
meananoverhead of300percent.Instatistical TDM,ablockofdataisusuallymany
byteswhiletheaddressisjustafewbytes.
NoSynchronization Bit
Thereisanotherdifference betweensynchronous andstatistical TDM,butthistimeitis
attheframelevel.Theframesinstatistical TDMneednotbesynchronized, sowedonot
needsynchronization bits.
Bandwidth
Instatistical TDM,thecapacityofthelinkisnormally lessthanthesumofthecapaci­
tiesofeachchannel. Thedesigners ofstatistical TDMdefinethecapacity ofthelink
basedonthestatistics oftheloadforeachchannel.Ifonaverageonlyxpercentofthe
inputslotsarefilled,thecapacityofthelinkreflectsthis.Ofcourse,duringpeaktimes,
someslotsneedtowait.
6.2SPREAD SPECTRUM
Multiplexing combines signalsfromseveralsourcestoachievebandwidth efficiency; the
available bandwidth ofalinkisdividedbetweenthesources.Inspreadspectrum (88),we
alsocombine signalsfromdifferent sourcestofitintoalargerbandwidth, butourgoalsSECTION 6.2SPREAD SPECTRUM 181
aresomewhat different. Spreadspectrum isdesigned tobeusedinwirelessapplications
(LANsandWANs).Inthesetypesofapplications, wehavesomeconcerns thatoutweigh
bandwidth efficiency. Inwirelessapplications, allstationsuseair(oravacuum) asthe
mediumforcommunication. Stationsmustbeabletosharethismediumwithoutintercep­
tionbyaneavesdropper andwithoutbeingsubjecttojamming fromamalicious intruder
(inmilitaryoperations, forexample).
Toachievethesegoals,spreadspectrum techniques addredundancy; theyspread
theoriginalspectrum neededforeachstation.Iftherequiredbandwidth foreachstation
isB,spreadspectrum expandsittoBss'suchthatBss»B.Theexpanded bandwidth
allowsthesourcetowrapitsmessage inaprotective envelope foramore secure trans­
mission.Ananalogyisthesendingofadelicate,expensive gift.Wecaninsertthegiftin
aspecialboxtopreventitfrombeingdamaged duringtransportation, andwecanusea
superiordeliveryservicetoguarantee thesafetyofthepackage.
Figure6.27showstheideaofspreadspectrum. Spreadspectrum achieves itsgoals
throughtwoprinciples:
1.Thebandwidth allocated toeachstationneedstobe,byfar,largerthanwhatis
needed.Thisallowsredundancy.
2.Theexpanding oftheoriginalbandwidth Btothebandwidth Bssmustbedonebya
processthatisindependent oftheoriginalsignal.Inotherwords,thespreading
processoccursafterthesignaliscreatedbythesource.
Figure6.27Spreadspectrum
BSSI' >I
Spreading
process
i
Spreading
code
Afterthesignaliscreatedbythesource,thespreading processusesaspreading
codeandspreadsthebandwidth. Thefigureshowstheoriginalbandwidth Bandthe
spreaded bandwidth Bss.Thespreading codeisaseriesofnumbers thatlookrandom,
butareactuallyapattern.
Therearetwotechniques tospreadthebandwidth: frequency hoppingspreadspec­
trum(FHSS)anddirectsequence spreadspectrum (DSSS).
Frequency Hopping SpreadSpectrum (FHSS)
Thefrequency hopping spreadspectrum (FHSS)technique usesMdifferent carrier
frequencies thataremodulated bythesourcesignal.Atonemoment, thesignalmodu­
latesonecarrierfrequency; atthenextmoment, thesignalmodulates anothercarrier182CHAPTER 6BANDWIDTH UTILIZATION: MULTIPLEXING ANDSPREADING
frequency. Although themodulation isdoneusingonecarrierfrequency atatime,
Mfrequencies areusedinthelongrun.Thebandwidth occupied byasourceafter
spreading isBpHSS»B.
Figure6.28showsthegenerallayoutforFHSS.Apseudorandom codegenerator,
calledpseudorandom noise(PN),createsak-bitpatternforeveryhopping periodTh•
Thefrequency tableusesthepatterntofindthefrequency tobeusedforthishopping
periodandpassesittothefrequency synthesizer. Thefrequency synthesizer createsa
carriersignalofthatfrequency, andthesourcesignalmodulates thecarriersignal.
Figure6.28Frequency hoppingspreadspectrum (FHSS)
Modulator
t- --lt-~Spread
signalOriginal --I----------'l~
signal
Frequency table
Supposewehavedecidedtohaveeighthoppingfrequencies. Thisisextremely low
forrealapplications andisjustforillustration. Inthiscase,Mis8andkis3.Thepseudo­
randomcodegenerator willcreateeightdifferent 3-bitpatterns. Thesearemappedto
eightdifferentfrequencies inthefrequency table(seeFigure6.29).
Figure6.29Frequency selection inFHSS
First-hop frequencyt
k-bitFrequency
k-bilpatterns000200kHz
001300kHz
1101111001000010110011100I010400kHz
011500kHz
I Firstselection100600kHz
101700kHz--UQ800kHz
III900kHz
Frequency tableSECTION 6.2SPREAD SPECTRUM 183
Thepatternforthisstationis101,111,001, 000, 010,all,100.Notethatthepat­
ternispseudorandom itisrepeated aftereighthoppings. Thismeansthatathopping
period1,thepatternis101.Thefrequency selectedis700kHz;thesourcesignalmod­
ulatesthiscarrierfrequency. Thesecondk-bitpatternselectedis111,whichselectsthe
900-kHz carrier;theeighthpatternis100,thefrequency is600kHz.Aftereighthop­
pings,thepatternrepeats,startingfrom101again.Figure6.30showshowthesignalhops
aroundfromcarriertocarrier.Weassumetherequiredbandwidth oftheoriginalsignal
is100kHz.
Figure6.30FHSScycles
Carrier
frequencies
(kHz)
••..Cycle1
D
cPCycle2
D••900
800
700
600
500
400
300
200
1 2 3 4 5 6 7 8 9 10111213 14 l516Hop
periods
Itcanbeshownthatthisschemecanaccomplish thepreviously mentioned goals.
Iftherearemanyk-bitpatternsandthehoppingperiodisshort,asenderandreceiver
canhaveprivacy.Ifanintrudertriestointercept thetransmitted signal,shecanonly
accessasmallpieceofdatabecause shedoesnotknowthespreading sequence to
quicklyadaptherselftothenexthop.Theschemehasalsoanantijamming effect.A
malicious sendermaybeabletosendnoisetojamthesignalforonehoppingperiod
(randomly), butnotforthewholeperiod.
Bandwidth Sharing
Ifthenumberofhoppingfrequencies isM,wecanmultiplex Mchannelsintoonebyusing
thesameBssbandwidth. Thisispossiblebecauseastationusesjustonefrequency ineach
hoppingperiod;M-1otherfrequencies canbeusedbyotherM-1stations.Inother
words,MdifferentstationscanusethesameBssifanappropriate modulation technique
suchasmultipleFSK(MFSK)isused.FHSSissimilartoFDM,asshowninFigure6.31.
Figure6.31showsanexample offourchannels usingFDMandfourchannels
usingFHSS.InFDM,eachstationuses11Mofthebandwidth, buttheallocation is
fixed;inFHSS,eachstationuses11Mofthebandwidth, buttheallocation changeshop
tohop.184CHAPTER 6BANDWIDTH UTILIZATION: MULTIPLEXING ANDSPREADING
Figure6.31Bandwidth sharing
Frequency
a.FDMFrequency
14
h
f1
Time Time
b.FHSS
DirectSequence SpreadSpectrum
Thedirectsequence spreadspectrum (nSSS)technique alsoexpandsthebandwidth
oftheoriginalsignal,buttheprocessisdifferent. InDSSS,wereplaceeachdatabit
with11bitsusingaspreading code.Inotherwords,eachbitisassigned acodeof11bits,
calledchips,wherethechiprateis11timesthatofthedatabit.Figure6.32showsthe
conceptofDSSS.
Figure6.32DSSS
Modulator
Original-+-------+i
signalr--------ll-~ Spread
signal
Asanexample, letusconsider thesequence usedinawireless LAN,thefamous
Barkersequence where 11is11.Weassumethattheoriginalsignalandthechipsinthe
chipgenerator usepolarNRZencoding. Figure6.33showsthechipsandtheresultof
multiplying theoriginaldatabythechipstogetthespreadsignal.
InFigure6.33,thespreading codeis11chipshavingthepattern10110111000 (in
thiscase).IftheoriginalsignalrateisN,therateofthespreadsignalislIN.This
meansthattherequired bandwidth forthespreadsignalis11timeslargerthanthe
bandwidth oftheoriginalsignal.Thespreadsignalcanprovideprivacyiftheintruder
doesnotknowthecode.Itcanalsoprovideimmunity againstinterference ifeachsta­
tionusesadifferent code.SECTION 6.4KEYTERMS 185
Figure6.33DSSSexample
Original1-- _
signal
Spreading1---+--+--1-+--1--­
code
Spreadf----t-+-+-i--+--­signal
Bandwidth Sharing
Canweshareabandwidth inDSSSaswedidinFHSS?Theanswerisnoandyes.Ifwe
useaspreading codethatspreadssignals(fromdifferentstations)thatcannotbecombined
andseparated, wecannotshareabandwidth. Forexample, aswewillseeinChapter14,
somewirelessLANsuseDSSS and thespreadbandwidth cannotbeshared.However, if
weuseaspecialtypeofsequence codethatallowsthecombining andseparating ofspread
signals,wecansharethebandwidth. AswewillseeinChapter16,aspecialspreading code
allowsustouseDSSSincellulartelephony andshareabandwidth betweenseveralusers.
6.3RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
books.Theitemsinbrackets [...]refertothereference listattheendofthetext.
Books ,'-
Multiplexing iselegantly discussed inChapters 19of[Pea92]. [CouOI]givesexcellent
coverage ofTDMandFDMinSections 3.9to3.11.Moreadvanced materials canbe
foundin[Ber96].Multiplexing isdiscussed inChapter8of[Sta04].Agoodcoverage of
spreadspectrum canbefoundinSection5.13of[CouOl]andChapter9of[Sta04].
6.4KEYTERMS
analoghierarchy
Barkersequence
channel
chip
demultiplexer (DEMUX)
denseWDM(DWDM)digitalsignal(DS)service
directsequence spreadspectrum (DSSS)
Eline
framingbit
frequency hoppingspreadspectrum
(FSSS)186 CHAPTER 6BANDWIDTH UTILIZATION: MULTIPLEXING ANDSPREADING
frequency-division multiplexing (FDM)
group
guardband
hoppingperiod
interleaving
jumbogroup
link
mastergroup
multilevel multiplexing
multiple-slot multiplexing
multiplexer (MUX)
6.5SUMMARYmultiplexing
pseudorandom codegenerator
pseudorandom noise(PN)
pulsestuffing
spreadspectrum (SS)
statistical TDM
supergroup
synchronous TDM
Tline
time-division multiplexing (TDM)
wavelength-division multiplexing (WDM)
oBandwidth utilization istheuseofavailable bandwidth toachievespecificgoals.
Efficiency canbeachieved byusingmultiplexing; privacyandantijamming canbe
achieved byusingspreading.
oMultiplexing isthesetoftechniques thatallows the simultaneous transmission of
multiplesignalsacrossasingledatalink.Inamultiplexed system,nlinessharethe
bandwidth ofonelink.Thewordlinkreferstothephysicalpath.Thewordchannel
referstotheportionofalinkthatcarriesatransmission.
oTherearethreebasicmultiplexing techniques: frequency-division multiplexing,
wavelength-division multiplexing, andtime-division multiplexing. Thefirsttwoare
techniques designed foranalogsignals,thethird,fordigitalsignals
oFrequency-division multiplexing (FDM)isananalogtechnique thatcanbeapplied
whenthebandwidth ofalink(inhertz)isgreaterthanthecombined bandwidths of
thesignalstobetransmitted.
oWavelength-division multiplexing (WDM)isdesigned tousethehighbandwidth
capability offiber-optic cable.WDMisananalogmultiplexing technique tocom­
bineopticalsignals.
oTime-division multiplexing (TDM)isadigitalprocessthatallowsseveralconnec­
tionstosharethehighbandwidth ofalink.TDMisadigitalmultiplexing technique
forcombining severallow-ratechannels intoonehigh-rate one.
oWecandivideTDMintotwodifferent schemes: synchronous orstatistical. Insyn­
chronous TDM,eachinputconnection hasanallotment intheoutputevenifitis
notsendingdata.Instatistical TDM,slotsaredynamically allocated toimprove
bandwidth efficiency.
oInspreadspectrum (SS),wecombine signalsfromdifferent sourcestofitintoa
largerbandwidth. Spreadspectrum isdesigned tobeusedinwirelessapplications
inwhichstationsmustbeabletosharethemedium withoutinterception byan
eavesdropper andwithoutbeingsubjecttojamming fromamalicious intruder.oThefrequency hoppingspreadspectrum (FHSS)technique usesMdifferent carrier
frequencies thataremodulated bythesourcesignal.Atonemoment, thesignalSECTION 6.6PRACTICE SET 187
modulates onecarrierfrequency; atthenextmoment, thesignalmodulates another
carrierfrequency.
oThedirectsequence spreadspectrum (DSSS)technique expandsthebandwidth of
asignalbyreplacing eachdatabitwithnbitsusingaspreading code.Inotherwords,
eachbitisassigned acodeofnbits,calledchips.
6.6PRACTICE SET
ReviewQuestions
1.Describe thegoalsofmultiplexing.
2.Listthreemainmultiplexing techniques mentioned inthischapter.
3.Distinguish betweenalinkandachannelinmultiplexing.
4.Whichofthethreemultiplexing techniques is(are)usedtocombine analogsignals?
Whichofthethreemultiplexing techniques is(are)usedtocombine digitalsignals?
5.Definetheanaloghierarchy usedbytelephone companies andlistdifferent levels
ofthehierarchy.
6.Definethedigitalhierarchy usedbytelephone companies andlistdifferent levels
ofthehierarchy.
7.Whichofthethreemultiplexing techniques iscommon forfiberopticlinks?
Explainthereason.
8.Distinguish betweenmultilevel TDM,multipleslotTDM,andpulse-stuffed TDM.
9.Distinguish betweensynchronous andstatistical TDM.
10.Definespreadspectrum anditsgoal.Listthetwospreadspectrum techniques dis­
cussedinthischapter.
11.DefineFHSSandexplainhowitachieves bandwidth spreading.
12.DefineDSSSandexplainhowitachieves bandwidth spreading.
Exercises
13.Assumethatavoicechanneloccupies abandwidth of4kHz.Weneedtomultiplex
10voicechannels withguard bands of500HzusingFDM.Calculate therequired
bandwidth.
14.Weneedtotransmit 100digitized voicechannels usingapass-band channelof
20KHz.Whatshouldbetheratioofbits/Hzifweusenoguardband?
15.Intheanaloghierarchy ofFigure6.9,findtheoverhead (extrabandwidth forguard
bandorcontrol)ineachhierarchy level(group,supergroup, mastergroup,and
jumbogroup).
16.Weneedtousesynchronous TDMandcombine20digitalsources,eachof100Kbps.
Eachoutputslotcarries1bitfromeachdigitalsource,butoneextrabitisaddedto
eachframeforsynchronization. Answerthefollowing questions:
a.Whatisthesizeofanoutputframeinbits?
b.Whatistheoutputframerate?188CHAPTER 6BANDWIDTH UTIUZATION: MULTIPLEXING ANDSPREADING
c.Whatisthedurationofanoutputframe?
d.Whatistheoutputdatarate?
e.Whatistheefficiency ofthesystem(ratioofusefulbitstothetotalbits).
17.RepeatExercise 16ifeachoutputslotcarries2bitsfromeachsource.
18.Wehave14sources,eachcreating5008-bitcharacters persecond.Sinceonlysome
ofthesesourcesareactiveatanymoment, weusestatistical TDMtocombine these
sourcesusingcharacter interleaving. Eachframecarries6slotsatatime,butweneed
toaddfour-bitaddresses toeachslot.Answerthefollowing questions:
a.Whatisthesizeofanoutputframeinbits?
b.Whatistheoutputframerate?
c.Whatisthedurationofanoutputframe?
d.Whatistheoutputdatarate?
19.Tensources,sixwithabitrateof200kbpsandfourwithabitrateof400kbpsare
tobecombined usingmultilevel TDMwithnosynchronizing bits.Answerthefol­
lowingquestions aboutthefinalstageofthemultiplexing:
a.Whatisthesizeofaframeinbits?
b.Whatistheframerate?
c.Whatisthedurationofaframe?
d.Whatisthedatarate?
20.Fourchannels, twowithabitrateof200kbpsandtwowithabitrateof150kbps,are
tobemultiplexed usingmultiple slotTDMwithnosynchronization bits.Answer
thefollowing questions:
a.Whatisthesizeofaframeinbits?
b.Whatistheframerate?
c.Whatisthedurationofaframe?
d.Whatisthedatarate?
21.Twochannels, onewithabitrateof190kbpsandanotherwithabitrateof180kbps,
aretobemultiplexed usingpulsestuffingTDMwithnosynchronization bits.Answer
thefollowing questions:
a.Whatisthesizeofaframeinbits?
b.Whatistheframerate?
c.Whatisthedurationofaframe?
d.Whatisthedatarate?
22.Answerthefollowing questions aboutaT-1line:
a.Whatisthedurationofaframe?
b.Whatistheoverhead (numberofextrabitspersecond)?
23.Showthecontentsofthefiveoutputframesforasynchronous TDMmultiplexer
thatcombines foursourcessendingthefollowing characters. Notethatthecharacters
aresentinthesameorderthattheyaretyped.Thethirdsourceissilent.
a.Source1message: HELLO
b.Source2message: HISECTION 6.6PRACTICE SET 189
c.Source3message:
d.Source4message: BYE
24.Figure6.34showsamultiplexer inasynchronous TDMsystem.Eachoutputslotis
only10bitslong(3bitstakenfromeachinputplus1framingbit).Whatistheoutput
stream?Thebitsarriveatthemultiplexer asshownbythearrows.
Figure6.34Exercise 24
101110111101~
11111110000~
1010000001111~IFrameof10bitsI
25.Figure6.35showsademultiplexer inasynchronous TDM.Iftheinputslotis16bits
long(noframingbits),whatisthebitstreamineachoutput?Thebitsarriveatthe
demultiplexer asshownbythearrows.
Figure6.35Exercise 25
101000001110101010101000011101110000011110001
•
26.Answerthefollowing questions aboutthedigitalhierarchy inFigure6.23:
a.Whatistheoverhead (number ofextrabits)intheDS-lservice?
b.Whatistheoverhead (number ofextrabits)intheDS-2service?
c.Whatistheoverhead (number ofextrabits)intheDS-3service?
d.Whatistheoverhead (number ofextrabits)intheDS-4service?
27.Whatistheminimum numberofbitsinaPNsequence ifweuseFHSSwitha
channelbandwidth ofB=4KHzandBss=100KHz?
28.AnFHSSsystemusesa4-bitPNsequence. IfthebitrateofthePNis64bitsper
second,answerthefollowing questions:
a.Whatisthetotalnumberofpossiblehops?
b.Whatisthetimeneededtofinishacomplete cycle ofPN?190 CHAPTER 6BANDWIDTH UTILIZATION: MULTIPLEXING ANDSPREADING
29.Apseudorandom numbergenerator usesthefollowing formulatocreatearandom
series:
Ni+1=(5+7Ni)mod17-1
InwhichNjdefinesthecurrentrandomnumberandNj+1definesthenextrandom
number.Thetermmodmeansthevalueoftheremainder whendividing (5+7Nj)
by17.
30.Wehaveadigitalmedium withadatarateof10Mbps.Howmany64-kbpsvoice
channels canbecarriedbythismediumifweuseDSSSwiththeBarkersequence?CHAPTER 7
Transmission Media
Wediscussed manyissuesrelatedtothephysical layerinChapters 3through6.Inthis
chapter,wediscusstransmission media.Transmission mediaareactuallylocatedbelow
thephysical layerandaredirectlycontrolled bythephysical layer.Youcouldsaythat
transmission mediabelongtolayerzero.Figure7.1showsthepositionoftransmission
mediainrelationtothephysicallayer.
Figure7.1Transmission mediumandphysical layer
SenderIPhysical layerI
L...Transmission medium
CableorairIPhysical layer
.....JIReceiver
Atransmission medium canbebroadlydefinedasanything thatcancarryinfor­
mationfromasourcetoadestination. Forexample, thetransmission mediumfortwo
peoplehavingadinnerconversation istheair.Theaircanalsobeusedtoconveythe
message inasmokesignalorsemaphore. Forawrittenmessage, thetransmission
mediummightbeamailcarrier,atruck,oranairplane.
Indatacommunications thedefinition oftheinformation andthetransmission
mediumismorespecific.Thetransmission mediumisusuallyfreespace,metalliccable,
orfiber-optic cable.Theinformation isusuallyasignalthatistheresultofaconversion
ofdatafromanotherform.
The useoflong-distance communication usingelectricsignalsstartedwiththe
invention ofthetelegraph byMorseinthe19thcentury.Communication bytelegraph
wasslowanddependent onametallicmedium.
Extending therangeofthehumanvoicebecamepossiblewhenthetelephone was
invented in1869.Telephone communication atthattimealsoneededametallicmedium
tocarrytheelectricsignalsthatweretheresultofaconversion fromthehumanvoice.
191192CHAPTER 71RANSMISSION MEDIA
Thecommunication was,however, unreliable duetothepoorqualityofthewires.The
lineswereoftennoisyandthetechnology wasunsophisticated.
Wireless communication started in1895whenHertzwasabletosendhigh­
frequency signals.Later,Marconi devisedamethodtosendtelegraph-type messages
overtheAtlanticOcean.
Wehavecomealongway.Bettermetallicmediahavebeeninvented (twisted­
pairandcoaxialcables,forexample). Theuseofopticalfibershasincreased thedata
rateincredibly. Freespace(air,vacuum, andwater)isusedmoreefficiently, inpart
duetothetechnologies (suchasmodulation andmultiplexing) discussed intheprevious
chapters.
Asdiscussed inChapter3,computers andothertelecommunication devicesuse
signalstorepresent data.Thesesignalsaretransmitted fromonedevicetoanotherinthe
formofelectromagnetic energy,whichispropagated throughtransmission media.
Electromagnetic energy,acombination ofelectricandmagnetic fieldsvibrating in
relationtoeachother,includespower,radiowaves,infraredlight,visiblelight,ultraviolet
light,andX,gamma,andcosmicrays.Eachoftheseconstitutes aportionoftheelectro­
magnetic spectrum. Notallportionsofthespectrum arecurrently usablefortelecommu­
nications, however. Themediatoharnessthosethatareusablearealsolimitedtoafew
types.
Intelecommunications, transmission mediacanbedividedintotwobroadcatego­
ries:guidedandunguided. Guidedmediaincludetwisted-pair cable,coaxialcable,and
fiber-optic cable.Unguided mediumisfreespace.Figure7.2showsthistaxonomy.
Figure7.2Classesoftransmission media
7.1GUIDED MEDIA
Guidedmedia,whicharethosethatprovideaconduitfromonedevicetoanother,
includetwisted-pair cable,coaxialcable,andfiber-optic cable.Asignaltraveling
alonganyofthesemediaisdirected andcontained bythephysical limitsofthe
medium. Twisted-pair andcoaxialcableusemetallic(copper) conductors that accept
andtransport signalsintheformofelectriccurrent.Opticalfiberisacablethataccepts
andtransports signalsintheformoflight.SECTION 7.1GUIDED MEDIA 193
Twisted-Pair Cable
Atwistedpairconsistsoftwo conductors (normally copper),eachwithitsownplastic
insulation, twistedtogether, asshowninFigure7.3.
Figure7.3Twisted-pair cable
'""il""'<
Oneofthewiresisusedtocarrysignalstothereceiver, andtheotherisusedonly
asagroundreference. Thereceiverusesthedifference betweenthetwo.
Inadditiontothesignalsentbythesenderononeofthewires,interference (noise)
andcrosstalk mayaffectbothwiresandcreateunwanted signals.
Ifthetwowiresareparallel,theeffectoftheseunwanted signalsisnotthesamein
bothwiresbecausetheyareatdifferentlocations relativetothenoiseorcrosstalk sources
(e,g.,oneiscloserandtheotherisfarther).Thisresultsinadifference atthereceiver.By
twist,ingthepairs,abalanceismaintained. Forexample, supposeinonetwist,onewire
isclosertothenoisesourceandtheotherisfarther;inthenexttwist,thereverseistrue.
Twisting makesitprobable thatbothwiresareequallyaffectedbyexternalinfluences
(noiseorcrosstalk). Thismeansthatthereceiver,whichcalculates thedifference between
thetwo,receivesnounwanted signals.Theunwanted signalsaremostlycanceled out.
Fromtheabovediscussion, itisclearthatthenumberoftwistsperunitoflength
(e.g.,inch)hassomeeffectonthequalityofthecable.
Unshielded VersusShielded Twisted-Pair Cable
Themostcommon twisted-pair cableusedincommunications isreferred toas
unshielded twisted-pair (UTP).IBMhasalsoproduced aversionoftwisted-pair cable
foritsusecalledshieldedtwisted-pair (STP).STPcablehasametalfoilorbraided­
meshcovering thatencaseseachpairofinsulated conductors. Although metalcasing
improves thequalityofcablebypreventing thepenetration ofnoiseorcrosstalk, itis
bulkierandmoreexpensive. Figure7.4showsthedifference between UTPandSTP.
Ourdiscussion focusesprimarily onUTPbecauseSTPisseldomusedoutsideofIBM.
Categories
TheElectronic Industries Association (EIA)hasdeveloped standards toclassify
unshielded twisted-pair cableintosevencategories. Categories aredetermined bycable
quality,with1asthelowestand7asthehighest.EachEIAcategory issuitablefor
specificuses.Table7.Ishowsthesecategories.
Connectors
Themostcommon UTPconnector isRJ45(RJstandsforregistered jack),asshown
inFigure7.5.TheRJ45isakeyedconnector, meaning theconnector canbeinsertedin
onlyoneway.194CHAPTER 7TRANSMISSION MEDIA
Figure7.4UTPandSTPcables
Metalshield
Plasticcover
a.UTPPlasticcover
b.STP
Table7.1Categories ofunshielded twisted-pair cables
DataRate
Category Specification (Mbps) Use
I Unshielded twisted-pair usedintelephone <0.1 Telephone
2 Unshielded twisted-pair originally usedin 2 T-llines
T-lines
3 Improved CAT2usedinLANs 10 LANs
4 Improved CAT3usedinTokenRingnetworks 20 LANs
5 Cablewireisnormally 24AWGwithajacket 100 LANs
andoutsidesheath
SE An extension tocategory 5thatincludes 125 LANs
extrafeaturestominimize thecrosstalk and
electromagnetic interference
6 A newcategory withmatched components 200 LANs
comingfromthesamemanufacturer. The
cablemustbetestedata200-Mbps datarate.
7 Sometimes calledSSTP(shielded screen 600 LANs
twisted-pair). Eachpairisindividually
wrapped inahelicalmetallicfoilfollowed by
ametallicfoilshieldinadditiontotheoutside
sheath.Theshielddecreases theeffectof
crosstalk: andincreases thedatarate.
Performance
Onewaytomeasure theperformance oftwisted-pair cableistocompare attenuation
versusfrequency anddistance. Atwisted-pair cablecanpassawiderangeoffrequencies.
However, Figure7.6showsthatwithincreasing frequency, theattenuation, measured in
decibelsperkilometer (dB/km), sharplyincreases withfrequencies above100kHz.Note
thatgaugeisameasureofthethickness ofthewire.SECTION 7.1GUIDED MEDIA 195
Figure7.5UTPconnector
nrnln
12345678
RJ-45Male
Figure7.6UTPperformance
18gauge26gaugeGauge Diameter (inches)
18 0.0403
22 0.02320
24 0.02010
26 0.015918
2E::::::::..------420
16
]'14
iIi
::3-12
<::.g
'"10:I
<::"~8
6
10 100 1000
!(kHz)
Applications
Twisted-pair cablesareusedintelephone linestoprovidevoiceanddatachannels. The
localloop-the linethatconnects subscribers tothecentraltelephone office---commonly
consistsofunshielded twisted-pair cables.Wediscusstelephone networks inChapter9.
TheDSLlinesthatareusedbythetelephone companies toprovidehigh-data-rate
connections alsousethehigh-bandwidth capability ofunshielded twisted-pair cables.
WediscussDSLtechnology inChapter9.
Local-area networks, suchaslOBase-T andlOOBase-T, alsousetwisted-pair cables.
Wediscussthesenetworks inChapter13.
CoaxialCable
Coaxialcable(orcoax)carriessignalsofhigherfrequency rangesthanthoseintwisted­
paircable,inpartbecausethetwomediaareconstructed quitedifferently. Insteadof196CHAPTER 7TRANSMISSION MEDIA
havingtwowires,coaxhasacentralcoreconductor ofsolidorstranded wire(usually
copper)enclosed inaninsulating sheath,whichis,inturn,encasedinanouterconductor
ofmetalfoil,braid,oracombination ofthetwo.Theoutermetallic wrapping serves
bothasashieldagainstnoiseandasthesecondconductor, whichcompletes thecircuit.
Thisouterconductor isalsoenclosed inaninsulating sheath,andthewholecableis
protected byaplasticcover(seeFigure7.7).
Figure7.7Coaxialcable
Insulator
Outerconductor
(shield)
CoaxialCableStandards
Coaxialcablesarecategorized bytheirradiogovernment (RG)ratings.EachRGnum­
berdenotesauniquesetofphysical specifications, including thewiregaugeofthe
innerconductor, thethickness andtypeoftheinnerinsulator, theconstruction ofthe
shield,andthesizeandtypeoftheoutercasing.EachcabledefinedbyanRGratingis
adaptedforaspecialized function, asshowninTable7.2.
Table7.2Categories ofcoaxialcables
Category Impedance Use
RG-59 75n CableTV
RG-58 50n ThinEthernet
RG-ll 50n ThickEthernet
CoaxialCableConnectors
Toconnectcoaxialcabletodevices, weneedcoaxialconnectors. Themostcommon
typeofconnector usedtodayistheBayone-Neill-Concelman (BNe),connector.
Figure7.8showsthreepopulartypesoftheseconnectors: theBNCconnector, the
BNCTconnector, andtheBNCterminator.
TheBNCconnector isusedtoconnecttheendofthecabletoadevice,suchasa
TVset.TheBNCTconnector isusedinEthernet networks (seeChapter 13)tobranch
outtoaconnection toacomputer orotherdevice.TheBNCterminator isusedatthe
endofthecabletopreventthereflection ofthesignal.SECTION 7.1GUIDED MEDIA 11)7
----------------------------_. ------
Figure7.8BNCconnectors
BNCT
Cable
t
BNCconnector 50-a
BNeterminatorGround
wire
---------------------------~- --
Performance
Aswedidwithtwisted-pair cables,wecanmeasuretheperformance ofacoaxialcable.
WenoticeinFigure7.9thattheattenuation ismuchhigherincoaxialcablesthanin
twisted-pair cable.Inotherwords,although coaxialcablehasamuchhigherbandwidth,
thesignalweakens rapidlyandrequiresthefrequentuseofrepeaters.
Figure7.9Coaxialcablepeiformance
100 IO0.712.9mm
!
/I/1.2/4.4mm!
/
/
1.0
j(kHz)0.135
30
a25
~
a:l
:2-20.:0
.~
;::l.:15~
~
10
5
0.01
Applications
Coaxialcablewaswidelyusedinanalogtelephone networks whereasinglecoaxialnet­
workcouldcarry10,000voicesignals.Lateritwasusedindigitaltelephone networks
whereasinglecoaxialcablecouldcarrydigitaldataupto600Mbps.However, coaxial
cableintelephone networks haslargelybeenreplaced todaywithfiber-optic cable.
CableTVnetworks (seeChapter9)alsousecoaxialcables.Inthetraditional cable
TVnetwork, theentirenetworkusedcoaxialcable.Later,however, cableTVproviders198 CHAPTER 7TRANSMISSION MEDIA
replaced mostofthemediawithfiber-optic cable;hybridnetworks usecoaxialcable
onlyatthenetwork boundaries, neartheconsumer premises. CableTVusesRG-59
coaxialcable.
Anothercommon application ofcoaxialcableisintraditional Ethernet LANs(see
Chapter13).Becauseofitshighbandwidth, andconsequently highdatarate,coaxial
cablewaschosenfordigitaltransmission inearlyEthernetLANs.The10Base-2, orThin
Ethernet, usesRG-58coaxialcablewithBNeconnectors totransmitdataat10Mbps
witharangeof185m.ThelOBase5, orThickEthernet, usesRG-11(thickcoaxialcable)
totransmit 10Mbpswitharangeof5000m.ThickEthernethasspecialized connectors.
Fiber-Optic Cable
Afiber-optic cableismadeofglassorplasticandtransmits signalsintheformoflight.
Tounderstand opticalfiber,wefirstneedtoexploreseveralaspectsofthenatureoflight.
Lighttravelsinastraightlineaslongasitismovingthroughasingleuniformsub­
stance.Ifarayoflighttraveling throughonesubstance suddenly entersanothersubstance
(ofadifferent density), theraychangesdirection. Figure7.10showshowarayoflight
changesdirection whengoingfromamoredensetoalessdensesubstance.
Figure7.10Bendingoflightray
Less
dense
More
denseMore
denseLess
dense
I>criticalangle,
reflectionLess
denseI
I
I
More,A
densezj. ~
[ I
II
I
rII
I
I=criticalangle,
refraction/
AI
I<criticalangle,
refraction
Asthefigureshows,iftheangleofincidence I(thearIgletheraymakeswiththe
lineperpendicular totheinterface between thetwosubstances) islessthanthecritical
angle,therayrefracts andmovesclosertothesurface.Iftheangleofincidence is
equaltothecriticalangle,thelightbendsalongtheinterface.Iftheangleisgreaterthan
thecriticalangle,therayreflects(makesaturn)andtravelsagaininthedensersub­
stance.Notethatthecriticalangleisaproperty ofthesubstance, anditsvaluediffers
fromonesubstance toanother.
Opticalfibersusereflection toguidelightthroughachannel.Aglassorplasticcore
issurrounded byacladding oflessdenseglassorplastic.Thedifference indensityofthe
twomaterials mustbesuchthatabeamoflightmovingthroughthecoreisreflected off
thecladding insteadofbeingrefracted intoit.SeeFigure7.11.
Propagation Modes
Currenttechnology supportstwomodes(multimode andsinglemode)forpropagating light
alongopticalchannels, eachrequiring fiberwithdifferentphysicalcharacteristics. Multi­
modecanbeimplemented intwoforms:step-index orgraded-index (seeFigure7.12).SECTION 7.1GUlDED MEDIA 199
Figure7.11Opticaljiber
Cladding
Sender
Figure7.12Propagation modesCladdingReceiverL.-_....J
Multimode Multimode issonamedbecause multiple beamsfromalightsource
movethroughthecoreindifferent paths.Howthesebeamsmovewithinthecable
dependsonthestructure ofthecore,asshowninFigure7.13.
Inmultimode step-index fiber,thedensityofthecoreremainsconstantfromthe
centertotheedges.Abeamoflightmovesthroughthisconstant densityinastraight
lineuntilitreachestheinterface ofthecoreandthecladding. Attheinterface, thereis
anabruptchangeduetoalowerdensity;thisalterstheangleofthebeam'smotion.The
termstepindexreferstothesuddenness ofthischange,whichcontributes tothedistor­
tionofthesignalasitpassesthroughthefiber.
Asecondtypeoffiber,calledmultimode graded-index fiber,decreases thisdistor­
tionofthesignalthroughthecable.Thewordindexherereferstotheindexofrefraction.
Aswesawabove,theindexofrefraction isrelatedtodensity.Agraded-index fiber,
therefore, isonewithvaryingdensities. Densityishighestatthecenterofthecoreand
decreases gradually toitslowestattheedge.Figure7.13showstheimpactofthisvari­
abledensityonthepropagation oflightbeams.
Single-Mode Single-mode usesstep-index fiberand ahighlyfocusedsourceoflight
thatlimitsbeamstoasmallrangeofangles,allclosetothehorizontal. Thesingle­
modefiberitselfismanufactured withamuchsmallerdiameter thanthatofmultimode
fiber,andwithsubstantiallY lowerdensity(indexofrefraction). Thedecrease indensity
resultsinacriticalanglethatiscloseenoughto90°tomakethepropagation ofbeams
almosthorizontal. Inthiscase,propagation ofdifferent beamsisalmostidentical, and
delaysarenegligible. Allthebeamsarriveatthedestination "together" andcanbe
recombined withlittledistortion tothesignal(seeFigure7.13).200CHAPTER 7TRANSMISSION MEDIA
Figure7.13Modes
JlJ1
Source
a.Multimode, stepindexDestination
JlJ1
Source Destination
b.Multimode, gradedindex
JlJ1
Source
c.SinglemodeDestination
FiberSizes
Opticalfibersaredefinedbytheratioofthediameter oftheircoretothediameter of
theircladding, bothexpressed inmicrometers. Thecommon sizesareshowninTable7.3.
Notethatthelastsizelistedisforsingle-mode only.
Table7.3Fibertypes
Type Core(~) Cladding (Jlm) Mode
501125 50.0 125 Multimode, gradedindex
62.51125 62.5 125 Multimode, gradedindex
100/125 100.0 125 Multimode, gradedindex
7/125 7.0 125 Singlemode
CableComposition
Figure7.14showsthecomposition ofatypicalfiber-optic cable.Theouterjacketismade
ofeitherPVCorTeflon.InsidethejacketareKevlarstrandstostrengthen thecable.Kevlar
isastrongmaterialusedinthefabrication ofbulletproof vests.BelowtheKevlarisanother
plasticcoatingtocushionthefiber.Thefiberisatthecenterofthecable,anditconsistsof
cladding andcore.
Fiber-Optic CableConnectors
Therearethreetypesofconnectors forfiber-optic cables,asshowninFigure7.15.SECTION 7.1GUIDED MEDIA 201
Figure7.14Fiberconstruction
DuPontKevlar
/forstrength
Glassor
plasticcore
Figure7.15Fiber-optic cableconnectors
SCconnector STconnector
RX
TX
MT-RJconnector
Thesubscriber channel (SC)connector isusedforcableTV.Itusesapush/pull
lockingsystem.Thestraight-tip (ST)connector isusedforconnecting cableto
networking devices.ItusesabayonetlockingsystemandismorereliablethanSC.
MT-RJisaconnector thatisthesamesizeasRJ45.
Performance
Theplotofattenuation versuswavelength inFigure7.16showsaveryinteresting
phenomenon infiber-optic cable.Attenuation isflatterthaninthecaseoftwisted-pair
cableandcoaxialcable.Theperformance issuchthatweneedfewer(actually 10times
less)repeaters whenweusefiber-optic cable.
Applications
Fiber-optic cableisoftenfoundinbackbone networks becauseitswidebandwidth is
cost-effective. Today,withwavelength-division multiplexing (WDM), wecantransfer202CHAPTER 7IRANSMISSION MEDIA
Figure7.16Opticalfiberperformance
100
50
IO
~5
~
~
00100
0..l0.5
0.1
0.05
0.01
800 1000 1200 1400 1600 1800
Wavelength (urn)
dataatarateof1600Gbps.TheSONETnetworkthatwediscussinChapter17provides
suchabackbone.
SomecableTVcompanies useacombination ofopticalfiberandcoaxialcable,
thuscreatingahybridnetwork. Opticalfiberprovides thebackbone structure while
coaxialcableprovides theconnection totheuserpremises. Thisisacost-effective con­
figuration sincethenarrowbandwidth requirement attheuserenddoesnotjustifythe
useofopticalfiber.
Local-area networks suchas100Base-FX network(FastEthernet) and1000Base-X
alsousefiber-optic cable.
Advantages andDisadvantages ofOpticalFiber
Advantages Fiber-optic cablehasseveraladvantages overmetalliccable(twisted­
pairorcoaxial).
DHigherbandwidth. Fiber-optic cablecansupportdramatically higherbandwidths
(andhencedatarates)thaneithertwisted-pair orcoaxialcable.Currently, datarates
andbandwidth utilization overfiber-optic cablearelimitednotbythemediumbut
bythesignalgeneration andreception technology available.
DLesssignalattenuation. Fiber-optic transmission distanceissignificantly greater
thanthatofotherguidedmedia.Asignalcanrunfor50kmwithoutrequiring
regeneration. Weneedrepeaters every5kmforcoaxialortwisted-pair cable.
DImmunity toelectromagnetic interference. Electromagnetic noisecannotaffect
fiber-optic cables.
oResistance tocorrosive materials. Glassismoreresistanttocorrosive materials
thancopper.SECTION 7.2UNGUIDED MEDIA: WIRELESS 203
oLightweight.Fiber-optic cablesaremuchlighterthancoppercables.
oGreaterimmunity totapping. Fiber-optic cablesaremoreimmunetotappingthan
coppercables.Coppercablescreateantennaeffectsthatcaneasilybetapped.
Disadvantages Therearesomedisadvantages intheuseofopticalfiber.
oInstallation andmaintenance. Fiber-optic cableisarelatively newtechnology. Its
installation andmaintenance requireexpertise thatisnotyetavailable everywhere.
oUnidirectional lightpropagation. Propagation oflightisunidirectional. Ifwe
needbidirectional communication, twofibersareneeded.
oCost.Thecableandtheinterfaces arerelatively moreexpensive thanthoseofother
guidedmedia.Ifthedemandforbandwidth isnothigh,oftentheuseofopticalfiber
cannotbejustified.
7.2UNGUIDED MEDIA: WIRELESS
Unguided mediatransport electromagnetic waveswithoutusingaphysical conductor.
Thistypeofcommunication isoftenreferredtoaswireless communication. Signals
arenormally broadcast throughfreespaceandthusareavailable toanyonewhohasa
devicecapableofreceiving them.
Figure7.17showsthepartoftheelectromagnetic spectrum, rangingfrom3kHzto
900THz,usedforwirelesscommunication.
Figure7.17Electromagnetic spectrumfor wirelesscommunication
3
kHzRadiowaveandmicrowave
300 400900
GHz THzTHz
Unguided signalscantravelfromthesourcetodestination inseveralways:ground
propagation, skypropagation, andline-of-sight propagation, asshowninFigure7.18.
Ingroundpropagation, radiowavestravelthroughthelowestportionofthe
atmosphere, huggingtheearth.Theselow-frequency signalsemanate inalldirections
fromthetransmitting antennaandfollowthecurvature oftheplanet.Distance depends
ontheamountofpowerinthesignal:Thegreaterthepower,thegreaterthedistance. In
skypropagation, higher-frequency radiowavesradiateupwardintotheionosphere
(thelayerofatmosphere whereparticles existasions)wheretheyarereflected backto
earth.Thistypeoftransmission allows for greaterdistances withloweroutputpower.
Inline-or-sight propagation, veryhigh-frequency signalsaretransmitted instraight
linesdirectlyfromantennatoantenna.Antennas mustbedirectional, facingeachother,204CHAPTER 7TRANSMISSION MEDIA
Figure7.18Propagation methods
Ionosphere
Groundpropagation
(below2MHz)Ionosphere
Skypropagation
(2-30MHz)Ionosphere
Line-af-sight propagation
(above30MHz)
andeithertallenoughorcloseenoughtogether nottobeaffectedbythecurvature of
theearth.Line-of-sight propagation istrickybecauseradiotransmissions cannotbe
completely focused.
Thesectionoftheelectromagnetic spectrum definedasradiowavesandmicrowaves
isdividedintoeightranges,calledbands,eachregulated bygovernment authorities.
Thesebandsareratedfromverylowfrequency (VLF)toextremely highfrequency (EHF).
Table7.4liststhesebands,theirranges,propagation methods, andsomeapplications.
Table7.4Bands
Band Range Propagation Application
VLF(verylowfrequency) 3-30kHz Ground Long-range radio
navigation
LF(lowfrequency) 30-300kHz Ground Radiobeaconsand
navigational locators
MF(middlefrequency) 300kHz-3MHzSky AMradio
HF(highfrequency) 3-30MHz Sky Citizensband(CB),
shipiaircraft
communication
VHF(veryhighfrequency) 30-300MHz Skyand VHFTV,FMradio
line-of-sight
UHF(ultrahigh frequency) 300MHz-3GHzLine-of-sight UHFTV,cellularphones,
paging,satellite
SHF(superhigh frequency) 3-30GHz Line-of-sight Satellitecommunication
EHF(extremely high 30-300GHz Line-of-sight Radar,satellite
frequency)
Wecandividewireless transmission intothreebroadgroups:radiowaves,micro­
waves,andinfraredwaves.SeeFigure7.19.SECTION 7.2UNGUIDED MEDIA: WIRELESS 205
Figure7.19Wireless transmission waves
RadioWaves
Although thereisnoclear-cut demarcation betweenradiowavesandmicrowaves, elec­
tromagnetic wavesranginginfrequencies between3kHzand1GHzarenormally called
radiowaves;wavesranginginfrequencies between 1and300GHzarecalledmicro­
waves.However, thebehavior ofthewaves,ratherthanthefrequencies, isabetter
criterion forclassification.
Radiowaves,forthemostpart,areomnidirectional. Whenanantennatransmits
radiowaves,theyarepropagated inalldirections. Thismeansthatthesendingand
receiving antennas donothavetobealigned.Asendingantennasendswavesthatcan
bereceivedbyanyreceiving antenna.Theomnidirectional property hasadisadvantage,
too.Theradiowavestransmitted byoneantennaaresusceptible tointerference by
anotherantennathatmaysendsignalsusingthesamefrequency orband.
Radiowaves,particularly thosewavesthatpropagate intheskymode,cantravel
longdistances. Thismakesradiowavesagoodcandidate forlong-distance broadcast­
ingsuchasAMradio.
Radiowaves,particularly thoseoflowandmediumfrequencies, canpenetrate walls.
Thischaracteristic canbebothanadvantage andadisadvantage. Itisanadvantage
because,forexample, anAMradiocanreceivesignalsinsideabuilding.Itisadisadvan­
tagebecausewecannotisolateacommunication tojustinsideoroutsideabuilding. The
radiowavebandisrelatively narrow,justunder1GHz,compared tothemicrowave
band.Whenthisbandisdividedintosubbands, thesubbands arealsonarrow,leadingtoa
lowdataratefordigitalcommunications.
Almosttheentirebandisregulated byauthorities (e.g.,theFCCintheUnited
States).Usinganypartofthebandrequirespermission fromtheauthorities.
Omnidirectional Antenna
Radiowavesuseomnidirectional antennas thatsendoutsignalsinalldirections.
Basedonthewavelength, strength, andthepurposeoftransmission, wecanhavesev­
eraltypesofantennas. Figure7.20showsanomnidirectional antenna.
Applications
Theomnidirectional characteristics ofradiowavesmakethemusefulformulticasting,
inwhichthereisonesenderbutmanyreceivers. AMandFMradio,television, mari­
timeradio,cordlessphones,andpagingareexamples ofmulticasting.206 CHAPTER 7TRANSMISSION MEDIA
Figure7.20Omnidirectional antenna
Radiowavesareusedformulticast communications,
suchasradioandtelevision, andpagingsystems.
Microwaves
Electromagnetic waveshavingfrequencies between Iand300GHzarecalledmicro­
waves.
Microwaves areunidirectional. Whenanantennatransmits microwave waves,they
canbenarrowly focused. Thismeansthatthesendingandreceiving antennas needto
bealigned.Theunidirectional property hasanobviousadvantage. Apairofantennas
canbealignedwithoutinterfering withanotherpairofalignedantennas. Thefollowing
describes somecharacteristics ofmicrowave propagation:
oMicrowave propagation isline-of-sight. Sincethetowerswiththemounted antennas
needtobeindirectsightofeachother,towersthatarefarapartneedtobeverytall.
Thecurvature oftheearthaswellasotherblocking obstacles donotallowtwoshort
towerstocommunicate byusingmicrowaves. Repeaters areoftenneededforlong­
distancecommunication.
oVeryhigh-frequency microwaves cannotpenetrate walls.Thischaracteristic canbe
adisadvantage ifreceivers areinsidebuildings.
oThemicrowave bandisrelatively wide,almost299GHz.Therefore widersubbands
canbeassigned, andahighdatarateispossible
oUseofcertainportionsofthebandrequirespermission fromauthorities.
Unidirectional Antenna
Microwaves needunidirectional antennas thatsendoutsignalsinonedirection. Two
typesofantennas areusedformicrowave communications: theparabolic dishandthe
hom(seeFigure7.21).
Aparabolic dishantenna isbasedonthegeometry ofaparabola: Everyline
paralleltothelineofsymmetry (lineofsight)reflectsoffthecurveatanglessuchthat
allthelinesintersect inacommon pointcalledthefocus.Theparabolic dishworksasaSECTION 7.2UNGUIDED MEDIA: WIRELESS 207
Figure7.21Unidirectional antennas
Focus ~,,*=:::I
a.Dishantenna b.Hornantenna
funnel,catching awiderangeofwavesanddirecting themtoacommon point.In
thisway,moreofthesignalisrecovered thanwouldbepossible withasingle-point
receiver.
Outgoing transmissions arebroadcast throughahornaimedatthedish.Themicro­
waveshitthedishandaredeflected outwardinareversalofthereceiptpath.
Ahornantenna lookslikeagiganticscoop.Outgoing transmissions arebroadcast
upastem(resembling ahandle)anddeflected outward inaseriesofnarrowparallel
beamsbythecurvedhead.Received transmissions arecollected bythescoopedshapeof
thehorn,inamannersimilartotheparabolic dish,andaredeflected downintothestem.
Applications
Microwaves, duetotheirunidirectional properties, areveryusefulwhenunicast
(one-to-one) communication isneededbetween thesenderandthereceiver. Theyare
usedincellularphones(Chapter 16),satellitenetworks (Chapter 16),andwirelessLANs
(Chapter 14).
Microwaves areusedforunicastcommunication suchascellulartelephones,
satellitenetworks, andwirelessLANs.
Infrared
Infrared waves,withfrequencies from300GHzto400THz(wavelengths from1mm
to770nm),canbeusedforshort-range communication. Infraredwaves,havinghigh
frequencies, cannotpenetrate walls.Thisadvantageous characteristic prevents interfer­
encebetweenonesystemandanother;ashort-range communication systeminoneroom
cannotbeaffectedbyanothersysteminthenextroom.Whenweuseourinfraredremote
control,wedonotinterfere withtheuseoftheremotebyourneighbors. However, this
samecharacteristic makesinfraredsignalsuselessforlong-range communication. In
addition, wecannotuseinfraredwavesoutsideabuildingbecausethesun'srayscontain
infraredwavesthatcaninterferewiththecommunication.208CHAPTER 7TRANSMISSION MEDIA
Applications
Theinfraredband,almost400THz,hasanexcellent potential fordatatransmission.
Suchawidebandwidth canbeusedtotransmit digitaldatawithaveryhighdatarate.
TheInfraredDataAssociation (IrDA),anassociation forsponsoring the useofinfrared
waves,hasestablished standards forusingthesesignalsforcommunication between
devicessuchaskeyboards, mice,PCs,andprinters. Forexample, somemanufacturers
provideaspecialportcalledtheIrDAportthatallowsawireless keyboard tocommu­
nicatewithaPC.Thestandard originally definedadatarateof75kbpsforadistance
upto8m.Therecentstandard definesadatarateof4Mbps.
Infrared signalsdefinedbyIrDAtransmit throughlineofsight;theIrDAporton
thekeyboard needstopointtothePCfortransmission tooccur.
Infrared signalscanbeusedforshort-range communication
inaclosedareausingline-of-sight propagation.
7.3RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
books.Theitemsinbrackets [...]refertothereference listattheendofthetext.
Books
Transmission mediaisdiscussed inSection3.8of[GW04], Chapter4of[Sta04],Sec­
tion2.2and2.3of[Tan03]. [SSS05] givesafullcoverage oftransmission media.
7.4KEYTERMS
angleofincidence
Bayone-Neil-Concelman (BNC)
connector
cladding
coaxialcable
core
criticalangle
electromagnetic spectrum
fiber-optic cable
gauge
groundpropagation
guidedmedia
horn antenna
infraredwaveIrDAport
line-of-sight propagation
microwave
MT-RJ
multimode graded-index fiber
multimode step-index fiber
omnidirectional antenna
opticalfiber
parabolic dishantenna
RadioGovernment (RG)number
radiowave
reflection
refraction
RJ45shieldedtwisted-pair (STP)
single-mode fiber
skypropagation
straight-tip (ST)connector
subscriber channel(SC)connector
transmission mediumSECTION 7.6PRACTICE SET 209
twisted-pair cable
unguided medium
unidirectional antenna
unshielded twisted-pair
(UTP)
wirelesscommunication
7.5SUMMARY
oTransmission medialiebelowthephysicallayer.
DAguidedmediumprovides aphysicalconduitfromonedevicetoanother.Twisted­
paircable,coaxialcable,andopticalfiberarethemostpopulartypesofguided
media.
DTwisted-pair cableconsistsoftwoinsulated copperwirestwistedtogether. Twisted­
paircableisusedforvoiceanddatacommunications.
DCoaxialcableconsistsofacentralconductor andashield.Coaxialcablecancarry
signalsofhigherfrequency rangesthantwisted-pair cable.Coaxialcableisusedin
cableTVnetworks andtraditional EthernetLANs.
oFiber-optic cablesarecomposed ofaglassorplasticinnercoresurrounded by
cladding, allencasedinanoutsidejacket.Fiber-optic cablescarrydatasignalsin
theformoflight.Thesignalispropagated alongtheinnercorebyreflection. Fiber­
optictransmission isbecoming increasingly popularduetoitsnoiseresistance, low
attenuation, andhigh-bandwidth capabilities. Fiber-optic cableisusedinbackbone
networks, cableTVnetworks, andFastEthernet networks.
DUnguided media(freespace)transport electromagnetic waveswithouttheuseofa
physicalconductor.
oWirelessdataaretransmitted throughgroundpropagation, skypropagation, andline­
of-sightpropagation.Wireless wavescanbeclassified asradiowaves,microwaves, or
infraredwaves.Radiowavesareomnidirectional; microwaves areunidirectional.
Microwaves areusedforcellularphone,satellite,andwirelessLANcommunications.
DInfraredwavesareusedforshort-range communications suchasthosebetween a
PCandaperipheral device.ItcanalsobeusedforindoorLANs.
7.6PRACTICE SET
ReviewQuestions
1.Whatisthepositionofthetransmission mediaintheOSIortheInternetmodel?
2.Namethetwomajorcategories oftransmission media.
3.Howdoguidedmediadifferfromunguided media?
4.Whatarethethreemajorclassesofguidedmedia?
5.Whatisthesignificance ofthetwistingintwisted-pair cable?210CHAPTER 7TRANSMISSION MEDIA
6.Whatisrefraction? Whatisreflection?
7.Whatisthepurposeofcladding inanopticalfiber?
8.Nametheadvantages ofopticalfiberovertwisted-pair andcoaxialcable.
9.Howdoesskypropagation differfromline-of-sight propagation?
10.Whatisthedifference betweenomnidirectional wavesandunidirectional waves?
Exercises
11.UsingFigure7.6,tabulatetheattenuation (indB)ofa18-gauge UTPfortheindicated
frequencies anddistances.
Table7.5Attenuation/or I8-gauge UTP
Distance dBat1KHz dRat10KHz dBat100KHz
1Krn
lOKm
15Krn
20Km
12.UsetheresultofExercise 11toinferthatthebandwidth ofaUTPcabledecreases
withanincreaseindistance.
13.Ifthepoweratthebeginning ofa 1KIn18-gauge UTPis200mw,whatisthe
powerattheendforfrequencies 1KHz,10KHz,and100KHz?Usetheresultof
Exercise 11.
14.UsingFigure7.9,tabulatetheattenuation (indB)ofa2.6/9.5mmcoaxialcablefor
theindicated frequencies anddistances.
Table7.6Attenuation/or 2.6/9.5mmcoaxialcable
Distance dBat1KHz dBat10KHz dBat100KHz
1Km
lOKrn
15Km
20Km
15.UsetheresultofExercise 14toinferthatthebandwidth ofacoaxialcable
decreases withtheincreaseindistance.
16.Ifthepoweratthebeginning ofa 1KIn2.6/9.5mmcoaxialcableis200mw,what
isthepowerattheendforfrequencies 1KHz,10KHz, and100KHz?Usethe
resultofExercise 14.
17.Calculate thebandwidth ofthelightforthefollowing wavelength ranges(assumea
propagation speed of2 x108m):
a.1000to1200nm
b.1000to1400nmSECTION 7.6PRACTICE SET 211
18.Thehorizontal axesinFigure7.6and7.9represent frequencies. Thehorizontal
axisinFigure7.16represents wavelength. Canyouexplainthereason?lftheprop­
agationspeedinanopticalfiberis2 x108ill,canyouchangetheunitsinthehori­
zontalaxistofrequency? Shouldthevertical-axis unitsbechangedtoo?Shouldthe
curvebechangedtoo?
19.UsingFigure7.16,tabulatetheattenuation (indB)ofanopticalfiberfortheindicated
wavelength anddistances.
Table7.7Attenuation foropticalfiber
Distance dBat800nm dBat1000nmdBat1200nm
1Km
lOKm
15Km
20Km
20.Alightsignalistravelling throughafiber.Whatisthedelayinthesignalifthe
lengthofthefiber-optic cableis10m,100m,and1Km(assume apropagation
speedof2 x108ill)?
21.Abeamoflightmovesfromonemediumtoanothermediumwithlessdensity.The
criticalangleis60°.Dowehaverefraction orreflection foreachofthefollowing
incidentangles?Showthebendingofthelightrayineachcase.
a.40°
b.60°
c.800CHAPTER 8
Switching
Anetworkisasetofconnected devices.Whenever wehavemultiple devices,wehave
theproblem ofhowtoconnectthemtomakeone-to-one communication possible. One
solutionistomakeapoint-to-point connection between eachpairofdevices(amesh
topology) orbetween acentraldeviceandeveryotherdevice(astartopology). These
methods, however, areimpractical andwasteful when appliedtoverylargenetworks.
Thenumberandlengthofthelinksrequiretoomuchinfrastructure tobecost-efficient,
andthemajority ofthoselinkswouldbeidlemostofthetime.Othertopologies
employing multipoint connections, suchasabus,areruledoutbecausethedistances
between devicesandthetotalnumberofdevicesincrease beyondthecapacities ofthe
mediaandequipment.
Abettersolutionisswitching. Aswitched networkconsistsofaseriesofinterlinked
nodes,calledswitches. Switches aredevicescapableofcreatingtemporary connections
betweentwoormoredeviceslinkedtotheswitch.Inaswitched network, someofthese
nodesareconnected totheendsystems(computers ortelephones, forexample). Others
areusedonlyforrouting.Figure8.1showsaswitched network.
Figure8.1Switched network
Theendsystems(communicating devices)arelabeledA,B, C,D,andsoon,andthe
switches arelabeledI,II,III,IV,andV.Eachswitchisconnected tomultiple links.
213214 CHAPTER 8SWITCHING
Traditionally, threemethods ofswitching havebeenimportant: circuitswitching,
packetswitching, andmessage switching. Thefirsttwoarecommonly usedtoday.The
thirdhasbeenphasedoutingeneralcommunications butstillhasnetworking applications.
Wecanthendividetoday'snetworks intothreebroadcategories: circuit-switched networks,
packet-switched networks, andmessage-switched. Packet-switched networks canfunher
bedividedintotwosubcategories-virtual-circuit networks anddatagram networks­
asshowninFigure8.2.
Figure8.2Taxonomy ofswitched networks
Wecansaythatthevirtual-circuit networks havesomecommon characteristics
withcircuit-switched anddatagram networks. Thus,wefirstdiscusscircuit-switched
networks, thendatagram networks, andfinallyvirtual-circuit networks.
Todaythetendency inpacketswitching istocombinedatagram networks andvirtual­
circuitnetworks. Networks routethefirstpacketbasedonthedatagram addressing idea,
butthencreateavirtual-circuit networkfortherestofthepacketscomingfromthesame
sourceandgoingtothesamedestination. Wewillseesomeofthesenetworks infuture
chapters.
Inmessage switching, eachswitchstoresthewholemessage andforwards ittothe
nextswitch.Although, wedon'tseemessage switching atlowerlayers,itisstillusedin
someapplications likeelectronic mail(e-mail).Wewillnotdiscussthistopicinthisbook.
8.1CIRCUIT-SWITCHED NETWORKS
Acircuit-switched network consistsofasetofswitches connected byphysical links.
Aconnection betweentwostationsisadedicated pathmadeofoneormorelinks.How­
ever,eachconnection usesonlyonededicated channeloneachlink.Eachlinkisnor­
mallydividedintonchannels byusingFDMorTDMasdiscussed inChapter6.
Acircuit-switched networkismadeofasetofswitches connected byphysicallinks,
inwhicheachlinkisdividedintonchannels.
Figure8.3showsatrivialcircuit-switched network withfourswitches andfour
links.Eachlinkisdividedinton(nis3inthefigure)channels byusingFDMorTDM.SECTION 8.1CIRCUIT-SWITCHED NETWORKS 215
Figure8.3Atrivialcircuit-switched network
Onelink,IIchannels
Path
Wehaveexplicitly shownthemultiplexing symbols toemphasize thedivisionofthe
linkintochannels eventhoughmultiplexing canbeimplicitly included intheswitch
fabric.
Theendsystems, suchascomputers ortelephones, aredirectlyconnected toa
switch.Wehaveshownonlytwoendsystemsforsimplicity. WhenendsystemAneeds
tocommunicate withendsystemM,systemAneedstorequestaconnection toMthat
mustbeaccepted byallswitches aswellasbyMitself.Thisiscalledthesetupphase;
acircuit(channel) isreserved oneachlink,andthecombination ofcircuitsorchannels
definesthededicated path.Afterthededicated pathmadeofconnected circuits(channels)
isestablished, datatransfer cantakeplace.Afteralldatahavebeentransferred, the
circuitsaretomdown.
Weneedtoemphasize severalpointshere:
DCircuitswitching takesplaceatthephysical layer.
DBeforestartingcommunication, thestationsmustmakeareservation fortheresources
tobeusedduringthecommunication. Theseresources, suchaschannels (bandwidth
inFDMandtimeslotsinTDM),switchbuffers,switchprocessing time,andswitch
input/output ports,mustremaindedicated duringtheentiredurationofdatatransfer
untiltheteardown phase.
DDatatransferred betweenthetwostationsarenotpacketized (physical layertransfer
ofthesignal).Thedataareacontinuous flowsentbythesourcestationandreceived
bythedestination station,although theremaybeperiodsofsilence.
DThereisnoaddressing involved duringdatatransfer.Theswitches routethedata
basedontheiroccupied band(FDM)ortimeslot(TDM).Ofcourse,thereisend-to­
endaddressing usedduringthesetupphase,aswewillseeshortly.
Incircuitswitching, theresources needtobereservedduringthesetupphase;
theresources remaindedicated fortheentireduration
ofdatatransferuntiltheteardown phase.216 CHAPTER 8SWITCHING
Example 8.1
Asatrivialexample, letususeacircuit-switched networktoconnecteighttelephones inasmall
area.Communication isthrough4-kHzvoicechannels. WeassumethateachlinkusesFDMto
connectamaximum oftwovoicechannels. Thebandwidth ofeachlinkisthen8kHz.Figure8.4
showsthesituation. Telephone 1isconnected totelephone 7;2to5;3to8;and4to6.Ofcourse
thesituationmaychangewhennewconnections aremade.Theswitchcontrolstheconnections.
Figure8.4Circuit-switched networkusedinExample 8.1
Circuit-switched network
Example 8.2
Asanotherexample, consideracircuit-switched networkthatconnects computers intworemote
officesofaprivatecompany. Theofficesareconnected usingaT-llineleasedfromacommuni­
cationserviceprovider. Therearetwo4X8(4inputsand8outputs)switches inthisnetwork. For
eachswitch,fouroutputportsarefoldedintotheinputportstoallowcommunication between
computers inthesameoffice.Fourotheroutputportsallowcommunication between thetwo
offices.Figure8.5showsthesituation.
Figure8.5Circuit-switched networkusedinExample 8.2
Circuit-switched network
4x8
swItch T-llinewith
1.544Mbps4x8
switchSECTION 8.1CIRCUIT-SWITCHED NEIWORKS 217
ThreePhases
Theactualcommunication inacircuit-switched networkrequiresthreephases:connec­
tionsetup,datatransfer,andconnection teardown.
SetupPhase
Beforethetwoparties(ormultiple partiesinaconference call)cancommunicate, a
dedicated circuit(combination ofchannels inlinks)needstobeestablished. Theendsys­
temsarenormally connected throughdedicated linestotheswitches, soconnection setup
meanscreatingdedicated channels between theswitches. Forexample, inFigure8.3,
whensystemAneedstoconnecttosystemM,itsendsasetuprequestthatincludesthe
addressofsystemM,toswitchI.SwitchIfindsachannelbetweenitselfandswitchIV
thatcanbededicated forthispurpose. SwitchIthensendstherequesttoswitchIV,
whichfindsadedicated channelbetween itselfandswitchIII.SwitchIIIinformssys­
temMofsystemA'sintention atthistime.
Inthenextsteptomakingaconnection, anacknowledgment fromsystemMneeds
tobesentintheopposite direction tosystemA.OnlyaftersystemAreceives this
acknowledgment istheconnection established.
Notethatend-to-end addressing isrequired forcreatingaconnection between the
twoendsystems. Thesecanbe,forexample, theaddresses ofthecomputers assigned
bytheadministrator inaTDMnetwork, ortelephone numbers inanFDMnetwork.
DataTransfer Phase
Aftertheestablishment ofthededicated circuit(channels), thetwopartiescantransferdata.
Teardown Phase
Whenoneofthepartiesneedstodisconnect, asignalissenttoeachswitchtorelease
theresources.
Efficiency
Itcanbearguedthatcircuit-switched networks arenotasefficient astheothertwo
typesofnetworks becauseresources areallocated duringtheentiredurationofthecon­
nection.Theseresources areunavailable tootherconnections. Inatelephone network,
peoplenormally terminate thecommunication whentheyhavefinishedtheirconversation.
However, incomputer networks, acomputer canbeconnected toanothercomputer
evenifthereisnoactivityforalongtime.Inthiscase,allowing resources tobededicated
meansthatotherconnections aredeprived.
Delay
Although acircuit-switched networknormally haslowefficiency, thedelayinthistype
ofnetworkisminimal. Duringdatatransferthedataarenotdelayedateachswitch;the
resources areallocated forthedurationoftheconnection. Figure8.6showstheideaof
delayinacircuit-switched networkwhenonlytwoswitches areinvolved.
AsFigure8.6shows,thereisnowaitingtimeateachswitch.Thetotaldelayisdue
tothetimeneededtocreatetheconnection, transferdata,anddisconnect thecircuit.The218CHAPTER 8SWITCHING
Figure8.6Delayinacircuit-switched network
Datatransfer1I-------1.}\. f------l
ui[------------------
Q
Time Time Time Time
delaycausedbythesetupisthesumoffourparts:thepropagation timeofthesource
computer request(slopeofthefirstgraybox),therequestsignaltransfertime(heightof
thefirstgraybox),thepropagation timeoftheacknowledgment fromthedestination
computer (slopeofthesecondgraybox),andthesignaltransfertimeoftheacknowledg­
ment(heightofthesecondgraybox).Thedelayduetodatatransferisthesumoftwo
parts:thepropagation time(slopeofthecoloredbox)anddatatransfertime(heightof
thecoloredbox),whichcanbeverylong.Thethirdboxshowsthetimeneededtotear
downthecircuit.Wehaveshownthecaseinwhichthereceiverrequestsdisconnection,
whichcreatesthemaximum delay.
Circuit-Switched Technology inTelephone Networks
AswewillseeinChapter9,thetelephone companies havepreviously chosenthecircuit­
switched approach toswitching inthephysical layer;todaythetendency ismoving
towardotherswitching techniques. Forexample, thetelephone numberisusedasthe
globaladdress,andasignaling system(calledSS7)isusedforthesetupandteardown
phases.
Switching atthephysicallayerinthetraditional telephone
networkusesthecircuit-switching approach.
8.2DATAGRAM NETWORKS
Indatacommunications, weneedtosendmessages fromoneendsystemtoanother.If
themessageisgoingtopassthroughapacket-switched network, itneedstobedivided
intopacketsoffixedorvariablesize.Thesizeofthepacketisdetermined bythenet­
workandthegoverning protocol.
Inpacketswitching, thereisnoresource allocation forapacket.Thismeansthat
thereisnoreservedbandwidth onthelinks,andthereisnoscheduled processing timeSECTION 8.2DATAGRAM NETWORKS 219
foreachpacket.Resources areallocated ondemand. Theallocation isdoneonafirst­
come,first-served basis.Whenaswitchreceivesapacket,nomatterwhatisthesource
ordestination, thepacketmustwaitifthereareotherpacketsbeingprocessed. Aswith
othersystemsinourdailylife,thislackofreservation maycreatedelay.Forexample, if
wedonothaveareservation atarestaurant, wemighthavetowait.
Inapacket-switched network, thereisnoresource reservation;
resources areallocated ondemand.
Inadatagram network, eachpacketistreatedindependently ofallothers.Evenif
apacketispartofamultipacket transmission, thenetworktreatsitasthoughitexisted
alone.Packetsinthisapproach arereferredtoasdatagrams.
Datagram switching isnormally doneatthenetwork layer.Webrieflydiscuss
datagram networks hereasacomparison withcircuit-switched andvirtual-circuit­
switched networks. InPart4ofthistext,wegointogreaterdetail.
Figure8.7showshowthedatagram approach isusedtodeliverfourpacketsfrom
stationAtostationX.Theswitches inadatagram networkaretraditionally referredto
asrouters.Thatiswhyweuseadifferent symbolfortheswitches inthefigure.
Figure8.7Adatagram networkwithfourswitches (routers)
Datagram network
A
Inthisexample, allfourpackets(ordatagrams) belongtothesamemessage, but
maytraveldifferent pathstoreachtheirdestination. Thisissobecausethelinksmaybe
involvedincarryingpacketsfromothersourcesanddonothavethenecessary bandwidth
available tocarryallthepacketsfromAtoX.Thisapproach cancausethedatagrams of
atransmission toarriveattheirdestination outoforderwithdifferentdelaysbetweenthe
packets.Packetsmayalsobelostordropped becauseofalackofresources. Inmost
protocols, itistheresponsibility ofanupper-layer protocol toreorderthedatagrams or
askforlostdatagrams beforepassingthemontotheapplication.
Thedatagram networks aresometimes referredtoasconnectionless networks. The
termconnectionless heremeansthattheswitch(packetswitch)doesnotkeepinformation
abouttheconnection state.Therearenosetuporteardown phases.Eachpacketistreated
thesamebyaswitchregardless ofitssourceordestination.220 CHAPTER 8SWITCHING
Routing Table
Iftherearenosetuporteardown phases,howarethepacketsroutedtotheirdestinations
inadatagram network? Inthistypeofnetwork, eachswitch(orpacketswitch)hasarout­
ingtablewhichisbasedonthedestination address.Theroutingtablesaredynamic and
areupdatedperiodically. Thedestination addresses andthecorresponding forwarding
outputportsarerecorded inthetables.Thisisdifferent fromthetableofacircuit­
switched networkinwhicheachentryiscreatedwhenthesetupphaseiscompleted and
deletedwhentheteardown phaseisover.Figure8.8showstheroutingtablefora
switch.
Figure8.8Routingtableinadatagram network
Destination Output
address port
1232 I
4150 2
..
9130 3
-......;..,:7
----
1 4
213
Aswitchinadatagram networkusesaroutingtablethatisbasedonthedestination address.
Destination Address
Everypacketinadatagram networkcarriesaheaderthatcontains, amongotherinfor­
mation,thedestination addressofthepacket.Whentheswitchreceivesthepacket,this
destination addressisexamined; theroutingtableisconsulted tofindthecorresponding
portthroughwhichthepacketshouldbeforwarded. Thisaddress, unliketheaddress
inavirtual-circuit-switched network, remainsthesameduringtheentirejourneyofthe
packet.
Thedestination addressintheheaderofapacketinadatagram network
remainsthesameduringtheentirejourneyofthepacket.
Efficiency
Theefficiency ofadatagram networkisbetterthanthatofacircuit-switched network;
resources areallocated onlywhentherearepacketstobetransferred. Ifasourcesends
apacketandthereisadelayofafewminutesbeforeanotherpacketcanbesent,the
resources canbereallocated duringtheseminutesforotherpacketsfromothersources.SECTION 8.3VIRTUAL-CIRCUIT NETWORKS 221
Delay
Theremaybegreaterdelayinadatagram network thaninavirtual-circuit network.
Although therearenosetupandteardown phases,eachpacketmayexperience awaitata
switchbeforeitisforwarded. Inaddition, sincenotallpacketsinamessage necessarily
travelthroughthesameswitches, thedelayisnotuniform forthepacketsofamessage.
Figure8.9givesanexample ofdelayinadatagram networkforonesinglepacket.
Figure8.9Delayinadatagram network
Wai~ing[
timei------J
Am---------tl~I_----_~_----_____1
Transmis~ion [
limer----=:--,-,---J
Waiting[
time,------1B
Time Time Time Time
Thepackettravelsthroughtwoswitches. Therearethreetransmission times(3T),
threepropagation delays(slopes3'tofthelines),andtwowaitingtimes(WI+w2)'We
ignoretheprocessing timeineachswitch.Thetotaldelayis
Totaldelay=3T+3t+WI+W2
Datagram Networks intheInternet
Aswewillseeinfuturechapters, theInternet haschosenthedatagram approach to
switching atthenetwork layer.Itusestheuniversal addresses definedinthenetwork
layertoroutepacketsfromthesourcetothedestination.
Switching intheInternetisdonebyusingthedatagram
approach topacketswitching atthenetworklayer.
8.3VIRTUAL-CIRCUIT NETWORKS
Avirtual-circuit network isacrossbetween acircuit-switched network andadatagram
network.Ithassomecharacteristics ofboth.
1.Asinacircuit-switched network, therearesetupandteardown phasesinaddition
tothedatatransferphase.222CHAPTER 8SWITCHING
2.Resources canbeallocated duringthesetupphase,asinacircuit-switched network,
orondemand, asinadatagram network.
3.Asinadatagram network, dataarepacketized andeachpacketcarriesanaddressin
theheader.However, theaddressintheheaderhaslocaljurisdiction (itdefineswhat
shouldbethenextswitchandthechannelonwhichthepacketisbeingcanied), not
end-to-end jurisdiction. Thereadermayaskhowtheintermediate switches know
wheretosendthepacketifthereisnofinaldestination addresscarriedbyapacket.
Theanswerwillbeclearwhenwediscussvirtual-circuit identifiers inthenextsection.
4.Asinacircuit-switched network, allpacketsfollowthesamepathestablished during
theconnection.
5.Avirtual-circuit network isnormally implemented inthedatalinklayer,whilea
circuit-switched network isimplemented inthephysical layerandadatagram net­
workinthenetwork layer.Butthismaychangeinthefuture.
Figure8.10isanexample ofavirtual-circuit network. Thenetwork hasswitches that
allowtrafficfromsourcestodestinations. Asourceordestination canbeacomputer,
packetswitch,bridge,oranyotherdevicethatconnects othernetworks.
Figure8.10Virtual-circuit network
Addressing
Inavirtual-circuit network, twotypesofaddressing areinvolved: globalandlocal
(virtual-circuit identifier).
GlobalAddressing
Asourceoradestination needstohaveaglobaladdress-an addressthatcanbeunique
inthescopeofthenetwork orinternationally ifthenetwork ispartofaninternational
network. However, wewillseethataglobaladdressinvirtual-circuit networks isused
onlytocreateavirtual-circuit identifier, asdiscussed next.
Virtual-Circuit Identifier
Theidentifier thatisactuallyusedfordatatransferiscalledthevirtual-circuit identifier
(Vel).Avel,unlikeaglobaladdress, isasmallnumberthathasonlyswitchscope;itSECTION 8.3VIRTUAL-CIRCUIT NETWORKS 223
isusedbyaframebetween twoswitches. Whenaframearrivesataswitch,ithasa
VCI;whenitleaves,ithasadifferent VCl.Figure8.11showshowtheVCIinadata
framechangesfromoneswitchtoanother.NotethataVCIdoesnotneedtobealarge
numbersinceeachswitchcanuseitsownuniquesetofVCls.
Figure8.11Virtual-circuit identifier
VCII VCI
IDatatEJ~ IDataI~~
-----===::::=------~..I'.. ~=====----
ThreePhases
Asinacircuit-switched network, asourceanddestination needtogothroughthree
phasesinavirtual-circuit network: setup,datatransfer, andteardown. Inthesetup
phase,thesourceanddestination usetheirglobaladdresses tohelpswitches maketable
entriesfortheconnection. Intheteardown phase,thesourceanddestination informthe
switches todeletethecorresponding entry.Datatransferoccursbetween thesetwo
phases.Wefirstdiscussthedatatransferphase,whichismorestraightforward; wethen
talkaboutthesetupandteardown phases.
DataTransfer Phase
Totransferaframefromasourcetoitsdestination, allswitches needtohaveatable
entryforthisvirtualcircuit.Thetable,initssimplest form,hasfourcolumns. This
meansthattheswitchholdsfourpiecesofinformation foreachvirtualcircuitthatis
alreadysetup.Weshowlaterhowtheswitches maketheirtableentries,butforthe
momentweassumethateachswitchhasatablewithentriesforallactivevirtualcir­
cuits.Figure8.12showssuchaswitchanditscorresponding table.
Figure8.12showsaframearrivingatport1withaVCIof14.Whentheframe
arrives,theswitchlooksinitstabletofindport1andaVCIof14.Whenitisfound,the
switchknowstochangetheVCIto22andsendouttheframefromport3.
Figure8.13showshowaframefromsourceAreachesdestination Bandhowits
VCIchangesduringthetrip.EachswitchchangestheVCIandroutestheframe.
Thedata transferphaseisactiveuntilthesourcesendsallitsframestothedestina­
tion.Theprocedure attheswitchisthesameforeachframeofamessage. Theprocess
createsavirtualcircuit,notarealcircuit,betweenthesourceanddestination.
SetupPhase
Inthesetupphase,aswitchcreatesanentryforavirtualcircuit.Forexample, suppose
sourceAneedstocreateavirtualcircuittoB.Twostepsarerequired: thesetuprequest
andtheacknowledgment.224CHAPTER 8SWITCHING
Figure8.12Switchandtablesinavirtual-circuit network
Incoming Outgoing
PortVClPortVCl
114322
177241
~'~
IData~IData[EJ-+lA3IData@]-+
2
~t
Figure8.13Source-to-destination datatransferinavirtual-circuit network
Incoming Outgoing
PortVClPortVCl
I14366Incoming Outgoing
PortVClPortVCI
222377
Incoming Outgoing
PortVCIPortVCl
166222
SetupRequest Asetuprequestframeissentfromthesourcetothedestination.
Figure8.14showstheprocess.
a.SourceAsendsasetupframe toswitch1.
b.Switch1receivesthesetuprequestframe.ItknowsthataframegoingfromAtoB
goesoutthroughport3.Howtheswitchhasobtained thisinformation isapoint
coveredinfuturechapters. Theswitch,inthesetupphase,actsasapacketswitch;
ithasaroutingtablewhichisdifferent fromtheswitching table.Forthemoment,
assumethatitknowstheoutputport.TheswitchcreatesanentryinitstableforSECTION 8.3VIRTUAL-CIRCUIT NETWORKS 225
Figure8.14Setuprequestinavirtual-circuit network
Incoming Outgoing
PortIvcIPortIVCI
1I143IIncoming Outgoing
PortIVCIPortIVCI
21223IVCI=77
Incoming Outgoing
PortIVCIPortIVCI
I I662I
thisvirtualcircuit,butitisonlyabletofillthreeofthefourcolumns. Theswitch
assignstheincoming port(1)andchooses anavailable incoming VCI(14)andthe
outgoing port(3).Itdoesnotyetknowtheoutgoing VCI,whichwillbefounddur­
ingtheacknowledgment step.Theswitchthenforwards theframethroughport3
toswitch2.
c.Switch2receives thesetuprequestframe.Thesameeventshappenhereasat
switch1;threecolumns ofthetablearecompleted: inthiscase,incoming port(l),
incoming VCI(66),andoutgoing port(2).
d.Switch3receives thesetuprequestframe.Again,threecolumns arecompleted:
incoming port(2),incoming VCI(22),andoutgoing port(3).
e.Destination Breceives thesetupframe,andifitisreadytoreceiveframesfromA,
itassignsaVCItotheincoming framesthatcomefromA,inthiscase77.This
VCIletsthedestination knowthattheframescomefromA,andnotothersources.
Acknowledgment Aspecialframe,calledtheacknowledgment frame,completes
theentriesintheswitching tables.Figure8.15showstheprocess.
a.Thedestination sendsanacknowledgment toswitch3.Theacknowledgment carries
theglobalsourceanddestination addresses sotheswitchknowswhichentryinthe
tableistobecompleted. TheframealsocarriesVCI77,chosenbythedestination as
theincoming VCIforframesfromA.Switch3usesthisVCItocomplete theoutgoing
VCIcolumnforthisentry.Notethat77istheincoming VCIfordestination B,but
theoutgoing VCIforswitch3.
b.Switch3sendsanacknowledgment toswitch2thatcontains itsincoming VCIinthe
table,chosenintheprevious step.Switch2usesthisastheoutgoing VCIinthetable.
c.Switch2sendsanacknowledgment toswitch1thatcontains itsincoming VCIinthe
table,chosenintheprevious step.Switch1usesthisastheoutgoing VCIinthetable.
d.Finallyswitch1sendsanacknowledgment tosourceAthatcontains itsincoming
VCIinthetable,chosenintheprevious step.
e.Thesourceusesthisastheoutgoing VCIforthedataframestobesenttodestination B.226CHAPTER 8SWITCHING
Figure8.15Setupacknowledgment inavirtual-circuit network
Incoming Outgoing
PortIVCIPortIVCI
21223 I77Incoming Outgoing
PortIVCIPortIVCI
II143166VCI==14 VCI==77
A1--==--;~o@B
Incoming Outgoing
PortIVCIPortIVCI
II662122
Teardowil Phase
Inthisphase,sourceA,aftersendingallframestoB,sendsaspecialframecalleda
teardown request.Destination Bresponds withateardown confirmation frame.All
switches deletethecorresponding entryfromtheirtables.
Efficiency
Aswesaidbefore,resource reservation inavirtual-circuit networkcanbemadeduring
thesetuporcanbeondemandduringthedatatransferphase.Inthefirstcase,thedelay
foreachpacketisthesame;inthesecondcase,eachpacketmayencounter different
delays.Thereisonebigadvantage inavirtual-circuit networkevenifresourceallocation
isondemand. Thesourcecanchecktheavailability oftheresources, withoutactually
reserving it.Consider afamilythatwantstodineatarestaurant. Although therestaurant
maynotaccept reservations (allocation ofthetablesisondemand), thefamilycancall
andfindoutthewaitingtime.Thiscansavethefamilytimeandeffort.
Invirtual-circuit switching, allpacketsbelonging tothesamesourceanddestination
travelthesamepath;butthepacketsmayarriveatthedestination
withdifferent delaysifresourceallocation isondemand.
DelayinVirtual-Circuit Networks
Inavirtual-circuit network, thereisaone-time delayforsetupandaone-time delayfor
teardown.Ifresources areallocated duringthesetupphase,thereisnowaittimefor
individual packets. Figure8.16showsthedelayforapackettraveling throughtwo
switches inavirtual-circuit network.
Thepacketistraveling throughtwoswitches (routers). Therearethreetransmis­
siontimes(3T),threepropagation times(3't),datatransferdepicted bythesloping
lines,asetupdelay(whichincludes transmission andpropagation intwodirections),SECTION 8.4STRUCTURE OFASWITCH 227
Figure8.16Delayinavirtual-circuit network
I~I
"~[--~---------------
~ ,
~]1;'ransmission
tIme
Time Time Time Time
andateardown delay(whichincludestransmission andpropagation inonedirection).
Weignoretheprocessing timeineachswitch.Thetotaldelaytimeis
Totaldelay=3T+3't+setupdelay+teardown delay
Circuit-Switched Technology inWANs
AswewillseeinChapter18,virtual-circuit networks areusedinswitched WANssuch
asFrameRelayandATMnetworks. Thedatalinklayerofthesetechnologies iswell
suitedtothevirtual-circuit technology.
Switching atthedatalinklayerinaswitched WANisnormally
implemented byusingvirtual-circuit techniques.
8.4STRUCTURE OFASWITCH
Weuseswitches incircuit-switched andpacket-switched networks. Inthissection,we
discussthestructures oftheswitches usedineachtypeofnetwork.
Structure ofCircuitSwitches
Circuitswitching todaycanuseeitheroftwotechnologies: thespace-division switchor
thetime-division switch.
Space-Division Switch
Inspace-division switching, thepathsinthecircuitareseparated fromoneanother
spatially. Thistechnology wasoriginally designed foruseinanalognetworks butis
usedcurrently inbothanaloganddigitalnetworks.Ithasevolvedthroughalonghistory
ofmanydesigns.228CHAPTER 8SWITCHING
Crossbar Switch Acrossbar switchconnects ninputstomoutputsinagrid,using
electronic microswitches (transistors) ateachcrosspoint (seeFigure8.17).Themajor
limitation ofthisdesignisthenumberofcrosspoints required. Toconnectninputsto
moutputsusingacrossbar switchrequiresnxmcrosspoints. Forexample, toconnect
1000inputsto1000outputsrequiresaswitchwith1,000,000 crosspoints. Acrossbar
withthisnumberofcrosspoints isimpractical. Suchaswitchisalsoinefficient because
statistics showthat,inpractice, fewerthan25percentofthecrosspoints areinuseat
anygiventime.Therestareidle.
Figure8.17Crossbar switchwiththreeinputsandfouroutputs
2
30-+-· .....--4.---.--.
IIIIIIV
Multistage Switch Thesolution tothelimitations ofthecrossbar switchisthe
multistage switch,whichcombines crossbar switches inseveral(normally three)
stages,asshowninFigure8.18.Inasinglecrossbar switch,onlyoneroworcolumn
(onepath)isactiveforanyconnection. SoweneedNx Ncrosspoints. Ifwecanallow
multiple pathsinsidetheswitch,wecandecrease thenumberofcrosspoints. Each
crosspoint inthemiddlestagecanbeaccessed bymultiple crosspoints inthefirstor
thirdstage.
Figure8.18Multistage switch
Nln k Nln
Crossbars Crossbars Crossbars
n[ In
n[ In N N
n[ In
Stage1 Stage2 Stage3SECTION 8.4STRUCTURE OFASWITCH 229
Todesignathree-stage switch,wefollowthesesteps:
1.WedividetheNinputlinesintogroups,eachofnlines.Foreachgroup,weuse
onecrossbarofsizenxk,wherekisthenumberofcrossbars inthemiddlestage.
Inotherwords,thefirststagehasN/ncrossbars ofnxkcrosspoints.
2.Weusekcrossbars, eachofsize(N/n)x(N/n)inthemiddlestage.
3.WeuseN/ncrossbars, eachofsizekxnatthethirdstage.
Wecancalculate thetotalnumberofcrosspoints asfollows:
N(NN)N (N)2 -enxk)+k-x -+ -(kxn)=2kN+k -n n n n n
Inathree-stage switch,thetotalnumberofcrosspoints is
2kN+k(~Y
whichismuchsmallerthanthenumberofcrosspoints inasingle-stage switch(N2).
Example 8.3
Designathree-stage, 200x200switch(N=200)withk=4andn=20.
Solution
InthefirststagewehaveN/nor10crossbars, eachofsize20x4.Inthesecondstage,wehave
4crossbars, eachofsize10x10.Inthethirdstage,wehave10crossbars, eachofsize4 x20.
Thetotalnumberofcrosspoints is2kN+k(N/n)2,or2000crosspoints. Thisis5percentofthe
numberofcrosspoints inasingle-stage switch(200x200=40,000).
Themultistage switchinExample 8.3hasonedrawback-blocking duringperiods
ofheavytraffic:Thewholeideaofmultistage switching istosharethecrosspoints in
themiddle-stage crossbars. Sharingcancausealackofavailability iftheresources are
limitedandall userswantaconnection atthesametime.Blocking referstotimeswhen
oneinputcannotbeconnected toanoutputbecausethereisnopathavailable between
them-all thepossibleintermediate switches areoccupied.
Inasingle-stage switch,blocking doesnotoccurbecauseeverycombination of
inputandoutputhasitsowncrosspoint; thereisalwaysapath.(Casesinwhichtwo
inputsaretryingtocontactthesameoutputdonotcount.Thatpathisnotblocked; the
outputismerelybusy.)Inthemultistage switchdescribed inExample 8.3,however,
only4ofthefirst20inputscanusetheswitchatatime,only4ofthesecond 20 inputs
canusetheswitchatatime,andsoon.Thesmallnumberofcrossbars atthemiddle
stagecreatesblocking.
Inlargesystems, suchasthosehaving10,000inputsandoutputs,thenumberof
stagescanbeincreased tocutdownonthenumberofcrosspoints required. Asthenum­
berofstagesincreases, however, possibleblocking increases aswell.Manypeoplehave
experienced blocking onpublictelephone systemsinthewakeofanaturaldisaster
whenthecallsbeingmadetocheckonorreassurerelatives faroutnumber theregular
loadofthesystem.230CHAPTER 8SWITCHING
Closinvestigated thecondition ofnonblocking inmultistage switches andcameup
withthefollowing formula. Inanonblocking switch,thenumberofmiddle-stage
switches mustbeatleast2n-1.Inotherwords,weneedtohavek22n-1.
Notethatthenumberofcrosspoints isstillsmallerthanthatinasingle-stage
switch.Nowweneedtominimize thenumberofcrosspoints withafixedNbyusing
theCloscriteria.Wecantakethederivative oftheequation withrespectton(theonly
variable) andfindthevalueofnthatmakestheresultzero.Thisnmustbeequaltoor
greaterthan(N/2)1/2.Inthiscase,thetotalnumberofcrosspoints isgreaterthanorequal
to4N[(2N)112-1].Inotherwords,theminimum numberofcrosspoints according tothe
Closcriteriaisproportional toN3/2.
According toCloscriterion:
n=(NI2)1/2
k>2n-1
Totalnumberofcrosspoints 24N[(2N)1/2-1]
Example 8.4
Redesign theprevious three-stage, 200x200switch,usingtheCloscriteriawithaminimum
numberofcrosspoints.
Solution
Weletn=(200/2) 1/2,orn=10.Wecalculate k=2n-1=19.Inthefirststage,wehave200/10,
or20,crossbars, eachwithlOX19crosspoints. Inthesecondstage,wehave19crossbars,
eachwith10X10crosspoints. Inthethirdstage,wehave20crossbars eachwith19X10
crosspoints. Thetotalnumberofcrosspoints is20(10X19)+19(10X10)+20(19XlO)=
9500.Ifweuseasingle-stage switch,weneed200X200=40,000crosspoints. Thenumber
ofcrosspoints inthisthree-stage switchis24percentthatofasingle-stage switch.More
pointsareneededthaninExample 8.3(5percent). Theextracrosspoints areneededtoprevent
blocking.
Amultistage switchthatusestheCloscriteriaandaminimum numberofcrosspoints
stillrequiresahugenumberofcrosspoints. Forexample, tohavea100,000input/output
switch,weneedsomething closeto200millioncrosspoints (insteadof10billion).This
meansthatifatelephone company needstoprovideaswitchtoconnect100,000tele­
phonesinacity,itneeds200millioncrosspoints. Thenumbercanbereducedifwe
acceptblocking. Today,telephone companies usetime-division switching oracombina­
tionofspace-andtime-division switches, aswewillseeshortly.
Time-Division Switch
Time-division switching usestime-division multiplexing (TDM)insideaswitch.The
mostpopulartechnology iscalledthetime-slot interchange (TSI).
Time-Slot Interchange Figure8.19showsasystemconnecting fourinputlinesto
fouroutputlines.Imagine thateachinputlinewantstosenddatatoanoutputline
according tothefollowing pattern:SECTION 8.4STRUCTURE OFASWITCH 231
Figure8.19Time-slot interchange
Time-division switch
TSI ,C{Jnt!ol unit
1~3
2~4
3~1
4~2
Thefigurecombines aTDMmultiplexer, aTDMdemultiplexer, andaTSIconsist­
ingofrandomaccessmemory(RAM)withseveralmemorylocations. Thesizeofeach
locationisthesameasthesizeofasingletimeslot.Thenumberoflocations isthesame
asthenumberofinputs(inmostcases,thenumbers ofinputsandoutputsareequal).
TheRAMfillsupwithincoming datafromtimeslotsintheorderreceived. Slotsare
thensentoutinanorderbasedonthedecisions ofacontrolunit.
Time-andSpace-Division SwitchCombinations
Whenwecompare space-division andtime-division switching, someinteresting facts
emerge.Theadvantage ofspace-division switching isthatitisinstantaneous. Itsdisadvan­
tageisthenumberofcrosspoints requiredtomakespace-division switching acceptable in
termsofblocking.
Theadvantage oftime-division switching isthatit needsnocrosspoints. Itsdisad­
vantage,inthecaseofTSI,isthatprocessing eachconnection createsdelays.Eachtime
slotmustbestoredbytheRAM,thenretrieved andpassedon.
Inathirdoption,wecombine space-division andtime-division technologies to
takeadvantage ofthebestofboth.Combining thetworesultsinswitches thatare
optimized bothphysically (thenumberofcrosspoints) andtemporally (theamount
ofdelay).Multistage switches ofthissortcanbedesigned astime-space-time (TST)
switch.
Figure8.20showsasimpleTSTswitchthatconsistsoftwotimestagesandone
spacestageandhas12inputsand12outputs.Insteadofonetime-division switch,it
dividestheinputsintothreegroups(offourinputseach)anddirectsthemtothreetime­
slotinterchanges. Theresultisthattheaveragedelayisone-third ofwhatwouldresult
fromusingonetime-slot interchange tohandleall12inputs.
Thelaststageisamirrorimageofthefirststage.Themiddlestageisaspace­
divisionswitch(crossbar) thatconnects theTSIgroupstoallowconnectivity between
allpossibleinputandoutputpairs(e.g.,toconnectinput3ofthefirstgrouptooutput7
ofthesecondgroup).232CHAPTER 8SWITCHING
Figure8.20Time-space-time switch
TST
Space
Structure ofPacketSwitches
Aswitchusedinapacket-switched networkhasadifferent structure fromaswitchused
inacircuit-switched network.We cansaythatapacketswitchhasfourcomponents:
inputports,outputports,theroutingprocessor, andtheswitching fabric,asshown
inFigure8.21.
Figure8.21Packetswitchcomponents
--------------------------------------1
Outputports
Switching fabricRouting
processor
Inputports
1'--__----'
IL _
InputPorts
Aninputportperforms thephysicalanddatalinkfunctions ofthepacketswitch.The
bitsareconstructed fromthereceivedsignal.Thepacketisdecapsulated fromtheframe.
Errorsaredetectedandcorrected. Thepacketisnowreadytoberoutedbythenetwork
layer.Inadditiontoaphysicallayerprocessor and adatalinkprocessor, theinputport
hasbuffers(queues) toholdthepacketbeforeitisdirectedtotheswitching fabric.
Figure8.22showsaschematic diagramofaninputport.SECTION 8.4STRUCTURE OFASWITCH 233
Figure8.22Inputport
Inputport
Physical layer
processorDatalinklayer
processor
OutputPort
Theoutputportperforms thesamefunctions astheinputport,butinthereverseorder.
Firsttheoutgoing packetsarequeued,thenthepacketisencapsulated inaframe,and
finallythephysical layerfunctions areappliedtotheframetocreatethesignaltobe
sentontheline.Figure8.23showsaschematic diagramofanoutputport.
Figure8.23Outputport
Outputport
Datalinklayer
processorPhysical layer
processor
ROllting Processor
Theroutingprocessor performs thefunctions ofthenetwork layer.Thedestination
addressisusedtofindtheaddressofthenexthopand,atthesametime,theoutputport
numberfromwhichthepacketissentout.Thisactivityissometimes referredtoas
tablelookupbecausetheroutingprocessor searches theroutingtable.Inthenewer
packetswitches, thisfunctionoftheroutingprocessor isbeingmovedtotheinputports
tofacilitate andexpedite theprocess.
Switching "Fabrics
Themostdifficulttaskinapacketswitchistomovethepacketfromtheinputqueueto
theoutputqueue.Thespeedwithwhichthisisdoneaffectsthesizeoftheinput/output
queueandtheoveralldelayinpacketdelivery. Inthepast,whenapacketswitchwas
actuallyadedicated computer, thememoryofthecomputer orabuswasusedasthe
switching fabric.Theinputportstoredthepacketinmemory; theoutputportretrieved
thepacketfrommemory. Today,packetswitches arespecialized mechanisms thatusea
varietyofswitching fabrics.Webrieflydiscusssomeofthesefabricshere.
Crossbar Switch The simplest typeofswitching fabricisthecrossbar switch,dis­
cussedintheprevious section.
BanyanSwitch Amorerealisticapproach thanthecrossbar switchisthebanyan
switch(namedafterthebanyantree).Abanyanswitchisamultistage switchwith234CHAPTER 8SWITCHING
microswitchesateachstage that routethepacketsbasedontheoutputportrepresented as
abinarystring.Forninputsandnoutputs,wehavelog2nstageswithnl2microswitches
ateachstage.Thefirststageroutesthepacketbasedonthehigh-order bitofthebinary
string.Thesecondstageroutesthepacketbasedonthesecondhigh-order bit,andsoon.
Figure8.24showsabanyanswitchwitheightinputsandeightoutputs.Thenumberof
stagesisIog2(8)=3.
Figure8.24Abanyanswitch
Leftbit Middlebit Rightbit
O~
l~
~6
~7
Figure8.25showstheoperation. Inparta,apackethasarrivedatinputport1and
mustgotooutputport6(110inbinary).Thefirstmicroswitch (A-2)routesthepacket
basedonthefirstbit(1),thesecondmicroswitch (B-4)routesthepacketbasedonthe
secondbit(1),andthethirdmicroswitch(C-4)routesthepacketbasedonthethirdbit(0).
Inpartb,apackethasarrivedatinputport5andmustgotooutputport2(010in
binary).Thefirstmicroswitch (A-2)routesthepacketbasedonthefirstbit(0),thesec­
ondmicroswitch (B-2)routesthepacketbasedonthesecondbit(l),andthethird
microswitch (C-2)routesthepacketbasedonthethirdbit(0).
Figure8.25Examples ofroutinginabanyanswitch
0 0 0 0
1 1 1 I
2 2 2 2
3 3 3 3
4 4 4 4
5 5 5 5
6 6 6 6
7 7 7 7
a.Input1sending acelltooutput6(110) b.Input5sendingacelltooutput2(010)SECTION 8.6KEYTERMS 235
Figure8.26Batcher-banyan switch
Banyanswitch
O~
l~
6~
7~Batcher
switchTrap
module~2
~3
~--+ro ~"'lr-r~4
~5
~6
~7
Batcher-Banyan Switch Theproblem withthebanyanswitchisthepossibility of
internalcollision evenwhentwopacketsarenotheadingforthesameoutputport.We
cansolvethisproblembysortingthearrivingpacketsbasedontheirdestination port.
K.E.Batcherdesigned aswitchthatcomesbeforethebanyanswitchandsortsthe
incoming packetsaccording totheirfinaldestinations. Thecombination iscalledthe
Batcher-banyan switch.Thesortingswitchuseshardware mergingtechniques, butwe
donotdiscussthedetailshere.Normally, anotherhardware module calledatrapis
addedbetween theBatcherswitchandthebanyanswitch(seeFigure8.26)Thetrap
moduleprevents duplicate packets(packets withthesameoutputdestination) from
passingtothebanyanswitchsimultaneously. Onlyonepacketforeachdestination is
allowedateachtick;ifthereismorethanone,theywaitforthenexttick.
8.5RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
books.Theitemsinbrackets [...]refertothereference listattheendofthetext.
Books
Switching isdiscussed inChapter10of[Sta04]andChapters 4 and7of[GW04]. Circuit­
switching isfullydiscussed in[BELOO].
8.6KEYTERMS
banyanswitch
Batcher-banyan switch
blocking
circuitswitching
circuit-switched network
crossbarswitchcrosspoint
datatransferphase
datagram
datagram network
endsystem
inputport236CHAPTER 8SWITCHING
multistage switch
outputport
packet-switched network
routingprocessor
setupphase
space-division switching
switch
switching
switching fabrictablelookup
teardown phase
time-division switching
time-slot interchange (TSI)
time-space-time (TST)
switch
trap
virtual-circuit identifier (VCI)
virtual-circuit network
8.7SUMMARY
oAswitched networkconsistsofaseriesofinterlinked nodes,calledswitches. Tradi­
tionally'threemethodsofswitching havebeenimportant: circuitswitching, packet
switching, andmessageswitching.
oWecandividetoday'snetworks intothreebroadcategories: circuit-switched networks,
packet-switched networks, andmessage-switched. Packet-switched networks canalso
bedividedintotwosubcategories: virtual-circuit networks anddatagram networks
oAcircuit-switched networkismadeofasetofswitchesconnected byphysicallinks,
inwhicheachlinkisdividedintonchannels. Circuitswitching takesplaceatthe
physical layer.Incircuitswitching, theresources needtobereserved duringthe
setupphase;theresources remaindedicated fortheentiredurationofdatatransfer
phaseuntiltheteardown phase.
oInpacketswitching, thereisnoresource allocation forapacket.Thismeansthat
thereisnoreserved bandwidth onthelinks,andthereisnoscheduled processing
timeforeachpacket.Resources areallocated ondemand.
oInadatagram network, eachpacketistreatedindependently ofallothers.Packetsin
thisapproach arereferredtoasdatagrams. Therearenosetuporteardown phases.
oAvirtual-circuit networkisacrossbetweenacircuit-switched networkandadata­
gramnetwork. Ithassomecharacteristics ofboth.
oCircuitswitching useseitheroftwotechnologies: thespace-division switchorthe
time-division switch.
oAswitchinapacket-switched networkhasadifferentstructure fromaswitchusedin
acircuit-switched network.We cansaythatapacketswitchhasfourtypesofcompo­
nents:inputports,outputports,aroutingprocessor, andswitching fabric.
8.8PRACTICE SET
ReviewQuestions
I.Describe theneedforswitching anddefineaswitch.
2.Listthethreetraditional switching methods. Whatarethemostcommon today?SECTION 8.8PRACTICE SET 237
3.Whatarethetwoapproaches topacket-switching?
4.Compare andcontrastacircuit-switched network andapacket-switched network.
5.Whatistheroleoftheaddressfieldinapackettraveling through adatagram
network?
6.Whatistheroleoftheaddressfieldinapackettraveling throughavirtual-circuit
network?
7.Compare space-division andtime-division switches.
8.WhatisTSIanditsroleinatime-division switching?
9.Defineblocking inaswitched network.
10.Listfourmajorcomponents ofapacketswitchandtheirfunctions.
Exercises
11.Apathinadigitalcircuit-switched networkhasadatarateofIMbps.Theexchange
of1000bitsisrequired forthesetupandteardown phases.Thedistance between
twopartiesis5000km.Answerthefollowing questions ifthepropagataion speedis
2X108m:
a.Whatisthetotaldelayif1000bitsofdataareexchanged duringthedatatransfer
phase?
b.Whatisthetotaldelayif100,000 bitsofdataareexchanged duringthedata
transferphase?
c.Whatisthetotaldelayif1,000,000 bitsofdataareexchanged duringthedata
transferphase?
d.Findthedelayper1000bitsofdataforeachoftheabovecasesandcompare
them.Whatcanyouinfer?
12.Fiveequal-size datagrams belonging tothesamemessage leaveforthedestina­
tiononeafteranother. However, theytravelthrough different pathsasshownin
Table8.1.
Table8.1Exercise 12
Datagram PathLength VisitedSwitches
1 3200Km 1,3,5
2 11,700Km 1,2,5
3 12,200Km 1,2,3,5
4 10,200Km 1,4,5
5 10,700Km 1,4,3,5
Weassumethatthedelayforeachswitch(including waitingandprocessing) is3,
10,20,7,and20msrespectively. Assuming thatthepropagation speedis2 x108m,
findtheorderthedatagrams arriveatthedestination andthedelayforeach.Ignore
anyotherdelaysintransmission.238CHAPTER 8SWITCHING
13.Transmission ofinformation inanynetwork involves end-to-end addressing and
sometimes localaddressing (suchasYCI).Table8.2showsthetypesofnetworks
andtheaddressing mechanism usedineachofthem.
Table8.2Exercise 13
Network Setup DataTransfer Teardown
Circuit-switched End-ta-end End-ta-end
Datagram End-ta-end
Virtual-circuit End-to-end Local End-to-end
Answerthefollowing questions:
a.Whydoesacircuit-switched networkneedend-to-end addressing duringthesetup
andteardown phases?Whyarenoaddresses neededduringthedatatransferphase
forthistypeofnetwork?
b.Whydoesadatagram networkneedonlyend-to-end addressing duringthedata
transferphase,butnoaddressing duringthesetupandteardown phases?
c.Whydoesavirtual-circuit networkneedaddresses duringallthreephases?
14.Wementioned thattwotypesofnetworks, datagram andvirtual-circuit, needa
routingorswitching tabletofindtheoutputportfromwhichtheinformation
belonging toadestination shouldbesentout,butacircuit-switched network has
noneedforsuchatable.Givethereasonforthisdifference.
15.Anentryintheswitching tableofavirtual-circuit network isnormally created
duringthesetupphaseanddeletedduringtheteardown phase.Inotherwords,the
entriesinthistypeofnetwork reflectthecurrentconnections, theactivityinthe
network. Incontrast, theentriesinaroutingtableofadatagram network donot
dependonthecurrentconnections; theyshowtheconfiguration ofthenetworkand
howanypacketshouldberoutedtoafinaldestination. Theentriesmayremain
thesameevenifthereisnoactivityinthenetwork. Theroutingtables,however, are
updatediftherearechangesinthenetwork. Canyouexplainthereasonforthese
twodifferent characteristics? Canwesaythatavirtual-circuit isaconnection­
orientednetworkandadatagram networkisaconnectionLess networkbecauseofthe
abovecharacteristics?
16.Theminimum numberofcolumnsinadatagram networkistwo;theminimum num­
berofcolumns inavirtual-circuit networkisfour.Canyouexplainthereason?Isthe
difference relatedtothetypeofaddresses carriedinthepacketsofeachnetwork?
17.Figure8.27showsaswitch(router)inadatagram network.
Findtheoutputportforpacketswiththefollowing destination addresses:
Packet1:7176
Packet2:1233
Packet3:8766
Packet4:9144
18.Figure8.28showsaswitchinavirtualcircuitnetwork.SECTION 8.8PRACTICE SET 239
Figure8.27Exercise 17
Destination Output
address port
1233 3
1456 2
3255 1
4470 4
7176 2
8766 3
9144 24
2 3
Figure8.28Exercise 18
Incoming Outgoing
Port VCI Port VCI
114 322
271441
292 145
358 243
378 270
456 3 1124
FindtheoutputportandtheoutputVCIforpacketswiththefollowing inputport
andinputVCIaddresses:
Packet1:3,78
Packet2:2,92
Packet3:4,56
Packet4:2,71
19.Answerthefollowing questions:
a.Canaroutingtableinadatagram networkhavetwoentrieswiththesamedestina­
tionaddress? Explain.
b.Canaswitching tableinavirtual-circuit networkhavetwoentrieswiththesame
inputportnumber? Withthesameoutputportnumber? Withthesameincoming
VCls?WiththesameoutgoingVCls?Withthesameincoming values(port,VCI)?
Withthesameoutgoing values(port,VCI)?
20.Itisobviousthatarouteroraswitchneedstodosearching tofindinformation in
thecorresponding table.Thesearching inaroutingtableforadatagram networkis
basedonthedestination address; thesearching inaswitching tableinavirtual­
circuitnetworkisbasedonthecombination ofincoming portandincoming VCI.
Explainthereasonanddefinehowthesetablesmustbeordered(sorted)basedon
thesevalues.
2].Consider annXkcrossbarswitchwithninputsandkoutputs.
a.Canwesaythatswitchactsasamultiplexer ifn>k?
b.Canwesaythatswitchactsasademultiplexer ifn<k?240CHAPTER 8SWITCHING
22.Weneedathree-stage space-division switchwithN=100.Weuse10crossbars at
thefirstandthirdstagesand 4crossbars atthemiddlestage.
a.Drawtheconfiguration diagram.
b.Calculate thetotalnumberofcrosspoints.
c.Findthepossiblenumberofsimultaneous connections.
d.Findthepossiblenumberofsimultaneous connections ifweuseonesinglecross­
bar(100x100).
e.Findtheblocking factor,theratioofthenumberofconnections incandind.
23.RepeatExercise 22ifweuse6crossbars atthemiddlestage.
24.Redesign theconfiguration ofExercise 22usingtheCloscriteria.
25.Weneedtohaveaspace-division switchwith1000inputsandoutputs.Whatisthe
totalnumberofcrosspoints ineachofthefollowing cases?
a.Usingonesinglecrossbar.
b.Usingamulti-stage switchbasedontheCloscriteria
26.Weneedathree-stage time-space-time switchwithN=100.Weuse10TSIsatthe
firstandthirdstagesand 4crossbars atthemiddlestage.
a.Drawtheconfiguration diagram.
b.Calculate thetotalnumberofcrosspoints.
c.Calculate thetotalnumberofmemorylocations weneedfortheTSIs.CHAPTER 9
UsingTelephone andCableNetworks
forDataTransmission
Telephone networks wereoriginally createdtoprovidevoicecommunication. Theneed
tocommunicate digitaldataresultedintheinvention ofthedial-upmodem.Withthe
adventoftheInternetcametheneedforhigh-speed downloading anduploading; the
modemwasjusttooslow.Thetelephone companies addedanewtechnology, thedigital
subscriber line(DSL).Although dial-upmodems stillexistinmanyplacesalloverthe
world,DSLprovides muchfasteraccesstotheInternetthroughthetelephone network.
Inthischapter,wefirstdiscussthebasicstructure ofthetelephone network. Wethensee
howdial-upmodems andDSLtechnology usethesenetworks toaccesstheInternet.
Cablenetworks wereoriginally createdtoprovideaccesstoTVprograms forthose
subscribers whohadnoreception becauseofnaturalobstructions suchasmountains.
Laterthecablenetworkbecamepopularwithpeoplewhojustwantedabettersignal.In
addition, cablenetworks enabledaccesstoremotebroadcasting stationsviamicrowave
connections. CableTValsofoundagoodmarketinInternetaccessprovision using
someofthechannels originally designed forvideo.Afterdiscussing thebasicstructure
ofcablenetworks, wediscusshowcablemodems canprovideahigh-speed connection
totheInternet.
9.1TELEPHONE NETWORK
Telephone networks usecircuitswitching. Thetelephone network haditsbeginnings
inthelate1800s.Theentirenetwork, whichisreferredtoastheplainoldtelephone
system(POTS), wasoriginally ananalogsystemusinganalogsignalstotransmitvoice.
Withtheadventofthecomputer era,thenetwork, inthe1980s,begantocarrydatain
additiontovoice.Duringthelastdecade,thetelephone network hasundergone many
technical changes. Thenetworkisnowdigitalaswellasanalog.
MajorComponents
Thetelephone network, asshowninFigure9.1,ismadeofthreemajorcomponents:
localloops,trunks,andswitching offices.Thetelephone networkhasseverallevelsof
switching officessuchasendoffices,tandemoffices,andregionaloffices.
241242CHAPTER 9USING1ELEPHONE ANDCABLENETWORKS FORDATATRANSMISSION
Figure9.1Atelephone system
Trunk
Tandem
officesTrunk
Regional offices
LocalLoops
Onecomponent ofthetelephone networkisthelocalloop,atwisted-pair cablethatcon­
nectsthesubscriber telephone tothenearestendofficeorlocalcentraloffice.Thelocal
loop,whenusedforvoice,hasabandwidth of4000Hz(4kHz).Itisinteresting toexamine
thetelephone numberassociated witheachlocalloop.Thefirstthreedigitsofalocaltele­
phonenumberdefinetheoffice,andthenextfourdigitsdefinethelocalloopnumber.
Trunks
Trunksaretransmission mediathathandlethecommunication between offices.A
trunknormally handleshundreds orthousands ofconnections throughmultiplexing.
Transmission isusuallythroughopticalfibersorsatellitelinks.
Switching Offices
Toavoidhavingapermanent physical linkbetween anytwosubscribers, thetelephone
company hasswitches locatedinaswitching office.Aswitchconnects severallocal
loopsortrunksandallowsaconnection between different subscribers.
LATAs
Afterthedivestiture of1984(seeAppendix E),theUnitedStateswasdividedintomore
than200local-access transport areas(LATAs). ThenumberofLATAshasincreased
sincethen.ALATAcanbeasmallorlargemetropolitan area.Asmallstatemayhaveone
singleLATA;alargestatemayhaveseveralLATAs.ALATAboundary mayoverlapthe
boundary ofastate;partofaLATAcanbeinonestate,partinanotherstate.
Intra-LATA Services
Theservicesofferedbythecommon carriers (telephone companies) insideaLATAare
calledintra-LATA services. Thecarrierthathandlestheseservices iscalledalocal
exchange carrier(LEC).BeforetheTelecommunications Actof1996(seeAppendix E),
intra-LATA servicesweregrantedtoonesinglecarrier.Thiswasamonopoly. After1996,
morethanonecarriercouldprovideservicesinsideaLATA.Thecarrierthatprovided ser­
vicesbefore1996ownsthecablingsystem(localloops)andiscalledtheincumbent local
exchange carrier(ILEC). Thenewcarriers thatcanprovide services arecalled
competitive localexchange carriers(CLECs). Toavoidthecostsofnewcabling, itSECTION 9.1TELEPHONE NETWORK 243
wasagreedthattheILECswouldcontinue toprovidethemainservices, andtheCLECs
wouldprovideotherservicessuchasmobiletelephone service,tollcallsinsideaLATA,
andsoon.Figure9.2showsaLATAandswitching offices.
Intra-LATA servicesareprovided bylocalexchange carriers. Since1996,therearetwo
typesofLECs: incumbent localexchange carriersandcompetitive localexchange carriers.
Figure9.2Switching officesinaLATA
Tandem (toll)offices
Communication insideaLATAishandledbyendswitches andtandemswitches. A
callthatcanbecompleted byusingonlyendofficesisconsidered toll-free. Acallthat
hastogothroughatandemoffice(intra-LATA tolloffice)ischarged.
Inter-LATA Services
Theservicesbetween LATAsarehandledbyinterexchange carriers (IXCs).These
carriers,sometimes calledlong-distance companies, providecommunication services
between twocustomers indifferent LATAs.Aftertheactof1996(seeAppendix E),
theseservicescanbeprovided byanycarrier,including thoseinvolved inintra-LATA
services. Thefieldiswideopen.Carriersproviding inter-LATA servicesincludeAT&T,
MCI,WorldCom, Sprint,andVerizon.
TheIXCsarelong-distance carriersthatprovidegeneraldatacommunications ser­
vicesincluding telephone service.Atelephone callgoingthroughanIXCisnormally
digitized, withthecarriersusingseveraltypesofnetworks toprovideservice.
PointsofPresence
Aswediscussed, intra-LATA servicescanbeprovided byseveralLECs(oneILECand
possibly morethanoneCLEC).Wealsosaidthatinter-LATA servicescanbeprovided
byseveralIXCs.Howdothesecarriersinteractwithoneanother? Theansweris,viaa
switching officecalledapointofpresence (POP).EachIXCthatwantstoprovideinter­
LATAservicesinaLATAmusthaveaPOPinthatLATA.TheLECsthatprovideservices
insidetheLATAmustprovideconnections sothateverysubscriber canhaveaccesstoall
POPs.Figure9.3illustrates theconcept.
Asubscriber whoneedstomakeaconnection withanothersubscriber isconnected
firsttoanendswitchandthen,eitherdirectlyorthroughatandemswitch,toaPOP.The244CHAPTER 9USINGTELEPHONE ANDCABLENETWORKS FORDATATRANSMISSION
Figure9.3Pointofpresences (POPs)
LATA
callnowgoesfromthePOPofanIXC(theonethesubscriber haschosen)inthesource
LATAtothePOPofthesameIXCinthedestination LATA.Thecallispassedthrough
thetollofficeoftheIXCandiscarriedthroughthenetworkprovided bytheIXC.
Signaling
Thetelephone network, atitsbeginning, usedacircuit-switched networkwithdedicated
links(multiplexing hadnotyetbeeninvented) totransfervoicecommunication. Aswe
sawinChapter8,acircuit-switched network needsthesetupandteardown phasesto
establish andterminate pathsbetweenthetwocommunicating parties.Inthebeginning,
thistaskwasperformed byhumanoperators. Theoperator roomwasacentertowhich
allsubscribers wereconnected. Asubscriber whowishedtotalktoanothersubscriber
pickedupthereceiver(off-hook) andrangtheoperator. Theoperator, afterlistening to
thecallerandgettingtheidentifier ofthecalledparty,connected thetwobyusingawire
withtwoplugsinsertedintothecorresponding twojacks.Adedicated circuitwascreated
inthisway.Oneoftheparties,aftertheconversation ended,informed theoperator to
disconnect thecircuit.Thistypeofsignaling iscalledin-bandsignaling becausethesame
circuitcanbeusedforbothsignaling andvoicecommunication.
Later,thesignaling systembecameautomatic. Rotarytelephones wereinventedthat
sentadigitalsignaldefiningeachdigitinamultidigit telephone number.Theswitchesin
thetelephone companies usedthedigitalsignalstocreateaconnection betweenthecaller
andthe called parties.Bothin-bandandout-of-band signaling wereused.Inin-band
signaling, the4-kHzvoicechannelwasalsousedtoprovidesignaling. Inout-of-band
signaling, aportionofthevoicechannelbandwidth wasusedforsignaling; thevoice
bandwidth andthesignaling bandwidth wereseparate.SECTION 9.1TELEPHONE NETWORK 245
Astelephone networks evolvedintoacomplex network, thefunctionality ofthesig-
nalingsystemincreased. Thesignaling systemwasrequiredtoperformothertaskssuchas
1.Providing dialtone,ringtone,andbusytone
2.Transferring telephone numbers betweenoffices
3.Maintaining andmonitoring thecall
4.Keepingbillinginformation
5.Maintaining andmonitoring thestatusofthetelephone networkequipment
6.Providing otherfunctions suchascallerID,voicemail,andsoon
Thesecomplex tasksresultedintheprovision ofaseparatenetworkforsignaling. This
meansthatatelephone networktodaycanbethoughtofastwonetworks: asignaling
networkandadatatransfernetwork.
Thetasksofdatatransferandsignaling areseparated inmoderntelephone networks:
datatransferisdonebyonenetwork, signaling byanother.
However, weneedtoemphasize apointhere.Although thetwonetworks areseparate,
thisdoesnotmeanthatthereareseparatephysical linkseverywhere; thetwonetworks
mayuseseparatechannels ofthesamelinkinpartsofthesystem.
DataTransfer Network
Thedatatransfernetworkthatcancarrymultimedia information todayis,forthemost
part,acircuit-switched network, although itcanalsobeapacket-switched network. This
networkfollowsthesametypeofprotocols andmodelasothernetworks discussed in
thisbook.
SignalingNetwork
Thesignaling network, whichisourmainconcerninthissection,isapacket-switched
networkinvolving thelayerssimilartothoseintheOSImodelorInternetmodel,dis­
cussedinChapter2.Thenatureofsignaling makesitmoresuitedtoapacket-switching
networkwithdifferentlayers.Forexample, theinformation neededtoconveyatelephone
addresscaneasilybeencapsulated inapacketwithalltheerrorcontrolandaddressing
information. Figure9.4showsasimplified situation ofatelephone networkinwhichthe
twonetworks areseparated.
Theusertelephone orcomputer isconnected tothesignalpoints(SPs).Thelink
between thetelephone setandSPiscommon forthetwonetworks. Thesignaling net­
workusesnodescalledsignaltransport ports(STPs)thatreceiveandforwardsignaling
messages. Thesignaling networkalsoincludesaservicecontrolpoint(SCP)thatcon­
trolsthewholeoperation ofthenetwork. Othersystemssuchasadatabase centermay
beincluded toprovidestoredinformation abouttheentiresignaling network.
Signaling SystemSeven (5S7)
Theprotocolthatisusedinthesignaling networkiscalledSignaling SystemSeven(SS7).
Itisverysimilartothefive-layer InternetmodelwesawinChapter2,butthelayershave
differentnames,asshowninFigure9.5.246 CHAPTER 9USINGTELEPHONE ANDCABLENETWORKS FORDATATRANSMISSION
Figure9.4Datatransferandsignaling networks
SP:Signalpoint
STP:SignaltransferpointDatabase
Figure9.5LayersinSS7Signaling network
Datatransfernetwork
Upperlayers,',T(;~ __
Network layer
Datalinklayer
Physical layerTUP
SCCP
MTPlevel3
MTPIevel2
MTPlevell~SNP,I,
r,;":~-MTP:Message transferpart
SCCP:Signaling connection controlpoint
TeAP:Transaction capabilities application port
TUP:Telephone userport
ISUP:ISDNuserport
Physical Layer:MTPLevel1ThephysicallayerinSS7calledmessage transport
part(MTP)levelIusesseveralphysicallayerspecifications suchasT-l(1.544Mbps)
andDCa(64kbps).
DataLinkLayer:MTPLevel2TheMTPlevel2layerprovides typicaldatalink
layerservicessuchaspacketizing, usingsourceanddestination addressinthepacket
header,andCRCforerrorchecking.
Network Layer:MTPLevel3TheMTPlevel3layerprovidesend-to-end connectivity
byusingthedatagram approach toswitching. Routersandswitchesroutethesignalpackets
fromthesourcetothedestination.
Transport Layer:SCCPThesignaling connection controlpoint(SCCP)isused
forspecialservicessuchasSaO-callprocessing.
UpperLayers: TUP, TCAP,andISUPTherearethreeprotocols attheupperlayers.
Telephone userport(TUP)isresponsible forsettingupvoicecalls.ItreceivesthedialedSECTION 9.1TELEPHONE NETWORK 247
digitsandroutesthecalls.Transaction capabilities application port(TCAP)provides
remotecallsthatletanapplication programonacomputer invokeaprocedure onanother
computer. ISDNuserport(ISUP)canreplaceTUPtoprovide services similartothose
ofanISDNnetwork.
Services Provided byTelephone Networks
Telephone companies providetwotypesofservices: analoganddigital.
AnalogServices
Inthebeginning, telephone companies provided theirsubscribers withanalogservices.
Theseservicesstillcontinue today.Wecancategorize theseservicesaseitheranalog
switched services oranalogleasedservices.
AnalogSwitched Services Thisisthefamiliardial-upservicemostoftenencountered
whenahometelephone isused.Thesignalonalocalloopisanalog,andthebandwidth is
usuallybetween0and4000Hz.Alocalcallserviceisnormally provided foraflatmonthly
rate,althoughinsomeLATAs,thecarrierchargesforeachcallorasetofcalls.Therationale
foranonflat-ratechargeistoprovidecheaperserviceforthosecustomers whodonot
makemanycalls.Atollcallcanbeintra-LATA orinter-LATA. IftheLATAisgeographi­
callylarge,acallmaygothroughatandemoffice(tolloffice)andthesubscriber willpaya
feeforthecall.Theinter-LATA callsarelong-distance callsandarechargedassuch.
Another serviceiscalled800service.Ifasubscriber (normally anorganization)
needstoprovidefreeconnections forothersubscribers (normally customers), itcan
requestthe800service.Inthiscase,thecallisfreeforthecaller,butitispaidbythe
callee.Anorganization usesthisservicetoencourage customers tocall.Therateisless
expensive thanthatforanormallong-distance call.
Thewide-area telephone service(WATS) istheopposite ofthe800service.The
latterareinboundcallspaidbytheorganization; theformerareoutbound callspaidby
theorganization. Thisserviceisalessexpensive alternative toregulartollcalls;
chargesarebasedonthenumberofcalls.Theservicecanbespecified asoutbound
callstothesamestate,toseveralstates,ortothewholecountry, withratescharged
accordingly.
The900services arelikethe800service,inthattheyareinbound callstoasub­
scriber.However, unlikethe800service,thecallispaidbythecallerandisnormally
muchmoreexpensive thananormallong-distance call.Thereasonisthatthecarrier
chargestwofees:thefirstisthelong-distance toll,andthesecondisthefeepaidtothe
calleeforeachcall.
AnalogLeasedService Ananalogleasedserviceofferscustomers theopportunity
toleasealine,sometimes calledadedicated line,thatispermanently connected to
anothercustomer. Although theconnection stillpassesthroughtheswitches inthetele­
phonenetwork, subscribers experience itasasinglelinebecausetheswitchisalways
closed;nodialingisneeded.
DigitalServices
Recently telephone companies beganofferingdigitalservicestotheirsubscribers. Digital
servicesarelesssensitive thananalogservicestonoiseandotherformsofinterference.248CHAPTER 9USINGTELEPHONE ANDCABLENETWORKS FORDATATRANSMISSION
Thetwomostcommon digitalservicesareswitched/56 serviceanddigitaldataservice
(DDS).Wealreadydiscussed high-speed digitalservices-the Tlines-in Chapter6.We
discusstheotherservicesinthischapter.
Switched/56 Service Switched/56 serviceisthedigitalversionofananalogswitched
line.Itisaswitched digitalservicethatallowsdataratesofupto56kbps.Tocommuni­
catethroughthisservice,bothpartiesmustsubscribe. Acallerwithnormaltelephone
servicecannotconnecttoatelephone orcomputer withswitched/56 serviceevenifthe
callerisusingamodem.Onthewhole,digitalandanalogservicesrepresent twocom­
pletelydifferent domains forthetelephone companies. Becausethelineinaswitched!
56serviceisalreadydigital,subscribers donotneedmodems totransmitdigitaldata.
However, theydoneedanotherdevicecalledadigitalserviceunit(DSU).
DigitalDataService Digitaldataservice(DDS)isthedigitalversionofananalog
leasedline;itisadigitalleasedlinewithamaximum datarateof64kbps.
9.2DIAL~UP MODEMS
Traditional telephone linescancarryfrequencies between 300and3300Hz,giving
themabandwidth of3000Hz.Allthisrangeisusedfortransmitting voice,wherea
greatdealofinterference anddistortion canbeaccepted withoutlossofintelligibility.
Aswehaveseen,however, datasignalsrequireahigherdegreeofaccuracy toensure
integrity. Forsafety'ssake,therefore, theedgesofthisrangearenotusedfordatacom­
munications. Ingeneral,wecansaythatthesignalbandwidth mustbesmallerthanthe
cablebandwidth. Theeffective bandwidth ofatelephone linebeingusedfordatatrans­
missionis2400Hz,covering therangefrom600to3000Hz.Notethattodaysome
telephone linesarecapableofhandling greaterbandwidth thantraditional lines.How­
ever,modemdesignisstillbasedontraditional capability (seeFigure9.6).
Figure9.6Telephone linebandwidth
Usedforvoice
3006002400Hzfordata3300
I I I
I I" I
I3000HzforvoiceI
I. ..I
I I
Thetermmodemisacomposite wordthatreferstothetwofunctional entitiesthat
makeupthedevice:asignalmodulator andasignaldemodulator. Amodulator creates
abandpass analogsignalfrombinarydata.Ademodulator recovers thebinarydata
fromthemodulated signal.
Modemstandsformodulator/demodulator.SECTION 9.2DIAL-UP MODEMS 249
Figure9.7showstherelationship ofmodems toacommunications linleThecomputer
ontheleftsendsadigitalsignaltothemodulator portionofthemodem; thedataaresentas
ananalogsignalonthetelephone lines.Themodemontherightreceivestheanalogsignal,
demodulates itthroughitsdemodulator, anddeliversdatatothecomputer ontheright.The
communication canbebidirectional, whichmeansthecomputer ontherightcansimulta­
neouslysenddatatothecomputer ontheleft,usingthesamemodulation/demodulation
processes.
Figure9.7Modulation/demodulation
TELCO: Telephone company
A
ModemStandardsc=JnB
r<
.........
Today,manyofthemostpopularmodems available arebasedontheV-series standards
published bytheITU-T.Wediscussjustthemostrecentseries.
V.32andV.32bis
TheV.32modemusesacombined modulation andencoding technique calledtrellis­
codedmodulation. Trellisisessentially QAMplusaredundant bit.Thedatastreamis
dividedinto4-bitsections. Insteadofaquadbit(4-bitpattern), however, apentabit (5-bit
pattern) istransmitted. Thevalueoftheextrabitiscalculated fromthevaluesofthe
databits.Theextrabitisusedforerrordetection.
TheY.32callsfor32-QAM withabaudrateof2400.Because only4bitsofeach
pentabit represent data,theresulting datarateis4 x2400=9600bps.Theconstellation
diagram andbandwidth areshowninFigure9.8.
TheV.32bis modemwasthefirstoftheITU-Tstandards tosupport 14,400-bps
transmission. TheY.32bisuses128-QAM transmission (7bits/baud withIbitforerror
control) atarateof2400baud(2400x 6=14,400bps).
Anadditional enhancement provided byY.32bisistheinclusion ofanautomatic
fall-back andfall-forward featurethatenablesthemodemtoadjustitsspeedupwardor
downward depending onthequalityofthelineorsignal.Theconstellation diagram and
bandwidth arealsoshowninFigure9.8.
V.34bis
TheV.34bismodemprovides abitrateof28,800witha960-point constellation anda
bitrateof33,600bpswitha1664-point constellation.250CHAPTER 9USINGTELEPHONE ANDCABLENETWORKS FORDATATRANSMISSION
Figure9.8TheV.32andV.32bisconstellation andbandwidth
90Full-duplex 2400-baud01'• •9600-bps 2-wire
• • • •• • • •
180•·i·•0600 1800 3000• • • •••1••• •• I•270
a.Constellation andbandwidth forV.32
90
•l•• • • ••• ••• • • • ••••••••• • • • • •••••••••••• • • • • • • •••••••••••180• •••••••0••••••••••• ••••••••••••••• ••••••••••••••••••••• •270Full-duplex. 2400-baud
14,400-bps 4-wire
600 1800 3000
1--:90b.Constellation andbandwidth forV.32bis
Traditional modems haveadataratelimitation of33.6kbps,asdetermined bythe
Shannon capacity(seeChapter3).However, V.90modems withabitrateof56,000bps
areavailable; thesearecalled56Kmodems. Thesemodems maybeusedonlyifone
partyisusingdigitalsignaling (suchasthroughanInternetprovider). Theyareasym­
metricinthatthedownloading rate(flowofdatafromtheInternetserviceprovider to
thePC)isamaximum of56kbps,whiletheuploading rate(flowofdatafromthePCto
theInternetprovider) canbeamaximum of33.6kbps.Dothesemodems violatethe
Shannon capacity principle? No,inthedownstream direction, theSNRratioishigher
becausethereisnoquantization error(seeFigure9.9).
Inuploading, theanalogsignalmuststillbesampled attheswitching station.In
thisdirection, quantization noise(aswesawinChapter4)isintroduced intothesignal,
whichreducestheSNRratioandlimitstherateto33.6kbps.
However, thereisnosampling inthedownloading. Thesignalisnotaffectedby
quantization noiseandnotsubjecttotheShannoncapacitylimitation. Themaximum data
rateintheuploading direction isstill33.6kbps,butthedatarateinthedownloading
direction isnow56kbps.
Onemaywonderhowwearriveatthe56-kbpsfigure.Thetelephone companies
sample8000timespersecondwith8bitspersample.Oneofthebitsineachsampleis
usedforcontrolpurposes, whichmeanseachsampleis7bits.Therateistherefore
8000x7,or56,000bpsor56kbps.SECTION 9.3DIGITAL SUBSCRIBER LINE 251
Figure9.9Uploading anddownloading in56Kmodems
-=tP-~~Quantization noiselimits
thedatarate1--------1
1PCM I
1--.- I1 I
Uploading,
quantization noiseISP
server
1--------1
1Inverse I
1PCM I1 I-=tP-
~ -=tP-~
"'--~~ ~
ISP
server
Downloading,
noquantization noise
1':92
Thestandard aboveV90iscalled ~92.Thesemodems canadjusttheirspeed,andif
thenoiseallows,theycanuploaddataattherateof48kbps.Thedownloading rateis
still56kbps.Themodemhasadditional features. Forexample, themodemcaninter­
rupttheInternetconnection whenthereisanincoming callifthelinehascall-waiting
service.
9.3DIGITAL SUBSCRIBER LINE
Aftertraditional modemsreachedtheirpeakdatarate,telephone companies developed
anothertechnology, DSL,toprovidehigher-speed accesstotheInternet.Digitalsub­
scriberline(DSL)technology isoneofthemostpromising forsupporting high-speed
digitalcommunication overtheexistinglocalloops.DSLtechnology isasetoftech­
nologies, eachdiffering inthefirstletter(ADSL,VDSL,HDSL,andSDSL).Thesetis
oftenreferredtoasxDSL,wherexcanbereplacedbyA,V,H,orS.252 CHAPTER 9USINGTELEPHONE ANDCABLENETWORKS FORDATATRANSMISSION
ADSL
Thefirsttechnology inthesetisasymmetric DSL(ADSL). ADSL,likea56Kmodem,
provides higherspeed(bitrate)inthedownstream direction (fromtheInternettothe
resident) thanintheupstream direction (fromtheresidenttotheInternet). Thatisthe
reasonitiscalledasymmetric. Unlike theasymmetry in56Kmodems, thedesigners of
ADSLspecifically dividedtheavailable bandwidth ofthelocalloopunevenly forthe
residential customer. Theserviceisnotsuitableforbusiness customers whoneeda
largebandwidth inbothdirections.
ADSLisanasymmetric communication technology designed forresidential users;
itisnotsuitableforbusinesses.
UsingExisting LocalLoops
Oneinteresting pointisthatADSLusestheexistinglocalloops.ButhowdoesADSL
reachadataratethatwasneverachieved withtraditional modems? Theansweristhatthe
twisted-pair localloopisactuallycapableofhandling bandwidths upto1.1MHz,butthe
filterinstalled attheendofficeofthetelephone company whereeachlocallooptermi­
nateslimitsthebandwidth to4kHz(sufficient forvoicecommunication). Ifthefilteris
removed, however, theentire1.1MHzisavailable fordataandvoicecommunications.
Theexistinglocalloopscanhandlebandwidths upto1.1MHz.
Adaptive Technology
Unfortunately, 1.1MHzisjustthetheoretical bandwidth ofthelocalloop.Factorssuch
asthedistancebetween theresidence andtheswitching office,thesizeofthecable,the
signaling used,andsoonaffectthebandwidth. Thedesigners ofADSLtechnology
wereawareofthisproblemandusedanadaptivetechnology thatteststhecondition and
bandwidth availability ofthelinebeforesettlingonadatarate.ThedatarateofADSL
isnotfixed;itchangesbasedonthecondition andtypeofthelocalloopcable.
ADSLisanadaptive technology. Thesystemusesadatarate
basedonthecondition ofthelocalloopline.
DiscreteMultitone Technique
Themodulation technique thathasbecomestandard forADSLiscalledthediscrete
multitone technique (DMT)whichcombines QAMandFDM.Thereisnosetway
thatthebandwidth ofasystemisdivided.Eachsystemcandecideonitsbandwidth
division. Typically, anavailable bandwidth of1.104MHzisdividedinto256channels.
Eachchannelusesabandwidth of4.312kHz,asshowninFigure9.10.Figure9.11shows
howthebandwidth canbedividedintothefollowing:
oVoice.Channel0isreserved forvoicecommunication.
oIdle.Channels 1to5arenotusedandprovideagapbetween voiceanddata
communication.SECTION 9.3DIGITAL SUBSCRIBER LINE 253
Figure9.10Discrete multitone technique
Upstream
bits
Downstream
bits
Figure9.11Bandwidth divisioninADSL
Voice Upstream Downstream
""'\ / I''" ,;d
Not"-
used
o426 108 138 1104 kHz
oUpstream dataandcontrol. Channels 6to30(25channels) areusedforupstream
datatransferandcontrol.Onechannelisforcontrol,and24channels arefordata
transfer.Ifthereare24channels, eachusing4kHz(outof4.312kHzavailable)
withQAMmodulation, wehave24x4000x15,ora1.44-Mbps bandwidth, in
theupstream direction. However, thedatarateisnormally below500kbpsbecause
someofthecarriersaredeletedatfrequencies wherethenoiselevelislarge.Inother
words,someofchannels maybeunused.
oDownstream dataandcontrol. Channels 31to255(225channels) areusedfor
downstream datatransferandcontrol.Onechannelisforcontrol,and224channels
arefordata.Ifthereare224channels, wecanachieveupto224x4000x15,or
13.4Mbps.However, thedatarateisnormally below8Mbpsbecausesomeofthe
carriersaredeletedatfrequencies wherethenoiselevelislarge.Inotherwords,
someofchannels maybeunused.
Customer Site:ADSLModem
Figure9.12showsanADSLmodeminstalled atacustomer's site.Thelocalloop
connects toasplitterwhichseparates voiceanddatacommunications. TheADSL254CHAPTER 9USINGTELEPHONE ANDCABLENETWORKS FORDATATRANSMISSION
modemmodulates anddemodulates thedata,usingDMT,andcreatesdownstream
andupstream channels.
Figure9.12ADSLmodem
Splitter
LocalloopVoice
Data
ADSLmodem
Notethatthesplitterneedstobeinstalled atthecustomer's premises, normally bya
technician fromthetelephone company. Thevoicelinecanusetheexistingtelephone
wiringinthehouse,butthedatalineneedstobeinstalled byaprofessional. Allthis
makestheADSLlineexpensive. Wewillseethatthereisanalternative technology,
Universal ADSL(orADSLLite).
Telephone Company Site:DSLAM
Atthetelephone company site,thesituation isdifferent. InsteadofanADSLmodem,a
devicecalledadigitalsubscriber lineaccessmultiplexer (DSLAM) isinstalled that
functions similarly. Inaddition, itpacketizes thedatatobesenttotheInternet(ISP
server).Figure9.13showstheconfiguration.
Figure9.13DSLAM
Splitter
Totelephone ~ V_o_ic_e__-+--i
networkLow-pass
filter
Localloop
High-pass
filterPacketized
Tothe~__~d~at~a_---i~d~Internet UIIM---I--""
",_,",!"",,_..u.
ADSLLite
Theinstallation ofsplittersattheborderofthepremises andthenewwiringforthedata
linecanbeexpensive andimpractical enoughtodissuade mostsubscribers. Anewver­
sionofADSLtechnology calledADSLLite(orUniversal ADSLorsplitterless ADSL)is
available forthesesubscribers. Thistechnology allowsanASDLLitemodemtobe
pluggeddirectlyintoatelephone jackandconnected tothecomputer. Thesplittingis
doneatthetelephone company. ADSLLiteuses256DMTcarrierswith8-bitmodulationSECTION 9.3DIGITAL SUBSCRIBER LINE 255
(insteadof15-bit).However, someofthecarriersmaynotbeavailable becauseerrors
createdbythevoicesignalmightminglewiththem.Itcanprovideamaximum down­
streamdatarateof1.5Mbpsandanupstream datarateof512kbps.
HDSL
Thehigh-bit-rate digitalsubscriber line(HDSL) wasdesigned asanalternative to
theT-lline(1.544Mbps).TheT-1lineusesalternate markinversion (AMI)encoding,
whichisverysusceptible toattenuation athighfrequencies. Thislimitsthelengthof
aT-llineto3200ft(1km).Forlongerdistances, arepeaterisnecessary, whichmeans
increased costs.
HDSLuses2B1Qencoding (seeChapter4),whichislesssusceptible toattenuation.
Adatarateof1.544Mbps(sometimes upto2Mbps)canbeachieved withoutrepeaters
uptoadistanceof12,000ft(3.86km).HDSLusestwotwistedpairs(onepairforeach
direction) toachievefull-duplex transmission.
SDSL
Thesymmetric digitalsubscriber line(SDSL)isaonetwisted-pair versionofHDSL.
Itprovides full-duplex symmetric communication supporting upto768kbpsineach
direction. SDSL,whichprovides symmetric communication, canbeconsidered an
alternative toADSL.ADSLprovides asymmetric communication, withadownstream
bitratethatismuchhigherthantheupstream bitrate.Although thisfeaturemeetsthe
needsofmostresidential subscribers, itisnotsuitableforbusinesses thatsendand
receivedatainlargevolumesinbothdirections.
VDSL
Theveryhigh-bit-rate digitalsubscriber line(VDSL), analternative approach thatis
similartoADSL,usescoaxial,fiber-optic, ortwisted-pair cableforshortdistances. The
modulating technique isDMT.Itprovides arangeofbitrates(25to55Mbps)for
upstream communication atdistances of3000to10,000ft.Thedownstream rateisnor­
mally3.2Mbps.
Summary
Table9.1showsasummary ofDSLtechnologies. Notethatthedatarateanddistances
areapproximations andcanvaryfromoneimplementation toanother.
Table9.1Summary ofDSLtechnologies
Downstream Upstream Distance Twisted Line
Technology Rate Rate (jt) Pairs Code
ADSL 1.5-6.1Mbps 16-640kbps 12,000 1 DMT
ADSLLite1.5Mbps 500kbps 18,000 1 DMT
HDSL 1.5-2.0Mbps 1.5-2.0Mbps 12,000 2 2B1Q
SDSL 768kbps 768kbps 12,000 1 2B1Q
VDSL 25-55Mbps 3.2Mbps 3000-10,000 1 DMT256CHAPTER 9USINGTELEPHONE ANDCABLENETWORKS FORDATATRANSMISSION
9.4CABLETVNETWORKS
ThecableTVnetwork startedasavideoserviceprovider, butithasmovedtothebusiness
ofInternetaccess.Inthissection,wediscusscableTVnetworks perse;inSection9.5we
discusshowthisnetworkcanbeusedtoprovidehigh-speed accesstotheInternet.
Traditional CableNetworks
CableTVstartedtodistribute broadcast videosignalstolocations withpoororno
reception inthelate1940s.Itwascalledcommunity antennaTV(CATV) becausean
antennaatthetopofatallhillorbuildingreceivedthesignalsfromtheTVstationsand
distributed them,viacoaxialcables,tothecommunity. Figure9.14showsaschematic
diagramofatraditional cableTVnetwork.
Figure9.14Traditional cableTVnetwork
Splitter
Tap
ThecableTVoffice,calledtheheadend,receivesvideosignalsfrombroadcasting
stationsandfeedsthesignals into coaxialcables.Thesignalsbecameweakerand
weakerwithdistance, soamplifiers wereinstalled throughthenetwork torenewthe
signals.Therecouldbeupto35amplifiers between theheadendandthesubscriber
premises. Attheotherend,splitterssplitthecable,andtapsanddropcablesmakethe
connections tothesubscriber premises.
Thetraditional cableTVsystemusedcoaxialcableendtoend.Duetoattenuation of
thesignalsandtheuseofalargenumberofamplifiers, communication inthetraditional
networkwasunidirectional (one-way). Videosignalsweretransmitted downstream, from
theheadendtothesubscriber premises.
Communication inthetraditional cableTVnetwork isunidirectional.
HybridFiber-Coaxial (HFC)Network
Thesecondgeneration ofcablenetworks iscalledahybridfiber-coaxial (HFC)net­
work.Thenetworkusesacombination offiber-optic andcoaxialcable.ThetransmissionSECTION 9.5CABLETVFORDATATRANSFER 257
mediumfromthecableTVofficetoabox,calledthefibernode,isopticalfiber;fromthe
fibernodethroughtheneighborhood andintothehouseisstillcoaxialcable.Figure9.15
showsaschematic diagramofanHFCnetwork.
Figure9.15Hybridfiber-coaxial (HFC)network
RCHHigh-bandwidth
fiber
Theregional cablehead(RCH)normally servesupto400,000subscribers. The
RCHsfeedthedistribution hubs,eachofwhichservesupto40,000subscribers. The
distribution hubplaysanimportant roleinthenewinfrastructure. Modulation anddis­
tribution ofsignalsaredonehere;thesignalsarethenfedtothefibernodesthrough
fiber-optic cables.Thefibernodesplitstheanalogsignalssothatthesamesignalissent
toeachcoaxialcable.Eachcoaxialcableservesupto1000subscribers. Theuseof
fiber-optic cablereducestheneedforamplifiers downtoeightorless.
Onereasonformovingfromtraditional tohybridinfrastructure istomakethecable
networkbidirectional (two-way).
Communication inanHFCcableTVnetworkcanbebidirectional.
9.5CABLETVFORDATATRANSFER
Cablecompanies arenowcompeting withtelephone companies fortheresidential
customer whowantshigh-speed datatransfer.DSLtechnology provides high-data-rate
connections forresidential subscribers overthelocalloop.However, DSLusesthe
existingunshielded twisted-pair cable,whichisverysusceptible tointerference. This
imposesanupperlimitonthedatarate.AnothersolutionistheuseofthecableTVnet­
work.Inthissection,webrieflydiscussthistechnology.
Bandwidth
EveninanHFCsystem,thelastpartofthenetwork, fromthefibernodetothesub­
scriberpremises, isstillacoaxialcable.Thiscoaxialcablehasabandwidth thatranges258CHAPTER 9USINGTELEPHONE ANDCABLENETWORKS FORDATATRANSMISSION
from5to750MHz(approximately). ToprovideInternetaccess,thecablecompany has
dividedthisbandwidth intothreebands:video,downstream data,andupstream data,as
showninFigure9.16.
Figure9.16DivisionofcoaxialcablebandbyCATV
Frequency, MHz 5.~::2i
Data:~
l1PStf~~~
4254Video
bapd
550Data
downstream
750
Downstream VideoBand
Thedownstream videobandoccupies frequencies from54to550MHz.Sinceeach
TVchanneloccupies 6MHz,thiscanaccommodate morethan80channels.
Downstream DataBand
Thedownstream data(fromtheInternettothesubscriber premises) occupies theupper
band,from550to750MHz.Thisbandisalsodividedinto6-MHzchannels.
Modulation Downstream databandusesthe64-QAM (orpossibly 256-QAM)
modulation technique.
Downstream dataaremodulated usingthe64-QAM modulation technique.
DataRateThereis6bits/baudin64-QAM. Onebitisusedforforwarderrorcorrection;
thisleaves5bitsofdataperbaud.ThestandardspecifiesIHzforeachbaud;thismeansthat,
theoretically, downstream datacanbereceivedat30Mbps(5bitslHzx6MHz).Thestan­
dardspecifiesonly27Mbps.However, sincethecablemodemisnormally connected tothe
computer throughalOBase-T cable(seeChapter13),thislimitsthedatarateto10Mbps.
Thetheoretical downstream datarateis30Mbps.
Upstream DataBand
Theupstream data(fromthesubscriber premises totheInternet) occupies thelower
band,from5to42MHz.Thisbandisalsodividedinto6-MHzchannels.
Modulation Theupstream databanduseslowerfrequencies thataremoresuscepti­
bletonoiseandinterference. Forthisreason,theQAMtechnique isnotsuitableforthis
band.AbettersolutionisQPSK.
Upstream dataaremodulated usingtheQPSKmodulation technique.SECTION 9.5CABLETVFORDATATRANSFER 259
DataRateThereare2bitslbaud inQPSK.Thestandard specifies 1Hzforeachbaud;
thismeansthat,theoretically, upstream datacanbesentat12Mbps(2bitslHzx 6MHz).
However, thedatarateisusuallylessthan12Mbps.
Thetheoretical upstream datarateis12Mbps.
Sharing
Bothupstream anddownstream bandsaresharedbythesubscribers.
Upstream Sharing
Theupstream databandwidth is37MHz.Thismeansthatthereareonlysix6-MHz
channels available intheupstream direction. Asubscriber needstouseonechannelto
senddataintheupstream direction. Thequestion is,"Howcansixchannels besharedin
anareawith1000,2000, oreven100,000subscribers?" Thesolutionistimesharing. The
bandisdividedintochannels usingFDM;thesechannels mustbesharedbetween sub­
scribersinthesameneighborhood. Thecableprovider allocates onechannel, statically
ordynamically, foragroupofsubscribers. Ifonesubscriber wantstosenddata,sheor
hecontends forthechannelwithotherswhowantaccess;thesubscriber mustwaituntil
thechannelisavailable.
Downstream Sharing
Wehaveasimilarsituation inthedownstream direction. Thedownstream bandhas
33channelsof6MHz.Acableproviderprobably hasmorethan33subscribers; therefore,
eachchannelmustbesharedbetweenagroupofsubscribers. However, thesituation isdif­
ferentforthedownstream direction; herewehaveamulticasting situation.Iftherearedata
foranyofthesubscribers inthegroup,thedataaresenttothatchannel.Eachsubscriber is
sentthedata.Butsinceeachsubscriber alsohasanaddressregistered withtheprovider; the
cablemodemforthegroupmatchestheaddresscarriedwiththedatatotheaddressassigned
bytheprovider. Iftheaddressmatches, thedataarekept;otherwise, theyarediscarded.
CMandCMTS
Touseacablenetworkfordatatransmission, weneedtwokeydevices:acablemodem
(CM)andacablemodemtransmission system(CMTS).
CM
Thecablemodem(CM)isinstalled onthesubscriber premises. ItissimilartoanADSL
modem.Figure9.17showsitslocation.
CMTS
Thecablemodemtransmission system(CMTS) isinstalled insidethedistribution
hubbythecablecompany.Itreceives datafromtheInternetandpassesthemtothe
combiner, whichsendsthemtothesubscriber. TheCMTSalsoreceives datafromthe
subscriber andpassesthemtotheInternet. Figure9.18showsthelocationoftheCMTS.260CHAPTER 9USINGTELEPHONE ANDCABLENETWORKS FORDATATRANSMISSION
Figure9.17Cablemodem(CM)
Cable
Customer residencer------------------------I
I I
I V~OO I
Thp"~~ I
I
1
1
1
r- 1
Data 1=- 1
1
1 Cablemodem 1
1 ..J
Figure9.18Cablemodemtransmission system(CMTS)
Fromheadend
Toandfrom
theInternetDistribution hub-------------------I
IVideoI I Fiber
IICombinerI ~,",,"-,,<.-::-. -'-_~
I I
I I
I I
I I
:Data '-c', :
I I
I CMTS IL ~
DataTransmission Schemes: DOeSIS
Duringthelastfewdecades,severalschemeshavebeendesigned tocreatea standard for
datatransmission overanHFCnetwork. Prevalent istheonedevisedbyMultimedia
CableNetwork Systems(MCNS), calledDataOverCableSystemInterface Specifi­
cation(DOCSIS). DOCSIS definesalltheprotocols necessary totransport datafroma
CMTStoaCM.
Upstream Communication
Thefollowing isaverysimplified versionoftheprotocol definedbyDOCSIS for
upstream communication. Itdescribes thestepsthatmustbefollowed byaCM:
1.TheCMchecksthedownstream channels foraspecificpacketperiodically sentby
theCMTS.ThepacketasksanynewCMtoannounce itselfonaspecificupstream
channel.
2.TheCMTSsendsapackettotheCM,defining itsallocated downstream and
upstream channels.
3.TheCMthenstartsaprocess, calledranging, whichdetermines thedistance
betweentheCMandCMTS.Thisprocessisrequiredforsynchronization betweenallSECTION 9.7KEYTERMS 261
CMsandCMTSsfortheminislots usedfortimesharing oftheupstream channels.
Wewilllearnaboutthistimesharing whenwediscusscontention protocols in
Chapter12.
4.TheCMsendsapackettotheISP,askingfortheInternetaddress.
5.TheCMandCMTSthenexchange somepacketstoestablish securityparameters,
whichareneededforapublicnetworksuchascableTV.
6.TheCMsendsitsuniqueidentifier totheCMTS.
7.Upstream communication canstartintheallocated upstream channel;theCMcan
contendfortheminislots tosenddata.
Downstream Communication
Inthedownstream direction, thecommunication ismuchsimpler.Thereisnoconten­
tionbecausethereisonlyonesender.TheCMTSsendsthepacketwiththeaddressof
thereceiving eM,usingtheallocated downstream channel.
9.6RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
books.Theitemsinbrackets[...]refertothereference listattheendofthetext.
Books
[CouOl] givesaninteresting discussion abouttelephone systems, DSLtechnology,
andCATVinChapter8.[Tan03]discusses telephone systemsandDSLtechnology in
Section2.5andCATVinSection2.7.[GW04]discusses telephone systemsinSec­
tion1.1.1andstandard modems inSection3.7.3.Acomplete coverage ofresidential
broadband (DSLandCATV)canbefoundin[Max99].
9.7KEYTERMS
56Kmodem
800service
900service
ADSLLite
ADSLmodem
analogleasedservice
analogswitched service
asymmetric DSL(ADSL)
cablemodem(CM)
cablemodemtransmission system
(CMTS)
cableTVnetwork
common carriercommunity antennaTV(CATV)
competitive localexchange carrier
(CLEC)
DataOverCable SystemInterface
Specification (DOCSIS)
demodulator
digitaldataservice(DDS)
digitalservice
digitalsubscriber line(DSL)
digitalsubscriber lineaccessmultiplexer
(DSLAM)
discretemultitone technique (DMT)
distribution hub262CHAPTER 9USINGTELEPHONE ANDCABLENETWORKS FORDATATRANSMISSION
downloading
downstream databand
endoffice
fibernode
headend
high-bit-rate DSL(HDSL)
hybridfiber-coaxial (HFC)network
in-bandsignaling
incumbent localexchange carrier
(ILEC)
interexchange carrier(IXC)
ISDNuserport(ISUP)
localaccesstransport area(LATA)
localexchange carrier(LEC)
localloop
longdistancecompany
message transport port(MTP)level
modem
modulator
out-of-band signaling
plainoldtelephone system(POTS)
pointofpresence (POP)
ranging
regionalcablehead(RCH)
regionalofficeservercontrolpoint(SCP)
signalpoint(SP)
signaltransport port(STP)
signaling connection controlpoint
(SCep)
Signaling SystemSeven(SS7)
switched/56 service
switching office
symmetric DSL(SDSL)
tandemoffice
telephone userport(TUP)
transaction capabilities application port
(TCAP)
trunk
uploading
upstream databand
Y.32
Y.32bis
Y.34bis
Y.90
Y.92
very-high-bit-rate DSL(VDSL)
videoband
V-series
wide-area telephone service(WATS)
9.8SUMMARY
oThetelephone, whichisreferred toastheplainoldtelephone system(POTS),
wasoriginally ananalogsystem.Duringthelastdecade,thetelephone network
hasundergone manytechnical changes. Thenetwork isnowdigitalaswellas
analog.
oThetelephone network ismadeofthreemajorcomponents: localloops,trunks,
andswitching offices.Ithasseverallevelsofswitching officessuchasendoffices,
tandemoffices,andregionaloffices.
oTheUnitedStatesisdividedintomanylocalaccesstransport areas(LATAs). The
services offeredinsideaLATAarecalledintra-LATA services. Thecarrierthat
handlestheseservices iscalledalocalexchange carrier(LEC).Theservices
between LATAsarehandledbyinterexchange carriers(lXCs).
oInin-bandsignaling, thesamecircuitisusedforbothsignaling anddata.Inout-of­
bandsignaling, aportionofthebandwidth isusedforsignaling andanotherportionSECTION 9.9PRACTICE SET 263
fordata.Theprotocol thatisusedforsignaling inthetelephone networkiscalled
Signaling SystemSeven(SS7).
oTelephone companies providetwotypesofservices: analoganddigital.Wecan
categorize analogservicesaseitheranalogswitched servicesoranalogleasedser­
vices.Thetwomostcommon digitalservicesareswitched/56 serviceanddigital
dataservice(DDS).
oDatatransferusingthetelephone localloopwastraditionally doneusingadial-up
modem.Thetermmodemisacomposite wordthatreferstothetwofunctional
entitiesthatmakeupthedevice:asignalmodulator andasignaldemodulator.
oMostpopularmodemsavailable arebasedontheV-seriesstandards. TheV.32modem
hasadatarateof9600bps.TheV32bismodemsupports 14,400-bps transmission.
V90modems, called56Kmodems, withadownloading rateof56kbpsandupload­
ingrateof33.6kbpsareverycommon. ThestandardaboveV90iscalledV92.These
modemscanadjusttheirspeed,andifthenoiseallows,theycanuploaddataattherate
of48kbps.
oTelephone companies developed anothertechnology, digitalsubscriber line(DSL),to
providehigher-speed accesstotheInternet.DSLtechnology isasetoftechnologies,
eachdiffering inthefirstletter(ADSL,VDSL,HDSL,andSDSL.ADSLprovides
higherspeedinthedownstream direction thanintheupstream direction. Thehigh-bit­
ratedigitalsubscriber line(HDSL) wasdesigned asanalternative totheT-lline
(1.544Mbps).Thesymmetric digitalsubscriber line(SDSL)isaonetwisted-pair ver­
sionofHDSL.Theveryhigh-bit-rate digitalsubscriber line(VDSL)isanalternative
approach thatissimilartoADSL.
oCommunity antennaTV(CATV)wasoriginally designed toprovidevideoservices
forthecommunity. Thetraditional cableTVsystemusedcoaxialcableendto end.
Thesecondgeneration ofcablenetworks iscalledahybridfiber-coaxial (HFC)
network. Thenetworkusesacombination offiber-optic andcoaxialcable.
oCablecompanies arenowcompeting withtelephone companies fortheresidential
customer whowantshigh-speed accesstotheInternet. Touseacablenetworkfor
datatransmission, weneedtwokeydevices:acablemodem(CM)andacablemodem
transmission system(CMTS).
9.9PRACTICE SET
ReviewQuestions
1.Whatarethethreemajorcomponents ofatelephone network?
2.Givesomehierarchical switching levelsofatelephone network.
3.WhatisLATA?Whatareintra-LATA andinter-LATA services?
4.Describe theSS7serviceanditsrelationtothetelephone network.
S.Whatarethetwomajorservicesprovided bytelephone companies intheUnited
States?
6.Whatisdial-upmodemtechnology? Listsomeofthecommon modemstandards
discussed inthischapterandgivetheirdatarates.264CHAPTER 9USINGTELEPHONE ANDCABLENETWORKS FORDATATRANSMISSION
7.WhatisDSLtechnology? Whataretheservicesprovided bythetelephone companies
usingDSL?Distinguish betweenaDSLmodemandaDSLAM.
8.Compare andcontrastatraditional cablenetworkwithahybridfiber-coaxial network.
9.Howisdatatransferachieved usingCATVchannels?
10.Distinguish between CMandCMTS.
Exercises
11.Usingthediscussion ofcircuit-switching inChapter 8,explainwhythistypeof
switching was chosenfortelephone networks.
12.InChapter8,wediscussed thethreecommunication phasesinvolved inacircuit­
switched network. Matchthesephaseswiththephasesinatelephone callbetween
twoparties.
13.InChapter8,welearnedthatacircuit-switched networkneedsend-to-end addressing
duringthesetupandteardown phases.Defineend-to-end addressing inatelephone
networkwhentwopartiescommunicate.
14.Whenwehaveanoverseas telephone conversation, wesometimes experience a
delay.Canyouexplainthereason?
15.Drawabarcharttocomparethedifferentdownloading dataratesofcommon modems.
16.Drawabarchart tocompare thedifferent downloading dataratesofcommon DSL
technology implementations (useminimum datarates).
17.Calculate theminimum timerequiredtodownload onemillionbytesofinformation
usingeachofthefollowing technologies:
a.V32modem
b.V32bismodem
c.V90modem
18.RepeatExercise 17usingdifferent DSLimplementations (consider theminimum
rates).
19.RepeatExercise 17usingacablemodem(consider theminimum rates).
20.Whattypeoftopology isusedwhencustomers inanareauseDSLmodems for
datatransferpurposes? Explain.
21.Whattypeoftopology isusedwhencustomers inanareausecable modems for
datatransferpurposes? Explain.DataLinkLayer
Objectives
Thedatalinklayertransforms thephysical layer,arawtransmission facility,toalink
responsible fornode-to-node (hop-to-hop) communication. Specificresponsibilities of
thedatalinklayerincludeframing, addressing, flowcontrol,errorcontrol,andmedia
accesscontrol.Thedatalinklayerdividesthestreamofbitsreceivedfromthenetwork
layerintomanageable dataunitscalledframes.Thedatalinklayeraddsaheadertothe
frametodefinetheaddresses ofthesenderandreceiveroftheframe.Iftherateat
whichthedataareabsorbed bythereceiverislessthantherateatwhichdataarepro­
ducedinthesender,thedatalinklayerimposes aflowcontrolmechanism toavoid
overwhelming thereceiver.Thedatalinklayeralsoaddsreliability tothephysicallayer
byaddingmechanisms todetectandretransmit damaged, duplicate, orlostframes.
Whentwoormoredevicesareconnected tothesamelink,datalinklayerprotocols are
necessary todetermine whichdevicehascontroloverthelinkatanygiventime.
InPart3ofthebook,wefirstdiscussservicesprovided bythedatalinklayer.We
thendiscusstheimplementation oftheseservicesinlocalareanetworks (LANs).Finally
wediscusshowwideareanetworks (WANs)usetheseservices.
Part3ofthebookisdevotedtothedatalinklayerand
theservicesprovided bythislayer.
Chapters
Thispartconsistsofninechapters: Chapters 10to18.
Chapter 10
Chapter10discusses errordetection andcorrection. Although thequalityofdevicesand
mediahavebeenimproved duringthelastdecade,westillneedtocheckforerrorsand
correcttheminmostapplications.Chapter11
Chapter 11isnameddatalinkcontrol,whichinvolves flowanderrorcontrol.Itdis­
cusses some protocols thataredesigned tohandlethe services required fromthedata
linklayerinrelationtothenetworklayer.
Chapter12
Chapter12isdevotedtoaccesscontrol,thedutiesofthedatalinklayerthatarerelated
totheuseofthephysicallayer.
Chapter13
Thischapterintroduces wiredlocalareanetworks. AwiredLAN,viewedasalink,is
mostlyinvolved inthephysicalanddatalinklayers.Wehavedevotedthechaptertothe
discussion ofEthernet anditsevolution, adominant technology today.
Chapter14
Thischapterintroduces wirelesslocalareanetworks. ThewirelessLANisagrowing
technology intheInternet.Wedevoteonechaptertothistopic.
Chapter15
Afterdiscussing wiredandwirelessLANs,weshowhowtheycanbeconnected together
usingconnecting devices.
Chapter16
Thisisthefirstchapteronwideareanetworks (WANs). WestartwithwirelessWANs
andthenmoveontosatellitenetworks andmobiletelephone networks.
Chapter17
Todemonstrate theoperation ofahigh-speed wideareanetworkthatcanbeusedasa
backbone forotherWANsorfortheInternet,wehavechosentodevoteallofChapter17
toSONET,awideareanetworkthatusesfiber-optic technology.
Chapter18
Thischapterconcludes ourdiscussion onwideareanetworks. Twoswitched WANs,
FrameRelayandATM,arediscussed here.CHAPTER 10
ErrorDetection andCorrection
Networks mustbeabletotransferdatafromonedevicetoanotherwithacceptable accu­
racy.Formostapplications, asystemmustguarantee thatthedatareceivedareidenticalto
thedatatransmitted. Anytimedataaretransmitted fromonenodetothenext,theycan
becomecorrupted inpassage.Manyfactorscanalteroneormorebitsofamessage. Some
applications requireamechanism fordetecting andcorrecting errors.
Datacanbecorrupted duringtransmission.
Someapplications requirethaterrorsbedetectedandcorrected.
Someapplications cantolerateasmallleveloferror.Forexample, randomerrors
inaudioorvideotransmissions maybetolerable, butwhenwetransfertext,weexpect
averyhighlevelofaccuracy.
10.1INTRODUCTION
Letusfirstdiscusssomeissuesrelated,directlyorindirectly, toerrordetection and
correcion.
TypesofErrors
Whenever bitsflowfromonepointtoanother, theyaresubjecttounpredictable
changesbecauseofinterference. Thisinterference canchangetheshapeofthesignal.
Inasingle-bit error,a 0ischangedtoa 1ora 1toaO.Inabursterror,multiplebitsare
changed. Forexample, a11100sburstofimpulsenoiseonatransmission withadata
rateof1200bpsmightchangeallorsomeofthe12bitsofinformation.
Single-Bit Error
Thetermsingle-bit errormeansthatonly1bitofagivendataunit(suchasabyte,
character, orpacket)ischangedfrom1to0orfrom0to1.
267268CHAPTER 10ERRORDETECTION ANDCORRECTION
Inasingle-bit error,only1bitinthedataunithaschanged.
Figure10.1showstheeffectofasingle-bit erroronadataunit.Tounderstand the
impactofthechange,imaginethateachgroupof8bitsisanASCIIcharacter witha 0bit
addedtotheleft.InFigure10.1,00000010 (ASCIISTX)wassent,meaning startof
text,but00001010 (ASCIILF)wasreceived, meaning linefeed.(Formoreinformation
aboutASCIIcode,seeAppendix A.)
:Figure10.1Single-bit error
ochangedtoI
Sent Received
Single-bit errorsaretheleastlikelytypeoferrorinserialdatatransmission. Tounder­
standwhy,imaginedatasentat1Mbps.Thismeansthateachbitlastsonly1/1,000,000 s,
or1)ls.Forasingle-bit errortooccur,thenoisemusthaveadurationofonly1)ls,which
isveryrare;noisenormally lastsmuchlongerthanthis.
BurstError
Thetermbursterrormeansthat2ormorebitsinthedataunithavechanged from1to0
orfrom0to1.
Abursterrormeansthat2ormorebitsinthedataunithavechanged.
Figure10.2showstheeffectofabursterroronadataunit.Inthiscase,
0100010001000011 wassent,but0101110101100011 wasreceived. Notethataburst
errordoesnotnecessarily meanthattheerrorsoccurinconsecutive bits.Thelengthof
theburstismeasured fromthefirstcorrupted bittothelastcorrupted bit.Somebitsin
between maynothavebeencorrupted.
Figure10.2Bursterroroflength8
Lengthofburst
error(8bits)SECTION 10.1INTRODUCTION 269
Abursterrorismorelikelytooccurthanasingle-bit error.Theduration ofnoiseis
normally longerthantheduration of1bit,whichmeansthatwhennoiseaffectsdata,it
affectsasetofbits.Thenumberofbitsaffecteddepends onthedatarateandduration
ofnoise.Forexample, ifwearesendingdataatIkbps,anoiseof11100scanaffect
10bits;ifwearesendingdataatIMbps,thesamenoise can affect10,000bits.
Redundancy
Thecentralconceptindetecting orcorrecting errorsisredundancy. Tobeableto
detectorcorrecterrors,weneedtosendsomeextrabitswithourdata.Theseredundant
bitsareaddedbythesenderandremoved bythereceiver. Theirpresence allowsthe
receivertodetectorcorrectcorrupted bits.
Todetectorcorrecterrors,weneedtosendextra(redundant) bitswithdata.
Detection VersusCorrection
Thecorrection oferrorsismoredifficultthanthedetection. Inerrordetection, weare
lookingonlytoseeifanyerrorhasoccurred. Theanswerisasimpleyesorno.Weare
noteveninterested inthenumberoferrors.Asingle-bit erroristhesameforusasa
bursterror.
Inerrorcorrection, weneedtoknowtheexactnumberofbitsthatarecorrupted and
moreimportantly, theirlocationinthemessage. Thenumberoftheerrorsandthesizeof
themessage areimportant factors.Ifweneedtocorrectonesingleerrorinan8-bitdata
unit,weneedtoconsider eightpossible errorlocations; ifweneedtocorrecttwoerrors
inadataunitofthesamesize,weneedtoconsider 28possibilities. Youcanimaginethe
receiver's difficulty infinding10errorsinadataunitof1000bits.
Forward ErrorCorrection VersusRetransmission
Therearetwomainmethods oferrorcorrection. Forward errorcorrection isthepro­
cessinwhichthereceivertriestoguessthemessage byusingredundant bits.Thisis
possible, asweseelater,ifthenumberoferrorsissmall.Correction byretransmission
isatechnique inwhichthereceiverdetectstheoccurrence ofanerrorandasksthesender
toresendthemessage. Resending isrepeated untilamessage arrivesthatthereceiver
believesiserror-free (usually, notallerrorscanbedetected).
Coding
Redundancy isachieved throughvariouscodingschemes. Thesenderaddsredundant
bitsthroughaprocessthatcreatesarelationship between theredundant bitsandthe
actualdatabits.Thereceiver checkstherelationships between thetwosetsofbitsto
detectorcorrecttheerrors.Theratioofredundant bitstothedatabitsandtherobust­
nessoftheprocessareimportant factorsinanycodingscheme. Figure10.3showsthe
generalideaofcoding.
Wecandividecodingschemes intotwobroadcategories: blockcodingandconvo­
lutioncoding.Inthisbook,weconcentrate onblockcoding;convolution codingis
morecomplex andbeyondthescopeofthisbook.270CHAPTER 10ERRORDETECTION ANDCORRECTION
Figure10.3Thestructureofencoderanddecoder
Sender Receiver
Encoder Decoder
~e8sage IMessageI
tcorrector
discardlGeneratorI ICheckerI
~ t
[~es~~~~u~~y<;lHl-u.::..:n:.;;.re:.;;.li;,:;ab:.:le:..t::.:ra:.;;.ns:.::Iill.::..:·s;;;;'si;;;;on~~:~:~~~~~~f~~o,~=l
Inthisbook,weconcentrate onblockcodes;weleaveconvolution codestoadvanced texts.
Modular Arithmetic
Beforewefinishthissection,letusbrieflydiscussaconceptbasictocomputer science
ingeneralandtoerrordetection andcorrection inparticular: modular arithmetic. Our
intenthereisnottodelvedeeplyintothemathematics ofthistopic;wepresentjust
enoughinformation toprovideabackground tomaterials discussed inthischapter.
Inmodular arithmetic, weuseonlyalimitedrangeofintegers. Wedefineanupper
limit,calledamodulus N.Wethenuseonlytheintegers0toN-I,inclusive. Thisis
modulo-N arithmetic. Forexample, ifthemodulus is12,weuseonlytheintegers0to
11,inclusive. Anexample ofmoduloarithmetic isourclocksystem.Itisbasedon
modulo-12 arithmetic, substituting thenumber12forO.Inamodulo-N system,ifa
numberisgreaterthanN,itisdividedbyNandtheremainder istheresult.Ifitisneg­
ative,asmanyNsasneededareaddedtomakeitpositive. Consider ourclocksystem
again.Ifwestartajobat11A.M.andthejobtakes5h,wecansaythatthejobistobe
finishedat16:00ifweareinthemilitary,orwecansaythatitwillbefinishedat4P.M.
(theremainder of16/12is4).
Inmodulo-N arithmetic, weuseonlytheintegersintherange0toN-1,inclusive.
Addition andsubtraction inmoduloarithmetic aresimple.Thereisnocarrywhen
youaddtwodigitsinacolumn.Thereisnocarrywhenyousubtractonedigitfrom
anotherinacolumn.
Modulo-2 Arithmetic
Ofparticular interestismodulo-2 arithmetic. Inthisarithmetic, themodulusNis2.We
canuseonly0and1.Operations inthisarithmetic areverysimple.Thefollowing
showshowwecanaddorsubtract2bits.
Adding:
Subtracting:0+0=0
0-0=00+1=1
0-1=11+0=1
1-0=11+1=0
1-1=0SECTION 10.2BLOCK CODING 271
Noticeparticularly thatadditionandsubtraction givethesameresults.Inthisarith­
meticweusetheXOR(exclusive OR)operation forbothadditionandsubtraction. The
resultofanXORoperation is0iftwobitsarethesame;theresultisIiftwobitsare
different. Figure10.4showsthisoperation.
Figure10.4XORingoftwosinglebitsortwowords
a.Twobitsarethesame,theresultisO.
loeB1=1 leBO
b.Twobitsaredifferent, theresultis1.ooI I 0
eB I0°
° ° °
c.ResultofXORingtwopatterns
OtherModuloArithmetic
Wealsouse,modulo-N arithmetic throughthebook.Theprinciple isthesame;weuse
numbersbetween0andN-1.Ifthemodulusisnot2,additionandsubtraction aredistinct.
Ifwegetanegativeresult,weaddenoughmultiples ofNtomakeitpositive.
10.2BLOCK CODING
Inblockcoding,wedivideourmessageintoblocks,eachofkbits,calleddatawords.We
addrredundant bitstoeachblocktomakethelengthn=k+r.Theresulting n-bitblocks
arecalledcodewords.Howtheextrarbitsischosenorcalculated issomething wewill
discusslater.Forthemoment, itisimportant toknowthatwehaveasetofdatawords,
eachofsizek,andasetofcodewords, eachofsizeofn.Withkbits,wecancreateacom­
binationof2kdatawords; withnbits,wecancreateacombination of2ncodewords.
Sincen>k,thenumberofpossiblecodewords islargerthanthenumberofpossibledata­
words.Theblockcodingprocessisone-to-one; thesamedataword isalwaysencodedas
thesamecodeword. Thismeansthatwehave2n-2kcodewords thatarenotused.We
callthesecodewords invalidorillegal.Figure10.5showsthesituation.
Figure10.5Datawords andcodewords inblockcoding
IIHitsIIHitsI•eoIHitsII
2kDatawords, eachofkbits
IIIIbitsIIIIbits nbitsII
2nCodewords, eachofnbits(only2kofthemarevalid)272CHAPTER 10ERRORDETECTION ANDCORRECTION
Example 10.1
The4B/5Bblockcodingdiscussed inChapter4isagoodexample ofthistypeofcoding.Inthis
codingscheme,k=4andn=5.Aswesaw,wehave2k=16datawords and2n=32codewords.
Wesawthat16outof32codewords areusedformessage transferandtherestareeitherusedfor
otherpurposes orunused.
ErrorDetection
Howcanerrorsbedetected byusingblockcoding?Ifthefollowing twoconditions are
met,thereceivercandetectachangeintheoriginalcodeword.
1.Thereceiverhas(orcanfind)alistofvalidcodewords.
2.Theoriginalcodeword haschanged toaninvalidone.
Figure10.6showstheroleofblockcodinginerrordetection.
Figure10.6Processoferrordetection inblockcoding
Sender Receiver
Encoder Decoder
kbitsID,at:aword 1 IDat~~ord·1 kbits
I tExtract
IGeneratorI IChecker
Discard
+ i
nbitsICodewordUnreliable transmission r·CodewordInbitsI r
Thesendercreatescodewords outofdatawords byusingagenerator thatappliesthe
rulesandprocedures ofencoding (discussed later).Eachcodeword senttothereceivermay
changeduringtransmission. Ifthereceivedcodeword isthesameasoneofthevalidcode­
words,thewordisaccepted; thecorresponding dataword isextracted foruse.Ifthereceived
codeword isnotvalid,itisdiscarded. However, ifthecodeword iscorrupted duringtrans­
missionbutthereceivedwordstillmatchesavalidcodeword, theerrorremainsundetected.
Thistype ofcodingcandetectonlysingleerrors.Twoormoreerrorsmayremainundetected.
Example 10.2
Letusassumethatk=2andn=3.Table10.1showsthelistofdatawords andcodewords. Later,
wewillseehowtoderiveacodeword fromadataword.
Table10.1Acodeforerrordetection (Example 10.2)
Datawords Codewords
00 000
01 011
10 101
11 110SECTION 10.2BLOCKCODING 273
Assumethesenderencodesthedataword 01as011andsendsittothereceiver. Consider the
following cases:
1.Thereceiver receivesOIl.Itisavalidcodeword. Thereceiverextractsthedataword 01
fromit.
2.Thecodeword iscorrupted duringtransmission, and111isreceived (theleftmostbitiscor­
rupted).Thisisnotavalidcodeword andisdiscarded.
3.Thecodeword iscorrupted duringtransmission, and000isreceived (therighttwobitsare
corrupted). Thisisavalidcodeword. Thereceiverincorrectly extractsthedataword 00.Two
corrupted bitshavemadetheerrorundetectable.
Anerror-detecting codecandetectonlythetypesoferrorsforwhichitisdesigned;
othertypesoferrorsmayremainundetected.
ErrorCorrection
Aswesaidbefore,errorcorrection ismuchmoredifficultthanerrordetection. Inerror
detection, thereceiver needstoknowonlythatthereceived codeword isinvalid;in
errorcorrection thereceiverneedstofind(orguess)theoriginal codeword sent.Wecan
saythatweneedmoreredundant bitsforerrorcorrection thanforerrordetection.
Figure10.7showstheroleofblockcodinginerrorcorrection. Wecanseethattheidea
isthesameaserrordetection butthecheckerfunctions aremuchmorecomplex.
Figure10.7Structure ofencoderanddecoderinerrorcorrection
Sender Receiver
Encoder Decoder
kbitsIDatawordI IDatawordIkbits
I tCorrect
IGeneratorI ICheckerI
~ i
nbitsIIUnreliable transmissionInbits CodewordI ICodeword
Example 10.3
Letusaddmoreredundant bitstoExample 10.2toseeifthereceivercancorrectanerrorwithout
knowing whatwasactuallysent.Weadd3redundant bitstothe2-bitdataword tomake5-bit
codewords. Again,laterwewillshowhowwechosetheredundant bits.Forthemoment letus
concentrate ontheerrorcorrection concept. Table10.2showsthedatawords andcodewords.
Assumethedataword is01.Thesenderconsultsthetable(orusesanalgorithm) tocreatethe
codeword 01011.Thecodeword iscorrupted duringtransmission, and01001isreceived (errorin
thesecondbitfromtheright).First,thereceiverfindsthatthereceivedcodeword isnotinthetable.
Thismeansanerrorhasoccurred. (Detection mustcomebeforecorrection.) Thereceiver,assuming
thatthereisonly1bitcorrupted, usesthefollowing strategytoguessthecorrectdataword.274CHAPTER 10ERRORDETECTION ANDCORRECTION
Table10.2Acodeforerrorcorrection (Example 10.3)
Dataword Codeword
00 00000
01 01011
10 10101
11 11110
I.Comparing thereceived codeword withthefirstcodeword inthetable(01001versus00000),
thereceiverdecidesthatthefirstcodeword isnottheonethatwassentbecausetherearetwo
different bits.
2.Bythesamereasoning, theoriginalcodeword cannotbethethirdorfourthoneinthetable.
3.Theoriginalcodeword mustbethesecondoneinthetablebecausethisistheonlyonethat
differsfromthereceived codeword by1bit.Thereceiverreplaces 01001with01011and
consultsthetabletofindthedataword 01.
Hamming Distance
Oneofthecentralconcepts incodingforerrorcontrolistheideaoftheHamming dis­
tance.TheHamming distance betweentwowords(ofthesamesize)isthenumberof
differences between thecorresponding bits.WeshowtheHamming distancebetween
twowordsxandyasd(x,y).
TheHamming distancecaneasilybefoundifwcapplytheXORoperation (ffi)onthe
twowordsandcountthenumberofIsintheresult.NotethattheHamming distanceis
avaluegreaterthanzero.
TheHamming distancebetweentwowordsisthenumber
ofdifferences betweencorresponding bits.
Example 10.4
LetusfindtheHamming distancebetweentwopairsofwords.
1.TheHamming distance d(OOO,011)is2because000ffi011is011(twoIs).
2.TheHamming distanced(10101, 11110)is3because10101ffi11110is01011(threeIs).
Minimum Hamming Distance
Although theconceptoftheHamming distanceisthecentralpointindealingwitherror
detection andcorrection codes,themeasurement thatisusedfordesigning acodeisthe
minimum Hamming distance. Inasetofwords,theminimum Hamming distance isthe
smallestHamming distancebetweenallpossiblepairs.Weusedmintodefinethemini­
mumHamming distanceinacodingscheme.Tofindthisvalue,wefindtheHamming
distances betweenallwordsandselectthesmallestone.
Theminimum Hamming distanceisthesmallestHamming
distancebetweenallpossiblepairsinasetofwords.SECTION iO.2BLOCKCODiNG 275
Example 10.5
Findtheminimum Hamming distance ofthecodingschemeinTable10.1.
Solution
WefirstfindallHamming distances.
d(OOO,011)=2
d(Oll,110)=2
Thedmininthiscaseis2.d(OOO,101)=2
d(W1,110)=2d(OaO,110)=2d(Oll,101)=2
Example 10.6
Findtheminimum Hamming distanceofthecodingschemeinTable10.2.
Solution
WefirstfindalltheHamming distances.
d(OOOOO, 01011)=3
d(01011, 10101)=4
Thedmininthiscaseis3.d(OOOOO, 10101)=3
d(OlO11, 11110)=3d(OOOOO, 11110)=4
d(10101, 11110)=3
ThreeParameters
Beforewecontinue withourdiscussion, weneedtomention thatanycodingscheme
needstohaveatleastthreeparameters: thecodeword sizen,thedataword sizek,and
theminimum Hamming distancedmin.AcodingschemeCiswrittenasC(n,k)witha
separate expression fordmin-Forexample, wecancallourfirstcodingschemeC(3,2)
withdmin=2andoursecondcodingschemeC(5,2)withdmin::=3.
Hamming Distance andError
Beforeweexplorethecriteriaforerrordetection orcorrection, letusdiscusstherelationship
betweentheHamming distanceanderrorsoccurring duringtransmission. Whenacodeword
iscorrupted duringtransmission, theHamming distancebetweenthesentandreceivedcode­
wordsisthenumberofbitsaffectedbytheerror.Inotherwords,theHamming distance
betweenthereceivedcodeword andthesentcodeword isthenumberofbitsthatarecorrupted
duringtransmission. Forexample, ifthecodeword 00000issentand01101isreceived, 3bits
areinerrorandtheHamming distancebetweenthetwoisd(OOOOO, 01101)=3.
Minimum Distance forErrorDetection
Nowletusfindtheminimum Hamming distanceinacodeifwewanttobeabletodetect
uptoserrors.Ifserrorsoccurduringtransmission, theHamming distance between the
sentcodeword andreceivedcodeword iss.Ifourcodeistodetectuptoserrors,themini­
mumdistancebetween thevalidcodesmustbes+1,sothatthereceived codeword does
notmatchavalidcodeword. Inotherwords,iftheminimum distance between allvalid
codewords iss+1,thereceived codeword cannotbeerroneously mistaken foranother
codeword. Thedistances arenotenough(s+1)forthereceivertoacceptitasvalid.The
errorwillbedetected. Weneedtoclarifyapointhere:Although acodewithdmin=s+1276CHAPTER 10ERRORDETECTION ANDCORRECTION
maybeabletodetectmorethanserrorsinsomespecialcases,onlysorfewererrorsare
guaranteed tobedetected.
Toguarantee thedetection ofuptoserrorsinallcases,theminimum
Hamming distanceinablockcodemustbedmin=S+1.
Example 10.7
Theminimum Hamming distanceforourfirstcodescheme(Table10.1)is2.Thiscodeguarantees
detection ofonlyasingleerror.Forexample, ifthethirdcodeword (l01)issentandoneerror
occurs,thereceivedcodeword doesnotmatchanyvalidcodeword.Iftwoerrorsoccur,however,
thereceivedcodeword maymatchavalidcodeword andtheerrorsarenotdetected.
Example 10.8
Oursecondblockcodescheme(Table10.2) has dmin=3.Thiscodecandetectuptotwoerrors.
Again,weseethatwhenanyofthevalidcodewords issent,twoerrorscreateacodeword which
isnotinthetableofvalidcodewords. Thereceivercannotbefooled.However, somecombina­
tionsofthreeerrorschangeavalidcodeword toanothervalidcodeword. Thereceiveracceptsthe
receivedcodeword andtheerrorsareundetected.
Wecanlookatthisgeometrically. Letusassumethatthesentcodeword xisatthe
centerofacirclewithradiuss.Allotherreceived codewords thatarecreatedby1tos
errorsarepointsinsidethecircleorontheperimeter ofthecircle.Allothervalidcode­
wordsmustbeoutsidethecircle,asshowninFigure10.8.
Figure10.8Geometric conceptforfindingdmininerrordetection
.y
I
I
I
I
I
I
I
I
I
'1Legend
•Anyvalidcodeword
•Anycorrupted codeword
with0toserrors
InFigure10.8,dminmustbeanintegergreaterthans;thatis,dmin=s+1.
Minimum Distance forErrorCorrection
Errorcorrection ismorecomplex thanerrordetection; adecision isinvolved. Whena
received codeword isnotavalidcodeword, thereceiver needstodecidewhichvalid
codeword wasactuallysent.Thedecision isbasedontheconceptofterritory, anexclu­
siveareasurrounding thecodeword. Eachvalidcodeword hasitsownterritory.
Weuseageometric approach todefineeachterritory. Weassumethateachvalid
codeword hasacircularterritory witharadiusoftandthatthevalidcodeword isattheSECTION 10.3LINEAR BLOCKCODES 277
center.Forexample, supposeacodeword xiscorrupted bytbitsorless.Thenthiscor­
ruptedcodeword islocatedeitherinsideorontheperimeter ofthiscircle.Ifthereceiver
receivesacodeword thatbelongstothisterritory, itdecidesthattheoriginalcodeword is
theoneatthecenter.Notethatweassumethatonlyuptoterrorshaveoccurred; other­
wise,thedecisioniswrong.Figure10.9showsthisgeometric interpretation. Sometexts
useaspheretoshowthedistancebetween allvalidblockcodes.
Figure10.9 Geometric conceptforfindingdmininerrorcorrection
•Territory ofx
•
e
x
I'dmin>2tTerritory ofy
eoLegendy:..•Anyvalidcodeword •••Anycorrupted codeword
with1toterrors••
InFigure10.9,dmin>2t;sincethenextintegerincrement is1,wecansaythat
dmin=2t+1.
Toguarantee correction ofuptoterrorsinallcases,theminimum
Hamming distanceinablockcodemustbedmin==2t+1.
Example 10.9
AcodeschemehasaHamming distancedmin==4.Whatistheerrordetection andcorrection
capability ofthisscheme?
Solution
Thiscodeguarantees thedetection ofuptothreeerrOrs(s==3),butitcancorrectuptooneerror.
Inotherwords,ifthiscodeisusedforerrorcorrection, partofitscapability iswasted.Errorcor­
rectioncodesneedtohaveanoddminimum distance(3,5,7,...).
10.3LINEAR BLOCK CODES
Almostallblockcodesusedtodaybelongtoasubsetcalledlinearblockcodes.Theuseof
nonlinear blockcodesforerrordetection andcorrection isnotaswidespread because
theirstructure makestheoretical analysisandimplementation difficult.Wetherefore con­
centrateonlinearblockcodes.
Theformaldefinition oflinearblockcodesrequirestheknowledgeofabstractalgebra
(particularly Galoisfields),whichisbeyondthescopeofthisbook.Wetherefore givean
informal definition. Forourpurposes, alinearblockcodeisacodeinwhichtheexclusive
OR(addition modulo-2) oftwovalidcodewords createsanothervalidcodeword.278CHAPTER 10ERRORDETECTION ANDCORRECTION
Inalinearblockcode,theexclusive OR(XOR)ofany
twovalidcodewordscreatesanother validcodeword.
Example 10.10
LetusseeifthetwocodeswedefinedinTable10.1andTable10.2belongtotheclassoflinear
blockcodes.
1.TheschemeinTable10.1isalinearblockcodebecausetheresultofXORing anycodeword
withanyothercodeword isavalidcodeword. Forexample, theXORingofthesecondand
thirdcodewords createsthefourthone.
2.TheschemeinTable10.2isalsoalinearblockcode.Wecancreateallfourcodewords by
XORing twoothercodewords.
Minimum Distance forLinearBlockCodes
Itissimpletofindtheminimum Hamming distanceforalinearblockcode.Themini­
mumHamming distanceisthenumberofIsinthenonzerovalidcodeword withthe
smallestnumberofIs.
Example 10.11
Inourfirstcode(Table10.1),thenumbers ofIsinthenonzerocodewords are2,2,and2.Sothe
minimum Hamming distanceisdmin=2.Inoursecondcode(Table10.2),thenumbers ofIsin
thenonzero codewords are3, 3,and4.Sointhiscodewehavedmin=3.
SomeLinearBlockCodes
Letusnowshowsomelinearblockcodes.Thesecodesaretrivialbecausewecaneasily
findtheencoding anddecoding algorithms andchecktheirperformances.
SimpleParity-Check Code
Perhapsthemostfamiliarerror-detecting codeisthesimpleparity-check code.Inthis
code,ak-bitdataword ischangedtoann-bitcodeword wheren=k+1.Theextrabit,
calledtheparitybit,isselectedtomakethetotalnumberofIsinthecodeword even.
Although someimplementations specifyanoddnumberofIs,wediscusstheeven
case.Theminimum Hamming distanceforthiscategory isdmin=2,whichmeansthat
thecodeisasingle-bit error-detecting code;itcannotcorrectanyerror.
Asimpleparity-check codeisasingle-bit error-detecting
codeinwhichn=k+1withdmin=2.
Ourfirstcode(Table10.1)isaparity-check codewithk-=2 andn=3.Thecodein
Table10.3isalsoaparity-check codewithk=4 andn=5.
Figure10.10showsapossiblestructure ofanencoder(atthesender)andadecoder
(atthereceiver).
Theencoderusesagenerator thattakesacopyofa4-bitdataword (ao,aI'a2'and
a3)andgenerates aparitybitrooThedataword bitsandtheparitybitcreatethe5-bit
codeword. TheparitybitthatisaddedmakesthenumberofIsinthecodeword even.SECTION 10.3LINEAR BLOCKCODES 279
Table10.3Simpleparity-check codeC(5,4)
Datawords Codewords Datawords Codewords
0000 00000 1000 10001
0001 00011 1001 10010
0010 00101 1010 10100
0011 00110 1011 10111
0100 01001 1100 11000
0101 01010 1101 11011
0110 01100 1110 11101
0111 01111 1111 11110
Figure10.10Encoder anddecoderforsimpleparity-check code
Sender Receiver
Encoder Decoder
Dataword Dataword
la31a21allaol la31a21adaol
Accept
SYUdmm,r1"0
Decision<-<
'"0
logic '"
t~lC;
IGeneratorI ICheckerI
J tlParitybitUnreliable
la31a21allaolrotransmission
b3lb2lbllboTq~
Codeword Codeword
Thisisnormally donebyaddingthe4bitsofthedataword (modulo-2); theresultisthe
paritybit.Inotherwords,
Ifthenumberof1siseven,theresultis0;ifthenumberof1sisodd,theresultis1.
Inbothcases,thetotalnumberof1sinthecodeword iseven.
Thesendersendsthecodeword whichmaybecorrupted duringtransmission. The
receiverreceivesa5-bitword.Thecheckeratthereceiverdoesthesamethingasthegen­
eratorinthesenderwithoneexception: Theadditionisdoneoverall5bits.Theresult,
whichiscalledthesyndrome, isjust1bit.Thesyndrome is0whenthenumberofIsinthe
receivedcodeword iseven;otherwise, itis1.280CHAPTER 10ERRORDETECTION ANDCORRECTION
Thesyndrome ispassedtothedecisionlogicanalyzer. Ifthesyndrome is0,thereis
noerrorinthereceivedcodeword; thedataportionofthereceivedcodeword isaccepted
asthedataword; ifthesyndrome is1,thedataportionofthereceived codeword isdis­
carded.Thedataword isnotcreated.
Example 10.12
Letuslookatsometransmission scenarios. Assumethesendersendsthedataword 1011.Thecode­
wordcreatedfromthisdataword is10111,whichissenttothereceiver.Weexamine fivecases:
1.Noerroroccurs;thereceived codeword is10111.Thesyndrome isO.Thedataword 1011is
created.
2.Onesingle-bit errorchangesaI'Thereceived codeword is10011.Thesyndrome is1.No
dataword iscreated.
3.Onesingle-bit errorchanges rooThereceived codeword is10110.Thesyndrome is1.Nodata­
wordiscreated.Notethatalthough noneofthedataword bitsarecorrupted, nodataword is
createdbecausethecodeisnotsophisticated enoughtoshowthepositionofthecorrupted bit.
4.Anerrorchanges roandaseconderrorchangesa3'Thereceived codeword is00110.Thesyn­
dromeisO.Thedataword 0011iscreatedatthereceiver. Notethatherethedataword is
wronglycreatedduetothesyndrome value.Thesimpleparity-check decodercannotdetectan
evennumberoferrors.Theerrorscanceleachotheroutandgivethesyndrome avalueofO.
5.Threebits-a3, az,andaI-arechanged byerrors.Thereceived codeword is01011.The
syndrome is1.Thedataword isnotcreated.Thisshowsthatthesimpleparitycheck,guaran­
teedtodetectonesingleerror,canalsofindanyoddnumberoferrors.
Asimpleparity-check codecandetectanoddnumberoferrors.
Abetterapproach isthetwo-dimensional paritycheck.Inthismethod,thedata­
wordisorganized inatable(rowsandcolumns). InFigure10.11,thedatatobesent,five
7-bitbytes,areputinseparaterows.Foreachrowandeachcolumn,1parity-check bitis
calculated. Thewholetableisthensenttothereceiver,whichfindsthesyndrome foreach
rowandeachcolumn.AsFigure10.11shows,thetwo-dimensional paritycheckcan
detectuptothreeerrorsthatoccuranywhere inthetable(arrowspointtothelocations of
thecreatednonzerosyndromes). However, errorsaffecting 4bitsmaynotbedetected.
Hamming Codes
Nowletusdiscussacategory oferror-correcting codescalledHamming codes.These
codeswereoriginally designed withdmin=3,whichmeansthattheycandetectuptotwo
errorsorcorrectonesingleerror.Although therearesomeHamming codesthatcancor­
rectmorethanoneerror,ourdiscussion focusesonthesingle-bit error-correcting code.
Firstletusfindtherelationship between nandkinaHamming code.Weneedto
chooseanintegerm>=3.Thevaluesofnandkarethencalculated frommasn=2m-1
andk:::n-m.Thenumberofcheckbitsr=m.
AllHamming codesdiscussed inthisbookhavedmin=3.
Therelationship betweenmandninthesecodesisn=2m-1.
Forexample, ifm=3,thenn:::7andk:::4.ThisisaHamming codeC(7,4)withdmin=3.
Table10.4showsthedatawords andcodewords forthiscode.SECTION 10.3LINEAR BLOCKCODES 281
Figure10.11 Two-dimensional parity-check code
J
Columnparities
a.Designofrowandcolumnparities
t
b.Oneerroraffectstwoparities
~~fJfji:;f;ji,~!tt~~I'~iij;f~~s~&fi1.i~--+­
rij~~J~I'tr~~;~*~i~
d.Threeerrorsaffectfourparities
Table10.4Hamming codeC(7,4)c.Twoerrorsaffecttwoparities
e.Fourerrorscannotbedetected
Datawords Codewords Datawords Codewords
0000 0000000 1000 1000110
0001 0001101 1001 1001011
0010 0010111 1010 1010001
0011 0011010 1011 1011100
0100 0100011 1100 1100101
0101 0101110 1101 1101000
0110 0110100 1110 1110010
0111 0111001 1111 1111111282CHAPTER 10ERRORDETECTION ANDCORRECTION
Figure10.12showsthestructure oftheencoderanddecoderforthisexample.
Figure10.12ThestructureoftheencoderanddecoderforaHamming code
Sender Receiver
Encoder Decoder
Dataword Dataword
Ia31azla1IaoI la31azlatlaol
d.CDlTeCtiOi:1,1:199ie.
ttlSyndromeISzStlSoI',
I
IfGeneratorI lCheckerI'ttt
lUnreliable
la3lazlatlaolr2hITOtransmission
b31bzlbtlboIq21qllqol
Codeword Codeword
Acopyofa4-bitdataword isfedintothegenerator thatcreatesthreeparitychecks
ro,rl'andr2'asshownbelow:
TO=;aZ+al +ao
Tl=a3+az+al
T2=aI+aO+a3modulo-2
modulo-2
modulo-2
Inotherwords,eachoftheparity-check bitshandles3outofthe4bitsofthedata­
word.Thetotalnumberof1sineach4-bitcombination (3dataword bitsand1parity
bit)mustbeeven.Wearenotsayingthatthesethreeequations areunique;anythree
equations thatinvolve3ofthe4bitsinthedataword andcreateindependent equations
(acombination oftwocannotcreatethethird)arevalid.
Thecheckerinthedecodercreatesa3-bitsyndrome (s2s1s0)inwhicheachbitis
theparitycheckfor4outofthe7bitsinthereceived codeword:
So==bz+bi+bo+qo
Sl=b3+bz+bI+ql
8Z==bl+bo+b3+qzmodulo-Z
modulo-2
modulo-2
Theequations usedbythecheckerarethesameasthoseusedbythegenerator with
theparity-check bitsaddedtotheright-hand sideoftheequation. The3-bitsyndrome
createseightdifferent bitpatterns(000to111)thatcanrepresent eightdifferent condi­
tions.Theseconditions definealackoferrororanerrorin1ofthe7bitsofthereceived
codeword, asshowninTable10.5.SECTION 10.3LINEAR BLOCKCODES 283
Table10.5Logicaldecision madebythecorrection logicanalyzer a/thedecoder
Syndrome 000 001 010 011 100 101 110 111
Error None % ql b2q2 bob3bl
Notethatthegenerator isnotconcerned withthefourcasesshadedinTable10.5
because thereiseithernoerrororanerrorintheparitybit.Intheotherfourcases,1of
thebitsmustbeflipped(changed from0to1or1to0)tofindthecorrectdataword.
Thesyndrome valuesinTable10.5arebasedonthesyndrome bitcalculations. For
example, ifqoisinerror,Soistheonlybitaffected; thesyndrome, therefore, is001.If
b2isinerror,Soands1arethebitsaffected; thesyndrome, therefore isOIl.Similarly, if
bIisinerror,all3syndrome bitsareaffected andthesyndrome is111.
Therearetwopointsweneedtoemphasize here.First,iftwoerrorsoccurduring
transmission, thecreateddataword mightnotbetherightone.Second,ifwewantto
usetheabovecodeforerrordetection, weneedadifferent design.
Example 10.13
Letustracethepathofthreedatawords fromthesendertothedestination:
1.Thedataword 0100becomes thecodeword 0100011. Thecodeword 0100011isreceived.
Thesyndrome is000(noerror),thefinaldataword is0100.
2.Thedataword 0111becomes thecodeword 0111001. Thecodeword 0011001 isreceived.
Thesyndrome is011.According toTable10.5,b2isinerror.Afterflippingb2(changing the
1to0),thefinaldataword is0111.
3.Thedataword 1101becomes thecodeword 1101000. Thecodeword 0001000 isreceived
(twoerrors).Thesyndrome is101,whichmeansthatboisinerror.Afterflippingba,weget
0000,thewrongdataword. Thisshowsthatourcodecannot correct twoerrors.
Example 10.14
Weneedadataword ofatleast7bits.Calculate valuesofkandnthatsatisfythisrequirement.
Solution
Weneedtomakek=n-mgreaterthanorequalto7,or21n-1-m~7.
1.Ifwesetm=3,theresultisn=23-1andk=7 -3,or4,whichisnotacceptable.
2.Ifwesetm=4,thenn=24-1=15andk=15-4=11,whichsatisfiesthecondition. Sothe
codeisC(l5,11).Therearemethodstomakethedataword aspecificsize,butthediscussion
andimplementation arebeyondthescopeofthisbook.
Performance
AHamming codecanonlycorrectasingleerrorordetectadoubleerror.However,
thereisawaytomakeitdetectabursterror,asshowninFigure10.13.
Thekeyistosplitabursterrorbetween severalcodewords, oneerrorforeach
codeword. Indatacommunications, wenormally sendapacketoraframeofdata.To
maketheHamming coderespondtoabursterrorofsizeN,weneedtomakeNcodewords out
ofourframe.Then,insteadofsendingonecodeword atatime,wearrangethecodewords ina
tableandsendthebitsinthetableacolumnatatime.InFigure10.13,thebitsaresentcolunm
bycolumn(fromtheleft).Ineachcolumn,thebitsaresentfromthebottomtothetop.Inthis
way,aframeismadeoutofthefourcodewords andsenttothereceiver. Figure10.13shows284CHAPTER 10ERRORDETECTION ANDCORRECTION
Figure10.13Bursterrorcorrection usingHamming code
Sender
Codeword 4
Codeword 3Receiver
Codeword 4
Codeword 3
Codeword 2 1
Codeword 1 1
BurstelTor
-------------------------------------~~~---------------------------,
-r---r---r---r---r--,...--...---,,----.,:
Adataunitintransit
COlTUpted bits
thatwhenabursterrorofsize4corruptstheframe,only1bitfromeachcodeword iscor­
rupted.Thecorrupted bitineachcodeword cantheneasilybecorrected atthereceiver.
10.4CYCLIC CODES
Cycliccodesarespeciallinearblockcodeswithoneextraproperty. Inacycliccode,if
acodeword iscyclically shifted(rotated), theresultisanothercodeword. Forexample,
if1011000 isacodeword andwecyclically left-shift, then0110001 isalsoacodeword.
Inthiscase,ifwecallthebitsinthefirstwordaotoa6'andthebitsinthesecondword
botob6,wecanshiftthebitsbyusingthefollowing:
Intherightmost equation, thelastbitofthefirstwordiswrapped aroundand
becomes thefirstbitofthesecondword.
CyclicRedundancy Check
Wecancreatecycliccodestocorrecterrors.However, thetheoretical background
required isbeyondthescopeofthisbook.Inthissection,wesimplydiscussacategory
ofcycliccodescalledthecyclicredundancy check(CRC)thatisusedinnetworks
suchasLANsandWANs.SECTION 10.4CYCUC CODES 285
Table10.6showsanexample ofaCRCcode.Wecanseeboththelinearandcyclic
properties ofthiscode.
Table10.6ACRCcodewithC(7,4)
Dataword Codeword Dataword Code~rord
0000 0000000 1000 1000101
0001 0001011 1001 1001110
0010 0010110 1010 1010011
0011 0011101 1011 1011000
0100 0100111 1100 1100010
0101 0101100 1101 1101001
0110 0110001 1110 1110100
0111 0111010 1111 1111111
Figure10.14showsonepossibledesignfortheencoderanddecoder.
Figure10.14CRCencoderanddecoder
Sender Receiver
DatawordDecoder
Unreliable
transmissionDataword
000Encoder
Intheencoder, thedataword haskbits(4here);thecodeword hasnbits(7here).
Thesizeofthedataword isaugmented byaddingn-k(3here)Ostotheright-hand side
oftheword.Then-bitresultisfedintothegenerator. Thegenerator usesadivisorof
sizen-k+I(4here),predefined andagreedupon.Thegenerator dividestheaug­
menteddataword bythedivisor(modulo-2 division). Thequotientofthedivisionisdis­
carded;theremainder (r2rlro)isappended tothedataword tocreatethecodeword.
Thedecoderreceivesthepossiblycorrupted codeword. Acopyofallnbitsisfedto
thecheckerwhichisareplicaofthegenerator. Theremainder produced bythechecker286CHAPTER 10ERRORDETECTION ANDCORRECTiON
isasyndrome ofn-k(3here)bits,whichisfedtothedecisionlogicanalyzer. Theana­
lyzerhasasimplefunction. Ifthesyndrome bitsareallas,the4leftmostbitsofthe
codeword areaccepted asthedataword (interpreted asnoerror);otherwise, the4bits
arediscarded (error).
Encoder
Letustakeacloserlookattheencoder.Theencodertakesthedataword andaugments
itwithn-knumberofas.Itthendividestheaugmented dataword bythedivisor,as
showninFigure10.15.
Figure10.15Division inCRCencoder
DivisionDalaword11001I
~
Quotient
1 0 1 0
Divisor 1 0 11)I 0 0 1 L..T--i'------T--'
1011Dividend:
augmenled
dataword
Leftmost bit0:
use0000divisor
Leftmost bit0:
use0000divisoro100
o0 0 0
1000
101 1
o1 1 0
000 0
I110IRemainder
Codeword11001'-1-1-0-1
Dataword Remainder
Theprocessofmodulo-2 binarydivisionisthesameasthefamiliardivisionpro­
cessweusefordecimal numbers. However, asmentioned atthebeginning ofthe
chapter,inthiscaseadditionandsubtraction arethesame.WeusetheXORoperation
todoboth.
Asindecimaldivision, theprocessisdonestepbystep.Ineachstep,acopyofthe
divisorisXORedwiththe4bitsofthedividend. TheresultoftheXORoperation
(remainder) is3bits(inthiscase),whichisusedforthenextstepafter1extrabitis
pulleddowntomakeit4bitslong.Thereisoneimportant pointweneedtoremember
inthistypeofdivision.Iftheleftmostbitofthedividend (orthepartusedineachstep)
is0,thestepcannotusetheregulardivisor;weneedtouseanall-Osdivisor.
Whentherearenobitslefttopulldown,wehavearesult.The3-bitremainder
formsthecheckbits(r2'rl'andro).Theyareappended tothedataword tocreatethe
codeword.SECTION 10.4CYCLIC CODES 287
Decoder
Thecodeword canchangeduringtransmission. Thedecoderdoesthesamedivision
processastheencoder.Theremainder ofthedivisionisthesyndrome.Ifthesyndrome
isallOs,thereisnoerror;thedataword isseparated fromthereceived codeword and
accepted. Otherwise, everything isdiscarded. Figure10.16showstwocases:Theleft­
handfigureshowsthevalueofsyndrome whennoerrorhasoccurred; thesyndrome is
000.Theright-hand partofthefigureshowsthecaseinwhichthereisonesingleerror.
Thesyndrome isnotallOs(itisOIl).
Figure10.16Division intheCRCdecoderfortwocases
Codeword 11o00111 0I
Divisiont
I 0 I 0
1 0 11)10 0o1 1o_Codeword
101
1+10II 1
00o()
1I
01
o0 0
011
~Syndrome
tDataword_
discarded
Divisor
Youmaybewondering howthedivisor]011ischosen.Laterinthechapterwepresent
somecriteria,butingeneralitinvolvesabstractalgebra.
Hardware Implementation
Oneoftheadvantages ofacycliccodeisthattheencoderanddecodercaneasilyand
cheaplybeimplemented inhardware byusingahandfulofelectronic devices.Also,a
hardware implementation increases therateofcheckbitandsyndrome bitcalculation.
Inthissection,wetrytoshow,stepbystep,theprocess. Thesection,however, is
optionalanddoesnotaffecttheunderstanding oftherestofthechapter.
Divisor
Letusfirstconsider thedivisor.Weneedtonotethefollowing points:
1.Thedivisorisrepeatedly XORedwithpartofthedividend.288CHAPTER 10ERRORDETECTION ANDCORRECTION
2.Thedivisorhasn-k+1bitswhicheitherarepredefined orareallOs.Inother
words,the bitsdonotchangefromonedataword toanother.Inourprevious exam­
ple,thedivisorbitswereeither1011or0000.Thechoicewasbasedontheleftmost
bitofthepartoftheaugmented databitsthatareactiveintheXORoperation.
3.Acloselookshowsthatonlyn-kbitsofthedivisorisneededintheXORoperation.
Theleftmost bitisnotneededbecausetheresultoftheoperation isalways0,no
matterwhatthevalueofthisbit.ThereasonisthattheinputstothisXORoperation
areeitherbothOsorboth1s.Inourprevious example, only3bits,not4,isactually
usedintheXORoperation.
Usingthesepoints,wecanmakeafixed(hardwired) divisorthatcanbeusedforacyclic
codeifweknowthedivisorpattern.Figure10.17showssuchadesignforourprevious
example. WehavealsoshowntheXORdevicesusedfortheoperation.
Figure10.17Hardwired designofthedivisorinCRC
Leftmost bitofthepart
ofdividend involved
inXORoperation
•
Brokenline:
thisbitisalways0+(±)
XOR
Notethatiftheleftmost bitofthepartofdividend tobeusedinthisstepis1,the
divisorbits(d2d1do)areall;iftheleftmostbitis0,thedivisorbitsarc000.Thedesign
provides theright choice basedontheleftmostbit.
Augmented Dataword
Inourpaper-and-pencil divisionprocessinFigure10.15,weshowtheaugmented data­
wordasfixedinposition withthedivisorbitsshiftingtotheright,1bitineachstep.
Thedivisorbitsarealignedwiththeappropriate partoftheaugmented dataword. Now
thatourdivisorisfixed,weneedinsteadtoshiftthebitsoftheaugmented dataword tothe
left(opposite direction) toalignthedivisorbitswiththeappropriate part.Thereisno
needtostoretheaugmented dataword bits.
Remainder
Inourprevious example, theremainder is3bits(n-kbitsingeneral)inlength.Wecan
usethreeregisters (single-bit storagedevices) toholdthesebits.Tofindthefinal
remainder ofthedivision, weneedtomodifyourdivisionprocess.Thefollowing isthe
step-by-step processthatcanbeusedtosimulate thedivisionprocessinhardware (or
eveninsoftware).
1.Weassumethattheremainder isoriginally allOs(000inourexample).SECTION 10.4CYCLIC CODES 289
2.Ateachtimeclick(arrivalof1bitfromanaugmented dataword), werepeatthe
following twoactions:
a.Weusetheleftmostbittomakeadecisionaboutthedivisor(011or000).
b.Theother2bitsoftheremainder andthenextbitfromtheaugmented dataword
(totalof3bits)areXORedwiththe3-bitdivisortocreatethenextremainder.
Figure10.18showsthissimulator, butnotethatthisisnotthefinaldesign;therewillbe
moreimprovements.
Figure10.18Simulation ofdivision inCRCencoder
.C;/~~~/~I~o~Augmented dataword
,-(B~I0 0 0 0 0 TIme:I.iLk' ,, , ,
Time:2L:1i,t-',~l~o ot~/-@ 0/~@~ 0 000,o?:-'mMft ,
/ , ,
Time:3L:i!&,
°t',~1~0 °t--dJ/-(B 1/-@~ 000'p' ~~~ ,
/ , ,
Time:4L:1i,
/~I~ ,~1~1 ot~/-(B0 000
8~:<8?::<8ffi) ,
/ , ,
Time:5L::Ii/~~--dJt',~l~o /~l±)~ 0 0 ,
/ , ,
Time:6~.It-',!1~0 ot~/-l±) 0/-l±)~ 0 ,
/ , ,
Time:7l1' °t--dJ°t'ol/-0 1,'-0~,-(B~o
~- /
/ / ,
/ / /IIoJIT]\~.''"'-<
I
Finalremainder
Ateachclocktick,shownasdifferent times,oneofthebitsfromtheaugmented
dataword isusedintheXORprocess.Ifwelookcarefully atthedesign,wehave seven
stepshere,whileinthepaper-and-pencil methodwehadonlyfoursteps.Thefirstthree
stepshavebeenaddedheretomakeeachstepequalandtomakethedesignforeachstep
thesame.Steps1,2,and3pushthefirst3bitstotheremainder registers; steps4,5,6,
and7matchthepaper-and-pencil design.Notethatthevaluesintheremainder register
insteps4to7exactlymatchthevaluesinthepaper-and-pencil design.Thefinalremain­
derisalsothesame.
Theabovedesignisfordemonstration purposes only.Itneedssimplification tobe
practical. First,wedonotneedtokeeptheintermediate valuesoftheremainder bits;
weneedonlythefinalbits.Wetherefore needonly3registers insteadof24.Afterthe
XORoperations, wedonotneedthebitvaluesoftheprevious remainder. Also,wedo290CHAPTER 10ERRORDETECTION ANDCORRECTION
notneed21XORdevices;twoareenoughbecausetheoutputofanXORoperation in
whichoneofthebitsis0issimplythevalueoftheotherbit.Thisotherbitcanbeused
astheoutput.Withthesetwomodifications, thedesignbecomes tremendously simpler
andlessexpensive, asshowninFigure10.19.
Figure10.19TheCRCencoderdesignusingshiftregisters
Lillf-ol.f-----~lAugmented dataword
o0 1000
Weneed,however, tomaketheregisters shiftregisters. AI-bitshiftregisterholds
abitforadurationofoneclocktime.Atatimeclick,theshiftregisteraccepts the bitat
itsinputport,storesthenewbit,anddisplaysitontheoutputport.Thecontentandthe
outputremainthesameuntilthenextinputarrives.WhenweconnectseveralI-bitshift
registers together, itlooksasifthecontentsoftheregisterareshifting.
GeneralDesign
AgeneraldesignfortheencoderanddecoderisshowninFigure10.20.
Figure10.20GeneraldesignofencoderanddecoderofaCRCcode
Note:
ThedivisorlineandXORare
missingifthecorresponding
bitinthedivisorisO.
Dataword
rn_k_l rl Yo
a.Encoder
L{;b Received ...codeword..+
sn-k-l sl So
b.Decoder
Notethatwehaven-kI-bitshiftregisters inboththeencoderanddecoder. We
haveupton-kXORdevices,butthedivisorsnormally haveseveralOsintheirpattern,
whichreducesthenumberofdevices.Alsonotethat,insteadofaugmented datawords,
weshowthedataword itselfastheinputbecauseafterthebitsinthedataword areall
fedintotheencoder,theextrabits,whichallareOs,donothaveanyeffectontheright­
mostXOR.Ofcourse,theprocessneedstobecontinued foranothern-kstepsbeforeSECTION 10.4CYCLIC CODES 291
thecheckbitsareready.Thisfactisoneofthecriticisms ofthisdesign.Betterschemes
havebeendesigned toeliminate thiswaitingtime(thecheckbitsarereadyafterksteps),
butweleavethisasaresearch topicforthereader.Inthedecoder, however, theentire
codeword mustbefedtothedecoderbeforethesyndrome isready.
Polynomials
Abetterwaytounderstand cycliccodesandhowtheycanbeanalyzed istorepresent
themaspolynomials. Again,thissectionisoptional.
ApatternofOsand1scanberepresented asapolynomial withcoefficients of0and
1.Thepowerofeachtermshowsthepositionofthebit;thecoefficient showsthevalue
ofthebit.Figure10.21showsabinarypatternanditspolynomial representation. InFig­
ure10.21aweshowhowtotranslateabinarypatterntoapolynomial; inFigure1O.21b
weshowhowthepolynomial canbeshortened byremoving alltermswithzerocoeffi­
cientsandreplacing xlbyxandxOby1.
Figure10.21Apolynomial torepresent abinaryword
I1I0I0I0I0I1I1I
Iiii+oX'+ox4+o~+o?+Ixl+IxoI
a.Binarypatternandpolynomial b.Shortform
Figure10.21showsoneimmediate benefit;a7-bitpatterncanbereplaced bythree
terms.Thebenefitisevenmoreconspicuous whenwehaveapolynomial suchasx23+
X3+1.Herethebitpatternis24bitsinlength(threeIsandtwenty-one Os)whilethe
polynomial isjustthreeterms.
DegreeofaPolynomial
Thedegreeofapolynomial isthehighestpowerinthepolynomial. Forexample, the
degreeofthepolynomial x6+x+1is6.Notethatthedegreeofapolynomial is1less
thatthenumberofbitsinthepattern.Thebitpatterninthiscasehas7bits.
AddingandSubtracting Polynomials
Addingandsubtracting polynomials inmathematics aredonebyaddingorsubtracting
thecoefficients oftermswiththesamepower.Inourcase,thecoefficients areonly0
and1,andaddingisinmodulo-2. Thishastwoconsequences. First,additionandsub­
tractionarethesame.Second,addingorsubtracting isdonebycombining termsand
deletingpairsofidentical terms.Forexample, addingx5+x4+x2andx6+x4+x2gives
justx6+x5.Thetermsx4andx2aredeleted.However, notethatifweadd,forexample,
threepolynomials andwegetx2threetimes,wedeleteapairofthemandkeepthethird.292CHAPTER 10ERRORDETECTION ANDCORRECTION
Multiplying orDividing Terms
Inthisarithmetic, multiplying atermbyanothertermisverysimple;wejustaddthe
powers.Forexample, x3xx4isx7,Fordividing, wejustsubtractthepowerofthesec­
ondtermfromthepowerofthefirst.Forexample, x51x2isx3.
Multiplying TwoPolynomials
Multiplying apolynomial byanotherisdonetermbyterm.Eachtermofthefirstpolyno­
mialmustbemultiplied byalltermsofthesecond.Theresult,ofcourse,isthensimplified,
andpairsofequaltermsaredeleted.Thefollowing isanexample:
(~+X3 +~+x)(~+x+1)
=~+~+~+~+0+~+0+~+~+~+~+x
=x7+x6+x3+x
Dividing OnePolynomial byAnother
Division ofpolynomials isconceptually thesameasthebinarydivisionwediscussed
foranencoder. Wedividethefirsttermofthedividend bythefirsttermofthedivisorto
getthefirsttermofthequotient. Wemultiply theterminthequotientbythedivisorand
subtracttheresultfromthedividend. Werepeattheprocessuntilthedividend degreeis
lessthanthedivisordegree.Wewillshowanexampleofdivisionlaterinthischapter.
Shifting
Abinarypatternisoftenshiftedanumberofbitstotherightorleft.Shiftingtotheleft
meansaddingextraOsasrightmost bits;shiftingtotherightmeansdeletingsomeright­
mostbits.Shiftingtotheleftisaccomplished bymultiplying eachtermofthepolynomial
byxn,wheremisthenumberofshiftedbits;shiftingtotherightisaccomplished by
dividingeachtermofthepolynomial byxn.Thefollowing showsshiftingtotheleftand
totheright.Notethat wedonothavenegativepowersinthepolynomial representation.
Shiftingleft3bits:
Shiftingright3bits:10011becomes 10011000
10011becomes 10x4+x+1becomes x7+x4+~
x4+x+1becomes x
Whenweaugmented thedataword intheencoderofFigure10.15,weactually
shiftedthebitstotheleft.Alsonotethatwhenweconcatenate twobitpatterns, weshift
thefirstpolynomial totheleftandthenaddthesecondpolynomial.
CyclicCodeEncoder UsingPolynomials
Nowthatwehavediscussed operations onpolynomials, weshowthecreationofacode­
wordfromadataword. Figure10.22isthepolynomial versionofFigure10.15.Wecan
seethattheprocessisshorter.Thedataword 1001isrepresented asx3+1.Thedivisor
1011isrepresented asx3+x+1.Tofindtheaugmented dataword, wehaveleft-shifted
thedataword 3bits(multiplying byx\Theresultisx6+x3.Divisionisstraightforward.
Wedividethefirsttermofthedividend, x6,bythefirsttermofthedivisor,x3.Thefirst
termofthequotientisthenx6/x3,orx3.Thenwemultiply x3bythedivisorandsubtract
(according toourprevious definition ofsubtraction) theresultfromthedividend. TheSECTION 10.4CYCLiC CODES 293
resultisx4,withadegreegreaterthanthedivisor's degree;wecontinue todivideuntil
thedegreeoftheremainder islessthanthedegreeofthedivisor.
Figure10.22CRCdivisionusingpolynomials
DatawordIx3+1
t
Divisor x3+xDividend:
x3+x+I )x6+ x3 augmented
x6+.0+x3 dataword
.0
.0+x2+x
Ix2+xIRemainder
CodewordIx6+x3Ixl+xI
Dataword Remainder
Itcanbeseenthatthepolynomial representation caneasilysimplifytheoperation
ofdivisioninthiscase,becausethetwostepsinvolving all-Osdivisorsarenotneeded
here.(Ofcourse,onecouldarguethattheall-Osdivisorstepcanalsobeeliminated in
binarydivision.) Inapolynomial representation, thedivisorisnormally referredtoas
thegenerator polynomial t(x).
Thedivisorinacycliccodeisnormally calledthegenerator polynomial
orsimplythegenerator.
CyclicCodeAnalysis
Wecananalyzeacycliccodetofinditscapabilities byusingpolynomials. Wedefine
thefollowing, wheref(x) isapolynomial withbinarycoefficients.
Dataword: d(x)
Syndrome: sex)Codeword: c(x)
Error:e(x)Generator: g(x)
Ifsex)isnotzero,thenoneormorebitsiscorrupted. However, ifsex)iszero,either
nobitiscorrupted orthedecoderfailedtodetectanyerrors.
Inacycliccode,
I.Ifs(x)"*0,oneormorebitsiscorrupted.
2.Ifsex)=0,either
a.Nobitiscorrupted. or
b.Somebitsarecorrupted, butthedecoderfailedtodetectthem.294CHAPTER 10ERRORDETECTION ANDCORRECTION
Inouranalysiswewanttofindthecriteriathatmustbeimposed onthegenerator,
g(x)todetectthetypeoferrorweespecially wanttobedetected. Letusfirstfindthe
relationship amongthesentcodeword, error,received codeword, andthegenerator.
Wecansay
Received codeword=c(x)+e(x)
Inotherwords,thereceivedcodeword isthesumofthesentcodeword andtheerror.
Thereceiverdividesthereceived codeword byg(x)togetthesyndrome. Wecanwrite
thisas
Received codeword=c(x)+e(x)
g(x) g(x) g(x)
Thefirsttermattheright-hand sideoftheequality doesnothavearemainder
(according tothedefinition ofcodeword). Sothesyndrome isactuallytheremainder of
thesecondtermontheright-hand side.Ifthistermdoesnothavearemainder (syn­
drome=0),eithere(x)is0ore(x)isdivisible byg(x).Wedonothavetoworryabout
thefirstcase(thereisnoerror);thesecondcaseisveryimportant. Thoseerrorsthatare
divisible byg(x)arenotcaught.
Inacycliccode,thosee(x)errorsthataredivisible byg(x)arenotcaught.
Letusshowsomespecificerrorsandseehowtheycanbecaughtbyawell­
designedg(x).
Single-Bit Error
Whatshouldbethestructure ofg(x)toguarantee thedetection ofasingle-bit error?A
single-bit errorise(x)=xi,whereiisthepositionofthebit.Ifasingle-bit erroriscaught,
thenxiisnotdivisible byg(x).(Notethatwhenwesaynotdivisible, wemeanthatthere
isaremainder.) Ifg(x)ha~atleasttwoterms(whichisnormally thecase)andthecoeffi­
cientofxOisnotzero(therightmost bitis1),thene(x)cannotbedividedbyg(x).
Hthegenerator hasmorethanonetermandthecoefficient ofxOis1,
allsingleerrorscanbecaught.
Example 10.15
Whichofthefollowing g(x)valuesguarantees thatasingle-bit erroriscaught?Foreachcase,
whatistheerrorthatcannotbecaught?
a.x+1
b.x3
c.1SECTION 10.4CYCLIC CODES 295
Solution
a.Noxicanbedivisible byx+1.Inotherwords,xi/ex+1)alwayshasaremainder. Sothe
syndrome isnonzero. Anysingle-bit errorcanbecaught.
b.Ifiisequaltoorgreaterthan3,xiisdivisible byg(x).Theremainder ofxi/x3iszero,and
thereceiver isfooledintobelieving thatthereisnoerror,although theremightbeone.
Notethatinthiscase,thecorrupted bitmustbeinposition 4orabove.Allsingle-bit
errorsinpositions Ito3arecaught.
c.Allvaluesofimakejdivisible byg(x).Nosingle-bit errorcanbecaught.Inaddition, this
g(x)isuselessbecauseitmeansthecodeword isjustthedataword augmented withn-kzeros.
TwoIsolatedSingle-Bit Errors
Nowimagine therearetwosingle-bit isolatederrors.Underwhatconditions canthis
typeoferrorbecaught?Wecanshowthistypeoferrorase(x)=:xl+xi.Thevaluesofi
andjdefinethepositions oftheerrors,andthedifference j-idefinesthedistance
between thetwoerrors,asshowninFigure10.23.
Figure10.23 Representation o/twoisolatedsingle-bit errorsusingpolynomials
I'Difference: j-i
Wecanwritee(x)=1(xj-i+1).Ifg(x)hasmorethanonetermandonetermisxo,it
cannotdivide1,aswesawintheprevioussection.Soifg(x)istodividee(x),itmustdivide
xj-i+1.Inotherwords,g(x)mustnotdivideY!+1,wheretisbetween0andn-1.However,
t=:Oismeaningless andt=Iisneededaswewillseelater.Thismeanstshouldbebetween
2andn-1.
Hagenerator cannotdivider+1(tbetween0andn-1),
thenallisolateddoubleerrorscanbedetected.
Example 10.16
Findthestatusofthefollowing generators relatedtotwoisolated, single-bit errors.
a.x+1
b.x4+I
c.x7+x6+1
d.xls+xI4+1
Solution
a.Thisisaverypoorchoiceforagenerator. Anytwoerrorsnexttoeachothercannotbedetected.
b.Thisgenerator cannotdetecttwoerrorsthatarefourpositions apart.Thetwoerrorscan
beanywhere, butiftheirdistance is4,theyremainundetected.
c.Thisisagoodchoiceforthispurpose.
d.Thispolynomial cannotdivide any erroroftypext+1iftislessthan32,768.Thismeans
thatacodeword withtwoisolatederrorsthatarenexttoeachotherorupto32,768bits
apartcanbedetected bythisgenerator.296CHAPTER 10ERRORDETECTION ANDCORRECTION
OddNumbers ofErrors
Agenerator withafactorofx+1cancatchalloddnumbers oferrors.Thismeansthat
weneedtomakex+1 afactorofanygenerator. Notethatwearenotsayingthatthe
generator itselfshouldbex+1;wearesayingthatitshouldhaveafactorofx+1.Ifit
isonlyx+1,itcannotcatchthetwoadjacentisolatederrors(seetheprevious section).
Forexample, x4+x2+X+1cancatchallodd-numbered errorssinceitcanbewritten
asaproductofthetwopolynomials x+1andx3+x2+1.
Agenerator thatcontains afactorofx+1candetectallodd-numbered errors.
BurstErrors
Nowletusextendouranalysistothebursterror,whichisthemostimportant ofall.A
bursterrorisoftheforme(x)=eJ+...+xi).Notethedifference betweenabursterror
andtwoisolatedsingle-bit errors.Thefirstcanhavetwotermsormore;thesecondcan
onlyhavetwoterms.Wecanfactoroutxiandwritetheerrorasxi(xJ-i+...+1).Ifour
generator candetectasingleerror(minimum condition foragenerator), thenitcannot
dividexi.Whatweshouldworryaboutarethosegenerators thatdividexJ-i+...+1.In
otherwords,theremainder of(xJ-i+...+1)/(xr+...+1)mustnotbezero.Notethat
thedenominator isthegenerator polynomial. Wecanhavethreecases:
1.Ifj-i<r,theremainder canneverbezero.Wecanwritej-i=L-1,whereLis
thelengthoftheerror.SoL-1<rorL<r+1orL:::;:r.Thismeansallbursterrors
withlengthsmallerthanorequaltothenumberofcheckbitsrwillbedetected.
2.Insomerarecases,ifj-i=r,orL=r+1,thesyndrome is0andtheerrorisunde­
tected.Itcanbeprovedthatinthesecases,theprobability ofundetected bursterrorof
lengthr+1is(ll2r-l.Forexample, ifourgenerator isxl4+~+1,inwhichr=14,a
bursterroroflengthL=15canslipbyundetected withtheprobability of(1/2)14-1 or
almost1in10,000.
3.Insomerarecases,ifj-i>r,orL>r+1,thesyndrome is0andtheerrorisunde­
tected.Itcanbeprovedthatinthesecases,theprobability ofundetected bursterror
oflengthgreaterthanr+1is(112tForexample, ifourgenerator isx14+x3+1,in
whichr=14,abursterroroflengthgreaterthan15canslipbyundetected withthe
probability of(112)14oralmost1in16,000cases.
oAllbursterrorswithL::::;rwillbedetected.oAllbursterrorswithL=r+1willbedetected withprobability 1-(112/-1•
oAllbursterrorswithL>r+1willbedetected withprobability 1-(1/2[.
Example 10.17
Findthesuitability ofthefollowing generators inrelationtobursterrorsofdifferent lengths.
a.x6+1
b.xI8+x7+x+1
c.x32+~3+x7+1SECTION 10.4CYCLIC CODES 297
Solution
a.Thisgenerator candetectallbursterrorswithalengthlessthanorequalto6bits;3out
of100bursterrorswithlength7willslipby;16outof1000bursterrorsoflength8or
morewillslipby.
b.Thisgenerator candetectallbursterrorswithalengthlessthanorequalto18bits;8out
of1millionbursterrorswithlength19willslipby;4outofImillionbursterrorsof
length20ormorewillslipby.
c.Thisgenerator candetectallbursterrorswithalengthlessthanorequalto32bits;5out
of10billionbursterrorswithlength33willslipby;3outof10billionbursterrorsof
length34ormorewillslipby.
Summary
Wecansummarize thecriteriaforagoodpolynomial generator:
Agoodpolynomial generator needstohavethefollowing characteristics:
1.Itshouldhaveatleasttwoterms.
2.Thecoefficient ofthetermxOshouldbe1.
3.ItshouldnotdivideXl+1,fortbetween2andn-1.
4.Itshouldhavethefactorx+1.
Standard Polynomials
Somestandard polynomials usedbypopularprotocols foreRegeneration areshown
inTable10.7.
Table10.7Standard polynomials
Name Polynomial Application
CRC-8 xS+x2+x+1 ATMheader
CRC-lO xIO+x9+~+x4+x2+ I ATMAAL
CRC-16 x16+x12+~+1 HDLC
CRC-32 x32+26+23+x22+x16+x12+xlI+xlO+ LANs
x8+x7+x5+x4+x2+x+1
Advantages ofCyclicCodes
Wehaveseenthatcycliccodeshaveaverygoodperformance indetecting single-bit
errors,doubleerrors,anoddnumberoferrors,andbursterrors.Theycaneasilybe
implemented inhardware andsoftware. Theyareespecially fastwhenimplemented in
hardware. Thishasmadecycliccodesagoodcandidate formanynetworks.
OtherCyclicCodes
Thecycliccodeswehavediscussed inthissectionareverysimple.Thecheckbitsand
syndromes canbecalculated bysimplealgebra.Thereare,however, morepowerful
polynomials thatarebasedonabstractalgebrainvolving Galoisfields.Thesearebeyond298CHAPTER 10ERRORDETECTION ANDCORRECTION
thescopeofthisbook.Oneofthemostinteresting ofthesecodesistheReed-Solomon
codeusedtodayforbothdetection andcorrection.
10.5CHECKSUM
Thelasterrordetection methodwediscusshereiscalledthechecksum. Thechecksum
isusedintheInternetbyseveralprotocols although notatthedatalinklayer.However,
webrieflydiscussitheretocomplete ourdiscussion onerrorchecking.
Likelinearandcycliccodes,thechecksum isbasedontheconceptofredundancy.
Severalprotocols stillusethechecksum forerrordetection aswewillseeinfuture
chapters, although thetendency istoreplaceitwithaCRe.ThismeansthattheCRCis
alsousedinlayersotherthanthedatalinklayer.
Idea
Theconceptofthechecksum isnotdifficult. Letusillustrate itwithafewexamples.
Example 10.18
Supposeourdataisalistoffive4-bitnumbers thatwewanttosendtoadestination. Inaddition
tosendingthesenumbers, wesendthesumofthenumbers. Forexample, ifthesetofnumbers is
(7,11, 12,0,6),wesend(7,11,12,0,6,36), where36isthesumoftheoriginalnumbers. The
receiveraddsthefivenumbers andcompares theresultwiththesum.Ifthetwoarethesame,
thereceiverassumesnoerror,acceptsthefivenumbers, anddiscardsthesum.Otherwise, thereis
anerrorsomewhere andthedataarenotaccepted.
Example 10.19
Wecanmakethejobofthereceivereasierifwesendthenegative (complement) ofthesum,
calledthechecksum. Inthiscase,wesend(7,11,12,0,6,-36).Thereceivercanaddallthenum­
bersreceived (including thechecksum). Iftheresultis0,itassumesnoerror;otherwise, thereis
anerror.
One'sComplement
Theprevious example hasonemajordrawback. Allofourdatacanbewrittenasa4-bit
word(theyarelessthan15)exceptforthechecksum. Onesolutionistouseone'scom­
plement arithmetic. Inthisarithmetic, wecanrepresent unsigned numbers between 0
and2n-1usingonlynbits.tIfthenumberhasmorethannbits,theextraleftmostbits
needtobeaddedtothenrightmost bits(wrapping). Inone'scomplement arithmetic, a
negativenumbercanberepresented by inverting allbits(changing a 0toa 1anda 1to
a0).Thisisthesameassubtracting thenumberfrom2n-1.
Example 10.20
Howcanwerepresent thenumber21inone'scomplement arithmetic usingonlyfourbits?
tAlthough one'scomplement canrepresent bothpositiveandnegative numbers, weareconcerned onlywith
unsigned representation here.SECTION 10.5CHECKSUM 299
Solution
Thenumber21inbinaryis10101(itneedsfivebits).Wecanwraptheleftmostbitand additto
thefourrightmost bits.Wehave(0101+1)=0110or6.
Example 10.21
Howcanwerepresent thenumber-6inone'scomplement arithmetic usingonlyfourbits?
Solution
Inone'scomplement arithmetic, thenegative orcomplement ofanumberisfoundbyinverting
allbits.Positive6is0110;negative6is100I.Ifweconsider onlyunsigned numbers, thisis9.In
otherwords,thecomplement of6is9.Anotherwaytofindthecomplement ofanumberinone's
complement arithmetic istosubtractthenumberfrom 2n-I(16- 1inthiscase).
Example 10.22
LetusredoExercise 10.19usingone'scomplement arithmetic. Figure10.24showstheprocessat
thesenderandatthereceiver. Thesenderinitializes thechecksum to0andaddsalldataitemsand
thechecksum (thechecksum isconsidered asonedataitemandisshownincolor).Theresultis
36.However, 36cannotbeexpressed in4bits.Theextratwobitsarewrapped andaddedwith
thesumtocreatethewrapped sumvalue6.Inthefigure,wehaveshownthedetailsinbinary.The
sumisthencomplemented, resulting inthechecksum value9(15- 6=9).Thesendernowsends
sixdataitemstothereceiverincluding thechecksum 9.Thereceiverfollowsthesameprocedure
asthesender.Itaddsalldataitems(including thechecksum); theresultis45.Thesumis
wrapped andbecomes 15.Thewrapped sumiscomplemented andbecomes O.Sincethevalueof
thechecksum is0,thismeansthatthedataisnotcorrupted. Thereceiverdropsthechecksum and
keepstheotherdataitems.Ifthechecksum isnotzero,theentirepacketisdropped.
Figure10.24
Sendersite Receiver site
7 7
11 11
12 12
0 0
6 6
0~7,II,12,0,6,9~9
Sum~ 36 Sum~ 45
Wrapped sum~6 Packet Wrapped sum~15
Checksum~9 Checksum~0
L!.J!JO1 0 0
~10
o1 1 0
100136
6
9L!....Q.J1 1 0 1
~10
1 1 1 1
o0 0 045
15
o
Detailsofwrapping
andcomplementingDetailsofwrapping
andcomplementing
Internet Checksum
Traditionally, theInternethasbeenusinga16-bitchecksum. Thesendercalculates the
checksum byfollowing thesesteps.300CHAPTER 10ERRORDETECTION ANDCORRECTION
Sendersite:
1.Themessageisdividedinto16-bitwords.
2.Thevalueofthechecksum wordissettoO.
3.Allwordsincluding thechecksum areaddedushtgone'scomplement addition.
4.Thesumiscomplemented andbecomes thechecksum.
5.Thechecksum issentwiththedata.
Thereceiverusesthefollowing steps forerrordetection.
Receiver site:
1.Themessage(including checksum) isdividedinto16-bitwords.
2.Allwordsareaddedusingone'scomplement addition.
3.Thesumiscomplemented andbecomes thenewchecksum.
4.Ifthevalueofchecksum is0,themessage isaccepted; otherwise, itisrejected.
Thenatureofthechecksum (treating wordsasnumbers andaddingandcomple­
mentingthem)iswell-suited forsoftwareimplementation. Shortprograms canbewritten
tocalculate thechecksum atthe receiver siteortocheckthevalidityofthemessage at
thereceiversite.
Example 10.23
Letuscalculate thechecksum foratextof8characters ("Forouzan"). Thetextneedstobedivided
into2-byte(l6-bit)words.WeuseASCII(seeAppendix A)tochangeeachbytetoa2-digithexa­
decimalnumber.Forexample, Fisrepresented asOx46and0isrepresented asOx6F.Figure10.25
showshowthechecksum iscalculated atthesenderandreceiver sites.Inpartaofthefigure,
thevalueofpartialsumforthefirstcolumnisOx36.Wekeeptherightmost digit(6)andinsertthe
Figure10.25
I013 Carries
46 6F (Fo)
726F (ro)
757A luz)
616E (an)
00 0 0 Checksum (initial)
8FC6Sum(partial)
1
8FC7Sum
7038Checksum (tosend)
a.Checksum atthesendersite1()13 Carries
4 66F IFo)
726F (ro)
757A (uz)
616E (an)
7038Checksum (received)
FFFESum(partial)
1
FFFFSum
0 00()Checksum (new}
b.Checksum atthereceiver siteSECTION fO.7KEYTERMS 301
leftmostdight(3)asthecarryinthesecondcolumn.Theprocessisrepeatedforeachcolumn.
Hexadecimal numbersarereviewed inAppendix B.
Notethatifthereisanycorruption, thechecksum recalculated bythereceiverisnotallas.
Weleavethisanexercise.
Performance
Thetraditional checksum usesasmallnumberofbits(16)todetecterrorsinamessage
ofanysize(sometimes thousands ofbits).However, itisnotasstrongastheCRCin
error-checking capability. Forexample, ifthevalueofonewordisincremented andthe
valueofanotherwordisdecremented bythesameamount, thetwoerrorscannotbe
detected becausethesumandchecksum remainthesame.Alsoifthevaluesofseveral
wordsareincremented butthetotalchangeisamultiple of65535,thesumandthe
checksum doesnotchange,whichmeanstheerrorsarenotdetected. FletcherandAdler
haveproposed someweighted checksums, inwhicheachwordismultiplied byanum­
ber(itsweight)thatisrelatedtoitsposition inthetext.Thiswilleliminate thefirst
problem wementioned. However, thetendency intheInternet, particularly indesigning
newprotocols, istoreplacethechecksum withaCRC.
10.6RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
books.Theitemsinbrackets [...]refertothereference listattheendofthetext.
Books
Severalexcellent bookaredevoted toerrorcoding.Amongthemwerecommend [Ham80],
[Zar02], [Ror96], and[SWE04].
RFCs
Adiscussion oftheuseofthechecksum intheInternetcanbefoundinRFC1141.
10.7KEYTERMS
blockcode
bursterror
checkbit
checksum
codeword
convolution code
cycliccode
cyclicredundancy check(CRC)
dataword
errorerrorcorrection
errordetection
forwarderrorcorrection
generator polynomial
Hamming code
Hamming distance
interference
linearblockcode
minimum Hamming distance
modular arithmetic302CHAPTER 10ERRORDETECTION ANDCORRECTION
modulus
one'scomplement
paritybit
parity-check code
polynomial
redundancy
Reed-Solomonregister
retransmission
shiftregister
single-bit error
syndrome
two-dimensional parity
check
10.8SUMMARY
oDatacanbecorrupted duringtransmission. Someapplications requirethaterrorsbe
detected andcorrected.
oInasingle-bit error,onlyonebitinthedataunithaschanged. Abursterrormeans
thattwoormorebitsinthedataunithavechanged.
oTodetectorcorrecterrors,weneedtosendextra(redundant) bitswithdata.
oTherearetwomainmethodsoferrorcorrection: forwarderrorcorrection andcorrec­
tionbyretransmission.
oWecandividecodingschemes intotwobroadcategories: blockcodingandconvo­
lutioncoding.
oIncoding,weneedtousemodulo-2 arithmetic. Operations inthisarithmetic arevery
simple;additionandsubtraction givethesameresults.weusetheXOR(exclusive
OR)operation forbothadditionandsubtraction.
oInblockcoding,wedivideourmessageintoblocks,eachofkbits,calleddatawords.
Weaddrredundant bitstoeachblocktomakethelengthn:::k+r.Theresulting n-bit
blocksarecalledcodewords.
oInblockcoding,errorsbedetectedbyusingthefollowing twoconditions:
a.Thereceiverhas(orcanfind)alistofvalidcodewords.
b.Theoriginalcodeword haschangedtoaninvalidone.
oTheHamming distance between twowordsisthenumberofdifferences between
corresponding bits.Theminimum Hamming distance isthesmallest Hamming
distancebetween allpossiblepairsinasetofwords.
oToguarantee thedetection ofuptoserrorsinallcases,theminimum Hamming dis­
tanceinablockcodemustbedmin:::s+1.Toguarantee correction ofuptoterrorsin
allcases,theminimum Hamming distanceinablockcodemustbedmin:::2t+1.
oInalinearblockcode,theexclusive OR(XOR)ofanytwovalidcodewords creates
anothervalidcodeword.
oAsimpleparity-check codeisasingle-bit error-detecting codeinwhichn:::k+1
withdmin:::2.Asimpleparity-check codecandetectanoddnumberoferrors.
oAllHamming codesdiscussed inthisbookhavedmin:::3.Therelationship between
mandninthesecodesisn:::2m-1.
oCycliccodesarespeciallinearblockcodeswithoneextraproperty. Inacycliccode,
ifacodeword iscyclically shifted(rotated), theresultisanothercodeword.SECTION 10.9PRACTICE SET303
oAcategory ofcycliccodescalledthecyclicredundancy check(CRC)isusedin
networks suchasLANsandWANs.
oApatternofOsandIscanberepresented asapolynomial withcoefficients of0and1.
oTraditionally, theInternethasbeenusingaI6-bitchecksum, whichusesone'scom­
plementarithmetic. Inthisarithmetic, wecanrepresent unsigned numbers between
oand2n-1usingonlynbits.
10.9PRACTICE SET
ReviewQuestions
1.Howdoesasingle-bit errordifferfromabursterror?
2.Discusstheconceptofredundancy inerrordetection andcorrection.
3.Distinguish betweenforwarderrorcorrection versuserrorcorrection byretransmission.
4.Whatisthedefinition ofalinearblockcode?Whatisthedefinition ofacycliccode?
5.WhatistheHamming distance? Whatistheminimum Hamming distance?
6.Howisthesimpleparitycheckrelatedtothetwo-dimensional paritycheck?
7.InCRC,showtherelationship betweenthefollowing entities(sizemeansthenumber
ofbits):
a.Thesizeofthedataword andthesizeofthecodeword
b.Thesizeofthedivisorandtheremainder
c.Thedegreeofthepolynomial generator andthesizeofthedivisor
d.Thedegreeofthepolynomial generator andthesizeoftheremainder
8.Whatkindofarithmetic isusedtoadddataitemsinchecksum calculation?
9.Whatkindoferrorisundetectable bythechecksum?
10.Canthevalueofachecksum beallOs(inbinary)? Defendyouranswer.Canthe
valuebeallIs(inbinary)? Defendyouranswer.
Exercises
11.Whatisthemaximum effectofa2-msburstofnoiseondatatransmitted atthefol­
lowingrates?
a.1500bps
b.12kbps
c.100kbps
d.100Mbps
12.Applytheexclusive-or operation onthefollowing pairofpatterns(thesymbol EB
meansXOR):
a.(10001) EB(10000)
b.(10001) EB(10001) (Whatdoyouinferfromtheresult?)
c.(11100) EB(00000) (Whatdoyouinferfromtheresult?)
d.(10011) EEl(11111) (Whatdoyouinferfromtheresult?)304CHAPTER 10ERRORDETECTION ANDCORRECTION
13.InTable10.1,thesendersendsdataword 10.A3-bitbursterrorcorrupts thecode­
word.Canthereceiverdetecttheerror?Defendyouranswer.
14.InTable10.2,thesendersendsdataword 10.Ifa3-bitbursten-orcon-upts thefirst
threebitsofthecodeword, canthereceiverdetecttheerror?Defendyouranswer.
15.WhatistheHamming distance foreachofthefollowing codewords:
a.d(10000,00000)
b.d(10101,10000)
c.d(11111,11111)
d.d(000,000)
16.Findtheminimum Hamming distance forthefollowing cases:
a.Detection oftwoen-ors.
b.Correction oftwoerrors.
c.Detection of3errorsorcorrection of2errors.
d.Detection of6errorsorcorrection of2errors.
17.UsingthecodeinTable10.2,whatisthedataword ifoneofthefollowing code­
wordsisreceived?
a.01011
b.11111
c.00000
d.11011
18.Provethatthecoderepresented byTable10.8isnotalinearcode.Youneedtofind
onlyonecasethatviolatesthelinearity.
Table 10.8 TableforExercise 18
Dataword Codeword
00 00000
01 01011
10 10111
11 11111
19.Although itcanmathematically beprovedthatasimpleparitycheckcodeisalinear
code,usemanualtestingoflinearity forfivepairsofthecodewords inTable10.3to
partially provethisfact.
20.ShowthattheHamming codeC(7,4)ofTablelOAcandetecttwo-biten-orsbutnot
necessarily three-biterrorbytestingthecodeinthefollowing cases.Thecharacter "V"
inthebursten-ormeansnoen-or;thecharacter "E"meansanerror.
a.Dataword: 0100 Bursterror:VEEVVVV
b.Dataword: 0111 Bursterror:EVVVVVE
c.Dataword: 1111 Bursterror:EVEVVVE
d.Dataword: 0000 Bursten-or:EEVEVVVSECTION 10.9PRACTICE SET 305
21.ShowthattheHamming codeC(7,4)ofTablelOAcancorrectone-biterrorsbut
notmorebytestingthecodeinthefollowing cases.Thecharacter "V"intheburst
errormeansnoerror;thecharacter "E"meansanerror.
a.Dataword: 0100 Bursterror:EVVVVVV
b.Dataword: 0111 Bursterror:VEVVVVV
c.Dataword: 1111 Bursterror:EVVVVVE
d.Dataword: 0000 Bursterror:EEVVVVE
22.Although itcanbeprovedthatcodeinTable10.6isbothlinearandcyclic,use
onlytwoteststopartially provethefact:
a.Testthecyclicproperty oncodeword 0101100.
b.Testthelinearproperty oncodewords 0010110 and1111111.
23.Weneedadataword ofatleast11bits.FindthevaluesofkandnintheHamming
codeC(n,k)withdmin:::3.
24.Applythefollowing operations onthecorresponding polynomials:
a.(x3+xl+X+1)+(x4+xl+x+1)
b.(x3+xl+x+1)-(x4+xl+x+1)
c.(x3+xl)X(x4+x2+x+1)
d.(x3+x2+x+1)/(x2+1)
25.Answerthefollowing questions:
a.Whatisthepolynomial representation of10111O?
b.Whatistheresultofshifting101110threebitstotheleft?
c.Repeatpartbusingpolynomials.
d.Whatistheresultofshifting101110fourbitstotheright?
e.Repeatpartdusingpolynomials.
26.Whichofthefollowing CRCgenerators guarantee thedetection ofasinglebit
error?
a.x3+x+1
b.x4+xl
c.1
d.x2+1
27.Referring totheCRC-8polynomial inTable10.7,answerthe following questions:
a.Doesitdetectasingleerror?Defendyouranswer.
b.Doesitdetectabursterrorofsize6?Defendyouranswer.
c.Whatistheprobability ofdetecting abursterrorofsize9?
d.Whatistheprobability ofdetecting abursterrorofsize15?
28.Referring totheCRC-32 polynomial inTable10.7,answerthefollowing questions:
a.Doesitdetectasingleerror?Defendyouranswer.
b.Doesitdetectabursterrorofsize16?Defendyouranswer.
c.Whatistheprobability ofdetecting abursterrorofsize33?
d.Whatistheprobability ofdetecting abursterrorofsize55?306CHAPTER 10ERRORDETECTION ANDCORRECTION
29.Assuming evenparity,findtheparitybitforeachofthefollowing dataunits.
a.1001011
b.0001100
c.1000000
d.1110111
30.Giventhedataword 1010011110 andthedivisor10111,
a.Showthegeneration ofthecodeword atthesendersite(usingbinarydivision).
h.Show the checking ofthecodeword atthereceiversite(assumenoerror).
3I.RepeatExercise 30usingpolynomials.
32.AsenderneedstosendthefourdataitemsOx3456,OxABCC, Ox02BC, andOxEEEE.
Answerthefollowing:
a.Findthechecksum atthesendersite.
b.Findthechecksum atthe receiver siteifthereisnoerror.
c.Findthechecksum atthereceiversiteiftheseconddataitemischanged to
OxABCE.
d.Findthechecksum atthereceiversiteiftheseconddataitemischanged to
OxABCE andthethirddataitemischanged toOx02BA.
33.Thisproblem showsaspecialcaseinchecksum handling. Asenderhastwodata
itemstosend:Ox4567andOxBA98. Whatisthevalueofthechecksum?CHAPTER 11
DataLinkControl
Thetwomainfunctions ofthedatalinklayeraredatalinkcontrolandmediaaccess
control.Thefirst,datalinkcontrol,dealswiththedesignandprocedures forcommuni­
cationbetween twoadjacent nodes:node-to-node communication. Wediscussthis
functionality inthischapter.Thesecondfunctionofthedatalinklayerismediaaccess
control,orhowtosharethelink.Wediscussthisfunctionality inChapter12.
Datalinkcontrolfunctions includeframing, flowanderrorcontrol,andsoftware­
implemented protocols thatprovide smoothandreliable transmission offrames
betweennodes.Inthischapter,wefirstdiscussframing, orhowtoorganize thebitsthat
arecarriedbythephysical layer.Wethendiscussflowanderrorcontrol.Asubsetof
thistopic,techniques forerrordetection andcorrection, wasdiscussed inChapter10.
Toimplement datalinkcontrol,weneedprotocols. Eachprotocol isasetofrules
thatneedtobeimplemented insoftware andrunbythetwonodesinvolved indata
exchange atthedatalinklayer.Wediscussfiveprotocols: twofornoiseless (ideal)
channels andthreefornoisy(real)channels. Thoseinthefirstcategory arenotactually
implemented, butprovideafoundation forunderstanding theprotocols inthesecond
category.
Afterdiscussing thefiveprotocol designs,weshowhowabit-oriented protocol is
actuallyimplemented byusingtheHigh-level DataLinkControl(HDLC)Protocolasan
example. Wealsodiscussapopularbyte-oriented protocol, Point-to-Point Protocol(PPP).
11.1FRAMING
Datatransmission inthephysical layermeansmovingbitsintheformofasignalfrom
thesourcetothedestination. Thephysicallayerprovides bitsynchronization toensure
thatthesenderandreceiverusethesamebitdurations andtiming.
Thedatalinklayer,ontheotherhand,needstopackbitsintoframes,sothateach
frameisdistinguishable fromanother.Ourpostalsystempractices atypeofframing.
Thesimpleactofinserting aletterintoanenvelope separates onepieceofinformation
fromanother;theenvelope servesasthedelimiter. Inaddition, eachenvelope defines
thesenderandreceiver addresses sincethepostalsystemisamany-to-many carrier
facility.
307308 CHAPTER 11DATALINKCONTROL
Framing inthedatalinklayerseparates amessage fromonesourcetoadestina­
tion,orfromothermessages tootherdestinations, byaddingasenderaddressanda
destination address.Thedestination addressdefineswherethepacketistogo;thesender
addresshelpstherecipient acknowledge thereceipt.
Although thewholemessage couldbepackedinoneframe,thatisnotnormally
done.Onereasonisthataframecanbeverylarge,makingflowanderrorcontrolvery
inefficient. Whenamessage iscarriedinoneverylargeframe,evenasingle-bit error
wouldrequiretheretransmission ofthewholemessage. Whenamessage isdivided
intosmallerframes,asingle-bit erroraffectsonlythatsmallframe.
Fixed-Size Framing
Framescanbeoffixedorvariablesize.Infixed-size framing, thereisnoneedfordefin­
ingtheboundaries oftheframes;thesizeitselfcanbeusedasadelimiter. Anexample
ofthistypeofframingistheATMwide-area network, whichusesframesoffixedsize
calledcells.WediscussATMinChapter18.
Variable-Size Framing
Ourmaindiscussion inthischapterconcerns variable-size framing, prevalent inlocal­
areanetworks. Invariable-size framing, weneedawaytodefinetheendoftheframe
andthebeginning ofthenext.Historically, twoapproaches wereusedforthispurpose:
acharacter-oriented approach andabit-oriented approach.
Character-Oriented Protocols
Inacharacter-oriented protocol, datatobecarriedare8-bitcharacters fromacoding
systemsuchasASCII(seeAppendix A).Theheader,whichnormally carriesthesource
anddestination addresses andothercontrolinformation, andthetrailer, which carries
errordetection orerrorcorrection redundant bits,arealsomultiples of8bits.Toseparate
oneframefromthenext,an8-bit(I-byte)flagisaddedatthebeginning andtheendofa
frame.Theflag,composed ofprotocol-dependent specialcharacters, signalsthestartor
endofaframe.Figure11.1showstheformatofaframeinacharacter-oriented protocol.
Figure11.1Aframeinacharacter-oriented protocol
Datafromupperlayer
Character-oriented framingwaspopularwhenonlytextwasexchanged bythedata
linklayers.Theflagcouldbeselectedtobeanycharacter notusedfortextcommunica­
tion.Now,however, wesendothertypesofinformation suchasgraphs,audio,and
video.Anypatternusedfortheflagcouldalsobepartoftheinformation. Ifthishap­
pens,thereceiver,whenitencounters thispatterninthemiddleofthedata,thinksithas
reachedtheendoftheframe.Tofixthisproblem, abyte-stuffing strategywasaddedtoSECTION 11.1FRAMING 309
character-oriented framing. Inbytestuffing(orcharacter stuffing), aspecialbyteis
addedtothedatasectionoftheframewhenthereisacharacter withthesamepatternas
theflag.Thedatasectionisstuffedwithanextrabyte.Thisbyteisusuallycalledthe
escapecharacter (ESC),whichhasapredefined bitpattern.Whenever thereceiver
encounters theESCcharacter, itremoves itfromthedatasectionandtreatsthenext
character asdata,notadelimiting flag.
Bytestuffingbytheescapecharacter allowsthepresence oftheflaginthedatasec­
tionoftheframe,butitcreatesanotherproblem. Whathappensifthetextcontainsoneor
moreescapecharacters followed byaflag?Thereceiverremoves theescapecharacter,
butkeepstheflag,whichisincorrectly interpreted astheendoftheframe.Tosolvethis
problem, theescapecharacters thatarepartofthetextmustalsobemarkedbyanother
escapecharacter. Inotherwords,iftheescapecharacter ispartofthetext,anextraoneis
addedtoshowthatthesecondoneispartofthetext.Figure11.2showsthesituation.
Figure11.2Bytestuffingandunstuffing
Framesent
Flag HeaderStuffed
Extra2
bytes
Framereceived
Flag Header
Unstuffed
Bytestuffingistheprocessofadding1extrabytewhenever
thereisaflagorescapecharacter inthetext.
Character-oriented protocols presentanotherproblem indatacommunications.
Theuniversal codingsystemsinusetoday,suchasUnicode, have16-bitand32-bit
characters thatconflictwith8-bitcharacters. Wecansaythatingeneral,thetendency is
movingtowardthebit-oriented protocols thatwediscussnext.
Bit-Oriented Protocols
Inabit-oriented protocol, thedatasectionofaframeisasequence ofbitstobeinter­
pretedbytheupperlayerastext,graphic,audio,video,andsoon.However, inaddition
toheaders(andpossibletrailers), westillneedadelimiter toseparateoneframefrom
theother.Mostprotocols useaspecial8-bitpatternflag01111110 asthedelimiter to
definethebeginning andtheendoftheframe,asshowninFigure11.3.310CHAPTER 11DATALINKCONTROL
Figure11.3Aframeinabit-oriented protocol
I'Datafromupperlayer
Variablenumberofbits'I
Header
Flag
Thisflagcancreatethesametypeofproblem wesawinthebyte-oriented proto­
cols.Thatis,iftheflagpatternappearsinthedata,weneedtosomehow informthe
receiverthatthisisnottheendoftheframe.Wedothisbystuffing1singlebit(instead
ofIbyte)topreventthepatternfromlookinglikeaflag.Thestrategyiscalledbit
stuffing. Inbitstuffing,ifa 0andfiveconsecutive Ibitsareencountered, anextra0is
added.Thisextrastuffedbitiseventually removed fromthedatabythereceiver. Note
thattheextrabitisaddedafterone0followed byfive1sregardless ofthevalueofthe
nextbit.Thisguarantees thattheflagfieldsequence doesnotinadvertently appearin
theframe.
Bitstuffingistheprocessofaddingoneextra0whenever fiveconsecutive 18followa 0
inthedata,sothatthereceiverdoesnotmistakethepattern0111110foraflag.
Figure11.4showsbitstuffingatthesenderandbitremovalatthereceiver.Notethat
evenifwehavea 0afterfive1s,westillstuffaO.The0willberemoved bythereceiver.
Figure11.4Bitstuffingandunstuffing
Framesent
IFlag!Header
FramereceivedDatafromupperlayer
100011111110011111010001
Stuffedt
10001111101100111110010001 TrailerIFlagI
Extra2
bits
IFlag1Header 10001111101100111110010001 Trailer1FlagI
Unsroffedt
I0001l11l1100 1111101000I
Datatoupperlayer
Thismeansthatiftheflaglikepattern01111110 appearsinthedata,itwillchange
to011111010 (stuffed)andisnotmistaken asaflagbythereceiver.Therealflag01111110
isnotstuffedbythesenderandisrecognized bythereceiver.SECTION II.3PROTOCOLS 311
11.2FLOWANDERROR CONTROL
Datacommunication requiresatleasttwodevicesworkingtogether, onetosendandthe
othertoreceive.Evensuchabasicarrangement requiresagreatdealofcoordination
foranintelligible exchange tooccur.Themost important responsibilities ofthedata
linklayerareflowcontrolanderrorcontrol. Collectively, thesefunctions areknown
asdatalinkcontrol.
FlowControl
Flowcontrolcoordinates theamountofdatathatcanbesentbeforereceiving anacknowl­
edgmentandisoneofthemostimportant dutiesofthedatalinklayer.Inmostprotocols,
flowcontrolisasetofprocedures thattellsthesenderhowmuchdataitcantransmit
beforeitmustwaitforanacknowledgment fromthereceiver. Theflowofdatamustnot
beallowedtooverwhelm thereceiver.Anyreceiving devicehasalimitedspeedatwhich
itcanprocessincoming dataandalimitedamountofmemory inwhichtostoreincom­
ingdata.Thereceiving devicemustbeabletoinformthesendingdevicebeforethose
limitsarereachedandtorequestthatthetransmitting devicesendfewerframesorstop
temporarily. Incoming datamustbecheckedandprocessed beforetheycanbeused.The
rateofsuchprocessing isoftenslowerthantherateoftransmission. Forthisreason,
eachreceiving devicehasablockofmemory, calledabuffer,reservedforstoringincom­
ingdatauntiltheyareprocessed. Ifthebufferbeginstofillup,thereceivermustbeable
totellthesendertohalttransmission untilitisonceagainabletoreceive.
Flowcontrolreferstoasetofprocedures usedtorestricttheamountofdata
thatthesendercansendbeforewaitingforacknowledgment.
ErrorControl
Errorcontrolisbotherrordetection anderrorcorrection. Itallowsthereceiver to
informthesenderofanyframeslostordamaged intransmission andcoordinates the
retransmission ofthoseframesbythesender.Inthedatalinklayer,thetermerrorcon­
trolrefersprimarily tomethodsoferrordetection andretransmission. Errorcontrolin
thedatalinklayerisoftenimplemented simply:Anytimeanerrorisdetected inan
exchange, specified framesareretransmitted. Thisprocessiscalledautomatic repeat
request(ARQ).
Errorcontrolinthedatalinklayerisbasedonautomatic
repeatrequest,whichistheretransmission ofdata.
11.3PROTOCOLS
Nowletusseehowthedatalinklayercancombineframing,flowcontrol,anderrorcontrol
toachievethedeliveryofdatafromonenodetoanother.Theprotocols arenormally imple­
mentedinsoftware byusingoneofthecommon programming languages. Tomakeour312 CHAPTER 11DATALINKCONTROL
discussions language-free, wehavewritteninpseudocode aversionofeachprotocolthat
concentrates mostlyontheprocedure insteadofdelvingintothedetailsoflanguage rules.
Wedividethediscussion ofprotocols intothosethatcanbeusedfornoiseless
(error-free) channels andthosethatcanbeusedfornoisy(error-creating) channels. The
protocols inthefirstcategory cannotbeusedinreallife,buttheyserveasabasisfor
understanding theprotocols ofnoisychannels. Figure11.5showstheclassifications.
Figure11.5Taxonomy ofprotocols discussed inthischapter
Simplest
Stop-and- WaitStop-and-Wait ARQ
Go-Hack-N ARQ
Selective RepeatARQ
Thereisadifference between theprotocols wediscusshereandthoseusedinreal
networks. Alltheprotocols wediscussareunidirectional inthesensethatthedataframes
travelfromonenode,calledthesender,toanothernode,calledthereceiver. Although
specialframes,calledacknowledgment (ACK)andnegative acknowledgment (NAK)
canflowintheopposite direction forflowanderrorcontrolpurposes, dataflowinonly
onedirection.
Inareal-life network, thedatalinkprotocols areimplemented asbidirectional;
dataflowinbothdirections. Intheseprotocols theflowanderrorcontrolinformation such
asACKsandNAKsisincluded inthedataframesinatechnique calledpiggybacking.
Becausebidirectional protocols aremorecomplex thanunidirectional ones,wechosethe
latterforourdiscussion. Iftheyareunderstood, theycanbeextended tobidirectional
protocols. Weleavethisextension asanexercise.
11.4NOISELESS CHANNELS
Letusfirstassumewehaveanidealchannelinwhichnoframesarelost,duplicated, or
corrupted. Weintroduce twoprotocols forthistypeofchannel. Thefirstisaprotocol
thatdoesnotuseflowcontrol;thesecondistheonethatdoes.Ofcourse,neitherhaserror
controlbecausewehaveassumed thatthechannelisaperfectnoiseless channel.
Simplest Protocol
Ourfirstprotocol, whichwecalltheSimplest Protocol forlackofanyothername,isone
thathasnofloworen'orcontrol.Likeotherprotocols wewilldiscussinthischapter,itisa
unidirectional protocolinwhichdataframesaretraveling inonlyonedirection-from theSECTION 11.4NOISELESS CHANNELS 313
sendertoreceiver. Weassumethatthereceivercanimmediately handleanyframeit
receives withaprocessing timethatissmallenoughtobenegligible. Thedatalink
layerofthereceiverimmediately removestheheaderfromtheframeandhandsthedata
packettoitsnetwork layer,whichcanalsoacceptthepacketimmediately. Inother
words,thereceivercanneverbeoverwhelmed withincoming frames.
Design
Thereisnoneedforflowcontrolinthisscheme.Thedatalinklayeratthesendersite
getsdatafromitsnetworklayer,makesaframeoutofthedata, and sendsit.Thedata
linklayeratthereceiversitereceivesaframefromitsphysicallayer,extractsdatafrom
theframe,anddeliversthedatatoitsnetworklayer.Thedatalinklayersofthesender
andreceiverprovidetransmission servicesfortheirnetworklayers.Thedatalinklayers
usetheservicesprovided bytheirphysicallayers(suchassignaling, multiplexing, and
soon)forthephysicaltransmission ofbits.Figure11.6showsadesign.
Figure11.6Thedesignofthesimplestprotocol withnofloworerrorcontrol
Sender Receiver
Network
Datalink
PhysicalGetdata Delivrdata
tI
I ...
tI
Sendframe Receiveframe
Dataframes-+-
I~~~~~~~ INetwork
Datalink
Physical
Repeatforever
Event:)\{otifu:ation from
physlclUiaye]"
Weneedtoelaborate ontheprocedure usedbybothdatalinklayers.Thesendersite
cannotsendaframeuntilitsnetworklayerhasadatapackettosend.Thereceiversite
cannotdeliveradatapackettoitsnetworklayeruntilaframearrives.Iftheprotocol is
implemented asaprocedure, weneedtointroduce theideaofeventsintheprotocol. The
procedure atthesendersiteisconstantly running;thereisnoactionuntilthereisarequest
fromthenetworklayer.Theprocedure atthereceiversiteisalsoconstantly rulming,but
thereisnoactionuntilnotification fromthephysicallayerarrives.Bothprocedures are
constantly runningbecausetheydonotknowwhenthecorresponding eventswilloccur.314 CHAPTER 11DATALINKCONTROL
Algorithms
Algorithm 11.1showstheprocedure atthesendersite.
Algorithm 11.1Sender-site algorithm forthesimplestprotocol
//SendtheframeIISleepuntilaneventoccurs
//Thereisapacket tosend
GetData()i
MakeFrame()i
SendFrame()i
}WaitForEvent()i
if(Event(RequestToSend»
{1while(true) IIRepeat forever
2 {
3
4
5
6
7
8
9
10}
Analysis Thealgorithm hasaninfiniteloop,whichmeanslines3to9arerepeated forever
oncetheprogram starts.Thealgorithm isanevent-driven one,whichmeansthatitsleeps(line3)
untilaneventwakesitup(line4).Thismeansthattheremaybeanundefined spanoftime
betweentheexecution ofline3andline4;thereisagapbetweentheseactions.Whentheevent,
arequestfromthenetworklayer,occurs,lines6though8areexecuted. Theprogramthenrepeats
theloopandagainsleepsatline3untilthenextoccurrence oftheevent.Wehavewritten
pseudocode forthemainprocess.Wedonotshowanydetailsforthemodules GetData, Make­
Frame,andSendFrame. GetDataO takesadatapacketfromthenetworklayer,MakeFrameO adds
aheaderanddelimiter flagstothedatapackettomakeaframe,andSendFrameO deliversthe
frametothephysicallayerfortransmission.
Algorithm 11.2showstheprocedure atthereceiversite.
Algorithm 11.2Receiver-site algorithm forthesimplestprotocol
//Deliverdatatonetwork layezReceiveFrame()i
ExtractData()i
DeliverData ()i
}1while(true) IIRepeat forever
2 {
3WaitForEvent()i IISleepuntilaneventoccurs
4if(Event(ArrivalNotification» IIData framearrived
5 {
6
7
8
9
10}
Analysis Thisalgorithm hasthesameformatasAlgorithm 11.1,exceptthatthedirection of
theframesanddataisupward.Theeventhereisthearrivalofadataframe.Aftertheevent
occurs,thedatalinklayerreceivestheframefromthephysicallayerusingtheReceiveFrameO
process,extractsthedatafromtheframeusingtheExtractDataO process,anddeliversthedatato
thenetworklayerusingtheDeliverDataO process.Here,wealsohavean event-driven algorithm
becausethealgorithm neverknowswhenthedataframewillarrive.SECTION 11.4NOISELESS CHANNELS 315
Example 11.1
Figure11.7showsanexample ofcommunication usingthisprotocol.Itisverysimple.The
sendersendsasequence offrameswithouteventhinkingaboutthereceiver. Tosendthreeframes,
threeeventsoccuratthesendersiteandthreeeventsatthereceiversite.Notethatthedataframes
areshownbytiltedboxes;theheightoftheboxdefinesthetransmission timedifference between
thefirstbitandthelastbitintheframe.
Figure11.7FlowdiagramforExample 11.1
Sender ReceiverGJ [i""1
I I
I I
Request~r=am:-e---------1 .
I ~Arri"al
Request~ratne ~
: ~Arr~
Request~ame :
: ~Arrival
t t
Time Time
Stop-and- WaitProtocol
Ifdataframesarriveatthereceiversitefasterthantheycanbeprocessed, theframes
mustbestoreduntiltheiruse.Normally, thereceiver doesnothaveenoughstorage
space,especially ifitisreceiving datafrommanysources.Thismayresultineitherthe
discarding offramesordenialofservice.Topreventthereceiverfrombecoming over­
whelmed withframes,we somehow needtotellthesendertoslowdown.Theremustbe
feedback fromthereceivertothesender.
Theprotocol wediscussnowiscalledtheStop-and- WaitProtocol becausethe
sendersendsoneframe,stopsuntilitreceivesconfirmation fromthereceiver(okayto
goahead),andthensendsthenextframe.Westillhaveunidirectional communication
fordataframes,butauxiliary ACKframes(simpletokensofacknowledgment) travel
fromtheotherdirection. Weaddflowcontroltoourprevious protocol.
Design
Figure11.8illustrates themechanism. Comparing thisfigurewithFigure11.6,wecan
seethetrafficontheforwardchannel(fromsendertoreceiver) andthereversechannel.
Atanytime,thereiseitheronedataframeontheforwardchanneloroneACKframeon
thereversechannel.Wetherefore needahalf-duplex link.
Algorithms
Algorithm 11.3isforthesendersite.316 CHAPTER 11DATALINKCONTROL
Figure11.8DesignofStop-and- WaitProtocol
Sender Receiver
Network
Datalink:
PhysicalDeliver
Gettata data..
T I
..I ~I
RI.TRI.,TecelveSend ecelVe Send
frame frame frame frame
Dataframe
I~~ I
~DACKframeNetwork
Datalink
Physical
Repeatforever
Algorithm 11.3Sender-site algorithm forStop-and- WaitProtocol
Iwhile(true)
canSend=true
IISleepuntilaneventoccurs
ANDcanSend}
IISleepuntilaneventoccurs
/1AnACKhasarrivedI/Sendthedataframe
I/cannot senduntil ACKarrivesIIRepeat forever
IIAllow thefirstframetogo
I/Receive theACK£r~e ReceiveFrame();
canSend ~true;GetDataO i
MakeFrame();
SendFrame()i
canSend=false;
}}
WaitForEvent()i
if(Event(ArrivalNotification)
{{
WaitForEvent()i
if(Event(RequestToSend)
{1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18}
Analysis Heretwoeventscanoccur:arequestfromthenetworklayeroranarrivalnotifica­
tionfromthephysicallayer.Theresponses totheseeventsmustalternate. Inotherwords,aftera
frameissent,thealgorithm mustignoreanothernetwork layerrequestuntilthatframeisSECTION 1I.4NOISELESS CHANNELS 317
acknowledged. Weknowthattwoarrivaleventscannothappenoneafteranotherbecausethe
channeliserror-free anddoesnotduplicate theframes.Therequests fromthenetworklayer,
however, mayhappenoneafteranotherwithoutanarrivaleventinbetween. Weneedsomehow to
preventtheimmediate sendingofthedataframe.Although thereareseveralmethods, wehave
usedasimplecanSendvariablethatcaneitherbetrueorfalse.Whenaframeissent,thevariable
issettofalsetoindicatethatanewnetworkrequestcannotbesentuntilcanSendistrue.Whenan
ACKisreceived, canSendissettotruetoallowthesendingofthenextframe.
Algorithm 11.4showstheprocedure atthereceiversite.
Algorithm 11.4Receiver-site algorithm forStop-and- WaitProtocol
WaitForEvent(); IISleepuntilaneventoccurf
if(Event(ArrivalNotification)} IIData framearrives
{
/IDeliver datatonetwork layex
IISend anACKframeIIRepeat forever
ReceiveFrame(};
ExtractData(}i
Deliver(data};
SendFrame();
}1while(true)
2 {
3
4
5
6
7
8
9
10
11}
Analysis ThisisverysimilartoAlgorithm 11.2withoneexception. Afterthedataframe
arrives,thereceiversendsanACKframe(line9)toacknowledge thereceiptandallowthesender
tosendthenextframe.
Example 11.2
Figure11.9showsanexampleofcommunication usingthisprotocol.Itisstillverysimple.The
sendersendsoneframeandwaitsforfeedback fromthereceiver. WhentheACKarrives,the
sendersendsthenextframe.Notethatsendingtwoframesintheprotocolinvolvesthesenderin
foureventsandthereceiverintwoevents.
Figure11.9Flowdiagramfor Example 1I.2
Sender
INA]Receiver
rIJ
ArrivalFrame
Arrival :
IRequest
ReqUest~~ :I Arrival
I1. AC'i..
Arrival' I
• 1
t t
Time Time318 CHAPTER 11DATALINKCONTROL
11.5NOISYCHANNELS
Although theStop-and- WaitProtocol givesusanideaofhowtoaddflowcontroltoits
predecessor, noiseless channels arenonexistent. Wecanignoretheerror(aswesome­
timesdo),orweneedtoadderrorcontroltoourprotocols. Wediscussthreeprotocols
inthissectionthatuseerrorcontrol.
Stop-and- WaitAutomatic RepeatRequest
Ourfirstprotocol, calledtheStop-and- WaitAutomatic RepeatRequest (Stop-and­
WaitARQ),addsasimpleerrorcontrolmechanism totheStop-and- WaitProtocol. Let
usseehowthisprotocol detectsandcorrectserrors.
Todetectandcorrectcorrupted frames,weneedtoaddredundancy bitstoourdata
frame(seeChapter10).Whentheframearrivesatthereceiversite,itischeckedandif
itiscorrupted, itissilentlydiscarded. Thedetection oferrorsinthisprotocol ismani­
festedbythesilenceofthereceiver.
Lostframesaremoredifficulttohandlethancorrupted ones.Inourprevious proto­
cols,therewasnowaytoidentifyaframe.Thereceived framecouldbethecorrectone,
oraduplicate, oraframeoutoforder.Thesolutionistonumbertheframes.Whenthe
receiverreceives adataframethatisoutoforder,thismeansthatframeswereeither
lostorduplicated.
Thecomlpted andlostframesneedtoberesentinthisprotocol. Ifthereceiverdoes
notrespondwhenthereisanerror,howcanthesenderknowwhichframetoresend?To
remedythisproblem, thesenderkeepsacopyofthesentframe.Atthesametime,itstarts
atimer.IfthetimerexpiresandthereisnoACKforthesentframe,theframeisresent,the
copyisheld,andthetimerisrestarted. Sincetheprotocolusesthestop-and-wait mecha­
nism,thereisonlyonespecificframethatneedsanACKeventhoughseveralcopiesof
thesameframecanbeinthenetwork.
Errorcorrection inStop-and-Wait ARQisdonebykeepingacopyofthesentframe
andretransmitting ofthe frame whenthetimerexpires.
SinceanACKframecanalsobecorrupted andlost,ittooneedsredundancy bits
andasequence number.TheACKframeforthisprotocol hasasequence numberfield.
Inthisprotocol, thesendersimplydiscards acorrupted ACKframeorignoresan
out-of-order one.
Sequence Numbers
Aswediscussed, theprotocol specifies thatframesneedtobenumbered. Thisisdone
byusingsequence numbers. Afieldisaddedtothedataframetoholdthesequence
numberofthatframe.
Oneimportant consideration istherangeofthesequence numbers. Sincewewant
tominimize theframesize,welookforthesmallestrangethatprovides unambiguousSECTION 11.5NOISYCHANNELS 319
communication. Thesequence numbers ofcoursecanwraparound.Forexample, ifwe
decidethatthefieldismbitslong,thesequence numbers startfrom0,goto2m-1,and
thenarerepeated.
Letusreasonouttherangeofsequence numbers weneed.Assumewehaveusedxas
asequence number; weonlyneedtousex+1afterthat.Thereisnoneedforx+2.To
showthis,assumethatthesenderhassenttheframenumbered x.Threethingscanhappen.
1.Theframearrivessafeandsoundatthereceiversite;thereceiversendsanacknowl­
edgment. Theacknowledgment arrivesatthesendersite,causingthesendertosend
thenextframenumbered x+1.
2.Theframearrivessafeandsoundatthereceiversite;thereceiversendsanacknowl­
edgment, buttheacknowledgment iscorrupted orlost.Thesenderresendstheframe
(numbered x)afterthetime-out. Notethattheframehereisaduplicate. Thereceiver
canrecognize thisfactbecauseitexpectsframex+Ibutframexwasreceived.
3.Theframeiscorrupted orneverarrivesatthereceiversite;thesenderresendsthe
frame(numbered x)afterthetime-out.
Wecanseethatthereisaneedforsequence numbersxandx+Ibecausethereceiver
needstodistinguish between case1andcase2.Butthereisnoneedforaframetobe
numbered x+2.Incase1,theframecanbenumbered xagainbecauseframesxandx+1
areacknowledged andthereisnoambiguity ateithersite.Incases2and3,thenewframe
isx+I,notx+2.Ifonlyxandx+1areneeded,wecanletx=0andx+I==1.This
meansthatthesequence is0,I,0,I,0,andsoon.Isthispatternfamiliar? Thisismodulo-2
arithmetic aswesawinChapter10.
InStop-and- WaitARQ~weusesequence numbers tonumbertheframes.
Thesequence numbers arebasedonmodul0-2 arithmetic.
Acknowledgment Numbers
Sincethesequence numbers mustbesuitableforbothdataframesandACKframes,we
usethisconvention: Theacknowledgment numbers alwaysannounce thesequence
numberofthenextframeexpected bythereceiver. Forexample, ifframe0hasarrived
safeandsound,thereceiver sendsanACKframe with acknowledgment 1(meaning
frame1isexpected next).Ifframe1hasarrivedsafeandsound,thereceiversendsan
ACKframewithacknowledgment 0(meaning frame0isexpected).
InStop-and-WaitARQ~ theacknowledgment numberalwaysannounces in
modul0-2 arithmetic thesequence numberofthenextframeexpected.
Design
Figure11.10showsthedesignoftheStop-and- WaitARQProtocol. Thesendingdevice
keepsacopyofthelastframetransmitted untilitreceives anacknowledgment forthat
frame.AdataframesusesaseqNo(sequence number); anACKframeusesanackNo
(acknowledgment number). Thesenderhasacontrolvariable, whichwecallSn(sender,
nextframetosend),thatholdsthesequence numberforthenextframetobesent(0or1).320CHAPTER 11DATALINKCONTROL
Figure11.10DesignoftheStop-and-WaitARQ Protocol
SIINextframe
J;0send
r---r--- ---r---,'0'101'0'···L ~___ ___1 J
Sender Receiver
Network
Datalink
PhysicalDataframe ACKframeDeliver'1* *"-rr- Getdata data
I seqNo ackNo ...
T I
•I ...I
RI.TRI.T
ecelveSend ecelve Send
frame frame frame frame
I!liM ~ I
~~Network
Datalink
Physical
Event:IRequestfromInetworklayer
I0Repeatforevert
.~--~--
,.C;;~AIgmnhm forsender'site.-Time-outI
..;._,,,:,,:,,'.:" ,Event:
1..
I
Et:INotification fromIven.physical layerRepeatforever
.".'
~-.--.AJ:go.rlt,bm forreceiverSite....
1..
I
Et:INotification fromIven.h'allPySlCayer
Thereceiverhasacontrolvariable, whichwecallRn(receiver, nextframeexpected),
thatholdsthenumberofthenextframeexpected. Whenaframeissent,thevalueofSn
isincremented (modulo-2), whichmeansifitis0,itbecomes 1andviceversa.Whena
frameisreceived, thevalueofRnisincremented (modulo-2), whichmeansifitis0,it
becomes 1andviceversa.Threeeventscanhappenatthesendersite;oneeventcan
happenatthereceiversite.Variable Snpointstotheslotthatmatches thesequence
numberoftheframethathasbeensent,butnotacknowledged; Rnpointstotheslotthat
matchesthesequence numberoftheexpected frame.
Algorithms
Algorithm 11.5isforthesendersite.
Algorithm 11.5Sender-site algorithm forStop-and- WaitARQ
WaitForEvent();1n=0;
2anSend=true;
3hile(true)
4 {
5IIFrame 0should besentfirst
IIAllowthefirstrequest togo
IIRepeat forever
IISleepuntilaneventoccursSECTION 11.5NOISYCHANNELS 321
//Resend acopycheck//Copyisnotneeded
IIThetimerexpired//TheseqNoisSn
//Keep copy
IISleep
IIAnACKhasarrived
//Receive theACEfram
80)//Valid ACK
Stoptimer{};
PurgeFrame(Sn_l);
canSend=true;
}ReceiveFrame(ackNo);
if(notcorrupted ANDackNo
{
}GetData()i
MakeFrame (Sn);
StoreFrame(Sn);
SendFrame(Sn) ;
StartTimerO;
Sn=Sn+1;
canSend=false;
if(Event(TimeOUt)
{
StartTimer();
ResendFrame(Sn_l);
}}
WaitForEvent();
if(Event(ArrivaINotification)
{Algorithm 11.5Sender-site algorithm forStop-and- WaitARQ(continued)
6if(Event(RequestToSend) ANDcanSend)
7 {
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33}
Analysis Wefirstnoticethepresence ofSn'thesequence numberofthenextframetobesent.
Thisvariableisinitialized once(line1),butitisincremented everytimeaframeissent(line13)in
preparation forthenextframe.However, sincethisismodulo-2 arithmetic, thesequence numbers are
0,1,0,1,andsoon.Notethattheprocessesinthefirstevent(SendFrame, StoreFrame, andPurge­
Frame)useanSndefining theframesentout.Weneedatleastonebuffertoholdthisframeuntil
wearesurethatitisreceivedsafeandsound.Line10showsthatbeforetheframeissent,itisstored.
Thecopyisusedforresending acorruptorlostframe.WearestillusingthecanSend variabletopre­
ventthenetworklayerfrommakingarequestbeforetheprevious frameisreceivedsafeandsound.If
theframeisnotcorrupted andtheackNooftheACKframematchesthesequence numberofthenext
frametosend,westopthetimerandpurgethecopyofthedataframewesaved.Otherwise, wejust
ignorethiseventandwaitforthenexteventtohappen.Aftereachframeissent,atimerisstarted.
Whenthetimerexpires(line28),theframeisresentandthetimerisrestarted.
Algorithm 11.6showstheprocedure atthereceiversite.
Algorithm 11.6Receiver-site algorithm forStop-and- WaitARQProtocol
1=0;
2hile(true)
3 {
4WaitForEvent();IIFrame 0expected toarrivefirs
IISleepuntilaneventoccurs322CHAPTER 11DATALINKCONTROL
Algorithm 11.6Receiver-site algorithm forStop-and- WaitARQProtocol (continued)
5
6
7
8
9
10
11
12
13
14
15
16
17
18}if(Event(Arriva1Notification»
{
ReceiveFrame()i
if(corrupted(frame»i
sleep()i
if(seqNo ;;;;:;;;;Rn)
{
ExtractData();
De1iverData()i
Ru;;;;Ru+1;
}
SendFrame (Rn);
}//Data framearrives
//Valid dataframe
//Deliver data
//Send anACK
Analysis Thisisnoticeably differentfromAlgorithm 11.4.First,allarriveddataframesthatare
corrupted areignored.IftheseqNooftheframeistheonethatisexpected (Rn),theframeis
accepted, thedataaredelivered tothenetworklayer,andthevalueofRnisincremented. How­
ever,thereisonesubtlepointhere.Evenifthesequence numberofthedataframedoesnotmatch
thenextframeexpected, anACKissenttothesender.ThisACK,however, justreconfirms the
previous ACKinsteadofconfirming theframereceived. Thisisdonebecause thereceiver
assumesthattheprevious ACKmighthavebeenlost;thereceiverissendingaduplicate frame.
TheresentACKmaysolvetheproblembeforethetime-outdoesit.
Example 11.3
Figure11.11showsanexample ofStop-and-Wait ARQ.Frameaissentandacknowledged.
Frame1islostandresentafterthetime-out. Theresentframe1isacknowledged andthetimer
stops.Frameaissentandacknowledged, buttheacknowledgment islost.Thesenderhasnoidea
iftheframeortheacknowledgment islost,soafterthetime-out, itresendsframe0,whichis
acknowledged.
Efficiency
TheStop-and-WaitARQ discussed intheprevious sectionisveryinefficient ifourchan­
nelisthickandlong.Bythick,wemeanthatourchannelhasalargebandwidth; bylong,
wemeantheround-trip delayislong.Theproductofthesetwoiscalledthebandwidth­
delayproduct, aswediscussed inChapter3.Wecanthinkofthechannelasapipe.The
bandwidth-delay productthenisthevolumeofthepipeinbits.Thepipeisalwaysthere.
Ifwedonotuseit,weareinefficient. Thebandwidth-delay productisameasureofthe
numberofbitswecansendoutofoursystemwhilewaitingfornewsfromthereceiver.
Example 11.4
Assumethat,inaStop-and-Wait ARQ system,thebandwidth ofthelineis1Mbps,and1bit
takes20mstomakearoundtrip.Whatisthebandwidth-delay product?Ifthesystemdataframes
are1000bitsinlength,whatistheutilization percentage ofthelink?
Solution
Thebandwidth-delay productisSECTION 11.5NOISYCHANNELS 323
Figure11.11FlowdiagramforExample 11.3
Sender Receiver
Rn
~9_ET9Ihql!J ArrivalRn
:~~[nQIrIqUJ Arrival
Rn
~o:-(:-o+o~-(: Arrival
1__1__:_J...!.1_!.._.!
Discard, duplicatem
I
I
I
ACK1]
---------1
1
1
t
Time5n
Request f9"1iJ-9J]~3iff~Sn
Request@rU9I(~qn~
5n
Time-out f9"rtr9n_:_qff~
StopStartcp
Stopl
Stop
StartIt
5"
Time-out ItTime-out:-6~i+f~0i"1-'restart ,__!._l£J__'__1__1Time-out
restart
Thesystemcansend20,000bitsduringthetimeittakesforthedatatogofromthesendertothe
receiverandthenbackagain.However, thesystemsendsonly1000bits.Wecansaythatthelink
utilization isonly1000/20,000, or5percent.Forthisreason,foralinkwithahighbandwidth or
longdelay,theuseofStop-and- WaitARQwastesthecapacityofthelink.
Example 11.5
Whatistheutilization percentage ofthelinkinExample 11.4ifwehaveaprotocolthatcansend
upto15framesbeforestopping andworrying abouttheacknowledgments?
Solution
Thebandwidth-delay productisstill20,000bits.Thesystemcansendupto15framesor
15,000bitsduringaroundtrip.Thismeanstheutilization is15,000/20,000, or75percent.Of
course,iftherearedamaged frames,theutilization percentage ismuchlessbecauseframes
havetoberesent.
Pipelining
Innetworking andinotherareas,ataskisoftenbegunbeforetheprevioustaskhasended.
Thisisknownaspipelining. Thereisnopipelining inStop-and-Wait ARQbecausewe
needtowaitforaframetoreachthedestination andbeacknowledged beforethenext
framecanbesent.However, pipelining doesapplytoournexttwoprotocols because324CHAPTER 11DATALINKCONTROL
severalframescanbesentbeforewereceivenewsabouttheprevious frames.Pipelining
improves theefficiency ofthetransmission ifthenumberofbitsintransition islargewith
respecttothebandwidth-delay product.
Go-Back-N Automatic RepeatRequest
Toimprove theefficiency oftransmission (fillingthepipe),multiple framesmustbein
transition whilewaitingforacknowledgment. Inotherwords,weneedtoletmorethan
oneframebeoutstanding tokeepthechannel busywhilethesenderiswaitingfor
acknowledgment. Inthissection,wediscussoneprotocol thatcanachievethisgoal;in
thenextsection,wediscussasecond.
ThefirstiscalledGo-Back-N Automatic RepeatRequest (therationale forthe
namewillbecome clearlater).Inthisprotocol wecansendseveralframesbefore
receiving acknowledgments; wekeepacopyoftheseframesuntiltheacknowledg­
mentsarrive.
Sequence Numbers
Framesfromasendingstationarenumbered sequentially. However, because weneed
toincludethesequence numberofeachframeintheheader,weneedtosetalimit.If
theheaderoftheframeallowsmbitsforthesequence number, thesequence numbers
rangefrom0to2m-1.Forexample, ifmis4,theonlysequence numbers are0
through 15inclusive. However, wecanrepeatthesequence. Sothesequence num­
bersare
0,1,2,3,4,5,6, 7,8,9,10,11,12,13,14,15,0,1,2,3,4,5,6,7,8,9,10, 11,...
Inotherwords,thesequence numbers aremodulo-2m.
IntheGo-Back-N Protocol, thesequence numbers aremodulo1!",
wheremisthesizeofthesequence numberfieldinbits.
SlidingWindow
Inthisprotocol (andthenext),theslidingwindow isanabstractconceptthatdefinesthe
rangeofsequence numbers thatistheconcernofthesenderandreceiver. Inotherwords,
thesenderandreceiverneedtodealwithonlypartofthepossiblesequence numbers. The
rangewhichistheconcernofthesenderiscalledthesendslidingwindow; therangethat
istheconcernofthereceiveriscalledthereceiveslidingwindow. Wediscussbothhere.
Thesendwindowisanimaginary boxcovering thesequence numbers ofthedata
frameswhichcanbeintransit.Ineachwindowposition, someofthesesequence numbers
definetheframesthathavebeensent;othersdefinethosethatcanbesent.Themaximum
sizeofthewindowis2m-1forreasonsthatwediscusslater.Inthischapter,weletthesize
befixedandsettothemaximum value,butwewillseeinfuturechaptersthatsomeprotocols
mayhaveavariablewindowsize.Figure11.12showsaslidingwindowofsize15(m=4).
Thewindow atanytimedividesthepossible sequence numbers intofourregions.
Thefirstregion,fromthefarlefttotheleftwallofthewindow, definesthesequenceSECTION 11.5NOISYCHANNELS 325
Figure11.12 SendwindowforGo-Back-N ARQ
SfSendwindow,
~'~d;"g '"m,
:)Xf)!~r(5~~Z;! 31415!6
Framesalready
acknowledgedFramessent,butnot
acknowledged (outstanding)Framesthatcanbesent,
butnotreceived fromupperlayerFramesthat
cannotbesent
Sendwindow, sizeSSilC'"2m-1
a.Sendwindowbeforesliding
5"
---w:±J:m:w:L:l12 i13i14iISi0CIl
b.Sendwindowaftersliding
numbers belonging toframesthatarealreadyacknowledged. Thesenderdoesnot
worryabouttheseframesand keeps nocopiesofthem.Thesecondregion,coloredin
Figure11.12a,definestherangeofsequence numbers belonging totheframesthatare
sentandhaveanunknown status.Thesenderneedstowaittofindoutiftheseframes
havebeenreceived orwerelost.Wecalltheseoutstanding frames.Thethirdrange,
whiteinthefigure,definestherangeofsequence numbers forframesthatcanbesent;
however, thecorresponding datapacketshavenotyetbeenreceived fromthenetwork
layer.Finally,thefourthregiondefinessequence numbers thatcannotbeuseduntilthe
windowslides,asweseenext.
Thewindowitselfisanabstraction; threevariables defineitssizeandlocationat
anytime.Wecallthesevariables Sf(sendwindow,thefirstoutstanding frame),Sn(send
window,thenextframetobesent),andSsize(sendwindow,size).ThevariableSfdefines
thesequence numberofthefirst(oldest)outstanding frame.Thevariable Snholdsthe
sequence numberthatwillbeassigned tothenextframetobesent.Finally,thevariable
Ssizedefinesthesizeofthewindow,whichisfixedinourprotocol.
Thesendwindowisanabstract conceptdefininganimaginary
boxofsize2m~1withthreevariables: SpSmandSsize'
Figure11.12bshowshowasendwindowcanslideoneormoreslotstotheright
whenanacknowledgment arrivesfromtheotherend.Aswewillseeshortly,theacknowl­
edgments inthisprotocol arecumulative, meaning thatmorethanoneframecanbe
acknowledged byanACKframe.InFigure11.12b,frames0,I,and2areacknowledged,
sothewindowhasslidtotherightthreeslots.Note that thevalueofSfis3becauseframe3
isnowthefirstoutstanding frame.
Thesendwindowcanslideoneormoreslotswhenavalidacknowledgment arrives.326CHAPTER 11DATALINKCONTROL
Thereceivewindowmakessurethatthecorrectdataframesarereceived andthat
thecorrectacknowledgments aresent.ThesizeofthereceivewindowisalwaysI.The
receiverisalwayslookingforthearrivalofaspecificframe.Anyframearrivingoutof
orderisdiscarded andneedstoberesent.Figure11.13showsthereceivewindow.
Figure11.13 ReceivewindowforGo-Back-N ARQ
RIIReceivewindow,nextframeexpected
"---,---r---,---,---,---~---,---,---,---,---,---,---,---,---,---,---,---,---,---,,13I14IISI0I1I2 , 3 I4I5I6I7I8 , 9 I10III,12,13I14,15I0I1Il .I J l l 1 "' J. l 1 1 .1 1~__1 1 1 .L J J J ~
Framesalreadyreceived Framesthatcannotbereceived
andacknowledged untilthewindowslides
a.Receivewindow
RII
"---,- - -,---,- --,---,---,-- -~- --,---,---,---,- --,---"---,---,- --"- --,- - -,---,---,
,13I14I15I0I1I2 ' 3 ' 4 I5I6 ' 7 I8 ' 9 I10IIII12I13,14I15I0I1 ,~ J J ~ J. 1 1 ~ .1. 1 .1 ... 1 1 1 1 1 J. .J .I ~
b.Window aftersliding
Thereceivewindowisanabstractconceptdefininganimaginary
boxofsize1withonesinglevariableRn•Thewindowslides
whenacorrectframehasarrived;slidingoccursoneslotatatime.
NotethatweneedonlyonevariableRn(receivewindow, nextframeexpected) to
definethisabstraction. Thesequence numbers totheleftofthewindowbelongtothe
framesalreadyreceived andacknowledged; thesequence numbers totherightofthis
windowdefinetheframesthatcannotbereceived. Anyreceivedframewithasequence
numberinthesetworegionsisdiscarded. Onlyaframewithasequence numbermatch­
ingthevalueofRnisaccepted andacknowledged.
Thereceivewindowalsoslides,butonlyoneslotatatime.Whenacorrectframe
isreceived (andaframeisreceived onlyoneatatime),thewindowslides.
Timers
Although therecanbeatimerforeachframethatissent,inourprotocol weuseonly
one.Thereasonisthatthetimerforthefirstoutstanding framealwaysexpiresfirst;we
sendalloutstanding frameswhenthistimerexpires.
Acknowledgment
Thereceiversendsapositiveacknowledgment ifaframehasarrivedsafeandsound
andinorder.Ifaframeisdamaged orisreceived outoforder,thereceiverissilentand
willdiscardallsubsequent framesuntilitreceivestheoneitisexpecting. ThesilenceofSECTION 11.5NOISYCHANNELS 327
thereceivercausesthetimeroftheunacknowledged frameatthesendersitetoexpire.
This,inturn,causesthesendertogobackandresendallframes,beginning withtheone
withtheexpiredtimer.Thereceiverdoesnothavetoacknowledge eachframereceived.
Itcansendonecumulative acknowledgment forseveralframes.
Resending aFrame
Whenthetimerexpires,thesenderresendsalloutstanding frames.Forexample, suppose
thesenderhasalreadysentframe6,butthetimerforframe3expires.Thismeansthat
frame3hasnotbeenacknowledged; thesendergoesbackandsendsframes3,4,5,and6
again.ThatiswhytheprotocoliscalledGo-Back-N ARQ.
Design
Figure11.14showsthedesignforthisprotocol. Aswecansee,multiple framescan
beintransitintheforwarddirection, andmUltiple acknowledgments inthereverse
direction. TheideaissimilartoStop-and- WaitARQ;thedifference isthatthesend
Figure11.14DesignofGo-Back-N ARQ
SNext
!i~nd
IiI!
Sender Receiver
Network
Datalink
PhysicalDataframe ACKframeDeliver
Getdata '1 ~ data
I seqNo ackNo ...,.I
...I ...I
RI,T I,t
ecelveSend ReceIve Send
frame frame frame frame
•Ii&f&§,M¥ !'¥§w,'#,M# I
I -+--~ ~ I:::l\'aINetwork
Datalink
Physical
Event:
Repeatforever
Event:Repeatforever328CHAPTER 11DATALINKCONTROL
windowallowsustohaveasmanyframesintransition asthereareslotsinthesend
window.
SendWindowSize
Wecannowshowwhythesizeofthesendwindow mustbelessthan2m.Asan
example, wechoosem=2,whichmeansthesizeofthewindowcanbe2m-1,or3.
Figure11.15compares awindowsizeof3againstawindowsizeof4.Ifthesizeof
thewindowis3(lessthan22)andallthreeacknowledgments arelost,theframe°
timerexpiresandallthreeframesareresent.Thereceiverisnowexpecting frame3,
notframe0,sotheduplicate frameiscorrectly discarded. Ontheotherhand,ifthe
sizeofthewindowis4(equalto22)andallacknowledgments arelost,thesender
willsendaduplicate offrame0.However, thistimethewindowofthereceiver
expectstoreceiveframe0,soitacceptsframe0,notasaduplicate, butasthefirst
frameinthenextcycle.Thisisanerror.
Figure11.15WindowsizeforGo-Back-N ARQ
Sender Receiver Sender Receiver
a.Window size<2mb.Window size=2m
InGo-Back-N ARQ,thesizeofthesendwindowmustbelessthanr;
thesizeofthereceiverwindowisalways1.
Algorithms
Algorithm 11.7showstheprocedure forthesenderinthisprotocol.SECTION 11.5NOISYCHANNELS 329
Algorithm 11.7Go-Back-N senderalgorithm
if{Event{ArrivalNotification» IIACKarrives
{~hile(true)
{
WaitForEvent();
if(Event(RequestToSend»
{
if{Event{TimeOut»
{
StartTimer() ;
Temp=Sf;
while{Temp <Sn);
{
SendFrame(Sf);
Sf=Sf+1;
}//Apacket tosend//Repeat forever
IIIfwindowisfull
liThetimerexpiresIIIfavalidACKReceive (ACK);
if{corrupted{ACK»
Sleep();
if{{ackNo>sf)&&{ackNO<=Sn»
While(Sf <=ackNo)
{
PurgeFrame{Sf);
Sf=Sf+1;
}
StopTimer();if(Sn-Sf >=Sw)
Sleep();
GetData() ;
MakeFrame (Sn);
StoreFrame (Sn);
SendFrame(Sn) ;
Sn=Sn+1;
if(timer notrunning)
StartTimer{);
}}}1Sw=2'"-1;
2Sf=0;
3Sn=OJ
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45}
Analysis Thisalgorithm firstinitializes threevariables. UnlikeStop-and- WaitARQ,thispro­
tocolallowsseveralrequestsfromthenetworklayerwithouttheneedforothereventstooccur;
wejustneedtobesurethatthewindowisnotfull(line12).Inourapproach, ifthewindowisfull,330CHAPTER J1DATALINKCONTROL
therequestisjustignoredandthenetworklayerneedstotryagain.Someimplementations useother
methods suchasenabling ordisabling thenetworklayer.Thehandling ofthearrivaleventismore
complex thanintheprevious protocol. Ifwereceiveacorrupted ACK,weignoreit.IftheadeNa
belongstooneoftheoutstanding frames,weusealooptopurgethebuffersandmovetheleftwall
totheright.Thetime-outeventisalsomorecomplex. Wefirststartanewtimer.Wethenresendall
outstanding frames.
Algorithm 11.8istheprocedure atthereceiversite.
Algorithm 11.8Go-Back-N receiveralgorithm
if(Event{ArrivalNotification» /Dataframearrives
(WaitForEvent();
IIIfexpected frameIIRepeat forever
IIDeliver data
IISlide windowDeliverData()i
Ru=~+1;
SendACK (Ru);
}Receive(Frame);
if(corrupted(Frame»
Sleep(};
if(seqNo ==Ru}
{
}1~n=0;
2
3~hile(true)
4 {
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19}
Analysis Thisalgorithm issimple.Weignoreacorruptorout-of-order frame.Ifaframe
arriveswithanexpected sequence number,wedeliverthedata,updatethevalueofRn,andsend
anACKwiththeackNashowingthenextframeexpected.
Example 11.6
Figure11.16showsanexample ofGo-Back -N.Thisisanexample ofacasewheretheforward
channelisreliable,butthereverseisnot.Nodataframesarelost,butsomeACKsaredelayedand
oneislost.Theexamplealsoshowshowcumulative acknowledgments canhelpifacknowledgments
aredelayedorlost.
Afterinitialization, therearesevensenderevents.Request eventsaretriggered bydata
fromthenetwork layer;arrivaleventsaretriggered byacknowledgments fromthephysical
layer.Thereisnotime-out eventherebecause alloutstanding framesareacknowledged
beforethetimerexpires.Notethatalthough ACK2islost,ACK3servesasbothACK2and
ACK3.
Therearefourreceiver events,alltriggered bythearrivalofframesfromthephysical
layer.SECTION 11.5NOISYCHANNELS 331
Figure11.16 FlowdiagramforExample 11.6
Arrival
Request
Reque~tRI1
ArrivalL....L---'-.L...j,..,J---'------l.......JReceiverL!l RI1
~I1213141516171 Initial
i--------.::::?,.j-~~.!J2~l±i~l2J Arrival
:-----==::;~+-..-@1Itill:ffiill~ Arrival
TimeSender
LP
ArrivalArrivalSf~
Initial~-7r:lo"l 1--'1-'21
Sf
Reque~t P.O~I""2.3"4'1"'5"'1""'61- 7'0-'-1'2'
RequestStart
timer
l-
Stop
timer
Example 11.7
Figure11.17showswhathappenswhenaframeislost.Frames0,1,2,and3aresent.However,
frame1islost.Thereceiverreceivesframes2and3,buttheyarediscarded becausetheyare
received outoforder(frame1isexpected). Thesenderreceives noacknowledgment about
frames1,2,or3.Itstimerfinallyexpires.Thesendersendsalloutstanding frames(1,2,and3)
becauseitdoesnotknowwhatiswrong.Notethattheresending offramesl,2,and3isthe
response toonesingleevent.Whenthesenderisresponding tothisevent,itcannotacceptthe
triggering ofotherevents.ThismeansthatwhenACK2arrives,thesenderisstillbusywithsend­
ingframe3.Thephysica1layer mustwaituntilthiseventiscompleted andthedatalinklayer
goesbacktoitssleepingstate.Wehaveshownaverticallinetoindicatethedelay.Itisthesame
storywithACK3;butwhenACK3arrives,thesenderisbusyresponding toACK2.Ithappens
againwhenACK4arrives.Notethatbeforethesecondtimerexpires,alloutstanding frameshave
beensentandthetimerisstopped.
Go-Back-N ARQVersusStop-and- WaitARQ
Thereadermayfindthatthereisasimilarity betweenGo-Back-N ARQandStop-and-Wait
ARQ.WecansaythattheStop-and-WaitARQ Protocol isactuallyaGo-Back-N ARQ
inwhichthereareonlytwosequence numbers andthesendwindowsizeis1.Inother
words,m=1,2m-1=1.InGo-Back-N ARQ,wesaidthattheadditionismodulo-2m;in
Stop-and- WaitARQitis2,whichisthesameas2mwhenm=1.332CHAPTER 11DATALINKCONTROL
Figure11.17FlowdiagramforExample 11.7
Sender
L!JStart
timerSf~
Initial~
SfSn
Request 0I23456701Receiver
crJRn
:
~Initial
I
I
r:q;::::::::-A---_: Rn1Frame0
I
Stop-and-WaitARQ isaspecialcaseofGo-Back-N ARQ
inwhichthesizeofthesendwindowis1.
Selective RepeatAutomatic RepeatRequest
Go-Back-N ARQsimplifies theprocessatthereceiversite.Thereceiverkeepstrackof
onlyonevariable, andthereisnoneedtobufferout-of-order frames;theyaresimply
discarded. However, thisprotocol isveryinefficient foranoisylink.Inanoisylinka
framehasahigherprobability ofdamage, whichmeanstheresending ofmultipleframes.
Thisresending usesupthebandwidth andslowsdownthetransmission. Fornoisylinks,
thereisanothermechanism thatdoesnotresendNframeswhenjustoneframeisdam­
aged;onlythedamaged frameisresent.Thismechanism iscalledSelective RepeatARQ.
Itismoreefficientfornoisylinks,buttheprocessing atthereceiverismorecomplex.SECTION 11.5NOISYCHANNELS 333
Windows
TheSelective RepeatProtocolalsousestwowindows: asendwindowandareceivewin­
dow.However, therearedifferences betweenthewindows inthisprotocolandtheonesin
Go-Back-N. First,thesizeofthesendwindowismuchsmaller;itis2m-I.Thereasonfor
thiswillbediscussed later.Second,thereceivewindowisthesamesizeasthesendwindow.
Thesendwindow maximum sizecanbe2m-I.Forexample, ifm=4,the
sequence numbers gofrom0to15,butthesizeofthewindowisjust8(itis15in
theGo-Back-N Protocol). Thesmallerwindowsizemeanslessefficiency infillingthe
pipe,butthefactthattherearefewer duplicate framescancompensate forthis.
Theprotocol usesthesamevariables aswediscussed forGo-Back-N. Weshowthe
Selective RepeatsendwindowinFigure11.18toemphasize thesize.Compare itwith
Figure11.12.
Figure11.18SendwindowforSelective RepeatARQ
L___J___ J___~___ 1___ 1___ 1___ 1___ 1___ ~___J___ j___ J___
Framesalready Framessent,butFramesthatcan Framesthat
acknowledged notacknowledged besent cannotbesent
'\iLC'=2m-1
ThereceivewindowinSelective Repeatistotallydifferent fromtheoneinGo­
Back-N.First,thesizeofthereceivewindowisthesameasthesizeofthesendwindow
(2m-I).TheSelective RepeatProtocol allowsasmanyframesasthesizeofthereceive
windowtoarriveoutoforderandbekeptuntilthereisasetofin-orderframestobe
delivered tothenetworklayer.Becausethesizesofthesendwindowandreceivewin­
dowarethesame,alltheframesinthesendframecanarriveoutoforderandbestored
untiltheycanbedelivered. Weneed,however, tomentionthatthereceiverneverdelivers
packetsoutofordertothenetworklayer.Figure11.19showsthereceivewindowinthis
Figure11.19ReceivewindowforSelective RepeatARQ
RReceivewindow•.t:.nextframeexpected
:))~rl~~f)]5~rfI~!~f~~~tn 4!5ru--71111! 11811'9
Framesthatcanbereceived
Framesalready andstoredforlaterdelivery.
received Coloredboxes,alreadyreceivedFramesthat
cannotbereceived334 CHAPTER IIDATALINKCONTROL
protocol. Thoseslotsinsidethewindowthatarecoloreddefineframesthathavearrived
outoforderandarewaitingfortheirneighbors toarrivebeforedeliverytothenetwork
layer.
Design
Thedesigninthiscaseistosomeextentsimilartotheonewedescribed forthe00­
Back-N,butmorecomplicated, asshowninFigure11.20.
Figure11.20DesignofSelective RepeatARQ
SFirst SNext
6oo:io:i6'o "0"
SenderRNextn '
~
Receiver
Network
Datalink
PhysicalDataframe ACKorNAKDeliver
Getdata ') ~ data
I seqNo ackNo .+ror InakNo
.+1 .+I
RI,TRI,T
ecelveSend ecelve Send
frameframe frame frame
)0
IIP&¥ IJd,if%*&WE** IF5f?i¥*%W I
I ~~ e::- ~Network
Datalink
Physical
Event:IRequestfromI
networklayer
I
I
EINotification fromjvent:physicallayerRepeatforever
WindowSizes
Wecannowshowwhythesizeofthesenderandreceiverwindows mustbeatmostone­
halfof2m.Foranexample, wechoosem=2,whichmeansthesizeofthewindowis2m/2,
or2.Figure11.21compares awindowsizeof2withawindowsizeof3.
Ifthesizeofthewindowis2andallacknowledgments arelost,thetimerforframe0
expiresandframe0isresent.However, thewindowofthereceiverisnowexpectingSECTION 11.5NOISYCHANNELS 335
Figure11.21 Selective RepeatARQ,windowsize
Sender
Sf_Ito1 2 3
Time-out
a.Window size=2m-1Receiver Sender
Sf~~
Sf~l
~
Sf~l~ Time-out
b.Window size>2m-1Receiver
frame2,notframe0,sothisduplicate frameiscorrectly discarded. Whenthesizeof
thewindow is3andallacknowledgments arelost,thesendersendsaduplicate of
frameO.However, thistime,thewindowofthereceiverexpectstoreceiveframe0(0is
partofthewindow), soitacceptsframe0,notasaduplicate, butasthefirstframein
thenextcycle.Thisisclearlyanerror.
InSelective RepeatARQ,thesizeofthesenderandreceiverwindow
mustbeatmostone-halfof2m•
Algorithms
Algorithm 11.9showstheprocedure forthesender.
Algorithm 11.9Sender-site Selective Repeatalgorithm
WaitForEvent()i
if(Event(RequestToSend)}
{1=2m-1i
2=Oi
3=Oi
4
5hile(true)
6 {
7
8
9//Repeat forever
//There isapacket tosen336CHAPTER 11DATALINKCONTROL
Algorithm 11.9Sender-site Selective Repeatalgorithm (continued)
}while{sf <ackNo)
{
Purge(sf);
stopTimer (Sf);
Sf=Sf+1;
}if(Event{ArrivalNotification» IIACKarrives
{
Receive{frame); I/Receive ACKorNAK
if{corrupted{frame»
Sleep();
if(FrameType ==NAK)
if(nakNo between SfandSo)
{
resend{nakNo);
StartTimer{nakNo);
}
if(FrameType ==ACK)
if(ackNo between SfandSo)
{10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48}if{Sn-S;E >=Sw)
Sleep{);
GetData{) ;
MakeFrame (Sn);
StoreFrame{Sn);
SendFrame (Sn);
Sn=Sn+1;
StartTimer{Sn);
}
}
if(Event{TimeOut{t»)
{
StartTimer{t);
SendFrame{t);
}I/Ifwindowisfull
liThetimerexpires
Analysis Thehandling oftherequesteventissimilartothatoftheprevious protocolexcept
thatonetimerisstartedforeachframesent.Thearrivaleventismorecomplicated here.AnACK
oraNAKframemayarrive.IfavalidNAKframearrives,wejustresendthecorresponding
frame.IfavalidACKarrives,weusealooptopurgethebuffers,stopthecorresponding timer.
andmovetheleftwallofthewindow.Thetime-outeventissimplerhere;onlytheframewhich
timesoutisresent.
Algorithm 11.10showstheprocedure forthereceiver.SECTION 11.5NOISYCHANNELS 337
AI~orithm 11.10Receiver-site Selective Repeatalgorithm
jDataframearrivesIIRepeat forever
}
if(AckNeeded) ;
{
SendAck(Rn) ;
AckNeeded =false;
NakSent=false;
}
}
}Receive(Frame);
if(corrupted(Frame»&& (NOTNakSent)
{
SendNAK(Rn) ;
NakSent=true;
Sleep{);
}
if(seqNo <>Rn)&& (NOTNakSent)
{
SendNAK(Rn) ;
NakSent =true;
if{(seqNo inwindow)&&(IMarked(seqNo»
{
StoreFrame{seqNo)
Marked(seqNo)= true;
whi1e(Marked(Rn»
{
DeliverData (Rn);
Purge(Rn);
Rn=Rn+1;
AckNeeded =true;
}WaitForEvent()i
if{Event{ArrivalNotification»
{1~n=0;
2~akSent =false;
3~ckNeeded =false;
4~epeat(for allslots)
5Marked(slot) =false;
6
7!while(true)
8 {
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44}'-------l":~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~___l
Analysis Hereweneedmoreinitialization. Inordernottooverwhelm theothersidewith
NAKs,weuseavariablecalledNakSent. ToknowwhenweneedtosendanACK,weuseavari­
ablecalledAckNeeded. Bothoftheseareinitialized tofalse.Wealsouseasetofvariables to338CHAPTER 11DATALINKCONTROL
marktheslotsinthereceivewindowoncethecorresponding framehasarrivedandisstored.If
wereceiveacorrupted frameandaNAKhasnotyetbeensent,wesendaNAKtotelltheother
sitethatwehavenotreceived theframeweexpected.Iftheframeisnotcorrupted andthe
sequence numberisinthewindow, westoretheframeandmarktheslot.Ifcontiguous frames,
startingfromRnhavebeenmarked,wedelivertheir data tothenetworklayerandslidethewin­
dow.Figure11.22showsthissituation.
Figure11.22DeliveryofdatainSelective RepeatARQ
RackNosent:3
~
a.Beforedelivery b.Afterdelivery
Example 11.8
ThisexampleissimilartoExample 11.3inwhichframe1islost.WeshowhowSelective Repeat
behavesinthiscase.Figure11.23showsthesituation.
Figure11.23Flowdiagramfor Example 11.8
Arrival
ArrivalArrival
"----D...... ~--'--JL.......JReceiver
L!JRn
i
~Initial
I
I
I
Arrival
"----D~~--'--JL.......J
. Rn
I\C~4m~01112134 5 6 7 Arrival
: Frames1,2,3t deliveredJ
ItSender
C!l
RequestRequestRequest
ArrivalSf~
Initial~
SfSn
Request 012345670o1SECTION 11.5NOISYCHANNELS 339
Onemaindifference isthenumberoftimers.Here,eachframesentorresentneedsatimer,
whichmeansthatthetimersneedtobenumbered (0,1,2,and3).Thetimerforframe°starts
atthefirstrequest,butstopswhentheACKforthisframearrives.ThetimerforframeIstartsat
thesecondrequest,restartswhenaNAKarrives,andfinallystopswhenthelastACKarrives.
Theothertwotimersstartwhenthecorresponding framesaresentandstopatthelastarrival
event.
Atthereceiver siteweneedtodistinguish between theacceptance ofaframeandits
delivery tothenetwork layer.Atthesecondarrival,frame2arrivesandisstoredandmarked
(coloredslot),butitcannotbedelivered becauseframeIismissing.Atthenextarrival,frame3
arrivesandismarkedandstored,butstillnoneoftheframescanbedelivered. Onlyatthelast
arrival,whenfinallyacopyofframe1arrives,canframesI,2,and3bedelivered tothenet­
worklayer.Therearetwoconditions forthedeliveryofframestothenetworklayer:First,aset
ofconsecutive framesmusthavearrived.Second,thesetstartsfromthebeginning ofthewin­
dow.AfterthefirstalTival,therewasonlyoneframeanditstartedfromthebeginning ofthe
window. Afterthelastarrival,therearethreeframesandthefirstonestartsfromthebeginning
ofthewindow.
Anotherimportant pointisthataNAKissentafterthesecondarrival,butnotafterthethird,
although bothsituations lookthesame.Thereasonisthattheprotocoldoesnotwanttocrowdthe
networkwithunnecessary NAKsandunnecessary resentframes.ThesecondNAKwouldstillbe
NAKItoinformthesendertoresendframe1again;thishasalreadybeendone.ThefirstNAK
sentisremembered (usingthenakSentvariable) andisnotsentagainuntiltheframeslides.A
NAKissentonceforeachwindowpositionanddefinesthefirstslotinthewindow.
ThenextpointisabouttheACKs.NoticethatonlytwoACKsaresenthere.Thefirstone
acknowledges onlythefirstframe;thesecondoneacknowledges threeframes.InSelective
Repeat,ACKsaresentwhendataaredelivered tothenetwork layer.Ifthedatabelonging ton
framesaredelivered inoneshot,onlyoneACKissentforallofthem.
Piggybacking
Thethreeprotocols wediscussed inthissectionareallunidirectional: dataframesflow
inonlyonedirection although controlinformation suchasACKandNAKframescan
travelintheotherdirection. Inreallife,dataframesarenormally flowinginbothdirec­
tions:fromnodeAtonodeBandfromnodeBtonodeA.Thismeansthatthecontrol
information alsoneedstoflowinbothdirections. Atechnique calledpiggybacking is
usedtoimprovetheefficiency ofthebidirectional protocols. Whenaframeiscarrying
datafromAtoB,itcanalsocarrycontrolinformation aboutarrived(orlost)frames
fromB;whenaframeiscarryingdatafromBtoA,itcanalsocarrycontrolinformation
aboutthearrived(orlost)framesfromA.
Weshowthedesign for aGo-Back-N ARQusingpiggybacking inFigure11.24.
Notethateachnodenowhastwowindows: onesendwindowandonereceivewindow.
Bothalsoneedtouseatimer.Bothareinvolved inthreetypesofevents:request,arrival,
andtime-out. However, thearrivaleventhereiscomplicated; whenaframearrives,the
siteneedstohandlecontrolinformation aswellastheframeitself.Bothoftheseconcerns
mustbetakencareofinoneevent,thearrivalevent.Therequesteventusesonlythesend
windowateachsite;thearrivaleventneedstousebothwindows.
Animportant point aboutpiggybacking isthatbothsitesmustusethesamealgo­
rithm.Thisalgorithm iscomplicated becauseitneedstocombine twoarrivalevents
intoone.Weleavethistaskasanexercise.340CHAPTER 11DATALINKCONTROL
Figure11.24Designofpiggybacking inGo-Back-N ARQ
Send
windowReceive
windowReceive Send
window windowC 11m'~1_1 1IJIIJIl
Network
Datalink
PhysicalackNo
Deliver Get I-FrameDeliver Get..II'f ~I
IT seqNo IT
..I ~I
RI,T RI,T
ecelveSend ecelveSend
frameframe frameframe
I,bed.lIrs)_I I@@-~ I
~, f¥fI_I1""'3-,FB¥i-Network
Datalink
Physical
Event:IRequestfromI'networklayer
I
Repeatforevert 0
Algorithm for
f-'oO----iTime-outIsendingandreceiving
Event:..
I
E.1Notification fromIvent:physical layerAlgorithm for
sendingandreceiving
11.6HDLC
High-level DataLinkControl(HDLC) isabit-oriented protocol forcommunication
overpoint-to-point andmultipoint links.Itimplements theARQmechanisms we dis­
cussedinthischapter.
Configurations andTransfer Modes
HDLCprovides twocommon transfermodesthatcanbeusedindifferent configura­
tions:normalresponse mode(NRM)andasynchronous balanced mode(ABM).
NormalResponse Mode
Innormalresponse mode(NRM),thestationconfiguration isunbalanced. Wehaveone
primarystationandmultiplesecondary stations.Aprimarystationcansendcommands;
asecondary stationcanonlyrespond. TheNRMisusedforbothpoint-to-point and
multiple-point links,asshowninFigure11.25.SECTION 11.6HDLC 341
Figure11.25Normalresponse mode
Primary
ICommandt------
a.Point-to-pointSecondary
~ ResponseI
Secondary Secondary
Primary
ICommandt------
b.Multipoint~ ResponseI~ ResponseI
Asynchronous Balanced Mode
Inasynchronous balanced mode(ABM),theconfiguration isbalanced. Thelinkis
point-to-point, andeachstationcanfunction asaprimaryandasecondary (actingas
peers),asshowninFigure11.26.Thisisthecommon modetoday.
Figure11.26Asynchronous balanced mode
Combined Combined
ICommand/responset------
~ Command/responseI
Frames
Toprovidetheflexibility necessary tosupportalltheoptionspossibleinthemodesand
configurations justdescribed, HDLCdefinesthreetypesofframes:information frames
(I-frames), supervisory frames(S-frames), andunnumbered frames(V-frames). Each
typeofframeservesasanenvelope forthetransmission ofadifferent typeofmessage.
I-frames areusedtotransport userdataandcontrolinformation relatingtouserdata
(piggybacking). S-frames areusedonlytotransport controlinformation. V-frames are
reservedforsystemmanagement. Information carriedbyV-frames isintendedformanag­
ingthelinkitself.342 CHAPTER 11DATALINKCONTROL
FrameFormat
EachframeinHDLCmaycontainuptosixfields,asshowninFigure11.27:abegin­
ningflagfield,anaddressfield,acontrolfield,aninformation field,aframecheck
sequence (FCS)field,andanendingflagfield.Inmultiple-frame transmissions, the
endingflagofoneframecanserveasthebeginning flagofthenextframe.
Figure11.27 HDLCframes
FlagAddress Control FCSFlagS-frameFlagAddress Control
FlagAddress ControlUser
infonnation
Management
infonnatlonPCSFlagI-frame
FCSFlagU-frame
Fields
Letusnow discuss thefieldsandtheiruseindifferent frametypes.
oFlagfield.TheflagfieldofanHDLCframeisan8-bitsequence withthebitpattern
01111110 thatidentifies boththebeginning andtheendofaframeandservesasa
synchronization patternforthereceiver.
oAddress field.ThesecondfieldofanHDLCframecontains theaddressofthe
secondary station.Ifaprimarystationcreatedtheframe,itcontainsatoaddress.If
asecondary createstheframe,itcontains afromaddress.Anaddressfieldcanbe
1byteorseveralbyteslong,depending ontheneedsofthenetwork. Onebytecan
identifyupto128stations(lbitisusedforanotherpurpose). Largernetworks
requiremultiple-byte addressfields.Iftheaddressfieldisonly1byte,thelastbit
isalwaysa1.Iftheaddressismorethan1byte,allbytesbutthelastonewillend
with0;onlythelastwillendwith1.Endingeachintermediate bytewith0indi­
catestothereceiverthattherearemoreaddressbytestocome.
oControl field.Thecontrolfieldisa1-or2-bytesegmentoftheframeusedfor
flowanderrorcontrol.Theinterpretation ofbitsinthisfielddependsontheframe
type.Wediscussthisfieldlateranddescribe itsformatforeachframetype.
oInformation field.Theinformation fieldcontains theuser'sdatafromthenet­
worklayerormanagement information. Itslengthcanvaryfromonenetwork to
another.
oFCSfield.Theframechecksequence (FCS)istheHDLCerrordetection field.It
cancontaineithera2-or4-byteITU-TCRC.SECTION 11.6HDLC 343
ControlField
Thecontrolfielddetermines thetypeofframeanddefinesitsfunctionality. Soletus
discusstheformatofthisfieldingreaterdetail.Theformatisspecificforthetypeof
frame,asshowninFigure11.28.
Figure11.28 Controlfieldformatforthedifferentframetypes
~I-frame
N(S) N(R)
~s-frarne
Code N(R)
~U-frame
Code Code
ControlFieldforI-Frames
I-frames aredesigned tocarryuserdatafromthenetworklayer.Inaddition, theycan
includeflowanderrorcontrolinformation (piggybacking). Thesubfields inthecontrol
fieldareusedtodefinethesefunctions. Thefirstbitdefinesthetype.Ifthefirstbitof
thecontrolfieldis0,thismeanstheframeisanI-frame.Thenext3bits,calledN(S),
definethesequence numberoftheframe.Notethatwith3bits,wecandefinea
sequence numberbetween°and7;butintheextension format,inwhichthecontrol
fieldis2bytes,thisfieldislarger.Thelast3bits,calledN(R),correspond tothe
acknowledgment numberwhenpiggybacking isused.ThesinglebitbetweenN(S)and
N(R)iscalledthePIFbit.ThePIPfieldisasinglebitwithadualpurpose.Ithasmean­
ingonlywhenitisset(bit=1)andcanmeanpollorfinal.Itmeanspollwhentheframe
issentbyaprimarystationtoasecondary (whentheaddressfieldcontainstheaddress
ofthereceiver).Itmeansfinalwhentheframeissentbyasecondary toaprimary
(whentheaddressfieldcontainstheaddressofthesender).
ControlFieldfor S-Frames
Supervisory framesareusedforflowanderrorcontrolwhenever piggybacking iseither
impossible orinappropriate (e.g.,whenthestationeitherhasnodataofitsowntosendor
needstosendacommand orresponse otherthananacknowledgment). S-frames donot
haveinformation fields.Ifthefirst2bitsofthecontrolfieldis10,thismeanstheframe
isanS-frame.Thelast3bits,calledN(R),corresponds totheacknowledgment number
(ACK)ornegativeacknowledgment number(NAK)depending onthetypeofS-frame.
The2bitscalledcodeisusedtodefinethetypeofS-frameitself.With2bits,wecan
havefourtypesofS-frames, asdescribed below:
oReceiveready(RR).Ifthevalueofthecodesubfieldis00,itisanRRS-frame.
Thiskindofframeacknowledges thereceiptofasafeandsoundframeor
groupofframes.Inthiscase,thevalueN(R)fielddefinestheacknowledgment
number.344 CHAPTER 11DATALINKCONTROL
oReceivenotready(RNR).Ifthevalueofthecodesubfieldis10,itisanRNR
S-frame. ThiskindofframeisanRRframewithadditional functions. It
acknowledges thereceiptofaframeorgroupofframes,anditannounces that
thereceiverisbusyandcannotreceivemoreframes.Itactsasakindofconges­
tioncontrolmechanism byaskingthesendertoslowdown.ThevalueofNCR)
istheacknowledgment number.
oReject(REJ).Ifthevalueofthecodesubfieldis01,itisaREJS-frame. Thisisa
NAKframe,butnotliketheoneusedforSelective RepeatARQ.ItisaNAKthat
canbeusedinGo-Back-N ARQtoimprove theefficiency oftheprocessby
informing thesender,beforethesendertimeexpires,thatthelastframeislostor
damaged. ThevalueofNCR)isthenegativeacknowledgment number.
oSelective reject(SREJ). Ifthevalueofthecodesubfieldis11,itisanSREJS-frame.
ThisisaNAKframeusedinSelective RepeatARQ.NotethattheHDLCProtocol
usesthetermselectiverejectinsteadofselectiverepeat.ThevalueofN(R)istheneg­
ativeacknowledgment number.
ControlFieldfor V-Frames
Unnumbered framesareusedtoexchange sessionmanagement andcontrolinfonnation
between connected devices.UnlikeS-frames, U-frames containaninformation field,
butoneusedforsystemmanagement information, notuserdata.AswithS-frames,
however, muchoftheinfonnation carriedbyU-frames iscontained incodesincluded
inthecontrolfield.U-frame codesaredividedintotwosections: a2-bitprefixbefore
thePtFbitand a3-bitsuffixafterthePtFbit.Together, thesetwosegments (5bits)can
beusedtocreateupto32different typesofU-frames. Someofthemorecommon types
areshowninTable11.1.
Table11.1 U~frame controlcommand andresponse
Code Command Response Meaning
00001SNRM Setnormalresponse mode
11011SNRME Setnormalresponse mode,extended
11100SABM DM Setasynchronous balanced modeordisconnect mode
11110 SABME Setasynchronous balanced mode,extended
00000UI UI Unnumbered information
00110 UA Unnumbered acknowledgment
00010DISC RD Disconnect orrequestdisconnect
10000SIM RIM Setinitialization modeorrequestinformation mode
00100UP Unnumbered poll
11001RSET Reset
11101XID XID Exchange ID
10001FRMR FRMR FramerejectSECTION 11.6HDLC 345
Example 11.9:Connection/Disconnection
Figure11.29showshowV-frames canbeusedforconnection establishment andconnection
release.NodeAasksforaconnection withasetasynchronous balanced mode(SABM) frame;
nodeBgivesapositiveresponse withanunnumbered acknowledgment (VA)frame.Afterthese
twoexchanges, datacanbetransferred between thetwonodes(notshowninthefigure).After
datatransfer,nodeAsendsaDISC(disconnect) frametoreleasetheconnection; itisconfirmed
bynodeBresponding withaVA(unnumbered acknowledgment).
Figure11.29Exampleofconnection anddisconnection
NodeA NodeB
Datatransfer
c:o.-1)
-cf)uos1)1)<=I-S~u
y
TimeI
It
Time
Example 11.10:Piggybacking withoutError
Figure11.30showsanexchange usingpiggybacking. NodeAbeginstheexchange of
information withanI-framenumbered 0followed byanotherI-framenumbered 1.NodeB
piggybacks itsacknowledgment ofbothframesontoanI-frameofitsown.NodeB'sfirst
I-frameisalsonumbered 0[N(S)field]andcontains a 2initsN(R)field,acknowledging the
receiptofNsframes1and0andindicating thatitexpectsframe2toarrivenext.NodeB
transmits itssecondandthirdI-frames (numbered 1and2)beforeaccepting further
framesfromnodeA.ItsN(R)information, therefore, hasnotchanged: Bframes1and2
indicate thatnodeBisstillexpecting Nsframe2toarrivenext.NodeAhassentallits
data.Therefore, itcannotpiggyback anacknowledgment ontoanI-frameandsendsanS-frame
instead.TheRRcodeindicates thatAisstillreadytoreceive.Thenumber3intheN(R)field
tellsBthatframes0,1,and2haveallbeenaccepted andthatAisnowexpecting frame
number3.346 CHAPTER 11DATALINKCONTROL
Figure11.30 Exampleofpiggybacking withouterror
NodeA NodeBo
S-frame(RR),anACK3
l'Control F\'r-------., B C.-.------.,a\ORR3Sa
g g
y
Timey
Time
Example 11.11:Piggybacking withError
Figure11.31showsanexchange inwhichaframeislost.NodeBsendsthreedataframes(0,1,
and2),butframe1islost.WhennodeAreceivesframe2,itdiscardsitandsendsaREIframefor
frame1.NotethattheprotocolbeingusedisGo-Back-N withthespecialuseofanREIframeas
aNAKframe.TheNAKframedoestwothingshere:Itconfirms thereceiptofframe°and
declaresthatframe1andanyfollowing framesmustberesent.NodeB,afterreceiving theREI
frame,resendsframes1and2.NodeAacknowledges thereceiptbysendinganRRframe(ACK)
withacknowledgment number3.
11.7POINT-TO-POINT PROTOCOL
Although HDLCisageneralprotocolthatcanbeusedforbothpoint-to-point andmulti­
pointconfigurations, oneofthemostcommon protocols forpoint-to-point accessisthe
Point-to-Point Protocol (PPP).Today,millionsofInternetuserswhoneedtoconnect
theirhomecomputers totheserverofanInternetserviceproviderusePPP.Themajority
oftheseusershaveatraditional modem;theyareconnected totheInternetthrougha
telephone line,whichprovides theservicesofthephysical layer.ButtocontrolandSECTION 11.7POINT-TO-POINT PROTOCOL 347
Figure11.31 Exampleofpiggybacking witherror
NodeA NodeB
..
Lost
Discarded L------<l_-.j
S-frame(REJ1),aNAK
~IcontrOl Fl''----- B C~••l>------'
=IOREJlSg
I-frame(dataframe1)
l'Controlr--......~AI-----1r----.__--(g0 1 0FIResent1------;a
g
Resent 1
1
I
I
'f
TimeS-frame(RR3),anACK
FControl F F1-------1 I B C I~...-----;gtoRR3Sg
'f
Time
managethetransferofdata,thereisaneedforapoint-to-point protocol atthedatalink
layer.PPPisbyfarthemostcommon.
PPPprovides severalservices:
1.PPPdefinestheformatoftheframetobeexchanged betweendevices.
2.PPPdefineshowtwodevicescannegotiate theestablishment ofthelinkandthe
exchange ofdata.
3.PPPdefineshownetworklayerdataareencapsulated inthedatalinkframe.
4.PPPdefineshowtwodevicescanauthenticate eachother.
5.PPPprovides multiplenetworklayerservicessupporting avarietyofnetworklayer
protocols.
6.PPPprovides connections overmultiplelinks.
7.PPPprovidesnetworkaddressconfiguration. Thisisparticularly useful whenahome
userneedsatemporary networkaddresstoconnecttotheInternet.348 CHAPTER 11DATALINKCONTROL
Ontheotherhand,tokeepPPPsimple,severalservicesaremissing:
I.PPPdoesnotprovideflowcontrol.Asendercansendseveralframesoneafter
anotherwithnoconcernaboutoverwhelming thereceiver.
2.PPPhasaverysimplemechanism forerrorcontrol.ACRCfieldisusedtodetect
errors.Iftheframeiscorrupted, itissilentlydiscarded; theupper-layer protocol
needstotakecareoftheproblem. Lackoferrorcontrolandsequence numbering
maycauseapackettobereceivedoutoforder.
3.PPPdoesnotprovideasophisticated addressing mechanism tohandleframesina
multipoint configuration.
Framing
PPPisabyte-oriented protocol. Framing isdoneaccording tothediscussion ofbyte­
orientedprotocols atthebeginning ofthischapter.
FrameFormat
Figure11.32showstheformatofaPPPframe.Thedescription ofeachfieldfollows:
Figure11.32 PPPframefomwt
1byte1byte 1byte1or2bytesPayload
Variable 2or4bytes1byte
oFlag.APPPframestartsandendswithaI-byteflagwiththebitpattern01111110.
Although thispatternisthesameasthatusedinHDLC,thereisabigdifference.
PPPisabyte-oriented protocol; HDLCisabit-oriented protocol. Theflagistreated
asabyte,aswewillexplainlater.
oAddress. Theaddressfieldinthisprotocolisaconstantvalueandsetto11111111
(broadcast address). Duringnegotiation (discussed later),thetwopartiesmayagree
toomitthisbyte.
oControl. Thisfieldissettotheconstant value11000000 (imitating unnumbered
framesinHDLC).Aswewilldiscusslater,PPPdoesnotprovideanyflowcontrol.
Errorcontrolisalsolimitedtoerrordetection. Thismeansthatthisfieldisnotneeded
atall,andagain,thetwopartiescanagree,duringnegotiation, toomitthisbyte.
oProtocol. Theprotocol fielddefineswhatisbeingcarriedinthedatafield:either
userdataorotherinformation. Wediscussthisfieldindetailshortly.Thisfieldis
bydefault2byteslong,butthetwopartiescanagreetouseonlyIbyte.
oPayloadfield.Thisfieldcarrieseithertheuserdataorotherinformation thatwewill
discussshortly.Thedatafieldisasequence ofbyteswiththedefaultofamaximum
of1500bytes;butthiscanbechanged duringnegotiation. Thedatafieldisbyte­
stuffediftheflagbytepatternappearsinthisfield.Becausethereisnofielddefining
thesizeofthedatafield,paddingisneededifthesizeislessthanthemaximum
defaultvalueorthemaximum negotiated value.
oFCS.Theframechecksequence (FCS)issimplya2-byteor4-bytestandardCRe.SECTION 11.7POINT-TO-POINT PROTOCOL 349
ByteStuffing
Thesimilarity betweenPPPandHDLeendsattheframeformat.PPP,aswediscussed
before,isabyte-oriented protocol totallydifferent fromHDLC.Asabyte-oriented
protocol, theflaginPPPisabyteandneedstobeescapedwheneveritappearsinthe
datasectionoftheframe.Theescapebyteis01111101, whichmeansthateverytime
theflaglikepatternappearsinthedata,thisextrabyteisstuffedtotellthereceiverthat
thenextbyteisnotaflag.
PPPisabyte-oriented protocolusingbytestuffingwiththeescapebyte01111101.
Transition Phases
APPPconnection goesthroughphaseswhichcanbeshowninatransition phase
diagram(seeFigure11.33).
Figure11.33 Transition phases
Failed
Carrier
dropped
Tenmnate
DoneCarrier
detected
FailedOptionsagreed
bybothsides
Authenticate
Authentication
successfulIfauthentication
notneeded
Network layer
configurationNetwork
DDead.Inthedeadphasethelinkisnotbeingused.Thereisnoactivecarrier(at
thephysicallayer)andthelineisquiet.
DEstablish. Whenoneofthenodesstartsthecommunication, theconnection goesinto
thisphase.Inthisphase,optionsarenegotiated betweenthetwoparties.Ifthenegoti­
ationissuccessful, thesystemgoestotheauthentication phase(ifauthentication is
required) ordirectlytothenetworking phase.Thelinkcontrolprotocolpackets,dis­
cussedshortly,areusedforthispurpose.Severalpacketsmaybeexchanged here.
DAuthenticate. Theauthentication phaseisoptional; thetwonodesmay decide,
duringtheestablishment phase,nottoskipthisphase.However, iftheydecideto
proceedwithauthentication, theysendseveralauthentication packets, discussed
later.Iftheresultissuccessful, theconnection goestothenetworking phase;other­
wise,itgoestothetermination phase.
DNetwork. Inthenetworkphase,negotiation forthenetworklayerprotocols takes
place.PPPspecifiesthattwonodesestablishanetworklayeragreement beforedataat350CHAPTER 11DATALINKCONTROL
thenetworklayercanbeexchanged. ThereasonisthatPPPsupportsmultipleproto­
colsatthenetworklayer.Ifanodeisrunningmultipleprotocols simultaneously atthe
networklayer,thereceiving nodeneedstoknowwhichprotocolwillreceivethedata.oOpen.Intheopenphase,datatransfertakesplace.Whenaconnection reaches
thisphase,theexchange ofdatapacketscanbestarted.Theconnection remainsin
thisphaseuntiloneoftheendpoints wantstoterminate theconnection.
oTerminate. Inthetermination phasetheconnection isterminated. Severalpackets
areexchanged betweenthetwoendsforhousecleaningandclosingthelink.
Multiplexing
Although PPPisadatalinklayerprotocol, PPPusesanothersetofotherprotocols to
establishthelink,authenticate thepartiesinvolved, andcarrythenetworklayerdata.Three
setsofprotocols aredefinedtomakePPPpowetful: theLinkControlProtocol(LCP),two
Authentication Protocols (APs),andseveralNetwork ControlProtocols (NCPs).Atany
moment, aPPPpacketcancarrydatafromoneoftheseprotocols initsdatafield,asshown
inFigure11.34.Note that thereisoneLCP,twoAPs,andseveralNCPs.Datamayalso
comefromseveraldifferentnetworklayers.
Figure11.34 Multiplexing inPPP
Network
layer
Datalink
layerDatafromdifferent
networking protocols
NCP
•••
LCP:OxC021
AP:OxC023andOxC223
NCP:Ox8021and.
Data:Ox0021and.LCP:LinkControlProtocol
AP:Authentication Protocol
NCP:Network ControlProtocol
LinkControlProtocol
TheLinkControlProtocol (LCP)isresponsible forestablishing, maintaining, config­
uring,andterminating links.Italsoprovides negotiation mechanisms tosetoptions
between thetwoendpoints. Bothendpoints ofthelinkmustreachanagreement about
theoptionsbeforethelinkcanbeestablished. SeeFigure11.35.
AllLCPpacketsarecarriedinthepayloadfieldofthePPPframewiththeprotocol
fieldsettoC021inhexadecimal.
ThecodefielddefinesthetypeofLCPpacket.Thereare11typesofpacketsas
showninTable11.2.SECTION 11.7POINT-TO-POINT PROTOCOL 351
Figure11.35 LCPpacketencapsulated inaframe
Variable
Infonnation
Payload
(andpadding)
Table11.2LCPpackets
Code PacketType Description
OxOl Coofigure- request Contains thelistofproposed optionsandtheirvalues
Ox02 Configure-ack Acceptsalloptionsproposed
Ox03 Configure-nak Announces thatsomeoptionsareootacceptable
Ox04 Configure-reject Announces thatsomeoptionsarenotrecognized
Ox05 Terminate- request Requesttoshutdowntheline
Ox06 Terminate-ack Accepttheshutdown request
Ox07 Code-reject Announces anunknown code
Ox08 Protocol-reject Announces anunknown protocol
Ox09 Echo-request Atypeofhellomessage tocheckiftheotherendisalive
OxOA Echo-reply Theresponse totheecho-request message
OxOB Discard-request Arequesttodiscardthepacket
Therearethreecategories ofpackets.Thefirstcategory, comprising thefirstfour
packettypes,isusedforlinkconfiguration duringtheestablish phase.Thesecondcate­
gory,comprising packettypes5and6,isusedforlinktennination duringthetermina­
tionphase.Thelastfivepacketsareusedforlinkmonitoring anddebugging.
TheIDfieldholdsavaluethatmatchesarequestwithareply.Oneendpoint inserts
avalueinthisfield,whichwillbecopiedintothereplypacket.Thelengthfielddefines
thelengthoftheentireLCPpacket.Theinformation fieldcontains information, suchas
options,neededforsomeLCPpackets.
Therearemanyoptionsthatcanbenegotiated between thetwoendpoints. Options
areinsertedintheinformation fieldoftheconfiguration packets.Inthiscase,theinfor­
mationfieldisdividedintothreefields:optiontype,optionlength,and option data.We
listsomeofthemostcommon optionsinTable11.3.
Table11.3Common options
Option Default
Maximum receiveunit(payload fieldsize) 1500
Authentication protocol None
Protocol fieldcompression Off
Addressandcontrolfieldcompression Off352CHAPTER 11DATALINKCONTROL
Authentication Protocols
Authentication playsaveryimportant roleinPPPbecausePPPisdesigned foruseover
dial-uplinkswhereverification ofuseridentityisnecessary. Authentication meansvali­
datingtheidentityofauserwhoneedstoaccessasetofresources. PPPhascreatedtwo
protocols forauthentication: Password Authentication ProtocolandChallenge Handshake
Authentication Protocol. Notethattheseprotocols areusedduringtheauthentication phase.
PAPThePassword Authentication Protocol (PAP)isasimpleauthentication pro­
cedurewithatwo-step process:
1.Theuserwhowantstoaccessasystemsendsanauthentication identification
(usuallytheusername)andapassword.
2.Thesystemchecksthevalidityoftheidentification andpassword andeitheraccepts
ordeniesconnection.
Figure11.36showsthethreetypesofpackets used byPAPandhowtheyareactually
exchanged. WhenaPPPframeiscarrying anyPAPpackets,thevalueoftheprotocol
fieldisOxC023. ThethreePAPpacketsareauthenticate-request, authenticate-ack, and
authenticate-nak. Thefirstpacketisusedbytheusertosendtheusernameandpass­
word.Thesecondisusedbythesystemtoallowaccess.Thethirdisusedbythesystem
todenyaccess.
Figure11.36PAPpacketsencapsulated inaPPPframe
System
User
r
Authenticate-request
Authenticate-ack orauthenticate-nak
PAPpackets
Icc__------Flag AddressIControlI~O2316PayloadFeSIFlagI I --(andpadding)
CHAP TheChallenge Handshake Authentication Protocol (CHAP) isathree-way
hand-shaking authentication protocol thatprovides greatersecuritythanPAP.Inthis
method,thepassword iskeptsecret;itisneversentonline.SECTION 11.7POINT-TO-POINT PROTOCOL 353
1.Thesystemsendstheuserachallenge packetcontaining achallenge value,usually
afewbytes.
2.Theuserappliesapredefined function thattakesthechallenge valueandtheuser's
ownpassword andcreatesaresult.Theusersendstheresultintheresponse packet
tothesystem.
3.Thesystemdoesthesame.Itappliesthesamefunctiontothepassword oftheuser
(knowntothesystem)andthechallenge valuetocreatearesult.Iftheresultcreatedis
thesameastheresultsentintheresponse packet,accessisgranted;otherwise, itis
denied.CHAPismoresecurethanPAP,especially ifthesystemcontinuously changes
thechallenge value.Eveniftheintruderlearnsthechallenge valueandtheresult,the
password isstillsecret.Figure11.37showsthepacketsandhowtheyareused.
Figure11.37CHAPpacketsencapsulated inaPPPframe
User
r~
=-
Challenge
Response
SuccessorfailureSystem
~
2 Variable Variable
Address -~J)l{623 s_,
-,:. :::~~--.:<-....,--Payload
(andpadding)CHAPpackets
FCS Flag
CHAPpacketsareencapsulated inthePPPframewiththeprotocol valueC223in
hexadecimal. TherearefourCHAPpackets:challenge, response, success,andfailure.
Thefirstpacketisusedbythesystemtosendthechallenge value.Thesecondisusedby
theusertoreturntheresultofthecalculation. Thethirdisusedbythesystemtoallow
accesstothesystem.Thefourthisusedbythesystemtodenyaccesstothesystem.
Network ControlProtocols
PPPisamultiple-network layerprotocol. Itcancarryanetworklayerdatapacketfrom
protocols definedbytheInternet, OSI,Xerox,DECnet, AppleTalk, Novel,andsoon.354CHAPTER 11DATALINKCONTROL
Todothis,PPPhasdefinedaspecificNetwork ControlProtocol foreachnetworkpro­
tocol.Forexample, IPCP(Internet Protocol ControlProtocol) configures thelinkfor
carrying IPdatapackets.XeroxCPdoesthesamefortheXeroxprotocol datapackets,
andsoon.NotethatnoneoftheNCPpacketscarry network layerdata;theyjust
configure thelinkatthenetworklayerfortheincoming data.
IPCPOneNCPprotocol istheInternet Protocol Control Protocol (IPCP).This
protocol configures thelinkusedtocarryIPpacketsintheInternet. IPCPisespecially
ofinteresttous.TheformatofanIPCPpacketisshowninFigure11.38.Notethatthe
valueoftheprotocolfieldinhexadecimal is8021.
Figure11.38 fPCPpacketencapsulated inPPPframe
Variable
Payload
(andpadding)FCS Flag
IPCPdefinessevenpackets, distinguished bytheircodevalues,asshownin
Table11.4.
Table11.4CodevalueforIPCPpackets
Code IPCPPacket
OxO! Configure-request
Ox02 Configure-ack
Ox03 Configure- nak
Ox04 Configure-reject
Ox05 Terminate-request
Ox06 Terminate-ack
Ox07 Code-reject
OtherProtocols ThereareotherNCPprotocols forothernetwork layerprotocols.
TheOSINetwork LayerControlProtocol hasaprotocol fieldvalueof8023;theXerox
NSIDPControlProtocol hasaprotocolfieldvalueof8025;andsoon.Thevalueofthe
codeandtheformatofthepacketsfortheseotherprotocols arethesameasshownin
Table11.4.
Data/rom theNetworkLayer
Afterthenetwork layerconfiguration iscompleted byoneoftheNCPprotocols, the
userscanexchange datapacketsfromthenetworklayer.Hereagain,therearedifferentSECTION 11.7POINT-TO-POINT PROTOCOL 355
protocolfieldsfordifferent networklayers.Forexample, ifPPPiscarrying datafrom
theIPnetworklayer,thefieldvalueis0021(notethatthethreerightmost digitsarethe
sameasforIPCP).IfPPPiscarryingdatafromtheOSInetworklayer,thevalueofthe
protocolfieldis0023,andsoon.Figure11.39showstheframeforIP.
Figure11.39IPdatagram encapsulated inaPPPframe
Userdata
Payload
(andpadding)FCS Flag
Multilink PPP
PPPwasoriginally designed forasingle-channel point-to-point physicallink.Theavail­
abilityofmultiplechannels inasinglepoint-to-point linkmotivated thedevelopment of
Multilink PPP.Inthiscase,alogicalPPPframeisdividedintoseveralactualPPP
frames.AsegmentofthelogicalframeiscarriedinthepayloadofanactualPPPframe,
asshowninFigure11.40.ToshowthattheactualPPPframeiscarryingafragment ofa
Figure11.40Multilink PPP
Channel 2Channell
PPPLogicalPPP
Or-----
. Payload
PPP
Protocol filed:Ox003d
logicalPPPframe,theprotocolfieldissettoOx003d.Thisnewdevelopment addscom­
plexity.Forexample, asequence numberneedstobeaddedtotheactualPPPframeto
showafragment's positioninthelogicalframe.
Example 11.12
Letusgothroughthephasesfollowed byanetworklayerpacketasitistransmitted througha
PPPconnection. Figure11.41showsthesteps.Forsimplicity, weassumeunidirectional move­
mentofdatafromtheusersitetothesystemsite(suchassendingane-mailthroughanISP).356 CHAPTER 11DATALINKCONTROL
Figure11.41Anexample
User[I~System
i
.Configure-request~ Options
.LeI'
Authenticate-ack§ITIr] Name
PAPAuthenticate-request
C023-~ NameO-P-a-ss-w-o-rd-I
PAP
Configure-request· :
gOZL~ Options
IPCp·
Terminate-request
.CQ21:-~ Options
LCP[
y
Timey
TimeSECTION 11.9KEYTERMS 357
Thefirsttwoframesshowlinkestablishment. Wehavechosentwooptions(notshowninthe
figure):usingPAPforauthentication andsuppressing theaddresscontrolfields.Frames3and4
areforauthentication. Frames5and6establish thenetworklayerconnection usingIPCP.
ThenextseveralframesshowthatsomeIPpacketsareencapsulated inthePPPframe.The
system(receiver) mayhavebeenrunningseveralnetworklayerprotocols, butitknowsthatthe
incoming datamustbedelivered totheIPprotocolbecausetheNCPprotocolusedbeforethedata
transferwasIPCP.
Afterdatatransfer,theuserthenterminates thedatalinkconnection, whichisacknowledged
bythesystem.OfCOUrsetheuserorthesystemcouldhavechosentoterminate thenetworklayer
IPCPandkeepthedatalinklayerrunningifitwantedtorunanotherNCPprotocol.
Theexample istrivial,butitpointsoutthesimilarities ofthepacketsinLCP,AP,and
NCP.Italsoshowstheprotocol fieldvaluesandcodenumbers forparticular protocols.
11.8RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
books.Theitemsinbrackets [...]refertothereference listattheendofthetext.
Books
Adiscussion ofdatalinkcontrolcanbefoundin[GW04], Chapter3of[Tan03],Chapter7
of[Sta04],Chapter12of[Kes97], andChapter2of[PD03].Moreadvanced materials can
befoundin[KMK04].
11.9KEYTERMS
acknowledgment (ACK)
asynchronous balanced mode(ABM)
automatic repeatrequest(ARQ)
bandwidth-delay product
bit-oriented protocol
bitstuffing
bytestuffing
Challenge Handshake Authentication
Protocol (CHAP)
character-oriented protocol
datalinkcontrol
errorcontrol
escapecharacter (ESC)
event
fixed-size framing
flagflowcontrol
framing
Go-Back-N ARQProtocol
High-level DataLinkControl(HDLC)
information frame(I-frame)
InternetProtocol ControlProtocol(IPCP)
LinkControlProtocol (LCP)
negative acknowledgment (NAK)
noiseless channel
noisychannel
normalresponse mode(NRM)
Password Authentication Protocol (PAP)
piggybacking
pipelining
Point-to-Point Protocol (PPP)
primarystation358CHAPTER 11DATALINKCONTROL
receiveslidingwindow
secondary station
Selective RepeatARQ
Protocol
sendslidingwindow
sequence number
Simplest Protocolslidingwindow
Stop-and- WaitARQProtocol
Stop-and- WaitProtocol
supervisory frame(S-frame)
transition phase
unnumbered frame(D-frame)
variable-size framing
11.10SUMMARY
oDatalinkcontroldealswiththedesignandprocedures forcommunication between
twoadjacent nodes:node-to-node communication.
oFraming inthedatalinklayerseparates amessagefromonesourcetoadestination,
orfromothermessages goingfromothersourcestootherdestinations,
oFramescanbeoffixedorvariablesize.Infixed-size framing, thereisnoneedfor
defining theboundaries offrames;invariable-size framing, weneedadelimiter
(flag)todefinetheboundary oftwoframes.
oVariable-size framingusestwocategories ofprotocols: byte-oriented (orcharacter­
oriented) andbit-oriented. Inabyte-oriented protocol, thedatasectionofaframe
isasequence ofbytes;inabit-oriented protocol, thedatasectionofaframeisa
sequence ofbits.
oInbyte-oriented (orcharacter-oriented) protocols, weusebytestuffing; aspecial
byteaddedtothedatasectionoftheframewhenthereisacharacter withthesame
patternastheflag.
oInbit-oriented protocols, weusebitstuffing;anextra0isaddedtothedatasection
oftheframewhenthereisasequence ofbitswiththesamepatternastheflag.
oFlowcontrolreferstoasetofprocedures usedtorestricttheamountofdatathatthe
sendercansendbeforewaitingforacknowledgment. Errorcontrolreferstomethods
oferrordetection andcorrection.
oForthenoiseless channel, wediscussed twoprotocols: theSimplest Protocol and
theStop-and- WaitProtocol. Thefirstprotocol hasneitherflownorerrorcontrol;
thesecondhasnoerrorcontrol.IntheSimplest Protocol, thesendersendsits
framesoneafteranotherwithnoregardstothereceiver. IntheStop-and- WaitPro­
tocol,thesendersendsoneframe,stopsuntilitreceives confirmation fromthe
receiver, andthensendsthenextframe.
DForthenoisychannel, wediscussed threeprotocols: Stop-and-Wait ARQ,00­
Back-N, andSelective RepeatARQ.TheStop-and- WaitARQProtocol, addsa
simpleerrorcontrolmechanism totheStop-and-Wait Protocol. IntheOo-Back-N
ARQProtocol, wecansendseveralframesbeforereceiving acknowledgments,
improving theefficiency oftransmission. IntheSelective RepeatARQprotocol we
avoidunnecessary transmission bysendingonlyframesthatarecorrupted.
DBothOo-Back-N andSelective-Repeat Protocols useaslidingwindow. In00­
Back-NARQ,ifmisthenumberofbitsforthesequence number,thenthesizeofSECTION 11.11PRACTICE SET 359
thesendwindowmustbelessthan2m;thesizeofthereceiverwindowisalways1.
InSelective RepeatARQ,thesizeofthesenderandreceiverwindowmustbeat
mostone-halfof2m.
oAtechnique calledpiggybacking isusedtoimprovetheefficiency ofthebidirec­
tionalprotocols. WhenaframeiscarryingdatafromAtoB,itcanalsocarrycontrol
information aboutframesfromB;whenaframeiscarryingdatafromBtoA,itcan
alsocarrycontrolinformation aboutframesfromA.
oHigh-level DataLinkControl(HDLC)isabit-oriented protocolforcommunication
overpoint-to-point andmultipoint links.However, themostcommon protocols for
point-to-point accessisthePoint-to-Point Protocol (PPP),whichisabyte-oriented
protocol.
11.11PRACTICE SET
ReviewQuestions
1.Brieflydescribetheservicesprovided bythedatalinklayer.
2.Defineframingandthereasonforitsneed.
3.Compare andcontrast byte-oriented andbit-oriented protocols. Whichcategory
hasbeenpopularinthepast(explainthereason)? Whichcategory ispopularnow
(explainthereason)?
4.Compare andcontrastbyte-stuffing andbit-stuffing. Whichtechnique isusedin
byte-oriented protocols? Whichtechnique isusedinbit-oriented protocols?
5.Compare andcontrastflowcontrolanderrorcontrol.
6.Whatarethetwoprotocols wediscussed fornoiseless channels inthischapter?
7.Whatarethethreeprotocols wediscussed fornoisychannels inthischapter?
8.ExplainthereasonformovingfromtheStop-and-Wait ARQProtocol tothe00­
Back-NARQProtocol.
9.Compare andcontrasttheGo-Back-N ARQProtocol withSelective-RepeatARQ.
10.Compare andcontrastHDLCwithPPP.Whichoneisbyte-oriented; whichoneis
bit-oriented?
11.Definepiggybacking anditsusefulness.
12.Whichoftheprotocols described inthischapterutilizepipelining?
Exercises
13.Byte-stuff thedatainFigure11.42.
Figure11.42Exercise 13360 CHAPTER 11DATALINKCONTROL
14.Bit-stuff thedatainFigure11.43.
Figure11.43Exercise 14
1000111111100111110100011111111111000011111 I
15.Designtwosimplealgorithms forbyte-stuffing. Thefirstaddsbytesatthesender;
thesecondremoves bytesatthereceiver.
16.Designtwosimplealgorithms forbit-stuffing. Thefirstaddsbitsatthesender;the
secondremoves bitsatthereceiver.
17.Asendersendsaseriesofpacketstothesamedestination using5-bitsequence
numbers. Ifthesequence numberstartswith0,whatisthesequence numberafter
sending100packets?
18.Using5-bitsequence numbers, whatisthemaximum sizeofthesendandreceive
windows foreachofthefollowing protocols?
a.Stop-and- WaitARQ
b.Go-Back-N ARQ
c.Selective-Repeat ARQ
19.Designabidirectional algorithm fortheSimplest Protocol usingpiggybacking.
Notethatthebothpartiesneedtousethesamealgorithm.
20.Designabidirectional algOIithm fortheStop-and- WaitProtocolusingpiggybacking.
Notethatbothpartiesneedtousethesamealgorithm.
21.Designabidirectional algorithm fortheStop-and- WaitARQProtocol usingpiggy­
backing. Notethat bothpartiesneedtousethesamealgorithm.
22.Designabidirectional algorithm fortheGo-Back-N ARQProtocol usingpiggy­
backing. Notethatbothpartiesneedtousethesamealgorithm.
23.Designabidirectional algorithm fortheSelective-Repeat ARQProtocolusingpiggy­
backing.Notethatbothpartiesneedtousethesamealgorithm.
24.Figure11.44showsastatediagramtosimulatethebehavior ofStop-and-Wait ARQ
atthesendersite.
Figure11.44Exercise 24
A
ThestateshaveavalueofSn(0or1).Thearrowsshowsthetransitions. Explainthe
eventsthatcausethetwotransitions labeledAandB.SECTION 11.11PRACTICE SET361
25.Figure11.45showsastatediagram tosimulate thebehavior ofStop-and-Wait
ARQatthereceiversite.
Figure11.45Exercise 25
A
ThestateshaveavalueofRn(0or1).Thearrowsshowsthetransitions. Explain
theeventsthatcausethetwotransitions labeledAandB.
26.InStop-and- WaitARQ,wecancombine thestatediagrams ofthesenderand
receiverinExercises 24and25.Onestatedefinesthecombined valuesofRnandSn­
Thismeansthatwecanhavefourstates,eachdefinedby(x,y),wherexdefinesthe
valueofSnandydefinesthevalueofRwInotherwords,wecanhavethefour
statesshowninFigure11.46.Explaintheeventsthatcausethefourtransitions
labeledA,B, C,andD.
Figure11.46Exercise 26
27.ThetimerofasystemusingtheStop-and- WaitARQProtocolhasatime-outof6ms.
DrawtheflowdiagramsimilartoFigure11.11forfourframesiftheroundtripdelay
is4ms.Assumenodataframeorcontrolframeislostordamaged.
28.RepeatExercise 27ifthetime-out is4msandtheroundtripdelayis6.
29.RepeatExercise 27ifthefirstframe (frame 0)islost.
30.AsystemusestheStop-and- WaitARQProtocol. Ifeachpacketcarries1000bitsof
data,howlongdoesittaketosend1millionbitsofdataifthedistancebetweenthe
senderandreceiveris5000KInandthepropagation speedis2x108m?Ignoretrans­
mission,waiting,andprocessing delays.Weassumenodataorcontrolframeislost
ordamaged.
31.RepeatExercise 30usingtheGo-back-N ARQProtocol withawindowsizeof7.
Ignoretheoverhead duetotheheaderandtrailer.
32.RepeatExercise 30usingtheSelective-Repeat ARQProtocol withawindow
sizeof4.Ignoretheoverhead duetotheheaderandthetrailer.CHAPTER 12
Multiple Access
InChapter 11wediscussed datalinkcontrol,amechanism whichprovides alinkwith
reliablecommunication. Intheprotocols wedescribed, weassumed thatthereisan
available dedicated link(orchannel) betweenthesenderandthereceiver.Thisassump­
tionmayormaynotbetrue.If,indeed,wehaveadedicated link,aswhenweconnect
totheInternetusingPPPasthedatalinkcontrolprotocol, thentheassumption istrue
andwedonotneedanything else.
Ontheotherhand,ifweuseourcellularphonetoconnecttoanothercellularphone,
thechannel(thebandallocated tothevendorcompany) isnotdedicated. Apersonafew
feetawayfromusmaybeusingthesamechanneltotalktoherfriend.
Wecanconsiderthedatalinklayerastwosublayers. Theuppersublayerisresponsi­
blefordatalinkcontrol,andthelowersublayerisresponsible forresolving accesstothe
sharedmedia.Ifthechannelisdedicated, wedonotneedthelowersublayer. Figure12.1
showsthesetwosublayers inthedatalinklayer.
Figure12.1Datalinklayerdividedintotwofunctionality-oriented sublayers
Datalinklayer
Datalinkcontrol
Multiple-access resolution
WewillseeinChapter 13thattheIEEEhasactuallymadethisdivisionforLANs.
Theuppersublayer thatisresponsible forflowanderrorcontroliscalledthelogical
linkcontrol(LLC)layer;thelowersublayer thatismostlyresponsible formultiple­
accessresolution iscalledthemediaaccesscontrol(MAC)layer.
Whennodesorstationsareconnected anduseacommon link,calledamultipoint
orbroadcast link,weneedamultiple-access protocoltocoordinate accesstothelink.
Theproblemofcontrolling theaccesstothemediumissimilartotherulesofspeaking
363364CHAPTER 12MULTIPLE ACCESS
inanassembly. Theprocedures guarantee thattherighttospeakisupheldandensure
thattwopeopledonotspeakatthesametime,donotinterrupt eachother,donot
monopolize thediscussion, andsoon.
Thesituation issimilarformultipoint networks. Manyformalprotocols havebeen
devisedtohandleaccesstoasharedlillieWecategorize themintothreegroups.Protocols
belonging toeachgroupareshowninFigure12.2.
Figure12.2Taxonomy ofmultiple-access protocols discussed inthischapter
12.1ALOHA
CSMA
CSMA/CD
CSMA/CA
RANDOM ACCESSReservation
Polling
TokenpassingFDMA
TDMA
CDMA
Inrandom accessorcontention methods, nostationissuperiortoanotherstationand
noneisassigned thecontroloveranother. Nostationpermits, ordoesnotpermit,
anotherstationtosend.Ateachinstance, astationthathasdatatosendusesaprocedure
definedbytheprotocol tomakeadecision onwhetherornottosend.Thisdecision
dependsonthestateofthemedium (idleorbusy).Inotherwords,eachstationcan
transmit whenitdesiresonthecondition thatitfollowsthepredefined procedure,
including thetestingofthestateofthemedium.
Twofeaturesgivethismethoditsname.First,thereisnoscheduled timeforastation
totransmit. Transmission israndomamongthestations.Thatiswhythesemethodsare
calledrandomaccess.Second,norulesspecifywhichstationshouldsendnext.Stations
compete withoneanothertoaccessthemedium. Thatiswhythesemethods arealso
calledcontention methods.
Inarandomaccessmethod,eachstationhastherighttothemediumwithoutbeing
controlled byanyotherstation.However, ifmorethanonestationtriestosend,thereis
anaccessconflict-collision-and theframeswillbeeitherdestroyed ormodified. To
avoidaccessconflictortoresolveitwhenithappens, eachstationfollowsaprocedure
thatanswersthefollowing questions:
oWhencanthestationaccessthemedium?
oWhatcanthestationdoifthemediumisbusy?
oHowcanthestationdetermine thesuccessorfailureofthetransmission?
oWhatcanthestationdoifthereisanaccessconflict?SECTION 12.1RANDOM ACCESS 365
Therandomaccessmethods westudyinthischapterhaveevolvedfromavery
interesting protocol knownasALOHA, whichusedaverysimpleprocedure called
multiple access(MA).Themethodwasimproved withtheadditionofaprocedure that
forcesthestationtosensethemediumbeforetransmitting. Thiswascalledcarriersense
multiple access.Thismethodlaterevolvedintotwoparallelmethods: carriersense
multiple accesswithcollisiondetection (CSMAlCD) andcarriersensemultiple access
withcollision avoidance (CSMA/CA). CSMA/CD tellsthestationwhattodowhena
collision isdetected. CSMA/CA triestoavoidthecollision.
ALOHA
ALOHA, theearliestrandomaccessmethod,wasdeveloped attheUniversity ofHawaii
inearly1970.Itwasdesigned foraradio(wireless) LAN,butitcanbeusedonany
sharedmedium.
Itisobviousthattherearepotential collisions inthisarrangement. Themediumis
sharedbetweenthestations.Whenastationsendsdata,anotherstationmayattemptto
dosoatthesametime.Thedatafromthetwostationscollideandbecomegarbled.
PureALOHA
TheoriginalALOHA protocol iscalledpureALOHA. Thisisasimple,butelegant
protocol. Theideaisthateachstationsendsaframewhenever ithasaframetosend.
However, sincethereisonlyonechanneltoshare,thereisthepossibility ofcollision
betweenframesfromdifferentstations.Figure12.3showsanexampleofframecollisions
inpureALOHA.
Figure12.3FramesinapureALOHAnetwork
[JStation1~I Frame1.11JFrame1.21 ~
Time
[JStation2~ JFrame2.1L -'Frame2.2L ~
Time
[]Station3~ -1Frame3.1 1 JFrame3.2I__~
Time
[]Station4~ JFrame4.1L JFrame4.21 ~
Time
Collision
durationCollision
duration
Therearefourstations(unrealistic assumption) thatcontendwithoneanotherfor
accesstothesharedchannel.Thefigureshowsthateachstationsendstwoframes;there
areatotalofeightframesonthesharedmedium. Someoftheseframescollidebecause
multiple framesareincontention forthesharedchannel. Figure12.3showsthatonly366CHAPTER 12MULTIPLE ACCESS
twoframessurvive:frame1.1fromstation1 andframe3.2fromstation3.Weneedto
mention thatevenifonebitofaframecoexists onthechannelwithonebitfrom
anotherframe,thereisacollision andbothwillbedestroyed.
Itisobviousthatweneedtoresendtheframesthathavebeendestroyed during
transmission. ThepureALOHA protocolreliesonacknowledgments fromthereceiver.
Whenastationsendsaframe,itexpectsthereceivertosendanacknowledgment. Ifthe
acknowledgment doesnotarriveafteratime-out period,thestationassumes thatthe
frame(ortheacknowledgment) hasbeendestroyed andresendstheframe.
Acollision involves twoormorestations.Ifallthesestationstrytoresendtheir
framesafterthetime-out, theframeswillcollideagain.PureALOHA dictatesthat
whenthetime-out periodpasses,eachstationwaitsarandomamountoftimebefore
resendingitsframe.Therandomness willhelpavoidmorecollisions. Wecallthistime
theback-offtimeTB.
PureALOHA hasasecondmethodtopreventcongesting thechannelwithretrans­
mittedframes.Afteramaximum numberofretransmission attemptsKmax'astation
mustgiveupandtrylater.Figure12.4showstheprocedure forpureALOHA basedon
theabovestrategy.
Figure12.4Procedure forpureALOHAprotocol
K:Numberofattempts
Tp:Maximum propagation time
Tfr:Averagetransmission timeforaframe
TB:Back-off time
WaitTBtime
(Ta=RxTporRxTfr)
Choosearandom
numberRbetweenoand2K-1Stationhas
___-- aframetosend
Sendtheil:ame
Waittime-Qut time
(2XTp)
Kma,is
normally 15K=K+ 1
Thetime-outperiodisequaltothemaximum possibleround-trip propagation delay,
whichistwicetheamountoftimerequiredtosendaframebetweenthetwomostwidely
separated stations(2xTp)'Theback-offtimeTBisarandomvaluethatnormally depends
onK(thenumberofattempted unsuccessful transmissions). TheformulaforTBdependson
theimplementation. Onecommon formulaisthebinaryexponential back-off. InthisSECTION 12.1RANDOM ACCESS 367
method,foreachretransmission, amultiplier intherange0to2K-1israndomly chosen
andmultiplied byTp(maximum propagation time)orTrr(theaveragetimerequired to
sendoutaframe)tofindTB'Notethatinthisprocedure, therangeoftherandomnumbers
increases aftereachcollision. ThevalueofKmaxisusuallychosenas 15.
Example 12.1
ThestationsonawirelessALOHAnetworkareamaximum of600kmapart.Ifweassumethat
signalspropagate at3x108mis,wefindTp=(600x105) /(3x108)=2ms.Nowwecanfindthe
valueofTBfordifferentvaluesofK.
a.ForK=1,therangeis{O,I}.Thestationneedstogeneratearandomnumberwitha
valueof0or1.ThismeansthatTBiseither°ms(0x2)or2ms(lx2),basedonthe
outcomeoftherandomvariable.
b.ForK=2,therangeis{O,1,2,3}.ThismeansthatTBcanbe0,2,4,or6ms,basedon
theoutcomeoftherandomvariable.
c.ForK=3,therangeisto,1,2,3,4,5,6, 7}.ThismeansthatTBcanbe0,2,4,...,14ms,
basedontheoutcomeoftherandomvariable.
d.WeneedtomentionthatifK>10,itisnormally setto10.
Vulnerable timeLetusfindthelengthoftime,thevulnerable time,inwhichthere
isapossibility ofcollision. Weassumethatthestationssendfixed-length frameswith
eachframetakingTfrStosend.Figure12.5showsthevulnerable timeforstationA.
Figure12.5Vulnerable timeforpureALOHAprotocol
B'send
collideswith
A'sbeginning
tA'send
collideswith
C'sbeginning
t,,,
IE B ~I j.:...:..-------.,--1 - ,
Ic!~
~c;~c:s~~~J~~~~,~::~~c~cJl
::1
 --:::-~--':------I!.C&1
I·Vulnerable time=2XTfrTime
StationAsendsaframeattimet.Nowimagine stationBhasalreadysentaframe
between t-Tfrandt.Thisleadstoacollision between theframesfromstationAand
stationB.TheendofB'sframecollideswiththebeginning ofA'sframe.Ontheother
hand,suppose thatstationCsendsaframebetween tandt+Tfr.Here,thereisacolli­
sionbetween framesfromstationAandstationC.Thebeginning ofC'sframecollides
withtheendofA'sframe.368CHAPTER 12MULTIPLE ACCESS
Looking atFigure12.5,weseethatthevulnerable time,duringwhichacollision
mayoccurinpureALOHA, is2timestheframetransmission time.
PureALOHA vulnerable time=2xTfr
Example 12.2
ApureALOHA networktransmits 200-bitframesonasharedchannelof200kbps.Whatisthe
requirement tomakethisframecollision-free?
Solution
Average frametransmission timeTfris200bits/200 kbpsor1ms.Thevulnerable timeis2x
1ms=2ms.Thismeansnostationshouldsendlaterthan1msbeforethisstationstartstransmis­
sionandnostationshouldstartsendingduringtheoneI-msperiodthatthisstationissending.
Throughput LetuscallGtheaveragenumberofframesgenerated bythesystem
duringoneframetransmission time.Thenitcanbeprovedthattheaveragenumberof
successful transmissions forpureALOHA isS=Gxe-2G.Themaximum throughput
Smaxis0.184,forG=1.Inotherwords,ifone-half aframeisgenerated duringone
2frametransmission time(inotherwords,oneframeduringtwoframetransmission
times),then18.4percentoftheseframesreachtheirdestination successfully. Thisisan
expected resultbecausethevulnerable timeis2timestheframetransmission time.
Therefore, ifastationgenerates onlyoneframeinthisvulnerable time(andnoothersta­
tionsgenerateaframeduringthis time), theframewillreachitsdestination successfully.
Thethroughput forpureALOHA isS=Gxe-2G.
Themaximum throughput Smax=0.184whenG=(1/2).
Example 12.3
ApureALOHA networktransmits 200-bitframesonasharedchannelof200kbps.Whatisthe
throughput ifthesystem(allstationstogether) produces
a.1000framespersecond
b.500framespersecond
c.250framespersecond
Solution
Theframetransmission timeis2001200kbpsor1ms.
a.Ifthesystemcreates1000framespersecond,thisis1framepermillisecond. Theloadis
1.InthiscaseS=Gxe-2GorS=0.135(13.5percent). Thismeansthatthethroughput is
1000X0.135=135frames.Only135framesoutof1000willprobably survive.
b.Ifthesystemcreates500framespersecond,thisis(1/2)framepermillisecond. The load
is(112).InthiscaseS=G xe-2GorS=0.184(18.4percent). Thismeansthatthe
throughput is500x0.184=92andthatonly92framesoutof500willprobably survive.
Notethatthisisthemaximum throughput case,percentagewise.
c.Ifthesystemcreates250framespersecond,thisis(1/4)framepermillisecond. Theload
is(1/4).InthiscaseS=G xe-2GorS=0.152(15.2percent). Thismeansthatthe
throughput is250x0.152=38.Only38framesoutof250willprobably survive.SECTION /2.1RANDOM ACCESS 369
SlottedALOHA
PureALOHA hasavulnerable timeof2 xTfr.Thisissobecausethereisnorulethat
defineswhenthestationcansend.Astationmaysendsoonafteranotherstationhas
startedorsoonbeforeanotherstationhasfinished. SlottedALOHA wasinvented to
improve theefficiency ofpureALOHA.
InslottedALOHA wedividethetimeintoslotsofTfrsandforcethestationto
sendonlyatthebeginning ofthetimeslot.Figure12.6showsanexample offrame
collisions inslottedALOHA.
Figure12.6FramesinaslottedALOHA network
Collision Collision
duration duration
[JStation]~_ Frame1.] Frame1.2-------------- ------ ---~
Time
Station2-Frame2.1 Frame2.2-:------ --,....--- ------ ---------+
Timea--Station3 Frame3.1 Frame3.2------...,,_....._---------------- ---~
Time
&--Station4 Frame4.1 Frame4.2------ .....,_......_--- ------ ------ ---~
Time
Slot1510t2 Slot3510t4 Slot5Slot6
Because astationisallowedtosendonlyatthebeginning ofthesynchronized time
slot,ifastationmissesthismoment, itmustwaituntilthebeginning ofthenexttime
slot.Thismeansthatthestationwhichstartedatthebeginning ofthisslothasalready
finishedsendingitsframe.Ofcourse,thereisstillthepossibility ofcollision iftwosta­
tionstrytosendatthebeginning ofthesametimeslot.However, thevulnerable timeis
nowreducedtoone-half, equaltoTfrFigure12.7showsthesituation.
Figure12.7showsthatthevulnerable timeforslottedALOHA isone-half thatof
pureALOHA.
SlottedALOHA vulnerable time=Tfr
Throughput Itcanbeprovedthattheaveragenumberofsuccessful transmissions for
slottedALOHA isS=G xe-G.Themaximum throughput Smaxis0.368,whenG=1.
Inotherwords,ifaframeisgenerated duringoneframetransmission time,then36.8
percentoftheseframesreachtheirdestination successfully. Thisresultcanbeexpected
becausethevulnerable timeisequaltotheframetransmission time.Therefore, ifasta­
tiongenerates onlyoneframeinthisvulnerable time(andnootherstationgenerates a
frameduringthistime),theframewillreachitsdestination successfully.
Thethroughput forslottedALOHA isS=:G xe-G.
Themaximum throughput Smax==0.368whenG=1.370CHAPTER 12MULTIPLE ACCESS
Figure12.7Vulnerable timeforslottedALOHAprotocol
AcollideswithC
tr
I
f
I-..,E.,..-----B----~~l
If....
c~I
I,Vulnerable time=TfrTime
Example 12.4
AslottedALOHA network transmits 200-bitframesusingasharedchannelwitha200-kbps
bandwidth. Findthethroughput ifthesystem(allstationstogether) produces
a.1000framespersecond
b.500framespersecond
c.250framespersecond
Solution
Thissituation issimilartotheprevious exerciseexceptthatthenetworkisusingslottedALOHA
insteadofpureALOHA. Theframetransmission timeis200/200kbpsor1ms.
a.InthiscaseGis1.SoS=G xe-GorS=0.368(36.8percent). Thismeansthatthe
throughput is1000x0.0368=368frames.Only368outof1000frameswillprobably
survive.Notethatthisisthemaximum throughput case,percentagewise.
b.HereGis~.InthiscaseS=G xe-GorS=0.303(30.3percent). Thismeansthatthe
throughput is500x0.0303=151.Only151framesoutof500willprobably survive.
c.NowGis1.InthiscaseS=G xe-GorS=0.195(19.5percent). Thismeansthatthe
throughput4is250x0.195=49.Only49framesoutof250willprobably survive.
CarrierSenseMultiple Access(CSMA)
Tominimize thechanceofcollision and,therefore, increase theperformance, theCSMA
methodwasdeveloped. Thechanceofcollision canbereducedifastationsensesthe
medium beforetryingtouseit.Carriersensemultiple access(CSMA) requiresthateach
stationfirstlistentothemedium(orcheckthestateofthemedium) beforesending. Inother
words,CSMAisbasedontheprinciple "sensebeforetransmit" or"listenbefore talk."
CSMAcanreducethepossibility ofcollision, butitcannoteliminate it.Thereason
forthisisshowninFigure12.8,aspaceandtimemodelofaCSMAnetwork. Stations
areconnected toasharedchannel(usually adedicated medium).
Thepossibility ofcollision stillexistsbecauseofpropagation delay;whenastation
sendsaframe,itstilltakestime(although veryshort)forthefirstbittoreacheverystationSECTION 12.1RANDOM ACCESS 371
Figure12.8Space/time modelofthecollision inCSMA
Bstarts
attime11Cstarts
attime12
Areawhere
A'ssignalexists
Areawhere
bothsignalsexist
Time Time
andforeverystationtosenseit.Inotherwords,astationmaysensethemediumandfind
itidle,onlybecausethefirstbitsentbyanotherstationhasnotyetbeenreceived.
AttimetI'stationBsensesthemediumandfindsitidle,soitsendsaframe.Attime
t2(t2>tI)'stationCsensesthemediumandfindsitidlebecause, atthistime,thefirst
bitsfromstationBhavenotreachedstationC.StationCalsosendsaframe.Thetwo
signalscollideandbothframesaredestroyed.
Vulnerable Time
Thevulnerable timeforCSMAisthepropagation timeTp.Thisisthetimeneededfor
asignaltopropagate fromoneendofthemediumtotheother.Whenastationsendsa
frame,andanyotherstationtriestosendaframeduringthistime,acollision will
result.Butifthefirstbitoftheframereachestheendofthemedium, everystationwill
alreadyhaveheardthebitandwillrefrainfromsending. Figure12.9showstheworst
Figure12.9Vulnerable timeinCSMA
Bsenses
here
Ill~~~~~~~
Framepropagation
Time]Vulnerable time
propagation time
Time372CHAPTER 12MULTIPLE ACCESS
case.The leftmost stationAsendsaframeattimetl'whichreachestherightmost sta­
tionDattimetl+Tp.Thegrayareashowsthevulnerable areaintimeandspace.
Persistence Methods
Whatshouldastationdoifthechannelisbusy?Whatshouldastationdoifthechannel
isidle?Threemethods havebeendevisedtoanswerthesequestions: theI-persistent
method,thenonpersistent method,andthep-persistent method.Figure12.10showsthe
behavior ofthreepersistence methodswhenastationfindsachannelbusy.
Figure12.10Behavior ofthreepersistence methods
Sense
andtransmit
~I ------~
 ~ :-Time
Busy
3.I-persistent
SenseSense
andtransmit
Sense I
~:.::::::::w;::::a::::it :::::,~------,w..:..::a::..:.it 't
~C_===
.===!:=J=::J.r------------~ ..Time
Busy
b.Nonpersistent
Transmit
I I I
l l---------------) ..~TimeProbability outcome
doesnotallowtransmission.
I I I
Continuously sense I I I
~ITimeslotITimeslotITimeslot
I-I .1III .1.
Busy
c.p-persistent
Figure12.11showstheflowdiagrams forthesemethods.
I-Persistent TheI-persistent methodissimpleandstraightforward. Inthismethod,
afterthestationfindsthelineidle,itsendsitsframeimmediately (withprobability I).
Thismethodhasthehighestchanceofcollision becausetwoormorestationsmayfind
thelineidleandsendtheirframesimmediately. WewillseeinChapter13thatEthernet
usesthismethod.
Nonpersistent Inthenonpersistent method, astationthathasaframetosend
sensestheline.Ifthelineisidle,itsendsimmediately. Ifthelineisnotidle,itwaitsaSECTION 12.1RANDOM ACCESS 373
Figure12.11Flowdiagramforthreepersistence methods
Stationcantransmit.
a.1-persistent
Useback-off process
asthoughcollision occurred.
c.p-persistentStationcantransmit.
b.Nonpersistent
Idle
Stationcantransmit.
randomamountoftime and thensensesthelineagain.Thenonpersistent approach
reducesthechanceofcollision becauseitisunlikelythattwoormorestationswillwait
thesameamountoftimeandretrytosendsimultaneously. However, thismethod
reducestheefficiency ofthenetworkbecausethemediumremainsidlewhentheremay
bestationswithframestosend.
p-Persistent Thep-persistent methodisusedifthechannelhastimeslotswithaslot
durationequaltoorgreaterthanthemaximum propagation time.Thep-persistent approach
combines theadvantages oftheothertwostrategies. Itreducesthechanceofcollisionand
improves efficiency. Inthismethod,afterthestationfindsthelineidleitfollowsthesesteps:
1.Withprobability p,thestationsendsitsframe.
2.Withprobability q=1-p,thestationwaitsforthebeginning ofthenexttimeslot
andchecksthelineagain.
a.Ifthelineisidle,itgoestostep1.
b.Ifthelineisbusy,itactsasthoughacollision hasoccurred andusestheback­
offprocedure.
CarrierSenseMultiple AccesswithCollision Detection (CSMA/CD)
TheCSMAmethoddoesnotspecifytheprocedure following acollision. Carriersense
multiple accesswithcollision detection (CSMA/CD) augments thealgorithm tohandle
thecollision.374CHAPTER 12MULTIPLEACCESS
Inthismethod,astationmonitors themedium afteritsendsaframetoseeifthe
transmission wassuccessful. Ifso,thestationisfinished.If,however, thereisacolli­
sion,theframeissentagain.
Tobetterunderstand CSMA/CD, letuslookatthefirstbitstransmitted bythetwo
stationsinvolved inthecollision. Although eachstationcontinues tosendbitsinthe
frameuntilitdetectsthecollision, weshowwhathappens asthefirstbitscollide.In
Figure12.12,stationsAandCareinvolved inthecollision.
Figure12.12Collision ofthefirstbitinCSMAlCD
FirstbitofA
~_----FFii;'rs;;t b;it~(JfC C'scollris-io--n;;";;';;"':"':":~l
detection and
Collision abortion
occursA'scollision
detection
andabortion[tl
Transmission
time
14
Time Time
Attimet1,stationAhasexecuted itspersistence procedure andstartssendingthe
bitsofitsframe.Attimet2,stationChasnotyetsensedthefirstbitsentbyA.StationC
executes itspersistence procedure andstartssendingthebitsinitsframe,whichpropa­
gatebothtotheleftandtotheright.Thecollisionoccurssometime aftertimet2'StationC
detectsacollision attimet3whenitreceivesthefirstbitofA'sframe.StationCimmedi­
ately(orafterashorttime,butweassumeimmediately) abortstransmission. StationA
detectscollision attimet4whenitreceivesthefirstbitofC'sframe;italsoimmediately
abortstransmission. Lookingatthefigure,weseethatAtransmits fortheduration t4-tl;
Ctransmits fortheduration t3-t2'Laterweshowthat,fortheprotocol towork,the
lengthofanyframedividedbythebitrateinthisprotocolmustbemorethaneitherof
thesedurations. Attimet4,thetransmission ofA:sframe,thoughincomplete, isaborted;
attimet3,thetransmission ofB'sframe,thoughincomplete, isaborted.
Nowthatweknowthetimedurations forthetwotransmissions, wecanshowa
morecomplete graphinFigure12.13.
Minimum FrameSize
ForCSMAlCD towork,weneedarestriction ontheframesize.Beforesendingthelast
bitoftheframe,thesendingstationmustdetectacollision, ifany,andabortthetransmis­
sion.Thisissobecausethestation,oncetheentireframeissent,doesnotkeepacopyof
theframeanddoesnotmonitorthelineforcollision detection. Therefore, theframetrans­
missiontimeTfrmust beatleasttwotimesthemaximum propagation timeTp.Tounder­
standthereason,letusthinkabouttheworst-case scenario.Ifthetwostationsinvolved in
acollision arethemaximum distanceapart,thesignalfromthefirsttakestimeTptoreach
thesecond,andtheeffectofthecollision takesanothertimeTptoreachthefirst.Sothe
requirement isthatthefirststationmuststillbetransmitting after 2Tp.SECTION 12.1RANDOM ACCESS 375
Figure12.13Collision andabortion inCSMAlCD
Collision
Transmission[1[
~~;!~~i~~i~~~~I~~~~112 ]~ransmissiontIme 13tIme
t4*~~
Adetects
collision and
aborts
TimeCdetects
collision
andaborts Time
Example 12.5
Anetwork usingCSMA/CD hasabandwidth of10Mbps.Ifthemaximum propagation time
(including thedelaysinthedevicesandignoringthetimeneededtosendajamming signal,aswe
seelater)is25.611S,whatistheminimum sizeoftheframe?
Solution
Theframetransmission timeisTfr=2 xTp=51.2 ~s.Thismeans,intheworstcase,astation
needstotransmitforaperiodof51.2~stodetectthecollision. Theminimum sizeoftheframe
is10Mbpsx51.2!-ls=512bitsor64bytes.Thisisactuallytheminimum sizeoftheframefor
Standard Ethernet, aswewillseeinChapter13.
Procedure
NowletuslookattheflowdiagramforCSMAlCD inFigure12.14.Itissimilartothe
onefortheALOHA protocol, buttherearedifferences.
Thefirstdifference istheadditionofthepersistence process.Weneedtosensethe
channelbeforewestartsendingtheframebyusingoneofthepersistence processes we
discussed previously (nonpersistent, I-persistent, orp-persistent). Thecorresponding
boxcanbereplaced byoneofthepersistence processes showninFigure12.11.
Theseconddifference istheframetransmission. InALOHA, wefirsttransmitthe
entireframeandthenwaitforanacknowledgment. InCSMA/CD, transmission and
collision detection isacontinuous process.Wedonotsendtheentireframeandthen
lookforacollision. Thestationtransmits andreceivescontinuously andsimultaneously
(usingtwodifferent ports).Weusealooptoshowthattransmission isacontinuous
process.Weconstantly monitorinordertodetectoneoftwoconditions: eithertrans­
missionisfinishedoracollision isdetected. Eithereventstopstransmission. Whenwe
comeoutoftheloop,ifacollision hasnotbeendetected, itmeansthattransmission is
complete; theentireframeistransmitted. Otherwise, acollision hasoccurred.
Thethirddifference isthe sending ofashortjamming signalthatenforcesthecolli­
sionincaseotherstationshavenotyetsensedthecollision.
EnergyLevel
Wecansaythatthelevelofenergyinachannelcanhavethreevalues:zero,normal,
andabnormal. Atthezerolevel,thechannelisidle.Atthenormallevel,astationhas376CHAPTER 12MULTIPLE ACCESS
Figure12.14Flowdiagramfor theCSMAlCD
K:Numberofattempts
Tp:Maximum propagation time
Tfr:Averagetransmission timeforaframe
Tn:Back-off timeStationhas
aframetosend
Applyoneofthe
persistence methods
(I-persistent, nonpersistent,
orp-persistent)
WaitTBtime
(TB=Rxr"orRXTfr)
Choosearandom
numberRbetweenoand2K-l
Kma\is
normally 15K=K+IEligihlcfurtransmission
Senda
jamming signal
successfully captured thechannelandissendingitsframe.Attheabnormal level,there
isacollision andtheleveloftheenergyistwicethenormallevel.Astationthathasa
frametosendorissendingaframeneedstomonitortheenergyleveltodetermine if
thechannelisidle,busy,orincollision mode.Figure12.15showsthesituation.
Figure12.15Energylevelduringtransmission, idleness, orcollision
Energy
Collision
Frametransmission
IdleFrametransmission Time
Throughput
Thethroughput ofCSMAlCD isgreaterthanthatofpureorslottedALOHA. Themaxi­
mumthroughput occursatadifferentvalueofGandisbasedonthepersistence methodSECTION 12.1RANDOM ACCESS 377
andthevalueofpinthep-persistent approach. ForI-persistent methodthemaximum
throughput isaround50percentwhenG=1.Fornonpersistent method,themaximum
throughput cangoupto90percentwhenGisbetween 3and8.
CarrierSenseMultiple Accesswith
Collision Avoidance (CSMA/CA)
ThebasicideabehindCSMA/CD isthatastationneedstobeabletoreceivewhile
transmitting todetectacollision. Whenthereisnocollision, thestationreceives one
signal:itsownsignal.Whenthereisacollision, thestationreceivestwosignals:itsown
signalandthesignaltransmitted byasecondstation.Todistinguish between thesetwo
cases,thereceived signalsinthesetwocasesmustbesignificantly different. Inother
words,thesignalfromthesecondstationneedstoaddasignificant amountofenergyto
theonecreatedbythefirststation.
Inawirednetwork, thereceived signalhasalmostthesameenergyasthesentsig­
nalbecauseeitherthelengthofthecableisshortortherearerepeaters thatamplifythe
energybetween thesenderandthereceiver. Thismeansthatinacollision, thedetected
energyalmostdoubles.
However, inawirelessnetwork, muchofthesentenergyislostintransmission. The
receivedsignalhasverylittleenergy.Therefore, acollision mayaddonly5to10percent
additional energy.Thisisnotusefulforeffective collision detection.
Weneedtoavoidcollisions onwirelessnetworks becausetheycannotbedetected.
Carriersensemultipleaccesswithcollision avoidance (CSMAlCA) wasinventedforthis
network. Collisions areavoidedthroughtheuseofCSMAICA's threestrategies: theinter­
framespace,thecontention window,andacknowledgments, asshowninFigure12.16.
Figure12.16TiminginCSMAICA
Size:-Found
idle
 l1Jillill1binaryexponential
~~~u~,'i ~'~~l.~. ~__-----,
~ L-. -'HC==:J~
Busy Contention window Sendframe Time-out Time
Interframe Space(IFS)
First,collisions areavoidedbydeferring transmission evenifthechannelisfoundidle.
Whenanidlechannelisfound,thestationdoesnotsendimmediately. Itwaitsfora
periodoftimecalledtheinterframe spaceorIFS.Eventhoughthechannelmay
appearidlewhenitissensed,adistantstationmayhavealreadystartedtransmitting.
Thedistantstation's signalhasnotyetreachedthisstation.TheIFStimeallowsthe
frontofthetransmitted signalbythedistantstationtoreachthisstation.IfaftertheIFS
timethechannelisstillidle,thestationcansend,butitstillneedstowaitatimeequal
tothecontention time(described next).TheIFSvariablecanalsobeusedtoprioritize378CHAPTER 12MULTIPLE ACCESS
stationsorframetypes.Forexample, astationthatisassigned ashorterIFShasa
higherpriority.
InCSMAlCA, theIFScanalsobeusedtodefine
thepriorityofastationoraframe.
Contention Window
Thecontention windowisanamountoftimedividedintoslots.Astationthatisready
tosendchoosesarandomnumberofslotsasitswaittime.Thenumberofslotsinthe
windowchangesaccording tothebinaryexponential back-off strategy.Thismeansthat
itissettooneslotthefirsttimeandthendoubleseachtimethestationcannotdetectan
idlechannelaftertheIFStime.Thisisverysimilartothep-persistent methodexcept
thatarandomoutcome definesthenumberofslotstakenbythewaitingstation.One
interesting pointaboutthecontention windowisthatthestationneedstosensethe
channelaftereachtimeslot.However, ifthestationfindsthechannelbusy,itdoesnot
restarttheprocess; itjuststopsthetimerandrestartsitwhenthechannelissensedas
idle.Thisgivesprioritytothestationwiththelongestwaitingtime.
InCSMAlCA, ifthestationfindsthechannelbusy,
itdoesnotrestartthetimerofthecontention window;
itstopsthetimerandrestartsitwhenthechannelbecomesidle.
Acknowledgment
Withalltheseprecautions, therestillmaybeacollision resulting indestroyed data.
Inaddition, thedatamaybecorrupted duringthetransmission. Thepositiveacknowl­
edgment andthetime-out timercanhelpguarantee thatthereceiverhasreceived the
frame.
Procedure
Figure12.17showstheprocedure. Notethatthechannelneedstobesensedbeforeand
aftertheIFS.Thechannelalsoneedstobesensedduringthecontention time.Foreach
timeslotofthecontention window, thechannelissensed.Ifitisfoundidle,thetimer
continues; ifthechannelisfoundbusy,thetimerisstoppedandcontinues afterthe
timerbecomes idleagain.
CSMAICA andWireless Networks
CSMAICA wasmostlyintended foruseinwirelessnetworks. Theprocedure described
above,however, isnotsophisticated enoughtohandle some particular issuesrelatedto
wireless networks, suchashiddenterminals orexposed terminals. Wewillseehow
theseissuesaresolvedbyaugmenting theaboveprotocol withhand-shaking features.
TheuseofCSMNCA inwirelessnetworks willbediscussed inChapter14.SECTION 12.2CONTROLLED ACCESS 379
Figure12.17Flowdiagramfor CSMAICA
12.2Contention window
sizeisZK-1.
Aftereachslot,ifidle,
continue; ifbusy,haltand
continue whenidle.
No
K=K+I
CONTROLLED ACCESSChoosearandom
numberRbetween
oandZK-I
Incontrolled access,thestationsconsultoneanothertofindwhichstationhastheright
tosend.Astationcannotsendunlessithasbeenauthorized byotherstations.Wediscuss
threepopularcontrolled-access methods.
Reservation
Inthereservation method,astationneedstomakeareservation beforesendingdata.
Timeisdividedintointervals. Ineachinterval, areservation frameprecedes thedata
framessentinthatinterval.380 CHAPTER 12MULTIPLE ACCESS
IfthereareNstationsinthesystem,thereareexactlyNreservation minislots inthe
reservation frame.Eachminislotbelongstoastation.Whenastationneedstosenda
dataframe,itmakesareservation initsownminislot. Thestationsthathavemaderes­
ervations cansendtheirdataframesafterthereservation frame.
Figure12.18showsasituation withfivestationsandafive-minislot reservation
frame.Inthefirstinterval,onlystations1,3,and4havemadereservations. Inthesec­
ondinterval,onlystation1hasmadeareservation.
Figure12.18 Reservation accessmethod
1 2345 1 2345 12345B!m,.------, r,....,--,----,---,,------, r------, '--.-_-J '-T.L...J..,..J-rI-l
Reservation
frame
Polling
Pollingworkswithtopologies inwhichonedeviceisdesignated asaprimary station
andtheotherdevicesaresecondary stations. Alldataexchanges mustbemade
throughtheprimarydeviceevenwhentheultimatedestination isasecondary device.
Theprimarydevicecontrolsthelink;thesecondary devicesfollowitsinstructions. It
isuptotheprimarydevicetodetermine whichdeviceisallowedtousethechannelat
agiventime.Theprimarydevice,therefore, isalwaystheinitiatorofasession(see
Figure12.19).
Figure12.19 Selectandpollfunctions inpollingaccessmethod
Poll
1....------1 ACK1------,Primary Primary
SELr-----'~
1-+----""1 ACK1-----""1
Selectr------l Datar----l~
Iftheprimarywantstoreceivedata,itasksthesecondaries iftheyhaveanything to
send;thisiscalledpollfunction. Iftheprimarywantstosenddata,ittellsthesecondary
togetreadytoreceive;thisiscalledselectfunction.SECTION 12.2CONTROLLED ACCESS 381
Select
Theselectfunction isusedwhenever theprimary devicehassomething tosend.
Remember thattheprimarycontrols thelink.Iftheprimaryisneithersendingnor
receiving data,itknowsthelinkisavailable.
Ifithassomething tosend,theprimarydevicesendsit.Whatitdoesnotknow,
however, iswhetherthetargetdeviceisprepared toreceive.Sotheprimarymustalert
thesecondary totheupcoming transmission andwaitforanacknowledgment ofthe
secondary's readystatus.Beforesendingdata,theprimarycreatesandtransmits a
select(SEL)frame,onefieldofwhichincludestheaddressoftheintended secondary.
Poll
Thepollfunction isusedbytheprimarydevicetosolicittransmissions fromthesec­
ondarydevices.Whentheprimaryisreadytoreceivedata,itmustask(poll)each
deviceinturnifithasanything tosend.Whenthefirstsecondary isapproached, it
responds eitherwithaNAKframeifithasnothingtosendorwithdata(intheformof
adataframe)ifitdoes.Iftheresponse isnegative (aNAKframe),thentheprimary
pollsthenextsecondary inthesamemanneruntilitfindsonewithdatatosend.When
theresponse ispositive(adataframe),theprimaryreadstheframeandreturnsan
acknowledgment (ACKframe),verifying itsreceipt.
TokenPassing
Inthetoken-passing method,thestationsinanetworkareorganized inalogicalring.
Inotherwords,foreachstation,thereisapredecessor andasuccessor. Thepredecessor
isthestationwhichislogically beforethestationinthering;thesuccessor isthestation
whichisafterthestationinthering.Thecurrentstationistheonethatisaccessing the
channelnow.Therighttothisaccesshasbeenpassedfromthepredecessor tothecur­
rentstation.Therightwillbepassedtothesuccessor whenthecurrentstationhasno
moredatatosend.
Buthowistherighttoaccessthechannelpassedfromonestationtoanother? In
thismethod,aspecialpacketcalledatokencirculates throughthering.Theposses­
sionofthetokengivesthestationtherighttoaccessthechannelandsenditsdata.
Whenastationhassomedatatosend,itwaitsuntilitreceivesthetokenfromitspre­
decessor.Itthenholdsthetokenandsendsitsdata.Whenthestationhasnomoredata
tosend,itreleasesthetoken,passingittothenextlogicalstationinthering.Thesta­
tioncannotsenddatauntilitreceivesthetokenagaininthenextround.Inthisprocess,
whenastationreceivesthetokenandhasnodatatosend,itjustpasses the datatothe
nextstation.
Tokenmanagement isneededforthisaccessmethod.Stationsmustbelimitedin
thetimetheycanhavepossession ofthetoken.Thetokenmustbemonitored toensure
ithasnotbeenlostordestroyed. Forexample, ifastationthatisholdingthetokenfails,
thetokenwilldisappear fromthenetwork. Anotherfunctionoftokenmanagement is
toassignpriorities tothestationsandtothetypesofdatabeingtransmitted. Andfinally,
tokenmanagement isneededtomakelow-priority stationsreleasethetokentohigh­
prioritystations.382 CHAPTER 12MULTIPLE ACCESS
LogicalRing
Inatoken-passing network, stationsdonothavetobephysically connected inaring;
theringcanbealogicalone.Figure12.20showfourdifferent physicaltopologies that
cancreatealogicalring.
Figure12.20Logicalringandphysical topology intoken-passing accessmethod
a.Physical ring
1
11
1
111
1-
c.Busringb.Dualring
d.Starring
Inthephysical ringtopology, whenastationsendsthetokentoitssuccessor, the
tokencannotbeseenbyotherstations;thesuccessor isthenextoneinline.Thismeans
thatthetokendoesnothavetohavetheaddressofthenextsuccessor. Theproblemwith
thistopology isthatifoneofthelinks-the mediumbetween twoadjacentstations­
fails,thewholesystemfails.
Thedualringtopology usesasecond(auxiliary) ringwhichoperatesinthereverse
direction compared withthemainring.Thesecondringisforemergencies only(suchas
asparetireforacar).Ifoneofthelinksinthemainringfails,thesystemautomatically
combines thetworingstoformatemporary ring.Afterthefailedlinkisrestored, the
auxiliary ringbecomes idleagain.Notethatforthistopology towork,eachstationneeds
tohavetwotransmitter portsandtworeceiverports.Thehigh-speed TokenRingnetworks
calledFDDI(FiberDistributed DataInterface) andCDDI(Copper Distributed Data
Interface) usethistopology.
Inthebusringtopology, alsocalledatokenbus,thestationsareconnected toasin­
glecablecalledabus.They,however, makealogicalring,becauseeachstationknows
theaddressofitssuccessor (andalsopredecessor fortokenmanagement purposes).
Whenastationhasfinishedsendingitsdata,itreleasesthetokenandinsertstheaddress
ofitssuccessor inthetoken.Onlythestationwiththeaddressmatching thedestination
addressofthetokengetsthetokentoaccessthesharedmedia.TheTokenBusLAN,
standardized byIEEE,usesthistopology.
Inastarringtopology, thephysicaltopology isastar.Thereisahub,however, that
actsastheconnector. Thewiringinsidethehubmakesthering;thestationsarecon­
nectedtothisringthroughthetwowireconnections. Thistopology makesthenetworkSECTION 12.3CHANNELIZATION 383
lesspronetofailurebecauseifalinkgoesdown,itwillbebypassed bythehubandthe
restofthestationscanoperate.Alsoaddingandremoving stationsfromtheringiseasier.
Thistopology isstillusedintheTokenRingLANdesigned byIBM.
12.3CHANNELIZATION
Channelization isamultiple-access methodinwhichtheavailable bandwidth ofalink
issharedintime,frequency, orthroughcode,betweendifferent stations.Inthissection,
wediscussthreechannelization protocols: FDMA,TDMA,andCDMA.
Weseetheapplication ofallthesemethods inChapter 16
whenwediscusscellularphonesystems.
Frequency-Division Multiple Access(FDMA)
Infrequency-division multiple access(FDMA), theavailable bandwidth isdivided
intofrequency bands.Eachstationisallocated abandtosenditsdata.Inotherwords,
eachbandisreserved foraspecificstation,anditbelongstothestationallthetime.
Eachstationalsousesabandpass filtertoconfinethetransmitter frequencies. Topre­
ventstationinterferences, theallocated bandsareseparated fromoneanotherbysmall
guardbands.Figure12.21showstheideaofFDMA.
Figure12.21 Frequency-division multiple access(FDMA)
Data Data
Silentf~ •••~t
f~C--------_______ .J
_______ .J•••
--------
tData"I
f~--------========_______ .J•••-------­_______ ..J
-.--,--"----
tCommon
channel
Data
InFDMA,theavailable bandwidth ofthecommon channel
isdividedintobandsthatareseparated byguardbands.384CHAPTER 12MULTIPLE ACCESS
FDMAspecifies apredetermined frequency bandfortheentireperiodofcommu­
nication. Thismeansthatstreamdata(acontinuous flowofdatathatmaynotbepack­
etized)caneasilybeusedwithFDMA.WewillseeinChapter16howthisfeaturecan
beusedincellulartelephone systems.
Weneedtoemphasize thatalthough FDMAandFDMconceptually seemsimilar,
therearedifferences between them.FDM,aswesawinChapter6,isaphysical layer
technique thatcombines theloadsfromlow-bandwidth channels andtransmits themby
usingahigh-bandwidth channel. Thechannels thatarecombined arelow-pass. The
multiplexer modulates thesignals,combines them,andcreatesabandpass signal.The
bandwidth ofeachchannelisshiftedbythemultiplexer.
FDMA,ontheotherhand,isanaccessmethodinthedatalinklayer.Thedatalink
layerineachstationtellsitsphysical layertomakeabandpass signalfromthedata
passedtoit.Thesignalmustbecreatedintheallocated band.Thereisnophysicalmul­
tiplexeratthephysical layer.Thesignalscreatedateachstationareautomatically
bandpass-filtered. Theyaremixedwhentheyaresenttothecommon channel.
Time-Division Multiple Access(TDMA)
Intime-division multiple access(TDMA), thestationssharethebandwidth ofthe
channelintime.Eachstationisallocated atimeslotduringwhichitcansenddata.
Eachstationtransmits itsdatainisassigned timeslot.Figure12.22showstheidea
behindTDMA.
Figure12.22Time-division multipleaccess(TDMA)
Data Data
f
~-.;"-I,--I::::I···
IIII,rf
-, II,",IIII···
tI'II
DataCommon
channel
f
I
I :•••,'
Silentf
-I~-ll-­
II II
IJIII
IIIII
Data
Themainproblem withTDMAliesinachieving synchronization between thedifferent
stations.Eachstationneedstoknowthebeginning ofitsslotandthelocationofitsslot.
Thismaybedifficultbecauseofpropagation delaysintroduced inthesystemifthesta­
tionsarespreadoveralargearea.Tocompensate forthedelays,wecaninsertguardSECTION 12.3CHANNELIZATION 385
times.Synchronization isnormally accomplished byhavingsomesynchronization bits
(normally refenedtoaspreamble bits)atthebeginning ofeachslot.
InTDMA,thebandwidth isjustonechannelthatis
timeshared betweendifferent stations.
Wealsoneedtoemphasize thatalthough TDMAandTDMconceptually seemthe
same,therearedifferences between them.TDM,aswesawinChapter6,isaphysical
layer technique thatcombines thedatafromslowerchannels andtransmits themby
usingafasterchannel. Theprocessusesaphysical multiplexer thatinterleaves data
unitsfromeachchannel.
TDMA,ontheotherhand,isanaccessmethodinthedatalinklayer.Thedatalink
layerineachstationtellsitsphysical layertousetheallocated timeslot.Thereisno
physicalmultiplexer atthephysicallayer.
Code-Division Multiple Access(CDMA)
Code-division multiple access(CDMA) wasconceived severaldecadesago.Recent
advances inelectronic technology havefinallymadeitsimplementation possible.
CDMAdiffersfromFDMAbecauseonlyonechanneloccupies theentirebandwidth of
thelink.ItdiffersfromTDMAbecauseallstationscansenddatasimultaneously; there
isnotimesharing.
InCDMA,onechannelcarriesalltransmissions simultaneously.
Analogy
Letusfirstgiveananalogy.CDMAsimplymeanscommunication withdifferent codes.
Forexample, inalargeroomwithmanypeople,twopeoplecantalkinEnglishif
nobodyelseunderstands English. Another twopeoplecantalkinChineseiftheyare
theonlyoneswhounderstand Chinese, andsoon.Inotherwords,thecommon channel,
thespaceoftheroominthiscase,caneasilyallowcommunication between several
couples,butindifferent languages (codes).
Idea
Letusassumewehavefourstations1,2,3,and4connected tothesamechannel. The
datafromstation1aredl,fromstation2ared2,andsoon.Thecodeassigned tothe
firststationiscI,tothesecondisc2,andsoon.Weassumethattheassigned codeshave
twoproperties.
1.Ifwemultiply eachcodebyanother,wegetO.
2.Ifwemultiply eachcodebyitself,weget4(thenumberofstations).
Withthesetwoproperties inmind,letusseehowtheabovefourstationscansenddata
usingthesamecommon channel, asshowninFigure12.23.
Station1mUltiplies (aspecialkindofmultiplication, aswewillsee)itsdatabyits
codetogetdl.Cl'Station2multiplies itsdatabyitscodetogetd2.c2'Andsoon.The386 CHAPTER 12MULTIPLE ACCESS
Figure12.23Simpleideaofcommunication withcode
Id,'(',+d2•c2+d3•('3+d4•('4I
DataCommon
channel
datathatgoonthechannelarethesumofalltheseterms,asshowninthebox.Any
stationthatwants to receivedatafromoneoftheotherthreemultiplies thedataonthe
channelbythecodeofthesender.Forexample, supposestations1and2aretalkingto
eachother.Station2wantstohearwhatstationIissaying.Itmultiplies thedataonthe
channelbycl'thecodeofstation1.
Because (cl.cl)is4,but(c2.cI),(c3.cI),and(c4.cl)areallOs,station2divides
theresultby4togetthedatafromstation1.
data=(d}.Cj+dz.Cz+d3.C3+d4.c4).Cl
=dj•Cl.Cj+dz.Cz.Cl+d3.C3.Cl+d4.C4'CI=4Xd1
Chips
CDMAisbasedoncodingtheory.Eachstationisassigned acode,whichisasequence
ofnumbers calledchips,asshowninFigure12.24.Thecodesarefortheprevious
example.
Figure12.24 Chipsequences
C3
I[+1+1+1+11I1[+1-1+1-I)II[+1+\-I-11II[+\-1-1+IJI
Laterinthischapterweshowhowwechosethesesequences. Fornow,weneedto
knowthatwedidnotchoosethesequences randomly; theywerecarefully selected.
Theyarecalledorthogonal sequences andhavethefollowing properties:
1.Eachsequence ismadeofNelements, whereNisthenumberofstations.SECTION 12.3CHANNELIZATION 387
2.Ifwemultiply asequence byanumber,everyelementinthesequence ismultiplied
bythatelement. Thisiscalledmultiplication ofasequence byascalar.Forexample,
2.[+1+1-1-1]=[+2+2-2-2]
3.Ifwemultiply twoequalsequences, elementbyelement, andaddtheresults,we
getN,whereNisthenumberofelements intheeachsequence. Thisiscalledthe
innerproduct oftwoequalsequences. Forexample,
[+1+1-1-n·[+1+1-1-1]= 1+ 1+ 1+ 1= 4
4.Ifwemultiply twodifferent sequences, elementbyelement, andaddtheresults,
wegetO.Thisiscalledinnerproductoftwodifferent sequences. Forexample,
[+1+1-1-1]•[+1+1+1+1]= 1+ 1-1-1=0
5.Addingtwosequences meansaddingthecorresponding elements. Theresultis
anothersequence. Forexample,
[+1+1-1-1]+[+1+1+1+1]=[+2+2 00]
DataRepresentation
Wefollowtheserulesforencoding:Ifastationneedstosenda 0bit,itencodesitas-1;
ifitneedstosenda 1bit,itencodesitas+1.Whenastationisidle,itsendsnosignal,
whichisinterpreted asaO.TheseareshowninFigure12.25.
Figure12.25 Datarepresentation inCDMA
IDatabit0--.~-IIIDatabitI----1.~+1I!Silence----I.~ 0I
Encoding andDecoding
Asasimpleexample, weshowhowfourstationssharethelinkduringaI-bitinterval.
Theprocedure caneasilyberepeated foradditional intervals. Weassumethatstations1
and2aresendinga 0bitandchannel4issendinga 1bit.Station3issilent.Thedataat
thesendersitearetranslated to-1,-1,0,and+1.Eachstationmultiplies thecorrespond­
ingnumberbyitschip(itsorthogonal sequence), whichisuniqueforeachstation.The
resultisanewsequence whichissenttothechannel. Forsimplicity, weassumethatall
stationssendtheresulting sequences atthesametime.Thesequence onthechannelis
thesumofallfoursequences asdefinedbefore.Figure12.26showsthesituation.
Nowimaginestation3,whichwesaidissilent,islistening tostation2.Station3mul­
tipliesthetotaldataonthechannelbythecodeforstation2,whichis[+1-1+1-1],toget
[-1-1-3 +1]·[+1-1+1-1]=-4/4=-1......bit1388 CHAPTER 12MULTIPLE ACCESS
Figure12.26SharingchannelinCDMA
Bita Bita
C1
1+1+1+1+IJ
d1•c1
[-1-I-I-I]C2
1+1-I+1-1]
[-1-1-3+1]
DataCommon
channel
c.-
[+1+1-1-11C4
1+1-I-1+11
Silent Bit1
SignalLevel
Theprocesscanbebetterunderstood ifweshowthedigitalsignalproduced byeach
stationandthedatarecovered atthedestination (seeFigure12.27).Thefigureshowsthe
corresponding signalsforeachstation(usingNRZ-Lforsimplicity) andthesignalthat
isonthecommon channel.
Figure12.27DigitalsignalcreatedbyfourstationsinCDMA
BitO~ 1-1-1-I-I]
BitO~ 1-1+1-I+1]
Silent~ [00 00]
BitI~ 1+1-I-I+1]
DataonthechannelTime
Time
Time
Time
Time
Figure12.28showshowstation3candetectthedatasentbystation2byusingthe
codeforstation2.Thetotaldataonthechannelaremultiplied (innerproductopera­
tion)bythesignalrepresenting station2chipcodetogetanewsignal.Thestationthen
integrates andaddstheareaunderthesignal,togetthevalue-4,whichisdividedby4
andinterpreted asbitO.SECTION 12.3CHANNELIZATION 389
Figure12.28 Decoding ofthecomposite signalforoneinCDMA
Dataonthechannel
Time
Station2'scodem [+1-I+1-1]
Innerproductresult
Summing thevaluesTime
Time
Time
-4~-4/4~-I~BitO
Sequence Generation
Togeneratechipsequences, weuseaWalshtable,whichisatwo-dimensional tablewith
anequalnumberofrowsandcolumns, asshowninFigure12.29.
Figure12.29 General ruleandexamples ofcreating Walshtables
a.Twobasicrules
WI=[+1J+1+1+1+1
+1-1+1-1
W4=
[+1+1J+1 +1 -1 -1
Wz=
+1-1 +1-1-1+1
b.Generation ofWI'Wz,andW4
IntheWalshtable,eachrowisasequence ofchips.WIforaone-chip sequence has
onerowandonecolumn.Wecanchoose-lor+1forthechipforthistrivialtable(we
chose+1).According toWalsh,ifweknowthetableforNsequences WN'wecancreate
thetablefor2Nsequences W2N,asshowninFigure12.29.TheWNwiththeoverbarWN
standsforthecomplement ofWN'whereeach+1ischanged to-1andviceversa.
Figure12.29alsoshowshowwecancreateW2andW4fromWI'AfterweselectWI,W2390 CHAPTER 12MULTIPLE ACCESS
canbemadefromfourWj's,withthelastonethecomplement ofWl'AfterW2isgener­
ated,W4canbemadeoffourW2's,withthelastonethecomplement ofW2.Ofcourse,
Wsiscomposed offourW4's,andsoon.Note that afterWNismade,eachstationis
assigned achipcorresponding toarow.
Something weneedtoemphasize isthatthenumberofsequences Nneedstobea
powerof2.Inotherwords,weneedtohaveN=2m.
Thenumberofsequences inaWalshtableneedstobeN=2m.
Example 12.6
Findthechipsforanetworkwith
a.Twostations
b.Fourstations
Solution
WecanusetherowsofW2andW4inFigure12.29:
a.Foratwo-station network, wehave[+1+1]and[+1-1].
b.Forafour-station network wehave[+1+1+1+1],[+1-1+1-1],[+1+1-1-1],and
[+1-1-1 +1].
Example 12.7
Whatisthenumberofsequences ifwehave90stationsinournetwork?
Solution
Thenumberofsequences needstobe2m.Weneedtochoosem=7andN=27or128.Wecan
thenuse90ofthesequences asthechips.
Example 12.8
Provethatareceiving stationcangetthedatasentbyaspecificsenderifitmultiplies theentire
dataonthechannelbythesender'schipcodeandthendividesitbythenumberofstations.
Solution
Letusprovethisforthefirststation,usingourprevious four-station example. Wecansaythatthe
dataonthechannelD=Cdl.("1+d2.("2+d3.("3+d4.("4)'Thereceiverwhichwantstogetthe
datasentbystationImultiplies thesedataby("I'
D.("1=(d1•("1+d2.("2+d3.("3+d4.("4).("1
=d1.("1.("1+d2.("2.("1+d3.("3.("1+d4.("4.("1
=dI XN+d2X0+d3X0+d4X0
=dlxN
WhenwedividetheresultbyN,wegetdI'
12.4RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
books.Theitemsinbrackets [...Jrefertothereference listattheendofthetext.SECTION 12.6SUMMARY 391
Books
Multiple accessisdiscussed inChapter4of[Tan03],Chapter16of[Sta04],Chapter6of
[GW04], andChapter8of[For03].Moreadvanced materials canbefoundin[KMK04].
12.5KEYTERMS
I-persistent method
ALOHA
binaryexponential backup
carriersensemultiple access(CSMA)
carriersensemultiple accesswith
collision avoidance (CSMAlCA)
carriersensemultiple accesswith
collision detection (CSMAlCD)
channelization
code-division multiple access(CDMA)
collision
contention
controlled access
frequency-division multiple access
(FDMA)
innerproduct
interframe space(IFS)
jamming signalmultiple access(MA)
nonpersistent method
orthogonal sequence
polling
p-persistent method
primarystation
propagation time
pureALOHA
randomaccess
reservation
secondary station
slottedALOHA
time-division multiple access
(TDMA)
token
tokenpassing
vulnerable time
Walshtable
12.6SUMMARY
oWecanconsiderthedatalinklayerastwosublayers. Theuppersublayerisresponsible
fordatalinkcontrol,andthelowersublayerisresponsible forresolving accesstothe
sharedmedia.
UManyformalprotocols havebeendevisedtohandleaccesstoasharedlink.Wecate­
gorizethemintothreegroups:randomaccessprotocols, controlled accessprotocols,
andchannelization protocols.
oInrandomaccessorcontention methods, nostationissuperiortoanotherstation
andnoneisassigned thecontroloveranother.
oALOHA allowsmultiple access(MA)tothesharedmedium.There arepotential
collisions inthisarrangement. Whenastationsendsdata,anotherstationmayattempt
todosoatthesametime.Thedatafromthetwostationscollideandbecomegarbled.
oTominimize thechanceofcollision and,therefore, increase theperformance, the
CSMAmethodwasdeveloped. Thechanceofcollision canbereducedifastation392CHAPTER 12MULTIPLE ACCESS
sensesthemediumbeforetryingtouseit.Carriersensemultiple access(CSMA)
requiresthateachstationfirstlistentothemediumbeforesending.Threemethods
havebeendevisedforcarriersensing:I-persistent, nonpersistent, andp-persistent.
oCarriersensemultiple accesswithcollision detection (CSMA/CD) augments the
CSMAalgorithm tohandlecollision. Inthismethod,astationmonitors themedium
afteritsendsaframetoseeifthetransmission wassuccessful. Ifso,thestationis
finished. If,however, thereisacollision, theframeissentagain.
DToavoidcollisions onwirelessnetworks, carriersensemultipleaccesswithcollision
avoidance (CSMA/CA) wasinvented. Collisions areavoidedthroughtheusethree
strategies: theinterframe space,thecontention window, andacknowledgments.
oIncontrolled access,thestationsconsultoneanothertofindwhichstationhasthe
righttosend.Astationcannotsendunlessithasbeenauthorized byotherstations.
Wediscussed threepopularcontrolled-access methods: reservation, polling,and
tokenpassing.
oInthereservation accessmethod, astationneedstomakeareservation before
sendingdata.Timeisdividedintointervals. Ineachinterval,areservation frame
precedes thedataframessentinthatinterval.
oInthepollingmethod,alldataexchanges mustbemadethroughtheprimarydevice
evenwhentheultimatedestination isasecondary device.Theprimarydevicecontrols
thelink;thesecondary devicesfollowitsinstructions.
DInthetoken-passing method,thestationsinanetworkareorganized inalogical
ring.Eachstationhasapredecessor andasuccessor. Aspecialpacketcalleda
tokencirculates throughthering.
oChannelization isamultiple-access methodinwhichtheavailable bandwidth ofa
linkissharedintime,frequency, orthroughcode,between different stations.We
discussed threechannelization protocols: FDMA,TDMA,andCDMA.
DInfrequency-division multipleaccess(FDMA), theavailable bandwidth isdivided
intofrequency bands.Eachstationisallocated abandtosenditsdata.Inotherwords,
eachbandisreservedforaspecificstation,anditbelongstothestationallthetime.
DIntime-division multiple access(TDMA), thestationssharethebandwidth ofthe
channelintime.Eachstationisallocated atimeslotduringwhichitcansenddata.
Eachstationtransmits itsdatainitsassigned timeslot.
oIncode-division multipleaccess(CDMA), thestationsusedifferentcodestoachieve
multipleaccess.CDMAisbasedoncodingtheoryandusessequences ofnumbers
calledchips.Thesequences aregenerated usingorthogonal codessuchtheWalsh
tables.
12.7PRACTICE SET
ReviewQuestions
1.Listthreecategories ofmultipleaccessprotocols discussed inthischapter.
2.Definerandomaccessandlistthreeprotocols inthiscategory.SECTION 12.7PRACTICE SET 393
3.Definecontrolled accessandlistthreeprotocols inthiscategory.
4.Definechannelization andlistthreeprotocols inthiscategory.
5.Explainwhycollision isanissueinarandomaccessprotocol butnotin controlled
accessorchannelizing protocols.
6.Compare andcontrastarandomaccessprotocol withacontrolled accessprotocol.
7.Compare andcontrastarandomaccessprotocol withachannelizing protocol.
8.Compare andcontrastacontrolled accessprotocol withachannelizing protocol.
9.Doweneedamultiple accessprotocol whenweusethe1ocalloop ofthetelephone
company toaccesstheInternet? Why?
10.Doweneedamultiple accessprotocol whenweuseoneCATVchanneltoaccess
theInternet? Why?
Exercises
11.WehaveapureALOHA networkwith100stations.IfTfr=1}.is,whatisthenumber
offrames/s eachstationcansendtoachievethemaximum efficiency.
12.RepeatExercise 11forslottedALOHA.
13.OnehundredstationsonapureALOHA networkshareal-Mbpschannel.Ifframes
are1000bitslong,findthethroughput ifeachstationissending 10framesper
second.
14.RepeatExercise 13forslottedALOHA.
15.InaCDMAlCD network with adatarateof10Mbps,theminimum framesizeis
foundtobe512bitsforthecorrectoperation ofthecollision detection process.What
shouldbetheminimum framesizeifweincrease thedatarateto100Mbps?To
1Gbps?To10Gbps?
16.InaCDMAlCD network withadatarateof10Mbps,themaximum distance
between anystationpairisfoundtobe2500mforthecorrectoperation ofthecol­
lisiondetection process.Whatshouldbethemaximum distanceifweincrease the
datarateto100Mbps?To1Gbps?To10Gbps?
17.InFigure12.12,thedatarateis10Mbps,thedistance between stationAandCis
2000m,andthepropagation speedis2 x108mls.StationAstartssendingalong
frameattimet1=0;stationCstartssendingalongframeattimet2=3}.is.The
sizeoftheframeislongenoughtoguarantee thedetection ofcollision byboth
stations. Find:
a.ThetimewhenstationChearsthecollision (t3)'
b.ThetimewhenstationAhearsthecollision (t4)'
c.ThenumberofbitsstationAhassentbeforedetecting thecollision.
d.ThenumberofbitsstationChassentbeforedetecting thecollision.
18.RepeatExercise 17ifthedatarateis100Mbps.
19.Calculate theWalshtableWsfromW4inFigure12.29.
20.Recreate theW2andW4tablesinFigure12.29usingWI=[-1].Compare therecre­
atedtableswiththeonesinFigure12.29.
21.Provethethirdandfourthorthogonal properties ofWalshchipsforW4inFigure12.29.394CHAPTER 12MULTIPLE ACCESS
22.Provethethirdandfourthorthogonal properties ofWalshchipsforW4recreated in
Exercise 20.
23.Repeatthescenariodepicted inFigures12.27to12.28ifbothstations1and3are
silent.
24.Anetworkwithoneprimaryandfoursecondary stationsusespolling.Thesizeofa
dataframeis1000bytes.Thesizeofthepoll,ACK,andNAKframesare32bytes
each.Eachstationhas5framestosend.Howmanytotalbytesareexchanged ifthere
isnolimitation onthenumberofframesastationcansendinresponse toapoll?
25.RepeatExercise 24ifeachstationcansendonlyoneframeinresponse toapoll.
Research Activities
26.Canyouexplainwhythevulnerable timeinALOHA dependsonTpf'butinCSMA
dependsonTp?
27.Inanalyzing ALOHA, weuseonlyoneparameter, time;inanalyzing CSMA,we
usetwoparameters, spaceandtime.Canyouexplainthereason?CHAPTER 13
WiredLANs:Ethernet
InChapter1,welearnedthatalocalareanetwork(LAN)isacomputer networkthatis
designed foralimitedgeographic areasuchasabuildingoracampus.Although aLAN
canbeusedasanisolatednetworktoconnectcomputers inanorganization forthesole
purposeofsharingresources, mostLANstodayarealsolinkedtoawideareanetwork
(WAN)ortheInternet.
TheLANmarkethasseenseveraltechnologies suchasEthernet, TokenRing,
TokenBus,FDDI,andATMLAN.Someofthesetechnologies survivedforawhile,but
Ethernet isbyfarthedominant technology.
Inthischapter,wefirstbrieflydiscusstheIEEEStandard Project802,designed to
regulate themanufacturing andinterconnectivity between different LANs.Wethen
concentrate ontheEthernet LANs.
Although Ethernet hasgonethroughafour-generation evolution duringthelast
fewdecades, themainconcepthasremained. Ethernet haschanged tomeetthemarket
needsandtomakeuseofthenewtechnologies.
13.1IEEESTANDARDS
In1985,theComputer SocietyoftheIEEEstartedaproject,calledProject802,toset
standards toenableintercommunication amongequipment fromavarietyofmanufac­
turers.Project802doesnotseektoreplaceanypartoftheOSIortheInternetmodel.
Instead,itisawayofspecifying functions ofthephysical layerandthedatalinklayer
ofmajorLANprotocols.
Thestandard wasadoptedbytheAmerican National Standards Institute(ANSI).In
1987,theInternational Organization forStandardization (ISO)alsoapproved itasan
international standard underthedesignation ISO8802.
Therelationship ofthe802Standard tothetraditional OSImodelisshowninFig­
ure13.1.TheIEEEhassubdivided thedatalinklayerintotwosublayers: logicallink
control(LLC)andmediaaccesscontrol(MAC).IEEEhasalsocreatedseveralphys­
icallayer standards fordifferent LANprotocols.
395396CHAPTER 13WIREDLANs:ETHERNET
Figure13.1IEEEstandardfor LANs
LLC:Logicallinkcontrol
MAC:Mediaaccesscontrol
Upperlayers Upperlayers
Datalinklayer
Physical layerEthernet
MAC
Ethernet
physical layers
(several)TokenRing
MAC
TokenRing
physical layerTokenBus
MAC
TokenBus
physical layer....',:""
OSlorInternetmodel IEEEStandard
DataLinkLayer
Aswementioned before,thedatalinklayerintheIEEEstandard isdividedintotwo
sublayers: LLCandMAC.
LogicalLinkControl(LLC)
InChapterII,wediscussed datalinkcontrol.Wesaidthatdatalinkcontrolhandles
framing, flowcontrol,anderrorcontrol.InIEEEProject802,flowcontrol,errorcon­
trol,andpartoftheframingdutiesarecollected intoonesublayer calledthelogicallink
control.Framing ishandledinboththeLLCsublayer andtheMACsublayer.
TheLLCprovides onesingledatalinkcontrolprotocol forallIEEELANs.Inthis
way,theLLCisdifferent fromthemediaaccesscontrolsublayer,whichprovides differ­
entprotocols fordifferent LANs.AsingleLLCprotocol canprovideinterconnectivity
between different LANsbecauseitmakestheMACsublayer transparent. Figure13.1
showsonesingleLLCprotocol servingseveralMACprotocols.
Framing LLCdefinesaprotocol data unit(PDU)thatissomewhat similartothatof
HDLC.Theheadercontains acontrolfieldliketheoneinHDLC;thisfieldisusedfor
flowanderrorcontrol.Thetwootherheaderfieldsdefinetheupper-layer protocol
atthesourceanddestination thatusesLLC.Thesefieldsarecalledthedestination
serviceaccesspoint(DSAP) andthesourceserviceaccesspoint(SSAP). Theother
fieldsdefinedinatypicaldatalinkcontrolprotocol suchasHDLCaremovedtothe
MACsublayer.Inotherwords,aframedefinedinHDLCisdividedintoaPDUatthe
LLCsublayer andaframeattheMACsublayer,asshowninFigure13.2.
NeedforLLCThepurposeoftheLLCistoprovideflowanderrorcontrolforthe
upper-layer protocols thatactuallydemand theseservices. Forexample, ifaLANor
severalLANsareusedinanisolatedsystem,LLCmaybeneededtoprovideflowand
errorcontrolfortheapplication layerprotocols. However, mostupper-layer protocolsSECTION 13.2STANDARD ETHERNET 397
Figure13.2HDLCframecompared withLLCandMACframes
LLCPDD
I_h...ea...de...r....f...:.......p_y .......·....Hco
SSAP:Sourceserviceacces,point D SUpper-layer SS
A AControldatap p
Upper-layerI ,
Address Control FCS-I I
dataI I
I I
I I
HDLCframe MAC.. ......
~I...-MACaluadDSAP'Destination serviceaccesspoint
MACframe
suchasIP(discussed inChapter20),donotusetheservicesofLLC.Forthisreason,
weendourdiscussion ofLLC.
MediaAccessControl(MAC)
InChapter 12,wediscussed multiple accessmethods including randomaccess,con­
trolledaccess,andchannelization. IEEEProject802hascreatedasublayer called
mediaaccesscontrolthatdefinesthespecificaccessmethodforeachLAN.Forexam­
ple,itdefinesCSMA/CD asthemediaaccessmethodforEthernet LANsandthetoken­
passingmethodforTokenRingandTokenBusLANs.Aswediscussed intheprevious
section,partoftheframingfunction isalsohandledbytheMAClayer.
IncontrasttotheLLCsublayer, theMACsublayer contains anumberofdistinct
modules; eachdefinestheaccessmethodandtheframingformatspecifictothecorre­
sponding LANprotocol.
Physical Layer
Thephysical layerisdependent ontheimplementation andtypeofphysical media
used.IEEEdefinesdetailedspecifications foreachLANimplementation. Forexample,
although thereisonlyoneMACsublayerforStandard Ethernet, thereisadifferent
physical layerspecifications foreachEthernet implementations aswewillseelater.
13.2STANDARD ETHERNET
TheoriginalEthernet wascreatedin1976atXerox'sPaloAltoResearch Center(PARC).
Sincethen,ithasgonethroughfourgenerations: Standard Ethernet (lotMbps),Fast
Ethernet (100Mbps),GigabitEthernet (lGbps),andTen-Gigabit Ethernet (l0Gbps),
asshowninFigure13.3.Webrieflydiscussallthesegenerations startingwiththefirst,
Standard (ortraditional) Ethernet.
tEthernet definedsomeI-Mbpsprotocols, buttheydidnotsurvive.398CHAPTER 13WIREDLANs:ETHERNET
Figure13.3Ethernet evolution throughfourgenerations
HIl\Ibps 100Mbps 10Gbp~
MACSublayer
InStandard Ethernet, theMACsublayergovernstheoperation oftheaccessmethod.It
alsoframesdatareceivedfromtheupperlayerandpassesthemtothephysicallayer.
FrameFormat
TheEthernet framecontains sevenfields:preamble, SFD,DA,SA,lengthortypeof
protocoldataunit(PDU),upper-layer data,andtheCRe.Ethernetdoesnotprovideany
mechanism foracknowledging receivedframes,makingitwhatisknownasanunreli­
ablemedium. Acknowledgments mustbeimplemented atthehigherlayers.Theformat
oftheMACframeisshowninFigure13.4.
Figure13.4802.3MACframe
Pr~amble: 56bitsofalternating 1sandas.
SFD:Startframedelimiter, flag(10101011)
I.7bytes 1byte.1
Physical layer
header6bytes 6bytesDataandpadding
DPreamble. Thefirstfieldofthe802.3framecontains7bytes(56bits)ofalternat­
ingOsandIsthatalertsthereceiving systemtothecomingframeandenablesitto
synchronize itsinputtiming.Thepatternprovides onlyanalertandatimingpulse.
The56-bitpatternallowsthestationstomisssomebitsatthebeginning ofthe
frame.Thepreamble isactuallyaddedatthephysicallayerandisnot(formally)
partoftheframe.
DStartframedelimiter (SFD).Thesecondfield(lbyte:10101011) signalsthe
beginning oftheframe.TheSFDwarnsthestationorstationsthatthisisthelast
chanceforsynchronization. Thelast2bitsis11andalertsthereceiverthatthenext
fieldisthedestination address.SECTION 13.2STANDARD ETHERNET 399
oDestination address (DA).TheDAfieldis6bytesandcontains thephysical
addressofthedestination stationorstationstoreceivethepacket.Wewilldiscuss
addressing shortly.
oSourceaddress (SA).TheSAfieldisalso6bytesandcontains thephysical
addressofthesenderofthepacket.Wewilldiscussaddressing shortly.
oLengthortype.Thisfieldisdefinedasatypefieldorlengthfield.Theoriginal
Ethernetusedthisfieldasthetypefieldtodefinetheupper-layer protocolusingthe
MACframe.TheIEEEstandarduseditasthelengthfieldtodefinethenumberof
bytesinthedatafield.Bothusesarecommon today.
oData.Thisfieldcarriesdataencapsulated fromtheupper-layer protocols. Itisa
minimum of46andamaximum of1500bytes,aswewillseelater.
oCRC.Thelastfieldcontains errordetection information, inthiscaseaCRC-32
(seeChapter10).
FrameLength
Ethernethasimposedrestrictions onboththeminimum andmaximum lengthsofaframe,
asshowninFigure13.5.
Figure13.5Minimum andmaximum lengths
Minimum payloadlength:46bytes
I-Maximum payloadlength:1500bytes_I
Destination Source LengthDataandpadding CRCaddress address PDU
6bytes 6bytes 2bytes 4bytes
Minimum framelength:512bitsor64bytes
MaXImum framelength.12,144bItsor1518bytes
Theminimum lengthrestriction isrequiredforthecorrectoperation ofCSMAlCD
aswewillseeshortly.AnEthernet frameneedstohaveaminimum lengthof512bits
or64bytes.Partofthislengthistheheaderandthetrailer.Ifwecount18bytesof
headerandtrailer(6bytesofsourceaddress,6bytesofdestination address,2bytesof
lengthortype,and4bytesofCRC),thentheminimum lengthofdatafromtheupper
layeris64-18=46bytes.Iftheupper-layer packetislessthan46bytes,paddingis
addedtomakeupthedifference.
Thestandarddefinesthemaximum lengthofaframe(without preamble andSFD
field)as1518bytes.Ifwesubtractthe18bytesofheaderandtrailer,themaximum
lengthofthepayloadis1500bytes.Themaximum lengthrestriction hastwohistorical
reasons.First,memory wasveryexpensive whenEthernet wasdesigned: amaximum
lengthrestriction helpedtoreducethesizeofthebuffer.Second,themaximum length
restriction prevents onestationfrommonopolizing thesharedmedium, blocking other
stationsthathavedatatosend.400 CHAPTER 13WIREDLANs:ETHERNET
Framelength:
Minimum: 64bytes(512bits) Maximum: 1518bytes(12,144bits)
Addressing
EachstationonanEthernet network(suchasaPC,workstation, orprinter)hasitsown
network interface card(NIC).TheNICfitsinsidethestationandprovides thestation
witha6-bytephysicaladdress.AsshowninFigure13.6,theEthernet addressis6bytes
(48bits),nonnally writteninhexadecimal notation, withacolonbetween thebytes.
Figure13.6ExampleofanEthernet addressinhexadecimal notation
06:01:02:01:2C:4B
6bytes=12hexdigits=48bits
Unicast,Multicast, andBroadcast Addresses Asourceaddressisalwaysaunicast
address-the framecomesfromonlyonestation.Thedestination address, however,
canbeunicast,multicast, orbroadcast. Figure13.7showshowtodistinguish aunicast
addressfromamulticast address.Iftheleastsignificant bitofthefirstbyteinadestina­
tionaddressis0,theaddressisunicast;otherwise, itismulticast.
Figure13.7Unicastandmulticast addresses
Unicast:0;multicast: 1~;"'I¥~~~" .&W",.-----ByteI Byte2...
Byte6
Theleastsignificant bitofthefirstbytedefinesthetypeofaddress.
Ifthebitis0,theaddressisunicast;otherwise, itismulticast.
Aunicastdestination addressdefinesonlyonerecipient; therelationship between
thesenderandthereceiverisone-to-one. Amulticast destination addressdefinesagroup
ofaddresses; therelationship between thesenderandthereceivers isone-to-many.
Thebroadcast addressisaspecialcaseofthemulticast address;therecipients are
allthestationsontheLAN.Abroadcast destination addressisforty-eight Is.
Thebroadcast destination addressisaspecialcaseof
themulticast addressinwhichallbitsareIs.SECTION 13.2STANDARD ETHERNET 401
Example 13.1
Definethetypeofthefollowing destination addresses:
a.4A:30:10:21:1O:1A
b.47:20:1B:2E:08:EE
c.FF:FF:FF:FF:FF:FF
Solution
Tofindthetypeoftheaddress,weneedtolookatthesecondhexadecimal digitfromtheleft.Ifit
iseven,theaddressisunicast.Ifitisodd,theaddressismulticast. IfalldigitsareF's,theaddress
isbroadcast. Therefore, wehavethefollowing:
a.ThisisaunicastaddressbecauseAinbinaryis1010(even).
b.Thisisamulticast addressbecause7inbinaryis0111(odd).
c.Thisisabroadcast addressbecausealldigitsareF's.
Thewaytheaddresses aresentoutonlineisdifferent fromthewaytheyarewritten
inhexadecimal notation. Thetransmission isleft-to-right, bytebybyte;however, for
eachbyte,theleastsignificant bitissentfirstandthemostsignificant bitissentlast.
Thismeansthatthebitthatdefinesanaddressasunicastormulticast arrivesfirstatthe
receIver.
Example 13.2
Showhowtheaddress47:20:1B:2E:08:EE issentoutonline.
Solution
Theaddressissentleft-to-right, bytebybyte;for eachbyte,itissentright-to-Ieft, bitbybit,as
shownbelow:
~11100010 00000100 11011000 01110100 00010000 01110111
AccessMethod: CSMAICD
Standard Ethernet usesI-persistent CSMAlCD (seeChapter 12).
SlotTimeInanEthernet network, theround-trip timerequired foraframetotravel
fromoneendofamaximum-length network totheotherplusthetimeneededtosend
thejamsequence iscalledtheslottime.
Slottime=round-trip time+timerequired tosendthejamsequence
TheslottimeinEthernet isdefinedinbits.Itisthetimerequired forastationto
send512bits.Thismeansthattheactualslottimedepends onthedatarate;fortradi­
tional10-MbpsEthernet itis51.2I1s.
SlotTimeandCollision Thechoiceofa512-bitslottimewasnotaccidental. Itwas
chosentoallowtheproperfunctioning ofCSMAlCD. Tounderstand thesituation, let
usconsider twocases.
Inthefirstcase,weassumethatthesendersendsaminimum-size packetof512bits.
Beforethesendercansendtheentirepacketout,thesignaltravelsthroughthenetwork402CHAPTER 13WIREDLANs:ETHERNET
andreachestheendofthenetwork.Ifthereisanothersignalattheendofthenetwork
(worstcase),acollision occurs.Thesenderhastheopportunity toabortthesendingof
theframeandtosenda jamsequence toinformotherstationsofthecollision. The
round-trip timeplusthetimerequiredtosendthejamsequence shouldbelessthanthe
timeneededforthesendertosendtheminimum frame,512bits.Thesenderneedsto
beawareofthecollision beforeitistoolate,thatis,beforeithassenttheentireframe.
Inthesecondcase,thesendersendsaframelargerthantheminimum size
(between 512and1518bits).Inthiscase,ifthestationhassentoutthefirst512bitsand
hasnotheardacollision, itisguaranteed thatcollision willneveroccurduringthe
transmission ofthisframe.Thereasonisthatthesignalwillreachtheendofthenet­
workinlessthanone-half theslottime.IfallstationsfollowtheCSMA/CD protocol,
theyhavealreadysensedtheexistence ofthesignal(carrier) onthelineandhave
refrained fromsending.Iftheysentasignalonthelinebeforeone-half oftheslottime
expired, acollision hasoccurred andthesenderhassensedthecollision. Inother
words,collision canonlyoccurduringthefirsthalfoftheslottime,andifitdoes,itcan
besensedbythesenderduringtheslottime.Thismeansthatafterthesendersendsthe
first512bits,itisguaranteed thatcollision willnotoccurduringthetransmission of
thisframe.Themediumbelongstothesender,andnootherstationwilluseit.Inother
words,thesenderneedstolistenforacollision onlyduringthetimethefirst512bits
aresent.
Ofcourse,alltheseassumptions areinvalidifastationdoesnotfollowtheCSMAlCD
protocol. Inthiscase,wedonothaveacollision, wehaveacorrupted station.
SlotTimeandMaximum Network Length Thereisarelationship between theslot
timeandthemaximum lengthofthenetwork(collision domain). Itisdependent onthe
propagation speedofthesignalintheparticular medium. Inmosttransmission media,
thesignalpropagates at2x108rnls(two-thirds oftherateforpropagation inair).For
traditional Ethernet, wecalculate
MaxLength :::::PropagationSpeedx SlotTime
2
MaxLength:::; (2xto8)X(5L2X10-6(2)=5120m
Ofcourse,weneedtoconsider thedelaytimesinrepeaters andinterfaces, andthe
timerequired tosendthejamsequence. Thesereducethemaximum-length ofatradi­
tionalEthernet networkto2500m,just48percentofthetheoretical calculation.
MaxLength=2500ill
Physical Layer
TheStandard Ethernet definesseveralphysical layerimplementations; fourofthemost
common, areshowninFigure13.8.
Encoding andDecoding
Allstandardimplementations usedigitalsignaling (baseband) at10Mbps.Atthesender,
dataareconverted toadigitalsignalusingtheManchester scheme;atthereceiver, theSECTION 13.2STANDARD ETHERNET 403
Figure13.8Categories ofStandard Ethernet
Standard Ethernet
common
implementations
Rus. Bus,
thickcoaxial thincoaxialStar,
UTPStar,
fiber
Transceiver cable
maximum 50mreceivedsignalisinterpreted asManchester anddecodedintodata.AswesawinChapter4,
Manchester encoding isself-synchronous, providing atransition ateachbitinterval.
Figure13.9showstheencoding schemeforStandard Ethernet.
Figure13.9Encoding inaStandard Ethernet implementation
10Mbpsdata 10Mbpsdata
t t
Manchester Manchester
encoder decoder
StationI I
I
I I
Twistedpairsorfibers
lOBase5: ThickEthernet
Thefirstimplementation iscalled10BaseS, thickEthernet, orThicknet. Thenick­
namederivesfromthesizeofthecable,whichisroughlythesizeofagardenhose
andtoostifftobendwithyourhands.lOBaseS wasthefirstEthernet specification to
useabustopology withanexternaltransceiver (transmitter/receiver) connected viaa
taptoathickcoaxialcable.Figure13.10showsaschematic diagram ofalOBase5
implementation.
Figure13.10 IOBase5 implementation
gOBf4l
10Mbps 500m
Baseband Cable Cable
(digital) end
1f;;=.~=.~===h·;;;;k==·====4"'="''''';;;;jI endTransceiver TICcoaXialcable
maximum 500m404 CHAPTER 13WIREDLANs:ETHERNET
Thetransceiver isresponsible fortransmitting, receiving, anddetecting collisions.
Thetransceiver isconnected tothestationviaatransceiver cablethatprovides sepa­
ratepathsforsendingandreceiving. Thismeansthatcollision canonlyhappeninthe
coaxialcable.
Themaximum lengthofthecoaxialcablemustnotexceed500m,otherwise, there
isexcessive degradation ofthesignal.Ifalengthofmorethan500misneeded,upto
fivesegments, eachamaximum ofSOO-meter, canbeconnected usingrepeaters.
Repeaters willbediscussed inChapter15.
10Base2: ThinEthernet
Thesecondimplementation iscalledlOBase2, thinEthernet, orCheapernet. IOBase2
alsousesabustopology, butthecableismuchthinnerandmoreflexible.Thecablecan
bebenttopassveryclosetothestations.Inthiscase,thetransceiver isnormally partof
thenetwork interface card(NIC),whichisinstalled insidethestation.Figure13.11
showstheschematic diagramofaIOBase2implementation.
Figure13.11lOBase2 implementation
gOBa~
10Mbps 185m~
Baseband
(digital)Cable
end
Thincoaxialcable,
maximum 185m
Notethatthecollision hereoccursinthethincoaxialcable.Thisimplementation is
morecosteffective than10BaseSbecausethincoaxialcableislessexpensive thanthick
coaxialandtheteeconnections aremuchcheaperthantaps.Installation issimpler
becausethethincoaxialcableisveryflexible. However, thelengthofeachsegment
cannotexceed185m(closeto200m)duetothehighlevelofattenuation inthincoaxial
cable.
lOBase-T: Twisted-Pair Ethernet
Thethirdimplementation iscalledlOBase-Tortwisted-pair Ethernet. 1OBase-Tuses
aphysical startopology. Thestationsareconnected toahubviatwopairsoftwisted
cable,asshowninFigure13.12.
Notethattwopairsoftwistedcablecreatetwopaths(oneforsendingandonefor
receiving) between thestationandthehub.Anycollision herehappens inthehub.
Compared tolOBaseSorlOBase2, wecanseethatthehubactuallyreplacesthecoaxialSECTION 13.2STANDARD ETHERNET 405
Figure13.12IOBase-T implementation
~OBr'Q10Mbps Twistedpair
Baseband
(digital)i
I~I
miTwopairsof
~ ~UTPcable
I[Q][QJ...~I
lOBase-Thub
cableasfarasacollision isconcerned. Themaximum lengthofthetwistedcablehere
isdefinedas100m,tominimize theeffectofattenuation inthetwistedcable.
lOBase-F: FiberEthernet
Although thereareseveraltypesofopticalfiberlO-Mbps Ethernet, themostcommon is
called10Base-F. lOBase-F usesastartopology toconnectstationstoahub.Thestations
areconnected tothehubusingtwofiber-optic cables,asshowninFigure13.13.
Figure13.13IOBase-F implementation
~OBr~]0Mbps Fiber
Baseband
(digital)
lOBase-F hubTwofiber-optic
cables
Summary
Table13.1showsasummary ofStandard Ethernet implementations.
Table13.1Summary ofStandard Ethernet implementations
Characteristics lOBase5 lOBase2 lOBase-T IOBase-F
Media Thick Thin 2UTP 2Fiber
coaxialcable coaxialcable
Maximum length 500m 185m 100m 2000m
Lineencoding Manchester Manchester Manchester Manchester406 CHAPTER 13WIREDLANs:ETHERNET
13.3CHANGES INTHESTANDARD
The10-MbpsStandard Ethernet hasgonethroughseveralchangesbeforemovingtothe
higherdatarates.Thesechangesactuallyopenedtheroadtotheevolution oftheEthernet
tobecomecompatible withotherhigh-data-rate LANs.Wediscusssomeofthesechanges
inthissection.
BridgedEthernet
ThefirststepintheEthernet evolution wasthedivisionofaLANbybridges. Bridges
havetwoeffectsonanEthernet LAN:Theyraisethebandwidth andtheyseparatecolli­
siondomains. WediscussbridgesinChapter15.
RaisingtheBandwidth
Inanunbridged Ethernet network, thetotalcapacity (10Mbps)issharedamongallsta­
tionswithaframetosend;thestationssharethebandwidth ofthenetwork. Ifonlyone
stationhasframestosend,itbenefitsfromthetotalcapacity (10Mbps).Butifmore
thanonestationneedstousethenetwork, thecapacity isshared.Forexample, iftwo
stationshavealotofframestosend,theyprobably alternate inusage.Whenonestation
issending, theotheronerefrainsfromsending. Wecansaythat,inthiscase,eachsta­
tiononaverage,sendsatarateof5Mbps.Figure13.14showsthesituation.
Figure13.14 Sharingbandwidth
Rate
One One One One
frameframe frame frame10Mbps-r--r---
5Mbps---------- -...
TimeRate
10Mbps
5MbpsOne One One One
frame frame frame frame
Time
a.Firststation b.Secondstation
Thebridge,aswewilllearninChapter15,canhelphere.Abridgedividesthenet­
workintotwoormorenetworks. Bandwidth-wise, eachnetwork isindependent. For
example, inFigure13.15,anetworkwith12stationsisdividedintotwonetworks, each
with6stations.Noweachnetworkhasacapacityof10Mbps.ThelO-Mbps capacityin
eachsegmentisnowsharedbetween 6stations(actually 7becausethebridgeactsasa
stationineachsegment), not12stations.Inanetworkwithaheavyload,eachstation
theoretically isoffered10/6Mbpsinsteadof10/12Mbps,assuming thatthetrafficis
notgoingthroughthebridge.
Itisobviousthatifwefurtherdividethenetwork, wecangainmorebandwidth for
eachsegment. Forexample, ifweuseafour-port bridge,eachstationisnowoffered
10/3Mbps,whichis4timesmorethananunbridged network.SECTION 13.3CHANGES INTHESTANDARD 407
Figure13.15 Anetworkwithandwithoutabridge
a.Without bridging
b.Withbridging
Separating Collision Domains
Anotheradvantage ofabridgeistheseparation ofthecollision domain. Figure13.16
showsthecollision domains foranunbridged andabridgednetwork. Youcanseethat
thecollision domainbecomes muchsmallerandtheprobability ofcollision isreduced
tremendously. Withoutbridging, 12stationscontendforaccesstothemedium; with
bridgingonly3stationscontendforaccesstothemedium.
Figure13.16 Collision domains inanunbridged networkandabridgednetwork
Domain
r---~----------~-~-~------------~--~------------------ --------~----------------------------
a.Without bridging
Domain Domain
Domain---------------------,,I,
'aaa', ,, ,
1""""'-:' =-:. =-:. 1
~ .1
I
'aaa:, , I, ,
1=-1.;; =........="'"": 1
~ ~ 1Domain
l--------------~~----J, ,
i-~-a-~-!1--------------------1, ,
:~"a~:, ,1""",, =_ I
:_---~~-~- -~--- -~-_:
b.Withbridging
Switched Ethernet
TheideaofabridgedLANcanbeextended toaswitched LAN.Insteadofhavingtwo
tofournetworks, whynothaveNnetworks, whereNisthenumberofstationsonthe
LAN?Inotherwords,ifwecanhaveamultiple-port bridge,whynothaveanN-port408CHAPTER 13WIREDIANs:ETHERNET
switch?Inthisway,thebandwidth issharedonlybetween thestationandtheswitch
(5Mbpseach).Inaddition, thecollision domainisdividedintoNdomains.
Alayer2switchisanN-portbridgewithadditional sophistication thatallowsfaster
handling ofthepackets.Evolution fromabridgedEthernettoaswitched Ethernet was
abigstepthatopenedthewaytoanevenfasterEthernet, aswewillsee.Figure13.17
showsaswitched LAN.
Figure13.17 Switched Ethernet
,-\, ---Domain.._--
DomainDomain--,'-..... \, , -,-Domain: riiI-"i:-:r----~-+--El C3--I-~--____,,-~- :Domain
, --==""'''''- --_ I\~~-~- --~__'
Full-Duplex Ethernet
Oneofthelimitations of10Base5 andlOBase2 isthatcommunication ishalf-duplex
(lOBase-T isalwaysfull-duplex); astationcaneithersendorreceive,butmaynotdoboth
atthesametime.Thenextstepintheevolution wastomovefromswitched Ethernet to
full-duplex switched Ethernet. Thefull-duplex modeincreases thecapacityofeach
domainfrom10to20Mbps.Figure13.18showsaswitched Ethernet infull-duplex
mode.Notethatinsteadofusingonelinkbetweenthestationandtheswitch,thecon­
figuration usestwolinks:onetotransmitandonetoreceive.
Figure13.18 Full-duplex switched Ethernet
Switch
~-E-I(_T_ra_ns_m_it_·_1II_ Trno,mit •~_~ Receive Receive~~
Iflf~0~>
a
NoNeedfor CSMAICD
Infull-duplex switched Ethernet, thereisnoneedfortheCSMAICD method.Inafull­
duplexswitched Ethernet, eachstationisconnected totheswitchviatwoseparatelinks.SECTION 13.4FASTETHERNET 409
Eachstationorswitchcansendandreceiveindependently withoutworrying aboutcol­
lision.Eachlinkisapoint-to-point dedicated pathbetween thestationandtheswitch.
Thereisnolongeraneedforcarriersensing; thereisnolongeraneedforcollision
detection. ThejoboftheMAClayerbecomes mucheasier.Thecarriersensingandcol­
lisiondetection functionalities oftheMACsublayer canbeturnedoff.
MACControlLayer
Standard Ethernet wasdesigned asaconnectionless protocol attheMACsublayer.
Thereisnoexplicitflowcontrolorerrorcontroltoinformthesenderthattheframehas
arrivedatthedestination withouterror.Whenthereceiverreceivestheframe,itdoes
notsendanypositiveornegative acknowledgment.
Toprovideforflowanderrorcontrolinfull-duplex switched Ethernet, anew
sublayer, calledtheMACcontrol,isaddedbetween theLLCsublayer andtheMAC
sublayer.
13.4FASTETHERNET
FastEthernet wasdesigned tocompete withLANprotocols suchasFDDIorFiber
Channel(orFibreChannel, asitissometimes spelled).IEEEcreatedFastEthernetunder
thename802.3u.FastEthernet isbackward-compatible withStandard Ethernet, butit
cantransmitdata10timesfasteratarateof100Mbps.ThegoalsofFastEthernetcanbe
summarized asfollows:
1.Upgrade thedatarateto100Mbps.
2.Makeitcompatible withStandard Ethernet.
3.Keepthesame48-bitaddress.
4.Keepthesameframeformat.
5.Keepthesameminimum andmaximum framelengths.
MACSublayer
Amainconsideration intheevolution ofEthernet from10to100Mbpswastokeepthe
MACsublayer untouched. However, adecision wasmadetodropthebustopologies
andkeeponlythestartopology. Forthestartopology, therearetwochoices,aswesaw
before:halfduplexandfullduplex.Inthehalf-duplex approach, thestationsarecon­
nectedviaahub;inthefull-duplex approach, theconnection ismadeviaaswitchwith
buffersateachport.
Theaccessmethodisthesame(CSMAlCD) forthehalf-duplex approach; forfull­
duplexFastEthernet, thereisnoneedforCSMAlCD. However, theimplementations
keepCSMA/CD forbackward compatibility withStandard Ethernet.
Autonegotiatioll
AnewfeatureaddedtoFastEthernet iscalledautonegotiation. Itallowsastationora
hubarangeofcapabilities. Autonegotiation allowstwodevicestonegotiate themode410CHAPTER 13WIREDLANs:ETHERNET
ordatarateofoperation. Itwasdesigned particularly forthefollowing purposes:
oToallowincompatible devicestoconnecttooneanother.Forexample, adevicewith
amaximum capacityof10Mbpscancommunicate withadevicewitha100Mbps
capacity (butcanworkatalowerrate).
oToallowonedevicetohavemultiplecapabilities.
oToallowastationtocheckahub'scapabilities.
Physical Layer
ThephysicallayerinFastEthernetismorecomplicated thantheoneinStandard Ethernet.
Webrieflydiscusssomefeaturesofthislayer.
Topology
FastEthernet isdesigned toconnecttwoormorestationstogether.Ifthereareonlytwo
stations, theycanbeconnected point-to-point. Threeormorestationsneedtobecon­
nectedinastartopology withahuboraswitchatthecenter,asshowninFigure13.19.
Figure13.19FastEthernet topology
a.Point-to-point
Implementation
FastEthernet implementation atthephysicallayercanbecategorized aseithertwo-wire
orfour-wire. Thetwo-wire implementation canbeeithercategory 5UTP(lOOBase-TX)
orfiber-optic cable(lOOBase-FX). Thefour-wire implementation isdesigned only
forcategory 3UTP(l00Base-T4). SeeFigure13.20.
Figure13.20 FastEthernet implementations
Twowires
category 5UTPTwowires
fiberFourwires
category 3UTPSECTION 13.4FASTETHERNET 411
Encoding
Manchester encoding needsa200-Mbaud bandwidth foradatarateof100Mbps,which
makesitunsuitable foramedium suchastwisted-pair cable.Forthisreason,theFast
Ethernet designers soughtsomealternative encoding/decoding scheme.However,itwas
foundthatoneschemewouldnotperformequallywellforallthreeimplementations.
Therefore, threedifferent encoding schemes werechosen(seeFigure13.21).
Figure13.21 Encoding forFastEthernet implementation
100Base-TX 100Base-FX
4x25Mbps 4x25Mbps 4x25Mbps 4x25Mbps
tStation tStation
TwoUTPcategory 5 Twofibers
100Base-T4
100Mbps
~100Mbps
t
,.....:;~~-..
~;;;iiR/6T~~ ~,:8B.i~:a~der <~
~~:;C<~~Jl"~A .~~...
IL.-....-~I t--------J1I
t
Station1r-
4category 3UTP
lOOBase-TX usestwopairsoftwisted-pair cable(eithercategory 5UTPorSTP).
Forthisimplementation, theMLT-3schemewasselectedsinceithasgoodbandwidth
performance (seeChapter4).However, sinceMLT-3isnotaself-synchronous linecod­
ingscheme,4B/5Bblockcodingisusedtoprovidebitsynchronization bypreventing
theoccurrence ofalongsequence ofOsandIs(seeChapter4).Thiscreatesadatarate
of125Mbps,whichisfedintoMLT-3forencoding.
lOOBase-FX usestwopairsoffiber-optic cables.Opticalfibercaneasilyhandlehigh
bandwidth requirements byusingsimpleencoding schemes. Thedesigners of100Base-FX
selectedtheNRZ-Iencoding scheme(seeChapter4)forthisimplementation. However,
NRZ-Ihasabitsynchronization problemforlongsequences ofOs(orIs,basedonthe
encoding), aswesawinChapter4.Toovercome thisproblem, thedesigners used4B/5B412CHAPTER 13WIREDLANs:ETHERNET
blockencoding aswedescribed forIOOBase-TX.Theblockencoding increases thebitrate
from100to125Mbps,whichcaneasilybehandledbyfiber-optic cable.
A 1OOBase-TXnetworkcanprovideadatarateof100Mbps,butitrequirestheuseof
category5UTPorSTPcable.Thisisnotcost-efficient forbuildings thathavealreadybeen
wiredforvoice-grade twisted-pair (category 3).Anewstandard, calledlOOBase-T4, was
designed tousecategory3orhigherUTP.Theimplementation usesfourpairsofUTPfor
transmitting 100Mbps.Encoding/decoding in100Base-T4 ismorecomplicated. Asthis
implementation usescategory 3UTP,eachtwisted-pair cannoteasilyhandlemorethan
25Mbaud.Inthisdesign,onepairswitches betweensendingandreceiving. Threepairsof
UTPcategory3,however, canhandleonly75Mbaud(25Mbaud)each.Weneedtousean
encoding schemethatconverts100Mbpstoa75Mbaudsignal.AswesawinChapter4,
8B/6Tsatisfiesthisrequirement. In8B/6T,eightdataelements areencoded assixsignal
elements. Thismeansthat100Mbpsusesonly(6/8)x100Mbps,or75Mbaud.
Summary
Table13.2isasummary oftheFastEthernet implementations.
Table13.2Summary ofFastEthernet implementations
Characteristics lOOBase-TX lOOBase-FX 100Base-T4
Media Cat5UTPorSTP Fiber Cat4UTP
Numberofwires 2 2 4
Maximum length 100m 100m 100m
Blockencoding 4B/5B 4B/5B
Lineencoding MLT-3 NRZ-I 8B/6T
13.5GIGABIT ETHERNET
Theneedforanevenhigherdatarateresulted inthedesignoftheGigabitEthernet
protocol (1000Mbps).TheIEEEcommittee callstheStandard 802.3z.Thegoalsofthe
GigabitEthernet designcanbesummarized asfollows:
1.Upgrade thedatarateto1Gbps.
2.Makeitcompatible withStandard orFastEthernet.
3.Usethesame48-bitaddress.
4.Usethesameframeformat.
5.Keepthesameminimum andmaximum framelengths.
6.Tosupportautonegotiation asdefinedinFastEthernet.
MACSublayer
Amainconsideration intheevolution ofEthernet wastokeeptheMAC sublayer
untouched. However, toachieveadatarate1Gbps,thiswasnolongerpossible. Gigabit
Ethernet hastwodistinctive approaches formediumaccess:half-duplex andfull-duplex.SECTION 13.5GIGABIT ETHERNET 413
Almostallimplementations ofGigabitEthernet followthefull-duplex approach. How­
ever,webrieflydiscussthehalf-duplex approach toshowthatGigabitEthernet canbe
compatible withthepreviousgenerations.
Full-Duplex Mode
Infull-duplex mode,thereisacentralswitchconnected toallcomputers orother
switches. Inthismode,eachswitchhasbuffersforeachinputportinwhichdataare
storeduntiltheyaretransmitted. Thereisnocollision inthismode,aswediscussed
before.ThismeansthatCSMAlCD isnotused.Lackofcollision impliesthatthemax­
imumlengthofthecableisdetermined bythesignalattenuation inthecable,notbythe
collision detection process.
Inthefull-duplex modeofGigabitEthernet, thereisnocollision;
themaximum lengthofthecableisdetermined bythesignalattenuation inthecable.
Half-Duplex Mode
GigabitEthernet canalsobeusedinhalf-duplex mode,although itisrare.Inthiscase,
aswitchcanbereplaced byahub,whichactsasthecommon cableinwhichacollision
mightoccur.Thehalf-duplex approach usesCSMAlCD. However, aswesawbefore,
themaximum lengthofthenetworkinthisapproach istotallydependent ontheminimum
framesize.Threemethods havebeendefined:traditional, carrierextension, andframe
bursting.
Traditional Inthetraditional approach, wekeeptheminimum lengthoftheframeas
intraditional Ethernet (512bits).However, becausethelengthofabitis11100shorter
inGigabitEthernet thaninlO-Mbps Ethernet, the slottimeforGigabitEthernet is
512bitsx111000JlS,whichisequalto0.512JlS.Thereducedslottimemeansthatcolli­
sionisdetected100timesearlier.Thismeansthatthemaximum lengthofthenetworkis
25m.Thislengthmaybesuitableifallthestationsareinoneroom,butitmaynoteven
belongenoughtoconnectthecomputers inonesingleoffice.
CarrierExtension Toallowforalongernetwork, weincreasetheminimum frame
length.Thecarrierextension approach definestheminimum lengthofaframeas512bytes
(4096bits).Thismeansthattheminimum lengthis8timeslonger.Thismethodforces
astationtoaddextension bits(padding) toanyframethatislessthan4096bits.Inthis
way,themaximum lengthofthenetworkcanbeincreased 8timestoalengthof200m.
Thisallowsalengthof100mfromthehubtothestation.
FrameBursting Carrierextension isveryinefficient ifwehaveaseriesofshort
framestosend;eachframecarriesredundant data.Toimproveefficiency, framebursting
wasproposed. Insteadofaddinganextension toeachframe,multiple frames aresent.
However, tomakethesemultipleframeslooklikeoneframe,paddingisaddedbetween
theframes(thesameasthatusedforthecarrierextension method)sothatthechannel
isnotidle.Inotherwords,themethoddeceives otherstationsintothinking thatavery
largeframehasbeentransmitted.414 CHAPTER 13WIREDLANs:ETHERNET
Physical Layer
ThephysicallayerinGigabitEthernet ismorecomplicated thanthatinStandard orFast
Ethernet. Webrieflydiscusssomefeaturesofthislayer.
Topology
GigabitEthernet isdesigned toconnecttwoormorestations.Ifthereareonlytwosta­
tions,theycanbeconnected point-to-point. Threeormorestationsneedtobeconnected
inastartopology withahuboraswitchatthecenter.Anotherpossibleconfiguration is
toconnectseveralstartopologies orletastartopology bepartofanotherasshownin
Figure13.22.
Figure13.22 Topologies ofGigabitEthernet
a-a
a.Point-to-point
ffi·r~ r
="""":. ='""":. ="""':.
c.Twostars
d.Hierarchy ofstars
ffirj r 3
=. roul;:;;:;]",": =-:.
Implementation
GigabitEthernet canbecategorized aseitheratwo-wire orafour-wire implementation.
Thetwo-wire implementations usefiber-optic cable(1000Base-SX, short-wave, or
lOOOBase-LX, long-wave), orSTP(1000Base-CX). Thefour-wire versionusescate­
gory5twisted-pair cable(lOOOBase- T).Inotherwords,wehavefourimplementations,
asshowninFigure13.23.lOOOBase-T wasdesigned inresponse tothoseuserswhoSECTION 13.5GIGABIT ETHERNET 415
hadalreadyinstalled thiswiringforotherpurposes suchasFastEthernet ortelephone
serVIces.
Figure13.23 GigabitEthernet implementations
Two-wire Two-wire Two-wire
short-wave tiberlong-wave tiber copper(STP)Four-wire
UTP
Encoding
Figure13.24showstheencoding/decoding schemes forthefourimplementations.
Figure13.24 Encoding inGigabitEthernet implementations
IOOOBase-SX. lOOOBase-LX, andIOOOBase-CX IOOOBase-T
4D-PAM5 decoder8x125Mbps 8x125Mbps
Station t8x125Mbps 8x125Mbps
Station
TwofibersortwoSTPs 4UTPcables
GigabitEthernet cannotusetheManchester encoding schemebecauseitinvolvesa
veryhighbandwidth (2GBaud).Thetwo-wire implementations useanNRZscheme,but
NRZdoesnotself-synchronize properly. Tosynchronize bits,particularly atthishigh
datarate,8BIlOBblockencoding, discussed inChapter4,isused.
Thisblockencoding preventslongsequences ofOsorIsinthestream,buttheresult­
ingstreamis1.25Gbps.Notethatinthisimplementation, onewire(fiberorSTP)is
usedforsendingandoneforreceiving.
Inthefour-wire implementation itisnotpossibletohave2wiresforinputand2for
output,becauseeachwirewouldneedtocarry500Mbps,whichexceedsthecapacity
forcategory 5UTP.Asasolution, 4D-PAM5 encoding, asdiscussed inChapter4,isused
toreducethebandwidth. Thus,allfourwiresareinvolved inbothinputandoutput;each
wirecarries250Mbps,whichisintherangeforcategory 5UTPcable_416 CHAPTER 13WIREDIANs:ETHERNET
Summary
Table13.3isasummary oftheGigabitEthernet implementations.
Table13.3Summary ofGigabitEthernet implementations
Characteristics lOOOBase-SX lOOOBase-LX lOOOBase-CX lOOOBase-T :
Media Fiber Fiber STP Cat5UTPI
Ishort-wave long-wave
Numberofwires 2 2 2 4
Maximum length 550m 5000m 25m 100m
Blockencoding 8B/lOB 8B/lOB 8B/lOB
Lineencoding NRZ NRZ NRZ 4D-PAM5
Ten-Gigabit Ethernet
TheIEEEcommittee createdTen-Gigabit Ethernet andcalleditStandard 802.3ae.The
goalsoftheTen-Gigabit Ethernet designcanbesummarized asfollows:
1.Upgrade thedatarateto10Gbps.
2.Makeitcompatible withStandard, Fast,andGigabitEthernet.
3.Usethesame48-bitaddress.
4.Usethesameframeformat.
S.Keepthesameminimum andmaximum framelengths.
6.Allowtheinterconnection ofexistingLANsintoametropolitan areanetwork(MAN)
orawideareanetwork(WAN).
7.MakeEthernet compatible withtechnologies suchasFrameRelayandATM(see
Chapter18).
MACSublayer
Ten-Gigabit Ethernet operates onlyinfullduplexmodewhichmeansthereisnoneed
forcontention; CSMA/CD isnotusedinTen-Gigabit Ethernet.
Physical Layer
ThephysicallayerinTen-Gigabit Ethernetisdesigned forusingfiber-optic cableoverlong
distances. Threeimplementations arethemostcommon: lOGBase-S, lOGBase-L, and
lOGBase-E. Table13.4showsasummary oftheTen-Gigabit Ethernetimplementaions.
Table13.4Summary ofTen-Gigabit Ethernet implementations
Characteristics lOGBase-S lOGBase-L lOGBase-E
Media Short-wave Long-wave Extended
S50-nrn 131O-nrn 1550-mrn
rnultimode singlemode singlemode
Maximum length 300m lOkm 40kmSECTION 13.8SUMMARY 417
13.6RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
books.Theitemsinbrackets [...]refertothereference listattheendofthetext.
Books
Ethernet isdiscussed inChapters 10,11,and12of[For03], Chapter5of[Kei02], Sec­
tion4.3of[Tan03], andChapters 15and16of[Sta04].[SpuOO]isabookaboutEthernet.
Acomplete discussion ofGigabitEthernet canbefoundin[KCK98] and[Sau98].
Chapter2of[IzzOO]hasagoodcomparison between different generations ofEthernet.
13.7KEYTERMS
1000Base-CX
1000Base-LX1000Base-SX
1000Base-T
100Base-FX
100Base-T4100Base-TX
10Base2
lOBase5
lOBase-F
10Base-T
10GBase-E
lOGBase-L
10GBase-S
autonegotiation
bridge
carrierextension
Cheapernet
collision domain
destination serviceaccesspoint(DSAP)FastEthernet
framebursting
full-duplex switched Ethernet
GigabitEthernet
hexadecimal notation
logical
linkcontrol(LLC)
mediaaccesscontrol(MAC)
network interface card(NIC)
preamble
Project802
sourceserviceaccesspoint(SSAP)
Standard Ethernet
switch
switched Ethernet
Ten-Gigabit Ethernet
thickEthernet
Thicknet
thinEthernet
transceiver
twisted-pair Ethernet
13.8SUMMARY
oEthernet isthemostwidelyusedlocalareanetworkprotocoL
oTheIEEE802.3Standard definesI-persistent CSMA/CD astheaccessmethodfor
first-generation 10-MbpsEthernet.
oThedatalinklayerofEthernet consistsoftheLLCsublayer andtheMACsublayer.418CHAPTER 13WIREDfANs:ETHERNET
oTheMACsublayer isresponsible fortheoperation oftheCSMAlCD access
methodandframing.
oEachstationonanEthernet networkhasaunique48-bitaddressimprinted onits
networkinterface card(NIC).
oTheminimum framelengthforlO-Mbps Ethernet is64bytes;themaximum is
1518bytes.
oThecommon implementations oflO-Mbps Ethernet arelOBase5 (thickEthernet),
10Base2 (thinEthernet), lOBase-T (twisted-pair Ethernet), andlOBase-F (fiber
Ethernet).
oThe10Base5 implementation ofEthernet usesthickcoaxialcable.lOBase2 uses
thincoaxialcable.lOBase-T usesfourtwisted-paircables thatconnecteachstation
toacommon hub.lOBase-F usesfiber-optic cable.
oAbridgecanincrease thebandwidth andseparate thecollision domains onan
Ethernet LAN.
oAswitchallowseachstationonanEthernet LANtohavetheentirecapacityofthe
networktoitself.
oFull-duplex modedoublesthecapacity ofeachdomainandremoves theneedfor
theCSMAlCD method.
oFastEthernet hasadatarateof100Mbps.
oInFastEthernet, autonegotiation allowstwodevicestonegotiate themodeordata
rateofoperation.
oThecommon FastEthernetimplementations are1OOBase-TX(twopairsoftwisted­
paircable),lOOBase-FX (twofiber-optic cables),and100Base-T4 (fourpairsof
voice-grade, orhigher,twisted-pair cable).
oGigabitEthernet hasadatarateof1000Mbps.
oGigabitEthernetaccessmethodsincludehalf-duplex modeusing traditional CSMAI
CD(notcommon) andfull-duplex mode(mostpopularmethod).
oThecommon GigabitEthernetimplementations are1000Base-SX (twoopticalfibers
andashort-wave lasersource),1000Base-LX (twoopticalfibersandalong-wave
lasersource),and1000Base-T (fourtwistedpairs).
oThelatestEthernet standard isTen-Gigabit Ethernet thatoperatesat10Gbps.The
threecommon implementations arelOGBase-S, 10GBase-L, and10GBase-E. These
implementations usefiber-optic cablesinfull-duplex mode.
13.9PRACTICE SET
ReviewQuestions
1.Howisthepreamble fielddifferent fromtheSFDfield?
2.WhatisthepurposeofanNIC?
3.Whatisthedifference betweenaunicast,multicast, andbroadcast address?
4.Whataretheadvantages ofdividinganEthernet LANwithabridge?
5.Whatistherelationship between aswitchandabridge?SECTION 13.9PRACTICE SET 419
6.WhyistherenoneedforCSMAlCD onafull-duplex EthernetLAN?
7.Compare thedataratesforStandard Ethernet, FastEthernet, GigabitEthernet, and
Ten-Gigabit Ethernet.
8.Whatarethecommon Standard Ethernetimplementations?
9.Whatarethecommon FastEthernetimplementations?
10.Whatarethecommon GigabitEthernetimplementations?
11.Whatarethecommon Ten-Gigabit Ethernetimplementations?
Exercises
12.Whatisthehexadecimal equivalent ofthefollowing Ethernetaddress?
01011010 00010001 01010101 00011000 10101010 00001111
13.HowdoestheEthernetaddresslA:2B:3CAD:5E:6F appearonthelineinbinary?
14.IfanEthernet destination addressis07:01:02:03:04:05, whatisthetypeofthe
address(unicast,multicast, orbroadcast)?
15.Theaddress43:7B:6C:DE: 10:00hasbeenshownasthesourceaddressinanEthernet
frame.Thereceiverhasdiscarded theframe.Why?
16.AnEthernet MACsublayer receives42bytesofdatafromtheupperlayer.How
manybytesofpaddingmustbeaddedtothedata?
17.AnEthernet MACsublayerreceives1510bytesofdatafromtheupperlayer.Can
thedatabeencapsulated inoneframe?Ifnot,howmanyframesneedtobesent?
Whatisthesizeofthedataineachframe?
18.WhatistheratioofusefuldatatotheentirepacketforthesmallestEthernetframe?
Whatistheratioforthelargestframe?
19.Suppose thelengthofalOBase5cableis2500m.Ifthespeedofpropagation ina
thickcoaxialcableis200,000,000 m!s,howlongdoesittakeforabittotravel
fromthebeginning totheendofthenetwork? Assumethereare10/lsdelayinthe
equipment.
20.ThedatarateoflOBase5 is10Mbps.Howlongdoesittaketocreatethesmallest
frame?Showyourcalculation.CHAPTER 14
Wireless LANs
Wireless communication isoneofthefastest-growing technologies. Thedemandfor
connecting deviceswithouttheuseofcablesisincreasing everywhere. Wireless LANs
canbefound on collegecampuses, inofficebuildings, andinmanypublicareas.
Inthischapter,weconcentrate ontwopromising wirelesstechnologies forLANs:
IEEE802.11wireless LANs,sometimes calledwireless Ethernet, andBluetooth, a
technology forsmallwireless LANs.Although bothprotocols needseverallayersto
operate,weconcentrate mostlyonthephysical anddatalinklayers.
14.1IEEE802.11
IEEEhasdefinedthespecifications forawireless LAN,calledIEEE802.11,which
coversthephysical anddatalinklayers.
Architecture
Thestandarddefinestwokindsofservices: thebasicserviceset(BSS)andtheextended
serviceset(ESS).
BasicServiceSet
IEEE802.11definesthebasicserviceset(BSS)asthebuilding blockofawireless
LAN.Abasicservicesetismadeofstationary ormobilewirelessstationsandanoptional
centralbasestation,knownastheaccesspoint(AP).Figure14.1showstwosetsinthis
standard.
TheBSSwithoutanAPisastand-alone networkandcannotsenddatatootherBSSs.
Itiscalledanadhocarchitecture. Inthisarchitecture, stationscanformanetwork
withouttheneedofanAP;theycan locate oneanotherandagreetobepartofaBSS.A
BSSwithanAPissometimes referredtoasaninfrastructure network.
ABSSwithoutanAPiscalledanadhocnetwork;
aBSSwithanAPiscalledaninfrastructure network.
421422CHAPTER 14WIRELESS LANs
Figure14.1Basicservicesets(BSSs)
APStation-------------------1&i
Station :
I
I&i
Station Station I
------------------~Infrastructure (BSSwithanAP)1-------------------I
:1h!1.., Igl..,:1 • • 1
1Station Station 1I I
I I
ir! ~iI~ ~I
IStation Station 1 l ~
Adhocnetwork (SSSwithoutanAP)BSS:Basicserviceset
AP:Accesspoint
Extended ServiceSet
Anextended serviceset(ESS)ismadeupoftwoormoreBSSswithAPs.Inthis
case,theBSSsareconnected throughadistribution system,whichisusuallyawired
LAN.Thedistribution systemconnects theAPsintheBSSs.IEEE802.11doesnot
restrictthedistribution system;itcanbeanyIEEELANsuchasanEthernet. Notethat
theextended servicesetusestwotypesofstations: mobileandstationary. Themobile
stationsarenormalstationsinsideaBSS.Thestationary stationsareAPstationsthat
arepartofawiredLAN.Figure14.2showsanESS.
Figure14.2Extended servicesets(ESSs)
--------ESS:Extended serviceset
BSS:Basicserviceset
AP:Accesspointr--------jc:u:w:J
/,,'-Distribution system- "~
\.. )Serveror
Gateway
BSS BSS BSS
WhenBSSsareconnected, thestationswithinreachofoneanothercancommuni­
catewithouttheuseofanAP.However, communication between twostationsintwo
different BSSsusuallyoccursviatwoAPs.Theideaissimilartocommunication ina
cellularnetworkifweconsider eachBSStobeacellandeachAPtobeabasestation.
NotethatamobilestationcanbelongtomorethanoneBSSatthesametime.
StationTypes
IEEE802.11definesthreetypesofstationsbasedontheirmobility inawirelessLAN:
no-transition, BSS·transition, andESS-transition mobility. Astationwithno-transitionSECTION 14.1IEEE802.11 423
mobility iseitherstationary (notmoving) ormovingonlyinsideaBSS.Astationwith
BSS-transition mobility canmovefromoneBSStoanother,butthemovement iscon­
finedinsideoneESS.AstationwithESS-transition mobility canmovefromoneESSto
another.However, IEEE802.11doesnotguarantee thatcommunication iscontinuous
duringthemove.
MACSublayer
IEEE802.11definestwoMACsublayers:thedistributed coordination function (DCF)
andpointcoordination function (PCF).Figure14.3showstherelationship between the
twoMACsublayers, theLLCsublayer, andthephysical layer.Wediscussthephysical
layerimplementations laterinthechapterandwillnowconcentrate ontheMAC
sublayer.
Figure14.3MAClayersinIEEE802.11standard
Datalink
layer
MAC
sublayerPointcoordination function(PCF)
Distrilmted coordination function(DC:P)Contention
service
Physical
layer802.Ila 802.l1g
OFDM DSSS
Distributed Coordination Function
Oneofthetwoprotocols definedbyIEEEattheMACsublayeriscalledthedistributed
coordination function (DCF).DCFusesCSMAICA (asdefinedinChapter12)asthe
accessmethod.Wireless LANscannotimplement CSMAfCD forthreereasons:
I.Forcollision detection astationmustbeabletosenddataandreceivecollision
signalsatthesametime.Thiscanmeancostlystationsandincreased bandwidth
requirements.
2.Collision maynotbedetectedbecauseofthehiddenstationproblem. Wewilldiscuss
thisproblem laterinthechapter.
3.Thedistance between stationscanbegreat.Signalfadingcouldpreventastationat
oneendfromhearingacollision attheotherend.
ProcessFlowchart Figure14.4showstheprocessflowchart forCSMAICA asused
inwirelessLANs.Wewillexplainthestepsshortly.
FrameExchange TimeLineFigure14.5showstheexchange ofdataandcontrol
framesintime.424CHAPTER 14WIRELESS LANs
Figure14.4CSMAICA flowchart
Waitback-off
time
TimeIncrement
back-off
Time Time TimeSECTION 14.1IEEE802.11 425
I.Beforesendingaframe,thesourcestationsensesthemedium bychecking the
energylevelatthecarrierfrequency.
a.Thechannelusesapersistence strategywithback-offuntilthechannelisidle.
b.Afterthestationisfoundtobeidle,thestationwaitsforaperiodoftimecalled
thedistributed interframe space(DIFS); thenthestationsendsacontrol
framecalledtherequesttosend(RTS).
2.Afterreceiving theRTSandwaitingaperiodoftimecalledtheshortinterframe
space(SIFS),thedestination stationsendsacontrolframe,calledtheclearto
send(CTS),tothesourcestation.Thiscontrolframeindicates thatthedestination
stationisreadytoreceivedata.
3.ThesourcestationsendsdataafterwaitinganamountoftimeequaltoSIFS.
4.Thedestination station,afterwaitinganamountoftimeequaltoSIFS,sendsan
acknowledgment toshowthattheframehasbeenreceived. Acknowledgment is
neededinthisprotocol becausethestationdoesnothaveanymeanstocheckfor
thesuccessful arrivalofitsdataatthedestination. Ontheotherhand,thelackof
collision inCSMAlCD isakindofindication tothesourcethatdatahavearrived.
Network Allocation Vector Howdootherstationsdefersendingtheirdataifone
stationacquires access?Inotherwords,howisthecollision avoidance aspectofthis
protocolaccomplished? ThekeyisafeaturecalledNAV.
WhenastationsendsanRTSframe,itincludesthedurationoftimethatitneedsto
occupythechannel. Thestationsthatareaffectedbythistransmission createatimer
calledanetwork allocation vector(NAV)thatshowshowmuchtimemustpassbefore
thesestations areallowed tocheckthechannel foridleness. Eachtimeastation
accesses thesystemandsendsanRTSframe,otherstationsstarttheirNAV.Inother
words,eachstation,beforesensingthephysicalmediumtoseeifitisidle,firstchecks
itsNAVtoseeifithasexpired.Figure14.5showstheideaofNAV.
Collision DuringHandshaking Whathappens ifthereiscollision duringthetime
whenRTSorCTScontrolframesareintransition, oftencalledthehandshaking period?
TwoormorestationsmaytrytosendRTSframesatthesametime.Thesecontrolframes
maycollide.However, becausethereisnomechanism forcollision detection, thesender
assumestherehasbeenacollision ifithasnotreceivedaCTSframefromthereceiver.
Theback-off strategyisemployed, andthesendertriesagain.
PointCoordination Function (PCP)
Thepointcoordination function (PCF)isanoptionalaccessmethodthatcanbeimple­
mentedinaninfrastructure network(notinan adhocnetwork).Itisimplemented ontop
oftheDCFandisusedmostlyfortime-sensitive transmission.
PCFhasacentralized, contention-free pollingaccessmethod.TheAPperforms
pollingforstationsthatarecapableofbeingpolled.Thestationsarepolledoneafter
another,sendinganydatatheyhavetotheAP.
TogiveprioritytoPCFoverDCF,anothersetofinterframe spaceshasbeen
defined:PIFSandSIFS.TheSIFSisthesameasthatinDCF,butthePIFS(PCFIFS)is
shorterthantheDIFS.Thismeansthatif,atthesametime,astationwantstouseonly
DCFandanAPwantstousePCF,theAPhaspriority.426CHAPTER 14WIRELESS LANs
DuetothepriorityofPCFoverDCF,stationsthatonlyuseDCFmaynotgain
accesstothemedium. Topreventthis,arepetition intervalhasbeendesigned tocover
bothcontention-free (PCF)andcontention-based (DCF)traffic.Therepetition interval,
whichisrepeatedcontinuously, startswithaspecialcontrolframe,calledabeaconframe.
Whenthestationshearthebeaconframe,theystarttheirNAVforthedurationofthe
contention-free periodoftherepetition interval.Figure14.6showsanexampleofarep­
etitioninterval.
Figure14.6Exampleofrepetition interval
B:Beaconframe
CF:Contention-free
AP
&
Polled
station
&
Others&
&..Repetition interval
Contention-free Contention
PIFS SIFS~-----1----+
f--~ACK+I~
~;B ipoll•••end
Time
SIFS--
ACK+data
Time
}~~c,~~,'
DC:::NAV~,~>:,' ~',,>; ~',,
Time
Duringtherepetition interval, thePC(pointcontroller) cansendapollframe,
receivedata,sendanACK,receiveanACK,ordoanycombination ofthese(802.11
usespiggybacking). Attheendofthe contention-free period,thePCsendsaCFend
(contention-free end)frametoallowthecontention-based stationstousethemedium.
Fragmentation
Thewireless environment isverynoisy;acorruptframehastoberetransmitted. The
protocol, therefore, recommends fragmentation-the divisionofalargeframeinto
smallerones.Itismoreefficienttoresendasmallframethanalargeone.
FrameFormat
TheMAClayerframeconsistsofninefields,asshowninFigure14.7.
oFramecontrol(Fe).TheFCfieldis2byteslonganddefinesthetypeofframeand
somecontrolinformation. Table14.1describes thesubfields. Wewilldiscusseach
frametypelaterinthischapter.SECTION 14.1IEEE802.11 427
Figure14.7Frameformat
2bytes2bytes 6bytes 6bytes 6bytes 2bytes 6bytesoto2312bytes
Framebody
MoreWEPRsvd
data
2bits2bits 4bits 1bit1bit1bit1bit1bit1bit1bit1bit
Table14.1Subfields inFCfield
Field Explanation
Version Currentversionis0
Type Typeofinformation: management (00),control(01),ordata(10)
Subtype Subtypeofeachtype(seeTable14.2)
ToDS Definedlater
FromDS Definedlater
Moreflag Whensetto1,meansmorefragments
Retry Whensetto1,meansretransmitted frame
Pwrmgt Whensetto1,meansstationisinpowermanagement mode
Moredata Whensetto1,meansstationhasmoredatatosend
WEP Wiredequivalent privacy(encryption implemented)
Rsvd Reserved
DD.Inallframetypesexceptone,thisfielddefinesthedurationofthetransmission
thatisusedtosetthevalueofNAY.Inonecontrolframe,thisfielddefinestheID
oftheframe.
DAddresses. Therearefouraddressfields,each6byteslong.Themeaning ofeach
addressfielddependsonthevalueoftheToDSandFromDSsubfields andwillbe
discussed later.
DSequence control. Thisfielddefinesthesequence numberoftheframetobeused
inflowcontrol.
DFramebody.Thisfield,whichcanbebetween0 and2312bytes,containsinfor­
mationbasedonthetypeandthesubtypedefinedintheFCfield.
DFCS.TheFCSfieldis4byteslongandcontainsaCRC-32errordetection sequence.
FrameTypes
AwirelessLANdefinedbyIEEE802.11hasthreecategories offrames:management
frames,controlframes,anddataframes.
Management Frames Management framesareusedfortheinitialcommunication
betweenstationsandaccesspoints.428CHAPTER 14WIRELESS LANs
ControlFrames Controlframesareusedforaccessing thechannelandacknowledg­
ingframes.Figure14.8showstheformat.
Figure14.8Controlframes
2bytes2bytes 6bytes 6bytes 4bytes~ Address1IAddress21FCS ..)
RTS2bytes2bytes 6bytes 4bytes~ Address1Ipcs:I
CTSorACK
Forcontrolframesthevalueofthetypefieldis0I;thevaluesofthesubtypefields
forframeswehavediscussed areshowninTable14.2.
Table14.2Valuesofsubfieldsincontrolframes
Subtype Meaning
1011 Requesttosend(RTS)
1100 Cleartosend(CTS)
1101 Acknowledgment (ACK)
DataFrames Dataframesareusedforcarryingdataandcontrolinformation.
Addressing Mechanism
TheIEEE802.11addressing mechanism specifiesfourcases,definedbythevalueofthe
twoflagsintheFCfield,ToDSandFromDS.Eachflagcanbeeither0orI,resulting in
fourdifferent situations. Theinterpretation ofthefouraddresses (address Itoaddress4)
intheMACframedependsonthevalueoftheseflags,asshowninTable14.3.
Table14.3Addresses
To From Address Address Address Address
DS DS 1 2 3 4
0 0 Destination Source BSSID N/A
0 1Destination SendingAP Source N/A
1 0 Receiving APSource Destination N/A
1 1Receiving APSendingAP Destination Source
Notethataddress1isalwaystheaddressofthenextdevice.Address2isalways
theaddressoftheprevious device.Address3istheaddressofthefinaldestination sta­
tionifitisnotdefinedbyaddressI.Address 4istheaddressoftheoriginalsource
stationifitisnotthesameasaddress2.
oCase1:00Inthiscase,ToDS=0 andFromDS=O.Thismeansthattheframeis
notgoingtoadistribution system(ToDS=0)andisnotcomingfromadistributionSECTION 14.1IEEE802.11 429
system(FromDS=0).TheframeisgoingfromonestationinaBSStoanother
withoutpassingthroughthedistribution system.TheACKframeshouldbesentto
theoriginalsender.Theaddresses areshowninFigure14.9.
Figure14.9Addressing mechanisms
~ss---------------------
I BSS-ID
:,.a.~BIAdla:
:_~ ~_~_~__~ ~_J
a.Case1
[~f~-d~~~~~1i~fi~l~s~Bsi-ii
 ~--BSS
a:: 3 4a
BII A___ ~l _
c.Case3b.Case2
d.Case4
oCase2:01Inthiscase,ToDS=0andFromDS=1.Thismeansthattheframeis
comingfromadistribution system(FromDS=1).Theframeiscomingfroman
APandgoingtoastation.TheACKshouldbesenttotheAP.Theaddresses areas
showninFigure14.9.Notethataddress3contains theoriginalsenderoftheframe
(inanotherBSS).
oCase3:10Inthiscase,ToDS=1andFromDS=O.Thismeansthattheframeis
goingtoadistribution system(ToDS=1).TheframeisgoingfromastationtoanAP.
TheACKissenttotheoriginalstation.Theaddresses areasshowninFigure14.9.
Notethataddress3containsthefinaldestination oftheframe(inanotherBSS).
oCase4:11Inthiscase,ToDS=1andFromDS=1.TIusisthecaseinwhichthedistri­
butionsystemisalsowireless.TheframeisgoingfromoneAPtoanotherAPinawire­
lessdistribution system.Wedonotneedtodefineaddresses ifthedistribution systemis
awiredLANbecausetheframeinthesecaseshastheformatofawiredLANframe
(Ethernet, forexample). Here,weneedfouraddresses todefinetheoriginalsender,the
finaldestination, andtwointermediate APs.Figure14.9showsthesituation.
HiddenandExposed Station Problems
Wereferredtohiddenandexposedstationproblems intheprevious section.Itistime
nowtodicusstheseproblems andtheireffects.
HiddenStationProblem Figure14.10showsanexample ofthehiddenstation
problem. StationBhasatransmission rangeshownbytheleftoval(sphereinspace);
everystationinthisrangecanhearanysignaltransmitted bystationB.StationChas430 CHAPTER 14WIRELESS LANs
Figure14.10Hiddenstationproblem
Range
ofB(]~
B&cRange
ofC
BandCarehiddentfromeachotherwithrespecttoA.
atransmission rangeshownbytherightoval(sphereinspace);everystationlocated
inthisrangecanhearanysignaltransmitted byC.StationCisoutsidethetransmis­
sionrangeofB;likewise, stationBisoutsidethetransmission rangeofC.StationA,
however, isintheareacoveredbybothBandC;itcanhearanysignaltransmitted by
BorC.
AssumethatstationBissendingdatatostationA.Inthemiddleofthistransmission,
stationCalsohasdatatosendtostationA.However, stationCisoutofB'srangeand
transmissions fromBcannotreachC.Therefore Cthinksthemediumisfree.StationC
sendsitsdatatoA,whichresultsinacollisionatAbecausethisstationisreceiving data
frombothBandC.Inthiscase,wesaythatstationsBandCarehiddenfromeachother
withrespecttoA.Hiddenstationscanreducethecapacityofthenetwork because ofthe
possibility ofcollision.
Thesolutiontothehiddenstationproblemistheuseofthehandshake frames(RTS
andCTS)thatwediscussed earlier.Figure14.11showsthattheRTSmessage fromB
reachesA,butnotC.However, becausebothBandCarewithintherangeofA,the
CTSmessage, whichcontainsthedurationofdatatransmission fromBtoAreachesC.
StationCknowsthatsomehiddenstationisusingthechannelandrefrainsfromtrans­
mittinguntilthatdurationisover.
TheCTSframeinCSMAICA handshake canpreventcollision
fromahiddenstation.
Figure14.11 Useofhandshaking topreventhiddenstationproblem
B A C
r
CTS CTS
Time Time TimeSECTION 14.1IEEE802.11 431
Exposed StationProblem Nowconsider asituation thatistheinverseoftheprevi­
ousone:theexposed stationproblem. Inthisproblem astationrefrainsfromusinga
channelwhenitis,infact,available.InFigure14.12,stationAistransmitting tostationB.
StationChassomedatatosendtostationD,whichcanbesentwithoutinterfering
withthetransmission fromAtoB.However, stationCisexposed totransmission from
A;ithearswhatAissendingandthusrefrainsfromsending. Inotherwords,Cistoo
conservative andwastesthecapacityofthechannel.
Figure14.12Exposed stationproblem
Range
ofA
-----~ -------------
Rang;---,
ofC ',a&)CD,'>
Cisexposed totransmission fromAtoB.
Thehandshaking messages RTSandCTScannothelpin thiscase,despitewhatyou
mightthink.StationChearstheRTSfromA,butdoesnotheartheCTSfromB.StationC,
afterhearingtheRTSfromA,canwaitforatimesothattheCTSfromBreachesA;itthen
sendsanRTStoDtoshowthatitneedstocommunicate withD.BothstationsBandA
mayhearthisRTS,butstationAisinthesendingstate,notthereceiving state.StationB,
however, responds withaCTS.Theproblem ishere.IfstationAhasstartedsendingits
data,stationCcannotheartheCTSfromstationDbecauseofthecollision; itcannotsend
itsdatatoD.ItremainsexposeduntilAfinishessendingitsdataasFigure14.13shows.
Figure14.13Useofhandshaking inexposedstationproblem
B
TimeA
TimeExposed to
A'stransmission
C
RTS
Collision
here
TimeD
r
Time125
MHz432CHAPTER i4WiRELESS LANs
Physical Layer
Wediscusssixspecifications, asshowninTable14.4.
Table14.4Physical layers
IEEE Technique Band Modulation Rate(Mbps)
802.11 FHSS 2.4GHz FSK 1and2
DSSS 2.4GHz PSK 1and2
Infrared PPM 1and2
802.11a OFDM 5.725GHz PSKorQAM 6to54
802.l1b DSSS 2.4GHz PSK 5.5and11
802.1Ig OFDM 2.4GHz Different 22and54
Allimplementations, excepttheinfrared, operateintheindustrial, scientific,
andmedical (ISM)band,whichdefinesthreeunlicensed bandsinthethreeranges
902-928 MHz,2.400--4.835 GHz,and5.725-5.850 GHz,asshowninFigure14.14.
Figure14.14industrial, scient(fic, andmedical(ISM)band
26 83.5
,MHz, MHz, ,~ ~I.----'JI 1:1( "I
,",.-----' '=.,.....--~--...,.,,'~'kV; I'~:£--:}00_. ..:,,,,:,].
~;~~ ~~:-
<3A>,i1."< 1...- ----l.. I:.::;.:;.-l~--.:...~:::~-'~,L;~J '0-'.'.:...'.':.....'....:.,-"--"..:.....0. ......'- ~.
9029282.4 2.4835 5.725 5.850Frequency
MHzMHzGHz GHz GHz GHz
IEEE802.11FHSS
IEEE802.11FHSSusesthefrequency-hopping spreadspectrum (FHSS)methodas
discussed inChapter6.FHSSusesthe2.4-GHz ISMband.Thebandisdividedinto
79subbands of1MHz(andsomeguardbands).Apseudorandom numbergenerator
selectsthehoppingsequence. Themodulation technique inthisspecification iseither
two-level FSKorfour-level FSKwithIor2bitslbaud, whichresultsinadatarateof1
or2Mbps,asshowninFigure14.15.
IEEE802.11DSSS
IEEE802.11DSSSusesthedirectsequence spreadspectrum (DSSS)methodasdis­
cussedinChapter6.DSSSusesthe2.4-GHzISMband.Themodulation technique inthis
specification isPSKat1Mbaud/s. Thesystemallows1or2bitslbaud (BPSKorQPSK),
whichresultsinadatarateof1or2Mbps,asshowninFigure14.16.
IEEE802.11Infrared
IEEE802.11infraredusesinfraredlightintherangeof800to950nm.Themodulation
technique iscalledpulseposition modulation (PPM).ForaI-Mbpsdatarate,a4-bitSECTION 14.1IEEE802.11 433
Figure14.15Physical layerofIEEE802.11FHSS
lor2MbpsModulator
Digital 2-Levelor4-1evell
data FSKI
t
Pseudorandom1-+1FrequencyIsequence synthetizer
Figure14.16Physical layerofIEEE802.11DSSS
lor2Mbps
Digital_~
dataI-MHz
Analog
signal
II-MHz
F-~~ Analog
signal
sequence isfirstmappedintoa16-bitsequence inwhichonlyonebitissetto1andthe
restaresettoO.Fora2-Mbpsdatarate,a2-bitsequence isfirstmappedintoa4-bit
sequence inwhichonlyonebitissetto1andtherestaresettoO.Themapped
sequences arethenconverted toopticalsignals;thepresence oflightspecifies 1,the
absenceoflightspecifies O.SeeFigure14.17.
Figure14.17Physical layerofIEEE802.11infrared
lor2Mbps
Digital_~
data.....,.....~Analog
signal
IEEE802.llaOFDM
IEEE802.Ila OFDMdescribes theorthogonal frequency-division multiplexing
(OFDM) methodforsignalgeneration ina5-GHzISMband.OFDMissimilarto
FDMasdiscussed inChapter6,withonemajordifference: Allthesubbands areused
byonesourceatagiventime.Sourcescontendwithoneanotheratthedatalinklayer
foraccess.Thebandisdividedinto52subbands, with48subbandsforsending48
groupsofbitsatatimeand4subbands forcontrolinformation. Theschemeissimilar
toADSL,asdiscussed inChapter9.Dividing thebandintosubbands diminishes the
effectsofinterference. Ifthesubbandsareusedrandomly, securitycanalsobeincreased.434CHAPTER 14WIRELESS LANs
OFDMusesPSKandQAMformodulation. Thecommon dataratesare18Mbps(PSK)
and54Mbps(QAM).
IEEE802.llbDSSS
IEEE802.11bDSSSdescribes thehigh-rate directsequence spreadspectrum (HR­
DSSS)methodforsignalgeneration inthe2.4-GHz ISMband.HR-DSSS issimilarto
DSSSexceptfortheencoding method,whichiscalledcomplementary codekeying
(CCK).CCKencodes4or8bitstooneCCKsymbol.Tobebackward compatible with
DSSS,HR-DSSS definesfourdatarates:1,2,5.5,and11Mbps.Thefirsttwousethe
samemodulation techniques asDSSS.The5.5-Mbps versionusesBPSKandtransmits
at1.375Mbaudls with4-bitCCKencoding. TheII-Mbps versionusesQPSKandtrans­
mitsat1.375Mbpswith8-bitCCKencoding. Figure14.18showsthemodulation tech­
niqueforthisstandard.
Figure14.18Physical layerofIEEE802.11b
5.5or
IIMbps
Digital_~
dataMQiiulator
QPSKll-MHz
~~ Analog
signal
IEEE802.11g
Thisnewspecification definesforwarderrorcorrection andOFDMusingthe2.4-GHz
ISMband.Themodulation technique achievesa22-or54-Mbps datarate.Itisbackward­
compatible with802.11b,butthemodulation technique isOFDM.
14.2BLUETOOTH
Bluetooth isawirelessLANtechnology designed toconnectdevicesofdifferent func­
tionssuchastelephones, notebooks, computers (desktop andlaptop),cameras, printers,
coffeemakers,andsoon.ABluetooth LANisanadhocnetwork, whichmeansthatthe
network isformedspontaneously; thedevices, sometimes calledgadgets, findeach
otherandmakeanetworkcalledapiconet.ABluetooth LANcanevenbeconnected to
theInternetifoneofthegadgetshasthiscapability. ABluetooth LAN,bynature,can­
notbelarge.Iftherearemanygadgetsthattrytoconnect, thereischaos.
Bluetooth technology hasseveralapplications. Peripheral devicessuchasawire­
lessmouseorkeyboard cancommunicate withthecomputer throughthistechnology.
Monitoring devicescancommunicate withsensordevicesinasmallhealthcarecenter.
Homesecuritydevicescanusethistechnology toconnectdifferent sensorstothemainSECTION 14.2BLUETOOTH 435
securitycontroller. Conference attendees cansynchronize theirlaptopcomputers ata
conference.
Bluetooth wasoriginally startedasaprojectbytheEricsson Company. Itisnamed
forHaraldBlaatand, thekingofDenmark (940-981) whounitedDenmark andNorway.
Blaatand translates toBluetooth inEnglish.
Today,Bluetooth technology istheimplementation ofaprotocol definedbythe
IEEE802.15standard. Thestandard definesawirelesspersonal-area network(PAN)
operable inanareathesizeofaroomorahall.
Architecture
Bluetooth definestwotypesofnetworks: piconetandscatternet.
Piconets
ABluetooth networkiscalledapiconet,orasmallnet.Apiconetcanhaveuptoeight
stations,oneofwhichiscalledtheprimary; ttherestarecalledsecondaries. Allthe
secondary stationssynchronize theirclocksandhopping sequence withtheprimary.
Notethatapiconetcanhaveonlyoneprimarystation.Thecommunication betweenthe
primaryandthesecondary canbeone-to-one orone-to-many. Figure14.19showsa
piconet.
Figure14.19 Piconet
Piconet-----------------------------I
Secondary Secondary Secondary Secondary
Although apiconetcanhaveamaximum ofsevensecondaries, anadditional eight
secondaries canbeintheparkedstate.Asecondary inaparkedstateissynchronized
withtheprimary, butcannottakepartincommunication untilitismovedfromthe
parkedstate.Becauseonlyeightstationscanbeactiveinapiconet,activating astation
fromtheparkedstatemeansthatanactivestationmustgototheparkedstate.
Scat/ernet
Piconets canbecombined toformwhatiscalledascatternet. Asecondary stationin
onepiconetcanbetheprimaryinanotherpiconet.Thisstationcanreceivemessages
tTheliterature sometimes usesthetermsmasterandslaveinsteadofprimaryandsecondary. Wepreferthelatter.436 CHAPTER 14WIRELESS LANs
fromtheprimaryinthefirstpiconet(asasecondary) and,actingasaprimary, deliver
themtosecondaries inthesecondpiconet.Astationcanbeamemberoftwopiconets.
Figure14.20illustrates ascatternet.
Figure14.20 Scatternet
Piconet
Secondary Secondary SecondaryPrimary/
SecondarySecondary
Secondary
---------------------t=========-- ~
Piconet
Bluetooth Devices
ABluetooth devicehasabuilt-inshort-range radiotransmitter. Thecurrentdatarateis
1Mbpswitha2.4-GHz bandwidth. Thismeansthatthereisapossibility ofinterference
betweentheIEEE802.11bwirelessLANsandBluetooth LANs.
Bluetooth Layers
Bluetooth usesseverallayersthatdonotexactlymatchthoseoftheInternetmodelwe
havedefinedinthisbook.Figure14.21showstheselayers.
Figure14.21 Bluetooth layers
Applications
IProfiles I
0
I~Ig"6
::> ~
<t:0uIL2CAPIayer I
Baseband layer
Radiolayer
RadioLayer
Theradiolayerisroughlyequivalent tothephysicallayeroftheInternetmodel.Bluetooth
devicesarelow-power andhavearangeof10m.SECTION 14.2BLUETOOTH 437
Band
Bluetooth usesa2.4-GHz ISMbanddividedinto79channels of1MHzeach.
FHSS
Bluetooth usesthefrequency-hopping spreadspectrum (FHSS)methodinthephys­
icallayertoavoidinterference fromotherdevicesorothernetworks. Bluetooth
hops1600timespersecond,whichmeansthateachdevicechangesitsmodulation fre­
quency1600timespersecond. A deviceusesafrequency foronly625Ils(1/1600s)
beforeithopstoanotherfrequency; thedwelltimeis625Ils.
Modulation
Totransform bitstoasignal,Bluetooth usesasophisticated versionofFSK,called
GFSK(FSKwithGaussian bandwidth filtering; adiscussion ofthistopicisbeyondthe
scopeofthisbook).GFSKhasacan'ierfrequency. Bit1isrepresented byafrequency
deviation abovethecarrier;bitaisrepresented byafrequency deviation belowthe
carrier.Thefrequencies, inmegahertz, aredefinedaccording tothefollowing formula
foreachchannel:
fc=2402+n n=0,1,2,3,...,78
Forexample, thefirstchannelusescarrierfrequency 2402MHz(2.402GHz),andthe
secondchannelusescarrierfrequency 2403MHz(2.403GHz).
Baseband Layer
Thebaseband layerisroughlyequivalent totheMACsublayer inLANs.Theaccess
methodisTDMA(seeChapter 12).Theprimaryandsecondary communicate with
eachotherusingtimeslots.Thelengthofatimeslotisexactlythesameasthedwell
time,625Ils.Thismeansthatduringthetimethatonefrequency isused,asendersends
aframetoasecondary, orasecondary sendsaframetotheprimary.Notethatthecom­
munication isonlybetweentheprimaryandasecondary; secondaries cannotcommuni­
catedirectlywithoneanother.
TDMA
Bluetooth usesaformofTDMA(seeChapter12)thatiscalledTDD-TDMA (time­
division duplexTDMA). TDD-TDMA isakindofhalf-duplex communication in
whichthesecondary andreceiversendandreceivedata,butnotatthesametime(half­
duplex); however, thecommunication foreachdirection usesdifferent hops.Thisis
similartowalkie-talkies usingdifferentcarrierfrequencies.
Single-Secondary Communication Ifthepiconethasonlyonesecondary, theTDMA
operation isverysimple.Thetimeisdividedintoslotsof625Ils.Theprimaryuseseven­
numbered slots(0,2,4,...);thesecondary usesodd-numbered slots(1,3,5,...).
TDD-TDMAallowstheprimaryandthesecondary tocommunicate inhalf-duplex mode.fO438 CHAPTER 14WIRELESS LANs
Inslot0,theprimarysends,andthesecondary receives;inslot1,thesecondary sends,and
theprimaryreceives.Thecycleisrepeated. Figure14.22showstheconcept.
Figure14.22 Single-secondary communication
I625Jls I
i' ~i
I, .1 I
:366JlsI: I I
r-rr---:----i HopI r-rr---l Hop:
Primary
 -+LL---JL...----;i--------lI-LL-----JL...----+,------+---l.~
lit1 I Time
,I:
ii,
Secondary
~----_crr=J_H_O_P--l:----~OCJ_H-O-p_+i ---l'~
I I I ITime
Ifl!f2!f3!
Multiple-Secondary Communication Theprocessisalittlemoreinvolved ifthereis
morethanonesecondary inthepiconet.Again,theprimaryusestheeven-numbered slots,
butasecondary sendsinthenextodd-numbered slotifthepacketintheprevious slotwas
addressed toit.Allsecondaries listenoneven-numbered slots,butonlyonesecondary
sendsinanyodd-numbered slot.Figure14.23showsascenario.
Figure14.23 Multiple-secondary communication
I I I I-OCJHOP:CIT=] Hop!•Primary I
jI
1ITime
I I
I I
I I
I I
I I
I I
I II
Hop I
Secondary 1I
ITime
II
I
I
I
II
Secondary 2 trr=JHOp• I
If3Time
fO fl f2 J
Letuselaborate onthefigure.
1.Inslot0,theprimarysendsaframetosecondary 1.
2.Inslot1,onlysecondary Isendsaframetotheprimarybecausetheprevious frame
wasaddressed tosecondary 1;othersecondaries aresilent.SECTION 14.2BLUETOOTH 439
3.Inslot2,theprimarysendsaframetosecondary 2.
4.Inslot3,onlysecondary 2sendsaframetotheprimarybecausetheprevious frame
wasaddressed tosecondary 2;othersecondaries aresilent.
5.Thecyclecontinues.
Wecansaythatthisaccessmethodissimilartoapoll/select operation withreservations.
Whentheprimaryselectsasecondary, italsopollsit.Thenexttimeslotisreserved for
thepolledstationtosenditsframe.Ifthepolledsecondary hasnoframetosend,the
channelissilent.
Physical Links
Twotypesoflinkscanbecreatedbetween aprimaryandasecondary: SCQlinksand
ACLlinks.
scaAsynchronous connection-oriented (SeQ)linkisusedwhenavoiding latency
(delayindatadelivery) ismoreimportant thanintegrity (error-free delivery). Inan
SCQlink,aphysicallinkiscreatedbetweentheprimaryandasecondary byreserving
specificslotsatregularintervals. Thebasicunitofconnection istwoslots,oneforeach
direction. Ifapacketisdamaged, itisneverretransmitted. SCQisusedforreal-time
audiowhereavoiding delayisall-important. Asecondary cancreateuptothreeSCQ
linkswiththeprimary, sendingdigitized audio (PCM) at64kbpsineachlink.
ACLAnasynchronous connectionless link(ACL)isusedwhendataintegrity is
moreimportant thanavoiding latency.Inthistypeoflink,ifapayload encapsulated
intheframeiscorrupted, itisretransmitted. Asecondary returnsanACLframein
theavailable odd-numbered slotifandonlyiftheprevious slothasbeenaddressed
toit.ACLcanuseone,three,ormoreslotsandcanachieveamaximum datarateof
721kbps.
FrameFormat
Aframeinthebaseband layercanbeoneofthreetypes:one-slot, three-slot, orfive-slot.
Aslot,aswesaidbefore,is625~s.However, inaone-slotframeexchange, 259~sis
neededforhoppingandcontrolmechanisms. Thismeansthataone-slotframecanlast
only625-259,or366~s.WithaI-MHzbandwidth and1bit/Hz,thesizeofaone-slot
frameis366bits.
Athree-slot frameoccupies threeslots.However, since 259 ~sisusedforhopping,
thelengthoftheframeis3 x625-259=1616 ~sor1616bits.Adevicethatusesa
three-slot frameremainsatthesamehop(atthesamecarrierfrequency) forthreeslots.
Evcnthoughonlyonchopnumbcrisused,threehopnumbers areconsumed. Thatmeans
thehopnumberforeachframeisequaltothefirstslotoftheframe.
Afive-slotframealsouses259bitsforhopping, whichmeansthatthelengthofthe
frameis5 x625-259=2866bits.
Figure14.24showstheformatofthethreeframetypes.
Thefollowing describes eachfield:
oAccesscode.This72-bitfieldnormally contains synchronization bitsandthe
identifier oftheprimarytodistinguish theframeofonepiconetfromanother.440CHAPTER 14WIRELESS LANs
Figure14.24Framefannat types
72bits 54bits otoNbits
••__....N=240forI-sIalframe
N=1490for3-slotframe
'-3-bi-ts..l..-4-bl-·ls....l...l.......l....-S-b-it-s--N=2740for5-slotframe
ThisIS-bitpartisrepeated3times.
:JHeader. This54-bitfieldisarepeated I8-bitpattern.Eachpatternhasthefollow­
ingsubfields:
1.Address. The3-bitaddresssubfieldcandefineuptosevensecondaries (lto7).
Iftheaddressiszero,itisusedforbroadcast communication fromtheprimary
toallsecondaries.
2.Type.The4-bittypesubfielddefinesthetypeofdatacomingfromtheupper
layers.Wediscussthesetypeslater.
3.F.ThisI-bitsubfieldisforflowcontrol.Whenset(I),itindicates thatthe device
isunabletoreceivemoreframes(bufferisfull).
4.A.ThisI-bitsubfield isforacknowledgment. Bluetooth usesStop-and- Wait
ARQ;Ibitissufficient foracknowledgment.
5.S.ThisI-bitsubfieldholdsasequence number.Bluetooth usesStop-and-Wait
ARQ;Ibitissufficient forsequence numbering.
6.HEC.The8-bitheadererrorcorrection subfieldisachecksum todetecterrors
ineach18-bitheadersection.
Theheaderhasthreeidentical 18-bitsections. Thereceivercompares thesethree
sections, bitbybit.Ifeachofthecorresponding bitsisthesame,thebitisaccepted;
ifnot,themajority opinionrules.Thisisaformofforwarderrorcorrection (forthe
headeronly).Thisdoubleerrorcontrolisneededbecausethenatureofthecommu­
nication, viaair,isverynoisy.Notethatthereisnoretransmission inthissublayer.
oPayload. Thissubfieldcanbe0to2740bitslong.Itcontains dataorcontrol
information corningfromtheupperlayers.
L2CAP
TheLogicalLinkControlandAdaptation Protocol, orL2CAP(L2heremeansLL),
isroughlyequivalent totheLLCsublayerinLANs.Itisusedfordataexchange onan
ACLlink;SCQchannels donotuseL2CAP.Figure14.25showstheformatofthedata
packetatthislevel.
TheI6-bitlengthfielddefinesthesizeofthedata,inbytes,comingfromtheupper
layers.Datacanbeupto65,535bytes.ThechannelID(CID)definesauniqueidenti­
fierforthevirtualchannelcreatedatthislevel(seebelow).
TheL2CAPhasspecificduties:multiplexing, segmentation andreassembly, quality
ofservice(QoS),andgroupmanagement.SECTION 14.3RECOMMENDED READING 441
Figure14.25L2CAPdatapacketfarmat
2bytes 2bytes 0to65,535bytes
Length IChannelID1 D_at_a_an_d_co_n_tro_l _
Multiplexing
TheL2CAPcandomultiplexing. Atthesendersite,itacceptsdatafromoneofthe
upper-layer protocols, framesthem,anddeliversthemtothebaseband layer.Atthe
receiversite,itacceptsaframefromthebaseband layer,extractsthedata,anddelivers
themtotheappropriate protocol layer.Itcreatesakindofvirtualchannelthatwewill
discussinlaterchapters on higher-level protocols.
Segmentation andReassembly
Themaximum sizeofthepayloadfieldinthebaseband layeris2774bits,or343bytes.
Thisincludes 4bytestodefinethepacketandpacketlength.Therefore, thesizeofthe
packetthatcanarrivefromanupperlayercanonlybe339bytes.However, application
layerssometimes needtosendadatapacketthatcanbeupto65,535bytes(anInternet
packet,forexample). TheL2CAPdividestheselargepacketsintosegments andadds
extrainformation todefinethelocationofthesegments intheoriginalpacket.The
L2CAPsegments thepacketatthesourceandreassembles thematthedestination.
QoS
Bluetooth allowsthestationstodefineaquality-of-service level.Wediscussqualityof
serviceinChapter24.Forthemoment, itissufficient toknowthatifnoquality-of-service
levelisdefined,Bluetooth defaultstowhatiscalledbest-effort service;itwilldoitsbest
underthecircumstances.
GroupManagement
Anotherfunctionality ofL2CAPistoallowdevicestocreateatypeoflogicaladdressing
betweenthemselves. Thisissimilartomulticasting. Forexample, twoorthreesecondary
devicescanbepartofamulticast grouptoreceivedatafromtheprimary.
OtherUpperLayers
Bluetooth definesseveralprotocols fortheupperlayersthatusetheservicesofL2CAP;
theseprotocols arespecificforeachpurpose.
14.3RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollow­
ingbooksandsites.Theitemsinbrackets [...]refertothereference listattheendof
thetext.442CHAPTER 14WIRELESS LANs
Books
Wireless LANsandBluetooth arediscussed inseveralbooksincluding [Sch03]and
[Gas02]. Wireless LANsarediscussed inChapter 15of[For03],Chapter17of[Sta04],
Chapters 13and14of[Sta02],andChapter8of[Kei021. Bluetooth isdiscussed in
Chapter 15of[Sta02]andChapter15of[For03].
14.4KEYTERMS
accesspoint(AP)
asynchronous connectionless link
(ACL)
basicserviceset(BSS)
beaconframe
Bluetooth
BSS-transition mobility
complementary codekeying(CCK)
directsequence spreadspectrum (OSSS)
distributed coordination function (OCF)
distributed interframe space(OIFS)
ESS-transition mobility
extended serviceset(ESS)
frequency-hopping spreadspectrum
(FHSS)
handshaking period
high-rate directsequence spreadspectrum
(HR-OSSS)
IEEE802.11LogicalLinkControlandAdaptation
Protocol (L2CAP)
networkallocation vector(NAV)
no-transition mobility
orthogonal frequency-division
multiplexing (OFOM)
piconet
pointcoordination function(PCF)
primary
pulsepositionmodulation (PPM)
repetition interval
scatternet
secondary
shortinterframe space(SIFS)
synchronous connection -oriented
(SCO)
TDD-TOMA(time-division duplex
TOMA)
wirelessLAN
14.5SUMMARY
oTheIEEE802.11standard forwireless LANsdefinestwoservices: basicservice
set(BSS)andextended serviceset(ESS).
oTheaccessmethodusedinthedistributed coordination function (OCF)MACsub­
layerisCSMAICA.
oTheaccessmethodusedinthepointcoordination function (PCF)MACsublayer is
polling.
oThenetworkallocation vector(NAV)isatimerusedforcollision avoidance.
oTheMAClayerframehasninefields.Theaddressing mechanism canincludeupto
fouraddresses.
oWireless LANsusemanagement frames,controlframes,anddataframes.SECTION 14.6PRACTICE SET 443
oIEEE802.11definesseveralphysicallayers,with different dataratesandmodulating
techniques.
oBluetooth isawirelessLANtechnology thatconnects devices(calledgadgets) ina
smallarea.
oABluetooth networkiscalledapiconet.Multiple piconets fonnanetworkcalleda
scatternet.
oABluetooth network consistsofoneprimary deviceanduptosevensecondary
devices.
14.6PRACTICE SET
ReviewQuestions
1.Whatisthedifference between aBSSandanESS?
2.Discussthethreetypesofmobility inawirelessLAN.
3.HowisOFDMdifferent fromFDM?
4.Whatistheaccessmethodusedbywireless LANs?
5.WhatisthepurposeoftheNAV?
6.Compare apiconetandascatternet.
7.MatchthelayersinBluetooth andtheInternetmodel.
8.Whatarethetwotypesoflinksbetween aBluetooth primary andaBluetooth
secondary?
9.Inmultiple-secondary communication, whousestheeven-numbered slotsandwho
usestheodd-numbered slots?
10.HowmuchtimeinaBluetooth one-slotframeisusedforthehopping mechanism?
Whataboutathree-slot frameandafive-slot frame?
Exercises
1].Compare andcontrastCSMAlCD withCSMAICA.
12.UseTable14.5tocompare andcontrastthefieldsinIEEE802.3and802.11.
Table14.5Exercise 12
Fields IEEE802.3FieldSize IEEE802.11FieldSize
Destination address
Sourceaddress
Address 1
Address2
Address3
Address4
FC444CHAPTER 14WIRELESS LANs
Table14.5Exercise 12(continued)
",',.,,.. ~-~,..~'~'~ -."".-_.__.__ ._-*~-
Fields IEEE802.3FieldSize IEEE802.11FieldSize
D/ID
SC
PDUlength
Dataandpadding
Framebody
FCS(CRC)CHAPTER 15
Connecting LANs,Backbone
Networks, andVirtualLANs
LANsdonotnormally operateinisolation. Theyareconnected tooneanotherortothe
Internet.ToconnectLANs,orsegments ofLANs, weuseconnecting devices.Connecting
devicescanoperateindifferent layersoftheInternetmodel.Inthischapter,wediscuss
onlythosethatoperateinthephysicalanddatalinklayers;wediscussthosethatoperate
inthefirstthreelayersinChapter19.
Afterdiscussing someconnecting devices, weshowhowtheyareusedtocreate
backbone networks. Finally,wediscussvirtuallocalareanetworks (VLANs).
15.1CONNECTING DEVICES
Inthissection,wedivideconnecting devicesintofivedifferent categories basedonthe
layerinwhichtheyoperateinanetwork, asshowninFigure15.1.
Figure15.1Fivecategories ofconnecting devices
Application Application
Gateway
Transport Transport
Network Network
Datalink Datalink
Physical Physical
Thefivecategories containdeviceswhichcanbedefinedas
1.Thosewhichoperatebelowthephysical layersuchasapassivehub.
2.Thosewhichoperateatthephysical layer(arepeateroranactivehub).
3.Thosewhichoperateatthephysical anddatalinklayers(abridgeoratwo-layer
switch).
445446CHAPTER 15CONNECTING LANs,BACKBONE NETWORKS, ANDVIRTUAL LANs
4.Thosewhichoperateatthephysical, datalink,andnetworklayers(arouterora
three-layer switch).
5.Thosewhichcanoperateatallfivelayers(agateway).
PassiveHubs
Apassivehubisjustaconnector. Itconnects thewirescomingfromdifferent branches.
Inastar-topology EthernetLAN,apassivehubisjustapointwherethesignalscoming
fromdifferent stationscollide;thehubisthecollision point.Thistypeofahubispart
ofthemedia;itslocationintheInternetmodelisbelowthephysicallayer.
Repeaters
Arepeater isadevicethatoperatesonlyinthephysicallayer.Signalsthatcarryinfor­
mationwithinanetworkcantravelafixeddistancebeforeattenuation endangers the
integrity ofthedata.Arepeaterreceivesasignaland,beforeitbecomes tooweakor
corrupted, regenerates theoriginalbitpattern.Therepeaterthensendstherefreshed
signal.ArepeatercanextendthephysicallengthofaLAN,asshowninFigure15.2.
Figure15.2Arepeater connecting twosegments ofaLAN
5 5
4 4
3 3
2 2
I 1
Segment I Segment 2
ArepeaterdoesnotactuallyconnecttwoLANs;itconnects twosegments ofthe
sameLAN.Thesegments connected arestillpartofonesingleLAN.Arepeaterisnot
adevicethatcanconnecttwoLANsofdifferent protocols.
Arepeater connects segments ofaLAN.
Arepeatercanovercome the10Base5Ethernet lengthrestriction. Inthisstandard,
thelengthofthecableislimitedto500m.Toextendthislength,wedividethecable
intosegments andinstallrepeaters betweensegments. Notethatthewholenetworkis
stillconsidered oneLAN,buttheportionsofthenetworkseparated byrepeaters are
calledsegments. Therepeateractsasatwo-port node,butoperatesonlyinthephysical
layer.Whenitreceivesaframefromanyoftheports,itregenerates andforwards itto
theotherport.SECTION 15.1CONNECTING DEVICES 447
Arepeaterforwards everyframe;ithasnofilteringcapability.
Itistempting tocompare arepeatertoanamplifier, butthecomparison isinaccurate.
Anamplifier cannotdiscriminate between theintended signalandnoise;itamplifies
equallyeverything fedintoit.Arepeaterdoesnotamplifythesignal;itregenerates the
signal.Whenitreceivesaweakened orcorrupted signal,itcreatesacopy,bitforbit,at
theoriginalstrength.
Arepeaterisaregenerator, notanamplifier.
Thelocationofarepeateronalinkisvital.Arepeatermustbeplacedsothatasig­
nalreachesitbeforeanynoisechangesthemeaningofanyofitsbits.Alittlenoisecan
altertheprecision ofabit'svoltagewithoutdestroying itsidentity(seeFigure15.3).If
thecorrupted bittravelsmuchfarther,however, accumulated noisecanchangeits
meaning completely. Atthatpoint,theoriginalvoltageisnotrecoverable, andtheerror
needstobecorrected. Arepeaterplacedonthelinebeforethelegibility ofthesignal
becomes lostcanstill read thesignalwellenoughtodetermine theintended voltages
andreplicatethemintheiroriginalform.
Figure15.3Function ofarepeater
;:;::::·J,*lI(-~cJ"--'---""'.cJ---,--(lrr~
signal signal
a.Right-to-teft transmission.
b.Left-to·right transmission.
ActiveHubs
Anactivehubisactuallyamultipart repeater.Itisnormally usedtocreateconnections
between stationsinaphysicalstartopology. Wehaveseenexamples ofhubsinsome
Ethernet implementations (lOBase- T,forexample). However, hubscanalsobeusedto
createmultiple levelsofhierarchy, asshowninFigure15.4.Thehierarchical useof
hubsremovesthelengthlimitation of10Base-T (100m).
Bridges
Abridgeoperates inboththephysical andthedatalinklayer.Asaphysical layer
device,itregenerates thesignalitreceives. Asadatalinklayerdevice,thebridgecan
checkthephysical(MAC)addresses (sourceanddestination) contained intheframe.448CHAPTER 15CONNECTING LANs,BACKBONE NETWORKS, ANDVIRTUAL LANs
Figure15.4Ahierarchy ofhubs
Filtering
Onemayask,Whatisthedifference infunctionality betweenabridgeandarepeater?
Abridgehasfiltering capability. Itcancheckthedestination addressofaframeand
decideiftheframeshouldbeforwarded ordropped. Iftheframeistobeforwarded, the
decisionmustspecifytheport.Abridgehasatablethatmapsaddresses toports.
Abridgehasatablensedinfilteringdecisions.
Letusgiveanexample. InFigure15.5,twoLANsareconnected byabridge.Ifa
framedestinedforstation712B13456142 arrivesatport1,thebridgeconsultsitstableto
findthedeparting port.According toitstable,framesfor7l2B13456142 leavethrough
port1;therefore, thereisnoneedforforwarding, andtheframeisdropped. Onthe
otherhand,ifaframefor712B13456141 arrivesatport2,thedeparting portisport1
Figure15.5Abridgeconnecting twoLANs
5
4
3
2
12 2
1f-+,---l1-l15
4
3
2
I
Address Port
71:2B:13:45:61:41 1
71:2B:13:45:61:42 1
64:2B:13:45:61:12 2
64:28:13:45:61:13 2BridgeTable
64:2B:13:45:61: 1264:2B:13:45:61: 13
LAN2 LAN171:28:13:45:61:41 71:2B:13:45:61:42
r r 0SECTION 15.1CONNECTING DEVICES 449
andtheframeisforwarded. Inthefirstcase,LAN2remainsfreeoftraffic;inthesec­
ondcase,bothLANshavetraffic.Inourexample, weshowatwo-port bridge;inreality
abridgeusuallyhasmoreports.
Notealsothatabridgedoesnotchangethephysical addresses contained inthe
frame.
Abridgedoesnotchangethephysical (MAC)addresses inaframe.
Transparent Bridges
Atransparent bridgeisabridgeinwhichthestationsarecompletely unawareofthe
bridge'sexistence. Ifabridgeisaddedordeletedfromthesystem,reconfiguration of
thestationsisunnecessary. According totheIEEE802.1dspecification, asystem
equipped withtransparent bridgesmustmeetthreecriteria:
I.Framesmustbeforwarded fromonestationtoanother.
2.Theforwarding tableisautomatically madebylearningframemovements inthe
network.
3.Loopsinthesystemmustbeprevented.
Forwarding Atransparent bridgemustcorrectly forwardtheframes,asdiscussed in
theprevious section.
Learning Theearliestbridgeshadforwarding tablesthatwerestatic.Thesystems
administrator wouldmanually entereachtableentryduringbridgesetup.Although the
processwassimple,itwasnotpractical.Ifastationwasaddedordeleted,thetablehadto
bemodified manually. Thesamewastrueifastation'sMACaddresschanged, whichis
notarareevent.Forexample, puttinginanewnetworkcardmeansanewMACaddress.
Abettersolutiontothestatictableisadynamic tablethatmapsaddresses toports
automatically. Tomakeatabledynamic, weneedabridgethatgradually learnsfrom
theframemovements. Todothis,thebridgeinspects boththedestination andthe
sourceaddresses. Thedestination addressisusedfortheforwarding decision (table
lookup);thesourceaddressisusedforaddingentriestothetableandforupdating pur­
poses.Letuselaborate onthisprocessbyusingFigure15.6.
1.WhenstationAsendsaframetostationD,thebridgedoesnothaveanentryfor
eitherDorA.Theframegoesoutfromallthreeports;theframefloodsthenet­
work.However, bylookingatthesourceaddress,thebridgelearnsthatstationA
mustbelocatedontheLANconnected toport1.Thismeansthatframesdestined
forA,inthefuture,mustbesentoutthroughport1.Thebridgeaddsthisentryto
itstable.Thetablehasitsfirstentrynow.
2.WhenstationEsendsaframetostationA,thebridgehasanentryforA,soitfor­
wardstheframeonlytoport1.Thereisnoflooding. Inaddition, itusesthesource
addressoftheframe,E,toaddasecondentrytothetable.
3.WhenstationBsendsaframetoC,thebridgehasnoentryforC,soonceagainit
floodsthenetworkandaddsonemoreentrytothetable.
4.Theprocessoflearningcontinues asthebridgeforwards frames.450 CHAPTER 15CONNECTING LANs,BACKBONE NETWORKS, ANDVIRTUAL LANs
Figure15.6Alearning bridgeandtheprocessoflearning
r-------JL------, 3
1--------1
LAN2D-'""'T"--"---'""'T"--c:;]LAN1D-......I.--~-.....L._-c;;]
LAN3
Address Port Address Port
A 1Address Port
A1
E3Address Port
A1
E3
BI
a.Original b.AfterAsends
aframetoDc.AfterEsends
aframetoAd.AfterBsends
aframetoC
LoopProblem Transparent bridgesworkfineaslongastherearenoredundant
bridgesinthesystem.Systemsadministrators, however, liketohaveredundant bridges
(morethanonebridgebetweenapairofLANs)tomakethesystemmorereliable.Ifa
bridgefails,anotherbridgetakesoveruntilthefailedoneisrepaired orreplaced.
Redundancy cancreateloopsinthesystem,whichisveryundesirable. Figure15.7
showsaverysimpleexampleofaloopcreatedinasystemwithtwoLANsconnected
bytwobridges.
1.StationAsendsaframetostationD.Thetablesofbothbridgesareempty.Both
forwardtheframeandupdatetheirtablesbasedonthesourceaddressA.
2.NowtherearetwocopiesoftheframeonLAN2.Thecopysentoutbybridge1is
received bybridge2,whichdoesnothaveanyinformation aboutthedestination
addressD;itfloodsthebridge.Thecopysentoutbybridge2isreceivedbybridge1
andissentoutforlackofinformation aboutD.Notethateachframeishandled
separately becausebridges,astwonodesonanetworksharingthemedium, usean
accessmethodsuchasCSMA/CD. Thetablesofbothbridgesareupdated,butstill
thereisnoinformation fordestination D.
3.NowtherearetwocopiesoftheframeonLAN1.Step2isrepeated, andbothcopies
floodthenetwork.
4.Theprocesscontinues onandon.Notethatbridgesarealsorepeaters andregen­
erateframes.Soineachiteration, therearenewlygenerated freshcopiesofthe
frames.
Tosolvetheloopingproblem, theIEEEspecification requires thatbridgesusethe
spanning treealgorithm tocreatealooplesstopology.SECTION 15.1CONNECTING DEVICES 451
Figure15.7Loopproblem inalearning bridge
LAN1 LAN1
LAN2 LAN2
a.StationAsendsaframetostationD b.Bothbridgesforward theframe
c.Bothbridgesforwardtheframe d.Bothbridgesforwardtheframe
Spanning Tree
Ingraphtheory,aspanning treeisagraphinwhichthereisnoloop.Inabridged
LAN,thismeanscreating atopology inwhicheachLANcanbereachedfromany
otherLANthroughonepathonly(noloop).Wecannotchangethephysicaltopology of
thesystembecauseofphysical connections between cablesandbridges,butwecan
createalogicaltopology thatoverlays thephysical one.Figure15.8showsasystem
withfourLANsandfivebridges.Wehaveshownthephysical systemanditsrepresen­
tationingraphtheory.Although sometextbooks represent theLANsasnodesandthe
bridgesastheconnecting arcs,wehaveshownbothLANsandbridgesasnodes.The
connecting arcsshowtheconnection ofaLANtoabridgeandviceversa.Tofind
thespanning tree,weneedtoassignacost(metric)toeacharc.Theinterpretation of
thecostisleftuptothesystemsadministrator. Itmaybethepathwithminimum hops
(nodes),thepath with minimum delay,orthepathwithmaximum bandwidth. Iftwo
portshavethesameshortestvalue,thesystemsadministrator justchoosesone.Wehave
chosentheminimum hops.However, aswewillseeinChapter22,thehopcountisnor­
mally1fromabridgetotheLANand 0inthereversedirection.
Theprocesstofindthespanning treeinvolvesthreesteps:
1.Everybridgehasabuilt-inID(normally theserialnumber,whichisunique).Each
bridgebroadcasts thisIDsothatallbridgesknowwhichonehasthesmallestID.
ThebridgewiththesmallestIDisselectedastherootbridge(rootofthetree).We
assumethatbridgeB1hasthesmallest ID.Itis,therefore, selected astheroot
bridge.452CHAPTER 15CONNECTING LANs,BACKBONE NETWORKS, ANDVIRTUAL LANs
Figure15.8Asystemofconnected LANsanditsgraphrepresentation
LAN2 LAN3
a.Actualsystem
~o1----+-!----+- 0----+-f---...:...----{ LAN1}---'------l
~O ~l
f---";"!----+------( LAN4r--O-----+------l
~O ~!o----+­LAN2)-------{
~l
b.Graphrepresentation withcostassigned toeacharc
2.Thealgorithm triestofindtheshortestpath(apathwiththeshortestcost)fromtheroot
bridgetoeveryotherbridgeorLAN.Theshortestpathcanbefoundbyexamining the
totalcostfromtherootbridgetothedestination. Figure15.9showstheshortestpaths.
3.Thecombination oftheshortestpathscreatestheshortesttree,whichisalsoshown
inFigure15.9.
4.Basedonthespanning tree,wemarktheportsthatarepartofthespanning tree,the
forwarding ports,whichforwardaframethatthebridgereceives. Wealsomark
thoseportsthatarenotpartofthespanning tree,theblocking ports,whichblock
theframesreceived bythebridge.Figure15.10showsthephysical systemsof
LANswithforwarding points(solidlines)andblocking ports(brokenlines).
NotethatthereisonlyonesinglepathfromanyLANtoanyotherLANinthe
spanning treesystem.Thismeans there isonlyonesinglepathfromoneLANtoany
otherLAN.Noloopsarecreated.Youcanprovetoyourselfthatthereisonlyonepath
fromLAN1toLAN2,LAN3,orLAN4.Similarly, thereisonlyonepathfromLAN2
toLAN1,LAN3,andLAN4.ThesameistrueforLAN3andLAN4.
Dynamic Algorithm Wehavedescribed thespanning treealgorithm asthoughit
required manualentries.Thisisnottrue.Eachbridgeisequipped withasoftware pack­
agethatcarriesoutthisprocessdynamically. Thebridgessendspecialmessages toone
another,calledbridgeprotocol dataunits(BPDUs), toupdatethespanning tree.The
spanning treeisupdatedwhenthereisachangeinthesystemsuchasafailureofa
bridgeoranadditionordeletionofbridges.SECTION 15.1CONNECTING DEVICES 453
Figure15.9Findingtheshortestpathsandthespanning treeinasystemofbridges
,
y
---~2'-- - - -------- -~1m~!a-------< LAN1j------j
,,,,
, , :yLAN2j------j
I I 11
, :t LAN4~------i
, , 1
~~:::::::::::::::::::::~-~-- - - - - - - - - - ---~2
a.Shortest paths
Rootof
spanning tree
------( LAN1}-------\
j--------!B 3
-~-
1--------( LAN4}-------\B 5
b.Spanning tree
Figure15.10 Forwarding andblocking portsafterusingspanning treealgorithm
LANl
Rootbridge
LAN2
1Igf
';l210.£
1i=Q
1
LAN4LAN3
Ports2and3ofbridgeB3areblocking ports(noframeissentoutoftheseports).
Port1ofbridgeB5isalsoablocking port(noframeissentoutofthisport).
SourceRouting Bridges
Anotherwaytopreventloopsinasystemwithredundant bridgesistousesourcerouting
bridges.Atransparent bridge'sdutiesincludefilteringframes,forwarding, andblocking.
Inasystemthathassourceroutingbridges,thesedutiesareperformed bythesource
stationand,tosomeextent,thedestination station.454CHAPTER 15CONNECTING LANs,BACKBONE NE7WORKS, ANDVIRTUAL LANs
Insourcerouting,asendingstationdefinesthebridgesthattheframemustvisit.
Theaddresses ofthesebridgesareincluded intheframe.Inotherwords,theframecon­
tainsnotonlythesourceand destination addresses, butalsotheaddresses ofallbridges
tobevisited.
Thesourcegetsthesebridgeaddresses throughtheexchange ofspecialframes
withthedestination priortosending the dataframe.
Sourceroutingbridgesweredesigned byIEEEtobeusedwithTokenRingLANs.
TheseLANsarenotverycommon today.
BridgesConnecting Different LANs
Theoretically abridgeshouldbeabletoconnectLANsusingdifferent protocols atthe
datalinklayer,suchasanEthernet LANtoawirelessLAN.However, therearemany
issuestobeconsidered:
oFrameformat. EachLANtypehasitsownframeformat(compare anEthernet
framewithawirelessLANframe).
DMaximum datasize.Ifanincoming frame'ssizeistoolargeforthedestination
LAN,thedatamustbefragmented intoseveralframes.Thedatathenneedtobe
reassembled atthedestination. However, noprotocol atthedatalinklayerallows
thefragmentation andreassembly offrames.WewillseeinChapter 19thatthisis
allowedinthenetwork layer.Thebridgemusttherefore discardanyframestoo
largeforitssystem.
oDatarate.EachLANtypehasitsowndatarate.(Compare the10-Mbps datarate
ofanEthernet withtheI-Mbpsdatarateofawireless LAN.)Thebridgemust
buffertheframetocompensate forthisdifference.
DBitorder.EachLANtypehasitsownstrategyinthesendingofbits.Somesend
themostsignificant bitinabytefirst;otherssendtheleastsignificant bitfirst.
oSecurity. SomeLANs,suchaswireless LANs,implement securitymeasures in
thedatalinklayer.OtherLANs,suchasEthernet, donot.Security ofteninvolves
encryption (seeChapter30).WhenabridgereceivesaframefromawirelessLAN,
itneedstodecryptthemessage beforeforwarding ittoanEthernet LAN.
DMultimedia support. SomeLANssupportmultimedia andthequalityofservices
neededforthistypeofcommunication; othersdonot.
Two-Layer Switches
Whenweusethetermswitch,wemustbecarefulbecauseaswitchcanmeantwodif­
ferentthings.Wemustclarifythetermbyaddingthelevelatwhichthedeviceoperates.
Wecanhaveatwo-layer switchorathree-layer switch.Athree-layer switchisusedat
thenetworklayer;itisakindofrouter.Thetwo-layer switchperforms atthephysical
anddatalinklayers.
Atwo-layer switchisabridge,abridgewithmanyportsandadesignthatallows
better(faster)performance. Abridgewithafewportscanconnect afewLANs
together. Abridgewithmanyportsmaybeabletoallocateauniqueporttoeachstation,
witheachstationonitsown independent entity.Thismeansnocompeting traffic(no
collision, aswesawinEthernet).SECTION 15.1CONNECTING DEVICES 455
Atwo-layer switch,asabridgedoes,makesafilteringdecisionbasedonthe MAC
addressoftheframeitreceived. However, atwo-layer switchcanbemoresophisti­
cated.Itcanhaveabuffertoholdtheframesforprocessing. Itcanhaveaswitching fac­
torthatforwards theframesfaster.Somenewtwo-layer switches, calledcut-through
switches, havebeendesigned toforwardtheframeassoonastheycheckthe MAC
addresses intheheaderoftheframe.
Routers
Arouterisathree-layer devicethatroutespacketsbasedontheirlogicaladdresses
(host-to-host addressing). Arouternormally connects LANsandWANsintheInternet
andhasaroutingtablethatisusedformakingdecisions abouttheroute.Therouting
tablesarenormally dynamic andareupdatedusingroutingprotocols. Wediscussrout­
ersandroutingingreaterdetailinChapters 19and21.Figure15.11showsapartofthe
Internetthat usesrouterstoconnectLANsandWANs.
Figure15.11 Routersconnecting independent LANsandWANs
WAN
----------------------~
Totherest
ofthe Internet
Three-LayerSwitches
Athree-layer switchisarouter,butafasterandmoresophisticated. Theswitching fabric
inathree-layer switchallowsfastertablelookupandforwarding. Inthisbook,weuse
thetermsrouterandthree-layer switchinterchangeably.
Gateway
Although sometextbooks usethetermsgatewayandrouterinterchangeably, mostofthe
literature distinguishes betweenthetwo.Agatewayisnormally acomputer thatoperates
inallfivelayersoftheInternetorsevenlayersofOSImodel.Agateway takesan
application message, readsit,andinterprets it.Thismeansthatitcanbeusedasa
connecting devicebetween twointernetworks thatusedifferent models.Forexample,
anetworkdesigned tousetheOSImodelcanbeconnected toanothernetworkusing
theInternet model.Thegateway connecting thetwosystems cantakeaframeas
itarrivesfromthefirstsystem,moveituptotheOSIapplication layer,andremovethe
message.456CHAPTER 15CONNECTING LANs,BACKBONE NETWORKS, ANDVIRTUAL LANs
Gateways canprovidesecurity.InChapter32,welearnthatthegatewayisusedto
filterunwanted application-layer messages.
15.2BACKBONE NETWORKS
Someconnecting devicesdiscussed inthischaptercanbeusedtoconnectLANsina
backbone network. Abackbone network allowsseveralLANstobeconnected. Ina
backbone network, nostationisdirectlyconnected tothebackbone; thestationsare
partofaLAN,andthebackbone connects theLANs.Thebackbone isitselfaLAN
thatusesaLANprotocol suchasEthernet; eachconnection tothebackbone isitself
anotherLAN.
Although manydifferent architectures canbeusedforabackbone, wediscussonly
thetwomostcommon: thebusandthestar.
BusBackbone
Inabusbackbone, thetopology ofthebackbone isabus.Thebackbone itselfcanuse
oneoftheprotocols thatsupportabustopology suchaslOBase5orlOBase2.
Inabusbackbone, thetopology ofthebackbone isabus.
Busbackbones arenormally usedasadistribution backbone toconnectdifferent
buildings inanorganization. Eachbuilding cancomprise eitherasingleLANor
anotherbackbone (normally astarbackbone). Agoodexampleofabusbackbone is
onethatconnects single-ormultiple-floor buildings onacampus. Eachsingle-floor
buildingusuallyhasasingleLAN.Eachmultiple-floor buildinghasabackbone (usu­
allyastar)thatconnects eachLANonafloor.Abusbackbone caninterconnect these
LANsandbackbones. Figure15.12showsanexampleofabridge-based backbone with
fourLANs.
Figure15.12 BusbackboneSECTION 15.2BACKBONE NETWORKS 457
InFigure15.12,ifastationinaLANneedstosendaframetoanotherstationin
thesameLAN,thecorresponding bridgeblockstheframe;theframeneverreaches
thebackbone. However, ifastationneedstosendaframetoastationinanotherLAN,the
bridgepassestheframetothebackbone, whichisreceived bytheappropriate bridge
andisdelivered tothedestination LAN.Eachbridgeconnected tothebackbone hasa
tablethatshowsthestationsontheLANsideofthebridge.Theblocking ordeliveryof
aframeisbasedonthecontentsofthistable.
StarBackbone
Inastarbackbone, sometimes calledacollapsed orswitched backbone, thetopology
ofthebackbone isastar.Inthisconfiguration, thebackbone isjustoneswitch(thatis
whyitiscalled,erroneously, acollapsed backbone) thatconnects theLANs.
Inastarbackbone, thetopology ofthebackbone isastar;
thebackbone isjustoneswitch.
Figure15.13showsastarbackbone. Notethat,inthisconfiguration, theswitch
doesthejobofthebackbone andatthesametimeconnects theLANs.
Figure15.13 Starbackbone
Backbone
Switch
Starbackbones aremostlyusedasadistribution backbone insideabuilding. Ina
multifloor building, weusuallyfindoneLANthatserveseachparticular floor.Astar
backbone connects theseLANs.Thebackbone network, whichisjustaswitch,canbe
installed inthebasement orthefirstfloor,andseparatecablescanrunfromtheswitch
toeachLAN.Iftheindividual LANshaveaphysicalstartopology, eitherthehubs(or
switches) canbeinstalled inaclosetonthecorresponding floor,orallcanbeinstalled
closetotheswitch.Weoftenfindarackorchassisinthebasement wherethebackbone
switchandallhubsorswitches areinstalled.
Connecting RemoteLANs
Another common application forabackbone network istoconnectremoteLANs.
Thistypeofbackbone network isusefulwhenacompany hasseveralofficeswith
LANsandneedstoconnect them.Theconnection canbedonethrough bridges,458CHAPTER 15CONNECTING IANs,BACKBONE NETWORKS, ANDVIRTUAL IANs
sometimes calledremotebridges. Thebridgesactasconnecting devicesconnecting
LANsandpoint-to-point networks, suchasleasedtelephone linesorADSLlines.
Thepoint-to-point network inthiscaseisconsidered aLANwithoutstations. The
point-to-point linkcanuseaprotocol suchasPPP.Figure15.14showsabackbone
connecting remoteLANs.
Figure15.14Connecting remoteIANswithbridges
Point-to-point link
Bridge
LAN2
Apoint-to-point linkactsasaLANinaremotebackbone connected byremotebridges.
15.3VIRTUAL LANs
Astationisconsidered partofaLANifitphysically belongstothatLAN.Thecriterion
ofmembership isgeographic. Whathappensifweneedavirtualconnection between
twostationsbelonging totwodifferentphysicalLANs?Wecanroughlydefineavirtual
localareanetwork (VLAN) asalocalareanetworkconfigured bysoftware, notby
physicalwiring.
Letususeanexample toelaborate onthisdefinition. Figure15.15showsa
switched LANinanengineering firminwhich10stationsaregroupedintothreeLANs
thatareconnected byaswitch.Thefirstfourengineers worktogetherasthefirstgroup,
thenextthreeengineers worktogetherasthesecondgroup,andthelastthreeengineers
worktogetherasthethirdgroup.TheLANisconfigured toallowthisarrangement.
Butwhatwouldhappeniftheadministrators neededtomovetwoengineers from
thefirstgrouptothethirdgroup,tospeeduptheprojectbeingdonebythethirdgroup?
TheLANconfiguration wouldneedtobechanged. Thenetwork technician must
rewire.Theproblem isrepeated if,inanotherweek,thetwoengineers movebackto
theirprevious group.Inaswitched LAN,changesintheworkgroupmeanphysical
changesinthenetworkconfiguration.SECTION 15.3VIRTUAL LANs 459
Figure15.15Aswitchconnecting threeLANs
Switch
Group1 Group2 Group3
Figure15.16showsthesameswitched LANdividedintoVLANs. Thewholeidea
ofVLANtechnology istodivideaLANintological,insteadofphysical, segments. A
LANcanbedividedintoseverallogicalLANscalledVLANs. EachVLANisawork
groupintheorganization. Ifapersonmovesfromonegrouptoanother,thereisnoneed
tochangethephysical configuration. Thegroupmembership inVLANsisdefinedby
software, nothardware. Anystationcanbelogically movedtoanotherVLAN.Allmem­
bersbelonging toaVLANcanreceivebroadcast messages senttothatparticular VLAN.
Figure15.16AswitchusingVLANsoftware
SwitchwithVLANsoftware
VLANI
VLAN2
VLAN3460CHAPTER 15CONNECTING LANs,BACKBONE NETWORKS, ANDVIRTUAL LANs
ThismeansifastationmovesfromVLAN1toVLAN2,itreceivesbroadcast messages
senttoVLAN2,butnolongerreceivesbroadcast messages senttoVLAN1.
Itisobviousthattheproblem inourprevious example caneasilybesolvedby
usingVLANs. Movingengineers fromonegrouptoanotherthroughsoftware iseasier
thanchanging theconfiguration ofthephysicalnetwork.
VLANtechnology evenallowsthegrouping ofstationsconnected todifferent
switches inaVLAN.Figure15.17showsabackbone localareanetwork withtwo
switches andthreeVLANs. StationsfromswitchesAandBbelongtoeachVLAN.
Figure15.17Twoswitches inabackbone usingVLANsoftware
...... """"Backbone1- -,
switch
SwitchA SwitchB
VLANI
VLAN2
VLAN3
Thisisagoodconfiguration foracompany withtwoseparate buildings. Each
buildingcanhaveitsownswitched LANconnected byabackbone. Peopleinthefirst
buildingandpeopleinthesecondbuildingcanbeinthesameworkgroupeventhough
theyareconnected todifferent physicalLANs.
Fromthesethreeexamples, wecandefineaVLANcharacteristic:
VLANscreatebroadcast domains.
VLANsgroupstationsbelonging tooneormorephysical LANsintobroadcast
domains. ThestationsinaVLANcommunicate withoneanotherasthoughthey
belonged toaphysicalsegment.SECTION 15.3VIRTUAL LANs 461
Membership
Whatcharacteristic canbeusedtogroupstationsinaVLAN?Vendors usedifferent
characteristics suchasportnumbers, MACaddresses, IPaddresses, IPmulticast
addresses, oracombination oftwoormoreofthese.
PortNumbers
SomeVLANvendorsuseswitchportnumbers asamembership characteristic. For
example, theadministrator candefinethatstationsconnecting toports1,2,3,and 7
belongtoVLAN1;stationsconnecting toports4,10,and12belongtoVLAN2;and
soon.
MACAddresses
SomeVLANvendorsusethe48-bitMACaddressasamembership characteristic. For
example,theadministrator canstipulatethatstationshavingMACaddresses E21342A12334
andF2A123BCD34 1belongtoVLAN1.
IPAddresses
SomeVLANvendorsusethe32-bitIPaddress(seeChapter19)asamembership char­
acteristic. Forexample, theadministrator canstipulatethatstationshavingIPaddresses
181.34.23.67, 181.34.23.72, 181.34.23.98, and181.34.23.112 belongtoVLAN1.
Multicast IPAddresses
SomeVLANvendorsusethemulticast IPaddress(seeChapter19)asamembership
characteristic. Multicasting attheIPlayerisnowtranslated tomulticasting atthedata
linklayer.
Combination
Recently, thesoftware available fromsomevendorsallowsallthesecharacteristics to
becombined. Theadministrator canchooseoneormorecharacteristics wheninstalling
thesoftware. Inaddition, thesoftware canbereconfigured tochangethesettings.
Configuration
Howarethestationsgroupedintodifferent VLANs? Stationsareconfigured inoneof
threeways:manual,semiautomatic, andautomatic.
ManualConfiguration
Inamanualconfiguration, thenetworkadministrator usestheVLANsoftware toman­
uallyassignthestationsintodifferent VLANsatsetup.Latermigration fromone
VLANtoanotherisalsodonemanually. Notethatthisisnotaphysical configuration;
itisalogicalconfiguration. Thetermmanually heremeansthattheadministrator
typestheportnumbers, theIPaddresses, orothercharacteristics, usingtheVLAN
software.462CHAPTER 15CONNECTING LANs,BACKBONE NETWORKS, ANDVIRTUAL LANs
Automatic Configuration
Inanautomatic configuration, thestationsareautomatically connected ordisconnected
fromaVLANusingcriteriadefinedbytheadministrator. Forexample, theadministra­
torcandefinetheprojectnumberasthecriterion forbeingamemberofagroup.When
auserchangestheproject,heorsheautomatically migrates toanewVLAN.
Semiautomatic Configuration
Asemiautomatic configuration issomewhere between amanualconfiguration andan
automatic configuration. Usually, theinitializing isdonemanually, withmigrations
doneautomatically.
Communication Between Switches
Inamultiswitched backbone, eachswitchmustknownotonlywhichstationbelongsto
whichVLAN,butalsothemembership ofstationsconnected tootherswitches. For
example, inFigure15.17,switchAmustknowthemembership statusofstationscon­
nectedtoswitchB,andswitchBmustknowthesameaboutswitchA.Threemethods
havebeendevisedforthispurpose: tablemaintenance, frametagging,andtime-division
multiplexing.
TableMaintenance
Inthismethod, whenastationsendsabroadcast frametoitsgroupmembers, the
switchcreatesanentryinatableandrecordsstationmembership. Theswitches send
theirtablestooneanotherperiodically forupdating.
FrameTagging
Inthismethod,whenaframeistraveling between switches, anextraheaderisaddedto
theMACframetodefinethedestination VLAN.Theframetagisusedbythereceiving
switches todetermine theVLANstobereceiving thebroadcast message.
Time-Division Multiplexing (TDM)
Inthismethod, theconnection (trunk)between switches isdividedintotimeshared
channels (seeTDMinChapter 6).Forexample, ifthetotalnumberofVLANsina
backbone isfive,eachtrunkisdividedintofivechannels. Thetrafficdestined for
VLAN1travelsinchannell, thetrafficdestined forVLAN2travelsinchannel2,and
soon.Thereceiving switchdetermines thedestination VLANbychecking thechannel
fromwhichtheframearrived.
IEEEStandard
In1996,theIEEE802.1subcommittee passedastandard called802.1Qthatdefinesthe
formatforframetagging. Thestandard alsodefinestheformattobeusedinmulti­
switched backbones andenablestheuseofmultivendor equipment inVLANs. IEEE
802.1Qhasopenedthewayforfurtherstandardization inotherissuesrelatedto
VLANs.Mostvendorshavealreadyaccepted thestandard.SECTION 15.5KEY7ERMS 463
Advantages
Thereareseveraladvantages tousingVLANs.
CostandTimeReduction
VLANscanreducethemigration costofstationsgoingfromonegrouptoanother.
Physical reconfiguration takestime and iscostly.Insteadofphysically movingonesta­
tiontoanothersegmentoreventoanotherswitch,itismucheasierandquickertomove
itbyusingsoftware.
Creating VirtualWorkGroups
VLANscanbeusedtocreatevirtualworkgroups.Forexample, inacampusenviron­
ment,professors working onthesameprojectcansendbroadcast messages toone
anotherwithoutthenecessity ofbelonging tothesamedepartment. Thiscanreduce
trafficifthemulticasting capability ofIPwaspreviously used.
Security
VLANsprovideanextrameasureofsecurity. Peoplebelonging tothesamegroupcan
sendbroadcast messages withtheguaranteed assurance thatusersinothergroupswill
notreceivethesemessages.
15.4RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
booksandsites.Theitemsinbrackets[...]refertothereference listattheendofthetext.
Books
Abookdevotedtoconnecting devicesis[PerOO].Connecting devicesandVLANsare
discussed inSection4.7of[Tan03].Switches, bridges,andhubsarediscussed in[Sta03]
and[Sta04].
Site
oIEEE802LAN/MAN Standards Committee
15.5KEYTERMS
amplifier
blocking port
bridge
busbackbone
connecting device
filteringforwarding port
hub
remotebridge
repeater
router
segment464CHAPTER 15CONNECTING LANs,BACKBONE NETWORKS, ANDVIRTUAL LANs
sourceroutingbridge
spanning tree
starbackbone
three-layer switchtransparent bridge
two-layer switch
virtuallocalareanetwork
(VLAN)
15.6SUMMARY
oArepeaterisaconnecting devicethatoperatesinthephysicallayeroftheInternet
model.Arepeaterregenerates asignal,connects segments ofaLAN,andhasno
filteringcapability.
oAbridgeisaconnecting devicethatoperatesinthephysicalanddatalinklayersof
theInternetmodel.
oAtransparent bridgecanforwardandfilterframesandautomatically buildits
forwarding table.
oAbridgecanusethespanning treealgorithm tocreatealooplesstopology.
oAbackbone LANallowsseveralLANstobeconnected.
oAbackbone isusuallyabusorastar.
oAvirtuallocalareanetwork (VLAN) isconfigured bysoftware, notbyphysical
wiring.
oMembership inaVLANcanbebasedonportnumbers, MACaddresses, IP
addresses, IPmulticast addresses, oracombination ofthesefeatures.
oVLANsarecost-andtime-efficient, canreducenetwork traffic,andprovidean
extrameasureofsecurity.
15.7PRACTICE SET
ReviewQuestions
1.Howisarepeaterdifferent fromanamplifier?
2.Whatdowemeanwhenwesaythatabridgecanfiltertraffic?Whyisfiltering
important?
3.Whatisatransparent bridge?
4.HowdoesarepeaterextendthelengthofaLAN?
5.Howisahubrelatedtoarepeater?
6.Whatisthedifference betweenaforwarding portandablocking port?
7.Whatisthedifference betweenabusbackbone andastarbackbone?
8.HowdoesaVLANsaveacompany timeandmoney?
9.HowdoesaVLANprovideextrasecurityforanetwork?
10.HowdoesaVLANreducenetworktraffic?
11.Whatisthebasisformembership inaVLAN?SECTION 15.7PRACTICE SET465
Exercises
12.Complete thetableinFigure15.6aftereachstationhassentapackettoanother
station.
13.Findthespanning treeforthesysteminFigure15.7.
14.Findthespanning treeforthesysteminFigure15.8ifbridgeB5isremoved.
15.Findthespanning treeforthesysteminFigure15.8ifbridgeB2isremoved.
16.Findthespanning treeforthesysteminFigure15.8ifB5isselectedastheroot
bridge.
17.InFigure15.6,weareusingabridge.Canwereplacethebridgewitharouter?
Explaintheconsequences.
18.Abridgeusesafilteringtable;arouterusesaroutingtable.Canyouexplainthe
difference?
19.CreateasystemofthreeLANswithfourbridges.Thebridges(B1toB4)connect
theLANsasfollows:
a.B1connects LAN1andLAN2.
b.B2connects LAN1andLAN3.
c.B3connects LAN2andLAN3.
d.B4connects LAN1,LAN2,andLAN3.
ChooseBIastherootbridge.Showtheforwarding andblocking ports,after
applying thespanning treeprocedure.
20.Whichonehasmoreoverhead, abridgeorarouter?Explainyouranswer.
21.Whichonehasmoreoverhead, arepeaterorabridge?Explainyouranswer.
22.Whichonehasmoreoverhead, arouteroragateway? Explainyouranswer.CHAPTER 16
WirelessWANs:CellularTelephone
andSatelliteNetworks
Wediscussed wirelessLANsinChapter14.Wireless technology isalsousedincellular
telephony andsatellitenetworks. Wediscusstheformerinthischapteraswellasexam­
plesofchannelization accessmethods (seeChapter12).Wealsobrieflydiscusssatellite
networks, atechnology thateventually willbelinkedtocellulartelephony toaccessthe
Internetdirectly.
16.1CELY",ULAR lELEPHONY
Cellular telephony isdesigned toprovidecommunications between twomoving
units,calledmobilestations(MSs),orbetween onemobileunitandonestationary
unit,oftencalledalandunit.Aserviceprovider mustbeabletolocateandtracka
caller,assignachanneltothecall,andtransferthechannelfrombasestationtobase
stationasthecallermovesoutofrange.
Tomakethistracking possible, eachcellularserviceareaisdividedintosmall
regionscalledcells.Eachcellcontainsanantennaandiscontrolled byasolarorACpow­
erednetworkstation,calledthebasestation(BS).Eachbasestation,intum,iscontrolled
byaswitching office,calledamobileswitching center(MSC).TheMSCcoordinates
communication betweenallthebasestationsandthetelephone centraloffice.Itisacom­
puterized centerthatisresponsible forconnecting calls,recording callinformation, and
billing(seeFigure16.1).
Cellsizeisnotfixedandcanbeincreased ordecreased depending onthepopula­
tionofthearea.Thetypicalradiusofacellis1to12mi.High-densityareasrequire
more,geographically smallercellstomeettrafficdemands thandolow-density areas.
Oncedetermined, cellsizeisoptimized topreventtheinterference ofadjacent cell
signals.Thetransmission powerofeachcelliskeptlowtopreventitssignalfrominter­
feringwiththoseofothercells.
Frequency-Reuse Principle
Ingeneral,neighboring cellscannotusethesamesetoffrequencies forcommunication
becauseitmaycreateinterference fortheuserslocatednearthecellboundaries. How­
ever,thesetoffrequencies available islimited,andfrequencies needtobereused.A
467468CHAPTER 16WIRELESS WANs:CELLULAR TELEPHONE ANDSATELLITE NETWORKS
Figure16.1Cellularsystem
Mobileswitching
center 1-------1:....---l:f,
(MSC)
MS
Stationary
phonePublicswitched
telephone network
(PSTN)Cell
frequency reusepatternisaconfiguration ofNcells,Nbeingthereusefactor,inwhich
eachcellusesaunique set offrequencies. Whenthepatternisrepeated, thefrequencies
canbereused.Thereareseveraldifferent patterns.Figure16.2showstwoofthem.
Figure16.2Frequency reusepatterns
a.Reusefactorof4 b.Reusefactorof7
Thenumbers inthecellsdefinethepattern.Thecellswiththesamenumberina
patterncanusethesamesetoffrequencies. Wecallthesecellsthereusingcells.AsFig­
ure16.2shows,inapatternwithreusefactor4,onlyonecellseparates thecellsusing
thesamesetoffrequencies. Inthepatternwithreusefactor7,twocellsseparatethe
reusingcells.
Transmitting
Toplaceacallfromamobilestation,thecallerentersacodeof7or10digits(aphone
number)andpressesthesendbutton.Themobilestationthenscanstheband,seekinga
setupchannelwithastrongsignal,andsendsthedata(phonenumber) totheclosest
basestationusingthatchannel.ThebasestationrelaysthedatatotheMSC.TheMSCSECTION 16.1CELLULAR TELEPHONY 469
sendsthedataontothetelephone centraloffice.Ifthecalledpartyisavailable, acon­
nectionismadeandtheresultisrelayedbacktotheMSC.Atthispoint,theMSC
assignsanunusedvoicechannel tothecall,andaconnection isestablished. The
mobilestationautomatically adjustsitstuningtothenewchannel, andcommunication
canbegin.
Receiving
Whenamobilephoneiscalled,thetelephone centralofficesendsthenumbertothe
MSC.TheMSCsearches forthelocationofthemobilestationbysendingquerysig­
nalstoeachcellinaprocesscalledpaging.Oncethemobilestationisfound,theMSC
transmits aringingsignaland,whenthemobile station answers, assignsavoicechan­
neltothecall,allowing voicecommunication tobegin.
Handoff
Itmayhappenthat,duringaconversation, themobilestationmovesfromonecellto
another.Whenitdoes,thesignalmaybecomeweak.Tosolvethisproblem, theMSC
monitors thelevelofthesignaleveryfewseconds. Ifthestrengthofthesignaldimin­
ishes,theMSCseeksanewcellthatcanbetteraccommodate thecommunication. The
MSCthenchanges thechannelcarrying thecall(handsthesignalofffromtheold
channeltoanewone).
HardHandoff Earlysystemsusedahardhandoff. Inahardhandoff,amobilestation
onlycommunicates withonebasestation.WhentheMSmovesfromonecelltoanother,
communication mustfirstbebrokenwiththepreviousbasestationbeforecommunication
canbeestablished withthenewone.Thismaycreatearoughtransition.
SoftHandoff Newsystemsuseasofthandoff. Inthiscase,amobilestationcan
communicate withtwobasestationsatthesametime.Thismeansthat,duringhandoff,
amobilestationmaycontinue withthenewbasestationbeforebreaking offfromthe
oldone.
Roaming
Onefeatureofcellulartelephony iscalledroaming. Roaming means,inprinciple, that
ausercanhaveaccesstocommunication orcanbereachedwherethereiscoverage. A
serviceprovider usuallyhaslimitedcoverage. Neighboring serviceproviders canpro­
videextended coverage througharoaming contract. Thesituation issimilartosnail
mailbetween countries. Thechargefordeliveryofaletterbetween twocountries can
bedivideduponagreement bythetwocountries.
FirstGeneration
Cellularteleph!Jny isnowinitssecondgeneration withthethirdonthehorizon. The
firstgeneration wasdesigned forvoicecommunication usinganalogsignals.Wediscuss
onefirst-generation mobile system usedinNorthAmerica, AMPS.470CHAPTER 16WIRELESS WANs:CELLULAR TELEPHONE ANDSATELLITE NETWORKS
AMPS
Advanced MobilePhoneSystem(AMPS) isoneoftheleadinganalogcellularsys­
temsinNorthAmerica.ItusesFDMA(seeChapter12)toseparatechannels inalink.
AMPSisananalogcellularphonesystemusingFDMA.
Bands AMPSoperates intheISM800-MHz band.Thesystemusestwoseparate
analogchannels, oneforforward(basestationtomobilestation)communication and
oneforreverse(mobilestationtobasestation)communication. Thebandbetween824
and849MHzcarriesreversecommunication; thebandbetween869and894MHzcarries
forwardcommunication (seeFigure16.3).
Figure16.3CellularbandsforAMPS
Eachbandis25MHz,
madeof8323D-kHzanalogchannels
Forward communication: basetomobile
•849
MHz
Reversecommunication: mobiletobase•
Eachbandisdividedinto832channels. However, twoproviders canshareanarea,
whichmeans416channels ineachcellforeachprovider. Outofthese416,21channels
areusedforcontrol,whichleaves395channels. AMPShasafrequency reusefactor
of7;thismeansonlyone-seventh ofthese395trafficchannels areactuallyavailable in
acell.
Transmission AMPSusesFMandFSKformodulation. Figure16.4showsthetrans­
missioninthereversedirection. Voicechannels aremodulated usingFM,andcontrol
channels useFSKtocreate30-kHzanalogsignals.AMPSusesFDMAtodivideeach
25-MHzbandinto3D-kHzchannels.
SecondGeneration
Toprovidehigher-quality (lessnoise-prone) mobilevoicecommunications, thesecond
generation ofthecellularphonenetworkwasdeveloped. Whilethefirstgeneration was
designed foranalogvoicecommunication, thesecondgeneration wasmainlydesigned
fordigitized voice.Threemajorsystemsevolvedinthesecondgeneration, asshownin
Figure16.5.Wewilldiscusseachsystemseparately.SECTION 16.1CELLULAR TELEPHONY 471
Figure16.4AMPSreversecommunication band
,--...;--, ,.....-..
....IlJ1..".I \(-"".......,FDMA1-----------------1
I30 1Iklli 1
I
I
---:;;...:...:;::..::;:.,.---T....IiiW-....----l. ........---'-_~_'_ I
I
30kHz
Analog,._........J'....~.. ..-.....,--....
IIi I....I 11 I....
1.25-MHzband.1
Figure16.5Second-generation cellularphonesystems
TDMA-FDMA
D-AMPS
Theproductoftheevolution oftheanalogAMPSintoadigitalsystemisdigitalAMPS
(D-AMPS). D-AMPS wasdesigned tobebackward-compatible withAMPS.This
meansthatinacell,onetelephone canuseAMPSandanotherD-AMPS. D-AMPS was
firstdefinedbyIS-54(InterimStandard 54)andlaterrevisedbyIS-136.
BandD-AMPS usesthesamebandsandchannels asAMPS.
Transmission Eachvoicechannelisdigitized usingaverycomplex PCMandcom­
pression technique. Avoicechannelisdigitized to7.95kbps.Three7.95-kbps digital
voicechannels arecombined usingTDMA.Theresultis48.6kbpsofdigitaldata;much
ofthisisoverhead. AsFigure16.6shows,thesystemsends25framespersecond,with
1944bitsperframe.Eachframelasts40ms(1/25)andisdividedintosixslotsshared
bythreedigitalchannels; eachchannelisallottedtwoslots.
Eachslotholds324bits.However, only159bitscomesfromthedigitized voice;
64bitsareforcontroland101bitsareforerrorcorrection. Inotherwords,eachchannel
drops159bitsofdataintoeachofthetwochannels assigned toit.Thesystemadds
64controlbitsand101error-correcting bits.472CHAPTER 16WIRELESS WANs:CEllULAR TELEPHONE ANDSATELLITE NETWORKS
Figure16.6D-AMPS
,---------..7.95 kbps
~~--l
7.95kbps
,---------.. 7.95kbps
--;:"'~--l I------+--+---r--+--+---,
FDMA------------------,
48.6kbps~ :30kHz I
I QPSK30kHz:l;?(--"..."--V--',...,,--',i--....." I~.,''''"I
I I
~PSK30kHz:(--\A...(--',"._',...,'--',!
Channel002------"1 .'dlllWll !"! 1I II :' I
I • I
Channel 832------"1~ 30kHz:t-v--':..·,ry--,;...0 ~
IIj 25-MHzbandIj, •j
I -----------~
Theresulting 48.6kbpsofdigitaldatamodulates acarrierusingQPSK;theresult
isa3D-kHzanalogsignal.Finally,the3D-kHzanalogsignalssharea25-MHz band
(FDMA). D-AMPS hasafrequency reusefactorof7.
D-AMPS, or18-136,isadigitalcellularphonesystemusingTDMAandFDMA.
GSM
TheGlobalSystemforMobileCommunication (GSM)isaEuropean standard that
wasdeveloped toprovideacommon second-generation technology forallEurope.The
aimwastoreplaceanumberofincompatible first-generation technologies.
Bands GSMusestwobandsforduplexcommunication. Eachbandis25MHz
inwidth,shiftedtoward900MHz,asshowninFigure16.7.Eachbandisdividedinto
124channelsof200kHzseparated byguardbands.
Figure16.7GSMbands
Band=25MHz=124channels
1 1
890 Reverseband:124channels 915
MHz MHz
------_-1~935 Forward band:124channels 960
MHz MHzSECTION 16.1CELLULAR TELEPHONY 473
Transmission Figure16.8showsaGSMsystem.Eachvoicechannelisdigitized and
compressed toa13-kbpsdigitalsignal.Eachslotcarries156.25bits(seeFigure16.9).Eight
slotsshareaframe(TDMA). Twenty-six framesalsoshareamultiframe (TDMA). We
cancalculate thebitrateofeachchannelasfollows:
Channeldatarate=(11120 IDS)x20X8X156.25:;:::270.8kbps
Figure16.8GSM
Channel 0018Users13
,------,. kbpsM!-------l t--"'------.....,
13
1:iI-.=...:::~,------,. kbps
-----------------------rY-"'-'-I""""T""'1""""" :T,
:D
I:M
:A
Channel 002------1..:....---------:..---1
~;P••~~"":~"•••• ~~•••~'
Channel 124
--------1.l+-I.--...:..z-s--
MHz,-'-b-an.md-m,~l-> ~i
--~--~----------~
Each270.8-kbps digitalchannelmodulates acarrierusingGMSK(aformof
FSKusedmainlyinEuropean systems); theresultisa200-kHz analogsignal.Finally
124analogchannels of200kHzarecombined usingFDMA.Theresultisa25-MHz
band.Figure16.9showstheuserdataandoverhead inamultiframe.
Thereadermayhavenoticedthelargeamountofoverhead inTDMA.Theuser
dataareonly65bitsperslot.Thesystemaddsextrabitsforerrorcorrection tomakeit
114bitsperslot.Tothis,controlbitsareaddedtobringitupto156.25bitsperslot.
Eightslotsareencapsulated inaframe.Twenty-four trafficframesandtwoadditional
controlframesmakeamultiframe. Amultiframe hasadurationof120ms.However,
thearchitecture doesdefinesuperframes andhyperframes thatdonotaddanyoverhead;
wewillnotdiscussthemhere.
ReuseFactor Becauseofthecomplex errorcorrection mechanism, GSMallowsa
reusefactoraslowas3.474 CHAPTER 16WIRELESS WANs:CELLULAR TELEPHONE ANDSATELLITE NETWORKS
Figure16.9Multiframe components
165bits1Userdata
II
114bitsIUserdataplu.s___ .errorcontrolbits
IIIUserdataplus
156.25bitserrorcontrolbitsand
f----------: .....=-"'""TDMAcontrolbits--
bllrrm ...
rnmrn
,,,~rame=8slots Frame=8slot~///
1multiframe '"26frames
24trafficframes+2controlframes
I,120ms
GSMisadigitalcellularphonesystemusingTDMAandFDMA.
IS-95
Oneofthedominant second-generation standards inNorthAmerica isInterimStan­
dard95(IS-95).ItisbasedonCDMAandDSSS.
BandsandChannels IS-95usestwobandsforduplexcommunication. Thebands
canbethetraditional ISM800-MHz bandortheISM1900-MHz band.Eachbandis
dividedinto20channels of1.228MHzseparated byguardbands.Eachserviceprovider
isallotted10channels. IS-95canbeusedinparallelwithAMPS.EachIS-95channelis
equivalent to41AMPSchannels (41x30kHz;::::1.23MHz).
Synchronization Allbasechannels needtobesynchronized touseCDMA.Topro­
videsynchronization, basesusetheservicesofGPS(GlobalPositioning System), a
satellitesystemthatwediscussinthenextsection.
Forward Transmission IS-95hastwodifferenttransmission techniques: oneforuse
intheforward(basetomobile)direction andanotherforuseinthereverse(mobileto
base)direction. Intheforwarddirection, communications between thebaseandall
mobilesaresynchronized; thebasesendssynchronized datatoallmobiles.Figure16.10
showsasimplified diagramfortheforwarddirection.
Eachvoicechannelisdigitized, producing dataatabasicrateof9.6kbps.After
addingerror-correcting andrepeating bits,andinterleaving, theresultisasignalof
19.2ksps(kilosignals persecond). Thisoutputisnowscrambled usinga19.2-ksps
signal.Thescrambling signalisproduced fromalongcodegenerator thatusestheelec­
tronicserialnumber(ESN)ofthemobilestationandgenerates 242pseudorandom chips,
eachchiphaving42bits.Notethatthechipsaregenerated pseudorandomly, notran­
domly,becausethepatternrepeatsitself.Theoutputofthelongcodegenerator isfedto
adecimator, whichchooses1bitoutof64bits.Theoutputofthedecimator isusedfor
scrambling. Thescrambling isusedtocreate privacy~theESNisuniqueforeachstation.SECTION 16.1CEILULAR TELEPHONY 475
Figure16.10 IS-95forward transmission
25-MHzbandFDMA
I
I
Il.Z28
IMHzI~
.--------.:~:.~." ...~...,,'.-~---":
Ililillillili&i$j\L.' •
ch'-ann-el-OZ .....i;"...-':-...:------':
I
I
II:•••"-••~: -- ~•".•":'+.
ChannelZO ~-----~~'T-I
Digitalchannel63ESN,-_--,. 9.6 19.Z
kbpsErrorcon:ecting. ksps
repeatmg,
interleavingCDMA
-------~-..,wo
Theresultofthescrambler iscombined usingCDMA. Foreachtrafficchannel,
oneWalsh64x64rowchipisselected. Theresultisasignalof1.228Mcps(megachips
persecond).
19.2kspsx64cps=1.228Mcps
ThesignalisfedintoaQPSKmodulator toproduceasignalof1.228MHz.The
resulting bandwidth isshiftedappropriately, usingFDMA.Ananalogchannelcreates
64digitalchannels, ofwhich55channels aretrafficchannels (carrying digitized voice).
Ninechannels areusedforcontrolandsynchronization:
oChannel0isapilotchannel.Thischannelsendsacontinuous streamof1stomobile
stations.Thestreamprovides bitsynchronization, servesasaphasereference for
demodulation, andallowsthemobilestationtocompare thesignalstrengthof
neighboring basesforhandoffdecisions.
oChannel 32givesinformation aboutthesystemtothemobilestation.
oChannels 1to7areusedforpaging,tosendmessages tooneormoremobile
stations.
oChannels 8to31and33to63aretrafficchannels carryingdigitized voicefromthe
basestationtothecorresponding mobilestation.
Reverse Transmission TheuseofCDMAintheforward direction ispossible
becausethepilotchannelsendsacontinuous sequence ofIstosynchronize transmis­
sion.Thesynchronization isnotusedinthereversedirection becauseweneedanentity
todothat,whichisnotfeasible. InsteadofCDMA,thereversechannels useDSSS
(directsequence spreadspectrum), whichwediscussed inChapter8.Figure16.11shows
asimplified diagramforreversetransmission.476CHAPTER 16WIRELESS WANs:CELLULAR TELEPHONE ANDSATELliTE NETWORKS
Figure16.11IS-95reversetransmission
I: I
II I
I II I
L !:::::.eo..!
Channel20:I I:
I 25·MHzband I• •I L _DSSSr-------------I
I 1.228 I
I1.228 MHz I FDMA
IMcps~ r----------------
::1.228 :
III,MHz.I III III :•••:",:.' I
Eachvoicechannelisdigitized, producing dataatarateof9.6kbps.However,
afteraddingerror-correcting andrepeating bits,plusinterleaving, theresultisasignal
of28.8ksps.Theoutputisnowpassedthrougha6/64symbolmodulator. Thesymbols
aredividedintosix-symbol chunks,andeachchunkisinterpreted asabinarynumber
(from0to63).Thebinarynumberisusedastheindextoa64x64Walshmatrixfor
selection ofarowofchips.Notethatthisprocedure isnotCDMA;eachbitisnot
multiplied bythechipsinarow.Eachsix-symbol chunkisreplaced bya64-chip
code.Thisisdonetoprovideakindoforthogonality; itdifferentiates thestreamsof
chipsfromthedifferent mobilestations.Theresultcreatesasignalof307.2kcpsor
(28.8/6)x64.
Spreading isthenextstep;eachchipisspreadinto4.AgaintheESNofthemobile
stationcreatesalongcodeof42bitsatarateof1.228Mcps,whichis4times307.2.
Afterspreading, eachsignalismodulated usingQPSK,whichisslightlydifferentfrom
theoneusedintheforwarddirection; wedonotgointodetailshere.Notethatthereis
nomultiple-access mechanism here;allreversechannels sendtheiranalogsignalinto
theair,butthecorrectchipswillbereceivedbythebasestationduetospreading.
Although wecancreate242-1digitalchannels inthereversedirection (because of
thelongcodegenerator), normally 94channels areused;62aretrafficchannels, and
32arechannels usedtogainaccesstothebasestation.
IS-95isadigitalcellularphonesystemusingCDMAlDSSS andFDMA.
TwoDataRateSetsIS-95definestwodataratesets,withfourdifferentratesineach
set.Thefirstsetdefines9600,4800,2400,and1200bps.If,forexample, theselected
rateis1200bps,eachbitisrepeated 8timestoprovidearateof9600bps.Thesecond
setdefines14,400,7200,3600,and1800bps.Thisispossiblebyreducing thenumber
ofbitsusedforerrorcorrection. Thebitratesinasetarerelatedtothe activity ofthe
channel.Ifthechannelissilent,only1200bitscanbetransferred, whichimproves the
spreading byrepeating eachbit8times.
Frequency-Reuse Factor InanIS-95system,thefrequency-reuse factorisnormally 1
becausetheinterference fromneighboring cellscannotaffectCDMAorDSSStransmission.SECTION 16.1CELLUlAR TELEPHONY 477
SoftHandoff Everybasestationcontinuously broadcasts signalsusingitspilot
channel.Thismeansamobilestationcandetectthepilotsignalfromitscellandneigh­
boringcells.Thisenablesamobilestationtodoasofthandoffincontrasttoahard
handoff.
pes
Beforeweleavethediscussion ofsecond-generation cellulartelephones, letusexplain
atermgenerally heardinrelationtothisgeneration: PCS.Personal communications
system(peS)doesnotrefertoasingletechnology suchasGSM,18-136,or18-95.Itis
agenericnameforacommercial systemthatoffersseveralkindsofcommunication
services. Common featuresofthesesystemscanbesummarized:
1.Theymayuseanysecond-generation technology (GSM,IS-136,orIS-95).
2.Theyusethe1900-MHz band,whichmeansthatamobilestationneedsmorepower
becausehigherfrequencies haveashorterrangethanlowerones.However, sincea
station'spowerislimitedbytheFCC,thebasestationandthemobilestationneed
tobeclosetoeachother(smallercells).
3.Theyoffercommunication servicessuchasshortmessageservice(SMS)andlimited
Internetaccess.
ThirdGeneration
Thethirdgeneration ofcellulartelephony referstoacombination oftechnologies that
provideavarietyofservices. Ideally,whenitmatures,thethirdgeneration canprovide
bothdigitaldataandvoicecommunication. Usingasmallportabledevice,aperson
shouldbeabletotalktoanyoneelseintheworldwithavoicequalitysimilartothatof
theexistingfixedtelephone network. Apersoncandownload andwatchamovie,can
download andlistentomusic,cansurftheInternetorplaygames,canhaveavideo
conference, andcandomuchmore.Oneoftheinteresting characteristics ofathird­
generation systemisthattheportabledeviceisalwaysconnected; youdonotneedto
dialanumbertoconnecttotheInternet.
Thethird-generation conceptstartedin1992,whenITUissuedablueprint called
theInternet MobileCommunication 2000(IMT-2000). Theblueprint definessome
criteriaforthird-generation technology asoutlinedbelow:
oVoicequalitycomparable tothatoftheexistingpublictelephone network.
oDatarateof144kbpsforaccessinamovingvehicle(car),384kbpsforaccessas
theuserwalks(pedestrians), and2Mbpsforthestationary user(officeorhome).
oSupportforpacket-switched andcircuit-switched dataservices.
oAbandof2GHz.
oBandwidths of2MHz.
oInterface totheInternet.
Themaingoalofthird-generation cellulartelephony istoprovide
universal personal communication.478CHAPTER 16WIRELESS WANs:CELLUlAR TELEPHONE ANDSATELLITE NETWORKS
IMT-2000 RadioInterface
Figure16.12showstheradiointerfaces (wireless standards) adoptedby1MT-2000. All
fivearedeveloped fromsecond-generation technologies. Thefirsttwoevolvefrom
COMAtechnology. Thethirdevolvesfromacombination ofCOMAandTOMA.The
fourthevolvesfromTOMA,andthelastevolvesfrombothFOMAandTOMA.
Figure16.12IMT-2000 radiointeifaces
IMT-SC IMT-FT
Singlecarrier Frequency time
CDMAIMT-TC
Timecode
CDMA&TDMA TDMA TDMA&FDMA
IMT-DSThisapproach usesaversionofCOMAcalledwideband COMAorW-COMA.
W-COMA usesa5-MHzbandwidth. Itwasdeveloped inEurope,anditiscompatible
withtheCOMAusedinIS-95.
IMT-MC Thisapproach wasdeveloped inNorthAmerica andisknownasCOMA
2000.Itisanevolution ofCOMAtechnology usedinIS-95channels.Itcombines the
newwideband (I5-MHz) spreadspectrum withthenarrowband (l.25-MHz) COMAof
IS-95.Itisbackward-compatible withIS-95.Itallowscommunication onmultiple
1.25-MHz channels(l,3,6,9,12times),upto15MHz.Theuseofthewiderchannels
allowsittoreachthe2-Mbpsdataratedefinedforthethirdgeneration.
IMT-TCThisstandard usesacombination ofW-COMA andTDMA.Thestandard
triestoreachtheIMT-2000 goalsbyaddingTOMAmultiplexing toW-COMA.
IMT-SCThisstandardonlyusesTOMA.
IMT-FTThisstandardusesacombination ofFDMAandTOMA.
16.2SATELLITE NETWORKS
Asatellitenetwork isacombination ofnodes,someofwhicharesatellites, thatprovides
communication fromonepointontheEarthtoanother.Anodeinthenetworkcanbea
satellite,anEarthstation,oranend-user terminalortelephone. Although anaturalsatel­
lite,suchastheMoon,canbeusedasarelayingnodeinthenetwork, theuseofartificial
satellitesispreferred becausewecaninstallelectronic equipment onthesatellitetoregen­
eratethesignalthathaslostitsenergyduringtravel.Anotherrestriction onusingnatural
satellitesistheirdistances fromtheEarth,whichcreatealongdelayincommunication.
Satellitenetworks arelikecellularnetworks inthattheydividetheplanetintocells.
Satellites canprovidetransmission capability toandfromanylocationonEarth,no
matterhowremote.Thisadvantage makeshigh-quality communication available toSECTION 16.2SATELLITE NETWORKS 479
undeveloped partsoftheworldwithoutrequiring ahugeinvestment inground-based
infrastructure.
Orbits
Anartificialsatelliteneedstohaveanorbit~thepathinwhichittravelsaroundtheEarth.
Theorbitcanbeequatorial, inclined, orpolar,asshowninFigure16.13.
Figure16.13Satelliteorbits
Orbit
OrbitOrbit
a.Equatorial-orbit satellite b.Inclined-orbitsatellite c.Polar-orbit satellite
Theperiodofasatellite, thetimerequiredforasatellitetomakeacomplete trip
aroundtheEarth,isdetermined byKepler'slaw,whichdefinestheperiodasafunction
ofthedistanceofthesatellitefromthecenteroftheEarth.
Example 16.1
WhatistheperiodoftheMoon,according toKepler's law?
Period:::: Cxdistance 1.5
HereCisaconstant approximately equalto1/100.Theperiodisinsecondsandthedistancein
kilometers.
Solution
TheMoonislocatedapproximately 384,000 kmabovetheEarth.TheradiusoftheEarthis
6378km.Applying theformula, weget
Period=_1_(384,000 +6378)1.5=2,439,090 s=1month100
Example 16.2
According toKepler'slaw,whatistheperiodofasatellitethatislocatedatanorbitapproximately
35,786kmabovetheEarth?
Solution
Applying theformula, weget
Period=1~(35,786+6378/5=86,579s=24h480CHAPTER 16WIRELESS WANs:CELLULAR TELEPHONE ANDSATELLITE NETWORKS
Thismeansthatasatellitelocatedat35,786kmhasaperiodof24h,whichisthesameasthe
rotationperiodoftheEarth.Asatellitelikethisissaidtobestationary totheEarth.Theorbit,as
wewillsee,iscalledageosynchronous orbit.
Footprint
Satellites process microwaves withbidirectional antennas (line-of-sight). Therefore, the
signalfromasatelliteisnormally aimedataspecificareacalledthefootprint. Thesig­
nalpoweratthecenterofthefootprint ismaximum. Thepowerdecreases aswemove
outfromthefootprint center.Theboundary ofthefootprint isthelocationwherethe
powerlevelisatapredefined threshold.
ThreeCategories ofSatellites
Basedonthelocationoftheorbit,satellites canbedividedintothreecategOlies: geosta­
tionaryEarthorbit(GEO),low-Earth-orbit (LEO),andmiddle-Earth-orbit (MEO).
Figure16.14showsthetaxonomy.
Figure16.14 Satellitecategories
Figure16.15showsthesatellitealtitudes withrespecttothesurfaceoftheEarth.
Thereisonlyoneorbit,atanaltitudeof35,786kInfortheOEOsatellite.MEOsatellites
arelocatedataltitudesbetween5000and15,000kIn.LEOsatellites arenormally below
analtitudeof2000km.
Figure16.15 Satelliteorbitaltitudes
Altitude
(km)
35,786
-~~~-GEO
UpperVanAllenbelt
15,000~~~ ~MEa
5000LowerVanAllenbelt
0~~~qf'~ ~LEOSECTION 16.2SATELLITE NETWORKS 481
Onereasonforhavingdifferent orbitsisduetotheexistence oftwoVanAllen
belts.AVanAllenbeltisalayerthatcontains chargedparticles. Asatelliteorbitingin
oneofthesetwobeltswouldbetotallydestroyed bytheenergetic chargedparticles.
TheMEOorbitsarelocatedbetweenthesetwobelts.
Frequency BandsforSatelliteCommunication
Thefrequencies reserved forsatellitemicrowave communication areinthegigahertz
(OHz)range.Eachsatellitesendsandreceivesovertwodifferent bands.Transmission
fromtheEarthtothesatelliteiscalledtheuplink.Transmission fromthesatellitetotheEarth
iscalledthedownlink. Table16.1givesthebandnamesandfrequencies foreachrange.
Table16.1Satellitefrequency bands
Band Downlink, GHz Uplink,GHz Bandwidth, MHz
L 1.5 1.6 15
S 1.9 2.2 70
C 4.0 6.0 500
Ku 11.0 14.0 500
Ka 20.0 30.0 3500
GEOSatellites
Line-of-sight propagation requiresthatthesendingandreceiving antennas belocked
ontoeachother'slocationatalltimes(oneantennamusthavetheotherinsight).For
thisreason,asatellitethatmovesfasterorslowerthantheEarth'srotationisuseful
onlyforshortperiods.Toensureconstant communication, thesatellitemustmoveat
thesamespeedastheEarthsothatitseemstoremainfixedaboveacertainspot.Such
satellites arecalledgeostationary.
Becauseorbitalspeedisbasedonthedistancefromtheplanet,onlyoneorbitcanbe
geostationary. Thisorbitoccursattheequatorial planeandisapproximately 22,000mi
fromthesurfaceoftheEarth.
Butonegeostationary satellitecannotcoverthewholeEarth.Onesatelliteinorbit
hasline-of-sight contactwithavastnumberofstations,butthecurvature oftheEarth
stillkeepsmuchoftheplanetoutofsight.Ittakesaminimum ofthreesatellites equi­
distantfromeachotheringeostationary Earthorbit(OEO)toprovidefullglobaltransmis­
sion.Figure16.16showsthreesatellites, each120°fromanotheringeosynchronous
orbitaroundtheequator.TheviewisfromtheNorthPole.
MEOSatellites
Medium-Earth-orbit (MEO)satellites arepositioned between thetwoVanAllen
belts.Asatelliteatthisorbittakesapproximately 6-8hourstocircletheEarth.
GlobalPositioning System
OneexampleofaMEOsatellitesystemistheGlobalPositioning System(GPS),con­
stractedandoperated bytheUSDepartment ofDefense, orbitingatanaltitudeabout482CHAPTER 16WIRELESS WANs:CELLULAR TELEPHONE ANDSATELLITE NETWORKS
Figure16.16Satellites ingeostationary orbit
18,000km(11,000mi)abovetheEarth.Thesystemconsistsof24satellites andisusedfor
land,sea,andairnavigation toprovidetimeandlocations forvehiclesandships.GPS
uses24satellites insixorbits,asshowninFigure16.17.Theorbitsandthelocations of
thesatellites ineachorbitaredesigned insuchawaythat,atanytime,foursatellites
arevisiblefromanypointonEarth.AGPSreceiverhasanalmanac thattellsthecurrent
positionofeachsatellite.
Figure16.17 Orbitsforglobalpositioning system(GPS)satellites
Trilateration GPSisbasedonaprinciple calledtrilateration. tOnaplane,ifwe
knowourdistancefromthreepoints,weknowexactlywhereweare.Letussay thatwe
are10milesawayfrompointA,12milesawayfrompointB,and15milesawayfrom
pointC.IfwedrawthreecircleswiththecentersatA,B,andC,wemustbesomewhere
oncircleA,somewhere oncircleB,andsomewhere oncircleC.Thesethreecirclesmeet
atonesinglepoint(ifourdistances arecorrect), ourposition. Figure16.18ashowsthe
concept.
Inthree-dimensional space,thesituation isdifferent. Threespheresmeetintwo
pointsasshowninFigure16.18b.Weneedatleastfourspherestofindourexactposition
inspace(longitude, latitude, andaltitude). However, ifwehaveadditional factsabout
ourlocation(forexample, weknowthatwearenotinsidetheoceanorsomewhere in
tThetennstrilateration andtriangulation arenonnally usedinterchangeably. Weusethewordtrilateration,
whichmeansusingthreedistances, insteadoftriangulation, whichmaymeanusingthreeangles.SECTION 16.2SATELliTE NETWORKS 483
Figure16.18 Trilateration onaplane
""-/ B \
Il.--\-///--,
"I/ \~/ \
"I~'eC\/ \ I
I \ \ I
\Ae',I /
\ .....1.-._...."" /.....--
a.Two-dimensional trilateration b.Three-dimensional trilateration
space),threespheresareenough,becauseoneofthetwopoints,wherethespheresmeet,
issoimprobable thattheothercanbeselectedwithoutadoubt.
Measuring theDistance Thetrilateration principle canfindourlocationontheearthif
weknowourdistancefromthreesatellites andknowthepositionofeachsatellite.The
positionofeachsatellitecanbecalculated byaGPSreceiver(usingthepredetermined path
ofthesatellites). TheGPSreceiver,then,needstofinditsdistancefromatleastthreeGPS
satellites (centerofthespheres). Measuring thedistanceisdoneusingaprinciple called
one-wayranging.Forthemoment, letusassumethatallGPSsatellitesandthereceiveron
theEartharesynchronized. Eachof24satellitessynchronously transmits acomplexsignal
eachhavingauniquepattern.Thecomputer onthereceivermeasures thedelaybetweenthe
signalsfromthesatellitesanditscopyofsignalstodetermine thedistances tothesatellites.
Synchronization Theprevious discussion wasbasedontheassumption thatthesat­
ellites'clockaresynchronized witheachotherandwiththereceiver's clock.Satellites
useatomicclockthatarepreciseandcanfunction synchronously witheachother.The
receiver's clockhowever, isanormalquartzclock(anatomicclockcostsmorethat
$50,000), andthereisnowaytosynchronize itwiththesatelliteclocks.Thereisan
unknown offsetbetween thesatelliteclocksandthereceiverclockthatintroduces a
corresponding offsetinthedistance calculation. Because ofthisoffset,themeasured
distanceiscalledapseudorange.
GPSusesanelegantsolutiontotheclockoffsetproblem, byrecognizing thattheoff­
set'svalueisthesameforallsatellitebeingused.Thecalculation ofpositionbecomes find­
ingfourunknowns: thexpYPzpcoordinates ofthereceiver,andcommon clockoffsetdt.
Forfindingthesefourunknown values,weneedatleastfourequations. Thismeansthat
weneedtomeasurepesudoranges fromfoursatelliteinsteadofthree.Ifwecallthefour
measured pseudoranges PRI,PR2,PR3andPR4andthecoordinates ofeachsatellite
Xi,yj,andZj(fori=1to4),wecanfindthefourpreviously mentioned unknown values
usingthefollowing four equations (thefourunknown valuesareshownincolor).
PRI=[(Xl- xr)2+(YI-Yr)2+(zl-zr)zJlIZ+c Xdt
PRz=[(xz-xr)2+(yz-Yr)z+(zz-zr)2JI/Z+exdt
PR3=[(x3-xr)z+(Y3-Yr)z+(z3-zr)ZJ1/2+exdt
PR4=[(x4-xrP+(Y4-Yr)z+(z4-zr)ZJI/Z+exdt484CHAPTER 16WIRELESS WANs:CELLULAR TELEPHONE ANDSATELLITE NETWORKS
Thecoordinates usedintheaboveformulas areinanEarth-Centered Earth-Fixed
(ECEF)reference frame,whichmeansthattheoriginofthecoordinate spaceisatthe
centeroftheEarthandthecoordinate spacerotatewiththeEarth.Thisimpliesthatthe
ECEFcoordinates ofafixedpointonthesurfaceoftheearthdonotchange.
Application GPSisusedbymilitaryforces.Forexample, thousands ofportable GPS
receivers wereusedduringthePersianGulfwarbyfootsoldiers, vehicles, andhelicop­
ters.Another useofGPSisinnavigation. Thedriverofacarcanfindthelocationof
thecar.Thedrivercanthenconsultadatabase inthememory oftheautomobile tobe
directed tothedestination. Inotherwords,GPSgivesthelocationofthecar,andthe
database usesthisinformation tofindapathtothedestination. Averyinteresting appli­
cationisclocksynchronization. Aswementioned previously, theIS-95cellulartelephone
systemusesGPStocreatetimesynchronization between thebasestations.
LEOSatellites
Low-Earth-orbit (LEO)satellites havepolarorbits.Thealtitudeisbetween 500and
2000km,witharotationperiodof90to120min.Thesatellitehasaspeedof20,000to
25,000km/h.AnLEOsystemusuallyhasacellulartypeofaccess,similartothecellu­
lartelephone system.Thefootprint normally hasadiameter of8000km.Because LEO
satellites areclosetoEarth,theround-trip timepropagation delayisnormally lessthan
20ms,whichisacceptable foraudiocommunication.
AnLEOsystemismadeofaconstellation ofsatellites thatworktogetherasanetwork;
eachsatelliteactsasaswitch.Satellites thatareclosetoeachotherareconnected through
intersatellite links(ISLs).Amobilesystemcommunicates withthesatellitethroughauser
mobilelink(UML).Asatellitecanalsocommunicate withanEarthstation(gateway)
throughagatewaylink(GWL).Figure16.19showsatypicalLEOsatellitenetwork.
Figure16.19LEOsatellitesystem
ISL~ ...I)~
;7!--~~~-
 -~i--~
~:~,-
 ~:~--~)-i)
--___Footprint -~__.:::-::.--Footprint -------------- ----------
LEOsatellites canbedividedintothreecategories: littleLEOs,bigLEOs,andbroad­
bandLEOs.ThelittleLEOsoperateunder1GHz.Theyaremostly used forlow-data-rate
messaging. ThebigLEOsoperatebetween 1and3GHz.Globalstar andIridiumsystems
areexamples ofbigLEOs.Thebroadband LEOsprovidecommunication similartofiber­
opticnetworks. Thefirstbroadband LEOsystemwasTeledesic.SECTION 16.2SATELLITE NETWORKS 485
IridiumSystem
TheconceptoftheIridium system,a77-satellite network, wasstartedbyMotorola in
1990.Theprojecttookeightyearstomaterialize. Duringthisperiod,thenumberofsatel­
liteswasreduced. Finally,in1998,theservicewasstartedwith66satellites. Theoriginal
name,Iridium,camefromthenameofthe77thchemical element; amOreappropriate
nameisDysprosium (thenameofelement66).
Iridiumhasgonethroughroughtimes.Thesystemwashaltedin1999duetofinan­
cialproblems; itwassoldandrestarted in2001undernewownership.
Thesystemhas66satellites dividedintosixorbits, with 11satellites ineachorbit.
Theorbitsareatanaltitudeof750km.Thesatellites ineachorbitareseparated from
oneanotherbyapproximately 32°oflatitude.Figure16.20showsaschematic diagram
oftheconstellation.
Figure16.20 Iridiumconstellation
TheIridiumsystemhas66satellites insixLEOorbits,eachatanaltitudeof750kIn.
Sinceeachsatellitehas48spotbeams,thesystemcanhaveupto3168beams.How­
ever,someofthebeamsareturnedoffasthesatelliteapproaches thepole.Thenumberof
activespotbeamsatanymomentisapproximately 2000.Eachspotbeamcoversacellon
Earth,whichmeansthatEarthisdividedintoapproximately 2000(overlapping) cells.
IntheIridiumsystem,communication betweentwouserstakesplacethroughsatel­
lites.Whenausercallsanotheruser,thecallcangothroughseveralsatellites before
reaching thedestination. Thismeansthatrelaying isdoneinspaceandeachsatellite
needstobesophisticated enoughtodorelaying. Thisstrategyeliminates theneedfor
manyterrestrial stations.
ThewholepurposeofIridiumistoprovidedirectworldwide communication using
handheld terminals (sameconceptascellulartelephony). Thesystemcanbeusedfor
voice,data,paging,fax,andevennavigation. Thesystemcanprovideconnectivity
betweenusersatlocations whereothertypesofcommunication arenotpossible. Thesys­
temprovides 2.4-to4.8-kbps voiceanddatatransmission betweenportabletelephones.
Transmission occursinthe1.616-to1.6126-GHzfrequency band.Intersatellite commu­
nicationoccursinthe23.18-to23.38-GHz frequency band.486CHAPTER 16WIRELESS WANs:CELLULAR TELEPHONE ANDSATELLITE NETWORKS
Iridiumisdesigned toprovidedirectworldwide voiceanddatacommunicationusing
handheld terminals, aservicesimilartocellulartelephony butonaglobalscale.
Globalstar
Globalstar isanotherLEOsatellitesystem.Thesystemuses48satellites insixpolar
orbitswitheachorbithostingeightsatellites. Theorbitsarelocatedatanaltitudeof
almost1400lan.
TheGlobalstar systemissimilartotheIridiumsystem;themaindifference istherelay­
ingmechanism. Communication betweentwodistantusersintheIridiumsystemrequires
relayingbetweenseveralsatellites; Globalstar communication requiresbothsatellites and
Earthstations,whichmeansthatgroundstationscancreatemorepowerful signals.
Teledesic
Teledesic isasystemofsatellites thatprovides fiber-optic-like (broadband channels,
lowerrorrate,andlowdelay)communication. Itsmainpurposeistoprovidebroadband
Internetaccessforusersallovertheworld.Itissometimes called"Internet inthesky."
Theprojectwasstartedin1990byCraigMcCawandBillGates;later,otherinvestors
joinedtheconsortium. Theprojectisscheduled tobefullyfunctional inthenearfuture.
Constellation Teledesic provides 288satellites in12polarorbitswitheachorbit
hosting24satellites. Theorbitsareatanaltitudeof1350lan,asshowninFigure16.21.
Figure16.21 Teledesic
Teledesic has288satellites in12LEOorbits,eachatanaltitudeof1350kIn.
Communication Thesystemprovidesthreetypesofcommunication. Intersatellite com­
munication allowseightneighboring satellites tocommunicate withoneanother.Com­
munication isalsopossiblebetween a'satelliteandanEarthgateway station.Userscan
communicate directlywiththenetworkusingterminals. Earthisdividedintotensofthou­
sandsofcells.Eachcellisassignedatimeslot,andthesatellitefocusesitsbeamtothecellSECTION 16.5SUMMARY 487
atthecorresponding timeslot.Thetenninalcansenddataduringitstimeslot.Atenninal
receivesallpacketsintendedforthecell,butselectsonlythoseintendedforitsaddress.
Bands Transmission occursintheKabands.
DataRateThedatarateisupto155Mbpsfortheuplinkandupto1.2Gbpsforthe
downlink.
16.3RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
books.Theitemsinbrackets[...]refertothereference listattheendofthetext.
Books
Wireless WANsarecompletely coveredin[Sta02],[Jam03], [AZ03],and[Sch03].Com­
munication satellites arediscussed inSection2.4of[Tan03]andSection8.5of[CouOl].
Mobiletelephone systemisdiscussed inSection2.6of[Tan03]andSection8.8of[CouOl].
16.4KEYTERMS
Advanced MobilePhoneSystem(AMPS)
cellulartelephony
digitalAMPS(D-AMPS)
downlink
footprint
geostationary Earthorbit(GEO)
GlobalPositioning System(GPS)
GlobalSystemforMobile
Communication (GSM)
Globalstar
handoff
InterimStandard 95(IS-95)
InternetMobileCommunication 2000
(IMT-2000)Iridium
low-Earth-orbit (LEO)
medium-Earth-orbit (MEO)
mobileswitching center(MSC)
orbit
personal communications system
(PCS)
reusefactor
roamIng
satellitenetwork
Teledesic
triangulation
trilateration
uplink
16.5SUMMARY
oCellulartelephony provides communication betweentwodevices.Oneorbothmay
bemobile.
oAcellularserviceareaisdividedintocells.
oAdvanced MobilePhoneSystem(AMPS) isafirst-generation cellularphone
system.WIRELESS WANs:CELLULAR TELEPHONE ANDSATELLITE NETWORKS
DigitalAMPSCD-AMPS) isasecond-generation cellularphonesystemthatisa
digitalversionofAMPS.
GlobalSystemforMobileCommunication CGSM)isasecond-generation cellular
phonesystemusedinEurope.
InterimStandard 95CIS-95)isasecond-generation cellularphonesystembasedon
CDMAandDSSS.
Thethird-generation cellular phonesystemwillprovide universal personal
communication.
Asatellitenetworkusessatellites toprovidecommunication between anypoints
onEarth.
Ageostationary EarthorbitCGEO)isattheequatorial planeandrevolvesinphase
withEarth.
GlobalPositioning SystemCGPS)satellitesaremedium-Earth-orbit (MEO)satellites
thatprovidetimeandlocationinformation forvehiclesandships.
Iridiumsatellites arelow-Earth-orbit (LEO)satellites thatprovidedirectuniversal
voiceanddatacommunications forhandheld terminals.
Teledesic satellites arelow-Earth-orbit satellites thatwillprovide universal
broadband Internetaccess.488CHAPTER 16
0
0
0
0
0
0
0
0
0
16.6PRACTICE SET
ReviewQuestions
1.Whatistherelationship betweenabasestationandamobileswitching center?
2.Whatarethefunctions ofamobileswitching center?
3.Whichisbetter,alowreusefactororahighreusefactor?Explainyouranswer.
4.Whatisthedifference betweenahardhandoffandasofthandoff?
5.WhatisAMPS?
6.Whatistherelationship betweenD-AMPS andAMPS?
7.WhatisGSM?
8.WhatisthefunctionoftheCDMAinIS-95?
9.Whatarethethreetypesoforbits?
10.WhichtypeoforbitdoesaGEOsatellitehave?Explainyouranswer.
11.Whatisafootprint?
12.Whatistherelationship betweentheVanAllenbeltsandsatellites?
13.Compare anuplinkwithadownlink.
14.WhatisthepurposeofGPS?
15.Whatisthemaindifference betweenIridiumandGlobalstar?
Exercises
16.Drawacellpatternwithafrequency-reuse factorof3.
17.Whatisthemaximum numberofcallersineachcellinAMPS?SECTION 16.6PRACTICE SET 489
18.Whatisthemaximum numberofsimultaneous callsineachcellinan15-136
(D-AMPS) system,assuming noanalogcontrolchannels?
19.Whatisthemaximum numberofsimultaneous callsineachcellinaGSMassuming
noanalogcontrolchannels?
20.Whatisthemaximum numberofcanersineachcellinanIS-95system?
21.Findtheefficiency ofAMPSintermsofsimultaneous callspermegahertz ofband­
width.Inotherwords,findthenumberofcallsthatcanbeusedinI-MHzbandwidth
allocation.
22.RepeatExercise 21forD-AMPS.
23.RepeatExercise 21forGSM.
24.RepeatExercise 21forIS-95.
25.Guesstherelationship between a3-kHzvoicechannel anda30-kHzmodulated
channelinasystemusingAMPS.
26.HowmanyslotsaresenteachsecondinachannelusingD-AMPS? Howmanyslots
aresentbyeachuserin1s?
27.UseKepler's formula tochecktheaccuracy ofagivenperiodandaltitudefora
GPSsatellite.
28.UseKepler's formula tocheck the accuracy ofagivenperiodandaltitudeforan
Iridiumsatellite.
29.UseKepler's formula tocheck the accuracy ofagivenperiodandaltitudefora
Globalstar satellite.CHAPTER 17
SONETISDH
Inthischapter,weintroduce awideareanetwork (WAN),SONET, thatisusedasa
transport networktocarryloadsfromotherWANs.WefirstdiscussSONETasaprotocol,
andwethenshowhowSONETnetworks canbeconstructed fromthestandards defined
intheprotocol.
Thehighbandwidths offiber-optic cablearesuitable for today'shigh-data-rate
technologies (suchasvideoconferencing) andforcarryinglargenumbers oflower-rate
technologies atthesametime.Forthisreason,theimportance offiberopticsgrowsin
conjunction withthedevelopment oftechnologies requiring highdataratesorwide
bandwidths fortransmission. Withtheirprominence cameaneedforstandardization.
TheUnitedStates(ANSI)andEurope(ITU-T)haveresponded bydefining standards
that,thoughindependent, arefundamentally similarandultimately compatible. The
ANSIstandard iscalledtheSynchronous OpticalNetwork (SONET). TheITU-T
standard iscalledtheSynchronous DigitalHierarchy (SOH).
SONET wasdeveloped byANSI;SDHwasdeveloped bylTV·T.
SONET/SDH isasynchronous network usingsynchronous TDMmultiplexing.
Allclocksinthesystemarelockedtoamasterclock.
17.1ARCHITECTURE
Letusfirstintroduce thearchitecture ofaSONET system: signals, devices, and
connections.
Signals
SONETdefinesahierarchy ofelectrical signaling levelscalledsynchronous transport
signals(STSs).EachSTSlevel(STS-ltoSTS-192) supports acertaindatarate,speci­
fiedinmegabits persecond(seeTable17.1).Thecorresponding opticalsignalsare
calledopticalcarriers (OCs).SDHspecifies asimilarsystemcalledasynchronous
transport module(STM).STMisintended tobecompatible withexistingEuropean
491492CHAPTER 17SONETISDH
hierarchies, suchasElines,andwithSTSlevels.Tothisend,thelowestSTMlevel,
STM-l,isdefinedas155.520Mbps,whichisexactlyequaltoSTS-3.
Table17.1SONETISDH rates
STS OC Rate(Mbps) STM
STS-l OC-l 51.840
STS-3 OC-3 155.520 STM-l
STS-9 OC-9 466.560 STM-3
STS-12 OC-12 622.080 STM-4
STS-18 OC-lS 933.120 STM-6
STS-24 OC-24 1244.160 STM-8
STS-36 OC-36 1866.230 STM-12
STS-48 OC-48 2488.320 STM-16
STS-96 OC-96 4976.640 STM-32
STS-I92 OC-I92 9953.280 STM-64
AglancethroughTable17.1revealssomeinteresting points.First,thelowestlevel
inthishierarchy hasadatarateof51.840Mbps,whichisgreaterthanthatoftheDS-3
service(44.736Mbps).Infact,theSTS-lisdesigned toaccommodate dataratesequiv­
alenttothoseoftheDS-3.Thedifference incapacityisprovided tohandletheoverhead
needsoftheopticalsystem.
Second,theSTS-3rateisexactlythreetimestheSTS-lrate;andtheSTS-9rateis
exactlyone-halftheSTS-18rate.Theserelationships meanthat18STS-lchannels can
bemultiplexed intooneSTS-18,sixSTS-3channels canbemultiplexed intooneSTS-18,
andsoon.
SONETDevices
Figure17.1showsasimplelinkusingSONETdevices.SONETtransmission relieson
threebasicdevices: STSmultiplexers/demultiplexers, regenerators, add/drop multi­
plexersandterminals.
STSMultiplexer/Demultiplexer
STSmultiplexers/demultiplexers markthebeginning pointsandendpoints ofaSONET
link.Theyprovidetheinterface betweenanelectrical tributary networkandtheoptical
network. AnSTSmultiplexer multiplexes signalsfrommultipleelectrical sourcesand
createsthecorresponding OCsignal.AnSTSdemultiplexer demultiplexes anoptical
OCsignalintocorresponding electricsignals.
Regenerator
Regenerators extendthelengthofthelinks.Aregenerator isarepeater(seeChapter15)
thattakesareceivedopticalsignal(OC-n),demodulates itintothecorresponding elec­
tricsignal(STS-n), regenerates theelectricsignal,andfinallymodulates theelectricSECTION 17.1ARCHITECTURE 493
Figure17.1AsimplenetworkusingSONETequipment
ADM:Add/drop multiplexer R:Regenerator
STSMUX:Synchronous transport signalmultiplexer T:Terminal
STSDEMUX: Synchronous transport signaldemultiplexer
tDrop
_~__JJ
Section Sectiont J
Line______ _ J
Section Section Sectionl ~
LineR R R
1---~![>----cJ.~[>-~.~1 ADM1------l~[>----i.~1
Path
signalintoitscorrespondent OC-nsignal.ASONETregenerator replacessomeofthe
existingoverhead information (headerinformation) withnewinformation.
Add/drop Multiplexer
Add/drop multiplexers allowinsertion andextraction ofsignals.Anadd/drop multi­
plexer(ADM)canaddSTSscomingfromdifferent sourcesintoagivenpathorcan
removeadesiredsignalfromapathandredirectitwithoutdemultiplexing theentire
signal.Insteadofrelyingontimingandbitpositions, add/drop multiplexers useheader
information suchasaddresses andpointers(described laterinthissection)toidentify
individual streams.
Inthesimpleconfiguration shownbyFigure17.1,anumberofincoming electronic
signalsarefedintoanSTSmultiplexer, wheretheyarecombined intoasingleoptical
signal.Theopticalsignalistransmitted toaregenerator, whereitisrecreated without
thenoiseithaspickedupintransit.Theregenerated signalsfromanumberofsources
arethenfedintoanadd/drop multiplexer. Theadd/drop multiplexer reorganizes these
signals,ifnecessary, andsendsthemoutasdirectedbyinformation inthedataframes.
Theseremultiplexed signalsaresenttoanotherregenerator andfromtheretothe
receiving STSdemultiplexer, wheretheyarereturnedtoaformatusablebythereceiving
links.
Terminals
Aterminal isadevicethatusestheservicesofaSONETnetwork. Forexample, inthe
Internet, aterminal canbearouterthatneedstosendpacketstoanotherrouteratthe
othersideofaSONETnetwork.
Connections
Thedevicesdefinedintheprevious sectionareconnected usingsections, lines,and
paths.494CHAPTER 17SONETISDH
Sections
Asectionistheopticallinkconnecting twoneighbor devices:multiplexer tomulti­
plexer,multiplexer toregenerator, orregenerator toregenerator.
Lines
Alineistheportionofthenetworkbetweentwomultiplexers: STSmultiplexer toadd/
dropmultiplexer, twoadd/drop multiplexers, ortwoSTSmultiplexers.
Paths
Apathistheend-to-end portionofthenetworkbetween twoSTSmultiplexers. Ina
simpleSONEToftwoSTSmultiplexers linkeddirectlytoeachother,thesection,line,
andpatharethesame.
17.2SONETLAYERS
TheSONETstandard includes fourfunctional layers:thephotonic, thesection,the
line,andthepathlayer.Theycorrespond toboththephysicalandthedatalinklayers
(seeFigure17.2).Theheadersaddedtotheframeatthevariouslayersarediscussed
laterinthischapter.
SONETdefinesfourlayers:path,line,section,andphotonic.
Figure17.2SONETlayerscompared withOSIortheInternetlayers
Pathlayer
Linelayer
Datalink
PhysicalSectionlayer
Photonic layerI
PathLayer
Thepathlayerisresponsible forthemovement ofasignalfromitsopticalsourcetoits
opticaldestination. Attheopticalsource,thesignalischangedfromanelectronic form
intoanopticalform,multiplexed withothersignals,andencapsulated inaframe.Atthe
opticaldestination, thereceivedframeisdemultiplexed, andtheindividual opticalsig­
nalsarechangedbackintotheirelectronic forms.Pathlayeroverhead isaddedatthis
layer.STSmultiplexers providepathlayerfunctions.SECTION 17.2SONETLAYERS 495
LineLayer
Thelinelayerisresponsible forthemovement ofasignalacrossaphysicalline.Line
layeroverhead isaddedtotheframeatthislayer.STSmultiplexers andadd/drop multi­
plexersprovidelinelayerfunctions.
SectionLayer
Thesectionlayerisresponsible forthemovement ofasignalacrossaphysicalsection.
Ithandlesframing, scrambling, anderrorcontrol.Sectionlayeroverhead isaddedto
theframeatthislayer.
Photonic Layer
Thephotonic layercorresponds tothephysical layeroftheOSImodel.Itincludes
physicalspecifications fortheopticalfiberchannel,thesensitivity ofthereceiver, mul­
tiplexing functions, andsoon.SONETusesNRZencoding withthepresence oflight
representing 1andtheabsenceoflightrepresenting O.
Device-LayerRelationships
Figure17.3showstherelationship between thedevicesusedinSONETtransmission
andthefourlayersofthestandard. Asyoucansee,anSTSmultiplexer isafour-layer
device.Anadd/drop multiplexer isathree-layer device.Aregenerator isatwo-layer
device.
Figure17.3Device-layer relationship inSONET
Electricsignal
Path
~-~----I
Line
Section
Photonic
OpticalsignalElectricsignal
Path
~-:i--:----ILine
Section
Photonic
OpticalsignalOpticalsignal Opticalsignal
Regenerator
Add/drop
multiplexerRegenerator496CHAPTER 17SONETISDH
17.3SONETFRAMES
Eachsynchronous transfersignalSTS-niscomposed of8000frames.Eachframeisa
two-dimensional matrixofbyteswith9rowsby90xncolumns. Forexample, STS-l
frameis9rowsby90columns (810bytes),andanSTS-3is9rowsby270columns
(2430bytes).Figure17.4showsthegeneralformatofanSTS-landanSTS-n.
Figure17.4AnSTS-landanSTS-nframe
90bytes 90x11bytes
I...'__8_10_b)_'te_s__
"II9bY,,,1_' 8_IO_X_lIb_)'t_es
 'I}~,
a.STS-lframe b.STS-nframe
Frame,Byte,andBitTransmission
Oneoftheinteresting pointsaboutSONETisthateachSTS-nsignalistransmitted
atafixedrateof8000framespersecond.Thisistherateatwhichvoiceisdigitized
(seeChapter4).Foreachframethebytesaretransmitted fromthelefttothe right,
toptothebottom.Foreachbyte,thebitsaretransmitted fromthemostsignificant
totheleastsignificant (lefttoright).Figure17.5showstheorderofframeand
bytetransmission.
Figure17.5STS-lframesintransition
a.BytetransmissionLefttoright
and
toptobottomFirst---------,.
byte
'-- Last
byte8000frames/second
b.Frametransmission
ASONETSTS-nsignalistransmitted at8000framespersecond.
Ifwesampleavoicesignalanduse8bits(lbyte)foreachsample,wecansaythat
eachbyteinaSONETframecancarryinformation fromadigitized voicechanne1. In
otherwords,anSTS-lsignalcancarry774voicechannels simultaneously (810minus
requiredbytesforoverhead).
EachbyteinaSONETframecancarryadigitized voicechannel.SECTION 17.3SONETFRAMES 497
Example 17.1
FindthedatarateofanSTS-lsignal.
Solution
STS-l,likeotherSTSsignals,sends8000framespersecond.EachSTS-lframeismadeof9by
(lX90)bytes.Eachbyteismadeof8bits.Thedatarateis
STS~1datarate::::8000X9X(1X90)x8:;51.840Mbps
Example 17.2
FindthedatarateofanSTS-3signal.
Solution
STS-3,likeotherSTSsignals,sends8000framespersecond.EachSTS-3frameismadeof9by
(3X90)bytes.Eachbyteismadeof8bits.Thedatarateis
...
.STS-3datarate::::8000x 9 x(3X90)x8::::155.52Mbps
NotethatinSONET, thereisanexactrelationship between thedataratesofdifferent STSsignals.
WecouldhavefoundthedatarateofSTS-3byusingthedatarateofSTS-l(multiply thelatterby3).
InSONET, thedatarateofanSTS-nsignalisntimesthe
datarateofanSTS-lsignals.
Example 17.3
WhatisthedurationofanSTS-lframe?STS-3frame?STS-nframe?
Solution
InSONET,8000framesaresentpersecond.Thismeansthattheduration ofanSTS-l,STS-3,or
STS-nframeisthesameandequalto1/8000 S,or125j..ls.
InSONET, theduration ofanyframeis125j..ls.
STS-lFrameFormat
ThebasicformatofanSTS-lframeisshowninFigure17.6.Aswesaidbefore,a
SONETframeisamatrixof9rowsof90bytes(octets)each,foratotalof810bytes.
Thefirstthreecolumns oftheframeareusedforsectionandline overhead. The
upperthreerowsofthefirstthreecolumnsareusedforsectionoverhead (SOH).The
lowersixarelineoverhead (LOH).Therestoftheframeiscalledthesynchronous
payloadenvelope (SPE).Itcontainsuserdataandpathoverhead (POH)neededatthe
userdatalevel.WewilldiscusstheformatoftheSPEshortly.
SectionOverhead
Thesectionoverhead consistsofnineoctets.Thelabels,functions, andorganization of
theseoctetsareshowninFigure17.7.498CHAPTER 17SONETISDH
Figure17.6STS-1frameoverheads
90octetsperrow
Section[
overhead
Line[overheadSTS-ISPE
Userdataand
pathoverhead
9rowsx87columns9rows
Figure17.7STS-1frame:sectionoverhead
AI,AZ:Alignment
HI:Paritybyte
C1:IdentificationDl,I)Z,D3:Management
EI:Orderwirebyte
FI:User
Al~A2CI
BIElFI/STS-ISPE
D1D2D3
oAlignment bytes(AIandA2).BytesAlandA2areusedforframingandsyn­
chronization andarecalledalignment bytes.Thesebytesalertareceiverthata
frameisarrivingandgivethereceiverapredetermined bitpatternonwhichtosyn­
chronize. Thebitpatternsforthesetwobytesinhexadecimal areOxF628.Thebytes
serveasaflag.oSectionparitybyte(BI).ByteB1isforbitinterleaved parity(BIP-8).Itsvalueis
calculated overallbytesoftheprevious frame.Inotherwords,theithbitofthis
byteistheparitybitcalculated overallithbitsoftheprevious STS-nframe.The
valueofthisbyteisfilledonlyforthefirstSTS-linanSTS-nframe.Inother
words,although anSTS-nframehasnB1bytes,aswewillseelater,onlythefirst
bytehasthisvalue;therestarefilledwithOs.
oIdentification byte(el).ByteClcarriestheidentityoftheSTS-lframe.Thisbyteis
necessary whenmultipleSTS-lsaremultiplexed tocreateahigher-rate STS(STS-3,
STS-9,STS-12,etc.).Information inthisbyteallowsthevarioussignalstoberecog­
nizedeasilyupondemultiplexing. Forexample, inanSTS-3signal,thevalueof
theC1byteis1forthefirstSTS-l;itis2forthesecond;anditis3forthethird.
oManagement bytes(DI,D2,andD3).BytesDl,D2,andD3together forma
192-kbps channel(3x8000x8)calledthedatacommunication channel.Thischan­
nelisrequiredforoperation, administration, andmaintenance (OA&M) signaling.
oOrderwirebyte(EI).ByteElistheorderwirebyte.Orderwirebytesinconsec­
utiveframesformachannelof64kbps(8000framespersecondtimes8bitsperSECTION 17.3SONETFRAMES 499
frame).Thischannelisusedforcommunication betweenregenerators, orbetween
terminals andregenerators.
oUser'sbyte(Fl).TheFIbytesinconsecutive framesforma64-kbpschannelthat
isreservedforuserneedsatthesectionlevel.
Sectionoverhead isrecalculated foreachSONET device
(regenerators andmultiplexers).
LineOverhead
Lineoverhead consistsof18bytes.Thelabels,functions, andarrangement ofthese
bytesareshowninFigure17.8.
Figure17.8STS-lframe:lineoverhead
B2:Lineparitybyte
D4-DI2: Management bytes
E2:OrderwirebyteHI,H2,H3:Pointers
Kl,K2:Automatic protection switching bytes
Zl,Z2:Growthbytes(reserved)
~HIHZH3
B2KIK2 STS-ISPE
D4D5D6
D9 D708VDIODllDI2
ZlZ2E2
oLineparitybyte(B2).ByteB2isforbitinterleaved parity.Itisforerrorcheck­
ingoftheframeoveraline(between twomultiplexers). InanSTS-nframe,B2is
calculated forallbytesintheprevious STS-IframeandinsertedattheB2byte
forthatframe.Inotherwords,inaSTS-3frame,therearethreeB2bytes,
eachcalculated foroneSTS-Iframe.Contrast thisbytewithBIinthesection
overhead.
oDatacommunication channelbytes(D4toD12).Thelineoverhead Dbytes(D4
toD12)inconsecutive framesforma576-kbps channelthatprovides thesame
serviceastheDI-D3bytes(OA&M), butatthelineratherthanthesectionlevel
(between multiplexers).
oOrderwirebyte(E2).TheE2bytesinconsecutive framesforma64-kbpschan­
nelthatprovides thesamefunctions astheEIorderwirebyte,butatthelinelevel.
oPointerbytes(HI,82,and83).BytesHI,H2,andH3arepointers.Thefirsttwo
bytesareusedtoshowtheoffsetoftheSPEintheframe;thethirdisusedforjustifi­
cation.Weshowtheuseofthesebyteslater.
oAutomatic protection switching bytes(KlandK2).TheKIandK2bytesincon­
secutiveframesformaI28-kbps channelusedforautomatic detection ofproblems in500CHAPTER 17SONETISDH
line-terminating equipment. Wediscussautomatic protection switching (APS)later
inthechapter.
DGrowthbytes(ZlandZ2).TheZlandZ2bytesarereservedforfutureuse.
Synchronous PayloadEnvelope
Thesynchronous payload envelope (SPE)contains theuserdataandthe overhead
relatedtotheuserdata(pathoverhead). OneSPEdoesnotnecessarily fititintooneSTS-l
frame;itmaybesplitbetweentwoframes,aswewillseeshortly.Thismeansthatthe
pathoverhead, theleftmost columnofanSPE,doesnotnecessarily alignwiththe
sectionorlineoverhead. Thepathoverhead mustbeaddedfirsttotheuserdatato
createanSPE,andthenanSPEcanbeinsertedintooneortwoframes.Pathoverhead
consistsof9bytes.Thelabels,functions, andarrangement ofthesebytesareshown
inFigure17.9.
Figure17.9STS-lframe:pathoverhead
11
B3
C2
Gl
F2
H4B3:Pathparitybyte
C2:Pathsignallabelbyte
Gl:Pathstatusbyte
F2:Pathuserchannelbyte
DataH4:Virtualtributary indicator
J1:Pathtracebyte
Z3,Z4,Z5:Growthbytes(reserved)
23
Z4STS-ISPE
25 Path
overhead
DPathparitybyte(B3).ByteB3isforbitinterleaved parity,likebytesBlandB2,
butcalculated overSPEbits.Itisactuallycalculated overtheprevious SPEinthe
stream.
DPathsignallabelbyte(C2).ByteC2isthepathidentification byte.Itisusedto
identifydifferent protocols usedathigherlevels(suchasIPorATM)whosedata
arebeingcarriedintheSPE.
DPathuserchannelbyte(F2).TheF2bytesinconsecutive frames,liketheFIbytes,
forma64-kbpschannelthatisreservedforuserneeds,butatthepathlevel.
DPathstatusbyte(Gl).ByteGIissentbythereceivertocommunicate itsstatus
tothe sender. Itissentonthereversechannelwhenthecommunication isduplex.
Wewillseeitsuseinthelinearorringnetworks laterinthechapter.
DMultiframe indicator (H4).ByteH4isthemultiframe indicator.Itindicates pay­
loadsthatcannotfitintoasingleframe.Forexample, virtualtributaries canbeSECTION 17.3SONETFRAMES 501
combined toformaframethatislargerthananSPEframeandneedtobedivided
intodifferentframes.Virtualtributaries arediscussed inthenextsection.
oPathtracebyte(JI).The11bytesinconsecutive framesforma64-kbpschannel
usedfortrackingthepath.The11bytesendsacontinuous 64-bytestringtoverify
theconnection. Thechoiceofthestringislefttotheapplication program. The
receivercompares eachpatternwiththeprevious onetoensurenothingiswrong
withthecommunication atthepathlayer.
oGrowthbytes(Z3,Z4,andZ5).BytesZ3,Z4,andZ5arereservedforfutureuse.
Pathoverhead isonlycalculated forend-to-end
(atSTSmultiplexers).
Overhead Summary
Table17.2compares andsummarizes theoverheads usedinasection,line,andpath.
Table17.2SONETISDH rates
ByteFunction Section Line Path
Alignment Al,A2
Parity Bl B2 B3
Identifier CI C2
OA&M DI-D3 D4-DI2
Orderwire EI
User FI F2
Status Gl
Pointers HI-H3 H4
Trace 11
Failuretolerance KI,K2
Growth(reserved forfuture) ZI,Z2 Z3-Z5
Example 17.4
WhatistheuserdatarateofanSTS-lframe(withoutconsidering theoverheads)?
Solution
TheuserdatapartinanSTS-Iframeismadeof9rowsand86columns. Sowehave
STS-luserdatatate=8000x9><:,(1X86)x8c=49.536MbJls
Encapsulation
Theprevious discussion revealsthatanSPEneedstobeencapsulated inanSTS-I
frame.Encapsulation maycreatetwoproblems thatarehandledelegantly bySONET
usingpointers(HItoH3).Wediscusstheuseofthesebytesinthissection.502 CHAPTER 17SONETISDH
Offsetting
SONETallowsoneSPEtospantwoframes,partoftheSPEisinthefirstframeandpart
isinthesecond.ThismayhappenwhenoneSPEthatistobeencapsulated isnotaligned
time-wise withthepassingsynchronized frames.Figure17.10showsthissituation. SPE
bytesaredividedbetween thetwoframes.Thefirstsetofbytesisencapsulated inthe
firstframe;thesecondsetisencapsulated inthesecondframe.Thefigurealsoshowsthe
pathoverhead, whichisalignedwiththesection/line overhead ofanyframe.Theques­
tionis,HowdoestheSONETmultiplexer knowwheretheSPEstartsorendsinthe
frame?ThesolutionistheuseofpointersHIandH2todefinethebeginning oftheSPE;
theendcanbefoundbecauseeachSPEhasafixednumberofbytes.SONETallows the
offsetting ofanSPEwithrespecttoanSTS-lframe.
Figure17.10Offsetting ofSPErelatedtoframeboundary
SPE
Data
I I
It
r--
r--
r--
r--
~
H
Frame1+1
FrameflowFrame 1
Tofindthebeginning ofeachSPEinaframe,weneedtwopointersHIandH2in
thelineoverhead. Notethatthesepointersarelocatedinthelineoverhead becausethe
encapsulation occursatamultiplexer. Figure17.11showshowthese2bytespointto
Figure17.11TheuseofHiandH2pointers toshowthestartofanSPEinaframe
Framei+l
FrameflowSECTION 17.4STSMULTIPLEXING 503
thebeginning oftheSPEs.Notethatweneed2bytestodefinethepositionofabytein
aframe;aframehas810bytes,whichcannotbedefinedusing1byte.
Example 17.5
WhatarethevaluesofHIandH2ifanSPEstartsatbytenumber650?
Solution
Thenumber650canbeexpressed infourhexadecimal digitsasOx028A. Thismeansthevalueof
HIisOx02andthevalueofH2isOx8A.
Justification
Nowsupposethetransmission rateofthepayloadisjustslightlydifferent fromthe
transmission rateofSONET. First,assumethattherateofthepayloadishigher.This
meansthatoccasionally thereis1extrabytethatcannotfitintheframe.Inthiscase,
SONETallowsthisextrabytetobeinsertedintheH3byte.Now,assumethattherateof
thepayloadislower.Thismeansthatoccasionally 1byteneedstobeleftemptyinthe
frame.SONETallowsthisbytetobethebyteaftertheH3byte.
17.4STSMULTIPLEXING
InSONET, framesoflowerratecanbesynchronously time-division multiplexed intoa
higher-rate frame.Forexample, threeSTS-lsignals(channels) canbecombined into
oneSTS-3signal(channel), four STS-3s canbemultiplexed intooneSTS-12,andsoon,
asshowninFigure17.12.
Figure17.12STSmultiplexing/demultiplexing
----+s;rs.:Jc+----1 STS
MUXSTS-3 STSt----t&TS.l1--­DEMUX
Multiplexing issynchronous TDM,andallclocksinthenetworkarelockedtoa
masterclocktoachievesynchronization.
InSONET,allclocksinthenetworkarelockedtoamasterclock.
Weneedtomentionthatmultiplexing canalsotakeplaceatthehigherdatarates.
Forexample, fourSTS-3signalscanbemultiplexed intoanSTS-12signal.However,
theSTS-3signalsneedtofirstbedemultiplexed into12STS-lsignals,andthenthese504 CHAPTER 17SONETISDH
twelvesignalsneedtobemultiplexed intoanSTS-I2signal.Thereasonforthisextra
workwillbeclearafterourdiscussion onbyteinterleaving.
ByteInterleaving
Synchronous TDMmultiplexing inSONET isachieved byusingbyteinterleaving.
Forexample, whenthreeSTS-Isignalsaremultliplexed intooneSTS-3signal,each
setof3bytesintheSTS-3signalisassociated with1bytefromeachSTS-Isignal.Fig­
ure17.13showstheinterleaving.
Figure17.13Byteinterleaving
STS-l
90bytes3j
270bytes
NotethatabyteinanSTS-Iframekeepsitsrowposition, butitismovedintoa
different column. Thereasonisthatwhileallsignalframeshavethesamenumberof
rows(9),thenumberofcolumns changes. Thenumberofcolumns inanSTS-nsignal
frameisntimesthenumberofcolumns inanSTS-Iframe.OneSTS-nrow,therefore,
canaccommodate allnrowsintheSTS-Iframes.
Byteinterleaving also preserves thecorresponding sectionandlineoverhead as
showninFigure17.14.Asthefigureshows,thesection overheads fromthreeSTS-l
framesareinterleaved together tocreateasectionoverhead foranSTS-lframe.The
sameistrueforthelineoverheads. Eachchannel,however, keepsthecorresponding bytes
thatareusedtocontrolthatchannel.Inotherwords,thesectionsandlineskeeptheirown
controlbytesforeachmultiplexed channel. Thisinteresting featurewillallowtheuseof
add/drop multiplexers, asdiscussed shortly.Asthefigureshows,therearethreeAlbytes,
onebelonging toeachofthethreemultiplexed signals.TherearealsothreeA2bytes,
threeB1bytes,andsoon.
Demultiplexing hereiseasierthaninthestatistical TDMwediscussed inChapter6
becausethedemultiplexer, withnoregardtothefunctionofthebytes,removesthefirstA1
andassignsittothefirstSTS-I,removes thesecondAI,andassignsittosecondSTS-l,
andremoves thethirdAlandassignsittothethirdSTS-I.Inotherwords,thedemulti­
plexerdealsonlywiththepositionofthebyte,notitsfunction.
Whatwesaidaboutthesectionandlineoverheads doesnotexactlyapplytothepath
overhead. Thisisbecausethepathoverhead ispartoftheSPEthatmayhavesplittedinto
twoSTS-Iframes.Thebyteinterleaving, however, isthesameforthedatasectionofSPEs.SECTION 17.4STSMULTIPLEXING 505
Figure17.14AnSTS-3frame
9bytes
,"
ClCI
Fl,FI
D3'D3
H3H3
J9K2
D~,D9
, --t',~261bytes
Sr8-3SPE
Int(lde~ving
bytesofthreeSPEs·1
Thebyteinterleaving processmakesthemultiplexing athigherdataratesalittle
bitmorecomplex. Howcanwemultiplex fourSTS-3signalsintooneSTS-12signal?
Thiscanbedoneintwosteps:First,theSTS-3signalsmustbedemultiplexed tocreate
12STS-lsignals.The12STS-lsignalsarethenmultiplexed tocreateanSTS-12signal.
Concatenated Signal
Innormaloperation oftheSONET, anSTS-nsignalismadeofnmultiplexed STS-l
signals.Sometimes, wehaveasignalwithadataratehigherthanwhatanSTS-lcancarry.
Inthiscase,SONETallowsustocreateanSTS-nsignalwhichisnotconsidered asn
STS-lsignals;itisoneSTS-nsignal (channel) thatcannotbedemultiplexed inton
STS-lsignals.Tospecifythatthesignalcannotbedemultiplexed, thesuffixc(forconcate­
nated)isaddedtothenameofthesignal.Forexample, STS-3cisasignalthatcannot
bedemultiplexed intothreeSTS-lsignals.However, weneedtoknowthatthewhole
payloadinanSTS-3csignalisoneSPE,whichmeansthatwehaveonlyonecolumn
(9bytes)ofpathoverhead. Theuseddatainthiscaseoccupy260columns, asshownin
Figure17.15.
Concatenated SignalsCarrying ATMCells
WewilldiscussATMandATMcellsinChapter18.AnATMnetworkisacellnetwork
inwhicheachcellhasafixedsizeof53bytes.TheSPEofanSTS-3csignalcanbea
carrierofATMcells.TheSPEofanSTS-3ccancarry9 x260=2340bytes,whichcan
accommodate approximately 44ATMcells,eachof53bytes.506CHAPTER 17SONETISDH
Figure17.15Aconcatenated STS-3csignal
I_10octets _I_
Pathoverhead260octets
STS-3cSPE
AnSTS-3csignalcancarry44ATMcellsasitsSPE.
AddlDrop Multiplexer
Multiplexing ofseveralSTS-1signalsintoanSTS-nsignalisdoneattheSTSmulti­
plexer(atthepathlayer).Demultiplexing ofanSTS-nsignalintoSTS-1components
isdoneattheSTSdemultiplexer. Inbetween, however, SONETusesadd/drop multi­
plexersthatcanreplaceasignalwithanotherone.Weneedtoknowthatthisisnot
demultiplexing/multiplexing intheconventional sense.Anadd/drop multiplexer
operates atthelinelayer.Anadd/drop multiplexer doesnotcreatesection,line,or
pathoverhead. Italmostactsasaswitch~itremoves oneSTS-1signalandadds
anotherone.Thetypeofsignalattheinputandoutputofanadd/drop multiplexer is
thesame(bothSTS-3orbothSTS-12, forexample). Theadd/drop multiplexer
(ADM)onlyremoves thecorresponding bytesandreplaces themwiththenewbytes
(including thebytesinthesectionandlineoverhead). Figure17.16showstheopera­
tionofanADM.
Figure17.16Dropping andaddingSTS-lframesinanadd/drop multiplexer
_L--_S_T_S-_3_S_PE_-----.J~ ADM_STS-3SPE------'
ThirdSTS-l
isdroppedNewSTS-l
isaddedSECTION 17.5SONETNETWORKS 507
17.5SONETNETWORKS
UsingSONETequipment, wecancreateaSONETnetworkthatcanbeusedasahigh-speed
backbone carryingloadsfromothernetworks suchasATM(Chapter 18)orIF(Chapter20).
WecanroughlydivideSONETnetworks intothreecategories: linear,ring,andmeshnet­
works,asshowninFigure17.17.
Figure17.17Taxonomy ofsoNETnetworks
BLSR !\InltlpomtSONET
networks
I
I I I
Linear Ring Mesh
networks networks networks
-Point-to-point -lJl>SR
-, -
LinearNetworks
AlinearSONETnetworkcanbepoint-to-point ormultipoint.
Point-to-Point Network
Apoint-to-point networkisnormally madeofanSTSmultiplexer, anSTSdemultiplexer,
andzeroormoreregenerators withnoadd/drop multiplexers, asshowninFigure17.18.
Thesignalflowcanbeunidirectional orbidirectional, although Figure17.18shows
onlyunidirectional forsimplicity.
Figure17.18 Apoint-to-point SONETnetwork
,'.
Multipoint Network
Amultipoint networkusesADMstoallowthecommunications between severaltermi­
nals.AnADMremoves thesignalbelonging totheterminal connected toitandadds
thesignaltransmitted fromanotherterminal. Eachterminalcansenddatatooneormore
downstream terminals. Figure17.19showsaunidirectional schemeinwhicheachter­
minalcansenddataonlytothedownstream terminals, buttheamultipoint networkcan
bebidirectional, too.50SCHAPTER 17SONETISDH
Figure17.19Amultipoint SONETnetwork
STS
MUXSTS
DEMUX
InFigure17.19,TlcansenddatatoT2andT3simultaneously. T2,however, can
senddata only toT3.Thefigureshowsaverysimpleconfiguration; innormalsitua­
tions,wehavemoreADMs andmoreterminals.
Automatic Protection Switching
Tocreateprotection againstfailureinlinearnetworks, SONETdefinesautomatic pro­
tectionswitching (APS).APSinlinearnetworks isdefinedatthelinelayer,which
meanstheprotection isbetweentwoADMsorapairofSTSmultiplexer/demultiplexers.
Theideaistoprovideredundancy; aredundant line(fiber)canbeusedincaseoffailure
inthemainone.Themainlineisreferredtoastheworklineandtheredundant line
astheprotection line.Threeschemes arecommon forprotection inlinearchannels:
one-plus-one, one-to-one, andone-to-many. Figure17.20showsallthreeschemes.
Figure17.20Automatic protection switching inlinearnetworks
----------- --~STS
MUX
a.One-pIus-one APS
ADM
b.One-to-one APSWorking line
Protection line
Working line
Protection line
ReverselineSTS
MUX
ADMADM ADM
§EWorking lines
8:§
0
Protection line------------------ ---->-
Reverseline
I..-- '-----
c.One-to-many APS
One-Plus-One APSInthisscheme,therearenormally twolines:oneworking line
andoneprotection line.Bothlinesareactiveallthetime.ThesendingmultiplexerSECTION 17.5SONETNETWORKS 509
sendsthesamedataonbothlines;thereceiver multiplexer monitors thelineand
choosestheonewiththebetterquality.Ifoneofthelinesfails,itlosesitssignal,and,of
course,theotherlineisselectedatthereceiver.Although, thefailurerecovery forthis
schemeisinstantaneous, theschemeisinefficient becausetwotimesthebandwidth is
required. Notethatone-plus-one switching isdoneatthepathlayer.
One-to-One APSInthisscheme,whichlooksliketheone-plus-one scheme,thereis
alsooneworkinglineandoneprotection line.However, thedataarenormally senton
theworking lineuntilitfails.Atthistime,thereceiver, usingthereversechannel,
informsthesendertousetheprotection lineinstead.Obviously, thefailurerecovery is
slowerthanthatoftheone-plus-scheme, butthisschemeismoreefficientbecausethe
protection linecanbeusedfordatatransferwhenitisnotusedtoreplacetheworking
line.Notethattheone-to-one switching isdoneatthelinelayer.
One-to-Many APSThisschemeissimilartotheone-to-one schemeexceptthat
thereisonlyoneprotection lineformanyworkinglines.Whenafailureoccursinone
oftheworkinglines,theprotection linetakescontroluntilthefailedlineisrepaired. It
isnotassecureastheone-to-one schemebecauseifmorethanoneworkinglinefailsat
thesametime,theprotection linecanreplaceonlyoneofthem.Notethatone-to-many
APSisdoneatthelinelayer.
RingNetworks
ADMsmakeitpossibletohaveSONETringnetworks. SONETringscanbeusedin
eitheraunidirectional orabidirectional configuration. Ineachcase,wecanaddextra
ringstomakethenetworkself-healing, capableofself-recovery fromlinefailure.
Unidirectional PathSwitching Ring
Aunidirectional pathswitching ring(UPSR)isaunidirectional networkwithtwo
rings:oneringusedastheworkingringandtheotherastheprotection ring.Theideais
similartotheone-plus-one APSschemewediscussed inalinearnetwork. Thesame
signalflowsthroughbothrings,oneclockwise andtheothercounterclockwise. Itis
called UPS~becausemonitoring isdoneatthepathlayer.Anodereceivestwocopies
oftheelectrical signalsatthepathlayer,compares them,andchoosestheonewiththe
betterquality.IfpartofaringbetweentwoADMsfails,theotherringstillcanguaran­
teethecontinuation ofdataflow.UPSR,liketheone-plus-one scheme,hasfastfailure
recovery, butitisnotefficientbecauseweneedtohavetworingsthatdothejobofone.
Halfofthebandwidth iswasted.Figure17.21showsaUPSRnetwork.
Although wehavechosenonesenderandthreereceivers inthefigure,therecanbe
manyotherconfigurations. Thesenderusesatwo-way connection tosenddatatoboth
ringssimultaneously; thereceiverusesselecting switches toselecttheringwithbetter
signalquality.WehaveusedoneSTSmultiplexer andthreeSTSdemultiplexers to
emphasize thatnodesoperateonthepathlayer.
Bidirectional LineSwitching Ring
Another alternative inaSONETringnetwork isbidirectional lineswitching ring
(BLSR). Inthiscase,communication isbidirectional, whichmeansthatweneed510CHAPTER 17SONETISDH
Figure17.21Aunidirectional pathswitching ring
Sender
.......------"""""-":"------------...Receiver,fI/'--
~;
;,
f
Protection
ringWorking
ring
I
TTSD~~
Receiver
tworingsforworkinglines.Wealsoneedtworingsforprotection lines.Thismeans
BLSRusesfourrings.Theoperation, however, issimilartotheone-to-one APS
scheme.Ifaworkingringinonedirection betweentwonodesfails,thereceiving node
canusethereverseringtoinformtheupstream nodeinthefaileddirection tousethe
protection ring.Thenetworkcanrecoverinseveraldifferentfailuresituations thatwe
donotdiscusshere.Notethatthediscovery ofafailureinBLSRisatthelinelayer,not
thepathlayer.TheADMsfindthefailureandinformtheadjacentnodestousethepro­
tectionrings.Figure17.22showsaBLSRring.
Combination ofRings
SONETnetworks todayuseacombination ofinterconnected ringstocreateservicesin
awidearea.Forexample, aSONETnetworkmayhavearegionalring,severallocal
rings,andmanysiteringstogiveservicestoawidearea.TheseringscanbeUPSR,
BLSR,oracombination ofboth.Figure17.23showstheideaofsuchawide-area ring
network.
MeshNetworks
Oneproblem withringnetworks isthelackofscalability. Whenthetrafficinaring
increases, weneedtoupgradenotonlythelines,butalsotheADMs.Inthissituation, a
meshnetworkwithswitches probably givebetterperformance. Aswitchinanetwork
meshiscalledacross-connect. Across-connect, likeotherswitches wehaveseen,has
inputandoutputports.Inaninputport,theswitchtakesanOC-nsignal,changesitto
anSTS-nsignal,demultiplexes itintothecorresponding STS-1signals,andsendseachSECTION 17.5SONETNETWORKS 511
Figure17.22Abidirectional lineswitching ring
Working
rings
I
• I
• I• •
I•II
..............""--------", ADM---------- -----~~~~,#'IlI'...------- .......--.........,---~.... ......
:/ Protection ",•
: : rings::
• I • I
I •.---..:.•......l...............L.....,
Figure17.23Acombination ofringsinaSONETnetwork
Sitering
STS-1signaltotheappropriate outputport.AnoutputporttakesSTS-1signalscoming
fromdifferent inputports,multiplexes themintoanSTS-nsignal,andmakesanOC-n
signalfortransmission. Figure17.24showsameshSONETnetwork, andthestructureofa
switch.512CHAPTER 17SONET/SDH
Figure17.24AmeshSONETnetwork
a.SONETmeshnetwork b.Cross-connect switch
17.6VIRTUAL TRIBUTARIES
SONETisdesigned tocarrybroadband payloads. Currentdigitalhierarchy datarates
(DS-ItoDS-3),however, arelowerthanSTS-l.TomakeSONETbackward-compatible
withthecurrenthierarchy, itsframedesignincludes asystemofvirtual tributaries
(VTs)(seeFigure17.25).Avirtualtributary isapartialpayloadthatcanbeinserted
intoanSTS-landcombined withotherpartialpayloads tofillouttheframe.Insteadof
usingall86payloadcolumns ofanSTS-lframefordatafromonesource,wecansub­
dividetheSPEandcalleachcomponent aVT.
Figure17.25Virtualtributaries
VT VT VT VT
TypesofVTs
FourtypesofVTshavebeendefinedtoaccommodate existingdigitalhierarchies (see
Figure17.26).Noticethatthenumberofcolumns allowedforeachtypeofVTcanbe
determined bydoubling thetypeidentification number(VT1.5getsthreecolumns, VT2
getsfourcolumns, etc.).
oVT1.5accommodates theU.S.DS-Iservice(1.544Mbps).
oVT2accommodates theEuropean CEPT-lservice(2.048Mbps).
oVT3accommodates theDS-ICservice(fractional DS-l,3.152Mbps).
oVT6accommodates theDS-2service(6.312Mbps).SECTION 17.8KEYTERMS 513
Figure17.26Virtualtributary types
VT1.5=8000frames/s 3columns 9rows8bits=1.728Mbps
VT2=8000frames/s 4columns 9rows8bits=2.304Mbps
VT3=8000frarnes/s 6columns 9rows8bits=3.456Mbps
VT6=8000frames/s 12columns 9rows8bits=6.912Mbps
VT1.5 VT2 VT3 VT6
Whentwoormoretributaries areinsertedintoasingleSTS-1frame.theyare
interleaved columnbycolumn. SONETprovides mechanisms foridentifying each
VTandseparating themwithoutdemultiplexing theentirestream.Discussion of
thesemechanisms andthecontrolissuesbehindthemisbeyondthescopeofthis
book.
17.7RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
books.Theitemsinbrackets[...]refertothereference listattheendofthetext.
Books
SONETisdiscussed inSection2.5of[Tan03], Section15.2of[Kes97], Sections 4.2
and4.3of[GW04], Section8.2of[Sta04],andSection5.2of[WVOOl
17.8KEYTERMS
add/drop multiplexer (ADM)
automatic protection switching (APS)
bidirectional lineswitching ring(BLSR)
byteinterleaving
line
linelayer
lineoverhead (LOH)
opticalcarrier(Oe)
path
pathlayerpathoverhead (POH)
photonic layer
regenerator
sectionsectionlayer
sectionoverhead (SOH)
STSdemultiplexer
STSmultiplexer
Synchronous DigitalHierarchy (SDH)
Synchronous OpticalNetwork (SONET)514 CHAPTER 17SONETISDH
synchronous payloadenvelope (SPE)
synchronous transport module(STM)
synchronous transport signal(STS)terminal
unidirectional pathswitching ring(UPSR)
virtualtributary (VT)
17.9SUMMARY
oSynchronous OpticalNetwork (SONET) isastandard developed byANSIfor
fiber-optic networks: Synchronous DigitalHierarchy (SDH)isasimilarstandard
developed byITU-T.
oSONEThasdefinedahierarchy ofsignalscalledsynchronous transport signals
(STSs).SDHhasdefinedasimilarhierarchy ofsignalscalledsynchronous transfer
modules(STMs).
oAnOC-nsignalistheopticalmodulation ofanSTS-n(orSTM-n)signal.
oSONETdefinesfourlayers:path,line,section,andphotonic.
oSONETisasynchronous TDMsysteminwhichallclocksarelockedtoamaster
clock.
oASONETsystemcanusethefollowing equipment:
1.STSmultiplexers
2.STSdemultiplexers
3.Regenerators
4.Add/drop multiplexers
5.Terminals
oSONETsends8000framespersecond;eachframelasts125IlS.
oAnSTS-Iframeismadeof9rowsand90columns; anSTS-nframeismadeof
9rowsandnx90columns.
oSTSscanbemultiplexed togetanewSTSwithahigherdatarate.
DSONETnetworktopologies canbelinear,ring,ormesh.
oAlinearSONETnetworkcanbeeitherpoint-to-point ormultipoint.
DAringSONETnetworkcanbeunidirectional orbidirectional.
oTomakeSONETbackward-compatible withthecurrenthierarchy, itsframedesign
includesasystemofvirtualtributaries (VTs).
17.10PRACTICE SET
ReviewQuestions
I.Whatistherelationship betweenSONETandSDH?
2.Whatistherelationship betweenSTSandSTM?
3.HowisanSTSmultiplexer different fromanadd/drop multiplexer sincebothcan
addsignalstogether?SECTION 17.10PRACTICE SETSIS
4.Whatistherelationship betweenSTSsignalsandOCsignals?
5.Whatisthepurposeofthepointerinthelineoverhead?
6.WhyisSONETcalledasynchronous network?
7.WhatisthefunctionofaSONETregenerator?
8.WhatarethefourSONETlayers?
9.Discussthefunctions ofeachSONETlayer.
10.Whatisavirtualtributary?
Exercises
II.WhataretheuserdataratesofSTS-3,STS-9,andSTS-12?
12.ShowhowSTS-9'scanbemultiplexed tocreateanSTS-36. Isthereanyextra
overhead involved inthistypeofmultiplexing?
13.AstreamofdataisbeingcarriedbySTS-lframes.Ifthedatarateofthestreamis
49.540Mbps,howmanySTS-lframespersecondmustlettheirH3bytescarrydata?
14.AstreamofdataisbeingcarriedbySTS-lframes.Ifthedatarateofthestreamis
49.530Mbps,howmanyframespersecondshouldleaveoneemptybyteafterthe
H3byte?
IS.Table17.2showsthattheoverhead bytescanbecategorized asA,B, C,D,E,F,G,
H,J,K,andZbytes.
a.WhyaretherenoAbytesintheLOHorPOH?
b.WhyaretherenoCbytesintheLOH?
c.WhyaretherenoDbytesinthePOH?
d.WhyaretherenoEbytesintheLOHorPOR?
e.WhyaretherenoFbytesintheLOHorPOH?
f.WhyaretherenoGbytesintheSOHorLOH?
g.WhyaretherenoHbytesintheSOH?
h.WhyaretherenoJbytesintheSOHorLOH?
i.WhyaretherenoKbytesintheSOHorPOH?
j.WhyaretherenoZbytesintheSOH?
16.WhyareBbytespresentinallthreeheaders?CHAPTER 18
Virtual-Circuit Networks:
FrameRelayandATM
InChapter8,wediscussed switching techniques. Wesaidthattherearethreetypesof
switching: circuitswitching, packetswitching, andmessage switching. Wealsomen­
tionedthatpacketswitching canusetwoapproaches: thevirtual-circuit approach and
thedatagram approach.
Inthischapter,weshowhowthevirtual-circuit approach canbeusedinwide-area
networks. Twocommon WANtechnologies usevirtual-circuit switching. FrameRelay
isarelatively high-speed protocolthatcanprovidesomeservicesnotavailable inother
WANtechnologies suchasDSL,cableTV,andTlines.ATM,asahigh-speed protocol,
canbethesuperhighway ofcommunication whenitdeploysphysical layercarriers
suchasSONET.
WefirstdiscussFrameRelay.WethendiscussATMingreaterdetaiLFinally,we
showhowATMtechnology, whichwasoriginally designed asaWANtechnology, can
alsobeusedinLANtechnology, ATMLANs.
18.1FRAME RELAY
FrameRelayisavirtual-circuit wide-area networkthatwasdesigned inresponse to
demands foranewtypeofWANinthelate1980sand early 1990s.
1.PriortoFrameRelay,someorganizations wereusingavirtual-circuit switching
networkcalledX.25thatperformed switching atthenetworklayer.Forexample,
theInternet,whichneedswide-area networks tocarryitspacketsfromoneplaceto
another,usedX.25.AndX.25isstillbeingusedbytheInternet, butitisbeing
replacedbyotherWANs.However, X.25hasseveraldrawbacks:
a.X.25hasalow64-kbpsdatarate.Bythe1990s,therewasaneedforhigher­
data-rate WANs.
b.X.25hasextensive flowanderrorcontrolatboththedatalinklayerandthe
network layer.ThiswassobecauseX.25wasdesigned inthe1970s,when
theavailable transmission mediaweremorepronetoerrors.Flowanderror
controlatbothlayerscreatealargeoverhead andslowdowntransmissions. X.25
requires acknowledgments forbothdatalinklayerframesandnetwork layer
packetsthataresentbetweennodesandbetweensourceanddestination.
517518CHAPTER 18ViRTUAL-CIRCUiT NETWORKS: FRAMERELAYANDATM
c.Originally X.25wasdesigned forprivatelise,notfortheInternet.X.25hasits
ownnetwork layer.Thismeansthattheuser'sdataareencapsulated inthe
network layerpacketsofX.25.TheInternet, however, hasitsownnetwork
layer,whichmeansiftheInternetwantstouseX.25,theInternetmustdeliver
itsnetworklayerpacket,calledadatagram, toX.25forencapsulation inthe
X.25packet.Thisdoublestheoverhead.
2.Disappointed withX.25,someorganizations startedtheirownprivateWANby
leasingT-lorT-3linesfrompublicserviceproviders. Thisapproach alsohassome
drawbacks.
a.Ifanorganization hasnbranches spreadoveranarea,itneedsn(n-1)/2T-Ior
T-3lines.Theorganization paysforalltheselinesalthough itmayusethelines
only10percentofthetime.Thiscanbeverycostly:
b.Theservicesprovided byT-IandT-3linesassumethattheuserhasfixed-rate
dataallthetime.Forexample, aT-llineisdesigned forauserwhowantsto
usethelineataconsistent 1.544Mbps.Thistypeofserviceisnotsuitablefor
themanyuserstodaythatneedtosendburstydata.Forexample, ausermay
wanttosenddataat6Mbpsfor2s,0Mbps(nothing) for7s,and3.44Mbps
for1sforatotalof15.44Mbitsduringaperiodof10s.Although theaverage
datarateisstill1.544Mbps,theT-Ilinecannotacceptthistypeofdemand
becauseitisdesigned forfixed-rate data,notburstydata.Burstydatarequire
whatiscalledbandwidth ondemand. Theuserneedsdifferent bandwidth
allocations atdifferenttimes.
Inresponse totheabovedrawbacks, FrameRelaywasdesigned. FrameRelayisawide­
areanetworkwiththefollowing features:
1.FrameRelayoperatesatahigherspeed(1.544Mbpsandrecently44.376Mbps).
ThismeansthatitcaneasilybeusedinsteadofameshofT-IorT-3lines.
2.FrameRelayoperatesinjustthephysicalanddatalinklayers.Thismeansitcan
easilybeusedasabackbone networktoprovideservicestoprotocols thatalready
haveanetworklayerprotocol, suchastheInternet.
3.FrameRelayallowsburstydata.
4.FrameRelayallowsaframesizeof9000bytes,whichcanaccommodate alllocal­
areanetworkframesizes.
5.FrameRelayislessexpensive thanothertraditional WANs.
6.FrameRelayhaserrordetection atthedatalinklayeronly.Thereisnoflowcontrol
orerrorcontrol.Thereisnotevenaretransmission policyifaframeisdamaged; it
issilentlydropped. FrameRelaywasdesigned inthiswaytoprovidefasttransmis­
sioncapability formorereliablemediaandforthoseprotocols thathaveflowand
errorcontrolatthehigherlayers.
Architecture
FrameRelayprovidespermanent virtualcircuitsandswitched virtualcircuits.Figure18.1
showsanexampleofaFrameRelaynetworkconnected totheInternet.Theroutersare
used,aswewillseeinChapter22,toconnectLANsandWANsintheInternet.Inthe
figure,theFrameRelayWANisusedasonelinkintheglobalInternet.SECTION 18.1FRAMERELAY 519
Figure18.1FrameRelaynetwork
Totherestof
theInternet
VirtualCircuits
FrameRelayisavirtualcircuitnetwork. AvirtualcircuitinFrameRelayisidentified
byanumbercalledadatalinkconnection identifier (DLCI).
VCIsinFrameRelayarecalledDLCIs.
Permanent VersusSwitched VirtualCircuits
Asourceandadestination maychoosetohaveapermanent virtualcircuit(PVC).In
thiscase,theconnection setupissimple.Thecorresponding tableentryisrecorded for
allswitches bytheadministrator (remotely andelectronically, ofcourse).Anoutgoing
DLCIisgiventothesource,andanincoming DLCIisgiventothedestination.
PVCconnections havetwodrawbacks. First,theyarecostlybecausetwoparties
payfortheconnection allthetimeevenwhenitisnotinuse.Second,aconnection is
createdfromonesourcetoonesingledestination. Ifasourceneedsconnections with
severaldestinations, itneedsaPVCforeachconnection. Analternate approach isthe
switched virtualcircuit(SVC).TheSVCcreatesatemporary, shortconnection that
existsonlywhendataarebeingtransferred between sourceanddestination. AnSVC
requiresestablishing andterminating phasesasdiscussed inChapter8.
Switches
EachswitchinaFrameRelaynetworkhasatabletorouteframes.Thetablematches
anincoming port-DLCI combination withanoutgoing port-DLCI combination aswe
described forgeneralvirtual-circuit networks inChapter8.Theonlydifference isthat
VCIsarereplaced byDLCIs.
FrameRelayLayers
Figure18.2showstheFrameRelaylayers.FrameRelayhasonlyphysicalanddatalink
layers.520CHAPTER 18VIRTUAL-CIRCUIT NETWORKS: FRAMERELAYANDATM
Figure18.2FrameRelaylayers
Datalink
PhsicalISimplified corefunctionsI
ofdatalinklayer
ANSIstandards
FrameRelayoperates onlyatthephysicalanddatalinklayers.
Physical Layer
Nospecificprotocol isdefinedforthephysical layerinFrameRelay.Instead,itisleft
totheimplementer tousewhatever isavailable. FrameRelaysupportsanyoftheproto­
colsrecognized byANSI.
DataLinkLayer
Atthedatalinklayer,FrameRelayusesasimpleprotocolthatdoesnotsupportflowor
errorcontrol.Itonlyhasanerrordetection mechanism. Figure 18.3showstheformat
ofaFrameRelayframe.TheaddressfielddefinestheDLCIaswellassomebitsusedto
controlcongestion.
Figure18.3FrameRelayframe
C/R:Command/response
EA:Extended address
FECN:Forward explicitcongestion notificationBECN:Backward explicitcongestion notification
DE:Discardeligibility
DLCI:Datalinkconnection identifier
DLCI
6bitsInformation
1bit1bitDLCI
4bits
Thedescriptions ofthefieldsareasfollows:
oAddress (DLCI)field.Thefirst6bitsofthefirstbytemakesupthefirstpartofthe
DLCI.ThesecondpartoftheDLCIusesthefirst4bitsofthesecondbyte.These
bitsarepartofthelO-bitdatalinkconnection identifier definedbythestandard.
Wewilldiscussextended addressing attheendofthissection.SECTION 18.1FRAMERELAY 521
oCommand/response (CIR).Thecommand/response (C/R)bitisprovided toallow
upperlayerstoidentifyaframeaseitheracommand oraresponse.Itisnotused
bytheFrameRelayprotocol.
oExtended address(EA).Theextended address(EA)bitindicates whether the
currentbyteisthefinalbyteoftheaddress.AnEAof0meansthatanotheraddress
byteistofollow(extended addressing isdiscussed later).AnEAof1meansthat
thecurrentbyteisthefinalone.
oForward explicitcongestion notification (FECN). Theforward explicitcon­
gestionnotification (FECN) bitcanbesetbyanyswitchtoindicatethattraffic
iscongested. Thisbitinformsthedestination thatcongestion hasoccurred. Inthis
way,thedestination knowsthatitshouldexpectdelayoralossofpackets.Wewill
discusstheuseofthisbitwhenwediscusscongestion controlinChapter24.
oBackward explicitcongestion notification (BECN). Thebackward explicitcon­
gestionnotification (BECN) bitisset(inframesthattravelintheotherdirection) to
indicateacongestion probleminthenetwork. Thisbitinformsthesenderthatcon­
gestionhasoccurred. Inthisway,thesourceknowsitneedstoslowdowntoprevent
thelossofpackets.Wewilldiscusstheuseofthisbitwhenwediscusscongestion
controlinChapter24.
oDiscard eligibility (DE).Thediscardeligibility (DE)bitindicates thepriority
leveloftheframe.Inemergency situations, switches mayhavetodiscardframesto
relievebottlenecks andkeepthenetworkfromcollapsing duetooverload. Whenset
(DE1),thisbittellsthenetworktodiscardthisframeifthereiscongestion. Thisbit
canbeseteitherbythesenderoftheframes(user)orbyanyswitchinthenetwork.
FrameRelaydoesnotprovidefloworerrorcontrol;
theymustbeprovided bytheupper-layer protocols.
Extended Address
ToincreasetherangeofDLCIs,theFrameRelayaddresshasbeenextended fromthe
original 2-byteaddressto3-or4-byteaddresses. Figure18.4showsthedifferent
addresses. Note that theEAfielddefinesthenumberofbytes;itis1inthelastbyteof
theaddress,anditisaintheotherbytes.Notethatinthe3-and4-byteformats, thebit
beforethelastbitissettoO.
Figure18.4Threeaddressformats
DLCI
a.Two-byte address(lO-bitDLCI)
DLCI CIREA=O
OLCI IFECNIBECN DEEA=O
DLCI 0EA=I
b.Three-byte address(16-bitDLCI)OLCI ICIREA=O
OLCIIPECNIBECNIOEEA=O
DLCI EA=O
DLCI I0EA=1
c.Four-byte address(23-bitDLCI)522CHAPTER 18VIRTUAL-CIRCUIT NETWORKS: FRAMERELAYANDATM
FRADs
Tohandleframesarrivingfromotherprotocols, FrameRelay uses adevicecalleda
FrameRelayassembler/disassembler (FRAD). AFRADassembles anddisassembles
framescomingfromotherprotocols toallowthemtobecarriedbyFrameRelayframes.
AFRADcanbeimplemented asaseparatedeviceoraspartofaswitch.Figure18.5
showstwoFRADsconnected toaFrameRelaynetwork.
Figure18.5FRAD
X.25
ATM
ppp
VOFRFrame
RelayX.25
ATM
ppp
FrameRelaynetworks offeranoptioncalledVoiceOverFrameRelay(VOFR) that
sendsvoicethroughthenetwork. Voiceisdigitized usingPCMandthencompressed.
Theresultissentasdataframesoverthenetwork. Thisfeatureallowstheinexpensive
sendingofvoiceoverlongdistances. However, notethatthequalityofvoiceisnotas
goodasvoiceoveracircuit-switched networksuchasthetelephone network. Also,the
varyingdelaymentioned earliersometimes corruptsreal-time voice.
LMI
FrameRelaywasoriginally designed toprovidePVCconnections. Therewasnot,
therefore, aprovision forcontrolling ormanaging interfaces. LocalManagement
Information (LMI)isaprotocoladdedrecentlytotheFrameRelayprotocoltopro­
videmoremanagement features.Inparticular, LMIcanprovide
oAkeep-alive mechanism tocheckifdataareflowing.
oAmulticast mechanism toallowalocalendsystemtosendframestomorethan
oneremoteendsystem.
oAmechanism toallowanendsystemtocheckthestatusofaswitch(e.g.,toseeif
theswitchiscongested).
Congestion ControlandQualityofService
OneofthenicefeaturesofFrameRelayisthatitprovides congestion controland
qualityofservice(QoS).Wehavenotdiscussed thesefeaturesyet.InChapter24,we
introduce thesetwoimportant aspectsofnetworking anddiscusshowtheyareimple­
mentedinFrameRelayandsomeothernetworks.SECTION 18.2ATM 523
18.2ATM
Asynchronous Transfer Mode(ATM)isthecellrelayprotocoldesigned bytheATM
ForumandadoptedbytheITU-T.Thecombination ofATMandSONETwillallow
high-speed interconnection ofalltheworld'snetworks. Infact,ATMcanbethoughtof
asthe"highway" oftheinformation superhighway.
DesignGoals
Amongthechallenges facedbythedesigners ofATM,sixstandout.
1.Foremost istheneedforatransmission systemtooptimize theuseofhigh-data-rate
transmission media,inparticular opticalfiber.Inadditiontoofferinglargeband­
widths,newertransmission mediaandequipment aredramatically lesssusceptible
tonoisedegradation. Atechnology isneededtotakeadvantage ofbothfactorsand
therebymaximize datarates.
2.Thesystemmustinterface withexistingsystemsandprovidewide-area intercon­
nectivity between themwithoutlowering theireffectiveness orrequiring their
replacement.
3.Thedesignmustbeimplemented inexpensively sothatcostwouldnotbeabarrier
toadoption. IfATMistobecomethebackbone ofinternational communications,
asintended, itmustbeavailable atlowcosttoeveryuserwhowantsit.
4.Thenewsystemmustbeabletoworkwithandsupporttheexistingtelecom­
munications hierarchies (localloops,localproviders, long-distance carriers,and
soon).
5.Thenewsystemmustbeconnection-oriented toensureaccurate andpredictable
delivery.
6.Lastbutnotleast,oneobjective istomoveasmanyofthefunctions tohardware as
possible(forspeed)andeliminate asmanysoftware functions aspossible(again
forspeed).
Problell,ls
Beforewediscussthesolutions tothesedesignrequirements, itisusefultoexaminesome
oftheproblems associated withexistingsystems.
FrameNetworks
BeforeATM,datacommunications atthedatalinklayerhadbeenbasedonframe
switching andframenetworks. Different protocols useframesofvaryingsizeandintri­
cacy.Asnetworks becomemorecomplex, theinformation thatmustbecarriedinthe
headerbecomes moreextensive. Theresultislargerandlargerheadersrelativetothe
sizeofthedataunit.Inresponse, someprotocols haveenlarged thesizeofthedataunit
tomakeheaderusemoreefficient (sending moredatawiththesame size header).
Unfortunately, largedatafieldscreatewaste.Ifthereisnotmuchinformation totransmit,
muchofthefieldgoesunused.Toimproveutilization, someprotocols providevariable
framesizestousers.524CHAPTER 18VIRTUAL-CIRCUIT NETWORKS: FRAMERElAYANDATM
MixedNetwork Traffic
Asyoucanimagine, thevarietyofframesizesmakestrafficunpredictable. Switches,
multiplexers, androutersmustincorporate elaborate software systemstomanagethe
varioussizesofframes.Agreatdealofheaderinformation mustberead,andeachbit
countedandevaluated toensuretheintegrity ofeveryframe.Internetworking among
thedifferent framenetworks isslowandexpensive atbest,andimpossible atworst.
Another problem isthatofproviding consistent dataratedelivery whenframe
sizesareunpredictable andcanvarysodramatically. Togetthemostoutofbroadband
technology, trafficmustbetime-division multiplexed ontosharedpaths.Imagine the
resultsofmultiplexing framesfromtwonetworks withdifferent requirements (and
framedesigns) ontoonelink(seeFigure18.6).Whathappenswhenline1useslarge
frames(usuallydataframes)whileline2usesverysmallframes(thenormforaudio
andvideoinformation)?
Figure18.6Multiplexing usingdifferentframesizes
x
2------------1A x01
Ifline1'sgiganticframeXarrivesatthemultiplexer evenamomentearlierthan
line2'sframes,themultiplexer putsframeXontothenewpathfirst.Afterall,evenif
line2'sframeshavepriority,themultiplexer hasnowayofknowing towaitforthem
andsoprocesses theframethathasarrived.FrameAmusttherefore waitfortheentire
Xbitstreamtomoveintoplacebeforeitcanfollow.ThesheersizeofXcreatesan
unfairdelayforframeA.Thesameimbalance canaffectalltheframesfromline2.
Because audioandvideoframesordinarily aresmall,mixingthemwithconven­
tionaldatatrafficoftencreatesunacceptable delaysofthistypeandmakessharedframe
linksunusable foraudioandvideoinformation. Trafficmusttraveloverdifferent paths,
inmuchthesamewaythatautomobile andtraintrafficdoes.Buttofullyutilizebroad
bandwidth links,weneedtobeabletosendallkindsoftrafficoverthesamelinks.
CellNetworks
Manyoftheproblems associated withframeinternetworking aresolvedbyadopting
aconceptcalledcellnetworking. Acellisasmalldataunitoffixedsize.Inacell
network, whichusesthecellasthebasicunitofdataexchange, alldataareloadedinto
identical cellsthatcanbetransmitted withcomplete predictability anduniformity. As
framesofdifferent sizesandformatsreachthecellnetworkfromatributary network,
theyaresplitinto multiple smalldataunitsofequallengthandareloadedintocells.
Thecellsarethenmultiplexed withothercellsandroutedthroughthecellnetwork.
Because eachcellisthesamesizeandallaresmall,theproblems associated with
multiplexing different-sized framesareavoided.SECTION 18.2ATM 525
Acellnetwork usesthecellasthebasicunitofdataexchange.
Acellisdefinedasasmall,fixed-size blockofinformation.
Figure18.7showsthemultiplexer fromFigure18.6withthetwolinessending
cellsinsteadofframes.FrameXhasbeensegmented intothreecells:X,Y,andZ.Only
thefirstcellfromline1getsputonthelinkbeforethefirstcellfromline2.Thecells
fromthetwolinesareinterleaved sothatnonesuffersalongdelay.
Figure18.7Multiplexing usingcells
z y xDOD
C B ADOD2------=-----;C Z B Y A xClClDClClCl
Asecondpointinthissamescenario isthatthehighspeedofthelinkscoupled
withthesmallsizeofthecellsmeansthat,despiteinterleaving, cellsfromeachline
arriveattheirrespective destinations inanapproximation ofacontinuous stream(much
asamovieappearstoyourbraintobecontinuous actionwheninfactitisreallyaseries
ofseparate, stillphotographs). Inthisway,a cellnetworkcanhandlereal-time trans­
missions, suchasaphonecall,withoutthepartiesbeingawareofthesegmentation or
multiplexing atall.
Asynchronous TDM
ATMusesasynchronous time-division multiplexing-that iswhyitiscalledAsynchro­
nousTransferMode-to multiplex cellscorningfromdifferentchannels.Itusesfixed-size
slots(sizeofacell).ATMmultiplexers fillaslotwithacellfromanyinputchannelthat
hasacell;theslotisemptyifnoneofthechannelshasacelltosend.
Figure18.8showshowcellsfromthreeinputsaremultiplexed. Atthefirsttickof
theclock:channel2hasnocell(emptyinputslot),sothemultiplexer fillstheslotwith
a cellfromthethirdchannel.Whenallthecellsfromallthechannels aremultiplexed,
theoutputslotsareempty.
Figure18.8ATMmultiplexing
A3A2Alggg
B281
10110lLJ2--------1
C3 C2 Cl
101101101
3-==-=~~1/C382A3C2BlA2ClAi
LJLJgggggggg526 CHAPTER 18VIRTUAL-CIRCUIT NETWORKS: FRAMERELAYANDATM
Architecture
ATMisacell-switched network. Theuseraccessdevices, calledtheendpoints, are
connected throughauser-to-network interface (UNI)totheswitches insidethenet­
work.Theswitches areconnected throughnetwork-to-network interfaces (NNIs).
Figure18.9showsanexampleofanATMnetwork.
Figure18.9Architecture ofanATMnetwork
Endpoints
VirtualConnection
Connection betweentwoendpoints isaccomplished throughtransmission paths(TPs),
virtualpaths(YPs),andvirtualcircuits(YCs).Atransmission path(TP)isthephysical
connection (wire,cable,satellite, andsoon)between anendpoint andaswitchor
betweentwoswitches. Thinkoftwoswitches astwocities.Atransmission pathisthe
setofallhighways thatdirectlyconnectthetwocities.
Atransmission pathisdividedintoseveralvirtualpaths.Avirtualpath(VP)pro­
videsaconnection orasetofconnections betweentwoswitches. Thinkofavirtualpath
asahighway thatconnects twocities.Eachhighway isavirtualpath;thesetofall
highways isthetransmission path.
Cellnetworks arebasedonvirtualcircuits(VCs).Allcellsbelonging toasingle
message followthesamevirtualcircuitandremainintheiroriginalorderuntilthey
reachtheirdestination. Thinkofavirtualcircuitasthelanesofahighway (virtualpath).
Figure18.10showstherelationship between atransmission path(aphysical connec­
tion),virtualpaths(acombination ofvirtualcircuitsthatarebundledtogetherbecause
partsoftheirpathsarethesame),andvirtualcircuitsthatlogically connecttwopoints.
Figure18.10 Tp,VPs,andVCs
VC
VC--t-I
VC
VC
VC~;:}.';'il~VCvc
vc
VC
VC
VCVCSECTION 18.2ATM 527
Tobetterunderstand theconceptofVPsandVCs,lookatFigure18.11.Inthis
figure,eightendpoints arecommunicating usingfourVCs.However, thefirsttwoVCs
seemtosharethesamevirtualpathfromswitchItoswitchIII,soitisreasonable to
bundlethesetwoVCstogethertoformoneVP.Ontheotherhand,itisclearthatthe
othertwoVCssharethesamepathfrom switch ItoswitchIV,soitisalsoreasonable to
combine themtoformoneVP.
Figure18.11 Example ofVPsandVCs
Identifiers Inavirtualcircuitnetwork, toroutedatafromoneendpoint toanother,
thevirtualconnections needtobeidentified. Forthispurpose, thedesigners ofATM
createdahierarchical identifier withtwolevels:avirtualpathidentifier (VPI)anda
virtual-circuit identifier (Vel).TheVPIdefinesthespecificVP,andtheVeldefinesa
particular VCinsidetheVP.TheVPIisthesameforallvirtualconnections thatare
bundled(logically) intooneVP.
Notethatavirtualconnection isdefinedbyapairofnumbers: theVPIandthevel.
Figure18.12showstheVPIsandVClsforatransmission path.Therationale for
dividinganidentifier intotwopartswillbecomeclearwhenwediscussroutinginan
ATMnetwork.
ThelengthsoftheVPIsforUNIsandNNIsaredifferent. InaUNI,theVPIis
8bits,whereasinanNNI,theVPIis12bits.ThelengthoftheVCIisthesameinboth
interfaces (16bits).Wetherefore cansaythatavirtualconnection isidentified by
24bitsinaUNIandby28bitsinanNNI(seeFigure18.13).
Thewholeideabehinddividingavirtualcircuitidentifier intotwopartsistoallow
hierarchical routing.Mostoftheswitches inatypicalATMnetworkareroutedusing
VPIs.Theswitches attheboundaries ofthenetwork, thosethatinteractdirectlywith
theendpoint devices,usebothVPIsandVCIs.
Cells
ThebasicdataunitinanATMnetworkiscalledacell.Acellisonly53byteslongwith
5bytesallocated totheheaderand48bytescarryingthepayload(userdatamaybeless528CHAPTER 18VIRTUAL-CIRCUIT NETWORKS: FRAMERELAYANDATM
Figure18.12 Connection identifiers
Thisvirtualconnection is
uniquely definedusingthepair:
(14 21)t t
VPlVCl
VCl=21 _....c.~~
VCl=32-+---I
VCl=45
VCl=70
VCl=74-+-l
VCl=45
Figure18.13 Virtualconnection identifiers inUNIsandNNIsVCl=21
VCl=32
VCl=45
VCl=70
VCl=74
VCl=45
1L....-_V_P_l_-'- V_C_I 1
I- 24bits ·18bits 16bits 12bits 16bits
IVPl VClI
~~~ -----.J
I- 28bits -,
a.VPIandVCIinaUNI b.VPIandVCIinanNNI
than48bytes).Wewillstudyindetailthefieldsofacell,butforthemomentitsuffices
tosaythatmostoftheheaderisoccupied bytheVPIandVCIthatdefinethevirtual
connection throughwhichacellshouldtravelfromanendpoint toaswitchorfroma
switchtoanotherswitch.Figure18.14showsthecellstructure.
Figure18.14AnATMcell
Header
-+1IVPIIVCII
I,5bytes
Connection Establishment andRelease53bytesPayload
48bytes
LikeFrameRelay,ATMusestwotypesofconnections: PVCandSVc.
PVCApermanent virtual-circuit connection isestablished betweentwoendpoints by
thenetworkprovider. TheVPlsandvcrsaredefinedforthepermanent connections,
andthevaluesareenteredforthetablesofeachswitch.SECTION 18.2ATM 529
SVCInaswitched virtual-circuit connection, eachtimeanendpoint wantstomakea
connection withanotherendpoint, anewvirtualcircuitmustbeestablished. ATMcannot
dothejobbyitself,butneedsthenetworklayeraddresses andtheservicesofanotherpro­
tocol(suchasIP).Thesignaling mechanism ofthisotherprotocol makesaconnection
requestbyusingthenetworklayeraddresses ofthetwoendpoints. Theactualmechanism
dependsonthenetworklayerprotocol.
Switching
ATMusesswitches toroutethecellfromasourceendpoint tothedestination endpoint.
AswitchroutesthecellusingboththeVPlsandtheVCls.Theroutingrequires the
wholeidentifier. Figure18.15showshowaVPCswitchroutesthecell.Acellwitha
VPIof153andVCIof67arrivesatswitchinterface (port)1.Theswitchchecksits
switching table,whichstoressixpiecesofinformation perrow:arrivalintetface num­
ber,incoming VPI,incoming VCI,corresponding outgoing interface number,thenew
VPI,andthenewVCLTheswitchfindstheentrywiththeinterface 1,VPI153,and
VCI67anddiscovers thatthecombination corresponds tooutputinterface 3,VPI140,
andVCI92.ItchangestheVPIandVCIintheheaderto140and92,respectively, and
sendsthecelloutthroughinterface 3.
Figure18.15 Routingwithaswitch
VCI~---Input Output
Interface VPIVCIInterface VPIVCI
115367314092
............... .............
~.',o""';e'%~0" ..e,.'''~~
VPI
153
4..A..C1 1
92 I2
3VPIV~
Switching Fabric
Theswitching technology hascreatedmanyinteresting featurestoincreasethespeedof
switches tohandledata.Wediscussed switching fabricsinChapter8.
ATMLayers
TheATMstandard definesthreelayers.Theyare,fromtoptobottom,theapplication
adaptation layer,theATMlayer,andthephysicallayer(seeFigure18.16).
Theendpoints useallthreelayers whiletheswitches useonlythetwobottomlayers
(seeFigure18.17).
Physical Layer
LikeEthernetandwirelessLANs,ATMcellscanbecarriedbyanyphysicallayercarrier.530 CHAPTER 18VIRTUAL-CIRCUIT NETWORKS: FRAMERELAYANDATM
Figure18.16ATMlayers
AAL
AALl AAL2 AAL3/4 AAL5
ATMlayer I ------
PhysicallayerI----_----1
Figure18.17ATMlayersinendpoint devicesandswitches
AALIAALI
AJM ~ ArM ~ATM ATM~i ,
Physical,IPhysical Physical
~Physical
~
I I II
I
c@
~I
I I
D D
SONET TheoriginaldesignofATMwasbasedonSONET(seeChapter17)asthe
physical layercarrier.SONETispreferred fortworeasons. First,thehighdatarate
ofSONET's carrierreflectsthedesignandphilosophy ofATM.Second, inusing
SONET, theboundaries ofcellscanbeclearlydefined. AswesawinChapter 17,
SONETspecifies theuseofapointertodefinethebeginning ofapayload. Ifthebegin­
ningofthefirstATMcellisdefined,therestofthecellsinthesamepayloadcaneasily
beidentified becausetherearenogapsbetweencells.Justcount53bytesaheadtofind
thenextcell.
OtherPhysical Technologies ATMdoesnotlimitthephysical layertoSONET.
Othertechnologies, evenwireless, maybeused.However, theproblemofcellbound­
ariesmustbesolved.Onesolutionisforthereceivertoguesstheendofthecelland
applytheCRCtothe5-byteheader.Ifthereisnoerror,theendofthecell1sfound,witha
highprobability, correctly. Count52bytesbacktofindthebeginning ofthecell.
ATMLayer
TheATMlayerprovides routing,trafficmanagement, switching, andmultiplexing
services.Itprocesses outgoing trafficbyaccepting 48-bytesegments fromtheAAL
sublayers andtransforming theminto53-bytecellsbytheadditionofa5-byteheader
(seeFigure18.18).SECTION 18.2ATM 531
Figure18.18ATMlayer
FromAAL
A
T
M
HeaderFormat ATMusestwofonnatsforthisheader,oneforuser-to-network inter­
face(UNI)cellsandanotherfornetwork-to-network interface (NNI)cells.Figure18.19
showstheseheadersinthebyte-by-byte formatpreferred bytheITU-T(eachrowrepre­
sentsabyte).
Figure18.19ATMheaders
GFC:Genericflowcontrol
VPl:Virtualpathidentifier
VCl:VirtualcircuitidentifierPT:Payloadtype
CLP:Celllosspriority
HEC:Headererrorcontrol
GFC
VPI
VCIVPI
VCI
VCI
·Pltyloail
datlL
UNIcellCLP
,Pay;lofuI:
data
NNIcellCLP
oGeneric flowcontrol(GFC).The4-bitGFCfieldprovides flowcontrolatthe
UNIlevel.TheITU-Thasdetermined thatthislevelofflowcontrolisnotneces­
saryattheNNIlevel.IntheNNIheader,therefore, thesebitsareaddedtotheVPI.
ThelongerVPIallowsmorevirtualpathstobedefinedattheNNIlevel.The
formatforthisadditional VPIhasnotyetbeendetermined.
oVirtualpathidentifier (VPI).TheVPIisan8-bitfieldinaUNIcellanda12-bit
fieldinanNNIcell(seeabove).
oVirtualcircuitidentifier (VCI).TheVCIisa16-bitfieldinbothframes.
oPayload type(PT).Inthe3-bitPTfield,thefirstbitdefinesthepayloadasuser
dataormanagerial information. Theinterpretation ofthelast2bitsdependsonthe
firstbit.532CHAPTER 18VIRTUAL-CIRCUIT NETWORKS: FRAMERELAYANDATM
oCelllosspriority(CLP).TheI-bitCLPfieldisprovidedforcongestion control.A
cellwithitsCLPbitsettoImustberetainedaslongastherearecellswithaCLPofO.
Wediscusscongestion controlandqualityofserviceinanATMnetworkinChapter24.
oHeadererrorcorrection (HEC).TheHECisacodecomputed forthefirst
4bytesoftheheader.ItisaCRCwiththedivisorx8+x2+x+1thatisusedto
correctsingle-bit errorsandalargeclassofmultiple-bit errors.
Application Adaptation Layer
Theapplication adaptation layer(AAL)wasdesigned toenabletwoATMconcepts.
First,ATMmustacceptanytypeofpayload, bothdataframesandstreamsofbits.A
dataframecancomefromanupper-layer protocolthatcreatesaclearlydefinedframe
tobesenttoacarriernetworksuchasATM.Agoodexampre istheInternet.ATMmust
alsocarrymultimedia payload. Itcanacceptcontinuous bitstreamsandbreakthem
intochunkstobeencapsulated intoacellattheATMlayer.AALusestwosublayers to
accomplish thesetasks.
Whether thedataareadataframeorastreamofbits,thepayloadmustbeseg­
mentedinto48-bytesegments tobecarriedbyacell.Atthedestination, thesesegments
needtobereassembled torecreatetheoriginalpayload. TheAALdefinesasublayer,
calledasegmentation andreassembly (SAR)sublayer, todoso.Segmentation isat
thesource;reassembly, atthedestination.
Beforedataaresegmented bySAR,theymustbepreparedtoguarantee theintegrity
ofthedata.Thisisdonebyasublayercalledtheconvergence sublayer (CS).
ATMdefinesfourversions oftheAAL:AALl,AAL2,AAL3/4, andAAL5.
Although wediscussalltheseversions, weneedtoinformthereaderthatthecommon
versions todayareAALIandAAL5.Thefirstisusedinstreaming audioandvideo
communication; thesecond,indatacommunications.
AALIAALIsupports applications thattransferinformation atconstant bitrates,
suchasvideoandvoice.ItallowsATMtoconnectexistingdigitaltelephone networks
suchasvoicechannels andTlines.Figure18.20showshowabitstreamofdatais
choppedinto47-bytechunksandencapsulated incells.
TheCSsublayerdividesthebitstreaminto47-bytesegments andpassesthemto
theSARsublayerbelow.NotethattheCSsublayerdoesnotaddaheader.
TheSARsublayer adds1byteofheaderandpassesthe48-bytesegmenttothe
ATMlayer.Theheaderhastwofields:
oSequence number (SN).This4-bitfielddefinesasequence numbertoorderthe
bits.Thefirstbitissometimes usedfortiming,whichleaves3bitsforsequencing
(modulo8).
oSequence number protection (SNP).Thesecond4-bitfieldprotectsthefirst
field.Thefirst3bitsautomatically correcttheSNfield.Thelastbitisaparitybit
thatdetectserroroverall8bits.
AAL2Originally AAL2wasintendedtosupportavariable-data-rate bitstream,butit
hasbeenredesigned. Itisnowusedforlow-bit-rate trafficandshort-frame trafficsuch
asaudio(compressed oruncompressed), video,orfax.AgoodexampleofAAL2useis
inmobiletelephony. AAL2allowsthemultiplexing ofshortframesintoonecell.SECTION 18.2ATM 533
Figure18.20AALl
Constant-bit-rate datafromupperlayer
...................... 1110010010001111 111110101010101 ..
AI I
CSI IIII
A 47bytes 47bytes: 47bytes:
I ILtEl 00ItillISAR
1 I147bytes I147bytes III47bytes I
I I I I IA~OO 100I00I
T I I
M 548bytesI548bytes1548bytesI
SARheaderISN
4bitsSNP
4bitsSN:Sequence number
SNP:Sequence numberprotection
UUI:User-to-user indication
HEC:Headererrorcontrol
SF:StartfieldFigure18.21showstheprocessofencapsulating ashortframefromthesamesource
(thesameuserofamobilephone)orfromseveralsources(severalusersofmobiletele­
phones)intoonecell.
Figure18.21 AAL2
ShortpacketsII
fromupperlayer~
Affitj
3~t"~24~241CS
A13241 " "I
"~L[illr SAR2 I147bytes1 1147bytesI
I 1 1 IA~OO I~od IT
M 548bytes 548bytes
CSheaderI__C_IDI__LI_---.J~ HECI
8bits 6 2 3 5
SARheaderISFICID:Channelidentifier
'----:-8 -cbi-ts--- LI:Lengthindicator
PPT:Packetpayloadtype
TheCSlayeroverhead consistsoffivefields:
oChannel identifier (CID).The8-bitCIDfielddefinesthechannel(user)ofthe
shortpacket.
oLengthindicator (LI).The6-bitLIfieldindicates howmuchofthefinalpacket
isdata.
oPacketpayloadtype(PPT).ThePPTfielddefinesthetypeofpacket.534CHAPTER 18VIRTUAL-CIRCUIT NETWORKS: FRAMERELAYANDATM
oUser-to-user indicator (UUI).TheUUIfieldcanbeusedbyend-to-end users.
oHeadererrorcontrol(HEC).Thelast5bitsisusedtocorrecterrorsintheheader.
Theonlyoverhead attheSARlayeristhestartfield(SF)thatdefinestheoffsetfrom
thebeginning ofthepacket.
AAL3/4 Initially,AAL3wasintendedtosupportconnection-oriented dataservicesand
AAL4tosupportconnectionless services.Astheyevolved,however,itbecameevident
thatthefundamental issuesofthetwoprotocols werethesame.Theyhavetherefore been
combined intoasingleformatcalledAAL3/4. Figure18.22showstheAAL3/4sublayer.
Figure18.22AAL3/4
Datapacketupto65,535bytes
I
AI 1
cs[illData~ I'...IA I,,
1 I,,I...,
L
~I~,,
~~SAR @ )~o0 0
3/412442
1124421 124421:I:I I 1
A I I 1 1
T-+-[[1 I[[] I..olliJ I
M 548bytes 548bytes 548bytes
CSheaderICPII~
8bits 8
CStrailerIAL~
8bits 8BAsize
16
L
16CPI:Common partidentifier
Btag:Beginning tag
BAsize:Bufferallocation size
AL:Alignment
Etag:Endingtag
L:Length
SARheader~I MID
2 4 10
SARtrailer~I CRC
6 10ST:Segment type
SN:Sequence number
MID:Multiplexing identifier
LI:Lengthidentifier
CRC:Errordetector
TheCSlayerheaderandtrailerconsistofsixfields:
oCommon partidentifier (CPI).TheCPIdefineshowthesubsequent fieldsareto
beinterpreted. ThevalueatpresentisO.
oBegintag(Btag).ThevalueofthisfieldisrepeatedineachceUtoidentifyallthe
cellsbelonging tothesamepacket.ThevalueisthesameastheEtag(seebelow).
oBufferallocation size(BAsize). The2-byteBAfieldtellsthereceiverwhatsize
bufferisneededforthecomingdata.
oAlignment (AL).TheI-byteALfieldisincluded tomaketherestofthetrailer
4byteslong.
oEndingtag(Etag).TheI-byteETfieldservesasanendingflag.Itsvalueisthe
sameasthatofthebeginning tag.
oLength(L).The2-byteLfieldindicates thelengthofthedataunit.SECTION 18.2ATM 535
TheSARheaderandtrailerconsistoffivefields:
oSegment type(ST).The2-bitSTidentifier specifies thepositionofthesegment
inthemessage: beginning (00),middle(01),orend(10).Asingle-segment message
hasanSTof11.
oSequence number(SN).Thisfieldisthesameasdefinedpreviously.
oMultiplexing identifier (MID).The10-bitMIDfieldidentifies cellscomingfrom
differentdataflowsandmultiplexed onthesamevirtualconnection.
oLengthindicator (LI).Thisfielddefineshowmuchofthepacketisdata,not
padding.
oCRC.Thelast10bitsofthetrailerisaCRCfortheentiredataunit.
AALSAAL3/4 provides comprehensive sequencing anderrorcontrolmechanisms
thatarenotnecessary foreveryapplication. Fortheseapplications, thedesigners of
ATMhaveprovided afifthAALsublayer, calledthesimpleandefficientadaptation
layer(SEAL). AALSassumes thatallcellsbelonging toasinglemessage travel
sequentially andthatcontrolfunctions areincluded intheupperlayersofthesending
application. Figure18.23showstheAAL5sublayer.
Figure18.23AAL5
Datapacketuptof55,535bytes
I I
AI I
CSIData~ K,iI} II , "-I I
I,,
I
LII,,I I
SAR 11...,I
5 I48bytes I:48bytesI I48bytes I
II,'I II I I IA...-[[jI[RJI[[IIT •••
M 548bytes 548bytes 548bytes
CStrailer~_L_...J.-. __C_RC_--,
8 8 16 32UU:Channelidentifier
CPI:Common partidentifier
L:Length
CRC:Errordetector
ThefourtrailerfieldsintheCSlayerare
oUser-to-user (UU).Thisfieldisusedbyendusers,asdescribed previously.
oCommon partidentifier (CPI).Thisfieldisthesameasdefinedpreviously.
oLength(L).The2-byteLfieldindicates thelengthoftheoriginaldata.
oCRC.Thelast4bytesisforerrorcontrolontheentiredataunit.
Congestion ControlandQualityofService
ATMhasaverydeveloped congestion controlandqualityofservicethatwediscussin
Chapter24.536 CHAPTER 18VIRTUAL-CIRCUIT NETWORKS: FRAMERELAYANDATM
18.3ATMLANs
ATMismainlyawide-area network (WANATM);however, thetechnology canbe
adaptedtolocal-area networks (ATMLANs).Thehighdatarateofthetechnology (155
and622Mbps)hasattracted theattention ofdesigners whoarelookingforgreaterand
greaterspeedsinLANs.Inaddition, ATMtechnology hasseveraladvantages thatmake
itanidealLAN:
oATMtechnology supports different typesofconnections between twoendusers.It
supports permanent andtemporary connections.
oATMtechnology supports multimedia communication withavarietyofbandwidths
fordifferentapplications. Itcanguarantee abandwidth ofseveralmegabits persecond
forreal-time video.Itcanalsoprovidesupportfortexttransfer.during off-peakhours.
oAnATMLANcanbeeasilyadaptedforexpansion inanorganization.
ATMLANArchitecture
Today,wehavetwowaystoincorporate ATMtechnology inaLANarchitecture: creating
apureATMLANormakingalegacyATMLAN.Figure18.24showsthetaxonomy.
Figure18.24ATMLANs
_______ Mixed
architecture
PureATMArchitecture
InapureATMLAN,anATMswitchisusedtoconnectthestationsinaLAN,in
exactlythesamewaystationsareconnected toanEthernet switch.Figure18.25shows
thesituation.
Inthisway,stationscanexchange dataatoneoftwostandard ratesofATMtech­
nology(155and652Mbps).However, thestationusesavirtualpathidentifier (VPI)
andavirtualcircuitidentifier(Vel),insteadofasourceanddestination address.
Thisapproach hasamajordrawback. Thesystemneedstobebuiltfromtheground
up;existingLANscannotbeupgraded intopureATMLANs.
LegacyLANArchitecture
Asecondapproach istouseATMtechnology asabackbone toconnecttraditional
LANs.Figure18.26showsthisarchitecture, alegacyATMLAN.SECTION 18.3ATMLANs 537
Figure18.25PureATMLAN
ATMswitch~
Station
StationStation
Station
Figure18.26LegacyATMLAN
Station
StationConverter ATMswitchEthernet
Station StationStationStation
Inthisway,stationsonthesameLANcanexchange dataattherateandformatof
traditional LANs(Ethernet, TokenRing,etc.).Butwhentwostationsontwodifferent
LANsneedtoexchange data,theycangothroughaconverting devicethatchangesthe
frameformat.Theadvantage hereisthatoutputfromseveralLANscanbemultiplexed
together tocreateahigh-data-rate inputtotheATMswitch.Thereareseveralissues
thatmustberesolved first.
MixedArchitecture
Probably thebestsolutionistomixthetwoprevious architectures. Thismeanskeeping
theexistingLANsand,atthesametime,allowing newstationstobedirectlyconnected
toanATMswitch.Themixedarchitecture LANallowsthegradualmigration oflegacy
LANsontoATMLANsbyaddingmoreandmoredirectlyconnected stationstothe
switch.Figure18.27showsthisarchitecture.
Again,thestationsinonespecificLANcanexchange datausingtheformatand
datarateofthatparticular LAN.Thestationsdirectlyconnected totheATMswitchcan
useanATMframetoexchange data.However, theproblemis,Howcanastationina538 CHAPTER 18VIRTUAL-CIRCUIT NETWORKS: FRAMERELAYANDATM
Figure18.27 Mixedarchitecture ATMIAN
--~
ATMstationATMstation
ATMswitch
Station Station StationStation
Station
traditional LANcommunicate withastationdirectlyconnected totheATMswitchor
viceversa?Weseehowtheproblemisresolved now.
LANEmulation (LANE)
Atthesurfacelevel,theuseofATMtechnology inLANsseemslikeagoodidea.However,
manyissuesneedtoberesolved, assummarized below:
oConnectionless versusconnection-oriented. Traditional LANs,suchasEthernet,
areconnection lessprotocols. Astationsendsdatapacketstoanotherstationwhen­
everthepacketsareready.Thereisnoconnection establishment orconnection
termination phase.Ontheotherhand,ATMisaconnection-oriented protocol; a
stationthatwishestosendcellstoanotherstationmustfirstestablish aconnection
and,afterallthecellsaresent,terminate theconnection.
oPhysical addresses versusvirtual-circuit identifiers. Closelyrelatedtothefirst
issueisthedifference inaddressing. Aconnectionless protocol, suchasEthernet,
definestherouteofapacketthroughsourceanddestination addresses. However, a
connection-oriented protocol, suchasATM,definestherouteofacellthrough
virtualconnection identifiers (VPIsandVCIs).
oMulticasting andbroadcasting delivery. Traditional LANs,suchasEthernet,
canbothmulticast andbroadcast packets;astationcansendpacketstoagroup
ofstationsortoallstations.Thereisnoeasywaytomulticast orbroadcast onan
ATMnetworkalthough point-to-multipoint connections areavailable.
oInteroperability. Inamixedarchitecture, astationconnected toalegacyLAN
mustbeabletocommunicate withastationdirectlyconnected toanATMswitch.
Anapproach calledlocal-area network emulation (LANE)solvestheabove-mentioned
problems andallowsstationsinamixedarchitecture tocommunicate withoneanother.
Theapproach usesemulation. Stationscanuseaconnectionless servicethatemulates a
connection-oriented service.Stationsusethesourceanddestination addresses forinitialSECTION 18.3ATMLANs 539
connection andthenuseVPIandVCIaddressing. Theapproach allowsstationstouse
unicast,multicast, andbroadcast addresses. Finally,theapproach convertsframesusinga
legacyformattoATMcellsbeforetheyaresentthroughtheswitch.
Client/Server Model
LANEisdesigned asaclient/server modeltohandlethe fourpreviously discussed
problems. Theprotocoluses one typeofclientandthreetypesofservers,asshownin
Figure18.28.
Figure18.28 ClientandserversinaLANE
LEes
LES
BUS
LANEmulation Client
AllATMstationshaveLANemulation client(LEC)software installed ontopofthe
threeATMprotocols. Theupper-layer protocols areunaware oftheexistence ofthe
ATMtechnology. Theseprotocols sendtheirrequeststoLECforaLANservicesuchas
connectionless deliveryusingMACunicast,multicast, orbroadcast addresses. TheLEC,
however, justinterprets therequestandpassestheresultontotheservers.
LANEmulation Configuration Server
TheLANemulation configuration server(LECS)isusedfortheinitialconnection
betweentheclientandLANE.Thisserverisalwayswaitingtoreceivetheinitialcontact.
Ithasawell-known ATMaddressthatisknowntoeveryclientinthesystem.
LANEmulation Server
LANemulation server(LES)software isinstalled ontheLES.Whenastation
receivesaframetobesenttoanotherstationusingaphysical address,LECsendsa
specialframetotheLES.Theservercreatesavirtualcircuitbetweenthesourceandthe
destination station.Thesourcestationcannowusethisvirtualcircuit(andthecorre­
sponding identifier) tosendtheframeorframestothedestination.
Broadcast/Unknown Server
Multicasting andbroadcasting requiretheuseofanotherservercalledthebroadcast!
unknown server(BUS).Ifastationneedstosendaframetoagroupofstationsorto
everystation,theframefirstgoestotheBUS;thisserverhaspermanent virtualconnec­
tionstoeverystation.Theservercreatescopiesofthereceivedframeandsendsacopy
toagroupofstationsortoallstations,simulating amulticasting orbroadcasting process.540CHAPTER 18ViRTUAL-CIRCUIT NETWORKS: FRAMEREIAYANDATM
Theservercanalsodeliveraunicastframebysendingtheframetoeverystation.Inthis
casethedestination addressisunknown. Thisissometimes moreefficient thangetting
theconnection identifier fromtheLES.
MixedArchitecture withClient/Server
Figure18.29showsclientsandserversinamixedarchitecture ATMLAN.Inthefigure,
threetypesofserversareconnected totheATMswitch(theycanactuallybepartofthe
switch).Alsoweshowtwotypesofclients.StationsAandB,designed tosendandreceive
LANEcommunication, aredirectlyconnected totheATMswitch.StationsC,D,E,F,G,
andHintraditional legacyLANsareconnected totheswitchviaaconverter. Thesecon­
vertersactasLECclientsandcommunicate onbehalfoftheirconnected stations.
Figure18.29Amixedarchitecture ATMIANusingIANE
Upper
layers
ATM
LECAAL
ATMAALBUS
Upper
layersUpper
layers
Physical
PhysicalATMswitchATMLES
AAL
Physical
LECS
ATMAAL
Upper
layers
LEC
AALUpper
layers
Physical
f---:::-:=-..;A:.:;,;TM=--1J LEC
Physical(client)
Converter
softwareConverter
software
LEC
MAC AAL
ATM
Physical PhysicalLEC
AAL MAC
ATM
Physical Physical
LEC
(client)
Station Station
18.4RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
books.Theitemsinbrackets[...]refertothereference listattheendofthetext.SECTION 18.6SUMMARY 541
Books
FrameRelayandATMarediscussed inChapter3of[Sta98].ATMLANisdiscussed
inChapter 14of[For03]. Chapter7of[Kei02]alsohasagooddiscussion ofATM
LANs.
18.5KEYTERMS
AALI
AAL2
AAL3/4
AAL5
application adaptation layer(AAL)
Asynchronous Transfer Mode
(ATM)
ATMlayer
ATMswitch
backward explicitcongestion notification
(BECN)
bandwidth ondemand
broadcast/unknown server(BUS)
burstydata
cell
cellnetwork
cellrelay
client/server model
congestion control
conyergence sublayer (CS)
datalinkconnection identifier
(DLCI)
discardeligibility (DE)
forwardexplicitcongestion notification
(FECN)
FrameRelayFrameRelayassembler/disassembler
(FRAD)
LANemulation client(LEC)
LANemulation configuration server
(LECS)
LANemulation server(LES)
legacyATMLAN
local-area networkemulation (LANE)
LocalManagement Information (LMI)
mixedarchitecture LAN
network-to-network interface (NNI)
permanent virtualcircuit(PVC)
pureATMLAN
qualityofservice(QoS)
segmentation andreassembly (SAR)
simpleandefficientadaptation layer
(SEAL)
switched virtualcircuit(SVC)
transmission path(TP)
user-to-network interface (UNI)
virtualcircuit(VC)
virtual-circuit identifier (VCl)
virtualpath(VP)
virtualpathidentifier (VPI)
VoiceOverFrameRelay(VOFR)
X.25
18.6SUMMARY
oVirtual-circuit switching isadatalinklayertechnology inwhichlinksareshared.
oAvirtual-circuit identifier (VCI)identifies aframebetweentwoswitches.
oFrameRelayisarelatively high-speed, cost-effective technology thatcanhandle
burstydata.542CHAPTER 18VIRTUAL-CIRCUIT NETWORKS: FRAMERELAYANDATM
DBothPVCandSVCconnections areusedinFrameRelay.
DThedatalinkconnection identifier (DLCI)identifies avirtualcircuitinFrameRelay.
oAsynchronous Transfer Mode(ATM)isacellrelayprotocol that,incombination
withSONET, allowshigh-speed connections.
oAcellisasmall,fixed-size blockofinformation.
DTheATMdatapacketisacellcomposed of53bytes(5bytesofheaderand48bytes
ofpayload).
DATMeliminates thevaryingdelaytimesassociated withdifferent-size packets.
DATMcanhandlereal-time transmission.
oAuser-to-network interface(UNI)istheinterfacebetweenauserandanATMswitch.
oAnetwork-to-network interface (NNI)istheinterface betweentwoATMswitches.
DInATM,connection between twoendpoints isaccomplisheCl throughtransmission
paths(TPs),virtualpaths(VPs),andvirtualcircuits(VCs).
DInATM,acombination ofavirtualpathidentifier (VPI)andavirtual-circuit
identifier identifies avirtualconnection.
oTheATMstandard definesthreelayers:
a.Application adaptation layer(AAL)acceptstransmissions fromupper-layer
servicesandmapsthemintoATMcells.
b.ATMlayerprovides routing,trafficmanagement, switching, andmultiplexing
serVIces.
c.Physicallayer definesthetransmission medium, bittransmission, encoding, and
electrical- to-optical transformation.
DTheAAL isdividedintotwosublayers: convergence sublayer(CS)andsegmentation
andreassembly (SAR).
oTherearefourdifferentAALs,eachforaspecificdatatype:
a.AALIforconstant-bit-rate stream.
b.AAL2forshortpackets.
c.AAL3/4forconventional packetswitching (virtual-circuit approach ordatagram
approach).
d.AAL5forpacketsrequiring nosequencing andnoerrorcontrolmechanism.
DATMtechnology canbeadoptedforuseinaLAN(ATMLAN).
DInapureATMLAN,anATMswitchconnects stations.
DInalegacyATMLAN,thebackbone thatconnects traditional LANsusesATM
technology.
oAmixedarchitecture ATMLANcombines featuresofapureATMLANanda
legacyATMLAN.
DLocal-area networkemulation (LANE)isaclient/server modelthatallowstheuse
ofATMtechnology inLANs.
DLANEsoftware includesLANemulation client(LECS),LANemulation configu­
rationserver(LECS),LANemulation server(LES),andbroadcast/unknown server
(BUS)modules.SECTION 18.7PRACTICE SET 543
18.7PRACTICE SET
ReviewQuestions
1.Therearenosequence numbers inFrameRelay.Why?
2.Cantwodevicesconnected tothesameFrameRelaynetwork usethesame
DLCIs?
3.WhyisFrameRelayabettersolutionforconnecting LANsthanT-llines?
4.Compare anSVCwithaPVc.
5.DiscusstheFrameRelayphysicallayer.
6.Whyismultiplexing moreefficientifallthedataunitsarethesamesize?
7.HowdoesanNNIdifferfromaUNI?
8.Whatistherelationship betweenTPs,VPs,andVCs?
9.HowisanATMvirtualconnection identified?
10.NametheATMlayersandtheirfunctions.
11.Howmanyvirtualconnections canbedefinedinaUNI?Howmanyvirtualconnec­
tionscanbedefinedinanNNI?
12.Brieflydescribetheissuesinvolved inusingATMtechnology inLANs.
Exercises
13.TheaddressfieldofaFrameRelayframeis1011000000010111. WhatistheDLCI
(indecimal)?
14.TheaddressfieldofaFrameRelayframeis101100000101001. Isthisvalid?
15.FindtheDLCIvalueifthefirst3bytesreceivedis7C74Elinhexadecimal.
16.Findthevalueofthe2-byteaddressfieldinhexadecimal iftheDLCIis178.
Assumenocongestion.
17."InFigure18.30avirtualconnection isestablished between AandB.Showthe
DLCIforeachlink.
Figure18.30 Exercise 17544CHAPTER 18VIRTUAL-CIRCUIT NETWORKS: FRAMERELAYANDATM
18.InFigure18.31avirtualconnection isestablished between AandB.Showthe
corresponding entriesinthetablesofeachswitch.
Figure18.31 Exercise 18
DLCI=233 DLCI=111DLCI=99
19.AnAALllayer receivesdataat2Mbps.Howmanycellsarecreatedpersecondby
theATMlayer?
20.Whatisthetotalefficiency ofATMusingAAL1(theratioofreceived bitstosent
bits)?
21.Ifanapplication usesAAL3/4 andthereare47,787bytesofdatacomingintothe
CS,howmanypaddingbytesarenecessary? Howmanydataunitsgetpassedfrom
theSARtotheATMlayer?Howmanycellsareproduced?
22.Assuming nopadding, doestheefficiency ofATMusingAAL3/4dependonthesize
ofthepacket?Explainyouranswer.
23.Whatistheminimum numberofcellsresulting fromaninputpacketintheAAL3/4
layer?Whatisthemaximum numberofcellsresulting fromaninputpacket?
24.Whatistheminimum numberofcellsresulting fromaninputpacketintheAAL5
layer?Whatisthemaximum numberofcells resulting fromaninputpacket?
25.Explainwhypaddingisunnecessary inAAL1,butnecessary inotherAALs.
26.UsingAAL3/4, showthesituation whereweneed ofpadding.
a.0bytes (no padding)
b.40bytes
c.43bytes
27.UsingAAL5, showthesituation whereweneed ofpadding.
a.0bytes(nopadding)
b.40bytes
c.47bytes
28.Ina53-bytecell,howmanybytesbelongtotheuserinthefollowing (assumeno
padding)?
a.AALI
b.AAL2
c.AAL3/4(notthefirstorlastcell)
d.AAL5(notthefirstorlastcell)SECTION 18.7PRACTICE SET 545
Research Activities
29.Findoutabout1.150protocol thatprovides genericflowcontrolforUNIinterface.
30.ATMusesthe8-bitHEe(headererrorcontrol)fieldtocontrolerrorsinthefirstfour
bytes(32bits)oftheheader.Thegenerating polynomial isx8+x2+X+1.Findout
howthisisdone.
31.FindtheformatoftheLANEframesandcompare itwiththeformatoftheEthernet
frame.
32.Findoutaboutdifferent stepsinvolved intheoperation ofaLANE.Network Layer
Objectives
Thenetworklayerisresponsible forthesource-to-destination deliveryofapacket,possi­
blyacrossmultiplenetworks (links).Whereas thedatalinklayeroversees thedeliveryof
thepacketbetween twosystemsonthesamenetwork(links),thenetworklayerensures
thateachpacketgetsfromitspointoforigintoitsfinaldestination.
Thenetwork layerisresponsible forthedeliveryofindividual
packetsfromthesourcetothedestination host.
Thenetworklayeraddsaheaderthatincludes thelogicaladdresses ofthesender
andreceivertothepacketcorningfromtheupperlayer.Ifapackettravelsthroughthe
Internet,weneedthisaddressing systemtohelpdistinguish thesourceanddestination.
Whenindependent networks orlinksareconnected togethertocreateaninternet­
work,routersorswitches routepacketstotheirfinaldestination. Oneofthefunctions
ofthenetworklayeristoprovidearoutingmechanism.
InPart4ofthebook,wefirstdiscusslogicaladdressing (referred toasIPaddressing
intheInternet). Wethendiscussthemainaswellassomeauxiliary protocols thatare
responsible forcontrolling thedeliveryofapacketfromitssourcetoitsdestination.
Part4ofthebookisdevotedtothenetwork layerand
theservicesprovided bythislayer.
Chapters
Thispartconsistsoffourchapters: Chapters 19to22.
Chapter19
Chapter 19discusses logicalorIPaddressing. Wefirstdiscussthehistorical classful
addressing. Wethendescribe thenewclassless addressing designed toalleviate some
problems inherentinclassfuladdressing. Thecompletely newaddressing system,IPv6,
whichmaybecomeprevalent inthenearfuture,isalsodiscussed.Chapter20
Chapter20isdevotedtothemainprotocolatthenetworklayerthatsupervises andcon­
trolsthedeliveryofpacketsfromthesourcetodestination. Thisprotocol iscalledthe
InternetProtocolorIP.
Chapter21
Chapter21isdevotedtosomeauxiliary protocols definedatthenetworklayer,that
helptheIPprotocol doitsjob.Theseprotocols performaddressmapping (logicalto
physicalorviceversa),errorreporting, andfacilitate multicast delivery.
Chapter22
Delivery androutingofpacketsintheInternetisavery delicat~andimportant issue.
WedevoteChapter22tothismatter.Wefirstdiscussthemechanism ofdeliveryand
routing.Wethenbrieflydiscusssomeunicastandmulticast routingprotocols usedin
theInternettoday.CHAPTER 19
Network Layer:
LogicalAddressing
Aswediscussed inChapter 2,communication atthenetwork layerishost-to-host
(computer-to-computer); acomputer somewhere intheworldneedstocommunicate
withanothercomputer somewhere elseintheworld.Usually,computers communicate
throughtheInternet.Thepackettransmitted bythesendingcomputer maypassthrough
severalLANsorWANsbeforereaching thedestination computer.
Forthislevelofcommunication, weneedaglobaladdressing scheme;wecalled
thislogicaladdressing inChapter2.Today,weusethetermIPaddresstomeanalogical
addressinthenetworklayeroftheTCP/IPprotocolsuite.
TheInternet addresses are32bitsinlength;thisgivesusamaximum of232
addresses. Theseaddresses arereferredtoasIPv4(IPversion4)addresses orsimplyIP
addresses ifthereisnoconfusion.
Theneedformoreaddresses, inadditiontootherconcerns abouttheIPlayer,moti­
vatedanewdesignoftheIPlayercalledthenewgeneration ofIPorIPv6(lPversion6).
Inthisversion,theInternetuses 128-bit addresses thatgivemuch greater flexibility in
addressallocation. Theseaddresses arereferredtoasIPv6(IPversion6)addresses.
Inthischapter,wefirstdiscussIPv4addresses, whicharecurrently beingusedinthe
Internet.WethendiscusstheIPv6addresses, whichmaybecomedominant inthefuture.
19.1IPv4ADDRESSES
AnIPv4addressisa32-bitaddressthatuniquely anduniversally definestheconnection
ofadevice(forexample, acomputer orarouter)totheInternet.
AnIPv4addressis32bitslong.
IPv4addresses areunique.Theyareuniqueinthesensethateachaddressdefines
one,andonlyone,connection totheInternet. TwodevicesontheInternetcannever
havethesameaddressatthesametime.Wewillseelaterthat,byusingsomestrategies,
anaddressmaybeassigned toadeviceforatimeperiodandthentakenawayand
assigned toanotherdevice.
549550CHAPTER 19NETWORK IAYER:LOGICAL ADDRESSING
Ontheotherhand,ifadeviceoperating atthenetworklayerhasmconnections to
theInternet, itneedstohavemaddresses. Wewillseelaterthatarouterissucha
device.
TheIPv4addresses areuniversal inthesensethattheaddressing systemmustbe
accepted byanyhostthatwantstobeconnected totheInternet.
TheIPv4addresses areuniqueanduniversal.
Address Space
AprotocolsuchasIPv4thatdefinesaddresses hasanaddress space.Anaddressspace
isthetotalnumberofaddresses usedbytheprotocol.IfaprotocolusesNbitstodefine
anaddress,theaddressspaceis2Nbecauseeachbitcanhavetwodifferentvalues(0or1)
andNbitscanhave2Nvalues.
IPv4uses32-bitaddresses, whichmeansthattheaddress spaceis232or
4,294,967,296 (morethan4billion).Thismeansthat,theoretically, iftherewereno
restrictions, morethan4billiondevicescouldbeconnected totheInternet.Wewillsee
shortlythattheactualnumberismuchlessbecauseoftherestrictions imposed onthe
addresses.
TheaddressspaceofIPv4is232or4,294,967,296.
Notations
Therearetwoprevalent notations toshowanIPv4address:binarynotation anddotted­
decimalnotation.
BinaryNotation
Inbinarynotation, theIPv4addressisdisplayed as32bits.Eachoctetisoftenreferred
toasabyte.Soitiscommon tohearanIPv4addressreferredtoasa32-bitaddressora
4-byteaddress.Thefollowing isanexampleofanIPv4addressinbinarynotation:
01110101 10010101 00011101 00000010
Dotted-Decimal Notation
TomaketheIPv4addressmorecompact andeasiertoread,Internetaddresses areusu­
allywrittenindecimalformwithadecimalpoint(dot)separating thebytes.Thefol­
lowingisthedotted~decimal notation oftheaboveaddress:
117.149.29.2
Figure19.1showsanIPv4addressinbothbinaryanddotted-decimal notation.
Notethatbecauseeachbyte(octet)is8bits,eachnumberindotted-decimal notationis
avaluerangingfrom0to255.SECTION 19.1IPv4ADDRESSES 551
Figure19.1Dotted-decimal notationandbinarynotationforanIPv4address
10000000 000010II00000011 00011111-----~/-----­128.11.3.31
Numbering systemsarereviewed inAppendix B.
Example 19.1
Changethefollowing IPv4addresses frombinarynotationtodotted-decimal notation.
a.10000001 00001011 00001011 11101111
b.11000001 10000011 00011011 11111111
Solution
Wereplaceeachgroupof8bitswithitsequivalent decimalnumber(seeAppendix B)andadd
dotsforseparation.
a.129.11.11.239
b.193.131.27.255
Example 19.2
Changethefollowing IPv4addresses fromdotted-decimal notationtobinarynotation.
a.111.56.45.78
b.221.34.7.82
Solution
Wereplaceeachdecimalnumberwithitsbinaryequivalent (seeAppendix B).
a.•01101111 00111000 00101101 01001110
b.11011101 00100010 00000111 01010010
Example 19.3
Findtheerror,ifany,inthefollowing IPv4addresses.
a.111.56.045.78
b.221.34.7.8.20
c.75.45.301.14
d.11100010.23.14.67
Solution
a.Theremustbenoleadingzero(045).
b.TherecanbenomorethanfournumbersinanIPv4address.
c.Eachnumberneedstobelessthanorequalto255(301isoutsidethisrange).
d.Amixtureofbinarynotationanddotted-decimal notationisnotallowed.552CHAPTER 19NETWORK LAYER:LOGICAL ADDRESSING
ClassfulAddressing
IPv4addressing, atitsinception, usedtheconceptofclasses.Thisarchitecture iscalled
classfuladdressing. Although thisschemeisbecoming obsolete, webrieflydiscussit
heretoshowtherationale behindclasslessaddressing.
Inclassfuladdressing, theaddressspaceisdividedintofiveclasses:A,B,C,D,
andE.Eachclassoccupies somepartoftheaddressspace.
Inclassfuladdressing, theaddressspaceisdividedintofiveclasses:
A,B,C,D,andE.
Wecanfindtheclassofanaddresswhengiventheaddressinbinarynotation
ordotted-decimal notation.Iftheaddressisgiveninbinarynotation, thefirstfew
bitscanimmediately tellustheclassoftheaddress.Iftheaddressisgivenin
decimal-dotted notation, thefirstbytedefinestheclass.Bothmethods areshownin
Figure19.2.
Figure19.2Finding the classesinbinaryanddotted-decimal notation
First Second Third Fourth First Second Third Fourth
byte byte byte byte byte byte byte byte
ClassA0IIIIIIClassAI0-127IIIIII
ClassB10IIIIIIClassB1128-19111 IIII
ClassC110IIIIIIClassC1192-22311 IIII
ClassD1110IIIIIIClassD1224--23911IIII
ClassE1111IIIIIIClassE1240-25511 IIII
a.Binarynotation b.Dotted-decimal notation
Example 19.4
Findtheclassofeachaddress.
a.00000001 00001011 00001011 11101111
b.11000001 10000011 00011011 11111111
c.14.23.120.8
d.252.5.15.111
Solution
a.ThefirstbitisO.ThisisaclassAaddress.
b.Thefirst2bitsare1;thethirdbitisO.ThisisaclassCaddress.
c.Thefirstbyteis14(between 0and127);theclassisA.
d.Thefirstbyteis252(between 240and255);theclassisE.SECTION 19.1IPv4ADDRESSES 553
ClassesandBlocks
Oneproblemwithclassfuladdressing isthateachclassisdividedintoafixednumber
ofblockswitheachblockhavingafixedsizeasshowninTable19.1.
Table19.1NumberofblocksandblocksizeinclassfulIPv4 addressing
Class NumberofBlocks BlockSize Application
A 128 16,777,216 Unicast
B 16,384 65,536 Unicast
C 2,097,152 256 Unicast
D 1 268,435,456 Multicast
E 1 268,435.456 Reserved
Letusexamine thetable.Previously, whenanorganization requested ablockof
addresses, itwasgrantedoneinclassA,B,orC.ClassAaddresses weredesigned for
largeorganizations withalargenumberofattachedhostsorrouters.ClassBaddresses
weredesigned formidsizeorganizations withtensofthousands ofattached hostsor
routers.ClassCaddresses weredesigned forsmallorganizations withasmallnumberof
attachedhostsorrouters.
Wecanseetheflawinthisdesign.AblockinclassAaddressistoolargefor
almostanyorganization. Thismeansmostoftheaddresses inclassAwerewastedand
werenotused.AblockinclassBisalsoverylarge,probably toolargeformanyofthe
organizations thatreceived aclassBblock.AblockinclassCisprobably toosmallfor
manyorganizations. ClassDaddresses weredesigned formulticasting aswewillseein
alaterchapter.Eachaddressinthisclassisusedtodefineonegroupofhostsonthe
Internet.TheInternetauthorities wrongly predicted aneedfor268,435,456 groups.
Thisneverhappened andmanyaddresses werewastedheretoo.Andlastly,theclassE
addresses werereservedforfutureuse;onlyafewwereused,resulting inanotherwaste
ofaddresses.
«
Inc1assfnladdressing, alargepartoftheavailable addresses werewasted.
NetidandHostid
Inclassfuladdressing, anIPaddressinclassA,B,orCisdividedintonetidandhostid.
Thesepartsareofvaryinglengths,depending ontheclassoftheaddress.Figure19.2
showssomenetidandhostidbytes.Thenetidisincolor,thehostidisinwhite.Notethat
theconceptdoesnotapplytoclassesDandE.
InclassA,onebytedefinesthenetidandthreebytesdefinethehostid.InclassB,
twobytesdefinethenetidandtwobytesdefinethehostid.InclassC,threebytesdefine
thenetidandonebytedefinesthehostid.
Mask
Although thelengthofthenetidandhostid(inbits)ispredetermined inclassfuladdress­
ing,wecanalsouseamask(alsocalledthedefaultmask),a32-bitnumbermadeof554CHAPTER 19NETWORK lAYER:LOG1CALADDRESSING
contiguous Isfollowed bycontiguous as.ThemasksforclassesA,B,andCareshown
inTable19.2.TheconceptdoesnotapplytoclassesD andE.
Table19.2Defaultmasksforclassfuladdressing
Class Binary Dotted-Decimal CIDR
A11111111 00000000 00000000 00000000 255.0.0.0 18
B11111111 11111111 00000000 00000000 255.255.0.0 116
C11111111 11111111 11111111 00000000 255.255.255.0 124
Themaskcanhelpustofindthenetidandthehostid.Forexample, themaskfora
classAaddresshaseight1s,whichmeansthefirst8bitsofanyaddressinclassA
definethenetid;thenext24bitsdefinethehostid.
Thelast column ofTable19.2showsthemaskintheformInwherencanbe8,16,
or24inclassfuladdressing. Thisnotation isalsocalledslashnotation orClassless
Interdomain Routing (CIDR)notation. Thenotationisusedinclassless addressing,
whichwewilldiscusslater.Weintroduce itherebecauseitcanalsobeappliedtoclass­
fuladdressing. Wewillshowlaterthatclassfuladdressing isaspecialcaseofclassless
addressing.
Subnetting
Duringtheeraofclassfuladdressing, subnettingwasintroduced.Ifanorganization was
grantedalargeblockinclassAorB,itcoulddividetheaddresses intoseveralcontiguous
groupsandassigneachgrouptosmallernetworks (calledsubnets) or,inrarecases,
sharepartoftheaddresses withneighbors. Subnetting increases thenumberofIsinthe
mask,aswewillseelaterwhenwediscussclassless addressing.
Supernetting
ThetimecamewhenmostoftheclassA andclassBaddresses weredepleted; however,
therewasstillahugedemandformidsizeblocks.ThesizeofaclassCblockwitha
maximum numberof256addresses didnotsatisfytheneedsofmostorganizations.
Evenamidsizeorganization neededmoreaddresses. Onesolutionwassupernetting.
Insupernetting, anorganization cancombine severalclassCblockstocreatealarger
rangeofaddresses. Inotherwords,severalnetworks arecombined tocreateasuper­
networkorasupemet. Anorganization canapplyforasetofclassCblocksinsteadof
justone.Forexample, anorganization thatneeds1000addresses canbegrantedfour
contiguous classCblocks.Theorganization canthenusetheseaddresses tocreateone
supernetwork. Supernetting decreases thenumberofIsinthemask.Forexample, ifan
organization isgivenfourclassCaddresses, themaskchangesfrom/24to/22.Wewill
seethatclassless addressing eliminated theneedforsupernetting.
AddressDepletion
Theflawsinclassfuladdressing schemecombined withthefastgrowthoftheInternetled
totheneardepletion oftheavailable addresses. YetthenumberofdevicesontheInternet
ismuchlessthanthe232addressspace.WehaverunoutofclassA and Baddresses, andSECTION 19.1IPv4ADDRESSES 555
aclassCblockistoosmallformostmidsize organizations. Onesolution thathas
alleviated theproblem istheideaofclassless addressing.
Classful addressing, whichisalmostobsolete, isreplaced withclassless addressing.
Classless Addressing
Toovercome addressdepletion andgivemoreorganizations accesstotheInternet,
classless addressing wasdesigned andimplemented. Inthisscheme, thereareno
classes,buttheaddresses arestillgrantedinblocks.
AddressBlocks
Inclassless addressing, whenanentity,smallorlarge,needstobeconnected tothe
Internet,itisgrantedablock(range)ofaddresses. Thesizeoftheblock(thenumberof
addresses) variesbasedonthenatureandsizeoftheentity.Forexample, ahousehold
maybegivenonlytwoaddresses; alargeorganization maybegiventhousands of
addresses. AnISP,astheInternetserviceprovider, maybegiventhousands orhundreds
ofthousands basedonthenumberofcustomers itmayserve.
Restriction Tosimplify thehandling ofaddresses, theInternet authorities impose
threerestrictions onclassless addressblocks:
1.Theaddresses inablockmustbecontiguous, oneafteranother.
2.Thenumberofaddresses inablockmustbeapowerof2(I,2,4,8,...).
3.Thefirstaddressmustbeevenlydivisible bythenumberofaddresses.
Example 19.5
Figure19.3showsablockofaddresses, inbothbinaryanddotted-decimal notation, grantedtoa
smallbusinessthatneeds16addresses.
Figure19.3Ablockof16addresses grantedtoasmallorganization
Block Block-
First 205.16.37.32 11001101 00010000 00100101 00100000'"<J.l
'" 205.16.37.33 11001101 00010000 00100101 00100001 '"!:l"0"0
-<
Last 205.16.37.47 11001101 00010000 00100101 00101111;::;
1-
a.Decimal b.Binary
Wecanseethattherestrictions areappliedtothisblock.Theaddresses arecontiguous.
Thenumberofaddresses isapowerof2(16=24),andthefirstaddressisdivisible by16.The
firstaddress,whenconverted toadecimalnumber,is3,440,387,360, whichwhendividedby
16resultsin215,024,210. InAppendix B,weshowhowtofindthedecimal valueofan
IPaddress.556CHAPTER 19NETWORK LAYER:LOGICAL ADDRESSING
Mask
Abetterwaytodefineablockofaddresses istoselectanyaddressintheblockandthe
mask.Aswediscussed before,amaskisa32-bitnumberinwhichthenleftmostbits
areIsandthe32-nrightmost bitsareOs.However, inclassless addressing themask
forablockcantakeanyvaluefrom0to32.Itisveryconvenient togivejustthevalue
ofnpreceded byaslash(CIDRnotation).
In1Pv4addressing, ablockofaddresses canbedefinedas
x.y.z.tln
inwhichx.y.z.tdefinesoneoftheaddresses andtheIndefinesthemask.
TheaddressandtheInnotation completely definethewholeblock(thefirst
address,thelastaddress,andthenumberofaddresses).
FirstAddress Thefirstaddressintheblockcanbefoundbysettingthe32-nright­
mostbitsinthebinarynotationoftheaddresstoOs.
Thefirstaddressintheblockcanbefoundbysettingtherightmost 32-nbitstoOs.
Example 19.6
Ablockofaddresses isgrantedtoasmallorganization. Weknowthatoneoftheaddresses is
205.16.37.39/28. Whatisthefirstaddressintheblock?
Solution
Thebinaryrepresentation ofthegivenaddressis11001101 00010000 00100101 00100I11.Ifwe
set32-28rightmost bitsto0,weget11001101 000100000100101 0010000 or205.16.37.32.
ThisisactuallytheblockshowninFigure19.3.
LastAddress Thelastaddressintheblockcanbefoundbysettingthe32-nright­
mostbitsinthebinarynotationoftheaddresstoIs.
Thelastaddressintheblockcanbefoundbysettingtherightmost 32-nbitstoIs.
Example 19.7
FindthelastaddressfortheblockinExample 19.6.
Solution
Thebinaryrepresentation ofthegivenaddressis11001101 000100000010010100100111. Ifwe
set32-28rightmost bitsto1,weget11001101 00010000 001001010010 1111or205.16.37.47.
ThisisactuallytheblockshowninFigure19.3.
Number ofAddresses Thenumberofaddresses intheblockisthedifference between
thelastandfirstaddress.Itcaneasilybefoundusingtheformula232-n.
Thenumberofaddresses intheblockcanbefoundbyusingtheformula232-n•SECTION 19.1IPv4ADDRESSES 557
Example 19.8
Findthenumberofaddresses inExample 19.6.
Solution
Thevalueofnis28,whichmeansthatnumberofaddresses is232-28or16.
Example 19.9
Anotherwaytofindthefirstaddress,thelastaddress,andthenumberofaddresses istorepresent
themaskasa32-bitbinary(or8-digithexadecimal) number.Thisisparticularly usefulwhenwe
arewritingaprogram tofindthesepiecesofinformation. InExample 19.5the/28canberepre­
sentedas11111111 11111111 11111111 11110000 (twenty-eight IsandfourOs).Find
a.Thefirstaddress
h.Thelastaddress
c.Thenumberofaddresses
Solution
a.ThefirstaddresscanbefoundbyANDing thegivenaddresses withthemask.ANDing hereis
donebitbybit.TheresultofANDing 2bitsis1ifbothbitsareIs;theresultis0otherwise.
Address:
Mask:
Firstaddress:11001101 00010000 00100101 00100111
11111111 11111111 11111111 11110000
11001101 00010000 00100101 00100000
b.ThelastaddresscanbefoundbyORingthegivenaddresses withthecomplement ofthe
mask.ORinghereisdonebitbybit.TheresultofORing2bitsis0ifbothbitsareOs;the
resultis1otherwise. Thecomplement ofanumberisfoundbychanging each1to0and
each0to1.
Address:
Maskcomplement:
Lastaddress:11001101 00010000 00100101 00100111
00000000 00000000 00000000 00001111
11001101 00010000 00100101 00101111
c.Thenumberofaddresses canbefoundbycomplementing themask,interpreting itasa
decimalnumber,andadding1toit.
Maskcomplement:
Numberofaddresses:000000000 00000000 00000000 00001111
15+1=16
NetworkAddresses
Averyimportant conceptinIPaddressing isthenetworkaddress. Whenanorganiza­
tionisgivenablockofaddresses, theorganization isfreetoallocatetheaddresses to
thedevicesthatneedtobeconnected totheInternet.Thefirstaddressintheclass,how­
ever,isnormally (notalways)treatedasaspecialaddress.Thefirstaddressiscalledthe
networkaddressanddefinestheorganization network. Itdefinestheorganization itself
totherestoftheworld.Inalaterchapterwewillseethatthefirstaddressistheonethat
isusedbyrouterstodirectthemessage senttotheorganization fromtheoutside.558CHAPTER 19NETWORK LAYER:LOGICAL ADDRESSING
Figure19.4showsanorganization thatisgranteda16-address block.
Figure19.4Anetworkconfiguration fortheblock205.16.37.32/28
Restof
theInternet
Allmessages withreceiveraddresses
205.16.37.32 to205.16.37.47
areroutedtox.y.z.t/n
-----------------------------1
1
1
I
1
1
1
1
205.16.37.46/28 205.16.37.47/28 1
~ ~:
11
1
11
1
:o~i~~~~~--------------------------
:network
I
I
II
1205.16.37.33/28 205.16.37.34/28 205.16.37.39/28: ~. ~
II
I
I
:Network address: 205.16.37.32/28L ~ ~ ~
Theorganization networkisconnected totheInternetviaarouter.Therouterhas
twoaddresses. Onebelongstothegrantedblock;theotherbelongstothenetworkthat
isattheothersideoftherouter.Wecallthesecondaddressx.y.z.t/nbecausewedonot
knowanything aboutthenetworkitisconnected toattheotherside.Allmessages des­
tinedforaddresses intheorganization block(205.16.37.32 to205.16.37.47) aresent,
directlyorindirectly, tox.y.z.t/n.Wesaydirectlyorindirectly becausewedonotknow
thestructure ofthenetworktowhichtheothersideoftherouterisconnected.
Thefirstaddressinablockisnormally notassigned toanydevice;itisusedasthe
networkaddressthatrepresents theorganization totherestoftheworld.
Hierarchy
IPaddresses, likeotheraddresses oridentifiers weencounter thesedays,havelevelsof
hierarchy. Forexample, atelephone networkinNorthAmerica hasthreelevelsofhier­
archy.Theleftmost threedigitsdefinetheareacode,thenextthreedigitsdefinethe
exchange, thelastfourdigitsdefinetheconnection ofthelocallooptothecentral
office.Figure19.5showsthestructure ofahierarchical telephone number.
Figure19.5Hierarchy inatelephone networkinNorthAmerica
(I408I)I8641-1 8902
1 I
:Areacode:
I
IExchange office
It )'1
I
I SubscriberItSECTION 19.1IPv4ADDRESSES 559
Two-Level Hierarchy: NoSubnetting
AnIPaddresscandefineonlytwolevelsofhierarchy whennotsubnetted. Thenleft­
mostbitsoftheaddressx.y.z.tJndefinethenetwork (organization network); the32-n
rightmost bitsdefinetheparticular host(computer orrouter)tothenetwork. Thetwo
common termsareprefixandsuffix.Thepartoftheaddressthatdefinesthenetwork is
calledtheprefix;thepartthatdefinesthehostiscalledthesuffix.Figure19.6shows
thehierarchical structure ofanIPv4address.
Figure19.6Twolevelsofhierarchy inanIPv4address
28bits 4bits
I I I
I Network prefix I I
Il )II I
I I
I Hostaddress I, )1
Theprefixiscommon toalladdresses inthenetwork; thesuffixchangesfromone
devicetoanother.
Eachaddressintheblockcanbeconsidered asatwo-level hierarchical structure:
theleftmostnbits(prefix)definethenetwork;
therightmost 32-nbitsdefinethehost.
Three-Levels ofHierarchy: Subnetting
Anorganization thatisgrantedalargeblockofaddresses maywanttocreateclustersof
networks (calledsubnets) anddividetheaddresses between thedifferent subnets.The
restoftheworldstillseestheorganization asoneentity;however, internally thereare
severalsubnets.Allmessages aresenttotherouteraddressthatconnects theorganization
totherestoftheInternet; therouterroutesthemessage totheappropriate subnets.The
organization, however, needstocreatesmallsubblocks ofaddresses, eachassigned to
specificsubnets.Theorganization hasitsownmask;eachsubnetmustalsohaveitsown.
Asanexample, suppose anorganization isgiventheblock17.12.40.0/26, which
contains 64addresses. Theorganization hasthreeofficesandneedstodividethe
addresses intothreesubblocks of32,16,and16addresses. Wecanfindthenewmasks
byusingthefollowing arguments:
1.Suppose themaskforthefirstsubnetisn1,then232-n1mustbe32,whichmeans
thatn1=27.
2.Suppose themaskforthesecondsubnetisn2,then232-n2mustbe16,which
meansthatn2=28.
3.Suppose themaskforthethirdsubnetisn3,then232-n3mustbe16,whichmeans
thatn3=28.
Thismeansthatwehavethemasks27,28,28withtheorganization maskbeing26.
Figure19.7showsoneconfiguration fortheabovescenario.560 CHAPTER 19NETWORK LAYER: LOGICAL ADDRESSING
Figure19.7Configuration andaddresses inasubnetted network
,------------------------------------------------------------1
Subnet1 Subnet3 :
_'..,17.12.14.63/28 :
I
1
1
1_..,17.12.14.62/28 1
I
~....
17.12.14.50/28~..,17.12.14.49/28
Subnet2
00
<'1N
~-i
r-i....
~-
17.12.14.34/28 _~17.12.14.33128 17.12.14.2127r--
~:!
E::::J:--11 <'i-~....
··•
Network: 17.12.14.11/26x.y.z.tln
Totherestof
theInternet
Letuschecktoseeifwecanfindthesubnetaddresses fromoneoftheaddresses in
thesubnet.
a.Insubnet1,theaddress17.12.14.29/27 cangiveusthesubnetaddressifweusethe
mask/27because
Host:
Mask:
Subnet:00010001 00001100 00001110 00011101
/27
00010001 00001100 00001110 00000000 ....(17.12.14.0)
b.Insubnet2,theaddress17.12.14.45/28 cangiveusthesubnetaddressifweusethe
mask/28because
Host: 00010001 00001100 00001110 00101101
Mask: /28
Subnet: 00010001 00001100 00001110 00100000 ....(17.12.14.32)
c.Insubnet3,theaddress17.12.14.50/28 cangiveusthesubnetaddressifweusethe
mask/28because
Host: 00010001 00001100 00001110 00110010
Mask: /28
Subnet: 00010001 00001100 00001110 00110000....(17.12.14.48)SECTION 19.1IPv4ADDRESSES 561
Notethatapplying themaskofthenetwork, 126,toanyoftheaddresses givesusthe
networkaddress17.12.14.0/26. Weleavethisprooftothereader.
Wecansaythatthroughsubnetting, wehavethreelevelsofhierarchy. Notethatin
ourexample, thesubnetprefixlengthcandifferforthesubnetsasshowninFigure19.8.
Figure19.8Three-level hierarchy inanIPv4address
IIHostaddressSubnets2and3
26bitsCD4bitsI--------------J1I I
Network prefix I I Ir-------"---------+l'1 I I
I ISubnetprefix I It+----------'----------+111 I
I
ISubnet1
26bits05bits
I I I I
I Network prefix II I
101 -II r·
I I I
I Subnetprefix I I
I'"Jrl t~
I I
I Hostaddress I
I' I
MoreLevelsofHierarchy
Thestructure ofclassless addressing doesnotrestrictthenumberofhierarchical levels.
Anorganization candividethegrantedblockofaddresses intosubblocks. Eachsub­
blockcaninturnbedividedintosmallersubblocks. Andsoon.Oneexampleofthisis
seenintheISPs.Anational ISPcandivideagrantedlargeblockintosmallerblocks
andassigneachofthemtoaregionalISP.AregionalISPcandividetheblockreceived
fromthenationalISPintosmallerblocksandassigneachonetoalocalISP.AlocalISP
candividetheblockreceived fromtheregionalISPintosmallerblocksandassigneach
onetoadifferent organization. Finally,anorganization candividethereceived block
andmakeseveralsubnetsoutofit.
AddressAllocation
Thenextissueinclassless addressing isaddressallocation. Howaretheblocksallocated?
Theultimateresponsibility ofaddressallocation isgiventoaglobalauthority calledthe
InternetCorporation forAssigned NamesandAddresses (ICANN). However, ICANN
doesnotnormally allocateaddresses toindividual organizations. Itassignsalargeblock
ofaddresses toanISP.EachISP,inturn,dividesitsassigned blockintosmallersubblocks
andgrantsthesubblocks toitscustomers. Inotherwords,anISPreceivesonelargeblock
tobedistributed toitsInternetusers.Thisiscalledaddressaggregation: manyblocksof
addresses areaggregated inoneblockandgrantedtooneISP.
Example 19.10
AnISPisgrantedablockofaddresses startingwith190.100.0.0/16 (65,536addresses). TheISP
needstodistribute theseaddresses tothreegroupsofcustomers asfollows:
a.Thefirstgrouphas64customers; eachneeds256addresses.
b.Thesecondgrouphas128customers; eachneeds128addresses.
c.Thethirdgrouphas128customers; eachneeds64addresses.
Designthesubblocks andfindouthowmanyaddresses arestillavailable aftertheseallocations.562CHAPTER 19NETWORK LAYER:LOGICALADDRESS1NG
Solution
Figure19.9showsthesituation.
Figure19.9Anexampleofaddressallocation anddistribution byanIS?
ISP
Group1: Customer 001;190.100.0.0/24
r-19_0_.1_00_.0_.0_t_o_19_0_.l_0_0._63_.2_5_5--r_ Customer 064:190.100.63.0/24
Toandfrom
the InternetGroup2:
190.100.64.0 to190.100.127.255
Group3:
190.100.128.0 to190.100.159.255
Available
190.100.160.0 to190.100.255.255Customer 001:190.100.64.0/25
Customer 128:190.100.127.128/25
Customer 001:190.100.128.0/26
Customer 128:190.100.159.192/26
1.Group1
Forthisgroup,eachcustomer needs256addresses. Thismeansthat8(log2256) bitsare
neededtodefineeachhost.Theprefixlengthisthen32- 8=24.Theaddresses are
1stCustomer:
2ndCustomer:190.100.0.0/24
190.100.1.0/24190.100.0.255/24
190.100.1.255/24
64thCustomer: 190.100.63.0/24 190.100.63.255/24
Total=64X256=16,384
2.Group2
Forthisgroup,eachcustomer needs128addresses. Thismeansthat7(10g2128)bitsare
neededtodefineeachhost.Theprefixlengthisthen32-7=25.Theaddresses are
1stCustomer: 190.100.64.0/25
2ndCustomer: 190.100.64.128/25190.100.64.127/25
190.100.64.255/25
128thCustomer: 190.100.127.128/25 190.100.127.255/25
Total=128X128=16,384
3.Group3
Forthisgroup,eachcustomer needs64addresses. Thismeansthat6(logz64)bitsareneeded
toeachhost.Theprefixlengthisthen32- 6=26.Theaddresses areSECTION 19.1IPv4ADDRESSES 563
1stCustomer:
2ndCustomer:190.100.128.0/26
190.100.128.64/26190.100.128.63/26
190.100.128.127/26
128thCustomer: 190.100.159.192/26 190.100.159.255/26
Total=128X64=8192
Numberofgrantedaddresses totheISP:65,536
Numberofallocated addresses bytheISP:40,960
Numberofavailable addresses: 24,576
Network Address Translation (NAT)
Thenumberofhomeusersandsmallbusinesses thatwanttousetheInternetisever
increasing. Inthebeginning, auserwasconnected totheInternetwithadial-upline,
whichmeansthatshewasconnected foraspecificperiodoftime.AnISPwithablockof
addresses coulddynamically assignanaddresstothisuser.Anaddresswasgiventoa
userwhenitwasneeded.Butthesituation isdifferent today.Homeusersandsmallbusi­
nessescanbeconnected byanADSLlineorcablemodem. Inaddition, manyarenot
happywithoneaddress;manyhavecreatedsmallnetworks withseveralhostsandneed
anIPaddressforeachhost.Withtheshortageofaddresses, thisisaseriousproblem.
Aquicksolutiontothisproblem iscallednetwork addresstranslation (NAT).
NATenablesausertohavealargesetofaddresses internally andoneaddress,orasmall
setofaddresses, externally. Thetrafficinsidecanusethelargeset;thetrafficoutside,the
smallset.
Toseparatetheaddresses usedinsidethehomeorbusiness andtheonesusedfor
theInternet, theInternetauthorities havereserved threesetsofaddresses asprivate
addresses, showninTable19.3.
Table19.3Addresses forprivatenetworks
Range Total
10.0.0.0 to10.255.255.255 224
172.16.0.0 to172.31.255.255 220
192.168.0.0 to192.168.255.255 216
Anyorganization canuseanaddressoutofthissetwithoutpermission fromthe
Internetauthorities. Everyone knowsthatthesereserved addresses areforprivatenet­
works.Theyareuniqueinsidetheorganization, buttheyarenotuniqueglobally. No
routerwillforwardapacketthathasoneoftheseaddresses asthedestination address.
Thesitemusthaveonlyonesingleconnection totheglobalInternetthrougharouter
thatrunstheNATsoftware. Figure19.10showsasimpleimplementation ofNAT.
AsFigure19.10shows,theprivatenetworkusesprivateaddresses. Therouterthat
connects thenetwork totheglobaladdressusesoneprivateaddressandoneglobal
address. Theprivatenetwork istransparent totherestoftheInternet; therestofthe
InternetseesonlytheNATrouterwiththeaddress200.24.5.8.564CHAPTER 19NETWORK LAYER:LOGICAL ADDRESSING
Figure19.10ANATimplementation
172.18.3.20
...172.18.3.1 172.18.3.2Siteusingprivateaddresses-----------------------------------,
I
I
I
I
II
I
INATrouter
172.18.3.30 200.24.5.8Internet
I,___________________________________ J
Address Translation
Alltheoutgoing packetsgothroughtheNATrouter,whichreplacesthesourceaddress
inthepacketwiththeglobalNATaddress.Allincoming packetsalsopassthroughthe
NATrouter,whichreplacesthedestination addressinthepacket(theNATrouterglobal
address)withtheappropriate privateaddress.Figure19.11showsanexampleofaddress
translation.
Figure19.11Addresses inaNAT
InternetSource:200.24.5.8
"-----------'-b.
Destination: 200.24.5.8Source:172.18.3.1
..---------r---b.
Destination: 172.18.3.1172.18.3.1~--------------------------1
I
I
II
I
I
I
Translation Table
Thereadermayhavenoticedthattranslating thesourceaddresses foroutgoing packets
isstraightforward. ButhowdoestheNATrouterknowthedestination address for a
packetcomingfromtheInternet? Theremaybetensorhundreds ofprivateIPaddresses,
eachbelonging toonespecifichost.TheproblemissolvediftheNATrouterhasatrans­
lationtable.
UsingOneIPAddress Initssimplestfonn,atranslation tablehasonlytwocolumns:
theprivate'addressandtheexternaladdress(destination addressofthepacket).When
theroutertranslates thesourceaddressoftheoutgoing packet,italsomakesnoteofthe
destination address-where thepacketisgoing.Whentheresponse comesbackfrom
thedestination, therouterusesthesourceaddressofthepacket(astheexternaladdress)
tofindtheprivateaddressofthepacket.Figure19.12showstheidea.Notethatthe
addresses thatarechanged(translated) areshownincolor.SECTION 19.1IPv4ADDRESSES 565
Figure19.12NATaddresstranslation
--------------------------~
Destination: 25.8.2.10 I
I
Source:172.HU.I I
I
I
I
I
IIDestination: 25.8.2.10
Source:200.24.5.g
Translation table
Private External
172.18.3.1
...25.8.2.10 ..oEt----'
•.
I
: Destination: 200.24.5.1l
ISource:25.8.2.10
I
I
I
I
I
I
------=:~=::::::::::::::=====----~.~r___---.:::.---=========-Destination: 171.18.3.1
Source:25.8.2.10
Inthisstrategy, communication mustalwaysbeinitiated bytheprivatenetwork.
TheNATmechanism described requiresthattheprivatenetwork startthecommunica­
tion.Aswewillsee,NATisusedmostlybyISPswhichassignonesingleaddresstoa
customer. Thecustomer, however, maybeamemberofaprivatenetworkthathasmany
privateaddresses. Inthiscase,communication withtheInternetisalwaysinitiatedfrom
thecustomer site,usingaclientprogram suchasHTTP,TELNET, orFTPtoaccessthe
corresponding serverprogram. Forexample, whene-mailthatoriginates fromanon­
customer siteisreceived bytheISPe-mailserver,thee-mailisstoredinthemailboxof
the.customer untilretrieved. Aprivatenetwork cannotrunaserverprogram forclients
outsideofitsnetworkifitisusingNATtechnology.
UsingaPoolofIPAddresses SincetheNATrouterhasonlyoneglobaladdress,only
oneprivatenetworkhostcanaccessthesameexternalhost.Toremovethisrestriction, the
NATrouterusesapoolofglobaladdresses. Forexample, insteadofusingonlyoneglobal
address(200.24.5.8), theNATroutercanusefouraddresses (200.24.5.8, 200.24.5.9,
200.24.5.10, and200.24.5.11). Inthiscase,fourprivatenetworkhostscancommunicate
withthesameexternalhostatthesametimebecauseeachpairofaddresses definesa
connection. However, therearestillsomedrawbacks. Inthisexample, nomorethanfour
connections canbemadetothesamedestination. Also,noprivate-network hostcan
accesstwoexternalserverprograms (e.g.,HTTPandFfP)atthesametime.
UsingBothIPAddresses andPortNumbers Toallowamany-to-many relationship
between private-network hostsandexternalserverprograms, weneedmoreinformation
inthetranslation table.Forexample, supposetwohostswithaddresses 172.18.3.1 and
172.18.3.2 insideaprivatenetwork needtoaccesstheHTTPserveronexternal host566CHAPTER 19NETWORK LAYER:LOGICAL ADDRESSING
25.8.3.2.Ifthetranslation tablehasfivecolumns, insteadoftwo,thatincludethesource
anddestination portnumbersofthetransport layerprotocol, theambiguity iseliminated.
Wediscussportnumbers inChapter23.Table19.4showsanexampleofsuchatable.
Table19.4Five-column translation table
Private Private External External Transport
Address Port Address Port Protocol
172.18.3.1 1400 25.8.3.2 80 TCP
172.18.3.2 1401 25.8.3.2 80 TCP
...... .........
Notethatwhentheresponse fromHTTPcomesback,thecombination ofsource
address(25.8.3.2) anddestination portnumber(1400)definesthe-private networkhost
towhichtheresponse shouldbedirected. Notealsothatforthistranslation towork,the
temporary portnumbers (1400and1401)mustbeunique.
NATandISP
AnISPthatservesdial-upcustomers canuseNATtechnology toconserve addresses.
Forexample, supposeanISPisgranted1000addresses, buthas100,000customers.
Eachofthecustomers isassigned aprivatenetworkaddress.TheISPtranslates eachof
the100,000sourceaddresses inoutgoing packetstooneofthe1000globaladdresses;
ittranslates theglobaldestination addressinincoming packetstothecorresponding
privateaddress.Figure19.13showsthisconcept.
Figure19.13AnISPandNAT
172.18.3.1
···
172.24.1.1
ISP
site
·••
172.30,100
19.2IPv6ADDRESSES1000
addresses
Despiteallshort-term solutions, suchasclassless addressing, Dynamic HostConfigu­
rationProtocol (DHCP), discussed inChapter21,andNAT,addressdepletion isstilla
long-term problem fortheInternet. Thisandotherproblems intheIPprotocol itself,SECTION 19.2IPv6ADDRESSES 567
suchaslackofaccommodation forreal-time audioandvideotransmission, andencryp­
tionandauthentication ofdataforsomeapplications, havebeenthemotivation forIPv6.
Inthissection,wecompare theaddressstructure ofIPv6toIPv4.InChapter20,we
discussbothprotocols.
Structure
AnIPv6addressconsistsof16bytes(octets);itis128bitslong.
AnIPv6addressis128bitslong.
Hexadecimal ColonNotation
Tomakeaddresses morereadable, IPv6specifieshexadecimal colonnotation. Inthisnota­
tion,128bitsisdividedintoeightsections,each2bytesinlength.Twobytesinhexadecimal
notationrequiresfourhexadecimal digits.Therefore, theaddressconsistsof32hexadecimal
digits,witheveryfourdigitsseparated byacolon,asshowninFigure19.14.
Figure19.14IPv6addressinbinaryandhexadecimal colonnotation
I·
1111110111101100128bits=16bytes=32hexdigits
1111111111111111
IFDECI:I0074I:I0000I:t0000I:I0000I:IBOFFI:I0000I:IFFFFI
Abbreviation
Although theIPaddress,eveninhexadecimal format,isverylong,manyofthedigitsare
zer9s.Inthiscase,wecanabbreviate theaddress.Theleadingzerosofasection(four
digitsbetween twocolons)canbeomitted. Onlytheleadingzeroscanbedropped, not
thetrailingzeros(seeFigure19.15).
Figure19.15Abbreviated IPv6addresses
Original
FDEC: 0074:0000:0000:0000:BOFF:0000:FFFO
Abbreviated FDEC: 74:0:0:0:BOFF:0:FFFO568CHAPTER 19NETWORK LAYER:LOGICAL ADDRESSING
Usingthisformofabbreviation, 0074canbewrittenas74,OOOFasF,and0000asO.
Notethat3210cannotbeabbreviated. Furtherabbreviations arepossible ifthereare
consecutive sectionsconsisting ofzerosonly.Wecanremovethezerosaltogether and
replacethemwithadoublesemicolon. Notethatthistypeofabbreviation isallowed
onlyonceperaddress.Iftherearetworunsofzerosections, onlyoneofthemcanbe
abbreviated. Reexpansion oftheabbreviated addressisverysimple:Aligntheunabbre­
viatedportionsandinsertzerostogettheoriginalexpanded address.
Example 19.11
Expandtheaddress0:15::1:12:1213 toitsoriginal.
Solution
Wefirstneedtoaligntheleftsideofthedoublecolontotheleftoftheoriginalpatternandthe
rightsideofthedoublecolontotherightoftheoriginalpatterntofindnowmanyOsweneedto
replacethedoublecolon.
xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx
0:15: l:12:1213
Thismeansthattheoriginaladdressis
0000:0015:0000:0000:0000:0001 :0012:1213
Address Space
IPv6hasamuchlargeraddressspace;2128addresses areavailable. Thedesigners of
IPv6dividedtheaddressintoseveralcategories. Afewleftmost bits,calledthetype
prefix,ineachaddressdefineitscategory. Thetypeprefixisvariableinlength,butitis
designed suchthatnocodeisidentical tothefirstpartofanyothercode.Inthisway,
thereisnoambiguity; whenanaddressisgiven,thetypeprefixcaneasilybedeter­
mined.Table19.5showstheprefixforeachtypeofaddress.Thethirdcolumnshows
thefractionofeachtypeofaddressrelativetothewholeaddressspace.
Table19.5Typeprefixesfor1Pv6addresses
TypePrefix Type Fraction
00000000 Reserved 1/256
00000001 Unassigned 1/256
0000001 ISOnetworkaddresses 1/128
0000010 IPX(Novell)networkaddresses 1/128
0000011 Unassigned 1/128
00001 Unassigned 1/32
0001 Reserved 1/16
001 Reserved 1/8
010 Provider-based unicastaddresses 1/8SECTION 19.2IPv6ADDRESSES 569
Table19.5TypeprefixesforIPv6addresses (continued)
TypePrefix Type Fraction
011 Unassigned 1/8
100 Geographic-based unicastaddresses 1/8
101 Unassigned 1/8
110 Unassigned 1/8
1110 Unassigned 1116
11110 Unassigned 1132
111110 Unassigned 1/64
1111110 Unassigned 1/128
11111110aUnassigned 1/512
1111111010 Linklocaladdresses 111024
1111111011Sitelocaladdresses 1/1024
11111111 Multicast addresses 1/256
UnicastAddresses
Aunicastaddressdefinesasinglecomputer. Thepacketsenttoaunicastaddressmust
bedelivered tothatspecificcomputer. IPv6definestwotypesofunicastaddresses: geo­
graphically basedandprovider-based. Wediscussthesecondtypehere;thefirsttypeis
leftforfuturedefinition. Theprovider-based addressisgenerally usedbyanormalhost
asaunicastaddress.TheaddressformatisshowninFigure19.16.
Figure19.16Prefixesforprovider-based unicastaddress
Subnetprefix
Subscriber prefix
-Provider prefix
151Provider SubscribeI: Snbnet NodeI identifier idenfifiiii: identifier identifier
~
INTERNIC 11000
RIPNIC 01000
APNIC 10100
Registry
Fieldsfortheprovider-based addressareasfollows:
oTypeidentifier. This3-bitfielddefinestheaddressasaprovider-base.d address.
oRegistry identifier. This5-bitfieldindicates theagencythathasregistered the
address. Currently threeregistrycentershavebeendefined. INTERNIC (code
11000)isthecenterforNorthAmerica; RIPNIC (code01000)isthecenterfor
European registration; andAPNIC(code10100)isforAsianandPacificcountries.570CHAPTER 19NETWORK LAYER:LOGICAL ADDRESSING
oProvider identifier. Thisvariable-length fieldidentifies theprovider forInternet
access(suchasanISP).A16-bitlengthisrecommended forthisfield.
oSubscriber identifier. Whenanorganization subscribes totheInternetthrougha
provider, itisassigned asubscriber identification. A24-bitlengthisrecommended
forthisfield.
oSubnetidentifier. Eachsubscriber canhavemanydifferent subnetworks, andeach
subnetwork canhaveanidentifier. Thesubnetidentifier definesaspecificsubnetwork
undertheterritoryofthesubscriber. A32-bitlengthisrecommended forthisfield.
oNodeidentifier. Thelastfielddefinestheidentityofthenodeconnected toasubnet.
Alengthof48bitsisrecommended forthisfieldtomakeitcompatible withthe
48-bitlink(physical) addressusedbyEthernet. Inthefuture,thislinkaddresswill
probably bethesameasthenodephysicaladdress.
Multicast Addresses
Multicast addresses areusedtodefineagroupofhostsinsteadofjustone.Apacketsent
toamulticast addressmustbedelivered toeachmemberofthegroup.Figure19.17
showstheformatofamulticast address.
Figure19.17Multicast addressinIPv6
8bits
0000
00014 4
Reserved
Nodelocal
Linklocal
Sitelocal
Organizational
Global
Reserved112bits
GroupID
Thesecondfieldisaflagthatdefinesthegroupaddressaseitherpermanent or
transient. Apermanent groupaddressisdefinedbytheInternetauthorities andcanbe
accessed atalltimes.Atransient group address,ontheotherhand,isusedonlytempo­
rarily.Systems engaged inateleconference, forexample, canuseatransient group
address.Thethirdfielddefinesthescopeofthegroupaddress.Manydifferent scopes
havebeendefined,asshowninFigure19.17.
AllycastAddresses
IPv6alsodefinesanycastaddresses. Ananycastaddress, likeamulticast address,also
definesagroupofnodes.However, apacketdestinedforananycastaddressisdelivered
toonlyoneofthemembers oftheanycastgroup,thenearestone(theonewiththeshortest
route).Although thedefinition ofananycastaddressisstilldebatable, onepossibleuse
istoassignananycastaddresstoallroutersofanISPthatcoversalargelogicalareain
theInternet. TheroutersoutsidetheISPdeliverapacketdestined fortheISPtothe
nearestISProuter.Noblockisassigned foranycastaddresses.SECTION 19.2IPv6ADDRESSES 571
Reserved Addresses
Another category intheaddressspaceisthereserved address. Theseaddresses start
witheightOs(typeprefixis00000000). Afewsubcategories aredefinedinthiscategory,
asshowninFigure19.18.
Figure19.18Reserved addresses inIPv6
8bits 120bits
l_oooooo oo_IIooo A_ll_os ......1a.Unspecified
8bits 120bits
l_oo_oo_DOO_0
oioC11.- °_0_00_0_00_0_00_0_00_0_00_0_",_",_"'_",_,,,_,°_00_0_00_0_00_0_1 1b.Loopback
8bits 88bits 32bits
32bits 16bits 72bitsl_o_oDOO_DOO_II.- A_I_1o_s ...I.....I_'Pv_4_'<t_ddr_,_es_s,......1c.Compatible
8bits
l_o_oooooo__o...II.-A_ll_O_S""'-_Al_Il_S __I...,...IPV'_4...<t_ddre_s_s_Id.Mapped
Anunspecified address isusedwhenahostdoesnotknowitsownaddressand
sendsaninquirytofinditsaddress.Aloopback addressisusedbyahosttotestitself
withoutgoingintothenetwork. Acompatible address isusedduringthetransition
fromIPv4toIPv6(seeChapter20).Itisusedwhenacomputer usingIPv6wantsto
sendamessage toanothercomputer usingIPv6,butthemessage needstopassthrough
apartofthenetworkthatstilloperatesinIPv4.Amapped addressisalsousedduring
transition. However, itisusedwhenacomputer thathasmigrated toIPv6wantstosend
apackettoacomputer stillusingIPv4.
LocalAddresses.
Theseaddresses areusedwhenanorganization wantstouseIPv6protocolwithoutbeing
connected totheglobalInternet.Inotherwords,theyprovideaddressing forprivatenet­
works.Nobodyoutsidetheorganization cansendamessage tothenodesusingthese
addresses. Twotypesofaddresses aredefinedforthispurpose, asshowninFigure19.19.
Figure19.19Localaddresses inIPv6
10bits 70bits
AllOs48bits
NodeaddressIa.Linklocal
38bits
AllOs b.Sitelocal572CHAPTER 19NETWORK LAYER:LOGICAL ADDRESSING
Alinklocaladdressisusedinanisolatedsubnet;asitelocaladdressisusedin
anisolatedsitewithseveralsubnets.
19.3RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
booksandsites.Theitemsinbrackets [...]refertothereference listattheendof
thetext.
Books
IPv4addresses arediscussed inChapters 4and5of[For06],Chapter3of[Ste94],Sec­
tion4.1of[PD03],Chapter18of[Sta04],andSection5.6of[TlUl03]. IPv6addresses
arediscussed inSection27.1of[For06]andChapter8of[Los04].Agooddiscussion of
NATcanbefoundin[DutOl].
Sites
owww.ietf.org/rfc.html Information aboutRFCs
RFCs
Adiscussion ofIPv4addresses canbefoundinmostoftheRFCsrelatedtotheIPv4
protocol:
760,781,791,815,1025,1063,1071,1141,1190, 1191,1624,2113
Adiscussion of1Pv6addresses canbefoundinmostoftheRFCsrelatedtoIPv6protocol:
1365,1550,1678,1680,1682,1683,1686,1688,1726, 1752,1826,1883,1884,1886,1887,
1955,2080,2373,2452,2463,2465,2466,2472,2492,2545,2590
Adiscussion ofNATcanbefoundin
1361,2663,2694
19.4KEYTERMS
addressaggregation
addressspace
anycastaddress
binarynotation
classAaddress
classBaddressclassCaddress
classDaddress
classEaddress
classfuladdressing
classless addressing
classless interdomain routing(CIDR)compatible address
dotted-decimal notation
defaultmask
hexadecimal colonnotation
hostid
IPaddress
IPv4address
IPv6address
linklocaladdress
mappedaddress
mask
multicast address
netid
networkaddressSECTION 19.5SUMMARY 573
networkaddresstranslation
(NAT)
prefix
reserved address
sitelocaladdress
subnet
subnetmask
subnetting
suffix
supernet
supernet mask
supernetting
unicastaddress
unspecified address
19.5SUMMARY
oAtthenetworklayer,aglobalidentification systemthatuniquely identifies every
hostandrouterisnecessary fordeliveryofapacketfromhosttohost.
oAnIPv4addressis32bitslonganduniquely anduniversally definesahostor
routerontheInternet.
oInclassfuladdressing, theportionoftheIPaddressthatidentifies thenetworkis
calledthenetid.
oInclassfuladdressing, theportionoftheIPaddressthatidentifies thehostorrouter
onthenetworkiscalledthehostid.
oAnIPaddressdefinesadevice'sconnection toanetwork.
o~TherearefiveclassesinIPv4addresses. ClassesA,B,and Cdifferinthenumber
ofhostsallowedpernetwork. ClassDisformulticasting andClassEisreserved.
oTheclassofanaddressiseasilydetermined byexamination ofthefirstbyte.
oAddresses inclassesA,B,orCaremostlyusedforunicastcommunication.
oAddresses inclassDareusedformulticast communication.
oSubnetting dividesonelargenetworkintoseveralsmallerones,addinganinterme-
diatelevelofhierarchy inIPaddressing.
oSupernetting combines severalnetworks intoonelargeone.
oInclassless addressing, wecandividetheaddressspaceintovariable-length blocks.
oTherearethreerestrictions inclassless addressing:
a.Thenumberofaddresses needstobeapowerof2.
b.Themaskneedstobeincluded intheaddresstodefinetheblock.
c.Thestartingaddressmustbedivisible bythenumberofaddresses intheblock.
oThemaskinclasslessaddressing isexpressed astheprefixlength(In)inCIDRnotation.574CHAPTER 19NETWORK LAYER:LOGICAL ADDRESSING
oTofindthefirstaddressinablock,wesettherightmost 32-nbitstoO.
oTofindthenumberofaddresses intheblock,wecalculate 232-n,wherenisthe
prefixlength.
oTofindthelastaddressintheblock,wesettherightmost 32-nbitstoO.
oSubnetting increases thevalueofn.
oTheglobalauthority for address allocation isICANN. ICANNnormally grants
largeblocksofaddresses toISPs,whichintumgrantsmallsubblocks toindividual
customers.
oIPv6addresses usehexadecimal colonnotationwithabbreviation methodsavailable.
oTherearethreetypesofaddresses inIPv6:unicast,anycast,andmulticast.
oInanIPv6address,thevariabletypeprefixfielddefinestheaddresstypeorpurpose.
19.6PRACTICE SET
ReviewQuestions
1.WhatisthenumberofbitsinanIPv4address? Whatisthenumberofbitsinan
IPv6address?
2.WhatisdotteddecimalnotationinIPv4addressing? Whatisthenumberofbytes
inanIPv4addressrepresented indotteddecimalnotation? Whatishexadecimal
notationinIPv6addressing? WhatisthenumberofdigitsinanIPv6addressrepre­
sentedinhexadecimal notation?
3.Whatarethedifferences betweenclassfuladdressing andclasslessaddressing inIPv4?
4.Listtheclassesinclassfuladdressing anddefinetheapplication ofeachclass(unicast,
multicast, broadcast, orreserve).
5.Explainwhymostoftheaddresses inclassAarewasted.Explainwhyamedium-size
orlarge-size corporation doesnotwantablockofclassCaddresses.
6.WhatisamaskinIPv4addressing? WhatisadefaultmaskinIPv4addressing?
7.Whatisthenetworkaddressinablockofaddresses? Howcanwefindthenetwork
addressifoneoftheaddresses inablockisgiven?
8.Brieflydefinesubnetting andsupemetting. Howdothesubnetmaskandsupemet
maskdifferfromadefaultmaskinclassfuladdressing?
9.Howcanwedistinguish amulticast addressinIPv4addressing? Howcanwedoso
inIPv6addressing?
10.WhatisNAT?HowcanNAThelpinaddressdepletion?
Exercises
II.Whatistheaddressspaceineachofthefollowing systems?
a.Asystemwith8-bitaddresses
b.Asystemwith16-bitaddresses
c.Asystemwith64-bitaddressesSECTION 19.6PRACTICE SET575
12.Anaddressspacehasatotalof1024addresses. Howmanybitsareneededtorep­
resentanaddress?
13.Anaddressspaceusesthethreesymbols 0,1,and2torepresent addresses.
Ifeachaddressismadeof10symbols, howmanyaddresses areavailable inthis
system?
14.Changethefollowing IPaddresses fromdotted-decimal notationtobinarynotation.
a.114.34.2.8
b.129.14.6.8
c.208.34.54.12
d.238.34.2.1
15.Changethefollowing IPaddresses frombinarynotationtodotted-decimal notation.
a.01111111 11110000 01100111 01111101
b.10101111 11000000 11111000 00011101
c.11011111 10110000 00011111 01011101
d.11101111 11110111 11000111 00011101
16.Findtheclassofthefollowing IPaddresses.
a.208.34.54.12
b.238.34.2.1
c.114.34.2.8
d.129.14.6.8
17.Findtheclassofthefollowing IPaddresses.
a.11110111 11110011 10000111 11011101
b.10101111 11000000 11110000 00011101
c.11011111 10110000 00011111 01011101
d.11101111 11110111 11000111 00011101
18.Findthenetidandthehostidofthefollowing IPaddresses .
•a.114.34.2.8
b.132.56.8.6
c.208.34.54.12
19.Inablockofaddresses, weknowtheIPaddressofonehostis25.34.12.56/16.
Whatarethefirstaddress(network address)andthelastaddress(limitedbroadcast
address) inthisblock?
20.Inablockofaddresses, weknowtheIPaddressofonehostis182.44.82.16/26.
Whatarethefirstaddress(network address) andthelastaddressinthisblock?
21.Anorganization isgrantedtheblock16.0.0.0/8. Theadministrator wantstocreate
500fixed-length subnets.
a.Findthesubnetmask.
b.Findthenumberofaddresses ineachsubnet.
c.Findthefirstandlastaddresses insubnet1.
d.Findthefirstandlastaddresses insubnet500.576 CHAPTER 19NETWORK LAYER:LOGICAL ADDRESSING
22.Anorganization isgrantedtheblock130.56.0.0/16. Theadministrator wantsto
create1024subnets.
a.Findthesubnetmask.
b.Findthenumberofaddresses ineachsubnet.
c.Findthefirstandlastaddresses insubnet1.
d.Findthefirstandlastaddresses insubnet1024.
23.Anorganization isgrantedtheblock211.17.180.0/24. Theadministrator wantsto
create32subnets.
a.Findthesubnetmask.
b.Findthenumberofaddresses ineachsubnet.
c.Findthefirstandlastaddresses insubnet1.
d.Findthefirstandlastaddresses insubnet32.
24.Writethefollowing masksinslashnotation(In).
a.255.255.255.0
b.255.0.0.0
c.255.255.224.0
d.255.255.240.0
25.Findtherangeofaddresses inthefollowing blocks.
a.123.56.77.32/29
b.200.17.21.128/27
c.17.34.16.0/23
d.180.34.64.64/30
26.AnISPisgrantedablockofaddresses startingwith150.80.0.0/16. TheISPwants
todistribute theseblocksto2600customers asfollows.
a.Thefirstgrouphas200medium-size businesses; eachneeds128addresses.
b.Thesecondgrouphas400smallbusinesses; eachneeds16addresses.
c.Thethirdgrouphas2000households; eachneeds4addresses.
Designthesubblocks andgivetheslashnotationforeachsubblock. Findouthow
manyaddresses arestillavailable aftertheseallocations.
27.AnISPisgrantedablockofaddresses startingwith120.60.4.0/22. TheISP
wantstodistribute theseblocksto100organizations witheachorganization
receiving justeightaddresses. Designthesubblocks andgivetheslashnotation
foreachsubblock. Findouthowmanyaddresses arestillavailable afterthese
allocations.
28.AnISPhasablockof1024addresses. Itneedstodividetheaddresses among
1024customers. Doesitneedsubnetting? Explainyouranswer.
29.Showtheshortestformofthefollowing addresses.
a.2340:lABC:119A:AOOO:0000:0000:0000:0000
b.OOOO:OOAA:OOOO:OOOO:OOOO:OOOO: 119A:A231
c.2340:0000:0000:0000:0000: 119A:AOO1:0000
d.0000:0000:0000:2340:0000:0000:0000:0000SECTION 19.6PRACTICE SET577
30.Showtheoriginal(unabbreviated) formofthefollowing addresses.
a.0::0
b.O:AA::O
c.0:1234::3
d.123::1:2
31.Whatisthetypeofeachofthefollowing addresses?
a.FE80::12
b.FECO::24A2
c.FF02::0
d.0::01
32.Whatisthetypeofeachofthefollowing addresses?
a.0::0
b.0::FFFF:O:O
c.582F:1234::2222
d.4821::14:22
e.54EF::A234:2
33.Showtheprovider prefix(inhexadecimal colonnotation) ofanaddressassigned
toasubscriber ifitisregistered intheUnitedStateswithABC1astheprovider
identification.
34.Showinhexadecimal colon notation theIPv6address
a.Compatible totheIPv4address129.6.12.34
b.MappedtotheIPv4address129.6.12.34
35.Showinhexadecimal colonnotation
a.Thelinklocaladdressinwhichthenodeidentifier is0::123/48
b.Thesitelocaladdressinwhichthenodeidentifier is0::123/48
36.Showinhexadecimal colonnotationthepermanent multicast addressusedinalink
localscope.
37.•Ahosthastheaddress581E:1456:2314:ABCD:: 1211.Ifthenodeidentification is
48bits,findtheaddressofthesubnettowhichthehostisattached.
38.Asitewith200subnetshastheclassBaddressof132.45.0.0. Thesiterecently
migrated toIPv6withthesubscriber prefix581E:1456:2314::ABCD/80. Design
thesubnetsanddefinethesubnetaddresses, usingasubnetidentifier of32bits.
Research Activities
39.Findtheblockofaddresses assigned toyourorganization orinstitution.
40.IfyouareusinganISPtoconnectfromyourhometotheInternet, findthenameof
theISPandtheblockofaddresses assigned toit.
41.Somepeoplearguethatwecanconsider thewholeaddressspaceasonesingle
blockinwhicheachrangeofaddresses isasubblock tothissingleblock.Elaborate
onthisidea.Whathappenstosubnetting ifweacceptthisconcept?
42.Isyourschoolororganization usingaclassfuladdress?Ifso,findouttheclassof
theaddress.CHAPTER 20
Network Layer:
Internet Protocol
IntheInternetmodel,themainnetworkprotocol istheInternet Protocol (IP).Inthis
chapter,wefirstdiscussinternetworking andissuesrelatedtothenetworklayerprotocol
ingeneral.
WethendiscussthecurrentversionoftheInternetProtocol, version4,orIPv4.
Thisleadsustothenextgeneration ofthisprotocol, orIPv6,whichmaybecomethe
dominant protocol inthenearfuture.
Finally,wediscussthetransition strategies fromIPv4toIPv6.Somereadersmay
notetheabsenceofIPv5.IPv5isanexperimental protocol, basedmostlyontheOSI
modelthatnevermaterialized.
20.1INTERNETWORKING
Thephysical anddatalinklayersofanetwork operatelocally.Thesetwolayersare
jointlyresponsible fordatadeliveryonthenetworkfromonenodetothenext,asshown
inFigure20.1.
Thisinternetwork ismadeoffivenetworks: fourLANsandoneWAN.IfhostA
needstosendadatapackettohostD,thepacketneedstogofirstfromAtoRl(aswitch
orrouter),thenfromRltoR3,andfinallyfromR3tohostD.Wesaythatthedatapacket
passesthroughthreelinks.Ineachlink,twophysicalandtwodatalinklayersareinvolved.
However, thereisabigproblemhere.WhendataarriveatinterfaceflofRl,how
doesRIknowthatinterfacef3istheoutgoing interface? Thereisnoprovision inthe
datalink(orphysical) layertohelpRlmaketherightdecision. Theframedoesnot
carryanyroutinginformation either.Theframecontains theMACaddressofAasthe
sourceandtheMACaddressofRlasthedestination. ForaLANoraWAN,delivery
meanscarryingtheframethroughonelink,andnotbeyond.
NeedforNetwork Layer
Tosolvetheproblemofdeliverythroughseverallinks,thenetworklayer(ortheinter­
networklayer,asitissometimes called)wasdesigned. Thenetworklayerisresponsible
forhost-to-host delivery andforroutingthepacketsthroughtheroutersorswitches.
Figure20.2showsthesameinternetwork withanetworklayeradded.
579580CHAPTER 20NETWORK LAYER:INTERNET PROTOCOL
Figure20.1Linksbetweentwohosts
A 51 53 0
Datalink~ffi ~~
 ~Datalink
Physical Physical------------Hop-to-hop Hop-to-hop Hop-to-hop
delivery delivery delivery
LANLAN
Link3 0.-------..~...,5352f2fl--.lliii...-----<.,----WANf3f2, fl-'~~~
I --....,. ....
I
I
I Link2L •
Figure20.2Network layerinaninternetwork
A
N',,"",k~
D,",""k
Physical51 53 D
~~
~Network
Datalink
_____ __ Physical
-----------------------------.Host-to-host pathLAN
f2f252
fl
WAN
Figure20.3showsthegeneralideaofthefunctionality ofthenetwork layerata
source,atarouter,andatthedestination. Thenetworklayeratthesourceisresponsible
forcreatingapacketfromthedatacomingfromanotherprotocol (suchasatransport
layerprotocol oraroutingprotocol). Theheaderofthepacketcontains, amongother
information, thelogicaladdresses ofthesourceanddestination. Thenetwork layeris
responsible forchecking itsroutingtabletofindtheroutinginformation (suchasthe
outgoing interface ofthepacketorthephysical addressofthenextnode).Ifthepacket
istoolarge,thepacketisfragmented (fragmentation isdiscussed laterinthischapter).SECTION 20.11NTERNETWORKING S8t
Figure20.3Network layeratthesource,router,anddestination
____________ ...1
Network layerDatato
anotherprotocol
Destination
~----------- -----
Network layerDatafrom
anotherprotocol
Todata
linklayerFromdata
linklayer
a.Network layer atsource b.Network layeratdestination
Router
-----------~----------Routing
table
lP
packet
Network layer
Fromdata Todata .
linklayer linklayer
c.Network layeratarouter
Thenetwork layerattheswitchorrouterisresponsible forroutingthepacket.
Whenapacketarrives,therouterorswitchconsultsitsroutingtableandfindstheinter­
facefromwhichthepacketmustbesent.Thepacket,aftersomechangesintheheader,
withtheroutinginfonnation ispassedtothedatalinklayeragain.
•Thenetworklayeratthedestination isresponsible foraddressverification; itmakes
surethatthedestination addressonthepacketisthesameastheaddressofthehost.If
thepacketisafragment, thenetworklayerwaitsuntilallfragments havearrived,and
thenreassembles themanddeliversthereassembled packettothetransport layer.
Internet asaDatagram Network
TheInternet,atthenetworklayer,isapacket-switched network. Wediscussed switching
inChapter8.Wesaidthat,ingeneral,switching canbedividedintothreebroadcatego­
ries:circuitswitching, packetswitching, andmessage switching. Packet switching uses
eitherthevirtualcircuitapproach orthedatagram approach.
TheInternethaschosenthedatagram approach toswitching inthenetworklayer.
Itusestheuniversal addresses definedinthenetwork layertoroutepacketsfromthe
sourcetothedestination.
Switching atthenetworklayerintheInternetusesthedatagram approach topacketswitching.582 CHAPTER 20NETWORK LAYER:INTERNET PROTOCOL
Internet asaConnectionless Network
Delivery ofapacketcanbeaccomplished byusingeitheraconnection-oriented ora
connectionless network service.Inaconnection-oriented service,thesourcefirst
makesaconnection withthedestination beforesendingapacket.Whentheconnection
isestablished, asequence ofpacketsfromthesamesourcetothesamedestination can
besentoneafteranother.Inthiscase,thereisarelationship betweenpackets.Theyare
sentonthesamepathinsequential order.Apacketislogically connected tothepacket
traveling beforeitandtothepackettraveling afterit.Whenallpacketsofamessage
havebeendelivered, theconnection isterminated.
Inaconnection-oriented protocol, thedecision abouttherouteofasequence of
packetswiththesamesourceanddestination addresses canbemadeonlyonce,when
theconnection isestablished. Switches donotrecalculate therouteforeachindividual
packet.Thistypeofserviceisusedinavirtual-circuit approacH. topacketswitching
suchasinFrameRelayandATM.
Inconneetionless service,thenetworklayerprotocoltreatseachpacketindepen­
dently,witheachpackethavingnorelationship toanyotherpacket.Thepacketsina
messagemayormaynottravelthesamepathtotheirdestination. Thistypeofservice
isusedinthedatagram approach topacketswitching. TheInternethaschosenthistype
ofserviceatthenetworklayer.
ThereasonforthisdecisionisthattheInternetismadeofsomanyheterogeneous
networks thatitisalmostimpossible tocreateaconnection fromthesourcetothe
destination withoutknowing thenatureofthenetworks inadvance.
Communication atthenetworklayerintheInternetisconnectionless.
20.2IPv4
TheInternetProtocol version4(IPv4)isthedeliverymechanism usedbytheTCP/IP
protocols. Figure20.4showsthepositionofIPv4inthesuite.
Figure20.4PositionofIPv4inTCPIIPprotocol suite
APPliC~~~~~I~~ITFTPI~ISNMPI••• I BOOTPII
Tran~;;= 11 SCTPII TCPkI UDPII
I~IIGMP~ilICMP
~II
~IPv~4~I
~I~I
N"~:~ ..'--. ----'IARPII~J
DatalinkI I
layer~~~ Underlying LANorWAN
PhysicalI technology I
layer
1-_-:..'::================:-_.....1SECTION 20.2IPv4 583
IPv4isanunreliable andconnectionless datagram protocol-a best-effort delivery
service.Thetermbest-effort meansthatIPv4provides noerrorcontrolorflowcontrol
(exceptforerrordetection ontheheader).IPv4assumestheunreliability oftheunder­
lyinglayers and doesitsbesttogetatransmission throughtoitsdestination, butwith
noguarantees.
Ifreliability isimportant, IPv4mustbepairedwithareliableprotocolsuchasTCP.
Anexampleofamorecommonly understood best-effort deliveryserviceisthepost
office.Thepostofficedoesitsbesttodeliverthemailbutdoesnotalwayssucceed.If
anunregistered letterislost,itisuptothesenderorwould-be recipient todiscoverthe
lossandrectifytheproblem. Thepostofficeitselfdoesnotkeeptrackofeveryletter
andcannotnotifyasenderoflossordamage.
IPv4isalsoaconnectionless protocolforapacket-switching networkthatusesthe
datagram approach (seeChapter8).Thismeansthateachdatagram ishandledindepen­
dently,andeachdatagram canfollowadifferent routetothedestination. Thisimplies
thatdatagrams sentbythesamesourcetothesamedestination couldarriveoutof
order.Also,somecouldbelostorcorrupted duringtransmission. Again,IPv4relieson
ahigher-level protocoltotakecareofalltheseproblems.
Datagram
PacketsintheIPv4layerarecalleddatagrams. Figure20.5showstheIPv4datagram
format.
Figure20.5IPv4datagramfannat
:20-60bytes
"I
HeMerIDataI -----VER
IHLENIService Totallength
4bits 4bits 8bits 16bits
Identification FlagsIFragmentation offset
16bits 3bits 13bits
Timetolive
IProtocol Headerchecksum
8bits 8bits 16bits
SourceIPaddress
Destination IPaddress
Option
I· 32bits -I
Adatagram isavariable-length packetconsisting oftwoparts:headeranddata.
Theheaderis20to60bytesinlengthandcontainsinformation essentialtoroutingand584CHAPTER 20NETWORK LAYER:INTERNET PROTOCOL
delivery.Itiscustomary inTCP/IPtoshowtheheaderin4-bytesections. Abrief
description ofeachfieldisinorder.
oVersion(VER).This4-bitfielddefinestheversionoftheIPv4protocol. Currently
theversionis4.However, version6(orIPng)maytotallyreplaceversion4inthe
future.ThisfieldtellstheIPv4softwarerunningintheprocessing machinethatthe
datagram hastheformatofversion4.Allfieldsmustbeinterpreted asspecified
inthefourthversionoftheprotocol.Ifthemachineisusingsomeotherversionof
IPv4,thedatagram isdiscarded ratherthaninterpreted incorrectly.
oHeaderlength(HLEN). This4-bitfielddefinesthetotallengthofthedatagram
headerin4-bytewords.Thisfieldisneededbecause thelengthoftheheader
isvariable(between 20and60bytes).Whentherearenooptions,theheaderlength
is20bytes,andthevalueofthisfieldis5(5x 4=20).Whentheoptionfieldis
atitsmaximum size,thevalueofthisfieldis15(15x 4=60).
oServices. IETFhaschangedtheinterpretation andnameofthis8-bitfield.This
field,previously calledservicetype,isnowcalleddifferentiated services. Weshow
bothinterpretations inFigure20.6.
Figure20.6Servicetypeordifferentiated services
D:Minimize delay R:Maximize reliability
T:Maximize throughput C:Minimize cost
Precedence TOSbits
ServicetypeCodepoint
Differentiated services
1.ServiceType
Inthisinterpretation, thefirst3bitsarecalledprecedence bits.Thenext4bitsare
calledtypeofservice(TOS)bits,andthelastbitisnotused.
a.Precedence isa3-bitsubfieldrangingfrom0(000inbinary)to7(111inbinary).
Theprecedence definesthepriorityofthedatagram inissuessuchascongestion.
Ifarouteriscongested andneedstodiscardsomedatagrams, thosedatagrams
withlowestprecedence arediscarded first.Somedatagrams intheInternetare
moreimportant thanothers.Forexample, adatagram usedfornetworkmanage­
mentismuchmoreurgentand important thanadatagram containing optional
information foragroup.
Theprecedence subfieldwaspartofversion4,butneverused.
b.TOSbitsisa4-bitsubfieldwitheachbithavingaspecialmeaning. Although a
bitcanbeeither0or1,oneandonlyoneofthebitscanhavethevalueof1in
eachdatagram. Thebitpatternsandtheirinterpretations aregiveninTable20.1.
Withonly1bitsetatatime,wecanhavefivedifferenttypesofservices.SECTION 20.2IPv4 585
Table20.1Typesofservice
TOSBits Description
0000 Normal(default)
0001 Minimize cost
0010 Maximize reliability
0100 Maximize throughput
1000 Minimize delay
Application programs canrequestaspecifictypeofservice.Thedefaultsforsome
applications areshowninTable20.2.
Table20.2Defaulttypesofservice
Protocol TOSBits Description
ICMP 0000 Normal
BOOTP 0000 Normal
NNTP 0001 Minimize cost
IGP 0010 Maximize reliability
SNMP 0010 Maximize reliability
TELNET 1000 Minimize delay
FTP(data) 0100 Maximize throughput
FTP(control) 1000 Minimize delay
TFTP 1000 Minimize delay
SMTP(command) 1000 Minimize delay
SMTP(data) 0100 Maximize throughput
DNS(UDPquery) 1000 Minimize delay
DNS(TCPquery) 0000 Normal
DNS(zone) 0100 Maximize throughput
ItisclearfromTable20.2thatinteractive activities, activities requiring immediate
attention, andactivities requiring immediate response needminimum delay.Those
activities thatsendbulkdatarequiremaximum throughput. Management activities
needmaximum reliability. Background activities needminimum cost.
2.Differentiated Services
Inthisinterpretation, thefirst6bitsmakeupthecodepoint subfield,andthelast2bits
arenotused.Thecodepoint subfieldcanbeusedintwodifferentways.
a.Whenthe3rightmost bitsareOs,the3leftmostbitsareinterpreted thesameasthe
precedence bitsintheservicetypeinterpretation. Inotherwords,itiscompatible
withtheoldinterpretation.586 CHAPTER 20NE1WORK LAYER:INTERNET PROTOCOL
b.Whenthe3rightmost bitsarenotallOs,the6bitsdefine64servicesbasedonthe
priorityassignment bytheInternetorlocalauthorities according toTable20.3.The
firstcategorycontains32servicetypes;thesecondandthethirdeachcontain16.
Thefirstcategory(numbers 0,2,4,...,62)isassignedbytheInternetauthorities
(IETF).Thesecondcategory(3,7,11, 15, ,63)canbeusedbylocalauthorities
(organizations). Thethirdcategory(1,5,9,,61)istemporary andcanbeused
forexperimental purposes. Notethatthenumbersarenotcontiguous. Iftheywere,
thefirstcategorywouldrangefrom0to31,thesecondfrom32to47,andthethird
from48to63.Thiswouldbeincompatible withtheTOSinterpretation because
XXXOOO (whichincludes 0,8,16,24,32,40, 48,and56)wouldfallintoall
threecategories. Instead,inthisassignment methodalltheseservicesbelongto
category 1.Notethattheseassignments havenotyetbeenfinalized.
Table20.3Valuesforcodepoints
Category Codepoint Assigning Authority
1 XXXXXO Internet
2 XXXXll Local
3 XXXXOI Temporary orexperimental
oTotallength.ThisisaIn-bitfieldthatdefinesthetotallength(headerplusdata)
oftheIPv4datagram inbytes.Tofindthelengthofthedatacomingfromtheupper
layer,subtracttheheaderlengthfromthetotallength.Theheaderlengthcanbe
foundbymultiplying thevalueintheHLENfieldby4.
Lengthofdata=totallength-headerlength
Sincethefieldlengthis16bits,thetotallengthoftheIPv4datagram islimitedto
65,535(216-1)bytes,ofwhich20to60bytesaretheheaderandtherestisdata
fromtheupperlayer.
Thetotallengthfielddefinesthetotallengthofthedatagram including theheader.
Thoughasizeof65,535bytesmightseemlarge,thesizeoftheIPv4datagram
mayincrease inthenearfutureastheunderlying technologies allowevenmore
throughput (greaterbandwidth).
Whenwediscussfragmentation inthenextsection,wewillseethatsomephys­
icalnetworks arenotabletoencapsulate adatagram of65,535bytesintheirframes.
Thedatagram mustbefragmented tobeabletopassthroughthosenetworks.
Onemayaskwhyweneedthisfieldanyway.Whenamachine (routerorhost)
receives aframe,itdropstheheaderandthetrailer,leavingthedatagram. Why
includeanextrafieldthatisnotneeded? Theansweristhatinmanycaseswe
reallydonotneedthevalueinthisfield.However, thereareoccasions inwhichtheSECTION 20.2IPv4 587
datagram isnottheonlythingencapsulated inaframe;itmaybethatpaddinghas
beenadded.Forexample, theEthernet protocol hasaminimum andmaximum
restriction onthesizeofdatathatcanbeencapsulated inaframe(46to1500bytes).
IfthesizeofanIPv4datagram islessthan46bytes,somepaddingwillbeaddedto
meetthisrequirement. Inthiscase,whenamachine decapsulates thedatagram, it
needstocheckthetotallengthfieldtodetermine howmuchisreallydataandhow
muchispadding(seeFigure20.7).
Figure20.7Encapsulation ofasmalldatagram inanEthernetframe
L2
HeaderLength:Minimum 46bytes
Data<46bytes IIPadding,I
IIL2
Trailer
oIdentification. Thisfieldisusedinfragmentation (discussed inthenextsection).
oFlags.Thisfieldisusedinfragmentation (discussed inthenextsection).
oFragmentation offset.Thisfieldisusedinfragmentation (discussed inthenext
section).
oTimetolive.Adatagram hasalimitedlifetimeinitstravelthroughaninternet.
Thisfieldwasoriginally designed toholdatimestamp, whichwasdecremented by
eachvisitedrouter.Thedatagram wasdiscarded whenthevaluebecamezero.How­
ever,forthisscheme,allthemachines musthavesynchronized clocksandmust
knowhowlongittakesforadatagram togofromonemachine toanother.Today,
thisfieldisusedmostlytocontrolthemaximum numberofhops(routers) visitedby
thedatagram. Whenasourcehostsendsthedatagram, itstoresanumberinthis
field.Thisvalueisapproximately 2timesthemaximum numberofroutesbetween
anytwohosts.Eachrouterthatprocesses thedatagram decrements thisnumberby1.
Ifthisvalue,afterbeingdecremented, iszero,therouterdiscardsthedatagram.
Thisfieldisneededbecauserouting tablesintheInternetcanbecomecorrupted.
Adatagram maytravelbetweentwoormoreroutersforalongtimewithouteverget­
tingdelivered tothedestination host.Thisfieldlimitsthelifetimeofadatagram.
Anotheruseofthisfieldistointentionally limitthejourneyofthepacket.For
example, ifthesourcewantstoconfinethepackettothelocalnetwork, itcanstore
1inthisfield.Whenthepacketarrivesatthefirstrouter,thisvalueisdecremented
to0,andthedatagram isdiscarded.
oProtocol. This8-bitfielddefinesthehigher-level protocolthatusestheservicesof
theIPv4layer.AnIPv4datagram canencapsulate datafromseveralhigher-level
protocols suchasTCP,UDP,ICMP,andIGMP.Thisfieldspecifies thefinaldesti­
nationprotocol towhichtheIPv4datagram isdelivered. Inotherwords,sincethe
IPv4protocol carriesdatafromdifferent otherprotocols, thevalueofthisfield
helpsthereceiving network layerknowtowhichprotocol thedatabelong(see
Figure20.8).588CHAPTER 20NETWORK lAYER:INTERNET PROTOCOL
Figure20.8Protocol fieldandencapsulated data
Transport layer
Network layer
The"aloeoftheprotoml fielddefines
towhichprotocol thedatabelong.
Thevalueofthisfieldforeachhigher-level protocol isshowninTable10.4.
Table20.4Protocol values
Value Protocol
1 ICMP
2 IGMP
6 TCP
17 UDP
89 OSPF
oChecksum. Thechecksum conceptanditscalculation arediscussed laterinthis
chapter.
oSourceaddress. This32-bitfielddefinestheIPv4addressofthesource.Thisfield
mustremainunchanged duringthetimetheIPv4datagram travelsfromthesource
hosttothedestination host.
oDestination address. This32-bitfielddefinestheIPv4addressofthedestination.
Thisfieldmustremainunchanged duringthetimetheIPv4datagram travelsfrom
thesourcehosttothedestination host.
Example 20.1
AnIPv4packethasarrivedwiththefirst8bitsasshown:
01000010
Thereceiver discards thepacket.Why?
Solution
ThereisanelTOrinthispacket.The4leftmost bits(0100)showtheversion,whichiscorrect.The
next4bits(0010)showaninvalidheaderlength(2x4=8).Theminimum numberofbytesinthe
headermustbe20.Thepackethasbeencorrupted intransmission.SECTION 20.2IPv4 589
Example 20.2
InanIPv4packet,thevalueofHLENis1000inbinary.Howmanybytesofoptionsarebeing
carriedbythispacket?
Solution
TheHLENvalueis8,whichmeansthetotalnumberofbytesintheheaderis8x4,or32bytes.
Thefirst20bytesarethebaseheader,thenext12bytesaretheoptions.
Example 20.3
InanIPv4packet,thevalueofHLENis5,andthevalueofthetotallengthfieldisOx0028.How
manybytesofdataarebeingcarriedbythispacket?
Solution
TheHLENvalueis5,whichmeansthetotalnumberofbytesintheheaderis5x4,or20bytes(no
options). Thetotallengthis40bytes,whichmeansthepacketiscarrying20bytesofdata(40-20).
Example 20.4
AnIPv4packethasarrivedwiththefirstfewhexadecimal digitsasshown.
Ox45000028000100000102 ...
Howmanyhopscanthispackettravelbeforebeingdropped? Thedatabelongtowhatupper-layer
protocol?
Solution
Tofindthetime-to-live field,weskip8bytes(16hexadecimal digits).Thetime-to-live fieldisthe
ninthbyte,whichis01.Thismeansthepacketcantravelonlyonehop.Theprotocol fieldisthe
nextbyte(02),whichmeansthattheupper-layer protocolisIGMP(seeTable20.4).
Fragmentation
Adatagram cantravelthroughdifferent networks. Eachrouterdecapsulates theIPv4
datagram fromtheframeitreceives, processes it,andthenencapsulates itinanother
frame.Theformatandsizeofthereceived framedependontheprotocol usedbythe
physical networkthroughwhichtheframehasjusttraveled. Theformatandsizeof
thesentframedependontheprotocolusedbythephysicalnetworkthroughwhichthe
frameisgoingtotravel.Forexample, ifarouterconnects aLANtoaWAN,itreceives
aframeintheLANformatandsendsaframeintheWANformat.
Maximum Transfer Unit(MTU)
Eachdatalinklayerprotocolhasitsownframeformatinmostprotocols. Oneofthe
fieldsdefinedintheformatisthemaximum sizeofthedatafield.Inotherwords,when
adatagram isencapsulated inaframe, the totalsizeofthedatagram mustbelessthan
thismaximum size,whichisdefinedbytherestrictions imposed bythehardware and
softwareusedinthenetwork(seeFigure20.9).
ThevalueoftheMTUdependsonthephysicalnetworkprotocol. Table20.5shows
thevaluesforsomeprotocols.590CHAPTER 20NETWORK LAYER:INTERNET PROTOCOL
Figure20.9Maximum transferunit(MTU)
IPdatagtam
.". M1lh ...
":Maximum li~gthofdatatomiencapsulated~a' frame
Frame
Table20.5MTUsforsomenetworks
Protocol MTU
Hyperchannel 65,535
TokenRing(16Mbps) 17,914
TokenRing(4Mbps) 4,464
FDDI 4,352
Ethernet 1,500
X.25 576
PPP 296
TomaketheIPv4protocol independent ofthephysical network, thedesigners
decidedtomakethemaximum lengthoftheIPv4datagram equalto65,535bytes.This
makestransmission moreefficientifweuseaprotocol withanMTUofthissize.How­
ever,forotherphysical networks, wemustdividethedatagram tomakeitpossibleto
passthroughthesenetworks. Thisiscalledfragmentation.
Thesourceusuallydoesnotfragment theIPv4packet.Thetransport layerwill
insteadsegment thedataintoasizethatcanbeaccommodated byIPv4andthedata
linklayerinuse.
Whenadatagram isfragmented, eachfragment hasitsownheaderwithmostof
thefieldsrepeated, butwithsomechanged. Afragmented datagram mayitselfbefrag­
mentedifitencounters anetworkwithanevensmallerMTU.Inotherwords,adata­
gramcanbefragmented severaltimesbeforeitreachesthefinaldestination.
InIPv4,adatagram canbefragmented bythesourcehostoranyrouterinthepath
although thereisatendency tolimitfragmentation onlyatthesource.Thereassembly of
thedatagram, however, isdoneonlybythedestination hostbecauseeachfragment
becomes anindependent datagram. Whereas thefragmented datagram cantravelthrough
different routes,andwecannevercontrolorguarantee whichrouteafragmented data­
grammaytake,allthefragments belonging tothesamedatagram shouldfinallyarriveat
thedestination host.Soitislogicaltodothereassembly atthefinaldestination. Aneven
strongerobjection toreassembling packetsduringthetransmission isthelossofeffi­
ciencyitincurs.
Whenadatagram isfragmented, requiredpartsoftheheadermustbecopiedbyall
fragments. Theoptionfieldmayormaynotbecopied,aswewillseeinthenextsection.
Thehostorrouterthatfragments adatagram mustchangethevaluesofthreefields:SECTION 20.2IPv4 591
flags,fragmentation offset,andtotallength.Therestofthefieldsmustbecopied.Of
course,thevalueofthechecksum mustberecalculated regardless offragmentation.
FieldsRelatedtoFragmentation
Thefieldsthatarerelatedtofragmentation andreassembly ofanIPv4datagram arethe
identification, flags,andfragmentation offsetfields.
oIdentification. This16-bitfieldidentifies adatagram originating fromthesource
host.Thecombination oftheidentification andsourceIPv4addressmustuniquely
defineadatagram asitleavesthesourcehost.Toguarantee uniqueness, theIPv4
protocolusesacountertolabelthedatagrams. Thecounterisinitialized toaposi­
tivenumber.WhentheIPv4protocolsendsadatagram, itcopiesthecurrentvalue
ofthecountertotheidentification fieldandincrements thecounter by'~1.Aslongas
thecounteriskeptinthemainmemory, uniqueness isguaranteed. Whenadata­
gramisfragmented, thevalueintheidentification fieldiscopiedtoallfragments.
Inotherwords,allfragments havethesameidentification number,thesameasthe
originaldatagram. Theidentification numberhelpsthedestination inreassembling
thedatagram.Itknowsthatallfragments havingthesameidentification valuemust
beassembled intoonedatagram.oFlags.Thisisa3-bitfield.Thefirstbitisreserved. Thesecondbitiscalledthedo
notfragment bit.Ifitsvalueis1,themachinemustnotfragment thedatagram. Ifit
cannotpassthedatagram throughanyavailable physicalnetwork, itdiscardsthe
datagram andsendsanICMPerrormessagetothesourcehost(seeChapter21).If
itsvalueis0,thedatagram canbefragmented ifnecessary. Thethirdbitiscalled
themorefragment bit.Ifitsvalueis1,itmeansthedatagram isnotthelastfrag­
ment;therearemorefragments afterthisone.Ifitsvalueis0,itmeansthisisthe
lastoronlyfragment (seeFigure20.10).
Figure20.10Flagsusedinfragmentation
~ D:Donatfragment~ M:Morefragments
oFragmentation offset.This13-bitfieldshowstherelativepositionofthisfrag­
mentwithrespecttothewholedatagram.Itistheoffsetofthedataintheoriginal
datagram measured inunitsof8bytes.Figure20.11showsadatagram withadata
sizeof4000bytesfragmented intothreefragments.
Thebytesintheoriginaldatagram arenumbered 0to3999.Thefirstfragment
carriesbytes0to1399.Theoffsetforthisdatagram is0/8=O.Thesecondfrag­
mentcarriesbytes1400to2799;theoffsetvalueforthisfragment is1400/8=175.
Finally,thethirdfragment carriesbytes2800to3999.Theoffsetvalueforthis
fragment is2800/8=350.
Remember thatthevalueoftheoffsetismeasured inunitsof8bytes.Thisis
donebecausethelengthoftheoffsetfieldisonly13bitsandcannotrepresent a592CHAPTER 20NETWORK LAYER:INTERNET PROTOCOL
Figure20.11Fragmentation example
Byte0000Offset=0000/8=0
•••Offset=0000/8=0
Offset=1400/8=175
Offset=2800/8=350
2800 3999
sequence ofbytesgreaterthan8191.Thisforceshostsorroutersthatfragment data­
gramstochooseafragment sizesothatthefirstbytenumberisdivisible by8.
Figure20.12showsanexpanded viewofthefragments inFigure20.11.
Noticethevalueoftheidentification fieldisthesameinallfragments. Noticethe
valueoftheflagsfieldwiththemorebitsetforallfragments exceptthelast.Also,
thevalueoftheoffsetfieldforeachfragment isshown.
Figure20.12Detailedfragmentation example
I I 1420
14,567 I111000
I
Bytes0000-1399I I 820
14,567 I111175
Fragment 1I
II 40201/14,567 I101000 I I 1420Bytes1400-2199I 14,567 I III175
I Fragment 2.1
~I I 620
Bytes0000-3999 Bytes1400-279914,567 IIII275
I
Fragment 2
Originaldatagram
II 1220Bytes2200-2799
14,567 I101'350 Fragment 2.2
I
Bytes2800-3999
Fragment 3SECTION 20.2IPv4 593
Thefigurealsoshowswhathappensifafragment itselfisfragmented. Inthis
casethevalueoftheoffsetfieldisalwaysrelativetotheoriginaldatagram. For
example, inthefigure,thesecondfragment isitselffragmented latertotwofrag­
mentsof800bytesand600bytes,buttheoffsetshowstherelativepositionofthe
fragments totheoriginaldata.
Itisobviousthatevenifeachfragment followsadifferent pathandarrivesout
oforder,thefinaldestination hostcanreassemble theoriginaldatagram fromthe
fragments received(ifnoneofthemislost)byusingthefollowing strategy:
1.Thefirstfragment hasanoffsetfieldvalueofzero.
2.Dividethelengthofthefirstfragment by8.Thesecondfragment hasanoffset
valueequaltothatresult.
3.Dividethetotallengthofthefirstandsecondfragments by8.Thethirdfragment
hasanoffsetvalueequaltothatresult.
4.Continue theprocess.Thelastfragment hasamorebitvalueofO.
Example 20.5
ApackethasarrivedwithanMbitvalueofO.Isthisthefirstfragment, thelastfragment, ora
middlefragment? Do weknowifthepacketwasfragmented?
Solution
IftheMbitis0,itmeansthattherearenomorefragments; thefragment isthelastone.However,
wecannotsayiftheoriginalpacketwasfragmented ornot.Anonfragmented packetisconsid­
eredthelastfragment.
Example 20.6
Apackethas arrived withanMbitvalueof1.Isthisthefirstfragment, thelastfragment, ora
middlefragment? Do weknowifthepacketwasfragmented?
Solution
IftheMbitis1,itmeansthatthereisatleastonemorefragment. Thisfragment canbethefirst
oneoramiddleone,butnotthelastone.Wedon'tknowifitisthefirstoneoramiddleone;we
needmoreinformation (thevalueofthefragmentation offset).SeeExample 20.7.
Example 20.7
ApackethasarrivedwithanMbitvalueof1andafragmentation offsetvalueofO.Isthisthefirst
fragment, thelastfragment, Oramiddlefragment?
Solution
BecausetheMbitisl,itiseitherthefirstfragment oramiddleone.Becausetheoffsetvalueis0,
itisthefirstfragment.
Example 20.8
Apackethasarrivedinwhichtheoffsetvalueis100.Whatisthenumberofthefirstbyte?Dowe
knowthenumberofthelastbyte?594CHAPTER 20NETWORK LAYER:INTERNET PROTOCOL
Solution
Tofindthenumberofthefirstbyte,wemultiply theoffsetvalueby8.Thismeansthatthefirst
bytenumberis800.Wecannotdetermine thenumberofthelastbyteunlessweknowthelength
ofthedata.
Example 20.9
Apackethasarrivedinwhichtheoffsetvalueis100,thevalueofHLENis5,andthevalueofthe
tota1length fieldis100.Whatarethenumbersofthefirstbyteandthelastbyte?
Solution
Thefirstbytenumberis100x 8=800.Thetotallengthis100bytes,andtheheaderlengthis
20bytes(5x4),whichmeansthatthereare80bytesinthisdatagram. Ifthefirstbytenumber
is800,thelastbytenumbermustbe879.
Checksum
Wediscussed thegeneralideabehindthechecksum andhowitiscalculated inChapter10.
Theimplementation ofthechecksum intheIPv4packetfollowsthesameprinciples. First,
thevalueofthechecksum fieldissettoO.Thentheentireheaderisdividedinto16-bit
sections andaddedtogether. Theresult(sum)iscomplemented andinsertedintothe
checksum field.
Thechecksum intheIPv4packetcoversonlytheheader,notthedata.Therearetwo
goodreasonsforthis.First,allhigher-level protocols thatencapsulate dataintheIPv4
datagram haveachecksum fieldthatcoversthewholepacket.Therefore, thechecksum
fortheIPv4datagram doesnothavetochecktheencapsulated data.Second,theheader
oftheIPv4packetchangeswitheachvisitedrouter,butthedatadonot.Sothechecksum
includesonlythepartthathaschanged. Ifthedatawereincluded, eachroutermustrecal­
culatethechecksum forthewholepacket,whichmeansanincreaseinprocessing time.
Example 20.10
Figure20.13showsanexampleofachecksum calculation foranIPv4headerwithoutoptions.
Theheaderisdividedinto16-bitsections. Allthesections areaddedandthesumiscomple­
mented.Theresultisinsertedinthechecksum field.
Options
TheheaderoftheIPv4datagram ismadeoftwoparts:afixedpaltandavariablepart.
Thefixedpartis20byteslongandwasdiscussed intheprevious section.Thevariable
partcomprises theoptionsthatcanbeamaximum of40bytes.
Options, asthenameimplies,arenotrequiredforadatagram. Theycanbeusedfor
network testinganddebugging. Although optionsarenotarequired partoftheIPv4
header,optionprocessing isrequired oftheIPv4software. Thismeansthatallimple­
mentations mustbeabletohandleoptionsiftheyarepresentintheheader.
Thedetaileddiscussion ofeachoptionisbeyondthescopeofthisbook.Wegive
thetaxonomy ofoptionsinFigure20.14andbrieflyexplainthepurposeofeach.
NoOperation
Ano-operation optionisaI-byteoptionusedasafillerbetweenoptions.SECTION 20.2IPv4 595
Figure20.13Exampleofchecksum calculation inIPv4
4I5I0 28
1 oI0
4I17 {}
10.12.14.5
12.6.7.9
4,5,and0------+ 4 5 00
28------+ 00 1 C
1------+ 0 0 0 1
oand0------+ 0 0 00
4and17------+ 0411
0------+ 0 0 00
10.12------+0A0C
14.5------+0E05
12.6------+0C06
7.9------+0709
Sum------+ 744E
Checksum ------+ 8B B 1
Figure20.14Taxonomy ofoptionsinIPv4
Single-byteNooperation
Endofoption
.Options
Multiple-byteRecordroute
Strictsourceroute
Loosesourceroute
Timestamp
EndofOption
Anend-of-option optionisaI-byteoptionusedforpaddingattheendoftheoption
field.It,however, canonlybeusedasthelastoption.
RecordRoute
ArecordrouteoptionisusedtorecordtheInternetroutersthathandlethedatagram.
Itcanlistuptoninerouteraddresses. Itcanbeusedfordebugging andmanagement
purposes.
StrictSourceRoute
Astrictsourcerouteoptionisusedbythesourcetopredetermine arouteforthedata­
gramasittravelsthroughtheInternet.Dictation ofaroutebythesourcecanbeuseful596CHAPTER 20NETWORK LAYER:INTERNET PROTOCOL
forseveralpurposes. Thesendercanchoosearoutewithaspecifictypeofservice,such
asminimum delayormaximum throughput. Alternatively, itmaychoosearoutethatis
saferormorereliableforthesender'spurpose.Forexample, asendercanchoosearoute
sothatitsdatagram doesnottravelthroughacompetitor's network.
Ifadatagram specifies astrictsourceroute,alltheroutersdefinedintheoption
mustbevisitedbythedatagram. AroutermustnotbevisitedifitsIPv4addressisnot
listedinthedatagram.Ifthedatagram visitsarouterthatisnotonthelist,thedatagram
isdiscarded andanerrormessage isissued.Ifthedatagram arrivesatthedestination
andsomeoftheentrieswerenotvisited,itwillalsobediscarded andanerrormessage
issued.
LooseSourceRoute
Aloosesourcerouteoptionissimilartothestrictsourceroute,butitislessrigid.Each
routerinthelistmustbevisited,butthedatagram canvisitotherroutersaswell.
Timestamp
Atimestamp optionisusedtorecordthetimeofdatagram processing byarouter.The
timeisexpressed inmilliseconds frommidnight, Universal timeorGreenwich mean
time.Knowing thetimeadatagram isprocessed canhelpusersandmanagers trackthe
behavior oftheroutersintheInternet.Wecanestimatethetimeittakesforadatagram
togofromone~outertoanother.Wesayestimatebecause,although allroutersmayuse
Universal time,theirlocalclocksmaynotbesynchronized.
20.3IPv6
Thenetwork layerprotocol intheTCPIIPprotocol suiteiscurrently IPv4(Internet­
workingProtocol, version4).IPv4provides thehost-to-host communication between
systemsintheInternet. Although IPv4iswelldesigned, datacommunication has
evolvedsincetheinception ofIPv4inthe1970s.IPv4hassomedeficiencies (listed
below)thatmakeitunsuitable forthefast-growing Internet.
oDespiteallshort-term solutions, suchassubnetting, classless addressing, andNAT,
addressdepletion isstillalong-term problemintheInternet.
oTheInternetmustaccommodate real-time audioandvideotransmission. Thistype
oftransmission requiresminimum delaystrategies andreservation ofresources not
provided intheIPv4design.oTheInternetmustaccommodate encryption andauthentication ofdataforsome
applications. Noencryption orauthentication isprovided byIPv4.
Toovercome thesedeficiencies, IPv6(Internetworking Protocol, version6),also
knownasIPng(Internetworking Protocol, nextgeneration), wasproposed andis
nowastandard. InIPv6,theInternetprotocol wasextensively modified toaccommo­
datetheunforeseen growthoftheInternet.TheformatandthelengthoftheIPaddress
werechangedalong with thepacketformat.Relatedprotocols, suchasICMP,werealso
modified. Otherprotocols inthenetworklayer,suchasARP,RARP,andIGMP,wereSECTION 20.3IPv6 597
eitherdeletedorincluded intheICMPv6 protocol (seeChapter21).Routingprotocols,
suchasRIPandOSPF(seeChapter22),werealsoslightlymodified toaccommodate
thesechanges. Communications expertspredictthatIPv6anditsrelatedprotocols will
soonreplacethecurrentIPversion.InthissectionfirstwediscussIPv6.Thenweexplore
thestrategies usedforthetransition fromversion4toversion6.
Theadoption ofIPv6hasbeenslow.Thereasonisthattheoriginalmotivation for
itsdevelopment, depletion ofIPv4addresses, hasbeenremedied byshort-term strategies
suchasclassless addressing andNAT.However, thefast-spreading useoftheInternet,
andnewservicessuchasmobileIP,IPtelephony, andIP-capable mobiletelephony, may
eventually requirethetotalreplacement ofIPv4withIPv6.
Advantages
Thenext-generation IP,orIPv6,hassomeadvantages overIPv4thatcanbesummarized
asfollows:
oLargeraddressspace.AnIPv6addressis128bitslong,aswediscussed inChap­
ter19.Compared withthe32-bitaddressofIPv4,thisisahuge(296)increase in
theaddressspace.
oBetterheaderformat.IPv6usesanewheaderformatinwhichoptionsaresepa­
ratedfromthebaseheaderandinserted, whenneeded,between thebaseheader
andtheupper-layer data.Thissimplifies andspeedsuptheroutingprocessbecause
mostoftheoptionsdonotneedtobecheckedbyrouters.
oNewoptions. IPv6hasnewoptionstoallowforadditional functionalities.
oAllowance forextension. IPv6isdesigned toallowtheextension oftheprotocolif
requiredbynewtechnologies orapplications.
oSupport forresource allocation. InIPv6,thetype-of-service fieldhasbeen
removed, butamechanism (calledjlow label)hasbeenaddedtoenablethesource
torequestspecialhandling ofthepacket.Thismechanism canbeusedtosupport
trafficsuchasreal-time audioandvideo.
oSupport formoresecurity. Theencryption andauthentication optionsinIPv6
provideconfidentiality andintegrityofthepacket.
PacketFormat
TheIPv6packetisshowninFigure20.15.Eachpacketiscomposed ofamandatory base
headerfollowed bythepayload. Thepayloadconsistsoftwoparts:optionalextension
headersanddatafromanupperlayer.Thebaseheaderoccupies 40bytes,whereasthe
extension headersanddatafromtheupperlayercontainupto65,535bytesofinformation.
BaseHeader
Figure20.16showsthebaseheaderwithitseightfields.
Thesefieldsareasfollows:
oVersion. This4-bitfielddefinestheversionnumberoftheIP.ForIPv6,thevalueis6.
oPriority. The4-bitpriorityfielddefinesthepriorityofthepacketwithrespectto
trafficcongestion. Wewilldiscussthisfieldlater.598CHAPTER 20NETWORK LAYER:INTERNET PROTOCOL
Figure20.15IPv6datagram headerandpayload
1__'_4_0_b-,---Yt_es_--"I __' u-'---P_to_65_,5_3_5_b Y_te_s -----+.1
Extension headers
(optional)
Figure20.16FormatofanIPv6datagramDatapacketfromupperlayer
I'4bits II_4bits'1-8bits 8bits 8bits..VERIPRlIFlowlabel
Payloadlength --kN~t head;;IHoplimit
::_______________ Sourceaddress
c:~ Destination address-
,'"II.Nextheader Headerlength
,--'c:----
NextheaderIHeaderlengthI .- .'
I----
• •· ··•L,IINextheader' Headerlength
oFlowlabel.Theflowlabelisa3-byte(24-bit)fieldthatisdesigned toprovide
specialhandling foraparticular flowofdata.Wewilldiscussthisfieldlater.
oPayload length.The2-bytepayloadlengthfielddefinesthelengthoftheIPdata­
gramexcluding thebaseheader.
oNextheader.Thenextheaderisan8-bitfielddefiningtheheaderthatfollowsthe
baseheaderinthedatagram. Thenextheaderiseitheroneoftheoptionalexten­
sionheadersusedbyIPortheheaderofanencapsulated packetsuchasUDPor
TCP.Eachextension headeralsocontainsthisfield.Table20.6showsthevaluesof
nextheaders.Notethatthisfieldinversion4iscalledtheprotocol.
oHoplimit.This8-bithoplimitfieldservesthesamepurposeastheTILfieldinIPv4.
oSourceaddress. Thesourceaddressfieldisa16-byte(128-bit) Internetaddress
thatidentifies the originalsourceofthedatagram.SECTION 20.3IPv6 599
Table20.6NextheadercodesforIPv6
Code NextHeader
0Hop-by-hop option
2ICMP
6TCP
17UDP
43Sourcerouting
44Fragmen tation
50Encrypted securitypayload
51Authentication
59Null(nonextheader)
60Destination option
oDestination address. Thedestination addressfieldisa16-byte(128-bit) Internet
addressthatusuallyidentifies thefinaldestination ofthedatagram. However, if
sourceroutingisused,thisfieldcontainstheaddressofthenextrouter.
Priority
ThepriorityfieldoftheIPv6packetdefinesthepriorityofeachpacketwithrespectto
otherpacketsfromthesamesource.Forexample, ifoneoftwoconsecutive datagrams
mustbediscarded duetocongestion, thedatagram withthelowerpacketprioritywill
bediscarded. IPv6dividestrafficintotwobroadcategories: congestion-controlled and
noncongestion-controlled.
Congestion-Controlled Traffic Ifasourceadaptsitselftotrafficslowdown when
thereiscongestion, thetrafficisreferred toascongestion-controlled traffic.For
example, TCP,whichusestheslidingwindowprotocol, caneasilyrespondtotraffic.In
congestion-controlled traffic,itisunderstood thatpacketsmayarrivedelayed, lost,or
outoforder.Congestion-controlled dataareassigned priorities from0to7,aslistedin
Table20.7.Apriorityof0isthelowest;apriorityof7isthehighest.
Table20.7Priorities forcongestion-controlled traffic
Priority Meaning
0Nospecifictraffic
1Background data
2Unattended datatraffic
3Reserved
4Attended bulkdatatraffic
5Reserved
6Interactive traffic
7Controltraffic600 CHAPTER 20NETWORK LAYER:INTERNET PROTOCOL
Theprioritydescriptions areasfollows:
oNospecifictraffic.Apriorityof0isassigned toapacketwhentheprocessdoes
notdefineapriority.
oBackground data.Thisgroup(priority 1)definesdatathatareusuallydelivered
inthebackground. Deliveryofthenewsisagoodexample.
oUnattended datatraffic.Iftheuserisnotwaiting(attending) forthedatatobe
received, thepacketwillbegivenapriorityof2.E-mailbelongstothisgroup.The
recipient ofane-maildoesnotknowwhenamessage hasarrived.Inaddition, an
e-mailisusuallystoredbeforeitisforwarded. Alittlebitofdelayisoflittle
consequence.
oAttended bulkdatatraffic.Aprotocolthattransfersdatawhiletheuseriswaiting
(attending) toreceivethedata(possibly withdelay)isgivenapriorityof4.FTP
andHTTPbelongtothisgroup.
oInteractive traffic.Protocols suchasTELNET thatneeduserinteraction are
assigned thesecond-highest priority(6)inthisgroup.
oControltraffic.Controltrafficisgiventhehighestpriority(7).Routingprotocols
suchasOSPFandRIPandmanagement protocols suchasSNMPhavethispriority.
Noncongestion-Controlled Traffic Thisreferstoatypeoftrafficthatexpectsmini­
mumdelay.Discarding ofpacketsisnotdesirable. Retransmission inmostcasesis
impossible. Inotherwords,thesourcedoesnotadaptitselftocongestion. Real-time
audioandvideoareexamples ofthistypeoftraffic.
Prioritynumbers from8to15areassigned tononcongestion-controlled traffic.
Although therearenotyetanyparticular standardassignments forthistypeofdata,the
priorities areusuallybasedonhowmuchthequalityofreceiveddataisaffectedbythe
discarding ofpackets.Datacontaining lessredundancy (suchaslow-fidelity audioor
video)canbegivenahigherpriority(15).Datacontaining moreredundancy (suchas
high-fidelity audioorvideo)aregivenalowerpriority(8).SeeTable20.8.
Table20.8Priorities fornoncongestion-controlled traffic
Priority Meaning
8Datawithgreatestredundancy
... .,.
15Datawithleastredundancy
FlowLabel
Asequence ofpackets,sentfromaparticular sourcetoaparticular destination, thatneeds
specialhandling byroutersiscalledaflowofpackets.Thecombination ofthesource
addressandthevalueoftheflowlabeluniquely definesaflowofpackets.
Toarouter,aflowisasequence ofpacketsthatsharethesamecharacteristics, such
astraveling thesamepath,usingthesameresources, havingthesamekindofsecurity,
andsoon.Arouterthatsupportsthehandling offlowlabelshasaflowlabeltable.The
tablehasanentryforeachactiveflowlabel; each entrydefinestheservicesrequiredbySECTION 20.3IPv6 601
thecorresponding flowlabel.Whentherouterreceives apacket,itconsults itsflow
labeltabletofindthecorresponding entryfortheflowlabelvaluedefinedinthepacket.
Itthenprovides thepacketwiththeservicesmentioned intheentry.However, notethat
theflowlabelitselfdoesnotprovidetheinformation fortheentriesoftheflowlabel
table;theinformation isprovided byothermeanssuchasthehop-by-hop optionsor
otherprotocols.
Initssimplestform,aflowlabelcanbeusedtospeeduptheprocessing ofapacket
byarouter.Whenarouterreceivesapacket,insteadofconsulting theroutingtableand
goingthrougharoutingalgorithm todefinetheaddressofthenexthop,itcaneasily
lookinaflowlabeltableforthenexthop.
Initsmoresophisticated form,aflowlabelcanbeusedtosupportthetransmission of
real-time audioandvideo.Real-time audioorvideo,particularly indigitalform,requires
resources suchashighbandwidth, largebuffers,longprocessing time,andsoon.A
processcanmakeareservation fortheseresources beforehand toguarantee thatreal-time
datawillnotbedelayedduetoalackofresources. Theuseofreal-time dataandthe
reservation oftheseresources requireotherprotocols suchasReal-Time Protocol (RTP)
andResource Reservation Protocol(RSVP)inadditiontoIPv6.
Toallowtheeffective useofflowlabels,threeruleshavebeendefined:
1.Theflowlabelisassigned toapacketbythesourcehost.Thelabelisarandom
numberbetween 1and224-1.Asourcemustnotreuseaflowlabelforanewflow
whiletheexistingflowisstillactive.
2.Ifahostdoesnotsupporttheflowlabel,itsetsthisfieldtozero.Ifarouterdoesnot
supporttheflowlabel,itsimplyignoresit.
3.Allpacketsbelonging tothesameflowhavethesamesource,samedestination,
samepriority,andsameoptions.
Comparison Between IPv4andIPv6Headers
Table20.9compares IPv4andIPv6headers.
Table20.9Comparison betweenIPv4andIPv6packetheaders
Comparison
1.Theheaderlengthfieldiseliminated inIPv6becausethelengthoftheheaderisfixedin
thisversion.
2.Theservicetypefieldiseliminated inIPv6.Thepriorityandflowlabelfieldstogethertake
overthefunctionoftheservicetypefield.
3.Thetotallengthfieldiseliminated inIPv6andreplaced bythepayloadlengthfield.
4.Theidentification, flag,andoffsetfieldsareeliminated fromthebaseheaderinIPv6.They
areincluded inthefragmentation extension header.
5.TheTTLfieldiscalledhoplimitinIPv6.
6.Theprotocol fieldisreplaced bythenextheaderfield.
7.Theheaderchecksum iseliminated becausethechecksum isprovided byupper-layer
protocols; itistherefore notneededatthislevel.
8.TheoptionfieldsinIPv4areimplemented asextension headersinIPv6.602 CHAPTER 20NETWORK LAYER:INTERNET PROTOCOL
Extension Headers
Thelengthofthebaseheaderisfixedat40bytes.However, togivegreaterfunctionality
totheIPdatagram, thebaseheadercanbefollowed byuptosixextension headers.
ManyoftheseheadersareoptionsinIPv4.Sixtypesofextension headershavebeen
defined,asshowninFigure20.17.
Figure20.17 Extension headertypes
PadI
Extension
headersHop-by-hop option
Sourcerouting
Fragmentation
Authentication
Encrypted securitypayload
Destination optionPadN
Jumbopayload
Hop-by-Hop Option
Thehop-by-hop optionisusedwhenthesourceneedstopassinformation toallrouters
visitedbythedatagram. Sofar,onlythreeoptionshavebeendefined:Padl,PadN,and
jumbopayload. ThePadloptionis1bytelongandisdesigned foralignment pur­
poses.PadNissimilarinconcepttoPadi.Thedifference isthatPadNisusedwhen2or
morebytesisneededforalignment. Thejumbopayloadoptionisusedtodefineapay­
loadlongerthan65,535bytes.
Source Routing Thesourceroutingextension headercombines theconcepts ofthe
strictsourcerouteandtheloosesourcerouteoptionsofIPv4.
Fragmentation
Theconceptoffragmentation isthesameasthatinIPv4.However, theplacewhere
fragmentation occursdiffers.InIPv4,thesourceorarouterisrequired tofragment if
thesizeofthedatagram islargerthantheMTUofthenetworkoverwhichthedatagram
travels.InIPv6,onlytheoriginalsourcecanfragment. AsourcemustuseapathMTU
discovery technique tofindthesmallestMTUsupported byanynetworkonthepath.
Thesourcethenfragments usingthisknowledge.
Authentication
Theauthentication extension headerhasadualpurpose: itvalidates themessagesender
andensurestheintegrity ofdata.Wediscussthisextension headerwhenwediscussnet­
worksecurityinChapter31.SECTION 20.4TRANSITION FROMIPv4TOIPv6 603
Encrypted SecurityPayload
Theencrypted security payload (ESP)isanextension thatprovides confidentiality
andguardsagainsteavesdropping. Wediscussthisextension headerinChapter31.
Destination Option Thedestination optionisusedwhenthesourceneedstopass
information tothedestination only.Intermediate routersarenotpermitted accesstothis
information.
Comparison Between IPv4OptionsandIPv6Extension Headers
Table20.10compares theoptionsinIPv4withtheextension headersinIPv6.
Table20.10Comparison betweenIPv4optionsandIPv6extension headers
Comparison
1.Theno-operation andend-of-option optionsinIPv4arereplaced byPadlandPadN
optionsinIPv6.
2.Therecordrouteoptionisnotimplemented inIPv6becauseitwasnotused.
3.Thetimestamp optionisnotimplemented becauseitwasnotused.
4.Thesourcerouteoptioniscalledthesourcerouteextension headerinIPv6.
5.Thefragmentation fieldsinthebaseheadersectionofIPv4havemovedtothefragmentation
extension headerinIPv6.
6.Theauthentication extension headerisnewinIPv6.
7.Theencrypted securitypayloadextension headerisnewinIPv6.
20.4TRANSITION FROMIPv4TOIPv6
Because ofthehugenumberofsystems ontheInternet, thetransition fromIPv4
toIPv6cannothappensuddenly. Ittakesaconsiderable amountoftimebeforeevery
systemintheInternetcanmovefromIPv4toIPv6.Thetransition mustbesmoothto
preventanyproblems between IPv4andIPv6systems. Threestrategies havebeen
devisedbythe!ElFtohelpthetransition (seeFigure20.18).
Figure20.18Threetransition strategies604 CHAPTER 20NETWORK LAYER: INTERNET PROTOCOL
DualStack
Itisrecommended thatall hosts, beforemigrating completely toversion6,haveadual
stackofprotocols. Inotherwords,astationmustrunIPv4andIPv6simultaneously until
alltheInternetusesIPv6.SeeFigure20.19forthelayoutofadual-stack configuration.
Figure20.19 Dualstack
oIPv6systemTransport and
application layers
IPv4 IPv6
r ~Underlying
LANorWAN
technology
m T ToIPv4syste
Todetermine whichversiontousewhensendingapackettoadestination, thesource
hostqueriestheDNS.IftheDNSreturnsanIPv4address,thesourcehostsendsanIPv4
packet.IftheDNSreturnsanIPv6address,thesourcehostsendsanIPv6packet.
Tunneling
Thnneling isastrategyusedwhentwocomputers usingIPv6wanttocommunicate
witheachotherandthepacketmustpassthrougharegionthatusesIPv4.Topass
throughthisregion,thepacketmusthaveanIPv4address.SotheIPv6packetisencap­
sulatedinanIPv4packetwhenitenterstheregion,anditleavesitscapsulewhenit
exitstheregion.ItseemsasiftheIPv6packetgoesthroughatunnelatoneendand
emerges attheotherend.TomakeitclearthattheIPv4packetiscarrying anIPv6
packetasdata,theprotocolvalueissetto41.Tunneling isshowninFigure20.20.
Figure20.20 Tunneling strategy
IPv6 IPv6
host host
&-------ieDlIS: ~....._----llii~~------t ..1It:i
;;:tt-------&
IPv4regionIPv6regiollSECTION 20.5RECOMMENDED READING 605
HeaderTranslation
Headertranslation isnecessary whenthemajority oftheInternethasmovedtoIPv6
butsomesystemsstilluseIPv4.ThesenderwantstouseIPv6,butthereceiverdoesnot
understand IPv6.Tunneling doesnotworkinthissituation becausethepacketmustbe
intheIPv4formattobeunderstood bythereceiver.Inthiscase,theheaderformatmust
betotallychanged through headertranslation. TheheaderoftheIPv6packetiscon­
vertedtoanIPv4header(seeFigure20.21).
Figure20.21Headertranslation strategy
iiiIPv6 • I IPv4
host host
&-----;'l..~~I-----_cO~---..., ..1I:i
i:!II,t------&
Header
translation
donehere
Headertranslation usesthemappedaddresstotranslate anIPv6addresstoanIPv4
address.Table20.11listssomerulesusedintransforming anIPv6packetheadertoan
IPv4packetheader.
Table20.11Headertranslation
HeaderTranslation Procedure
1.TheIPv6mappedaddressischangedtoanIPv4addressbyextracting therightmost 32bits.
2.ThevalueoftheIPv6priorityfieldisdiscarded.
3.ThetypeofservicefieldinIPv4issettozero.
4.Thechecksum forIPv4iscalculated andinsertedinthecorresponding field.
5.TheIPv6flowlabelisignored.
6.Compatible extension headersareconverted tooptionsandinsertedintheIPv4header.
Somemayhavetobedropped.
7.ThelengthofIPv4headeriscalculated andinsertedintothecorresponding field.
8.ThetotallengthoftheIPv4packetiscalculated andinsertedinthecorresponding field.
20.5RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
booksandsites.Theitemsinbrackets [...]refertothereference listattheendof
thetext.606CHAPTER 20NETWORK LAYER:INTERNET PROTOCOL
Books
IPv4isdiscussed inChapter8of[For06],Chapter3of[Ste94J,Section4.1of[PD03],
Chapter 18of[Sta04],andSection5.6of[Tan03]. IPv6isdiscussed inChapter27of
[For06]and[Los04].
Sites
owww.ietforg/rfc.html Information aboutRFCs
RFCs
Adiscussion ofIPv4canbefoundinfollowing RFCs:
760,781,791,815,1025,1063,1071,1141,1190, 1191,1624,2113
Adiscussion ofIPv6canbefoundinthefollowing RFCs:
1365,1550,1678,1680,1682,1683,1686,1688,1726, 1752,1826,1883,1884,1886,1887,
1955,2080,2373,2452,2463,2465,2466,2472,2492,2545,2590
20.6KEYTERMS
authentication
baseheader
best-effort delivery
codepoint
connectionless service
connection-oriented service
datagram
destination address
destination option
differentiated services
dualstack
encrypted securitypayload(ESP)
end-of-option option
extension header
flowlabel
fragmentation
fragmentation offset
headerlengthheadertranslation
hoplimit
hop-by-hop option
InternetProtocol (IP)
InternetProtocol, nextgeneration (IPng)
InternetProtocol version4(IPv4)
InternetProtocol version6(IPv6)
jumbopayload
loosesourcerouteoption
maximum transferunit(MTU)
nextheader
noncongestion-controlled traffic
no-operation option
packetpriority
Padl
PadN
pathMTUdiscovery technique
precedencerecordrouteoption
servicetype
sourceaddress
strictsourcerouteoptionSECTION 20.8PRACTICE SET 607
timetolive
timestamp option
tunneling
typeofservice(TOS)
20.7SUMMARY
oIPv4isanunreliable connectionless protocol responsible forsource-to-destination
delivery.
oPacketsintheIPv4layerarecalleddatagrams. Adatagram consistsofaheader
(20to60bytes)anddata.Themaximum lengthofadatagram is65,535bytes.
oTheMTUisthemaximum numberofbytesthatadatalinkprotocolcanencapsulate.
MTUsvaryfromprotocoltoprotocol.
oFragmentation isthedivisionofadatagram intosmallerunitstoaccommodate the
MTUofadatalinkprotocol.
oTheIPv4datagram headerconsistsofafixed,20-bytesectionandavariableoptions
sectionwithamaximum of40bytes.
oTheoptionssectionoftheIPv4headerisusedfornetworktestinganddebugging.
oThesixIPv4optionseachhaveaspecificfunction. Theyareasfollows: filler
betweenoptionsforalignment purposes, padding, recording theroutethedatagram
takes,selection ofamandatory routebythesender,selection ofcertainroutersthat
mustbevisited,andrecording ofprocessing timesatrouters.
oIPv6,thelatestversionoftheInternetProtocol, hasa128-bitaddressspace,arevised
headerformat,newoptions, anallowance forextension, supportforresource
allocation, andincreased securitymeasures.
oAnIPv6datagram iscomposed ofabaseheaderandapayload.
oExtension headersaddfunctionality totheIPv6datagram.
oThreestrategies usedtohandlethetransition fromversion4toversion6aredual
stack,tunneling, andheadertranslation.
20.8PRACTICE SET
ReviewQuestions
1.Whatisthedifference betweenthedeliveryofaframeinthedatalinklayerandthe
deliveryofapacketinthenetworklayer?
2.Whatisthedifference between connectionless andconnection-oriented services?
WhichtypeofserviceisprovidedbyIPv4?Whichtypeofserviceisprovided byIPv6?
3.Definefragmentation andexplainwhytheIPv4andIPv6protocols needtofragment
somepackets.Isthereanydifference betweenthetwoprotocols inthismatter?608CHAPTER 20NETWORK LAYER:INTERNET PROTOCOL
4.Explaintheprocedure forchecksum calculation andverification intheIPv4protocol.
WhatpartofanIPv4packetiscoveredinthechecksum calculation? Why?Are
options,ifpresent,included inthecalculation?
5.ExplaintheneedforoptionsinIPv4andlisttheoptionsmentioned inthischapter
withabriefdescription ofeach.
6.Compare andcontrastthefieldsinthemainheadersofIPv4andIPv6.Makeatable
thatshowsthepresence orabsenceofeachfield.
7.BothIPv4andIPv6assumethatpacketsmayhavedifferentpriorities orprecedences.
Explainhoweachprotocolhandlesthisissue.
8.Compare andcontrasttheoptionsinIPv4andtheextension headersinIPv6.Make
atablethatshowsthepresence orabsenceofeach.
9.Explainthereasonfortheelimination ofthechecksum intheIPv6header.
10.Listthreetransition strategies tomovefromIPv4toIPv6.Explainthedifference
between tunneling anddualstackstrategies duringthetransition period.Whenis
eachstrategyused?
Exercises
11.WhichfieldsoftheIPv4headerchangefromroutertorouter?
12.Calculate theHLEN(inIPv4)valueifthetotallengthis1200bytes,1176ofwhich
isdatafromtheupperlayer.
13.Table20.5liststheMTUsformanydifferent protocols. TheMTUsrangefrom296
to65,535.Whatwouldbetheadvantages ofhavingalargeMTU?Whatwouldbe
theadvantages ofhavingasmallMTU?
14.Givenafragmented datagram (inIPv4)withanoffsetof120,howcanyoudetermine
thefirstandlastbytenumbers?
15.CanthevalueoftheheaderlengthinanIPv4packetbelessthan5?Whenisit
exactly5?
16.ThevalueofHLEN inanIPv4datagram is7.Howmanyoptionbytesarepresent?
17.ThesizeoftheoptionfieldofanIPv4datagram is20bytes.Whatisthevalueof
HLEN?Whatisthevalueinbinary?
18.ThevalueofthetotallengthfieldinanIPv4datagram is36,andthevalueofthe
headerlengthfieldis5.Howmanybytesofdataisthepacketcarrying?
19.AnIPv4datagram iscarrying 1024bytesofdata.Ifthereisnooptioninformation,
whatisthevalueoftheheaderlengthfield?Whatisthevalueofthetotallength
field?
20.Ahostissending100datagrams toanotherhost.Iftheidentification numberofthe
firstdatagram is1024,whatistheidentification numberofthelast(inIPv4)?
21.AnIPv4datagram arriveswithfragmentation offsetof0andanMbit(morefragment
bit)ofO.Isthisafirstfragment, middlefragment, orlastfragment?
22.AnIPv4fragment hasarrivedwithanoffsetvalueof100.Howmanybytesofdata
wereoriginally sentbythesourcebeforethedatainthisfragment?SECTION 20.8PRACTICE SET 609
23.AnIPv4datagram hasarrivedwiththefollowing information intheheader(in
hexadecimal) :
Ox4500005400035850200600007C4E03 02B4OEOF02
a.Isthepacketcorrupted?
b.Arethereanyoptions?
c.Isthepacketfragmented?
d.Whatisthesizeofthedata?
e.Howmanymorerouterscanthepackettravelto?
f.Whatistheidentification numberofthepacket?
g.Whatisthetypeofservice?
24.InanIPv4datagram, theMbitis0,thevalueofHLENis5,thevalueoftotal
lengthis200,andtheoffsetvalueis200.Whatisthenumberofthefirstbyteand
numberofthelastbyteinthisdatagram? Isthisthelastfragment, thefirstfragment,
oramiddlefragment?
Research Activities
25.Findoutwhytherearetwosecurityprotocols (AHandESP)inIPv6.CHAPTER 21
Network Layer:AddressMapping,
ErrorReporting, andMulticasting
InChapter20wediscussed theInternetProtocol (IP)asthemainprotocolatthenetwork
layer.IPwasdesigned asabest-effort deliveryprotocol, butitlackssomefeaturessuch
asflowcontrolanderrorcontrol.Itisahost-to-host protocol usinglogicaladdressing.
TomakeIPmoreresponsive tosomerequirements intoday'sintemetworking, weneed
thehelpofotherprotocols.
Weneedprotocols tocreateamapping between physical andlogicaladdresses.
IPpacketsuselogical(host-to-host) addresses. Thesepackets,however, needtobeencap­
sulatedinaframe,whichneedsphysical addresses (node-to-node). Wewillseethata
protocolcalledARP,theAddress Resolution Protocol, isdesigned forthispurpose.We
sometimes needreversemapping-mapping aphysical addresstoalogicaladdress.For
example, whenbootingadisklessnetworkorleasinganIPaddresstoahost.Threepro­
tocolsaredesigned forthispurpose: RARP,BOOTp, andDHCP.
LackofflowanderrorcontrolintheInternetProtocol hasresultedinanotherpro­
tocol,ICMP,thatprovides alerts.Itreportscongestion andsometypesoferrorsinthe
networkordestination host.
IPwasoriginally designed forunicastdelivery, onesourcetoonedestination. Asthe
Internethasevolved,theneedformulticast delivery, onesourcetomanydestinations, has
increased tremendously. IGMPgivesIPamulticast capability.
Inthischapter,wediscusstheprotocols ARP,RARP,BOOTP, DHCP,andIGMP
insomedetail.WealsodiscussICMPv6, whichwillbeoperational whenIPv6isoper­
ational.ICMPv6 combines ARP,ICMP,andIGMPinoneprotocol.
21.1ADDRESS MAPPING
Aninternetismadeofacombination ofphysicalnetworks connected byinternetworking
devicessuchasrouters.Apacketstartingfromasourcehostmaypassthroughseveral
different physical networks beforefinallyreaching thedestination host.Thehostsand
routersarerecognized atthenetworklevelbytheirlogical(IP)addresses.
However, packetspassthroughphysical networks toreachthesehostsandrouters.
Atthephysical level,thehostsandroutersarerecognized bytheirphysical addresses.
611612CHAPTER 21NETWORK LAYER:ADDRESS MAPPING, ERRORREPORTING, ANDMULTICASTING
Aphysical address isalocaladdress. Itsjurisdiction isalocalnetwork. Itmustbe
uniquelocally,butisnotnecessarily uniqueuniversally. Itiscalledaphysical address
becauseitisusually(butnotalways)implemented inhardware. Anexampleofaphysical
addressisthe48-bitMACaddressintheEthernet protocol, whichisimprinted onthe
NICinstalled inthehostorrouter.
Thephysical addressandthelogicaladdressaretwodifferent identifiers. Weneed
bothbecauseaphysical network suchasEthernet canhavetwodifferent protocols at
thenetworklayersuchasIPandIPX(Novell) atthesametime.Likewise, apacketata
networklayersuchasIPmaypassthroughdifferent physicalnetworks suchasEthernet
andLocalTalk (Apple).
Thismeansthatdelivery ofapackettoahostorarouterrequires twolevelsof
addressing: logicalandphysical. Weneedtobeabletomapalogicaladdresstoitscor­
responding physical addressandviceversa.Thesecanbedonebyusingeitherstaticor
dynamic mapping.
Staticmapping involvesinthecreationofatablethatassociates alogicaladdress
withaphysicaladdress.Thistableisstoredineachmachineonthenetwork. Eachmachine
thatknows,forexample, theIPaddressofanothermachine butnotitsphysical address
canlookitupinthetable.Thishassomelimitations becausephysical addresses may
changeinthefollowing ways:
1.Amachine couldchangeitsNIC,resulting inanewphysical address.
2.InsomeLANs,suchasLocalTalk, thephysical addresschangeseverytimethe
computer isturnedon.
3.Amobilecomputer canmovefromonephysical networktoanother,resulting ina
changeinitsphysicaladdress.
Toimplement thesechanges, astaticmapping tablemustbeupdatedperiodically. This
overhead couldaffectnetworkperformance.
Indynamic mapping eachtimeamachineknowsoneofthetwoaddresses (logical
orphysical), itcanuseaprotocol tofindtheotherone.
Mapping LogicaltoPhysical Address: ARP
Anytime ahostorarouterhasanIPdatagram tosendtoanotherhostorrouter,ithasthe
logical(IP)addressofthereceiver. Thelogical(IP)addressisobtained fromtheDNS
(seeChapter25)ifthesenderisthehostoritisfoundinaroutingtable(seeChapter22)
ifthesenderisarouter.ButtheIPdatagram mustbeencapsulated inaframetobeableto
passthroughthephysicalnetwork. Thismeansthatthesenderneedsthephysicaladdress
ofthereceiver.ThehostortheroutersendsanARPquerypacket.Thepacketincludes
thephysical andIPaddresses ofthesenderandtheIPaddressofthereceiver. Because
thesenderdoesnotknowthephysical addressofthereceiver, thequeryisbroadcast
overthenetwork(seeFigure21.1).
Everyhostorrouteronthenetworkreceivesandprocesses theARPquerypacket,
butonlytheintendedrecipient recognizes itsIPaddressandsendsbackanARPresponse
packet.Theresponse packetcontainstherecipient's IPandphysicaladdresses. Thepacket
isunicastdirectlytotheinquirerbyusingthephysical addressreceived inthequery
packet.SECTION 21.1ADDRESS MAPPING 613
Figure21.1ARPoperation
Looking forphysical addressofa
nodewithIPaddress141.23.56.23
Request
SystemA
a.ARPrequestisbroadcast
SystemA
b.ARPreplyisunicastThenodephysicaladdress
isA4:6E:F4:59:83:AB
ReplySystemB
SystemB
InFigure21.1a,thesystemontheleft(A)hasapacketthatneedstobedelivered to
anothersystem(B)withIPaddress141.23.56.23. SystemAneedstopassthepacketto
itsdatalinklayerfortheactualdelivery, butitdoesnotknowthephysical addressof
therecipient.ItusestheservicesofARPbyaskingtheARPprotocoltosendabroad­
castARPrequestpackettoaskforthephysicaladdressofasystemwithanIF address
of141.23.56.23.
Thispacketisreceivedbyeverysystemonthephysicalnetwork, butonlysystemB
willanswerit,asshowninFigure21.1b.SystemBsendsanARPreplypacketthat
includesitsphysicaladdress.NowsystemAcansendallthepacketsithasforthisdes­
tinationbyusingthephysicaladdressitreceived.
CacheMemory
UsingARPisinefficient ifsystemAneedstobroadcast anARPrequestforeachIP
packetitneedstosendtosystemB.Itcouldhavebroadcast theIPpacketitself.ARP
canbeusefuliftheARPreplyiscached(keptincachememoryforawhile)becausea
systemnormally sendsseveralpacketstothesamedestination. Asystemthatreceives
anARPreplystoresthemapping inthecachememoryandkeepsitfor20to30minutes
unlessthespaceinthecacheisexhausted. BeforesendinganARPrequest,thesystem
firstchecksitscachetoseeifitcanfindthemapping.
PacketFormat
Figure21.2 shows theformatofanARPpacket.614CHAPTER 21NETWORK LAYER:ADDRESS MAPPING, ERRORREPORTING, ANDMULTICASTING
Figure21.2ARPpacket
32bits
8bits
lI~8bits 16bitsI
I
I
I
_I
Hardware Type Protocol Type
Hardware Protocol Operation
length length RequestI,Reply2
Senderhardware address
(Forexample, 6bytesforEthernet)
Senderprotocoladdress
(Forexample, 4bytesforIP)
Targethardware address
(Forexample, 6bytesforEthernet)
(Itisnotfilledinarequest)
Targetprotocoladdress
(Forexample, 4bytesforIP)
Thcfieldsarcasfollows:
oHardware type.Thisisa16-bitfielddefiningthetypeofthenetworkonwhich
ARPisrunning. EachLANhasbeenassigned anintegerbasedonitstype.For
example, Ethernetisgiventype1.ARPcanbeusedonanyphysicalnetwork.oProtocol type.Thisisa16-bitfielddefiningtheprotocol. Forexample, thevalue
ofthisfieldfortheIPv4protocolis080016,ARPcanbeused with anyhigher-level
protocol.
oHardware length.Thisisan8-bitfielddefiningthelengthofthephysicaladdress
inbytes.Forexample, forEthernetthevalueis6.
oProtocol length.Thisisan8-bitfielddefiningthelengthofthelogicaladdressin
bytes.Forexample, fortheIPv4protocolthevalueis4.
oOperation. Thisisa16-bitfielddefiningthetypeofpacket.Twopackettypesare
defined:ARPrequest(1)andARP reply(2).
oSenderhardware address. Thisisavariable-length fielddefining thephysical
addressofthesender.Forexample, forEthernet thisfieldis6byteslong.
oSenderprotocol address. Thisisavariable-length fielddefiningthelogical(for
example, IP)addressofthe sender. FortheIPprotocol, thisfieldis4byteslong.oTargethardware address. Thisisavariable-length fielddefining thephysical
addressofthetarget.Forexample, forEthernetthisfieldis6byteslong.ForanARP
requestmessage, thisfieldisalIOsbecausethesenderdoesnotknowthephysical
addressofthetarget.
oTargetprotocol address. Thisisavariable-length fielddefiningthelogical(for
example, IP)addressofthetarget.FortheIPv4protocol, thisfieldis4byteslong.SECTION 21.1ADDRESS MAPPING 615
Encapsulation
AnARPpacketisencapsulated directlyintoadatalinkframe.Forexample, inFigure21.3
anARPpacketisencapsulated inanEthernetframe.Notethatthetypefieldindicates that
thedatacarriedbytheframeareanARPpacket.
Figure21.3Encapsulation ofARPpacket
ARPrequestorreplypacket
Preamble
andSPD
8bytes 6bytes 6bytes 2bytesData
4bytes
Operation
LetusseehowARPfunctions onatypicalinternet.Firstwedescribethestepsinvolved.
ThenwediscussthefourcasesinwhichahostorrouterneedstouseARP.Thesearethe
stepsinvolved inanARPprocess:
1.ThesenderknowstheIPaddressofthetarget.Wewillseehowthesenderobtains
thisshortly.
2.IPasksARPtocreateanARPrequestmessage, fillinginthesenderphysicaladdress,
thesenderIPaddress,andthetargetIPaddress.Thetargetphysicaladdressfieldis
filledwithOs.
3.Themessage ispassedtothedatalinklayerwhereitisencapsulated inaframeby
usingthephysical addressofthesenderasthesourceaddressandthephysical
broadcast addressasthedestination address.
4.Everyhostorrouterreceivestheframe.Because theframecontains abroadcast
destination address, allstationsremovethemessage andpassittoARP.All
machines excepttheonetargeteddropthepacket.Thetargetmachine recognizes
itsIPaddress.
5.Thetargetmachine replieswithanARPreplymessage thatcontains itsphysical
address.Themessageisunicast.
6.Thesenderreceivesthereplymessage.Itnowknowsthephysical addressofthe
targetmachine.
7.TheIPdatagram, whichcarriesdataforthetargetmachine, isnowencapsulated in
aframeandisunicasttothedestination.
FourDifferent Cases
Thefollowing arefourdifferent casesinwhichtheservicesofARPcanbeused(see
Figure21.4).
1.Thesenderisahostandwantstosendapackettoanotherhostonthesamenet­
work.Inthiscase,thelogicaladdressthatmustbemappedtoaphysicaladdressis
thedestination IP address inthedatagram header.616CHAPTER 21NETWORK LAYER:ADDRESS MAPPING, ERRORREPORTING, ANDMULTICASTING
Figure21.4FourcasesusingARP
TargetIPaddress:
Destination addressintheIPdatagram
Sender
LAN
Receiver
Case1.Ahosthasapackettosendto
anotherhostonthesamenetwork.
TargetIFaddress:
IFaddressoftheappropriate router
foundintheroutingtable
Sender
~...)a~
LAN::;;.
Receiver
Case3.Arouterreceivesapackettobesent
toahostonanothernetwork.Itmustfirst
bedelivered totheappropriate router.TargetIPaddress:
IPaddressofarouter
Sender
LAN
Case2.Ahostwantstosendapacketto
anotherhostonanothernetwork.
Itmustfirstbedelivered toarouter.
TargetIPaddress:
Destination addressintheIPdatagram
Sender
~..
~LAN ="'"'-
Receiver
Case4.Arouterreceivesapackettobesent
toahostonthesamenetwork.
2.Thesenderisahostandwantstosendapackettoanotherhostonanothernetwork.
Inthiscase,thehostlooksatitsroutingtableandfindstheIPaddressofthenext
hop(router)forthisdestination. Ifitdoesnothavearoutingtable,itlooksforthe
IPaddressofthedefaultrouter.TheIPaddressoftherouterbecomes thelogical
addressthatmustbemappedtoaphysicaladdress.
3.Thesenderisarouterthathasreceived adatagram destinedforahostonanother
network. Itchecksitsrouting table andfindstheIPaddressofthenextrouter.The
IPaddressofthenextrouterbecomes thelogicaladdressthatmustbemappedtoa
physicaladdress.
4.Thesenderisarouterthathasreceivedadatagram destinedforahostonthesame
network. Thedestination IPaddressofthedatagram becomes thelogicaladdress
thatmustbemappedtoaphysicaladdress.
AnARPrequestisbroadcast; anARPreplyisunicast.
Example 21.1
AhostwithIPaddress130.23.43.20 andphysical addressB2:34:55: 10:22:10hasapacketto
sendtoanotherhostwithIPaddress130.23.43.25 andphysical addressA4:6E:F4:59:83:AB
(whichisunknown tothefirsthost).ThetwohostsareonthesameEthernet network. Showthe
ARPrequestandreplypacketsencapsulated inEthernetframes.SECTION 21.1ADDRESS MAPPlNG 617
Solution
Figure21.5showstheARPrequestandreplypackets.NotethattheARPdatafieldinthiscaseis
28bytes,andthattheindividual addresses donotfitinthe4-byteboundary. Thatiswhywedo
notshowtheregular4-byteboundaries fortheseaddresses.
Figure21.5Example21.1,anARPrequestandreply
130.23.43.20
ARPRequest
OxOOOI Ox0800
Ox06Ox04 OxOOOl
OxB23455102210
130.23.43.20
OxOOOOOOOOOOOO
130.23.43.25 ARPReply
r
TimeOxOOOl IOx0800
Ox06IOx04IOxOO02
I ......-OxA.t6EF45983AB HI130.23.43.25I
I I
I OxB2345510221O I
I 130.23.43.20 I
I Iy
Time
ProxyARP
Atechnique calledproxyARPisusedtocreateasubnetting effect.AproxyARPisan
ARPthatactsonbehalfofasetofhosts.Whenever arouterrunningaproxyARP
receives anARPrequestlookingfortheIPaddressofoneofthesehosts,therouter
sendsanARPreplyannouncing itsownhardware (physical) address.Aftertherouter
receivestheactualIPpacket,itsendsthepackettotheappropriate hostorrouter.
Letusgiveanexample. InFigure21.6theARPinstalled ontheright-hand host
willansweronlytoanARPrequestwithatargetIPaddressof141.23.56.23.
Figure21.6ProxyARP
141.23.56.21 141.23.56.22 141.23.56.23
r r r
AddedsubnetworkTheproxyARProuterreplies
toanyARPrequestreceived
fordestinations 141.23.56.21,
141.23.56.22, and141.23.56.23.
ProxyARP
router
Request
Routerorhost618CHAPTER 21NETWORK LAYER:ADDRESS MAPPING, ERRORREPORTING, ANDMULTICASTING
However, theadministrator mayneedtocreateasubnetwithoutchanging the
wholesystemtorecognize subnettedaddresses. Onesolutionistoaddarouterrunning
aproxyARP.Inthiscase,therouteractsonbehalfofallthehostsinstalledonthesubnet.
Whenitreceives anARPrequestwithatargetIPaddressthatmatches theaddress
ofoneofitsproteges (141.23.56.21, 141.23.56.22, or141.23.56.23), itsendsanARP
replyandannounces itshardware addressasthetarget hardware address. Whenthe
routerreceivestheIPpacket,itsendsthepackettotheappropriate host.
Mapping Physical toLogicalAddress: RARP,BOOTP, andDHCP
Thereareoccasions inwhichahostknowsitsphysical address, butneedstoknowits
logicaladdress.Thismayhappenintwocases:
1.Adisklessstationisjustbooted.Thestationcanfinditsphysicaladdressbychecking
itsinterface, butitdoesnotknowitsIPaddress.
2.Anorganization doesnothaveenoughIPaddresses toassigntoeachstation;itneeds
toassignIPaddresses ondemand. Thestationcansenditsphysical addressand
askforashorttimelease.
RARP
ReverseAddressResolution Protocol (RARP) findsthelogicaladdressforamachine
thatknowsonlyitsphysical address.Eachhostorrouterisassigned oneormorelogical
(IP)addresses, whichareuniqueandindependent ofthephysical (hardware) addressof
themachine. TocreateanIPdatagram, ahostorarouterneedstoknowitsownIP
addressoraddresses. TheIPaddressofamachine isusuallyreadfromitsconfiguration
filestoredonadiskfile.
However, adiskless machine isusuallybootedfromROM,whichhasminimum
booting information. TheROMisinstalled bythemanufacturer. Itcannotinclude
theIPaddressbecause theIPaddresses onanetwork areassigned bythenetwork
administrator.
Themachine cangetitsphysical address(byreadingitsNIC,forexample), which
isuniquelocally.Itcanthenusethephysical addresstogetthelogicaladdressbyusing
theRARPprotocol. ARARPrequestiscreatedandbroadcast onthelocalnetwork.
Anothermachine onthelocalnetworkthatknowsalltheIPaddresses willrespondwith
aRARPreply.Therequesting machine mustberunningaRARPclientprogram; the
responding machine mustberunningaRARPserverprogram.
ThereisaseriousproblemwithRARP:Broadcasting isdoneatthedatalinklayer.The
physicalbroadcast address,allisinthecaseofEthernet, doesnotpasstheboundaries of
anetwork. Thismeansthatifanadministrator hasseveralnetworks orseveralsubnets,it
needstoassignaRARPserverforeachnetworkorsubnet.ThisisthereasonthatRARP
isalmostobsolete. 1\voprotocols, BOOTPandDHCp,arereplacing RARP.
BOOTP
TheBootstrap Protocol (BOOTP) isaclient/server protocol designed toprovide
physical addresstologicaladdressmapping. BOOTPisanapplication layerprotocol.
Theadministrator mayputtheclientandtheserveronthesamenetworkorondifferentSECTION 21.1ADDRESS MAPPING 619
networks, asshowninFigure21.7.BOOTPmessages areencapsulated inaUDPpacket,
andtheUDPpacketitselfisencapsulated inanIPpacket.
Figure21.7BOOTPclientandserveronthesameanddifferent network
DBOOTP
ClientBOOTPD
Server
IRequest~~ Reply
a.Clientandserveronthesamenetwork
c::=Jo+
Broadcast
requestserver
DBOOTP
c:::=::Jo+
Unicast
requestInternetRelayagent
--~'" ......I "-
I \, \
\ I
\ I
" i' ...... /~.--DBOOTP
Client
b.Clientandserverondifferent networks
ThereadermayaskhowaclientcansendanIPdatagram whenitknowsneither
itsownIPaddress(thesourceaddress) northeserver'sIPaddress(thedestination
address). TheclientsimplyusesallasasthesourceaddressandallIsasthedestination
address.
Oneoftheadvantages ofBOOTP overRARPisthattheclientandserverare
application-layer processes. Asinotherapplication-layer processes, aclientcanbein
onenetworkandtheserverinanother,separated byseveralothernetworks. However,
thereisoneproblemthatmustbesolved.TheBOOTPrequestisbroadcast becausethe
clientdoesnotknowtheIPaddressoftheserver.Abroadcast IPdatagram cannotpass
throughanyrouter.Tosolvetheproblem, thereisaneedforanintermediary. Oneofthe
hosts(orarouterthatcanbeconfigured tooperateattheapplication layer)canbeused
asarelay.Thehostinthiscaseiscalledarelayagent.Therelayagentknowstheunicast
addressofaBOOTPserver.Whenitreceivesthistypeofpacket,itencapsulates the
messageinaunicastdatagram andsendstherequesttotheBOOTPserver.Thepacket,620CHAPTER 21NETWORK LAYER:ADDRESS MAPPING, ERRORREPORTING, ANDMULTICASTING
carryingaunicastdestination address,isroutedbyanyrouterandreachestheBOOTP
server.TheBOOTPserverknowsthemessagecomesfromarelayagentbecauseoneof
thefieldsintherequestmessage definestheIPaddressoftherelayagent.Therelay
agent,afterreceiving thereply,sendsittotheBOOTPclient.
DHCP
BOOTP isnotadynamic configuration protocol. Whenaclientrequests itsIP
address,theBOOTPserverconsultsatablethatmatchesthephysicaladdressoftheclient
withitsIPaddress.Thisimpliesthatthebindingbetweenthephysicaladdressandthe
IPaddressoftheclientalreadyexists.Thebindingispredetermined.
However, whatifahostmovesfromonephysicalnetworktoanother? Whatifa
hostwantsatemporary IPaddress? BOOTPcannothandlethesesituations becausethe
bindingbetweenthephysicalandIPaddresses isstaticandfixedinatableuntilchanged
bytheadministrator. BOOTPisastaticconfiguration protocol.
TheDynamic HostConfiguration Protocol (DHCP) hasbeendevisedtoprovide
staticanddynamic addressallocation thatcanbemanualorautomatic.
DHCPprovides staticanddynamic addressallocation thatcanbemanualorautomatic.
StaticAddress Allocation InthiscapacityDHCPactsasBOOTPdoes.Itisbackward­
compatible withBOOTP,whichmeansahostrunningtheBOOTPclientcanrequesta
staticaddressfromaDHCPserver.ADHCPserverhasadatabase thatstatically binds
physicaladdresses toIPaddresses.
Dynamic Address Allocation DHCPhasaseconddatabase withapoolofavailable
IPaddresses. ThisseconddatabasemakesDHCPdynamic. WhenaDHCPclientrequests
atemporary IPaddress, theDHCPservergoestothepoolofavailable (unused) IP
addresses andassignsanIPaddressforanegotiable periodoftime.
WhenaDHCPclientsendsarequesttoaDHCPserver,theserverfirstchecksits
staticdatabase.Ifanentrywiththerequested physicaladdressexistsinthestaticdata­
base,thepermanent IPaddressoftheclientisreturned. Ontheotherhand,iftheentry
doesnotexistinthestaticdatabase, theserverselectsanIPaddressfromtheavailable
pool,assignstheaddresstotheclient,andaddstheentrytothedynamic database.
Thedynamic aspectofDHCPisneededwhenahostmovesfromnetworktonet­
workorisconnected anddisconnected fromanetwork(asisasubscriber toaservice
provider). DHCPprovides temporary IPaddresses foralimitedtime.
Theaddresses assigned fromthepoolaretemporary addresses. TheDHCPserver
issuesaleaseforaspecifictime.Whentheleaseexpires,theclientmusteitherstop
usingtheIPaddressorrenewthelease.Theserverhastheoptiontoagreeordisagree
withtherenewal.Iftheserverdisagrees, theclientstopsusingtheaddress.
ManualandAutomatic Configuration OnemajorproblemwiththeBOOTPprotocol
isthatthetablemapping theIPaddresses tophysicaladdresses needstobemanually
configured. ThismeansthateverytimethereisachangeinaphysicalorIPaddress,the
administrator needstomanually enterthechanges. DHCP,ontheotherhand,allows
bothmanualandautomatic configurations. Staticaddresses arecreated manually~ dynamic
addresses arecreatedautomatically.SECTION 21.2ICMP 621
21.2ICMP
Asdiscussed inChapter20,theIPprovides unreliable andconnectionless datagram
delivery.Itwasdesigned thiswaytomakeefficientuseofnetworkresources. TheIP
protocol isabest-effort delivery servicethatdelivers adatagram fromitsoriginal
sourcetoitsfinaldestination. However, ithastwodeficiencies: lackoferrorcontroland
lackofassistance mechanisms.
TheIPprotocolhasnoerror-reporting orerror-correcting mechanism. Whathappens
ifsomething goeswrong?Whathappensifaroutermustdiscardadatagram becauseit
cannotfindaroutertothefinaldestination, orbecausethetime-to-live fieldhasazero
value?Whathappensifthefinaldestination hostmustdiscardallfragments ofadatagram
becauseithasnotreceived allfragments withinapredetermined timelimit?Theseare
examples ofsituations whereanerrorhasoccurred andtheIPprotocolhasnobuilt-in
mechanism tonotifytheoriginalhost.
TheIPprotocol alsolacksamechanism forhostandmanagement queries.Ahost
sometimes needstodetermine ifarouteroranotherhostisalive.Andsometimes anet­
workadministrator needsinformation fromanotherhostorrouter.
TheInternetControlMessageProtocol(ICMP)hasbeendesigned tocompensate
fortheabovetwodeficiencies. Itisacompanion totheIPprotoco1.
TypesofMessages
ICMPmessages aredividedintotwobroadcategories: error-reporting messages and
querymessages.
Theerror-reporting messages reportproblems thatarouterorahost(destination)
mayencounterwhen itprocesses anIPpacket.
Thequerymessages, whichoccurinpairs,helpahostoranetworkmanager get
specificinformation fromarouteroranotherhost.Forexample, nodescandiscover
theirneighbors. Also,hostscandiscover andlearnaboutroutersontheirnetwork, and
routerscanhelpanoderedirectitsmessages.
Message Format
AnICMPmessage hasan8-byteheaderandavariable-size datasection.Although the
generalformatoftheheaderisdifferentforeachmessagetype,thefirst4bytesarecom­
montoall.AsFigure21.8shows,thefirstfield,ICMPtype,definesthetypeofthe
Figure21.8Generalformat of[CM?messages
8bits 8bits 8bits 8bits
TypeICodeIChecksum
Restoftheheader
Datasection622CHAPTER 21NETWORK LAYER:ADDRESS MAPPING, ERRORREPORTING, ANDMULTICASTING
message. Thecodefieldspecifies thereasonfortheparticular message type.Thelast
common fieldisthechecksum field(tobediscussed laterinthechapter). Therestofthe
headerisspecificforeachmessage type.
The data sectioninerrormessages carriesinformation forfindingtheoriginal
packetthathadtheerror.Inquerymessages, thedatasectioncarriesextrainformation
basedonthetypeofthequery.
ErrorReporting
Oneofthemainresponsibilities ofICMPistoreporterrors.Although technology has
produced increasingly reliabletransmission media,errorsstillexistandmustbehandled.
IP,asdiscussed inChapter20,isanunreliable protocol. Thismeansthaterrorchecking
anderrorcontrolarenotaconcernofIP.ICMPwasdesigned, inpart,tocompensate for
thisshortcoming. However, ICMPdoesnotcorrecterrors-it simplyreportsthem.Error
correction islefttothehigher-level protocols. Errormessages arealwayssenttotheorig­
inalsourcebecausetheonlyinformation available inthedatagram abouttherouteisthe
sourceanddestination IPaddresses. ICMPusesthesourceIPaddresstosendtheerror
messagetothesource(originator) ofthedatagram.
ICMPalwaysreportserrormessages totheoriginalsource.
Fivetypesoferrorsarehandled: destination unreachable, sourcequench,time
exceeded, parameter problems, andredirection (seeFigure21.9).
Figure21.9Error-reporting messages
Error
reporting
Time
exceeded
Type:11 Type:5
Thefollowing areimportant pointsaboutICMPerrormessages:
oNoICMPerrormessage willbegenerated inresponse toadatagram carrying an
ICMPerrormessage.
DNoICMPerrormessage willbegenerated forafragmented datagram thatisnot
thefirstfragment.
DNoIeMPerrormessage willbegenerated foradatagram havingamulticast
address.
DNoICMPerrormessage willbegenerated foradatagram havingaspecialaddress
suchas127.0.0.0 or0.0.0.0.SECTION 21.2ICMP 623
Notethatallerrormessages containadatasectionthatincludestheIPheaderofthe
originaldatagram plusthefirst8bytesofdatainthatdatagram. Theoriginaldatagram
headerisaddedtogivetheoriginalsource,whichreceivestheerrormessage, informa­
tionaboutthedatagram itself.The8bytesofdataareincluded because, aswewillsee
inChapter23onUDPandTCPprotocols, thefirst8bytesprovideinformation about
theportnumbers (UDPandTCP)andsequence number(TCP).Thisinformation is
neededsothesourcecaninformtheprotocols (TCPorUDP)abouttheerror.ICMP
formsanerrorpacket,whichisthenencapsulated inanIPdatagram (seeFigure21.10).
Figure21.10Contentsofdatafieldfortheerrormessages
8 : Restof
bytes IIPdataReceived datagram
ICMP
header.-- ~~---~_-_----J8 I
bytes :ICMPpacket
~_-~~~~j
....---------;-"c-+----"""""'~"""""_m 8 I
bytes :SentIPdatagram ___ -'===~ J
Destination Unreachable
Whenaroutercannotrouteadatagram orahostcannotdeliveradatagram, thedatagram
isdiscarded andtherouterorthehostsendsadestination-unreachable message backto
thesourcehostthatinitiatedthedatagram. Notethatdestination-unreachable messages
canbecreatedbyeitherarouterorthedestination host.
SourceQuench
TheIPprotocol isaconnectionless protocol. Thereisnocommunication between the
sourcehost,whichproduces thedatagram, therouters,whichforwardit,andthedestina­
tionhost,whichprocesses it.Oneoftheramifications ofthisabsenceofcommunication
isthelackofflowcontrol.IPdoesnothaveaflowcontrolmechanism embedded inthe
protocol. Thelackofflowcontrolcancreateamajorproblem intheoperation ofIP:
congestion. Thesourcehostneverknowsiftheroutersorthedestination hosthasbeen
overwhelmed withdatagrams. Thesourcehostneverknowsifitisproducing datagrams
fasterthancanbeforwarded byroutersorprocessed bythedestination host.
Thelackofflowcontrolcancreatecongestion inroutersorthedestination host.
Arouterorahosthasalimited-size queue(buffer)forincoming datagrams waitingto
beforwarded (inthecaseofarouter)ortobeprocessed (inthecaseofahost).Ifthe
datagrams arereceived muchfasterthantheycanbeforwarded orprocessed, the
queuemayoverflow. Inthiscase,therouterorthehosthasnochoicebuttodiscard
someofthedatagrams. Thesource-quench message inICMPwasdesigned toadda
kindofflowcontroltotheIP.Whenarouterorhostdiscards adatagram duetocon­
gestion,itsendsasource-quench message tothesenderofthedatagram. Thismessage
hastwopurposes. First,itinformsthesourcethatthedatagram hasbeendiscarded.
Second,itwarnsthesourcethatthereiscongestion somewhere inthepathandthatthe
sourceshouldslowdown(quench) thesendingprocess.624CHAPTER 21NETWORK LAYER:ADDRESS MAPPING, ERRORREPORTING, ANDMULTICASTING
TimeExceeded
Thetime-exceeded message isgenerated intwocases:AsweseeinChapter22,routers
useroutingtablestofindthenexthop(nextrouter)thatmustreceivethepacket.Ifthere
areerrorsinoneormoreroutingtables,apacketcantravelinalooporacycle,going
fromoneroutertothenextorvisitingaseriesofroutersendlessly. AswesawinChap­
ter20,eachdatagram contains afieldcalledtimetolivethatcontrols thissituation.
Whenadatagram visitsarouter,thevalueofthisfieldisdecremented by1.Whenthe
time-to-live valuereaches0,afterdecrementing, therouterdiscardsthedatagram. How­
ever,whenthedatagram isdiscarded, atime-exceeded message mustbesentbythe
routertotheoriginalsource.Second,atime-exceeded message isalsogenerated when
notallfragments thatmakeupamessage arriveatthedestination hostwithinacertain
timelimit.
Parameter Problem
Anyambiguity intheheaderpartofadatagram canCreateseriousproblems asthedata­
gramtravelsthroughtheInternet.Ifarouterorthedestination hostdiscovers anambig­
uousormissingvalueinanyfieldofthedatagram, itdiscards thedatagram andsendsa
parameter-problem message backtothesource.
Redirection
Whenarouterneedstosendapacketdestined foranothernetwork, itmustknowtheIP
addressofthenextappropriate router.Thesameistrueifthesenderisahost.Bothrouters
andhosts,then,musthavearoutingtabletofindtheaddressoftherouterorthenext
router.Routerstakepartintheroutingupdateprocess,aswewillseeinChapter22,and
aresupposed tobeupdatedconstantly. Routingisdynamic.
However, forefficiency, hostsdonottakepartintheroutingupdateprocessbecause
therearemanymorehostsinaninternetthanrouterS.Updating theroutingtablesofhosts
dynamically produces unacceptable traffic.Thehostsusuallyusestaticrouting.Whena
hostcomesup,itsroutingtablehasalimitednumberofentries.ItusuallyknowstheIP
addressofonlyonerouter,thedefaultrouter.Forthisreason,thehostmaysendadata­
gram,whichisdestined foranothernetwork, tothewrongrouter.Inthiscase,therouter
thatreceives thedatagram willforwardthedatagram tothecorrectrouter.However, to
updatetheroutingtableofthehost,itsendsaredirection message tothehost.Thiscon­
ceptofredirection isshowninFigure21.11.HostAwantstosendadatagram tohostB.
Figure21.11Redirection concept
Redirection A
LAN
~:::lP:::p::ac::ke::t::::R2
LAN
lPpacketBSECTION 21.2ICMP 625
RouterR2isobviously themostefficient routingchoice,buthostAdidnotchoose
routerR2.Thedatagram goestoR1instead.RouterR1,afterconsulting itstable,finds
thatthepacketshouldhavegonetoR2.ItsendsthepackettoR2and,atthesametime,
sendsaredirection message tohostA.HostA'sroutingtablecannowbeupdated.
Query
Inaddition toerrorreporting, ICMPcandiagnose somenetwork problems. Thisis
accomplished throughthequerymessages, agroupoffourdifferent pairsofmessages,
asshowninFigure21.12.InthistypeofICMPmessage, anodesendsamessage that
isanswered inaspecificformatbythedestination node.Aquerymessage isencapsu­
latedinanIPpacket,whichintumisencapsulated inadatalinklayerframe.However, in
thiscase,nobytesoftheoriginalIPareincludedinthemessage, asshowninFigure21.13.
Figure21.12Querymessages
Types:8and0 Types:13and14 Types:17and18 Types:10and9
Figure21.13Encapsulation ofICMPquerymessages
IeMP
Packet
IP IP
header Data
EchoRequestandReply
Theecho-request andecho-reply messages aredesigned fordiagnostic purposes. Net­
workmanagers andusersutilizethispairofmessages toidentifynetworkproblems. The
combination ofecho-request andecho-reply messages detennines whethertwosystems
(hostsorrouters)cancommunicate witheachother.Theecho-request andecho-reply
messages canbeusedtodetermine ifthereiscommunication attheIPlevel.Because
ICMPmessages areencapsulated inIPdatagrams, thereceiptofanecho-reply message
bythemachine thatsenttheechorequestisproofthattheIPprotocols inthesenderand
receiverarecommunicating witheachotherusingtheIPdatagram. Also, itisproofthat
theintermediate routersarereceiving, processing, andforwarding IPdatagrams. Today,
mostsystemsprovideaversionofthepingcommand thatcancreateaseries(insteadof
justone)ofecho-request andecho-reply messages, providing statistical information. We
willseetheuseofthisprogram attheendofthechapter.626CHAPTER 21NETWORK lAYER:ADDRESS MAPPING, ERRORREPORTING, ANDMULTICASTING
Timestamp RequestandReply
Twomachines (hostsorrouters)canusethetimestamp requestandtimestamp reply
messages todetermine theround-trip timeneededforanIPdatagram totravelbetween
them.Itcanalsobeusedtosynchronize theclocksintwomachines.
Address-Mask RequestandReply
AhostmayknowitsIPaddress, butitmaynotknowthecorresponding mask.For
example, ahostmayknowitsIPaddressas159.31.17.24, butitmaynotknowthatthe
corresponding maskis/24.Toobtainitsmask,ahostsendsanaddress-mask-request
message toarouterontheLAN.Ifthehostknowstheaddressoftherouter,itsendsthe
requestdirectlytotherouter.Ifitdoesnotknow,itbroadcasts themessage. Therouter
receiving theaddress-mask-request message responds withanaddress-mask-reply
message, providing thenecessary maskforthehost.ThiscanbeappliedtoitsfullIP
addresstogetitssubnetaddress.
RouterSolicitation andAdvertisement
Aswediscussed intheredirection messagesection,ahostthatwantstosenddatatoahost
onanothernetworkneedstoknowtheaddressofroutersconnected toitsownnetwork.
Also,thehostmustknowiftheroutersarealiveandfunctioning. Therouter-solicitation
androuter-advertisement messages canhelpinthissituation. Ahostcanbroadcast (or
multicast) arouter-solicitation message. Therouterorroutersthatreceivethesolicitation
message broadcast theirroutinginformation usingtherouter-advertisement message. A
routercanalsoperiodically sendrouter-advertisement messages evenifnohosthassolic­
ited.Notethatwhenaroutersendsoutanadvertisement, itannounces notonlyitsown
presence butalsothepresenceofallroutersonthenetworkofwhichitisaware.
Checksum
InChapter10,welearnedtheconceptandideaofthechecksum. InICMPthechecksum
iscalculated overtheentiremessage (headeranddata).
Example 21.2
Figure21.14showsanexampleofchecksum calculation forasimpleecho-request message. We
randomly chosetheidentifier tobe1andthesequence numbertobe9.Themessage isdivided
Figure21.14Exampleofchecksum calculation
Checksum~111010000 0 01008I0\0k-
II 9
TEST
8 &0~00001000 00000000o~00000000 00000000
1~00000000 00000001
9~00000000 00001001
T&E~01010100 01000101
S &T~01010011 01010100
Sum~10101111 10100011
111SECTION 21.2ICMP 627
into16-bit(2-byte)words.Thewordsareaddedandthesumiscomplemented. Nowthesender
canputthisvalueinthechecksum field.
Debugging Tools
ThereareseveraltoolsthatcanbeusedintheInternetfordebugging. Wecandetermine
theviability ofahostorrouter.Wecantracetherouteofapacket.Weintroduce two
toolsthatuseICMPfordebugging: pingandtraceroute. Wewillintroduce moretools
infuturechapters afterwehavediscussed thecorresponding protocols.
Ping
Wecanusethepingprogram tofindifahostisaliveandresponding. Weusepinghere
toseehowitusesICMPpackets.
ThesourcehostsendsICMPecho-request messages (type:8,code:0);thedestina­
tion,ifalive,responds withICMPecho-reply messages. Thepingprogram setstheidenti­
fierfieldintheecho-request andecho-reply message andstansthesequence number
from0;thisnumberisincremented by1eachtimeanewmessage issent.Notethatping
cancalculate theround-trip time.Itinsertsthesendingtimeinthedatasectionofthe
message. Whenthepacketarrives,itsubtracts thearrivaltimefromthedeparture timeto
gettheround-trip time(RTT).
Example 21.3
Weusethepingprogram totesttheserverfhda.edu. Theresultisshownbelow:
$pingthda.edu
PINGthda.edu (153.18.8.1) 56(84)bytesofdata.
64bytesfromtiptoe.fhda.edu (153.18.8.1): icmp_seq=O
64bytesfromtiptoe.fhda.edu (153.18.8.1): icmp_seq=l
64bytesfromtiptoe.fhda.edu (153.18.8.1): icmp_seq=2
64bytesfromtiptoe.fhda.edu (153.18.8.1): icmp_seq=3
64bytesfromtiptoe.fhda.edu (153.18.8.1): icmp_seq=4
64bytesfromtiptoe.fhda.edu (153.18.8.1): icmp_seq=5
64bytesfromtiptoe.fhda.edu (153.18.8.1): icmp_seq=6
64bytesfromtiptoe.:fhda.edu (153.18.8.1): icmp_seq=7
64bytesfromtiptoe.:fhda.edu (153.18.8.1): icmp_seq=8
64bytesfromtiptoe.fhda.edu (153.18.8.1): icmp_seq=9
64bytesfromtiptoe.:fhda.edu (153.18.8.1): icmp_seq=lOttl=62
ttl=62
ttl=62
ttl=62
ttl=62ttl=62
tt1=62ttl=62
ttl=62
ttl=62
ttl==62time=1.91 ms
time:=2.04 ms
time=1.90 ms
time=1.97 ms
time=1.93 mstime=2.00 ms
time=1.94 ms
time=1.94 ms
time=1.97 ms
time=1.89 ms
time=1.98 ms
---thda.edu pingstatistics ---
11packetstransmitted, 11received, 0%packetloss,time10103ms
rttminJavg/max =1.899/1.955/2.041 ms
Thepingprogram sendsmessages withsequence numbers startingfromO.Foreachprobeit
givesustheRTTtime.TheTTL(timetolive)fieldintheIPdatagram thatencapsulates anICMP
messagehasbeensetto62,whichmeansthepacketcannottravelmarethan62hops.Atthebegin­
ning,pingdefinesthenumberofdatabytesas56andthetotalnumberofbytesas84.Itisobvious
thatifweadd8bytesofICMPheaderand20bytesofIPheaderto56,theresultis84.However,628CHAPTER 21NETWORK IAYER:ADDRESS MAPPING, ERRORREPORTiNG, ANDMULTiCASTING
notethatineachprobepingdefinesthenumberofbytesas64.Thisisthetotalnumberofbytesin
theICMPpacket(56+8).Thepingprogramcontinues tosendmessages, ifwedonotstopitby
usingtheinterrupt key(ctrl+c,forexample). Afteritisinterrupted, itprintsthestatistics ofthe
probes.Ittellsusthenumberofpacketssent,thenumberofpacketsreceived, thetotaltime,and
theRTTminimum, maximum, andaverage.Somesystemsmayprintmoreinfonnation.
Tracerollte
Thetraceroute program inUNIXortracertinWindows canbeusedtotracetheroute
ofapacketfromthesourcetothedestination. Wehaveseenanapplication ofthe
tracerouteprogramtosimulate theloosesourcerouteandstrictsourcerouteoptionsof
anIPdatagram inChapter20.Weusethisprogram inconjunction withICMPpackets
inthischapter.Theprogram elegantly usestwoICMPmessages, timeexceeded and
destination unreachable, tofindtherouteofapacket.Thisisaprogram attheapplica­
tionlevelthatusestheservicesofUDP(seeChapter23).Letusshowtheideaofthe
traceroute programbyusingFigure21.15.
Figure21.15 Thetraceroute program operation
HostA
Network
Network
R3HosteHostB
Network
Giventhetopology, weknowthatapacketfromhostAtohostBtravelsthrough
routersRlandR2.However, mostofthetime,wearenotawareofthistopology. There
couldbeseveralroutesfromAtoB.Thetraceroute program usestheICMPmessages
andtheTTL(timetolive)fieldintheIPpackettofindtheroute.
1.Thetraceroute programusesthefollowing stepstofindtheaddressoftherouterRl
andtheround-trip timebetweenhostA androuterRl.
a.Thetraceroute application athostAsendsapackettodestination BusingUDP;
themessageisencapsulated inanIPpacketwithaTTLvalueof1.Theprogram
notesthetimethepacketissent.
b.RouterRlreceivesthepacketanddecrements thevalueofTTLtoO.Itthendis­
cardsthepacket(because TTLis0).Therouter,however, sendsatime-exceeded
ICMPmessage (type:11,code:0)toshowthattheTTLvalueis0andthepacket
wasdiscarded.
c.Thetracerouteprogram receivestheICMPmessages andusesthedestination
addressoftheIPpacketencapsulating ICMPtofindtheIPaddressofrouterRl.
Theprogram alsomakesnoteofthetimethepackethasarrived.Thedifference
betweenthistimeandthetimeatstepaistheround-trip time.SECTION 21.2ICMP 629
Thetraceroute program repeatsstepsatocthreetimestogetabetteraverage
round-trip time.Thefirsttriptimemaybemuchlongerthanthesecondorthird
becauseittakestimefortheARPprogram tofindthephysical addressofrouter
RI.Forthesecondandthirdtrips,ARPhastheaddressinitscache.
2.Thetraceroute program repeatstheprevious stepstofindtheaddressofrouterR2
andtheround-trip timebetween hostAandrouterR2.However, inthisstep,the
valueofTTLissetto2.SorouterRIforwards themessage, whilerouterR2dis­
cardsitandsendsatime-exceeded ICMPmessage.
3.Thetraceroute programrepeatsstep2tofindtheaddressofhostBandtheround-trip
timebetweenhostAandhostB.WhenhostBreceivesthepacket,itdecrements the
valueofTIL,butitdoesnotdiscardthemessage sinceithasreacheditsfinaldesti­
nation.HowcananICMPmessagebesentbacktohostA?Thetraceroute program
usesadifferent strategyhere.Thedestination portoftheUDPpacketissettoone
thatisnotsupported bytheUDPprotocol. WhenhostBreceivesthepacket,itcannot
findanapplication programtoacceptthedelivery.Itdiscardsthepacketandsendsan
ICMPdestination-unreachable message (type:3,code:3)tohostA.Notethatthis
situation doesnothappenatrouterRIorR2becausearouterdoesnotcheckthe
UDPheader.Thetraceroute program recordsthedestination addressofthearrived
IPdatagram andmakesnoteoftheround-trip time.Receiving thedestination­
unreachable message withacodevalue3isanindication thatthewholeroutehas
beenfoundandthereisnoneedtosendmorepackets.
Example 21.4
Weusethetracerouteprogram tofindtheroutefromthecomputer voyager.deanza.edu tothe
serverfhda.edu. Thefollowing showstheresult:
$traceroute fbda.edu
traceroute tofbda.edu
1Dcore.fhda.edu
2Dbackup.fhda.edu
3tiptoe.fhda.edu(153.18.8.1),30 hopsmax,38bytepackets
(153.18.31.254) 0.995ms0.899ms
(153.18.251.4) 1.039fiS1.064fiS
(153.18.8.1) 1.797illS1.642ms0.878ms
1.083fiS
1.757fiS
Theunnumbered lineafterthecommand showsthatthedestination is153.18.8.1. TheTIL
valueis30hops.Thepacketcontains 38bytes:20bytesofIPheader,8bytesofUDPheader,and
10bytesofapplication data.Theapplication dataareusedbytraceroute tokeeptrackofthe
packets.
Thefirstlineshowsthefirstroutervisited.TherouterisnamedDcore.fhda.edu withIP
address153.18.31.254. Thefirstround-trip timewas0.995ms,thesecondwas0.899ms,andthe
thirdwas0.878ms.
Thesecondlineshowsthesecondroutervisited.TherouterisnamedDbackup.fhda.edu
withIPaddress153.18.251.4. Thethreeround-trip timesarealsoshown.
Thethirdlineshowsthedestination host.Weknowthatthisisthedestination hostbecause
therearenomorelines.Thedestination hostistheserverthda.edu, butitisnamedtiptoe.fhda.edu
withtheIPaddress153.18.8.1. Thethreeround-trip timesarealsoshown.
Example 21.5
Inthisexample, wetracealongerroute,theroutetoxerox.com.630CHAPTER 21NETWORK LAYER:ADDRESS MAPPING, ERRORREPORTING, ANDMULTICASTING
$traceroute xerox.com
traceroute toxerox.com (13.1.64.93), 30hopsmax,38bytepackets
1Dcore.fbda.edu (153.18.31.254) 0.622ms0.891ms
2Ddmz.fbda.edu (153.18.251.40) 2.132ms2.266ms
3Cinic.fhda.edu (153.18.253.126) 2.110ms2.145ms
4cenic.net (137.164.32.140) 3.069ms2.875ms
5cenic.net (137.164.22.31) 4.205ms4.870ms0.875ms
2.094ms
1.763ms
2.930ms
4.197ms
14snfc21.pbi.net (151.164.191.49) 7.656ms7.129ms6.866ms
15sbcglobaLnet (151.164.243.58) 7.844ms7.545ms7.353ms
16pacbell.net (209.232.138.114) 9.857ms9.535ms9.603ms
17209.233.48.223 (209.233.48.223) 10.634ms 10.771ms10.592ms
18alpha.Xerox.COM (13.1.64.93) 11.172ms11.048ms10.922ms
Herethereare17hopsbetween sourceanddestination. Notethatsomeround-trip timeslook
unusual.Itcouldbethatarouterwastoobusytoprocessthepacketimmediately.
21.3IGMP
TheIPprotocol canbeinvolved intwotypesofcommunication: unicasting andmulti­
casting.Unicasting isthecommunication between onesenderandonereceiver.Itisa
one-to-one communication. However, someprocesses sometimes needtosendthesame
message toalargenumberofreceivers simultaneously. Thisiscalledmulticasting,
whichisaone-to-many communication. Multicasting hasmanyapplications. Forexam­
ple,multiple stockbrokers cansimultaneously beinformed ofchangesinastockprice,
ortravelagentscanbeinformed ofaplanecancellation. Someotherapplications include
distancelearningandvideo-on-demand.
TheInternet GroupManagement Protocol (IGMP) isoneofthenecessary, but
notsufficient (aswewillsee),protocols thatisinvolved inmulticasting. IGMPisa
companion totheIPprotocol.
GroupManagement
Formulticasting intheInternetweneedroutersthatareabletoroutemulticast packets.
Theroutingtablesoftheseroutersmustbeupdatedbyusingoneofthemulticasting
routingprotocols thatwediscussinChapter22.
IGMPisnotamulticasting routingprotocol; itisaprotocol thatmanages group
membership. Inanynetwork, thereareoneormoremulticast routersthatdistribute
multicast packetstohostsorotherrouters.TheIGMPprotocolgivesthemulticast routers
information aboutthemembership statusofhosts(routers) connected tothenetwork.
Amulticast routermayreceivethousands ofmulticast packetseverydayfordifferent
groups.Ifarouterhasnoknowledge aboutthemembership statusofthehosts,itmust
broadcast allthesepackets.Thiscreatesalotoftrafficandconsumes bandwidth. Abetter
solutionistokeepalistofgroupsinthenetworkforwhichthereisatleastoneloyal
member. IGMPhelpsthemulticast routercreateandupdatethislist.SECTION 21.3IGMP 631
IGMPisagroupmanagement protocol.Ithelpsamulticast routercreate
andupdatealistofloyalmembers relatedtoeachrouterinterface.
IGMPMessages
IOMPhasgonethroughtwoversions. WediscussIOMPv2, thecurrentversion.IOMPv2
hasthreetypesofmessages: thequery,themembership report,andtheleavereport.
Therearetwotypesofquerymessages: generalandspecial(seeFigure21.16).
Figure21.16IGMPmessage types
Message Format
Figure21.17showstheformatofanIOMP(version2)message.
Figure21.17IGMPmessagefonnat
I·8bits
Type8bits
l~axim~ responset
Ietime8bits 8bits
Groupaddressinmembership andleavereportsandspecialquery;alIOsingeneralquery
oType.This8-bitfielddefinesthetypeofmessage, asshowninTable21.1.Thevalue
ofthetypeisshowninbothhexadecimal andbinarynotation.
Table21.1IGMPtypefield
Type Value
Generalorspecialquery Ox11or00010001
Membership report Ox16or00010110
Leavereport Ox17or00010111
oMaximum Response Time.This8-bitfielddefinestheamountoftimeinwhicha
querymustbeanswered. Thevalueisintenthsofasecond;forexample, ifthe632 CHAPTER 21NETWORK LAYER:ADDRESS MAPPING, ERRORREPORTING, ANDMULTICASTING
valueis100,itmeans10s.Thevalueisnonzerointhequerymessage; itissetto
zerointheothertwomessage types.Wewillseeitsuseshortly.
DChecksum. Thisisa16-bitfieldcarryingthechecksum. Thechecksum iscalculated
overthe8-bytemessage.
DGroupaddress. Thevalueofthisfieldis0forageneralquerymessage. Thevalue
definesthegroupid(multicast addressofthegroup)inthespecialquery,themem­
bershipreport,andtheleavereportmessages.
IGMPOperation
IGMPoperateslocally.Amulticast routerconnected toanetworkhasalistofmulticast
addresses ofthegroupswithatleastoneloyalmemberinthatnetwork(seeFigure21.18).
Figure21.18IGMPoperation
Toanothernetwork229.60.12.8...
NetworkListofgroups
havingloyalmembers
225.70.8.20
231.24.60.9
Toothernetworks Toanothernetwork
Foreachgroup,thereisonerouterthathasthedutyofdistributing themulticast
packetsdestined forthatgroup.Thismeansthatiftherearethreemulticast routers
connected toanetwork, theirlistsofgroupids aremutually exclusive. Forexample, in
Figure21.18onlyrouterRdistributes packetswiththemulticast addressof225.70.8.20.
Ahostormulticast routercanhavemembership inagroup.Whenahosthasmember­
ship,itmeansthatoneofitsprocesses (anapplication program) receivesmulticast packets
fromsomegroup.Whenarouterhasmembership, itmeansthatanetworkconnected to
oneofitsotherinterfaces receivesthesemulticast packets.Wesaythatthehostorthe
routerhasaninterestinthegroup.Inbothcases,thehostandtherouterkeepalistof
groupids andrelaytheirinteresttothedistributing router.
Forexample, inFigure21.18,routerRisthedistributing router.Therearetwo
othermulticast routers(R1andR2)that,depending onthegrouplistmaintained by
routerR,couldbetherecipients ofrouterRinthisnetwork. RoutersRIandR2maybe
distributors forsomeofthesegroupsinothernetworks, butnotonthisnetwork.
JoiningaGroup
Ahostoraroutercanjoinagroup.Ahostmaintains alistofprocesses thathavemember­
shipinagroup.Whenaprocesswantstojoinanewgroup,itsendsitsrequesttothehost.SECTION 21.3IGMP 633
Thehostaddsthenameoftheprocessandthenameoftherequested grouptoitslist.If
thisisthefirstentryforthisparticular group,thehostsendsamembership reportmes­
sage.Ifthisisnotthefirstentry,thereisnoneedtosendthemembership reportsincethe
hostisalreadyamemberofthegroup;italreadyreceivesmulticast packetsforthisgroup.
Theprotocol requires thatthemembership reportbesenttwice,oneaftertheother
withinafewmoments. Inthisway,ifthefirstoneislostordamaged, thesecondone
replaces it.
InIGMP,amembership reportissenttwice,oneaftertheother.
LeavingaGroup
Whenahostseesthatnoprocessisinterested inaspecificgroup,itsendsaleavereport.
Similarly, whenarouterseesthatnoneofthenetworks connected toitsinterfaces is
interested inaspecificgroup,itsendsaleavereportaboutthatgroup.
However, whenamulticast routerreceives aleavereport,itcannotimmediately
purgethatgroupfromitslistbecause thereportcomesfromjustonehostorrouter;
theremaybeotherhostsorroutersthatarestillinterested inthatgroup.Tomakesure,
theroutersendsaspecialquerymessage andinsertsthegroupid, ormulticast address,
relatedtothegroup.Therouterallowsaspecified timeforanyhostorroutertorespond.
If,duringthistime,nointerest(membership report)isreceived, therouterassumes that
therearenoloyalmembers inthenetwork andpurgesthegroupfromitslist.
Monitoring Membership
Ahostorroutercanjoinagroupbysendingamembership reportmessage. Itcanleave
agroupbysendingaleavereportmessage. However, sendingthesetwotypesofreports
isnotenough. Consider thesituation inwhichthereisonlyonehostinterested ina
group,butthehostisshutdownorremoved fromthesystem.Themulticast routerwill
neverreceivealeavereport.Howisthishandled? Themulticast routerisresponsible
formonitoring allthehostsorroutersinaLANtoseeiftheywanttocontinue their
membership inagroup.
Therouterperiodically (bydefault,every125s)sendsageneralquerymessage. In
thismessage, thegroupaddressfieldissetto0.0.0.0.Thismeansthequeryformember­
shipcontinuation isforallgroupsinwhichahostisinvolved, notjustone.
Thegeneralquerymessagedoesnotdefineaparticular group.
Therouterexpectsananswerforeachgroupinitsgrouplist;evennewgroupsmay
respond. Thequerymessage hasamaximum response timeof10s(the value ofthe
fieldisactually 100,butthisisintenthsofasecond). Whenahostorrouterreceives the
generalquerymessage, itresponds withamembership reportifitisinterested ina
group.However, ifthereisacommon interest(twohosts,forexample, areinterested in
thesamegroup),onlyoneresponse issentforthatgrouptopreventunnecessary traffic.
Thisiscalledadelayedresponse. Notethatthequerymessage mustbesentbyonlyone634CHAPTER 21NETWORK LAYER:ADDRESS MAPPING, ERRORREPORTING, ANDMULTICASTING
router(normally calledthequeryrouter),alsotopreventunnecessary traffic.Wediscuss
thisissueshortly.
DelayedResponse
Topreventunnecessary traffic,IGMPusesadelayedresponse strategy. Whenahostor
routerreceivesaquerymessage, itdoesnotrespondimmediately; itdelaystheresponse.
Eachhostorrouterusesarandomnumbertocreateatimer,whichexpiresbetweenIand
lOs.Theexpiration timecanbeinstepsofIsorless.Atimerissetforeachgroupinthe
list.Forexample, thetimerforthefirstgroupmayexpirein2s,butthetimerforthethird
groupmayexpirein5s.Eachhostorrouterwaitsuntilitstimerhasexpiredbeforesend­
ingamembership reportmessage. Duringthiswaitingtime,ifthetimerofanotherhostor
router,forthesamegroup,expiresearlier,thathostorroutersendsamembership report.
Because, aswewillseeshortly,thereportisbroadcast, thewaitinghostorrouterreceives
thereportandknowsthatthereisnoneedtosendaduplicate reportforthisgroup;thus,
thewaitingstationcancelsitscorresponding timer.
Example 21.6
Imaginetherearethreehostsinanetwork, asshowninFigure21.19.
Figure21.19Example 21.6
Group Timer Group Timer Group Timer
225.14.0.0 30228.42.0.0 48225.14.0.0 62
228.42.0.0 12238.71.0.0 50230.43.0.0 70
230.43.0.0 80
Toothernetworks
A B C
~R ~~¥-
Aquerymessage wasreceived attime0;therandomdelaytime(intenthsofseconds) for
eachgroupisshownnexttothegroupaddress. Showthesequence ofreportmessages.
Solution
Theeventsoccurinthissequence:
a.Time12:Thetimerfor228.42.0.0 inhostAexpires,andamembership reportissent,
whichisreceived bytherouterandeveryhostincluding hostBwhichcancelsitstimer
for228.42.0.0.
b.Time30:Thetimerfor225.14.0.0 inhostAexpires,andamembership reportissent,
whichisreceived bytherouterandeveryhostincluding hostCwhichcancelsitstimer
for225.14.0.0.
c.Time50:Thetimerfor238.71.0.0 inhostBexpires,andamembership reportissent,
whichisreceived bytherouterandeveryhost.
d.Time70:Thetimerfor230.43.0.0 inhostCexpires,andamembership reportissent,
whichisreceived bytherouterandeveryhostincluding hostAwhichcancelsitstimer
for230.43.0.0.SECTION 21.3IGMP 635
Notethatifeachhosthadsentareportforeverygroupinitslist,therewouldhavebeenseven
reports;withthisstrategyonlyfourreportsaresent.
QueryRouter
Querymessages may createalotofresponses. Topreventunnecessary traffic,IGMP
designates onerouterasthequeryrouterforeachnetwork. Onlythisdesignated router
sendsthequerymessage, andtheotherroutersarepassive(theyreceiveresponses and
updatetheirlists).
Encapsulation
TheIGMPmessage isencapsulated inanIPdatagram, whichisitselfencapsulated ina
frame.SeeFigure21.20.
Figure21.20Encapsulation ofIGMPpacket
8bytes
IGMP
message
W IP
header data
Frame Frame TrailerI header data (ifany)
Encapsulation atNetwork Layer
Thevalueoftheprotocol fieldis2fortheIGMPprotocol. EveryIPpacketcarryingthis
valueinitsprotocol fieldhasdatadelivered totheIGMPprotocol. Whenthemessage is
encapsulated intheIPdatagram, thevalueofTTLmustbe1.Thisisrequired because
thedomainofIGMPistheLAN.NoIGMPmessage musttravelbeyondtheLAN.A
TTLvalueof1guarantees thatthemessage doesnotleavetheLANsincethisvalueis
decremented to0bythenextrouterand,consequently, thepacketisdiscarded. Table21.2
showsthedestination IPaddressforeachtypeofmessage.
TheIPpacketthatcarriesanIGMPpackethasavalueof1initsTTLfield.
Table21.2Destination IPaddresses
Type IPDestination Address
Query 224.0.0.1 Allsystemsonthissubnet
Membership report Themulticast addressofthegroup
Leavereport 224.0.0.2 Allroutersonthissubnet
Aquerymessage ismulticast byusingthemulticast address224.0.0.1 Allhosts
andallrouterswillreceivethemessage. Amembership reportismulticast usinga636 CHAPTER 21NETWORK LAYER:ADDRESS MAPPING, ERRORREPORTING, ANDMULTICASTING
destination addressequaltothemulticast addressbeingreported (groupid). Everysta­
tion(hostorrouter)thatreceives thepacketcanimmediately determine (fromthe
header)thegroupforwhichareporthasbeensent.Asdiscussed previously, thetimers
forthecorresponding unsentreportscanthenbecanceled. Stationsdonotneedtoopen
thepackettofindthegroupid. Thisaddressisduplicated inapacket;it'spartofthe
message itselfandalsoafieldintheIPheader.Theduplication prevents errors.Aleave
reportmessage ismulticast usingthemulticast address224.0.0.2 (allroutersonthis
subnet)sothatroutersreceivethistypeofmessage. Hostsreceivethismessage too,but
disregard it.
Encapsulation atDataLinkLayer
Atthenetwork layer,theIGMPmessage isencapsulated inanIPpacketandistreated
asanIPpacket.However, because theIPpackethasamulticast IPaddress, theARP
protocol cannotfindthecorresponding MAC(physical) addresstoforwardthepacket
atthedatalinklayer.Whathappens nextdepends onwhether theunderlying datalink
layersupports physical multicast addresses.
Physical Multicast Support MostLANssupportphysicalmulticast addressing. Ether­
netisoneofthem.AnEthernet physical address(MACaddress) issixoctets(48bits)
long.Ifthefirst25bitsinanEthernet addressare0000000100000000010111100, this
identifies aphysicalmulticast addressfortheTCP/IPprotocol. Theremaining 23bitscan
beusedtodefineagroup.ToconvertanIPmulticast addressintoanEthernet address,the
multicast routerextractstheleastsignificant 23bitsofaclassDIPaddressandinserts
themintoamulticast Ethernet physicaladdress(seeFigure21.21).
Figure21.21 Mapping classDtoEthernet physical address
-[
23bitsofmulticast address32-bitclassDaddress
I
I
II
I
I
I--------------------,10000000100000000010111100 2__3__b__its__o__f__ph__y__sic__a__la__dd__re__s__s_I
,- 48-bitEthernet address -I
However, thegroupidentifier ofaclassDIPaddressis28bitslong,whichimplies
that5bitsisnotused.Thismeansthat32(25)multicast addresses attheIPlevelare
mapped toasinglemulticast address. Inotherwords,themapping ismany-to-one
insteadofone-to-one. Ifthe5leftmost bitsofthegroupidentifier ofaclassDaddress
arenotallzeros,ahostmayreceivepacketsthatdonotreallybelongtothegroupin
whichitisinvolved. Forthisreason,thehostmustchecktheIPaddressanddiscardany
packetsthatdonotbelongtoit.
OtherLANssupportthesameconceptbuthavedifferent methods ofmapping.SECTION 21.3IGMP 637
AnEthernet multicast physicaladdressisintherange
01:00:5E:00:OO:OO to01:00:5E:7F:FF:FF.
Example 21.7
Changethemulticast IPaddress230.43.14.7 toanEthernet multicast physicaladdress.
Solution
Wecandothisintwosteps:
a.Wewritetherightmost 23bitsoftheIPaddressinhexadecimal. Thiscanbedonebychanging
therightmost 3bytestohexadecimal andthensubtracting 8fromtheleftmostdigitifitis
greaterthanorequalto8.Inourexample, theresultis2B:OE:07.
b.WeaddtheresultofpartatothestartingEthernet multicast address, whichis
01:00:5E:00:00:00. Theresultis
01:00:5E:2B:OE:07
Example 21.8
Changethemulticast IPaddress238.212.24.9 toanEthernetmulticast address.
Solution
a.Therightmost 3bytesinhexadecimal isD4:18:09.Weneedtosubtract8fromtheleftmost
digit,resulting in54:18:09.
b.WeaddtheresultofpartatotheEthernet multicast startingaddress.Theresultis
01:00:5E:54: 18:09
NoPhysical Multicast Support MostWANsdonotsupportphysicalmulticast address­
ing.Tosendamulticast packetthroughthesenetworks, aprocesscalledtunneling isused.
Intunneling, themulticast packetisencapsulated inaunicastpacketandsentthroughthe
network, whereitemergesfromtheothersideasamulticast packet(seeFigure21.22).
Figure21.22 Tunneling
Multicast IPdatagram
HeaderI Data
Header Data
UnicastIPdatagram
NetstatUtility
Thenetstatutilitycanbeusedtofindthemulticast addresses supported byaninterface.638 CHAPTER 21NETWORK LAYER:ADDRESS MAPPING, ERRORREPORTING, ANDMULTICASTING
Example 21.9
Weusenetstatwiththreeoptions:-n,-r,and-a.The-noptiongivesthenumericversionsofIP
addresses, the-roptiongivestheroutingtable,andthe-aoptiongivesalladdresses (unicastand
multicast). Notethatweshowonlythefieldsrelativetoourdiscussion. "Gateway" definesthe
router,"Iface"definestheinterface.
$netstat-nra
KernelIProutingtable
Destination Gateway
153.18.16.0 0.0.0.0
169.254.0.0 0.0.0.0
127.0.0.0 0.0.0.0
224.0.0.0 0.0.0.0
0.0.0.0 153.18.31.254Mask
255.255.240.0
255.255.0.0
255.0.0.0
224.0.0.0
0.0.0.0Flags
U
U
U
u
vaIface
ethO
ethO
10
ethO
ethO
Natethatthemulticast addressisshownincolor.Anypacketwithamulticast addressfrom
224.0.0.0 to239.255.255.255 ismaskedanddelivered totheEthernet interface.
21.4ICMPv6
Wediscussed 1Pv6inChapter20.Anotherprotocolthathasbeenmodified inversion6of
theTCPIIPprotocolsuiteisICMP(ICMPv6). Thisnewversionfollowsthesamestrategy
andpurposes ofversion4.ICMPv4 hasbeenmodified tomakeitmoresuitableforIPv6.
Inaddition, someprotocols thatwereindependent inversion4arenowpartofInternet­
working ControlMessage Protocol (ICMPv6). Figure21.23compares thenetwork
layerofversion4toversion6.
Figure21.23 Comparison ofnetworklayersinversion4andversion6
Network layerinversion4 Network layerinversion6
TheARPandIGMPprotocols inversion4arecombined inICMPv6. TheRARP
protocol isdroppedfromthesuitebecauseitwasrarelyusedandBOOTPhasthesame
functionality.
JustasinICMPv4, wedividetheICMPmessages intotwocategories. However,
eachcategory hasmoretypesofmessages thanbefore.
ErrorReporting
Aswesawinourdiscussion ofversion4,oneofthemainresponsibilities ofICMPisto
reporterrors.Fivetypesoferrorsarehandled: destination unreachable, packettoobig,
timeexceeded, parameter problems, andredirection. ICMPv6 formsanerrorpacket,SECTION 21.4ICMPv6 639
whichisthenencapsulated inanIPdatagram. Thisisdelivered totheoriginalsourceof
thefaileddatagram. Table21.3compares theerror-reporting messages ofICMPv4
withICMPv6. Thesource-quench messageiseliminated inversion6becausethepriority
andtheflowlabelfieldsallowtheroutertocontrolcongestion anddiscardtheleast
important messages. Inthisversion,thereisnoneedtoinformthesendertoslowdown.
Thepacket-too-big message isaddedbecausefragmentation istheresponsibility ofthe
senderinIPv6.Ifthesenderdoesnotmaketherightpacketsizedecision, therouterhas
nochoicebuttodropthepacketandsendanerrormessage tothesender.
Table21.3Comparison oferror-reporting messages inICMPv4 andICMPv6
TypeofMessage Version4 Version6
Destination unreachable Yes Yes
Sourcequench Yes No
Packettoobig No Yes
Timeexceeded Yes Yes
Parameter problem Yes Yes
Redirection Yes Yes
Destination Unreachable
Theconceptofthedestination-unreachable message isexactlythesameasdescribed
forICMPversion4.
PacketTooBig
Thisisanewtypeofmessage addedtoversion6.Ifarouterreceivesadatagram thatis
largerthanthemaximum transmission unit(MTU)sizeofthenetworkthroughwhich
thedatagram shouldpass,twothingshappen.First,therouterdiscards thedatagram
andthenanICMPerrorpacket-a packet-too-big message-is senttothesource.
TimeExceeded
Thismessageissimilartotheoneinversion4.
Parameter Problem
Thismessageissimilartoitsversion4counterpart.
Redirection
Thepurposeoftheredirection message isthesameasdescribed forversion4.
Query
Inaddition toerrorreporting, ICMPcandiagnose somenetwork problems. Thisis
accomplished throughthequerymessages. Fourdifferentgroupsofmessages havebeen
defined:echorequestandreply,routersolicitation andadvertisement, neighbor solicita­
tionandadvertisement, andgroupmembership. Table21.4showsacomparison between640CHAPTER 21NETWORK LAYER:ADDRESS MAPPING, ERRORREPORTING, ANDMULTICASTING
thequerymessages inversions4and6.Twosetsofquerymessages areeliminated from
ICMPv6: time-stamp requestandreply-andaddress-mask requestandreply.Thetime­
stamprequestandreplymessages areeliminated becausetheyareimplemented inother
protocols suchasTCPandbecausetheywererarelyusedinthepast.Theaddress-mask
requestandreplymessages areeliminated inIPv6becausethesubnetsectionofan
addressallowsthesubscriber touseupto232-1subnets.Therefore, subnetmasking, as
definedinIPv4,isnotneededhere.
Table21.4Comparison ofquerymessages inICMPv4 andICMPv6
TypeofMessage Version4Version6
Echorequestandreply Yes Yes
Timestamp requestandreply Yes No
Address-mask requestandreply Yes No
Routersolicitation andadvertisement Yes Yes
Neighbor solicitation andadvertisement ARP Yes
Groupmembership IGMP Yes
EchoRequestandReply
Theideaandformatoftheechorequestandreplymessages arethesameasthosein
version4.
RouterSolicitation andAdvertisement
Theideabehindtherouter-solicitation and-advertisement messages isthesameasin
version4.
Neighbor Solicitation andAdvertisement
Aspreviously mentioned, thenetworklayerinversion4containsanindependent protocol
calledAddressResolution Protocol(ARP).Inversion6,thisprotocoliseliminated, and
its duties areincluded inICMPv6. Theideaisexactlythesame,buttheformatofthe
message haschanged.
GroupMembership
Aspreviously mentioned, thenetworklayerinversion4containsanindependent protocol
calledIGMP.Inversion6,thisprotocol iseliminated, anditsdutiesareincluded in
ICMPv6. Thepurposeisexactlythesame.
21.5RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollow­
ingbooksandsite.Theitemsinbrackets [...Jrefertothereference listattheendof
thetext.SECTION21.6 KEYTERMS 641
Books
ARPandRARParediscussed inChapter7of[For06]andChapters 4and5of[Ste94].
ICMPisdiscussed inChapter9of[For06]andChapter6of[Ste94].IGMPisdiscussed
inChapter10of[For06]andChapter13of[Ste94].BOOTPandDHCParediscussed in
Chapter16of[For06]andChapter16of[Ste94].ICMPv6 isdiscussed inChapter27of
[For06].
Site
owww.ietf.org/rfc.html Information aboutRFCs
RFCs
Adiscussion ofARPandRARPcanbefoundinfollowing RFCs:
826,903,925,1027,1293,1329,1433,1868,1931,2390
Adiscussion ofICMPcanbefoundinthefollowing RFCs:
777,792,1016,1018,1256,1788,2521
Adiscussion ofIGMPcanbefoundinthefollowing RFCs:
966,988,1054,1112, 1301,1458, 1469,1768,2236,2357,2365,2502,2588
Adiscussion ofBOOTPandDHCPcanbefoundinthefollowing RFCs:
951,1048,1084,1395,1497,1531,1532,1533,1534, 1541,1542,2131,2132
21.6KEYTERMS
address-mask-reply message
address-mask-request message
addressresolution protocol (ARP)
Bootstrap Protocol (BOOTP)
delayedresponse strategy
destination-unreachable message
dynamic configuration protocol
Dynamic HostConfiguration Protocol
(DHCP)
dynamic mapping
echo-request andecho-reply messages
error-reporting messagegeneralquerymessage
groupid
groupmembership
InternetControlMessage Protocol
(ICMP)
InternetGroupManagement Protocol
(IGMP)
Internetworking ControlMessage
Protocol, version6(ICMPv6)
lease
leavereport
membership report642CHAPTER 21NETWORK LAYER:ADDRESS MAPPING, ERRORREPORTING, ANDMULTICASTING
multicast address
multicast router
multicasting
neighbor-solicitation andadvertisement
message
packet-too-big message
parameter-problem message
physicaladdress
proxyARP
querymessage
queryrouter
redirection message
relayagentreverseaddressresolution protocol
(RARP)
router-solicitation androuter-
advertisement messages
source-quench message
specialquerymessage
staticmapping
time-exceeded message
timestamp requestandtimestamp
replymessages
traceroute
tunneling
21.7SUMMARY
oDelivery ofapackettoahostorrouterrequirestwolevelsofaddresses: logicaland
physical. Aphysicaladdressidentifies ahostorrouteratthephysicallevel.
oMapping ofalogicaladdresstoaphysicaladdresscanbestaticordynamic.
oStaticmapping involves alistoflogicalandphysical addresscorrespondences;
maintenance ofthelistrequireshighoverhead.
oTheaddressresolution protocol (ARP)isadynamic mapping methodthatfindsa
physicaladdress,givenalogicaladdress.
oInproxyARP,arouterrepresents asetofhosts.WhenanARPrequestseeksthe
physical addressofanyhostinthisset,theroutersendsitsownphysicaladdress.
Thiscreatesasubnettingeffect.
oReverseAddress Resolution Protocol (RARP)isaformofdynamic mapping in
whichagivenphysicaladdressisassociated withalogicaladdress.
oICMPsendsfourpairsofquerymessages: echo-request andecho-reply, time-stamp
requestandreply,address-mask-request and-reply,androutersolicitation and
advertisement.
DThechecksum forICMPiscalculated byusingboththeheaderandthedatafields
oftheICMPmessage.
DPacketInterNet Groper(ping)isanapplication program thatusestheservicesof
ICMPtotestthereachability ofahost.
oMulticasting isthesendingofthesamemessage tomorethanonereceiver
simultaneously.
oTheInternetGroupManagement Protocol(IGMP)helpsmulticast routerscreateand
updatealistofloyalmembers relatedtoarouterinterface.
oThethree IGMP messagetypesarethequerymessage, themembership report,and
theleavereport.SECTION 21.8PRACTICE SET 643
DAdelayedresponse strategypreventsunnecessary trafficonaLAN.
DTheIGMPmessageisencapsulated inanIPdatagram.
DMostLANs,including Ethernet, supportphysicalmulticast addressing.
DWANsthatdonotsupportphysicalmulticast addressing canuseaprocesscalled
tunneling tosendmulticast packets.
DBOOTPandDynamic HostConfiguration Protocol(DHCP)areclient/server applica­
tionsthatdelivervitalnetworkinformation toeitherdisklesscomputers orcomputers
atfirstboot.
DABOOTPrequest isencapsulated inaUDPuserdatagram.
DBOOTP, astaticconfiguration protocol, usesatablethatmapsIPaddresses to
physicaladdresses.
DArelayagentisarouterthathelpssendlocalBOOTPrequeststoremoteservers.
DDHCPisadynamic configuration protocol withtwodatabases: Oneissimilarto
BOOTP,andtheotherisapoolofIPaddresses available fortemporary assignment.
DTheDHCPserverissuesaleaseforanIPaddresstoaclientforaspecifictime.
DICMPv6, likeversion4,reportserrors,handlesgroupmemberships, updatesspecific
routerandhosttables,andcheckstheviabilityofahost.
21.8PRACTICE SET
ReviewQuestions
1.IsthesizeoftheARPpacketfixed?Explain.
2.WhatisthesizeofanARPpacketwhentheprotocolisIPv4andthehardware is
Ethernet?
3.WhatisthesizeofanEthernet framecarryinganARPpacketinQuestion 2?
4.Whatisthebroadcast addressforEthernet?
5.Whyistherearestriction onthegeneration ofanICMPv4 message inresponse to
afailedICMPv4 errormessage?
6.Whatisthepurposeofincluding theIPv4headerandthefirst8bytesofdatagram
dataintheerror-reporting ICMPv4 messages?
7.Giveanexample ofasituation inwhichahostwouldneverreceivearedirection
message.
8.Whatistheminimum sizeofanICMPv4 packet?Whatisthemaximum sizeofan
ICMPv4 packet?
9.Whatistheminimum sizeofanIPv4packetthatcarriesanICMPv4 packet?What
isthemaximum size?
10.Howcanwedetermine ifanIPv4packetiscarryinganICMPv4 packet?
11.Whatistheminimum sizeofanEthernet framethatcarriesanIPv4packetwhich
inturncarriesanICMPv4 packet?Whatisthemaximum size?
12.WhyistherenoneedfortheICMPv4 message totraveloutsideitsownnetwork?644CHAPTER 21NETWORK LAYER:ADDRESS MAPPING, ERRORREPORTING, ANDMULTICASTING
Exercises
13.ArouterwithIPv4address 125.45.23.12 andEthernet physical address
23:45:AB:4F:67:CD hasreceived apacketforahostdestination withIPaddress
125.11.78.10. ShowtheentriesintheARPrequestpacketsentbytherouter.Assume
nosubnetting.
14.ShowtheentriesintheARPpacketsentinresponse toExercise 13.
15.Encapsulate theresultofExercise 13inadatalinkframe.Fillinallthefields.
16.Encapsulate theresultofExercise 14inadatalinkframe.Fillinallthefields.
17.HostAsendsadatagram tohostB.HostBneverreceivesthedatagram, andhostA
neverreceivesnotification offailure.Givetwodifferent explanations ofwhatmight
havehappened.
18.Calculate thechecksum forthefollowing ICMPpacket:
Type:EchoRequest Identifier: 123Sequence number:25 Message: Hello
19.ArouterreceivesanIPv4packetwithsourceIPaddress130.45.3.3 anddestination
IPaddress201.23.4.6. Theroutercannotfindthedestination IPaddressinitsrouting
table.WhichICMPv4 message shouldbesent?
20.TCPreceivesasegment withdestination portaddress234.TCPchecksandcannot
findanopenportforthisdestination. WhichICMPv4 message shouldbesent?
21.Amulticast addressforagroupis231.24.60.9. Whatisits48-bitEthernet address
foraLANusingTCPIIP?
22.Ifarouterhas20entriesinitsgrouptable,shoulditsend20different queriesperiod­
icallyorjustone?Explainyouranswer.
23.Ifahostwantstocontinue membership infivegroups,shoulditsendfivedifferent
membership reportmessages orjustone?
24.ArouteronanEthernet network hasreceived amulticast IPpacketwithgroupid
226.17.18.4. Whenthehostchecksitsmulticast grouptable,itfindsthisaddress.
Showhowtheroutersendsthispackettotherecipients byencapsulating theIP
packetinanEthernet frame.ShowalltheentriesoftheEthernetframe.Theoutgoing
IPaddressoftherouteris185.23.5.6, anditsoutgoing physical address is
4A224512E1E2. DoestherouterneedtheservicesofARP?
25.AhostwithIPv4address114.45.7.9 receives anIGMPquery.Whenitchecksits
grouptable,itfindsnoentries.Whatactionshouldthehosttake?Shoulditsend
anymessages?
26.AhostwithIPv4address222.5.7.19 receives an IGMP query.Whenitchecksits
routingtable,itfindstwoentriesinitstable:227.4.3.7 and229.45.6.23. What
actionshouldthehosttake?Shoulditsendanymessages? Ifso,whattypeandhow
many?
27.Howmanymulticast addresses canbesupported fortheIPv4protocol inEthernet?
Howmanymulticast addresses canbesupported bytheIPv4protocol? Whatisthe
sizeofaddressspacelostwhenwetransform amulticast IPv4addresstoanEthernet
multicast address?
28.Changethefollowing IPv4multicast addresses toEthernet multicast addresses.
HowmanyofthemspecifythesameEthernet address?SECTION 21.8PRACTICE SET 645
a.224.18.72.8
b.235.18.72.8
c.237.18.6.88
d.224.88.12.8
Research Activities
29.Usethepingprogram totestyourowncomputer (loopback).
30.Usethepingprogram totestahostinsidetheUnitedStates.
31.Usethepingprogram totestahostoutsidetheUnitedStates.
32.Usetraceroute (ortracert)tofindtheroutefromyourcomputer toacomputer ina
collegeoruniversity.
33.Usenetstattofindoutifyourserversupports multicast addressing.
34.DHCPusesseveralmessages suchasDHCPREQUEST, DHCPDECLINE,
DHCPACK, DHCPNACK, andDHCPRELEASE. Findthepurpose ofthese
messages.CHAPTER 22
Network Layer:
Delivery, Forwarding, andRouting
Thischapterdescribes thedelivery, forwarding, androutingofIPpacketstotheirfinal
destinations. Delivery referstothewayapacketishandledbytheunderlying networks
underthecontrolofthenetworklayer.Forwarding referstothewayapacketisdeliv­
eredtothenextstation.Routing referstothewayroutingtablesarecreatedtohelpin
forwarding.
Routingprotocols areusedtocontinuously updatetheroutingtablesthatarecon­
sultedforforwarding androuting.Inthischapter,wealsobrieflydiscusscommon uni­
castandmulticast routingprotocols.
22.1DELIVERY
Thenetwork layersupervises thehandling ofthepacketsbytheunderlying physical
networks.We definethishandling asthedeliveryofapacket.
DirectVersusIndirectDelivery
Thedeliveryofapackettoitsfinaldestination isaccomplished byusingtwodifferent
methodsofdelivery, directandindirect, asshowninFigure22.1.
DirectDelivery
Inadirectdelivery, thefinaldestination ofthepacketisahostconnected tothesame
physical networkasthedeliverer. Directdeliveryoccurswhenthesourceanddestina­
tionofthepacketarelocatedonthesamephysical network orwhenthedelivery is
betweenthelastrouterandthedestination host.
Thesendercaneasilydetermine ifthedeliveryisdirect.Itcanextractthenetwork
addressofthedestination (usingthemask)andcompare thisaddresswiththeaddresses
ofthenetworks towhichitisconnected. Ifamatchisfound,thedeliveryisdirect.
IndirectDelivery
Ifthedestination hostisnotonthesamenetwork asthedeliverer, thepacketisdeliv­
eredindirectly. Inanindirectdelivery, thepacketgoesfromroutertorouteruntilit
reachestheoneconnected tothesamephysical network asitsfinaldestination. Note
647648 CHAPTER 22NETWORK LAYER: DELIVERY, FORWARDING, ANDROUTING
Figure22.1Directandindirectdelivery
Host Host Host(source)
Totherest
oftheInternet
a.DirectdeliveryHost(destination)
b.Indirectanddirectdelivery
thatadeliveryalwaysinvolvesonedirectdeliverybutzeroormoreindirectdeliveries.
Notealsothatthelastdeliveryisalwaysadirectdelivery.
22.2FORWARDING
Forwarding meanstoplacethepacketinitsroutetoitsdestination. Forwarding
requiresahostoraroutertohavearoutingtable.Whenahosthasapackettosendor
whenarouterhasreceived apackettobeforwarded, itlooksatthistabletofindthe
routetothefinaldestination. However, thissimplesolutionisimpossible todayinan
internetwork suchastheInternetbecausethenumberofentriesneededintherouting
tablewouldmaketablelookupsinefficient.
Forwarding Techniques
Severaltechniques canmakethesizeoftheroutingtablemanageable andalsohandle
issuessuchassecurity.Webrieflydiscussthesemethodshere.
Next-Hop MethodVersusRouteMethod
Onetechnique toreducethecontentsofaroutingtableiscalledthenext-hop method.
Inthistechnique, therouting table holdsonlytheaddressofthenexthopinstead
ofinformation aboutthecomplete route(routemethod). Theentriesofaroutingtable
mustbeconsistent withoneanother.Figure22.2showshowroutingtablescanbesim­
plifiedbyusingthistechnique.
Network-Specific MethodVersusHost-Specific Method
Asecondtechnique toreducetheroutingtableandsimplify thesearching processis
calledthenetwork-specific method. Here,insteadofhavinganentryforeverydesti­
nationhostconnected tothesamephysical network (host-specific method), wehaveSECTION 22.2FORWARDING 649
Figure22.2Routemethodversusnext-hop method
a.Routingtablesbasedonroute
Destination Route
HostB RI,R2,hostBRoutingtable
forhostAb.Routing tablesbasedonnexthop
Destination Nexthop
HostB Rl
Destination
HostB
Destination
HostB
HostARoute
R2,hostB
Route
HostBRoutingtable
forRl
Routingtable
forR2Destination
HostB
Destination
HostBNexthop
R2
Nexthop
HostB
onlyoneentrythatdefinestheaddressofthedestination networkitself.Inotherwords,
wetreatallhostsconnected tothesamenetworkasonesingleentity.Forexample, if
1000hostsareattached tothesamenetwork, onlyoneentryexistsintheroutingtable
insteadof1000.Figure22.3showstheconcept.
Figure22.3Host-specific versusnetwork-specific method
RoutingtableforhostSbased
onhost-specific method
Destination Nexthop
A Rl
B Rl
C Rl
D RlRoutingtableforhostSbased
onnetwork-specific method
Host-specific routingisusedforpurposes suchaschecking therouteorproviding
securitymeasures.
DefaultMethod
Anothertechnique tosimplifyroutingiscalledthedefaultmethod. InFigure22.4host
Aisconnected toanetwork withtworouters.RouterRlroutesthepacketstohosts
connected tonetwork N2.However, fortherestoftheInternet, routerR2isused.So
insteadoflistingallnetworks intheentireInternet, hostAcanjusthaveoneentry
calledthedefault(normally definedasnetworkaddress0.0.0.0).650 CHAPTER 22NETWORK LAYER: DELIVERY, FORWARDING, ANDROUTING
Figure22.4Defaultmethod
HostADestinat.iotl Nexthop,
N2 Rl
Anyother R2Routingtable
forhostA
N2
RestoftheInternet
Forwarding Process
Letusdiscusstheforwarding process.Weassumethathostsandroutersuseclassless
addressing becauseclassfuladdressing canbetreatedasaspecialcaseofclassless
addressing. Inclasslessaddressing, theroutingtableneedstohaveonerowofinforma­
tionforeachblockinvolved. Thetableneedstobesearched basedonthenetwork
address(firstaddressintheblock).Unfortunately, thedestination addressinthepacket
givesnoclueaboutthenetworkaddress.Tosolvetheproblem, weneedtoincludethe
mask(In)inthetable;weneedtohaveanextracolumnthatincludesthemaskforthe
corresponding block.Figure22.5showsasimpleforwarding moduleforclassless
addressing.
Figure22.5Simplified forwarding moduleinclassless address
Forwarding module
E"tract
Packet-f-+destination~
addressSearch
tableMask
(In)Network Next-hopInterfaceaddress address
Next-hop address
and
interface number
ToARP
Notethatweneedatleastfourcolumnsinourrouting table;usuallytherearemore.
Inclassless addressing, weneedatleastfourcolwnns inaroutingtable.SECTION 22.2FORWARDING 651
Example 22.1
MakearoutingtableforrouterRl,usingtheconfiguration inFigure22.6.
Figure22.6Configurationfor Example 22.1
180.70.65.135/25
mlmO
201.4.16.2/22 201.4.22.3/24m2Rl
180.70.65.194/26
180.70.65.200/26
RestoftheIntemet
Solution
Table22.1showsthecorresponding table.
Table22.1RoutingtableforrouterRIinFigure22.6
Mask NetworkAddress NextHop lnteiface
/26 180.70.65.192 - m2
/25 180.70.65.128 - mO
/24 201.4.22.0 - m3
/22 201.4.16.0 .... ml
Any Any 180.70.65.200 m2
Example 22.2
Showtheforwarding processifapacketarrivesatRlinFigure22.6withthedestination address
180.70.65.140.
Solution
Therouterperforms thefollowing steps:
1.Thefirstmask(/26)isappliedtothedestination address.Theresultis180.70.65.128, which
doesnotmatchthecorresponding networkaddress.
2.Thesecondmask(/25)isappliedtothedestination address.Theresultis180.70.65.128,
whichmatchesthecorresponding networkaddress.Thenext-hop address(thedestination
addressofthepacketinthiscase)andtheinterface numbermOarepassedtoARPforfurther
processing.652CHAPTER 22NETWORK LAYER:DELIVERY, FORWARDING, ANDROUTING
Example 22.3
Showtheforwarding processifapacketarrivesatR1inFigure22.6withthedestination address
201.4.22.35.
Solution
Therouterperforms thefollowing steps:
I.Thefirstmask(/26)isappliedtothedestination address.Theresultis201.4.22.0, which
doesnotmatchthecorresponding networkaddress(row1).
2.Thesecondmask(/25)isappliedtothedestination address.Theresultis201.4.22.0, which
doesnotmatchthecorresponding networkaddress(row2).
3.Thethirdmask(/24)isappliedtothedestination address.Theresultis201.4.22.0, which
matchesthecorresponding networkaddress.Thedestination addressofthepacketandthe
interface numberm3arepassedtoARP.
Example 22.4
Showtheforwarding processifapacketarrivesatR1inFigure22.6withthedestination address
18.24.32.78.
Solution
Thistimeallmasksareapplied,onebyone,tothedestination address,butnomatching network
addressisfound.Whenitreachestheendofthetable,themodulegivesthenext-hop address
180.70.65.200 andinterface numberm2toARP.Thisisprobably anoutgoing packagethatneeds
tobesent,viathedefaultrouter,tosomeplace elseintheInternet.
AddressAggregatioll
Whenweuseclassless addressing, itislikelythatthenumberofroutingtableentries
willincrease. Thisissobecausetheintentofclassless addressing istodivideupthe
wholeaddressspaceintomanageable blocks.Theincreased sizeofthetableresultsin
anincreaseintheamountoftimeneededtosearchthetable.Toalleviate theproblem,
theideaofaddressaggregation wasdesigned. InFigure22.7wehavetworouters.
RouterRlisconnected tonetworks offourorganizations thateachuse64addresses.
RouterR2issomewhere farfromRl.RouterRlhasalongerroutingtablebecauseeach
packetmustbecorrectly routedtotheappropriate organization. RouterR2,ontheother
hand,canhaveaverysmallroutingtable.ForR2,anypacketwithdestination 140.24.7.0
to140.24.7.255 issentoutfrominterface mOregardless oftheorganization number.This
iscalledaddressaggregation becausetheblocksofaddresses forfourorganizations are
aggregated intoonelargerblock.RouterR2wouldhavealongerroutingtableifeach
organization hadaddresses thatcouldnotbeaggregated intooneblock.
Notethatalthough theideaofaddressaggregation issimilartotheideaofsubnet­
ting,wedonothaveacommon sitehere;thenetworkforeachorganization isindepen­
dent.Inaddition, wecanhaveseverallevelsofaggregation.
LongestMaskMatching
Whathappensifoneoftheorganizations inFigure22.7isnotgeographically closeto
theotherthree?Forexample, iforganization 4cannotbeconnected torouterRlfor
somereason,canwestillusetheideaofaddressaggregation andstillassignblock
140.24.7.192/26 toorganization 4?SECTION 22.2FORWARDING 653
Figure22.7Addressaggregation
Organization 1140.24.7.0/26
:~ ~;~~m_l __
Somewhere
intheInternetml
Organization 3140.24.7.128/26 ~-~Organization 2140.24.7.64/26
Organization 4140.24.7.192/26 ~------'
MaskNetwork Next-hopInterfaceaddress address
/26140.24.7.0 ---------- mO
/26140.24.7.64 ---------- ml
/26140.24.7.128 ---------- m2
/26140.24.7.192 ---------- m3
/0 0.0.0.0 Default m4MaskNetwork Next-hopInterfaceaddress address
/24 140.24.7.0-------~-- mO
/0 0.0.0.0 Default ml
RoutmgtableforR2
RoutingtableforRl
Theanswerisyesbecauseroutinginclassless addressing usesanotherprinciple,
longestmaskmatching. Thisprinciple statesthattheroutingtableissortedfromthe
longestmasktotheshortestmask.Inotherwords,iftherearethreemasks127,126,and
124,themask/27mustbethefirstentryand124mustbelast.Letusseeifthisprinciple
solvesthesituation inwhichorganization 4isseparated fromtheotherthreeorganiza­
tions.Figure22.8showsthesituation.
Suppose apacketarrivesfororganization 4withdestination address140.24.7.200.
ThefirstmaskatrouterR2isapplied,whichgivesthenetwork address140.24.7.192.
Thepacketisroutedcorrectly frominterface mlandreachesorganization 4.If,how­
ever,theroutingtablewasnotstoredwiththelongestprefixfirst,applying the/24mask
wouldresultintheincorrect routingofthepackettorouterRl.
Hierarchical Routing
Tosolvetheproblem ofgiganticroutingtables,wecancreateasenseofhierarchy in
theroutingtables.InChapter 1,wementioned thattheInternettodayhasasenseof
hierarchy. WesaidthattheInternetisdividedintointernational andnational ISPs.
National ISPsaredividedintoregional ISPs,andregional ISPsaredividedintolocal
ISPs.Iftheroutingtablehasasenseofhierarchy like theInternetarchitecture, therout­
ingtablecandecrease insize.
LetustakethecaseofalocalISP.AlocalISPcanbeassigned asingle,butlarge
blockofaddresses withacertainprefixlength.ThelocalISPcandividethisblockinto
smallerblocksofdifferent sizesandcanassignthesetoindividual usersandorganiza­
tions,bothlargeandsmall.Iftheblockassigned tothelocalISPstartswitha.b.c.dln,
theISPcancreateblocksstartingwitheJ.g.h/m, wheremmayvaryforeachcustomer
andisgreaterthann.654 CHAPTER 22NETWORK LAYER: DELIVERY, FORWARDING, ANDROUTING
Figure22.8Longestmaskmatching
RoutingtableforR2
140.24.7.192/26
Organization 4R3mlMaskNetwork Next-hopInterfaceaddress address
/26140.24.7.192 ---------- ml
/24 140.24.7.0 ---------- mO
I?? ??????? ????????? ml
/0 0.0.0.0 Default m2
Toothernetworks----I
Z;--------------~!2~
Iml
I
II
mllOrganization 3140.24.7.128/26Organization 2140.24.7.64/26
RoutmgtableforRIMaskNetwork Next-hopInterfaceaddress address
/26 140.24.7.0 ---------- mO
/26 140.24.7.64 ----~---~- ml
/26140.24.7.128 ---------- m2
/0 0.0.0.0 Default m3Organization 1140.24.7.0/26
MaskNetwork Next-hopInterfaceaddress address
/26140.24.7.192 ---------- rnO
I?? ??????? ????????? rnl
/0 0.0.0.0 Default rn2
RoutingtableforR3
Howdoesthisreducethesizeoftheroutingtable?TherestoftheInternetdoesnot
havetobeawareofthisdivision. Allcustomers ofthelocalISParedefinedasa.b.c.dlnto
therestoftheInternet.Everypacketdestinedforoneoftheaddresses inthislargeblockis
routedtothelocalISP.Thereisonlyoneentryineveryrouterintheworldforallthesecus­
tomers.Theyallbelongtothesamegroup.Ofcourse,insidethelocalISp,theroutermust
recognize thesubblocks androutethepackettothedestined customer.Ifoneofthecus­
tomersisalargeorganization, italsocancreateanotherlevelofhierarchy bysubnetting
anddividingitssubblock intosmallersubblocks (orsub-subblocks). Inclassless routing,
thelevelsofhierarchy areunlimited solongaswefollowtherulesofclassless addressing.
Example 22.5
Asanexampleofhierarchical routing, letusconsider Figure22.9.AregionalISPisgranted
16,384addresses startingfrom120.14.64.0. TheregionalISPhasdecidedtodividethisblock
intofoursubblocks, eachwith4096addresses. Threeofthesesubblocks areassigned tothree
localISPs;thesecondsubblock isreservedforfutureuse.Notethatthemaskforeachblockis120
becausetheoriginalblockwithmask/18isdividedinto4blocks.
ThefirstlocalISPhasdivideditsassigned subblock into8smallerblocksandassigned each
toasmallISP.EachsmallISPprovides servicesto128households (HOOItoHI28),eachusing
fouraddresses. NotethatthemaskforeachsmallISPisnow123becausetheblockisfurther
dividedinto8blocks.Eachhousehold hasamaskof130,becauseahousehold hasonlyfour
addresses (232-30is4).SECTION 22.2FORWARDING 655
Figure22.9Hierarchical routingwithISPs
120.14.64.0118
Total16384120.14.80.0/20
Tota14096120.14.64.0/20
Tota14096120.14.64.0/23
Total512
LOrgOl120.14.96.0/22·120.14.96.0/20·LOrg04·Total4096
SOrg01120.14.112.0/24
• 120.14.112.0120·SOrg16• Total4096H128-------t__~120.14.78.0/23H001120.14.78.0/30
Total512H001120.14.64.0/30
H128----L_.J
ThesecondlocalISPhasdivideditsblockinto4blocksandhasassigned theaddresses to
fourlargeorganizations (LOrg01 toLOrg04). Notethateachlargeorganization has1024addresses,
andthemaskis/22.
ThethirdlocalISPhasdivideditsblockinto16blocksandassigned eachblocktoa
smallorganization (SOrg01 toSOrg16). Eachsmallorganization has256addresses, andthe
maskis/24.
Thereisasenseofhierarchy inthisconfiguration. AllroutersintheInternetsendapacket
withdestination address120.14.64.0 to120.14.127.255 totheregionalISP.
TheregionalISPsendseverypacketwithdestination address120.14.64.0 to120.14.79.255
tolocalISPl.LocalISP1sendseverypacketwithdestination address120.14.64.0 to120.14.64.3
toH001.
Geographical Routing
Todecrease thesizeoftheroutingtableevenfurther,weneedtoextendhierarchical
routingtoincludegeographical routing.Wemustdividetheentireaddressspace into a
fewlargeblocks.WeassignablocktoNorthAmerica, ablocktoEurope,ablockto
Asia,ablocktoAfrica,andsoon.TheroutersofISPsoutsideEuropewillhaveonly
oneentryforpacketstoEuropeintheirroutingtables.TheroutersofISPsoutside
NorthAmerica willhaveonlyoneentryforpacketstoNorthAmerica intheirrouting
tables.Andsoon.
Routing Table
Letusnowdiscussroutingtables.Ahostorarouterhasaroutingtablewithanentry
foreachdestination, oracombination ofdestinations, torouteIPpackets.Therouting
tablecanbeeitherstaticordynamic.
StaticRoutingTable
Astaticroutingtablecontainsinformation enteredmanually. Theadministrator enters
therouteforeachdestination intothetable.Whenatableiscreated,itcannotupdate656CHAPTER 22NETWORK LAYER:DELIVERY, FORWARDING, ANDROUTING
automatically whenthereisachangeintheInternet.Thetablemustbemanually altered
bytheadministrator.
Astaticroutingtablecanbeusedinasmallinternetthatdoesnotchangeveryoften,
orinanexperimental internetfortroubleshooting. Itispoorstrategytouseastaticrouting
tableinabiginternetsuchastheInternet.
Dynamic Routing Table
Adynamic routingtableisupdatedperiodically byusingoneofthedynamic routing
protocols suchasRIP,OSPF,orBGP.Whenever thereisachangeintheInternet, such
asashutdown ofarouterorbreaking ofalink,thedynamic routingprotocols updateall
thetablesintherouters(andeventually inthehost)automatically.
TheroutersinabiginternetsuchastheInternetneedtobeupdateddynamically
forefficientdeliveryoftheIPpackets.Wediscussindetailthethreedynamic routing
protocols laterinthechapter.
Format
Asmentioned previously, aroutingtableforclassless addressing hasaminimum of
fourcolumns. However, someoftoday'sroutershaveevenmorecolumns. Weshould
beawarethatthenumberofcolumns isvendor-dependent, andnotallcolumns canbe
found in allrouters.Figure22.10showssomecommon fields intoday'srouters.
Figure22.10Common fieldsinaroutingtable
MaskNetwork
addressNext-hop
addressInterlaceReference
count.Use
oMask.Thisfielddefinesthemaskappliedfortheentry.
oNetwork address. Thisfielddefinesthenetwork addresstowhichthepacketis
finallydelivered. Inthecaseofhost-specific routing,thisfielddefinestheaddress
ofthedestination host.
oNext-hop address. Thisfielddefinestheaddressofthenext-hop routertowhich
thepacketisdelivered.
DInterface. Thisfieldshowsthenameoftheinterface.
DFlags.Thisfielddefinesuptofiveflags.Flagsareon/offswitches thatsignify
eitherpresence orabsence.ThefiveflagsareU(up),G(gateway), H(host-specific),
D(addedbyredirection), andM(modified byredirection).
a.U(up).TheUflagindicates therouterisupandrunning.Ifthisflagisnotpresent,
itmeansthattherouterisdown.Thepacketcannotbeforwarded andisdiscarded.
b.G(gateway). TheGflagmeansthatthedestination isinanothernetwork. The
packetisdelivered tothenext-hop routerfordelivery(indirect delivery). When
thisflagismissing, itmeansthedestination isinthisnetwork(directdelivery).SECTION 22.2FORWARDING 657
c.H(host-specific). TheHflagindicates thattheentryinthenetwork address
fieldisahost-specific address.Whenitismissing, itmeansthattheaddressis
onlythenetworkaddressofthedestination.
d.D(addedbyredirection). TheDflagindicates thatroutinginformation forthis
destination hasbeenaddedtothehostroutingtablebyaredirection message
fromICMP.Wediscussed redirection andtheICMPprotocol inChapter21.
e.M(modified byredirection). TheMflagindicates thattheroutinginformation
forthisdestination hasbeenmodified byaredirection message fromICMP.We
discussed redirection andtheICMPprotocol inChapter21.
oReference count.Thisfieldgivesthenumberofusersofthisrouteatthemoment.
Forexample, iffivepeopleatthesametimeareconnecting tothesamehostfrom
thisrouter,thevalueofthiscolumnis5.
oUse.Thisfieldshowsthenumberofpacketstransmitted throughthisrouterforthe
corresponding destination.
Utilities
Thereareseveralutilitiesthatcanbeusedtofindtheroutinginformation andthecon­
tentsofaroutingtable.Wediscussnetstatandifconfig.
Example 22.6
Oneutilitythatcanbeusedtofindthecontentsofaroutingtableforahostorrouterisnetstatin
UNIXorLINUX. Thefollowing showsthelistofthecontentsofadefaultserver.Wehaveused
twooptions,randn.Theoptionrindicates thatweareinterested intheroutingtable,andthe
optionnindicates thatwearelookingfornumericaddresses. Notethatthisisaroutingtablefora
host,notarouter.Although wediscussed theroutingtableforarouterthroughout thechapter,ahost
alsoneedsaroutingtable.
$netstat-rn
KernelIProutingtable
Destination Gateway
153.18.16.0 0.0.0.0
127.0.0.0 0.0.0.0
0.0.0.0 153.18.31.254Mask
255.255.240.0
255.0.0.0
0.0.0.0Flags
U
U
UOIface
ethO
10
ethO
Notealsothattheorderofcolumnsisdifferentfromwhatweshowed.Thedestination column
heredefinesthenetworkaddress.ThetermgatewayusedbyUNIXissynonymous withrouter.This
columnacmallydefinestheaddressofthenexthop.Thevalue0.0.0.0showsthatthedeliveryis
direct.ThelastentryhasaflagofG,whichmeansthatthedestination canbereachedthrougha
router(defaultrouter).TheIfacedefinestheinterface. Thehosthasonlyonerealinterface, ethO,
whichmeansinterface 0connected toanEthernet network. Thesecondinterface, la,isactuallya
virmalloopback interface indicating thatthehostacceptspacketswithloopback address127.0.0.0.
Moreinformation abouttheIPaddressandphysical addressoftheservercanbefoundby
usingtheifconfigcommand onthegiveninterface (ethO).
$ifconfigethO
ethOLinkencap:Ethemet HWaddr 00:BO:DO:DF:09:5D
inetaddr:153.18.17.11 Bcast:153.18.31.255 Mask:255.255.240.0658 CHAPTER 22NETWORK IAYER:DELIVERY, FORWARDING, ANDROUTING
Fromtheaboveinformation, wecandeducetheconfiguration oftheserver,asshownin
Figure22.11.
Figure22.11 Configuration oftheserverforExample 22.6
==c:;::;:::;:::u
E::::9-ethO
00:BO:DO:DF:09:5D 153.18.17.ll/20
153.18.31.254/20RestoftheInternet
Notethattheifconfigcommand givesustheIPaddressandthephysical (hardware) address
oftheinterface.
22.3UNICAST ROUTING PROTOCOLS
Aroutingtablecanbeeitherstaticordynamic. Astatictableisonewithmanualentries.
Adynamic table,ontheotherhand,isonethatisupdatedautomatically whenthereisa
changesomewhere intheinternet.Today,aninternetneedsdynamicrouting tables.The
tablesneedtobeupdatedassoonasthereisachangeintheinternet.Forinstance, they
needtobeupdatedwhenarouterisdown,andtheyneedtobeupdatedwhenever abetter
routehasbeenfound.
Routingprotocols havebeencreatedinresponse tothedemandfordynamic routing
tables.Aroutingprotocolisacombination ofrulesandprocedures thatletsroutersin
theinternetinformeachotherofchanges.Itallowsrouterstosharewhatever theyknow
abouttheinternetortheirneighborhood. Thesharingofinformation allowsarouterin
SanFrancisco toknowaboutthefailureofanetworkinTexas.Theroutingprotocols
alsoincludeprocedures forcombining information receivedfromotherrouters.
Optimization
Arouterreceivesapacketfromanetworkandpassesittoanothernetwork. Arouteris
usuallyattached toseveralnetworks. Whenitreceives apacket,towhichnetwork
shoulditpassthepacket?Thedecisionisbasedonoptimization: Whichoftheavailable
pathways istheoptimum pathway? Whatisthedefinition ofthetermoptimum?
Oneapproach istoassignacostforpassingthroughanetwork. Wecallthiscosta
metric.However, themetricassigned toeachnetworkdepends onthetypeofproto­
col.Somesimpleprotocols, suchastheRoutingInformation Protocol (RIP),treatall
networks asequals.Thecostofpassingthroughanetworkisthesame;itisonehop
count.Soifapacketpassesthrough10networks toreachthedestination, thetotalcost
is10hopcounts.SECTION 22.3UNICAST ROUTING PROTOCOLS 659
Otherprotocols, suchasOpenShortestPathFirst(OSPF),allowtheadministrator to
assignacostforpassingthroughanetworkbasedonthetypeofservicerequired. Aroute
throughanetworkcanhavedifferent costs(metrics). Forexample, ifmaximum through­
putisthedesiredtypeofservice,asatellitelinkhasalowermetricthanafiber-optic line.
Ontheotherhand,ifminimum delayisthedesiredtypeofservice,afiber-optic linehas
alowermetricthanasatellitelink.Routersuseroutingtablestohelpdecidethebest
route.OSPFprotocol allowseachroutertohaveseveralroutingtablesbasedonthe
requiredtypeofservice.
Otherprotocols definethemetricinatotallydifferent way.IntheBorderGateway
Protocol (BGP),thecriterion isthepolicy,whichcanbesetbytheadministrator. The
policydefineswhatpathsshouldbechosen.
Intra-andInterdomain Routing
Today,aninternetcanbesolargethatoneroutingprotocol cannothandlethetaskof
updating theroutingtablesofallrouters.Forthisreason,aninternetisdividedinto
autonomous systems. Anautonomous system(AS)isagroupofnetworks androuters
undertheauthority ofasingleadministration. Routinginsideanautonomous systemis
referredtoasintradomain routing. Routingbetween autonomous systemsisreferred
toasinterdomain routing. Eachautonomous systemcanchooseoneormoreintrado­
mainroutingprotocols tohandleroutinginsidetheautonomous system.However, only
oneinterdomain routingprotocol handlesroutingbetween autonomous systems(see
Figure22.12).
Figure22.12Autonomous systems
Autonomous system Autonomous system
~A...R4
Autonomous system···
....•_~D-""1IIIIIr'
Autonomous system
Severalintradomain andinterdomain routingprotocols areinuse.Inthissection,
wecoveronlythemostpopularones.Wediscusstwointradomain routingprotocols:
distancevectorandlinkstate.Wealsointroduce oneinterdomain routingprotocol: path
vector(seeFigure22.13).
RoutingInformation Protocol (RIP)isanimplementation ofthedistance vector
protocol.OpenShortestPathFirst(OSPF)isanimplementation ofthelinkstateproto­
col.BorderGateway Protocol(BGP)isanimplementation ofthepathvectorprotocol.660 CHAPTER 22NETWORK LAYER: DELIVERY, FORWARDING, ANDROUTING
Figure22.13 Popularroutingprotocols
Distance VectorRouting
Indistance vectorrouting, theleast-cost routebetween anytwonodesistheroute
withminimum distance. Inthisprotocol, asthenameimplies,eachnodemaintains a
vector(table)ofminimum distances toeverynode.Thetableateachnodealsoguides
thepacketstothedesirednodebyshowingthenextstopintheroute(next-hop routing).
Wecanthinkofnodesasthecitiesinanareaandthelinesastheroadsconnecting
them.Atablecanshowatouristtheminimum distancebetween cities.
InFigure22.14,weshowasystemoffivenodeswiththeircorresponding tables.
Figure22.14Distance vectorroutingtables
D'stable E'stableToCostNext
A
B
C
D
EToCostNext
A 5¥!:
B()~W
~:~~i
E3~~.
B'stable
3
e'stableA 2
B 4
C(}
D'5
E 43<
8
5
o
93
A
B
C
D
EA
B
C
D
E
ToCostNextToCostNext
ThetablefornodeAshowshowwecanreachanynodefromthisnode.Forexam­
ple,ourleastcosttoreachnodeEis6.TheroutepassesthroughC.
Initialization
ThetablesinFigure22.14arestable;eachnodeknowshowtoreachanyothernode
andthecost.Atthebeginning, however, thisisnotthecase.EachnodecanknowonlySECTION 22.3UNICAST ROUTING PROTOCOLS 661
thedistancebetweenitselfanditsimmediate neighbors, thosedirectlyconnected toit.
Soforthemoment, weassumethateachnodecansendamessage totheimmediate
neighbors andfindthedistancebetweenitselfandtheseneighbors. Figure22.15shows
theinitialtablesforeachnode.Thedistance foranyentrythatisnotaneighbor is
markedasinfinite(unreachable).
Figure22.15Initialization oftablesindistancevectorrouting
3ToCostNext
A-O,'~'i~·
~n~
E""f~~~,;:'
A'stable
ToCostNext
A3
~B,'"'
,
C .>~,~
D0["
E""k<7
D'stableD
~5:J~
4(~i
C'stable3A
B
C
DM
E3
ToCostNext
QQ ~;"~~c,'.;
():jf,
E'stable
Sharing
Thewholeideaofdistancevectorroutingisthesharingofinformation between neigh­
bors.Although nodeAdoesnotknowaboutnodeE,nodeCdoes.SoifnodeCshares
itsroutingtablewithA,nodeAcanalsoknowhowtoreachnodeE.Ontheotherhand,
nodeCdoesnotknowhowtoreachnodeD,butnodeAdoes.IfnodeAsharesitsrout­
ingtablewithnodeC,nodeCalsoknowshowtoreachnodeD.Inotherwords,nodes
AandC,asimmediate neighbors, canimprove theirroutingtablesiftheyhelpeach
other.
Thereisonlyoneproblem. Howmuchofthetablemustbesharedwitheach
neighbor? Anodeisnotawareofaneighbor's table.Thebestsolutionforeachnode
istosenditsentiretabletotheneighbor andlettheneighbor decidewhatpartto
useandwhatparttodiscard.However, thethirdcolumnofatable(nextstop)isnot
usefulfortheneighbor. Whentheneighbor receives atable,thiscolumnneedsto
bereplaced withthesender's name.Ifanyoftherowscanbeused,thenextnodeis
thesenderofthetable.Anodetherefore cansendonlythefirsttwocolumns ofits
tabletoanyneighbor. In other words,sharingheremeanssharingonlythefirsttwo
columns.
Indistancevectorrouting,eachnodesharesitsroutingtablewithits
immediate neighbors periodically andwhenthereisachange.662 CHAPTER 22NETWORK LAYER: DELIVERY, FORWARDING, ANDROUTING
Updating
Whenanodereceivesatwo-column tablefromaneighbor, itneedstoupdateitsrout­
ingtable.Updating takesthreesteps:
1.Thereceiving nodeneedstoaddthecostbetween itselfandthesendingnode
toeachvalueinthesecondcolumn.Thelogicisclear.IfnodeCclaimsthatits
distancetoadestination isxmi,andthedistancebetweenAandCisymi,thenthe
distancebetweenAandthatdestination, viaC,isx+ymi.
2.Thereceiving nodeneedstoaddthenameofthesendingnodetoeachrowasthe
thirdcolumnifthereceiving nodeusesinformation fromanyrow.Thesending
nodeisthenextnodeintheroute.
3.Thereceiving nodeneedstocompareeachrowofitsoldtablewiththecorrespond­
ingrowofthemodified versionofthereceivedtable.
a.Ifthenext-node entryisdifferent, thereceiving nodechoosestherowwiththe
smallercost.Ifthereisatie,theoldoneiskept.
b.Ifthenext-node entryisthesame,thereceiving nodechoosesthenewrow.For
example, supposenodeChaspreviously advertised aroutetonodeXwithdis­
tance3.SupposethatnowthereisnopathbetweenCandX;nodeCnowadver­
tisesthisroutewithadistanceofinfinity.NodeAmustnotignorethisvalue
eventhoughitsoldentry issmaller.Theoldroutedoesnotexistanymore.The
newroutehasadistanceofinfinity.
Figure22.16showshownodeAupdatesitsroutingtableafterreceiving thepartialtable
fromnodeC.
Figure22.16 Updating indistance vectorrouting
ToCost ToCostNext ToCostNext
A~2 A4 A0
B4 B6 B.5
cif C2 C2
D ,1?0~_ D D'3
E4 E6 Eqo
Received A'smodified A'soldtable
frome table ToCostNext
A0
B5
C2
D3
E6
Thereareseveralpointsweneedtoemphasize here.First,asweknowfrommath­
ematics, whenweaddanynumbertoinfinity,theresultisstillinfinity.Second,the
modified tableshowshowtoreachAfromAviaC.IfAneedstoreachitselfviaC,it
needstogotoCandcomeback,adistanceof4.Third,theonlybenefitfromthisupdat­
ingofnodeAisthelastentry,howtoreachE.Previously, nodeAdidnotknowhowto
reachE(distance ofinfinity); nowitknowsthatthecostis6viaC.SECTION 22.3UNICAST ROUTING PROTOCOLS 663
Eachnodecanupdateitstablebyusingthetablesreceived fromothernodes.Ina
shorttime,ifthereisnochangeinthenetwork itself,suchasafailureinalink,each
nodereachesastablecondition inwhichthecontentsofitstableremainsthesame.
WhentoShare
Thequestion nowis,Whendoesanodesenditspartialroutingtable(onlytwocolumns)
toallitsimmediate neighbors? Thetableissentbothperiodically andwhenthereisa
changeinthetable.
Periodic Update Anodesendsitsroutingtable,normally every30s,inaperiodic
update.Theperioddependsontheprotocol thatisusingdistance vectorrouting.
Triggered Update Anodesendsitstwo-column routingtabletoitsneighbors any­
timethereisachangeinitsroutingtable.Thisiscalledatriggered update. The
changecanresultfromthefollowing.
1.Anodereceives atablefromaneighbor, resulting inchangesinitsowntableafter
updating.
2.Anodedetectssomefailureintheneighboring linkswhichresultsinadistance
changetoinfinity.
Two-Node LoopInstability
Aproblem withdistancevectorroutingisinstability, whichmeansthatanetworkusing
thisprotocol canbecomeunstable. Tounderstand theproblem, letuslookatthescenario
depicted inFigure22.17.
Figure22.17Two-node instability
Before
failure
After
failure ·•·IAft"Breceives
update
fromA
g€,I_o
~_-~_~_··__'__4__~_'~_'_"_:
r-o----~-··~-~-:~-¥,t-:
 --4--~-X-:-;:-J-I) --,Finally
Figure22.17showsasystemwiththreenodes.Wehaveshownonlytheportionsof
theroutingtableneededforourdiscussion. Atthebeginning, bothnodesAandBknow
howtoreachnodeX.Butsuddenly, thelinkbetween AandXfails.NodeAchangesits
table.IfAcansenditstabletoBimmediately, everything isfine.However, thesystem
becomes unstable ifBsendsitsroutingtabletoAbeforereceiving A'sroutingtable.
NodeAreceives theupdateand,assuming thatBhasfoundawaytoreachX,immedi­
atelyupdatesitsroutingtable.Basedonthetriggered updatestrategy, Asendsitsnew664CHAPTER 22NETWORK LAYER:DELIVERY, FORWARDING, ANDROUTING
updatetoB.NowBthinksthatsomething hasbeenchanged aroundAandupdatesits
routingtable.Thecostofreaching Xincreases gradually untilitreachesinfinity.Atthis
moment, bothAandBknowthatXcannotbereached. However, duringthistimethe
systemisnotstable.NodeAthinksthattheroute toXisviaB;nodeBthinksthatthe
routetoXisviaA.IfAreceivesapacketdestined forX,itgoestoBandthencomes
backtoA.Similarly, ifBreceivesapacketdestined forX,itgoestoAandcomesback
toB.PacketsbouncebetweenAandB,creatingatwo-node loopproblem. Afewsolu­
tionshavebeenproposed forinstability ofthiskind.
Defining Infinity Thefirstobvioussolutionistoredefineinfinitytoasmallernum­
ber,suchas100.Forourprevious scenario, thesystemwillbestableinlessthan20
updates. Asamatteroffact,mostimplementations ofthedistance vectorprotocol
definethedistancebetween eachnodetobeIanddefine16asinfinity.However, this
meansthatthedistancevectorroutingcannotbeusedinlargesystems. Thesizeofthe
network, ineachdirection, cannotexceed15hops.
SplitHorizon Another solution iscalledsplithorizon. Inthisstrategy, insteadof
flooding thetablethrougheachinterface, eachnodesendsonlypartofitstablethrough
eachinterface. If,according toitstable,nodeBthinksthattheoptimum routetoreach
XisviaA,itdoesnotneedtoadvertise thispieceofinformation toA;theinformation
hascornefromA(Aalreadyknows).Takinginformation fromnodeA,modifying it,
andsendingitbacktonodeAcreatestheconfusion. Inourscenario, nodeBeliminates
thelastlineofitsroutingtablebeforeitsendsittoA.Inthiscase,nodeAkeepsthe
valueofinfinityasthedistance toX.LaterwhennodeAsendsitsroutingtabletoB,
nodeBalsocorrectsitsroutingtable.Thesystembecomes stableafterthefirstupdate:
bothnodeAandBknowthatXisnotreachable.
SplitHorizon andPoisonReverse Usingthesplithorizonstrategyhasonedraw­
back.Normally, thedistancevectorprotocol usesatimer,andifthereisnonewsabout
aroute,thenodedeletestheroutefromitstable.WhennodeBintheprevious scenario
eliminates theroutetoXfromitsadvertisement toA,nodeAcannotguessthatthisis
duetothesplithorizonstrategy(thesourceofinformation wasA)orbecauseBhasnot
received anynewsaboutXrecently. Thesplithorizonstrategycanbecombined with
thepoisonreversestrategy. NodeBcanstilladvertise thevalueforX,butifthesource
ofinformation isA,itcanreplacethedistance withinfinityasawarning: "Donotuse
thisvalue;whatIknowaboutthisroutecomesfromyou."
Three-Node Instability
Thetwo-node instability canbeavoidedbyusingthesplithorizonstrategycombined
withpoisonreverse.However, iftheinstability isbetween threenodes,stabilitycannot
beguaranteed. Figure22.18showsthescenario.
Suppose, afterfindingthatXisnotreachable, nodeAsendsapackettoBandCto
informthemofthesituation. NodeBimmediately updatesitstable,butthepackettoC
islostinthenetworkandneverreachesC.NodeCremainsinthedarkandstillthinks
thatthereisaroutetoXviaAwithadistanceof5.Afterawhile,nodeCsendstoBits
routingtable,whichincludes theroutetoX.NodeBistotallyfooledhere.Itreceives
information ontheroutetoXfromC,andaccording tothealgorithm, itupdatesitsSECTION 22.3UNICAST ROUTING PROTOCOLS 665
Figure22.18Three-node instability
Beforefailure
AfterAsends
theroutetoB0
andC,butthe
packettoC
islost[ill8
2 AfterBsends
theroutetoA
AfterCsends
theroutetoB
table,showing theroutetoXviaCwithacostof8.Thisinformation hascomefromC,
notfromA,soafterawhilenodeBmayadvertise thisroutetoA.NowAisfooledand
updatesitstabletoshowthatAcanreachXviaBwithacostof12.Ofcourse,theloop
continues; nowAadvertises theroutetoXtoC,withincreased cost,butnottoB.Node
Cthenadvertises theroutetoBwithanincreased cost.NodeBdoesthesametoA.
Andsoon.Theloopstopswhenthecostineachnodereachesinfinity.
RIP
TheRouting Information Protocol (RIP)isanintradomain routingprotocol used
insideanautonomous system.Itisaverysimpleprotocol basedondistance vector
routing.RIPimplements distancevectorroutingdirectlywithsomeconsiderations:
1.Inanautonomous system,wearedealingwithroutersandnetworks (links).The
routershaveroutingtables;networks donot.
2.Thedestination inaroutingtableisanetwork, whichmeansthefirstcolumn
definesanetworkaddress.
3.ThemetricusedbyRIPisverysimple;thedistance isdefinedasthenumberof
links(networks) toreachthedestination. Forthisreason,themetricinRIPiscalled
ahopcount.
4.Infinityisdefinedas16,whichmeansthatanyrouteinanautonomous systemusing
RIPcannothavemorethan15hops.
5.Thenext-node columndefinestheaddressoftheroutertowhichthepacketistobe
senttoreachitsdestination.
Figure22.19showsanautonomous systemwithsevennetworks andfourrouters.The
tableofeachrouterisalsoshown.LetuslookattheroutingtableforRl.Thetablehas
sevenentriestoshowhowtoreacheachnetworkintheautonomous system.RouterRlis
directlyconnected tonetworks 130.10.0.0 and130.11.0.0, whichmeansthatthereareno
next-hop entriesforthesetwonetworks. Tosendapackettooneofthethreenetworks at
thefarleft,routerRlneedstodeliverthepackettoR2.Thenext-node entryforthese
threenetworks istheinterface ofrouterR2withIPaddress130.10.0.1. Tosendapacket
tothetwonetworks atthefarright,routerRlneedstosendthepackettotheinterface of
routerR4withIPaddress130.11.0.1. Theothertablescanbeexplained similarly.666CHAPTER 22NETWORK LAYER:DELIVERY, FORWARDING, ANDROUTING
Figure22.19ExampleofadomainusingRIP
195.2.4.0130.10.0.0 130.11.0.0205.5.5.0
Dest.HopNext
130.10.0.0 2130.11.0.2
130.11.0.0 1
195.2.4.0 3130.11.0.2
195.2.5.0 3130.11.0.2
195.2.6.0 4130.11.0.2
205.5.5.0 1
205.5.6.0 1
R4Table
205.5.6.0205.5.5.1
R4
130.11.0.1
205.5.6.1
RITableN
~
Q...
~R1...
Des!HopNext
130.10.0.0 1--
130.11.0.0 1--
195.2.4.0 2130.10.0.1
195.2.5.0 2130.10.0.1
195.2.6.0 3130.10.0.1
205.5.5.0 2130.11.0.1
205.5.6.0 2130.11.0.1130.10.0.1
195.2.5.1
195.2.5.0
195.2.5.2195.2.4.1
R3
195.2.6.1
195.2.6.0Dest.HopNext
R3Table130.10.0.0 1
130.11.0.0 2130.10.0.2
195.2.4.0 1
195.2.5.0 1
195.2.6.0 2195.2.5.2 R2
205.5.5.0 3130.10.0.2
205.5.6.0 3130.10.0.2
R2Table
Dest.HopNext
130.10.0.0 2195.2.5.1
130.11.0.0 3195.2.5.1
195.2.4.0 2195.2.5.1
195.2.5.0 1
195.2.6.0 1
205.5.5.0 4195.2.5.1
205.5.6.0 4195.2.5.1
LinkStateRouting
Linkstateroutinghasadifferent philosophy fromthatofdistance vectorrouting.In
linkstaterouting,ifeachnodeinthedomainhastheentiretopology ofthedomain­
thelistofnodesandlinks,howtheyareconnected including thetype,cost(metric), and
condition ofthelinks(upordown)-the nodecanuseDijkstra's algorithm tobuilda
routingtable.Figure22.20showstheconcept.
Figure22.20Conceptoflinkstaterouting
Thefigureshowsasimpledomainwithfivenodes.Eachnodeusesthesametopology
tocreatearoutingtable,buttheroutingtableforeachnodeisuniquebecausethecalcu­
lationsarebasedondifferent interpretations ofthetopology. Thisisanalogous toacity
map.Whileeachpersonmayhavethesamemap,eachneedstotakeadifferent routeto
reachherspecificdestination.SECTION 22.3UNICAST ROUTING PROTOCOLS 667
Thetopology mustbedynamic, representing thelateststateofeachnodeandeach
link.Iftherearechangesinanypointinthenetwork(alinkisdown,forexample), the
topology mustbeupdatedforeachnode.
Howcanacommon topology bedynamic andstoredineachnode?Nonodecan
knowthetopology atthebeginning orafterachangesomewhere inthenetwork. Link
stateroutingisbasedontheassumption that,although theglobalknowledge aboutthe
topology isnotclear,eachnodehaspartialknowledge: itknowsthestate(type,condi­
tion,andcost)ofitslinks.Inotherwords,thewholetopology canbecompiled fromthe
partialknowledge ofeachnode.Figure22.21showsthesamedomainasinFigure22.20,
indicating thepartoftheknowledge belonging toeachnode.
Figure22.21Linkstateknowledge
"I
A'sstatesoflinks ~
,:("'$-~
.-...,/'3' '"
I ~
D'sstatesoflinks ~.,;1
\ I
......' ~,-,,/
....::;'-,,- C~:,....C'sstatesofIinks /'-~3""
I",,,
I. \
t4: IE'sstatesofIinks, '.}
""-_.-'
NodeAknowsthatitisconnected tonodeBwithmetric5,tonodeCwithmetric2,
andtonodeDwithmetric3.NodeCknowsthatitisconnected tonodeAwithmetric2,
tonodeBwithmetric4,andtonodeEwithmetric4.NodeDknowsthatitiscon­
nectedonlytonodeAwithmetric3.Andsoon.Although thereisanoverlapinthe
knowledge, theoverlapguarantees thecreationofacommon topology-a pictureof
thewholedomainforeachnode.
Building Routing Tables
Inlinkstaterouting, foursetsofactionsarerequiredtoensurethateachnodehasthe
routing table showingtheleast-costnodetoeveryothernode.
].Creationofthestatesofthelinksbyeachnode,calledthelinkstatepacket(LSP).
2.Dissemination ofLSPstoeveryotherrouter,calledflooding, inanefficientand
reliableway.
3.Formation ofashortestpathtreeforeachnode.
4.Calculation ofaroutingtablebasedontheshortestpathtree.
Creation ofLinkStatePacket(LSP)Alinkstatepacketcancarryalargeamount
ofinformation. Forthemoment, however, weassumethatitcarriesaminimum amount668CHAPTER 22NETWORK LAYER:DELIVERY, FORWARDING, ANDROUTING
ofdata:thenodeidentity,thelistoflinks,asequence number,andage.Thefirsttwo,
nodeidentity and thelistoflinks,areneededtomakethetopology. Thethird,sequence
number,facilitates floodinganddistinguishes newLSPsfromoldones.Thefourth,age,
preventsoldLSPsfromremaining inthedomainforalongtime.LSPsaregenerated on
twooccasions:
1.Whenthereisachangeinthetopologyofthedomain.Triggering ofLSPdissemi­
nationisthemainwayofquicklyinforming anynodeinthedomaintoupdateits
topology.
2.Onaperiodic basis.Theperiodinthiscaseismuchlongercompared todistance
vectorrouting.Asamatteroffact,thereisnoactualneedforthistypeofLSPdis­
semination. Itisdonetoensurethatoldinformation isremoved fromthedomain.
Thetimersetforperiodicdissemination isnormally intherangeof60minor2 h
basedontheimplementation. Alongerperiodensuresthatfloodingdoesnotcreate
toomuchtrafficonthenetwork.
Flooding ofLSPsAfteranodehasprepared anLSP,itmustbedisseminated toall
othernodes,notonlytoitsneighbors. Theprocessiscalledfloodingandbasedonthe
following:
1.ThecreatingnodesendsacopyoftheLSPoutofeachinterface.
2.AnodethatreceivesanLSPcompares itwiththecopyitmayalreadyhave.Ifthe
newlyarrivedLSPisolderthantheoneithas(foundbychecking thesequence
number), itdiscardstheLSP.Ifitisnewer,thenodedoesthefollowing:
a.ItdiscardstheoldLSPandkeepsthenewone.
b.Itsendsacopyofitoutofeachinterface excepttheonefromwhichthepacket
arrived.Thisguarantees thatflooding stops somewhere inthedomain(wherea
nodehasonlyoneinterface).
Formation ofShortestPathTree:Dijkstra Algorithm Afterreceiving allLSPs,each
nodewillhaveacopyofthewholetopology. However, thetopology isnotsufficient to
findtheshortestpathtoeveryothernode;ashortestpathtreeisneeded.
Atreeisagraphofnodesandlinks;onenodeiscalledtheroot.Allothernodes
canbereachedfromtherootthroughonlyonesingleroute.Ashortestpathtreeisatree
inwhichthepathbetweentherootandeveryothernodeistheshortest.Whatweneed
foreachnodeisashortestpathtreewiththatnodeastheroot.
TheDijkstra algorithm createsashortestpathtreefromagraph.Thealgorithm
dividesthenodesintotwosets:tentative andpermanent. Itfindstheneighbors ofa
currentnode,makesthemtentative, examines them,andiftheypassthecriteria,
makesthempermanent. Wecaninformally definethealgorithm byusingtheflowchart
inFigure22.22.
Letusapplythealgorithm tonodeAofoursamplegraphinFigure22.23.Tofind
theshortestpathineachstep,weneedthecumulative costfromtheroottoeachnode,
whichisshownnexttothenode.
Thefollowing showsthesteps.Attheendofeachstep,weshowthepermanent
(filledcircles)andthetentative (opencircles)nodesandlistswiththecumulative
costs.SECT/ON 22.3UN/CAST ROUTING PROTOCOLS 669
Figure22.22Dijkstraalgorithm
Setroottolocalnodeand
moveittotentative list.
Amongnodesintentative list,movethe
onewiththeshortestpathtopermanent list.
Addeachunprocessed neighbor oflastmoved
nodetotentative listifnotalreadythere.
Ifneighbor isinthetentative listwithlarger
cumulative cost,replaceitwithnewone.
Figure22.23Example offormation ofshortestpathtree
Root
B 5 0 .·~.--------{B 5Root00
I.SetroottoAandmoveAto
tentative list.
Root
o .
3
4.MoveDtopermanent list.Root
o .
2.MoveAtopermanent listandadd
B,C,andDtotentative list.
5.MoveBtopermanent list.Topology
3.MoveCtopermanent andadd
Etotentative list.
6
6.MoveEtopermanent list
(tentative listisempty).670 CHAPTER 22NETWORK LAYER: DELIVERY, FORWARDING, ANDROUTING
1.WemakenodeAtherootofthetreeandmoveittothetentative list.Ourtwolistsare
Permanent list:empty Tentative list:A(O)
2.NodeAhastheshortestcumulative costfromallnodesinthetentative list.WemoveA
tothepennanent listandaddallneighbors ofAtothetentative list.Ournewlistsare
Permanent list:A(O) Tentative list:B(5),C(2),D(3)
3.NodeChastheshortestcumulative costfromallnodesinthetentative list.Wemove
Ctothepermanent list.NodeChasthreeneighbors, butnodeAisalreadypro­
cessed,whichmakestheunprocessed neighbors justBandE.However, Bisalready
inthetentative list withacumulative costof5.NodeAcouldalsoreachnodeB
throughCwithacumulative costof6.Since5islessthan6,wekeepnodeBwitha
cumulative costof5inthetentative listanddonotreplaceit.Ournewlistsare
Permanent list:A(O),e(2) Tentative list:B(5),0(3),E(6)
4.NodeDhastheshortest cumulative costofallthenodesinthetentative list.We
moveDtothepermanent list.NodeDhasnounprocessed neighbor tobeaddedto
thetentative list.Ournewlistsare
Permanent list:A(O),C(2),0(3) Tentative list:B(5),E(6)
5.NodeBhastheshortest cumulative costofallthenodesinthetentative list.We
moveBtothepermanent list.Weneedtoaddallunprocessed neighbors ofBtothe
tentative list(thisisjustnodeE).However, E(6)isalreadyinthelistwithasmaller
cumulative cost.Thecumulative costtonodeE,astheneighbor ofB,is8.Wekeep
nodeE(6)inthetentative list.Ournewlistsare
Permanent list:A(O),B(5),C(2),0(3) Tentative list:E(6)
6.NodeEhastheshortest cumulative costfromallnodesinthetentative list.We
moveEtothepermanent list.NodeEhasnoneighbor. Nowthetentative list is
empty.Westop;ourshortestpathtreeisready.Thefinallistsare
Permanent list:A(O),B(5), C(2), D(3),E(6) Tentative list:empty
Calculation ofRouting TablefromShortest PathTreeEachnodeusestheshort­
estpathtreeprotocol toconstruct itsroutingtable.Theroutingtableshowsthecostof
reaching eachnodefromtheroot.Table22.2showstheroutingtablefornodeA.
Table22.2RoutingtablefornodeA
Node Cost NextRouter
A 0 -
B 5 -
C 2 -
D 3-
E 6 CSECTION 22.3UN/CAST ROUTING PROTOCOLS 671
Compare Table22.2withtheoneinFigure22.14.Bothdistancevectorroutingand
linkstateroutingendupwiththesameroutingtablefornodeA.
OSPF
TheOpenShortest PathFirstorOSPFprotocol isanintradomain routingprotocol
basedonlinkstaterouting.Itsdomainisalsoanautonomous system.
AreasTohandleroutingefficiently andinatimelymanner,OSPFdividesanauto­
nomoussystemintoareas.Anareaisacollection ofnetworks, hosts,androutersall
contained withinanautonomous system.Anautonomous systemcanbedividedinto
manydifferentareas.Allnetworks insideanareamustbeconnected.
Routersinsideanareafloodtheareawithroutinginformation. Attheborderofan
area,specialrouterscalledareaborderrouterssummarize theinformation aboutthe
areaandsendittootherareas.Amongtheareasinsideanautonomous systemisaspe­
cialareacalledthebackbone; alltheareasinsideanautonomous systemmustbecon­
nectedtothebackbone. Inotherwords,thebackbone servesasaprimaryareaandthe
otherareasassecondary areas.Thisdoesnotmeanthattherouterswithinareascannot
beconnected toeachother,however. Theroutersinsidethebackbone arecalledthe
backbone routers.Notethatabackbone routercanalsobeanareaborder router.
If,becauseofsomeproblem, theconnectivity between abackbone andanareais
broken,avirtuallinkbetweenroutersmustbecreatedbyanadministrator toallow
continuity ofthefunctions ofthebackbone astheprimaryarea.
Eachareahasanareaidentification. Theareaidentification ofthebackbone is
zero.Figure22.24showsanautonomous systemanditsareas.
Figure22.24Areasinanautonomous system
Area0(backbone)l-~. Toother
ASs
Autonomous system
Metric TheOSPFprotocolallowstheadministrator toassignacost,calledthemetric,
toeachroute.Themetriccanbebasedonatypeofservice(minimum delay,maximum
throughput, andsoon).Asamatteroffact,aroutercanhavemultipleroutingtables,
eachbasedonadifferent typeofservice.
TypesofLinksInOSPFterminology, aconnection iscalledalink.Fourtypesof
linkshavebeendefined:point-to-point, transient, stub,andvirtual(seeFigure22.25).672 CHAPTER 22NETWORK LAYER:DELIVERY, FORWARDING, ANDROUTING
Figure22.25Typesoflinks
Apoint-to-point linkconnects tworouterswithoutanyotherhostorrouterin
between. Inotherwords,thepurposeofthelink(network) isjusttoconnectthetwo
routers.Anexampleofthistypeoflinkistworoutersconnected byatelephone lineor
a Tline.Thereisnoneedtoassignanetwork addresstothistypeoflink.Graphically,
theroutersarerepresented bynodes,andthelinkisrepresented byabidirectional edge
connecting thenodes.Themetrics,whichareusuallythesame,areshownatthetwo
ends,oneforeachdirection. Inotherwords,eachrouterhasonlyoneneighbor atthe
othersideofthelink(seeFigure22.26).
Figure22.26Point-to-point link
~C"'Il~f-- ~.4~~ Point-to-point network~
Router Router
Atransient linkisanetworkwithseveralroutersattachedtoit.Thedatacanenter
throughanyoftheroutersandleavethroughanyrouter.AllLANsandsomeWANswith
twoormoreroutersareofthistype.Inthiscase,eachrouterhasmanyneighbors. For
example, consider theEthernet inFigure22.27a.RouterAhasroutersB, C,D,andEas
neighbors. RouterBhasroutersA,C, D,andEasneighbors.Ifwewanttoshowthe
neighborhood relationship inthissituation, wehavethegraphshowninFigure22.27b.
Figure22.27 Transient link
A
E DcA
b.Unrealistic representation c.Realistic representationEB
DcEthernet
a.Transient network
Thisisneitherefficientnorrealistic.Itisnotefficientbecauseeachrouterneedsto
advertise theneighborhood tofourotherrouters,foratotalof20advertisements. ItisSECTION 22.3UNICAST ROUTING PROTOCOLS 673
notrealisticbecausethereisnosinglenetwork (link)between eachpairofrouters;
thereisonlyonenetworkthatservesasacrossroad betweenallfiverouters.
Toshowthateachrouterisconnected toeveryotherrouterthroughonesinglenet­
work,thenetworkitselfisrepresented byanode.However, becauseanetworkisnota
machine, itcannotfunction asarouter.Oneoftheroutersinthenetworktakesthis
responsibility. Itisassigned adualpurpose; itisatruerouterandadesignated router.
Wecanusethetopology showninFigure22.27ctoshowtheconnections ofatransient
network.
Noweachrouterhasonlyoneneighbor, thedesignated router(network). Onthe
otherhand,thedesignated router(thenetwork) hasfiveneighbors. Weseethatthc
numberofneighbor announcements isreducedfrom20to10.Still,thelinkisrepre­
sentedasabidirectional edgebetweenthenodes.However, whilethereisametricfrom
eachnodetothedesignated router,thereisnometricfromthedesignated routertoany
othernode.Thereasonisthatthedesignated routerrepresents thenetwork. Wecan
onlyassignacosttoapacketthatispassingthroughthenetwork. Wecannotchargefor
thistwice.Whenapacketentersanetwork, weassignacost;whenapacketleavesthe
networktogototherouter,thereisnocharge.
Astublinkisanetwork thatisconnected toonlyonerouter.Thedatapackets
enterthenetworkthroughthissinglerouterandleavethenetworkthroughthissame
router.Thisisaspecialcaseofthetransient network. Wecanshowthissituation using
therouterasanodeandusingthedesignated routerforthenetwork. However, thelink
isonlyone-directional, fromtheroutertothenetwork(seeFigure22.28).
Figure22.28Stublink
A,.
Ethernet
a.StubnetworkA
•""-,,...k'ro_
b.Representation
Whenthelinkbetween tworoutersisbroken,theadministration maycreatea
virtuallinkbetween them,usingalongerpaththatprobably goesthroughseveral
routers.
Graphical Representation Letusnowexamine howanAScanberepresented
graphically. Figure22.29showsasmallASwithsevennetworks andsixrouters.Two
ofthenetworks arepoint-to-point networks. Weusesymbols suchasNlandN2
fortransient andstubnetworks. Thereisnoneedtoassignanidentitytoapoint-to­
pointnetwork. Thefigurealsoshowsthegraphical representation oftheASasseen
byOSPF.
Wehaveusedsquarenodesfortheroutersandovalsforthenetworks (represented
bydesignated routers). However, OSPFseesbothasnodes.Notethatwehavethree
stubnetworks.674CHAPTER 22NETWORK LAYER:DELIVERY, FORWARDING, ANDROUTING
Figure22.29ExampleofanASanditsgraphical representation inOSPF
1---lII~l----I-1~" - - - - - - - - - - - - - -N2
c
Nl
a.Autonomous systemBT-31ineN3--+O--...,£:i"---I
N5
b.Graphical representation8
4
PathVectorRouting
Distance vectorandlinkstateroutingarebothintradomain routingprotocols. Theycan
beusedinsideanautonomous system,butnotbetweenautonomous systems.Thesetwo
protocols arenotsuitableforinterdomain routingmostlybecauseofscalability. Bothof
theseroutingprotocols becomeintractable whenthedomainofoperation becomes
large.Distance vectorroutingissubjecttoinstability iftherearemorethanafewhops
inthedomainofoperation. Linkstateroutingneedsahugeamountofresources tocal­
culateroutingtables.Italsocreatesheavytrafficbecauseofflooding. Thereisaneed
forathirdroutingprotocolwhichwecallpathvectorrouting.
Pathvectorroutingprovedtobeusefulforinterdomain routing.Theprinciple of
pathvectorroutingissimilartothatofdistancevectorrouting.Inpathvectorrouting,
weassumethatthereisonenode(therecanbemore,butoneisenoughforourconcep­
tualdiscussion) ineachautonomous systemthatactsonbehalfoftheentireautono­
moussystem.Letuscallitthespeakernode.ThespeakernodeinanAScreatesa
routingtableandadvertises ittospeakernodesintheneighboring ASs.Theideaisthe
sameasfordistancevectorroutingexceptthatonlyspeakernodesineachAScancom­
municate witheachother.However, whatisadvertised isdifferent. Aspeakernode
advertises thepath,notthemetricofthenodes,initsautonomous systemorother
autonomous systems.
Initialization
Atthebeginning, eachspeakernodecanknowonlythereachability ofnodesinsideits
autonomous system.Figure22.30showstheinitialtablesforeachspeakernodeina
systemmadeoffourASs.SECTION 22.3UNICAST ROUTING PROTOCOLS 675
Figure22.30Initialroutingtablesinpathvectorrouting
Dest.Path
.A$L2
AS:L.
AlTable
AS1
Des!.Path
BlAS2\
B2As1
B3"~~'.
B4-~
BITable
AS2Dest.Path
CI:~3
C2;'ASa
C3'A~~
ClTable
AS3
Des!'Path
Dl·~
D2·A£4'~D3·-.:
D4:~;r'
AS4
NodeAlisthespeakernodeforASl,BlforAS2,ClforAS3,andDlforAS4.
NodeAlcreatesaninitialtablethatshowsAltoA5arelocatedinASIandcanbe
reachedthroughit.NodeBladvertises thatBltoB4arelocatedinAS2andcanbe
reachedthroughBl.Andsoon.
Sharing Justasindistance vectorrouting,inpathvectorrouting,aspeakerinan
autonomous systemsharesitstablewithimmediate neighbors. InFigure22.30,node
AlsharesitstablewithnodesBlandCl.NodeClsharesitstablewithnodesDl,Bl,
andAl.NodeBlsharesitstablewithClandAl.NodeDlsharesitstablewithCl.
Updating Whenaspeakernodereceives atwo-column tablefromaneighbor, it
updatesitsowntablebyaddingthenodesthatarenotinitsroutingtableandaddingits
ownautonomous systemandtheautonomous systemthatsentthetable.Afterawhile
eachspeakerhasatableandknowshowtoreacheachnodeinotherASs.Figure22.31
showsthetablesforeachspeakernodeafterthesystemisstabilized.
According tothefigure,ifrouterAlreceivesapacketfornodesA3,itknowsthat
thepathisinASI(thepacketisathome);butifitreceivesapacketforDl,itknowsthat
thepacketshouldgofromASl,toAS2,andthentoAS3.Theroutingtableshowsthe
pathcompletely. Ontheotherhand,ifnodeDlinAS4receivesapacketfornodeA2,it
knowsitshouldgothroughAS4,AS3,andAS1.
oLoop prevention. Theinstability ofdistancevectorroutingandthecreationof
loopscanbeavoidedinpathvectorrouting.Whenarouterreceivesa message, it
checkstoseeifitsautonomous systemisinthepathlisttothedestination. Ifitis,
loopingisinvolvedandthemessageisignored.676CHAPTER 22NETWORK LAYER:DELIVERY, FORWARDING, ANDROUTING
Figure22.31Stabilized tablesforthreeautonomous systems
AlAS~·~·ASj
A5AS4-~:t:ASi
~~~~~4~~3;,AS2Dest. Path Path
ClTableOest. Path
BlTableOest. Oest. Path
AlA:IDi
ASASl
Bl
B4
Cl...
C3
01
D4
AlTable
oPolicyrouting. Policyroutingcanbeeasilyimplemented throughpathvector
routing.Whenarouterreceives amessage, itcancheckthepath.Ifoneofthe
autonomous systemslistedinthepathisagainstitspolicy,itcanignorethatpath
andthatdestination. Itdoesnotupdateitsroutingtablewiththispath,anditdoes
notsendthismessage toitsneighbors.
oOptimum path.Whatistheoptimum pathinpathvectorrouting?Wearelooking
forapathtoadestination thatisthebestfortheorganization thatrunstheautono­
moussystem.Wedefinitely cannotincludemetricsinthisroutebecause each
autonomous systemthatisincluded inthepathmayuseadifferent criterion forthe
metric.Onesystemmayuse,internally, RIP,whichdefineshopcountasthemetric;
anothermayuseOSPFwithminimum delaydefinedasthemetric.Theoptimum
pathisthepaththatfitstheorganization. Inourprevious figure,eachautonomous
systemmayhavemorethanonepathtoadestination. Forexample, apathfrom
AS4toASIcanbeAS4-AS3-AS2-AS1, oritcanbeAS4-AS3-ASI. Forthetables,
wechosetheonethathadthesmallernumberofautonomous systems, butthisis
notalwaysthecase.Othercriteria,suchassecurity,safety,andreliability, canalso
beapplied.
BGP
BorderGateway Protocol (BGP)isaninterdomain routingprotocol usingpathvector
routing.Itfirstappeared in1989andhasgonethroughfourversions.
TypesofAutonomous Systems Aswesaidbefore,theInternetisdividedintohier­
archicaldomains calledautonomous systems. Forexample, alargecorporation that
manages itsownnetworkandhasfullcontroloveritisanautonomous system.Alocal
ISPthatprovides servicestolocalcustomers isanautonomous system.Wecandivide
autonomous systemsintothreecategories: stub,multihomed, andtransit.
oStubAS.AstubAShasonlyoneconnection toanotherAS.Theinterdomain data
trafficinastubAScanbeeithercreatedorterminated intheAS.ThehostsintheAS
cansenddatatraffictootherASs.ThehostsintheAScanreceivedatacomingfrom
hostsinotherASs.Datatraffic,however, cannotpassthroughastubAS.AstubASSECTION 22.3UNICAST ROUTING PROTOCOLS 677
iseitherasourceorasink.AgoodexampleofastubASisasmallcorporation ora
smalllocalISP.
oMultihomed AS.Amultihomed AShasmorethanoneconnection tootherASs,
butitisstillonlyasourceorsinkfordatatraffic.Itcanreceivedatatrafficfrom
morethan oneAS.ItcansenddatatraffictomorethanoneAS,butthereisnotran­
sienttraffic.ItdoesnotallowdatacomingfromoneASandgoingtoanotherASto
passthrough.Agoodexampleofamultihomed ASisalargecorporation thatiscon­
nectedtomorethanoneregionalornationalASthatdoesnotallowtransienttraffic.
oTransitAS.AtransitASisamultihomed ASthatalsoallowstransienttraffic.Good
examples oftransitASsarenationalandinternational ISPs(Internetbackbones).
PathAttributes Inourprevious example, wediscussed apathforadestination net­
work.Thepathwaspresented asalistofautonomous systems, butis,infact,alistof
attributes. Eachattributegivessomeinformation aboutthepath.Thelistofattributes
helpsthereceiving routermakeamore-informed decisionwhenapplying itspolicy.
Attributes aredividedintotwobroadcategories: wellknownandoptional. Awell­
knownattribute isonethateveryBGProutermustrecognize. Anoptional attribute
isonethatneedsnotberecognized byeveryrouter.
Well-known attributes arethemselves dividedintotwocategories: mandatory and
discretionary. Awell-known mandatory attributeisonethatmustappearinthedescrip­
tionofaroute.Awell-known discretionary attributeisonethatmustberecognized by
eachrouter,butisnotrequired tobeincluded ineveryupdatemessage. Onewell­
knownmandatory attributeisORIGIN. Thisdefinesthesourceoftheroutinginforma­
tion(RIP,OSPF,andsoon).Anotherwell-known mandatory attribute isAS_PATH.
Thisdefinesthelistofautonomous systemsthroughwhichthedestination canbe
reached. Stillanotherwell-known mandatory attribute isNEXT-HOP, whichdefines
thenextroutertowhichthedatapacketshouldbesent.
Theoptionalattributes canalsobesubdivided intotwocategories: transitive and
nontransitive. Anoptional transitive attribute isonethatmustbepassedtothenext
routerbytherouterthathasnot implemented thisattribute. Anoptional nontransitive
attributeisonethatmustbediscarded ifthereceiving routerhasnotimplemented it.
BGPSessions Theexchange ofroutinginformation betweentworoutersusingBGP
takesplaceinasession.Asessionisaconnection thatisestablished betweentwoBGP
routersonlyforthesakeofexchanging routinginformation. Tocreateareliableenvi­
ronment, BGPusestheservicesofTCP.Inotherwords,asessionattheBGPlevel,as
anapplication program, isaconnection attheTCPlevel.However, thereisasubtledif­
ferencebetween aconnection inTCPmadeforBGPandotherapplication programs.
WhenaTCPconnection iscreatedforBGP,itcanlastforalongtime,untilsomething
unusualhappens. Forthisreason,BGPsessions aresometimes referred toassemi­
pennanent connections.
External andInternalBGPIfwewanttobeprecise,BGPcanhavetwotypesof
sessions: externalBGP(E-BGP) andinternalBGP(I-BGP)sessions. TheE-BGPses­
sionisusedtoexchange information betweentwospeakernodesbelonging totwodif­
ferentautonomous systems. TheI-BGPsession,ontheotherhand,isusedtoexchange
routinginformation between tworoutersinsideanautonomous system.Figure22.32
showstheidea.678CHAPTER 22NETWORK LAYER:DELIVERY, FORWARDING, ANDROUTING
Figure22.32InternalandexternalBGPsessions
AS1 AS2
1-- E-BGPsession ---I-BGPsessionsI
Thesessionestablished betweenAS1andAS2isanE-BOPsession.Thetwospeaker
routersexchange information theyknowaboutnetworks intheInternet.However, these
tworoutersneedtocollectinformation fromotherroutersintheautonomous systems.
ThisisdoneusingI-BOPsessions.
22.4MULTICAST ROUTING PROTOCOLS
Inthissection,wediscussmulticasting andmulticast routingprotocols. Wefirstdefine
thetermmulticasting andcompare ittounicasting andbroadcasting. Wealsobriefly
discusstheapplications ofmulticasting. Finally,wemoveontomulticast routingand
thegeneralideasandgoalsrelatedtoit.Wealsodiscusssomecommon multicast routing
protocols usedintheInternettoday.
Unicast,Multicast, andBroadcast
Amessage canbeunicast,multicast, orbroadcast. Letusclarifythesetermsasthey
relatetotheInternet.
Unicasting
Inunicastcommunication, thereisonesourceandonedestination. Therelationship
between thesourceandthedestination isone-to-one. Inthistypeofcommunication,
boththesourceanddestination addresses, intheIPdatagram, aretheunicastaddresses
assigned tothehosts(orhostinterfaces, tobemoreexact).InFigure22.33,aunicast
Figure22.33 UnicastingSECTION 22.4MULTICAST ROUTING PROTOCOLS 679
packetstaI1sfromthesourceS1andpassesthroughrouterstoreachthedestination D1.
Wehaveshownthenetworks asalinkbetweentherouterstosimplifythefigure.
Notethatinunicasting, whenarouterreceivesapacket,itforwards thepacket
throughonlyoneofitsinterfaces (theonebelonging totheoptimum path)asdefinedin
theroutingtable.Theroutermaydiscardthepacketifitcannotfindthedestination
addressinitsroutingtable.
Inunicasting, therouterforwards thereceivedpacketthrough
onlyoneofitsinterfaces.
Multicasting
Inmulticast communication, thereisonesourceandagroupofdestinations. Therela­
tionshipisone-to-many. Inthistypeofcommunication, thesourceaddressisaunicast
address,butthedestination addressisagroupaddress,whichdefinesoneormoredesti­
nations.Thegroupaddressidentifies themembers ofthegroup.Figure22.34showsthe
ideabehindmulticasting.
Figure22.34Multicasting
G1 G1 G1
~t~t ~t
Sl
GI
Amulticast packetstartsfromthesourceS1andgoestoalldestinations that
belongtogroupG1.Inmulticasting, whenarouterreceivesapacket,itmayforwardit
throughseveralofitsinterfaces.
Inmulticasting, theroutermayforwardthereceivedpacket
throughseveralofitsinterfaces.680CHAPTER 22NETWORK LAYER:DELIVERY, FORWARDING, ANDROUTING
Broadcasting
Inbroadcast communication, therelationship betweenthesourceandthedestination is
one-to-all. Thereisonlyonesource,butalltheotherhostsarethedestinations. The
Internetdoesnotexplicitly supportbroadcasting becauseofthehugeamountoftraffic
itwouldcreateandbecauseofthebandwidth itwouldneed.Imaginethetrafficgener­
atedintheInternetifonepersonwantedtosendamessage toeveryone elseconnected
totheInternet.
Multicasting VersusMultiple Unicasting
Beforewefinishthissection,weneedtodistinguish betweenmulticasting andmultiple
unicasting. Figure22.35illustrates bothconcepts.
Figure22.35Multicasting versusmultipleunicasting
Gl Gl Gl
Gl
a.Multicasting
Dl D2 D3
D5
b.Multiple nnicasting
Multicasting startswithonesinglepacketfromthesourcethatisduplicated bythe
routers.Thedestination addressineachpacketisthesameforallduplicates. Notethat
onlyonesinglecopyofthepackettravelsbetweenanytworouters.SECTION 22.4MULTICAST ROUTING PROTOCOLS 681
Inmultiple unicasting, severalpacketsstartfromthesource.Iftherearefive
destinations, forexample, thesourcesendsfivepackets,eachwithadifferent unicast
destination address.Notethattheremaybemultiplecopiestravelingbetweentworouters.
Forexample, whenapersonsendsane-mailmessage toagroupofpeople,thisis
multiple unicasting. Thee-mailsoftware createsreplicasofthemessage, eachwitha
different destination addressandsendsthemonebyone.Thisisnotmulticasting; itis
multipleunicasting.
Emulation ofMulticasting withUnicasting
Youmightwonderwhywehaveaseparatemechanism formulticasting, whenitcanbe
emulated withunicasting. Therearetwoobviousreasonsforthis.
1.Multicasting ismoreefficientthanmultipleunicasting. InFigure22.35,wecansee
howmulticasting requireslessbandwidth thandoesmultipleunicasting. Inmulti­
pleunicasting, someofthelinksmusthandleseveralcopies.
2.Inmultipleunicasting, thepacketsarecreatedbythesourcewitharelativedelay
betweenpackets.Ifthereare1000destinations, thedelaybetweenthefirstandthe
lastpacketmaybeunacceptable. Inmulticasting, thereisnodelaybecauseonly
onepacketiscreatedbythe source.
Emulation ofmulticasting throughmultiple unicasting isnotefficient
andmaycreatelongdelays,particularly withalargegroup.
Applications
Multicasting hasmanyapplications todaysuchasaccesstodistributed databases,
information dissemination, teleconferencing, anddistancelearning.
AccesstoDistributed Databases
Mostofthelargedatabases todayaredistributed. Thatis,theinformation isstoredin
morethanonelocation, usuallyatthetimeofproduction. Theuserwhoneedstoaccess
thedatabase doesnotknowthelocationoftheinformation. Auser'srequestismulti­
casttoallthedatabase locations, andthelocationthathastheinformation responds.
Information Dissemination
Businesses oftenneedtosendinformation totheircustomers. Ifthenatureoftheinfor­
mationisthesameforeachcustomer, itcanbemulticast. Inthiswayabusiness can
sendonemessage thatcanreachmanycustomers. Forexample, asoftware updatecan
besenttoallpurchasers ofaparticular software package.
Dissemination ofNews
Inasimilarmannernewscanbeeasilydisseminated throughmulticasting. Onesingle
messagecanbesenttothoseinterested inaparticular topic.Forexample, thestatistics
ofthechampionship highschoolbasketball tournament canbesenttothesportseditors
ofmanynewspapers.682CHAPTER 22NETWORK LAYER:DELNERY, FORWARDING, ANDROUTING
Teleconferencing
Teleconferencing involvesmulticasting. Theindividuals attending ateleconference all
needtoreceivethesameinformation atthesametime.Temporary orpermanent groups
canbeformedforthispurpose. Forexample, anengineering groupthatholdsmeetings
everyMonday morning couldhaveapermanent groupwhilethegroupthatplansthe
holidaypartycouldformatemporary group.
Distance Learning
Onegrowing areaintheuseofmulticasting isdistance learning. Lessonstaughtby
onesingleprofessor canbereceived byaspecificgroupofstudents. Thisisespecially
convenient forthosestudentswhofinditdifficulttoattendclassesoncampus.
Multicast Routing
Inthissection,wefirstdiscusstheideaofoptimalrouting,common inallmulticast
protocols. Wethengiveanoverview ofmulticast routingprotocols.
Optimal Routing: Shortest PathTrees
Theprocessofoptimalinterdomain routingeventually resultsinthefindingofthe
shortestpathtree.Therootofthetreeisthesource,andtheleavesarethepotential des­
tinations. Thepathfromtheroottoeachdestination istheshortestpath.However, the
numberoftreesandtheformation ofthetreesinunicastandmulticast routingaredif­
ferent.Letusdiscusseachseparately.
UnicastRouting Inunicastrouting,whenarouterreceives apackettoforward, it
needstofindtheshortestpathtothedestination ofthepacket.Therouterconsultsits
routingtableforthatparticular destination. Thenext-hop entrycorresponding tothe
destination isthestartoftheshortestpath.Therouterknowstheshortestpathfor
eachdestination, whichmeansthattherouterhasashortestpathtreetooptimally
reachalldestinations. Inotherwords,eachlineoftheroutingtableisashortestpath;
thewholeroutingtableisashortestpathtree.Inunicastrouting,eachrouterneeds
onlyoneshortestpathtreetoforward apacket;however, eachrouterhasitsown
shortestpathtree.Figure22.36showsthesituation.
Thefigureshowsthedetailsoftheroutingtableandtheshortestpathtreefor
routerRl.Eachlineintheroutingtablecorresponds toonepathfromtheroottothe
corresponding network. Thewholetablerepresents theshortestpathtree.
Inunicastrouting,eachrouterinthedomainhasatablethatdefines
ashortestpathtreetopossibledestinations.
Multicast Routing Whenarouterreceivesamulticast packet,thesituationisdifferent
fromwhenitreceivesaunicastpacket.Amulticast packetmayhavedestinations inmore
thanonenetwork. Forwarding ofasinglepackettomembers ofagrouprequires a
shortestpathtree.Ifwehavengroups,wemayneednshortestpathtrees.Wecanimagine
thecomplexity ofmulticast routing.Twoapproaches havebeenusedtosolvetheproblem:
source-based treesandgroup-shared trees.SECTION 22.4MULTICAST ROUTING PROTOCOLS 683
Figure22.36Shortestpathtreeinunicastrouting
N2
OJR2
R2TableI
I,.-----------NI
Root
---e----
RIN5~u....:J
R4Table
R4N6
R2
R2
RZ
R4Destination Next-hop
NI
N2
N3
N4
N5
N6Shortest path---+-
---_II.. Shortest path---+-N4 L-__ ----L ---IN3
OJR3
R3Table
RlTable
Inmulticast routing,eachinvolvedrouterneedstoconstruct
ashortestpathtreeforeachgroup.
oSource-Based Tree.Inthesource-based treeapproach, eachrouterneedstohave
oneshortestpathtreeforeachgroup.Theshortestpathtreeforagroupdefinesthe
nexthopforeachnetworkthathasloyalmember(s) forthatgroup.InFigure22.37,
weassumethatwehaveonlyfivegroupsinthedomain:GI,G2, G3, G4, andG5.
AtthemomentGIhasloyalmembers infournetworks, G2inthree,G3intwo,G4
intwo,andG5intwo.Wehaveshownthenamesofthegroupswithloyalmem­
bersoneachnetwork. Figure22.37alsoshowsthemulticast routingtablefor
routerRI.Thereisoneshortestpathtreeforeachgroup;therefore therearefive
shortestpathtreesforfivegroups.IfrouterRlreceivesapacketwithdestination
Figure22.37Source-based treeapproach
GI,G2
RZI:"Tlu....:J
R2TableGI,G2 G3 Gl,G4,G5
~u....:J
R4Table
R4
____ .S.hortest pathtree
RlTable~ Gl-,RZ,R4
G2-,RZ
G3-,RZ
G4 RZ,R4
~ G5 RZ,R4Nexthop Destination
···Shortest pathtree
Gl,G2,G4G3,G5
~R3
u....:J
R3Table684CHAPTER 22NETWORK IAYER:DELIVERY, FORWARDING, ANDROUTING
addressG1,itneedstosendacopyofthepackettotheattachednetwork, acopyto
routerR2,andacopytorouterR4sothatallmembers ofG1canreceiveacopy.In
thisapproach, ifthenumberofgroupsism,eachrouterneedstohavemshortest
pathtrees,oneforeachgroup.Wecanimaginethecomplexity oftheroutingtable
ifwehavehundreds orthousands ofgroups.However, wewillshowhowdifferent
protocols managetoalleviate thesituation.
Inthesource-based treeapproach, eachrouterneeds
tohaveoneshortestpathtreeforeachgroup.
oGroup-Shared Tree.Inthegroup-shared treeapproach, insteadofeachrouter
havingmshortestpathtrees,onlyonedesignated router,calledthecentercore,or
rendezvous router,takestheresponsibility ofdistributing multicast traffic.Thecore
hasmshortestpathtreesinitsroutingtable.Therestoftheroutersinthedomainhave
none.Ifarouterreceivesamulticast packet,itencapsulates thepacketinaunicast
packetandsendsittothecorerouter.Thecorerouterremoves themulticast packet
fromitscapsule,andconsultsitsroutingtabletoroutethepacket.Figure22.38shows
theidea.
Figure22.38Group-shared treeapproach
Gl,G2 G3 Gl,G4,GS
R2e;oioSl---------_- __:IiiI:II------i_-_~ __-____
G3,GS
R3Rl R4
Gl,G2,G4Shortestpathtree
ShortestpathtreeDestination Nexthop
Gl-,R2,R3,R4
G2-,R2,R3
G3
G4 R3,R4
G5-,R4
Coreroutertable
Inthegroup-shared treeapproach, onlythecorerouter,
whichhasashortestpathtreeforeachgroup,isinvolvedinmulticasting.
RoutingProtocols
Duringthelastfewdecades, severalmulticast routingprotocols haveemerged. Someof
theseprotocols areextensions ofunicastroutingprotocols; othersaretotallynew.SECTION 22.4MULTICAST ROUTING PROTOCOLS 685
Wediscusstheseprotocols intheremainder ofthischapter.Figure22.39showsthe
taxonomy oftheseprotocols.
Figure22.39Taxonomy ofcommon multicast protocols
----~---------- ----, ,:_~I~!~~~ ~~~-~~jMOSPF DVMRPPIM
CRT
Multicast LinkStateRouting: MOSPF
Inthissection,webrieflydiscussmulticast linkstateroutinganditsimplementation in
theInternet,MOSPF.
Multicast LinkStateRouting Wediscussed unicastlinkstateroutinginSection22.3.
WesaidthateachroutercreatesashortestpathtreebyusingDijkstra's algorithm. The
routingtableisatranslation oftheshortestpathtree.Multicast linkstateroutingisa
directextension ofunicastroutingandusesasource-based treeapproach. Although
unicastroutingisquiteinvolved, theextension tomulticast routingisverysimpleand
straightforward.
Multicast linkstateroutingusesthesource-based treeapproach.
Recallthatinunicastrouting,eachnodeneedstoadvertise thestateofitslinks.For
multicast routing,anodeneedstorevisetheinterpretation ofstate.Anodeadvertises
everygroupwhichhasanyloyalmemberonthelink.Herethemeaning ofstateis
"whatgroupsareactiveonthislink."Theinformation aboutthegroupcomesfrom
IGMP(seeChapter21).EachrouterrunningIGMPsolicitsthehostsonthelinktofind
outthemembership status.
Whenarouterreceives alltheseLSPs,itcreatesn(nisthenumberofgroups)
topologies, fromwhichnshortestpathtreesaremadebyusingDijkstra's algorithm. So
eachrouterhasaroutingtablethatrepresents asmanyshortestpathtreesasthereare
groups.
Theonlyproblem withthisprotocol isthetimeandspaceneededtocreateand
savethemanyshortestpathtrees.Thesolutionistocreatethetreesonlywhenneeded.
Whenarouterreceivesapacketwithamulticast destination address,itrunstheDijkstra
algorithm tocalculate theshortestpathtreeforthatgroup.Theresultcanbecachedin
casethereareadditional packetsforthatdestination.
MOSPF Multicast OpenShortestPathFirst(MOSPF) protocolisanextension of
theOSPFprotocolthatusesmulticast linkstateroutingtocreatesource-based trees.686CHAPTER 22NETWORK LAYER:DELIVERY, FORWARDING, ANDROUTING
Theprotocolrequiresanewlinkstateupdatepackettoassociate theunicastaddressof
ahostwiththegroupaddressoraddresses thehostissponsoring. Thispacketiscalled
thegroup-membership LSA.Inthisway,wecanincludeinthetreeonlythehosts
(usingtheirunicastaddresses) thatbelongtoaparticular group.Inotherwords,we
makeatreethatcontains allthehostsbelonging toagroup,butweusetheunicast
addressofthehostinthecalculation. Forefficiency, theroutercalculates theshortest
pathtreesondemand(whenitreceivesthefirstmulticast packet).Inaddition, thetree
canbesavedincachememoryforfutureusebythesamesource/group pair.MOSPFis
adata-driven protocol; thefirsttimeanMOSPFrouterseesadatagram withagiven
sourceandgroupaddress,therouterconstructs theDijkstrashortestpathtree.
Multicast Distance Vector:DVMRP
Inthissection,webrieflydiscussmulticast distancevectorroutinganditsimplementa­
tionintheInternet, DVMRP.
Multicast Distance VectorRouting Unicastdistance vectorroutingisverysimple;
extending ittosupportmulticast routingiscomplicated. Multicast routingdoesnot
allowaroutertosenditsroutingtabletoitsneighbors. Theideaistocreateatablefrom
scratchbyusingtheinformation fromtheunicastdistancevectortables.
Multicast distance vectorroutingusessource-based trees,buttherouternever
actuallymakesaroutingtable.Whenarouterreceives amulticast packet,itforwards
thepacketasthoughitisconsulting aroutingtable.Wecansaythattheshortestpath
treeisevanescent. Afteritsuse(afterapacketisforwarded) thetableisdestroyed.
Toaccomplish this,themulticast distance vectoralgorithm usesaprocessbased
onfourdecision-making strategies. Eachstrategy isbuiltonitspredecessor. We
explainthemonebyoneandseehoweachstrategycanimprove theshortcomings of
theprevious one.
DFlooding. Flooding isthefirststrategythatcomestomind.Arouterreceives a
packetand,withoutevenlookingatthedestination groupaddress, sendsitout
fromeveryinterlace excepttheonefromwhichitwasreceived. Flooding accom­
plishesthefirstgoalofmulticasting: everynetworkwithactivemembers receives
thepacket.However, sowillnetworks withoutactivemembers. Thisisabroadcast,
notamulticast. Thereisanotherproblem: itcreatesloops.Apacketthathasleft
theroutermaycomebackagainfromanotherinterlace orthesameinterlace and
beforwarded again.Somefloodingprotocols keepacopyofthepacketforawhile
anddiscardanyduplicates toavoidloops.Thenextstrategy,reversepathforward­
ing,correctsthisdefect.
Flooding broadcasts packets,butcreatesloopsinthesystems.
oReversePathForwarding (RPF).RPFisamodified floodingstrategy.Toprevent
loops,onlyonecopyisforwarded; theothercopiesaredropped. InRPF,arouterfor­
wardsonlythecopythathastraveledtheshortestpathfromthesourcetotherouter.
Tofindthiscopy,RPFusestheunicastroutingtable.Therouterreceivesapacketand
extractsthesourceaddress(aunicastaddress).Itconsultsitsunicastroutingtableas
thoughitwantstosendapackettothesourceaddress.TheroutingtabletellstheSECTION 22.4MULTICAST ROUTING PROTOCOLS 687
routerthenexthop.Ifthemulticast packethasjustcomefromthehopdefinedinthe
table,thepackethastraveledtheshortestpathfromthesourcetotherouterbecause
theshortestpathisreciprocal inunicastdistancevectorroutingprotocols.Ifthepath
fromAtoBistheshortest,thenitisalsotheshortestfromBtoA.Therouterfor­
wardsthepacketifithastraveledfromtheshortestpath;itdiscardsitotherwise.
Thisstrategyprevents loopsbecausethereisalwaysoneshortestpathfromthe
sourcetotherouter.Ifapacketleavestherouterandcomesbackagain,ithasnottrav­
eledtheshortestpath.Tomakethepointclear,letuslookatFigure22.40.
Figure22.40showspartofadomainandasource.Theshortestpathtreeascalcu­
latedbyroutersRI,R2,andR3isshownbyathickline.WhenRIreceivesapacket
fromthesourcethroughtheinterface rnl,itconsultsitsroutingtableandfindsthatthe
shortestpathfromRItothesourceisthroughinterface mI.Thepacketisforwarded.
However, ifacopyofthepackethasarrivedthroughinterface m2,itisdiscarded
becausem2doesnotdefinetheshortestpathfromRItothesource.Thestoryisthe
samewithR2andR3.Youmaywonderwhathappensifacopyofapacketthatarrives
atthemlinterface ofR3,travelsthroughR6, R5,R2,andthenentersR3throughinter­
faceml.Thisinterface isthecorrectinterface forR3.Isthecopyofthepacketfor­
warded?Theansweristhatthisscenarioneverhappensbecausewhenthepacketgoes
fromR5toR2,itwillbediscarded byR2andneverreachesR3.Theupstream routers
towardthesourcealwaysdiscardapacketthathasnotgonethroughtheshortestpath,
thuspreventing confusion forthedownstream routers.
RPFeliminates theloopinthefloodingprocess.
Figure22.40Reversepathforwarding (RPF)
Source
R2 R5
__--------------iIII~.R6
oReversePathBroadcasting (RPB).RPFguarantees thateachnetworkreceivesa
copyofthemulticast packetwithoutformation ofloops.However, RPFdoesnot688CHAPTER 22NETWORK lAYER:DELWERY, FORWARDING, ANDROUTING
guarantee thateachnetworkreceivesonlyonecopy;anetworkmayreceivetwoor
morecopies.ThereasonisthatRPFisnotbasedonthedestination address(agroup
address); forwarding isbasedonthesourceaddress.Tovisualize theproblem, let
uslookatFigure22.41.
Figure22.41Problem withRPF
Net3receivestwo
copiesofthepacket
b.RPBRlistheparentofNetlandNet2.
R2istheparentofNet3Net3inthisfigurereceives twocopiesofthepacketeventhougheachrouter
justsendsoutonecopyfromeachinterface. Thereisduplication becauseatreehas
notbeenmade;insteadofatreewehaveagraph.Net3hastwoparents:routersR2
andR4.
Toeliminate duplication, wemustdefineonlyoneparentrouterforeachnetwork.
Wemusthavethisrestriction: Anetworkcanreceiveamulticast packetfromaparticular
sourceonlythroughadesignated parentrouter.
Nowthepolicyisclear.Foreachsource,theroutersendsthepacketonlyoutofthose
interfaces forwhichitisthedesignated parent.Thispolicyiscalledreversepathbroad­
casting(RPB).RPBguarantees thatthepacketreacheseverynetworkandthateverynet­
workreceivesonlyonecopy.Figure22.42showsthedifference betweenRPFandRPB.
Figure22.42RPFVersusRPB
Thereadermayaskhowthedesignated parentisdetermined. Thedesignated parent
routercanbetherouterwiththeshortestpathtothesource.BecauseroutersperiodicallySECTION 22.4MULTICAST ROUTING PROTOCOLS 689
sendupdating packetstoeachother(inRIP),theycaneasilydetermine whichrouterin
theneighborhood hastheshortestpathtothesource(wheninterpreting thesourceasthe
destination), Ifmorethanonerouterqualifies, therouterwiththesmallestIPaddressis
selected.
RPBcreatesashortestpathbroadcast treefromthesourcetoeachdestination.
Itguarantees thateachdestination receivesoneandonlyonecopyofthepacket.
oReverse PathMulticasting (RPM). Asyoumayhavenoticed,RPBdoesnot
multicast thepacket,itbroadcasts it.Thisisnotefficient. Toincreaseefficiency,
themulticast packetmustreachonlythosenetworks thathaveactivemembers for
thatparticular group.Thisiscalledreversepathmulticasting (RPM).Toconvert
broadcasting tomulticasting, theprotocolusestwoprocedures, pruningandgraft­
ing.Figure22.43showstheideaofpruningandgrafting.
Figure22.43RPF,RPB,andRPM
a.RPF
I'IPruned
Iroute,~ CNet32)
c.RPM(afterpruning)b.RPB
d.RPM(aftergrafting)
Thedesignated parentrouterofeachnetworkisresponsible forholdingthemem­
bershipinformation. ThisisdonethroughtheIGMPprotocoldescribed inChapter21.
Theprocessstartswhenarouterconnected toanetworkfindsthatthereisnointerestin
amulticast packet.Theroutersendsaprunemessage totheupstream routersothatit
canexcludethecorresponding interface. Thatis,theupstream routercanstopsending
multicast messages forthisgroupthroughthatinterface. Nowifthisrouterreceives
prunemessages fromalldownstream routers,it,inturn,sendsaprunemessage toits
upstream router.
Whatifaleafrouter(arouteratthebottomofthetree)hassentaprunemessage
butsuddenly realizes, throughIGMP,thatoneofitsnetworks isagaininterested in
receiving themulticast packet?Itcansendagraftmessage. Thegraftmessage forces
theupstream routertoresumesendingthemulticast messages.690CHAPTER 22NETWORK LAYER:DELIVERY, FORWARDING, ANDROUTING
RPMaddspruningandgraftingtoRPBtocreateamulticast shortest
pathtreethatsupports dynamicmembership changes.
DVMRP TheDistance VectorMulticast Routing Protocol (DVMRP) isanimple­
mentation ofmulticast distance vectorrouting.Itisasource-based routingprotocol,
basedonRIP.
CRT
TheCore-Based Tree(CBT)protocol isagroup-shared protocol thatusesacoreas
therootofthetree.Theautonomous systemisdividedintoregions,andacore(center
routerorrendezvous router)ischosenforeachregion.
Formation oftheTreeAftertherendezvous pointisselected, everyrouterisinfonned
oftheunicastaddressoftheselectedrouter.Eachrouterthensendsaunicastjoinmessage
(similartoagraftingmessage) toshowthatitwantstojointhegroup.Thismessagepasses
throughallroutersthatarelocatedbetween thesenderandtherendezvous router.Each
intermediate routerextractsthenecessary infonnation fromthemessage, suchasthe
unicastaddressofthesenderandtheinterface throughwhichthepackethasarrived,and
forwards themessage tothenextrouterinthepath.Whentherendezvous routerhas
received alljoinmessages fromeverymember ofthegroup,thetreeisformed.Now
everyrouterknowsitsupstream router(therouterthatleadstotheroot)andthedown­
streamrouter(therouterthatleadstotheleaf).
Ifarouterwants to leavethegroup,itsendsaleavemessage toitsupstream router.
Theupstream routerremoves thelinktothatrouterfromthetreeandforwards themes­
sagetoitsupstream router,andsoon.Figure22.44showsagroup-shared treewithits
rendezvous router.
Figure22.44Group-shared treewithrendezvous router
Sharedtree
Member Member Member
Thereadermayhavenoticedtwodifferences between DVMRP andMOSPF, on
onehand,andCBT,ontheother.First,thetreeforthefirsttwoismadefromtheroot
up~thetreeforCBTisfonnedfromtheleavesdown.Second,inDVMRP, thetreeisSECTION 22.4MULTICAST ROUTING PROTOCOLS 691
firstmade(broadcasting) andthenpruned;inCBT,thereisnotreeatthebeginning; the
joining(grafting) gradually makesthetree.
Sending Multicast Packets Afterformation ofthetree,anysource(belonging tothe
groupornot)cansendamulticast packettoallmembers ofthegroup.Itsimplysends
thepackettotherendezvous router,usingtheunicastaddressoftherendezvous router;
therendezvous routerdistributes thepackettoallmembers ofthegroup.Figure22.45
showshowahostcansendamulticast packettoallmembers ofthegroup.Notethatthe
sourcehostcanbeanyofthehostsinsidethesharedtreeoranyhostoutsidetheshared
tree.InFigure22.45weshowonelocatedoutsidethesharedtree.
Figure22.45Sendingamulticast packettotherendezvous router
Sharedtree
Member MemberLegend
Unicast-=:J.
MulLicast_.
Member
Selecting theRendezvous Router Thisapproach issimpleexceptforonepoint.
Howdoweselectarendezvous routertooptimize theprocessandmulticasting aswell?
Severalmethods havebeenimplemented. However, thistopicisbeyondthescopeof
thisbook,andweleaveittomoreadvanced books.
Insummary, theCore-Based Tree(CBT)isagroup-shared tree,center-based pro­
tocolusingonetreepergroup.Oneoftheroutersinthetreeiscalledthecore.Apacket
issentfromthesourcetomembers ofthegroupfollowing thisprocedure:
1.Thesource,whichmayormaynotbepartofthetree,encapsulates themulticast
packetinsideaunicastpacketwiththeunicastdestination addressofthecoreand
sendsittothecore.Thispartofdeliveryisdoneusingaunicastaddress;theonly
recipient isthecorerouter.
2.Thecoredecapsulates theunicastpacketandforwards ittoallinterested intetfaces.
3.Eachrouterthatreceivesthemulticast packet,intum,forwards ittoallinterested
interfaces.692CHAPTER 22NETWORK LAYER:DELIVERY, FORWARDING, ANDROUTING
InCRT,thesourcesendsthemulticast packet(encapsulated inaunicastpacket)tothecore
router.Thecorerouterdecapsulates thepacketandforwards ittoallinterested interfaces.
PIM
Protocol Independent Multicast (PIM)isthenamegiventotwoindependent multicast
routingprotocols: Protocol Independent Multicast, DenseMode(PIM-DM) and
Protocol Independent Multicast, SparseMode(PIM-SM). Bothprotocols areunicast­
protocol-dependent, butthesimilarity endshere.Wediscusseachseparately.
PIM-DM PIM-DM isusedwhenthereisapossibility thateachrouterisinvolved in
multicasting (densemode).Inthisenvironment, theuseofaprotocol thatbroadcasts
thepacketisjustifiedbecausealmostallroutersareinvolved intheprocess.
PIM-DM isusedinadensemulticast environment, suchasaLAN.
PIM-DM isasource-based treeroutingprotocol thatusesRPFandpruningand
grafting strategies formulticasting. Itsoperation islikethatofDVMRP; however,
unlikeDVMRP, itdoesnotdependonaspecificunicasting protocol. Itassumesthatthe
autonomous systemisusingaunicastprotocol andeachrouterhasatablethatcanfind
theoutgoing interface thathasanoptimalpathtoadestination. Thisunicastprotocol
canbeadistancevectorprotocol (RIP)orlinkstateprotocol (OSPF).
PIM-DM usesRPFandpruningandgraftingstrategies tohandlemulticasting.
However, itisindependent oftheunderlying unicastprotocol.
PIM-SM PIM-SM isusedwhenthereisaslightpossibility thateachrouterisinvolved
inmulticasting (sparsemode).Inthisenvironment, theuseofaprotocolthatbroadcasts
thepacketisnotjustified; aprotocol suchasCBTthatusesagroup-shared treeismore
appropriate.
PIM-SM isusedinasparsemulticast environment suchasaWAN.
PIM-SMisagroup-shared treeroutingprotocol thathasarendezvous point(RP)
asthesourceofthetree.Itsoperation islikeCBT;however, itissimplerbecauseitdoes
notrequireacknowledgment fromajoinmessage. Inaddition, itcreatesabackupsetof
RPsforeachregiontocoverRPfailures.
Oneofthecharacteristics ofPIM-SMisthatitcanswitchfromagroup-shared tree
strategytoasource-based treestrategywhennecessary. Thiscanhappenifthereisa
denseareaofactivityfarfromtheRP.Thatareacanbemoreefficiently handledwitha
source-based treestrategyinsteadofagroup-shared treestrategy.
PIM-SM issimilartoCRTbutusesasimplerprocedure.
MBONE
Multimedia andreal-time communication haveincreased theneedformulticasting in
theInternet. However, onlyasmallfractionofInternetroutersaremulticast routers.InSECTION 22.4MULTICAST ROUTING PROTOCOLS 693
otherwords,amulticast routermaynotfindanothermulticast routerintheneighbor­
hoodtoforwardthemulticast packet.Although thisproblemmaybesolvedinthenext
fewyearsbyaddingmoreandmoremulticast routers,thereisanothersolutiontothis
problem. Thesolutionistunneling. Themulticast routersareseenasagroupofrouters
ontopofunicastrouters.Themulticast routersmaynotbeconnected directly,butthey
areconnected logically. Figure22.46showstheidea.InFigure22.46,onlytherouters
enclosedintheshadedcirclesarecapableofmulticasting. Withouttunneling, theserouters
areisolatedislands.Toenablemulticasting, wemakeamulticast backbone (MBONE)
outoftheseisolatedroutersbyusingtheconceptoftunneling.
Figure22.46Logicaltunneling
Logicaltunnel
Rl
R3
Logicaltunnel
Alogicaltunnelisestablished byencapsulating themulticast packetinsideauni­
castpacket.Themulticast packetbecomes thepayload(data)oftheunicastpacket.The
intermediate (nonmulticast) routersforwardthepacketasunicastroutersanddeliver
thepacketfromoneislandtoanother.It'sasiftheunicastroutersdonotexistandthe
twomulticast routersareneighbors. Figure22.47showstheconcept. Sofartheonly
protocolthatsupportsMBONE andtunneling isDVMRP.
Figure22.47MBONE
,'"----- R2•\1<>'Unicast
destination
address
r---- (routerR2)Unicastsource
address
(routerRI)Multicast
group
address
Source
address------,
I
I
I
R3e-----------------------e R4694CHAPTER 22NETWORK LAYER:DELIVERY, FORWARDING, ANDROUTING
22.5RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
booksandsites.Theitemsinbrackets[...Jrefertothereference listattheendofthetext.
Books
Delivery andforwarding arediscussed inChapter6of[For06].Unicastroutingprotocols
arediscussed inChapter14of[For06].Multicasting andmulticast routingarediscussed
inChapter 15of[For06].Foracomplete discussion ofmulticasting see[WZOl]. For
routingprotocols see[HuiOO].OSPFisdiscussed in[Moy98].
Sites
owww.ietf.org/rfc.html Information aboutRFCs
RFCs
Adiscussion ofRIPcanbefoundinthefollowing RFCs:
1131,1245,1246,1247,1370,1583,1584,1585, 1586,1587, 1722,1723,2082,2453
Adiscussion ofOSPFcanbefoundinthefollowing RFCs:
1131,1245,1246,1247,1370,1583,1584,1585, 1586,1587,2178,2328,2329,2370
Adiscussion ofBGPcanbefoundinthefollowing RFCs:
1092,1105,1163,1265,1266,1267,1364,1392,1403, 1565,1654,1655,1665,1771,1772,
1745,1774,2283
22.6KEYTERMS
addressaggregation
area
areaborderrouters
areaidentification
autonomous system(AS)
backbone router
BorderGateway Protocol (BGP)
broadcasting
Core-Based Tree(CBT)protocol
data-driven
defaultmethod
delivery
designated parentrouterDijkstra's algorithm
directdelivery
distancelearning
Distance VectorMulticast Routing
Protocol (DVMRP)
distancevectorrouting
distributed database
dynamic routingmethod
dynamic routingtable
flooding
forwarding
graftmessage
group-shared treehierarchical routing
hopcount
host-specific method
ifconfig
immediate neighbors
indirectdelivery
interdomain routing
intradomain routing
least-cost tree
linkstaterouting
logicaltunnel
longestmaskmatching
metric
multicast backbone (MBONE)
Multicast OpenShortestPathFirst
(MOSPF)
multicast router
multicast routing
multicasting
multipleunicasting
netstat
network-specific method
next-hop address
next-hop method
OpenShortestPathFirst(OSPF)
optionalattribute
OSPFprotocol
pathvectorrouting
point-to-point link
poisonreverse
policyroutingSECTION 22.7SUMMARY 695
Protocol Independent Multicast (PIM)
Protocol Independent Multicast, Dense
Mode(PIM-DM)
Protocol Independent Multicast, Sparse
Mode(PIM-SM)
prunemessage
rendezvous router
rendezvous-point tree
reversepathbroadcasting (RPB)
reversepathforwarding (RPF)
reversepathmulticasting (RPM)
routemethod
routing
RoutingInformation Protocol (RIP)
routingprotocols
shortestpathtree
slowconvergence
source-based tree
speakernode
splithorizon
staticroutingtable
stublink
switching fabric
teleconferencing
transient link
triggered update
tunneling
unicasting
updatemessage
virtuallink
well-known attribute
22.7SUMMARY
oThedeliveryofapacketiscalleddirectifthedeliverer (hostorrouter)andthedes­
tinationareonthesamenetwork; thedeliveryofapacketiscalledindirectifthe
deliverer (hostorrouter)andthedestination areondifferent networks.
oInthenext-hop method, insteadofacomplete listofthestopsthepacketmust
make,onlytheaddressofthenexthopislistedintheroutingtable;inthenetwork­
specificmethod,allhostsonanetworkshareoneentryintheroutingtable.696CHAPTER 22NETWORK LAYER:DELIVERY, FORWARDING, ANDROUTING
DInthehost-specific method,thefullIPaddressofahostisgivenintheroutingtable.
DInthedefaultmethod,arouterisassigned toreceiveallpacketswithnomatchin
theroutingtable.
DTheroutingtableforclassless addressing needsatleastfourcolumns.
DAddressaggregation simplifies theforwarding processinclassless addressing.
oLongestmaskmatching isrequiredinclassless addressing.
oClassless addressing requires hierarchical andgeographical routingtoprevent
immense routingtables.
DAstaticroutingtable'sentriesareupdatedmanually byanadministrator; adynamic
routingtable'sentriesareupdatedautomatically byaroutingprotocol.
DAmetricisthecostassignedforpassageofapacketthroughanetwork.
DAnautonomous system(AS)isagroupofnetworks androutersundertheauthority
ofasingleadministration.
DRIPisbasedondistancevectorrouting,inwhicheachroutershares,atregular
intervals, itsknowledge abouttheentireASwithitsneighbors.
DTwoshortcomings associated withtheRIPprotocol areslowconvergence and
instability. Procedures toremedyRIPinstability includetriggered update,split
horizons, andpoisonreverse.
DOSPFdividesanASintoareas,definedascollections ofnetworks, hosts,and
routers.
oOSPFisbasedonlinkstaterouting,inwhicheachroutersendsthestateofits
neighborhood toeveryotherrouterinthearea.Apacketissentonlyifthereisa
changeintheneighborhood.
DOSPFroutingtablesarecalculated byusingDijkstra's algorithm.
DBGPisaninterautonomous systemroutingprotocolusedtoupdateroutingtables.
DBGPisbasedonaroutingprotocolcalledpathvectorrouting.Inthisprotocol, the
ASsthroughwhichapacketmustpassareexplicitly listed.
oInasource-based treeapproach tomulticast routing,thesource/group combination
determines thetree;inagroup-shared treeapproach tomulticast routing,thegroup
determines thetree.
DMOSPFisamulticast routingprotocol thatusesmulticast linkstateroutingto
createasource-based least-cost tree.
DInreversepathforwarding (RPF),therouterforwards onlythepacketsthathave
traveledtheshortestpathfromthesourcetotherouter.
DReversepathbroadcasting (RPB)createsashortestpathbroadcast treefromthe
sourcetoeachdestination. Itguarantees thateachdestination receivesoneand
onlyonecopyofthepacket.
DReversepathmulticasting (RPM)addspruningandgraftingtoRPBtocreatea
multicast shortestpathtreethatsupportsdynamic membership changes.
DDVMRP isamulticast routingprotocolthatusesthedistanceroutingprotocolto
createasource-based tree.
DTheCore-Based Tree(CBT)protocol isamulticast routingprotocol thatusesa
routerastherootofthetree.SECTION 22.8PRACTICE SET 697
DPIM-DM isasource-based treeroutingprotocol that usesRPFandpruningand
graftingstrategies tohandlemulticasting.
oPIM-SM isagroup-shared treeroutingprotocolthatissimilartoCBTandusesa
rendezvous routerasthesourceofthetree.
DFormulticasting betweentwononcontiguous multicast routers,wemakeamulticast
backbone (MBONE) toenabletunneling.
22.8PRACTICE SET
ReviewQuestions
1.Whatisthedifference betweenadirectandanindirectdelivery?
2.Listthreeforwarding techniques discussed inthischapterandgiveabriefdescription
ofeach.
3.Contrasttwodifferent routingtablesdiscussed inthischapter.
4.WhatisthepurposeofRIP?
5.Whatarethefunctions ofaRIPmessage?
6.Whyistheexpiration timervalue6timesthatoftheperiodictimervalue?
7.HowdoesthehopcountlimitalleviateRIP'sproblems?
8.ListRIPshortcomings andtheircorresponding fixes.
9.Whatisthebasisofclassification forthefourtypesoflinksdefinedbyOSPF?
10.WhydoOSPFmessages propagate fasterthanRIPmessages?
11.WhatisthepurposeofBGP?
12.Giveabriefdescription oftwogroupsofmulticast routingprotocols discussed in
thischapter.
Exercises
13.Showaroutingtableforahostthatistotallyisolated.
14.Showaroutingtableforahostthatisconnected toaLANwithoutbeingconnected
totheInternet.
15.Findthetopology ofthenetworkifTable22.3istheroutingtableforrouterR1.
Table22.3RoutingtableforExercise 15
Network Next-Hop
Mask Address Address Interface
/27 202.14.17.224 - rn1
/18 145.23.192.0 - rnO
Default Default 130.56.12.4 m2
16.CanrouterR1inFigure22.8receiveapacketwithdestination address140.24.7.194?
Explainyouranswer.698CHAPTER 22NETWORK LAYER:DEUVERY, FORWARDING, ANDROUTING
17.CanrouterRlinFigure22.8receiveapacketwithdestination addressl40.24.7.42?
Explainyouranswer.
18.Showtheroutingtablefortheregional ISPinFigure22.9.
19.ShowtheroutingtableforlocalISP1inFigure22.9.
20.ShowtheroutingtableforlocalISP2inFigure22.9.
21.ShowtheroutingtableforlocalISP3inFigure22.9.
22.ShowtheroutingtableforsmallISP1inFigure22.9.
23.Contrast andcompare distance vectorroutingwithlinkstaterouting.
24.Arouterhasthefollowing RIProutingtable:
Net!
Net2
Net3
Net44
2
!
5B
C
F
G
Whatwouldbethecontentsofthetableiftherouterreceived thefollowing RIP
message fromrouterC?
Net! 2
Net2 !
Net3 3
Net4 7
25.HowmanybytesareemptyinaRIPmessage thatadvertises Nnetworks?
26.Arouterhasthefollowing RIProutingtable:
Net!
Net2
Net3
Net44
2
1
5B
C
F
G
Showtheresponse message sentbythisrouter.
27.Showtheautonomous systemwiththefollowing specifications:
a.Thereareeightnetworks (NltoN8).
b.Thereareeightrouters(RltoR8).
c.Nl,N2,N3,N4,NS,andN6areEthernet LANs.
d.N7andN8arepoint-to-point WANs.
e.Rlconnects NlandN2.
f.R2connects NlandN7.
g.R3connects N2andN8.
h.R4connects N7andN6.
i.RSconnects N6andN3.
j.R6connects N6andN4.
k.R7connects N6andNS.
1.R8connects N8andN5.SECTION 22.8PRACTICE SET699
28.Drawthegraphical representation oftheautonomous systemofExercise 27as
seenbyOSPF.
29.Whichofthenetworks inExercise 27isatransient network? Whichisastub
network?
30.ArouterusingDVMRP receivesapacketwithsourceaddress10.14.17.2 from
interface 2.Iftherouterforwards thepacket,whatarethecontentsoftheentry
relatedtothisaddressintheunicastroutingtable?
31.DoesRPFactuallycreateashortestpathtree?Explain.
32.DoesRPBactuallycreateashortestpathtree?Explain. Whataretheleavesof
thetree?
33.DoesRPMactuallycreateashortestpathtree?Explain.Whataretheleavesof
thetree?
Research Activities
34.IfyouhaveaccesstoUNIX(orLINUX), usenetstatandifconfigtofindtherouting
tablefortheservertowhichyouareconnected.
35.FindouthowyourISPusesaddressaggregation andlongestmaskmatchprinciples.
36.FindoutwhetheryourIPaddressispartofthegeographical addressallocation.
37.Ifyouareusingarouter,findthenumberandnamesofthecolumnsintherouting
table.Transport Layer
Objectives
Thetransport layerisresponsible forprocess-to-process deliveryoftheentiremessage.
Aprocessisanapplication program runningonahost.Whereas thenetwork layer
overseessource-to-destination deliveryofindividual packets,itdoesnotrecognize any
relationship between thosepackets.Ittreatseachoneindependently, asthougheach
piecebelonged toaseparatemessage, whetherornotitdoes.Thetransport layer,onthe
otherhand,ensuresthatthewholemessagearrivesintactandinorder,overseeing both
errorcontrolandflowcontrolatthesource-to-destination level.
Thetransport layerisresponsible forthedelivery
ofamessagefromoneprocesstoanother.
Computers oftenrunseveralprograms atthesametime.Forthisreason,source­
to-destination deliverymeansdeliverynotonlyfromonecomputer tothenextbutalso
fromaspecificprocessononecomputer toaspecificprocessontheother.Thetransport
layerheadermusttherefore includeatypeofaddresscalledaservice-point addressin
theOSImodelandportnumberorportaddresses intheInternetandTCP/IPprotocol
suite.
Atransport layerprotocol canbeeitherconnectionless orconnection-oriented.
Aconnectionless transport layertreatseachsegment asanindependent packetand
deliversittothetransport layeratthedestination machine. Aconnection-oriented
transport layermakesaconnection with thetransport layeratthedestination machine
firstbefore delivering thepackets.Afterallthedataistransferred, theconnection is
terminated.
Inthetransport layer,amessageisnormally dividedintotransmittable segments. A
connectionless protocol, suchasUDP,treatseachsegment separately. Aconnection­
orientedprotocol, suchasTCPandSCTP,createsarelationship betweenthesegments
usingsequence numbers.
Likethedatalinklayer,thetransport layermayberesponsible forflowanderror
control.However, flowanderrorcontrolatthislayerisperformed endtoendrather
thanacrossasinglelink.Wewillseethatoneoftheprotocols discussed inthispartofthebook,UDP,isnotinvolved infloworerrorcontroLOntheotherhand,theothertwo
protocols, TCPandSCTP,useslidingwindows forflowcontrolandanacknowledgment
systemforerrorcontroL
Part5ofthebookisdevotedtothetransport layer
andtheservicesprovided bythislayer.
Chapters
Thispartconsistsoftwochapters: Chapters 23and24.
Chapter23
Chapter 23discusses threetransport layerprotocols intheInternet: UDP,TCP,and
SCTP.Thefirst,UserDatagram Protocol (UDP),isaconnectionless, unreliable proto­
colthatisusedforitsefficiency. Thesecond,Transmission ControlProtocol (TCP),isa
connection-oriented, reliableprotocol thatisagoodchoicefordatatransfer.Thethird,
StreamControlTransport Protocol (SCTP)isanewtransport-layer protocol designed
formultimedia applications.
Chapter24
Chapter24discusstworelatedtopics:congestion controlandqualityofservice.Although
thesetwoissuescanberelatedtoanylayer,wediscussthemherewithsomereferences to
otherlayers.CHAPTER 23
Process-la-Process Delivery:
UDp,TCp,andSCTP
Webeginthischapterbygivingtherationale fortheexistence ofthetransport layer­
theneedforprocess-to-process delivery. Wediscusstheissuesarisingfromthistypeof
delivery, andwediscussmethods tohandlethem.
TheInternetmodelhasthreeprotocols atthetransport layer:UDP,TCP,andSCTP.
FirstwediscussUDP,whichisthesimplestofthethree.Weseehowwecanusethis
verysimpletransport layerprotocolthatlackssomeofthefeaturesoftheothertwo.
WethendiscussTCP,acomplextransport layerprotocol. Weseehowourpreviously
presented concepts areappliedtoTCP.Wepostpone thediscussion ofcongestion control
andqualityofserviceinTCPuntilChapter24becausethesetwotopicsapplytothedata
linklayerandnetworklayeraswell.
WefinallydiscussSCTP,thenewtransport layerprotocol thatisdesigned for
multihomed, multistream applications suchasmultimedia.
23.1PROCESS-TO-PROCESS DELIVERY
Thedatalinklayerisresponsible fordeliveryofframesbetweentwoneighboring nodes
overalink.Thisiscallednode-to-node delivery. Thenetworklayerisresponsible for
deliveryofdatagrams betweentwohosts.Thisiscalledhost-to-host delivery.Communi­
cationontheInternetisnotdefinedastheexchange ofdatabetween twonodesor
betweentwohosts.Realcommunication takesplacebetweentwoprocesses (application
programs). Weneedprocess-to-process delivery. However, atanymoment, severalpro­
cessesmayberunningonthesourcehostandseveralonthedestination host.Tocomplete
thedelivery,weneedamechanism todeliverdatafromoneoftheseprocesses runningon
thesourcehosttothecorresponding processrunningonthedestination host.
Thetransport layerisresponsible forprocess-to-process delivery-the deliveryof
apacket,partofamessage, fromoneprocesstoanother.Twoprocesses communicate
inaclient/server relationship, aswewillseelater.Figure23.1showsthesethreetypes
ofdeliveries andtheirdomains.
Thetransport layerisresponsible forprocess-to-process delivery.
703704 CHAPTER 23PROCESS- TO-PROCESS DELIVERY: UDp, TCp, ANDSCTP
Figure23.1Typesofdatadeliveries
Processes
D···DNodetonode:Datalinklayer
Hosttohost:Network layer
Processtoprocess:Transport layerProcesses
D···w
\
\
\
\
\
\
\
\
\
\
\
\
\
\
"I
'I--
I
I
Nodeto:Nodeto:
node 1nodeII_ ,I
HosttohostNodetonode
ProcesstoprocessI
I ~':':f"'> ..:I
I I IINodetoINodetoI
Inode InodeIII 'II Jj
I
I'=-1
1
I
I
I
I
I
I
I
1
I
/
/
/'
Client/Server Paradigm
Although thereareseveralwaystoachieveprocess-to-process communication, themost
common oneisthroughtheclient/server paradigm. Aprocessonthelocalhost,called
aclient,needsservicesfromaprocessusuallyontheremotehost,calledaserver.
Bothprocesses (clientandserver)havethesamename.Forexample, togettheday
andtimefromaremotemachine, weneedaDaytime clientprocessrunningonthe
localhostandaDaytime serverprocessrunningonaremotemachine.
Operating systemstodaysupportbothmultiuser andmultiprogramming environ­
ments.Aremotecomputer canrunseveralserverprograms atthesametime,justas
localcomputers canrunoneormoreclientprograms atthesametime.Forcommunica­
tion,wemustdefinethefollowing:
1.Localhost
2.Localprocess
3.Remotehost
4.Remoteprocess
Addressing
Whenever weneedtodeliversomething toonespecificdestination amongmany,weneed
anaddress.Atthedatalinklayer,weneedaMACaddresstochooseonenodeamongsev­
eralnodesiftheconnection isnotpoint-to-point. Aframeinthedatalinklayerneedsa
destination MACaddressfordeliveryandasourceaddressforthenextnode'sreply.
Atthenetworklayer,weneedanIPaddresstochooseonehostamongmillions. A
datagram inthenetworklayerneedsadestination IPaddressfordeliveryandasource
IPaddressforthedestination's reply.
Atthetransport layer,weneedatransport layeraddress,calledaportnumber, to
chooseamongmultipleprocesses runningonthedestination host.Thedestination port
numberisneededfordelivery; thesourceportnumberisneededforthereply.
IntheInternetmodel,theportnumbers are16-bitintegersbetween 0and65,535.
Theclientprogram definesitselfwithaportnumber,chosenrandomly bythetransport
layersoftware runningontheclienthost.Thisistheephemeral portnumber.SECTION 23.1PROCESS-TV-PROCESS DELWERY 705
Theserverprocessmustalsodefineitselfwithaportnumber.Thisportnumber,
however, cannotbechosenrandomly.Ifthecomputer attheserversiterunsaserver
processandassignsarandomnumberastheportnumber,theprocessattheclientsite
thatwantstoaccessthatserveranduseitsserviceswillnotknowtheportnumber.Of
course,onesolutionwouldbetosendaspecialpacketandrequesttheportnumberofa
specific server, butthisrequiresmoreoverhead. TheInternethasdecidedtouseuniversal
portnumbers forservers;thesearecalledwell-known portnumbers. Therearesome
exceptions tothisrule;forexample, thereareclientsthatareassigned well-known port
numbers. Everyclientprocessknowsthewell-known portnumberofthecorresponding
serverprocess.Forexample, whiletheDaytime clientprocess,discussed above,can
useanephemeral (temporary) portnumber52,000toidentifyitself,theDaytime server
processmustusethewell-known (permanent) portnumber13.Figure23.2showsthis
concept.
Figure23.2Portnumbers
Daytime
client
DDD
H52,000f-----j
Transport layerDaytime
serverDDD
f-----j 13H
Transport layer
IDataI13~
ItshouldbeclearbynowthattheIPaddresses andportnumbers playdifferent
rolesinselecting thefinaldestination ofdata.Thedestination IPaddressdefinesthe
hostamongthedifferent hostsintheworld.Afterthehosthasbeenselected, theport
numberdefinesoneoftheprocesses onthisparticular host(seeFigure23.3).
lANARanges
ThelANA(Internet Assigned NumberAuthority) hasdividedtheportnumbers into
threeranges:wellknown,registered, anddynamic (orprivate),asshowninFigure23.4.
oWell-known ports.Theportsrangingfrom0to1023areassigned andcontrolled
bylANA.Thesearethewell-known ports.
oRegistered ports.Theportsrangingfrom1024to49,151arenotassigned orcon­
trolledbylANA.Theycanonlyberegistered withlANAtopreventduplication.
oDynamic ports.Theportsrangingfrom49,152to65,535areneithercontrolled
norregistered. Theycanbeusedbyanyprocess.Thesearetheephemeral ports.706 CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCP,ANDSCTP
Figure23.3IPaddresses versusportnumbers
~------------------~
i~~... :ILJU I
I I
I I
I
I
IIIIIII
I
J I
: ~9}}~.~~?. :Portnumber
selectstheprocess
IPheaderf------I
Transport layer(---'-----1
header
Figure23.4lANArangesIPaddress
selectsthehost
DynamicRegistered
o1023 I 49,152
I-----r-l1--1--·--------11 IfT1024 49,151
Wellknown65,535
I
SocketAddresses
Process-to-process delivery needstwoidentifiers, IPaddressandtheportnumber, at
eachendtomakeaconnection. Thecombination ofanIPaddressandaportnumberis
calledasocketaddress. Theclientsocketaddressdefinestheclientprocessuniquely
justastheserversocketaddressdefinestheserverprocessuniquely (seeFigure23.5).
Atransport layerprotocolneedsapairofsocketaddresses: theclientsocketaddress
andtheserversocketaddress.Thesefourpiecesofinformation arepartoftheIPheader
andthetransport layerprotocol header.TheIPheadercontains theIPaddresses; the
UDPorTCPheadercontainstheportnumbers.
Figure23.5Socketaddress
PortnumberSECTION 23.1PROCESS-TO-PROCESS DELIVERY 707
Multiplexing andDemultiplexing
Theaddressing mechanism allowsmultiplexing anddemultiplexing bythetransport
layer,asshowninFigure23.6.
Figure23.6Multiplexing anddemultiplexing
Processes Processes
Multiplexing
Atthesendersite,theremaybeseveralprocesses thatneedtosendpackets.However,
thereisonlyonetransport layerprotocolatanytime.Thisisamany-to-one relationship
andrequiresmultiplexing. Theprotocol acceptsmessages fromdifferent processes,
differentiated bytheirassignedportnumbers. Afteraddingtheheader,thetransport layer
passesthepackettothenetworklayer.
Demultiplexing
Atthereceiversite,therelationship isone-to-many andrequiresdemultiplexing. The
transport layerreceivesdatagrams fromthenetwork layer.Aftererrorchecking and
dropping oftheheader,thetransport layerdeliverseachmessage totheappropriate
processbasedontheportnumber.
Connectionless VersusConnection-Oriented Service
Atransport layerprotocolcaneitherbeconnectionless orconnection-oriented.
Connectionless Service
Inaconnectionless service,thepacketsaresentfromonepartytoanotherwithnoneed
forconnection establishment orconnection release.Thepacketsarenotnumbered; they
maybedelayedorlostormayarriveoutofsequence. Thereisnoacknowledgment
either.Wewillseeshortlythatoneofthetransport layerprotocols intheInternetmodel,
UDP,isconnectionless.
Connection~Oriented Service
Inaconnection-oriented service,aconnection isfirstestablished between thesender
andthereceiver.Dataaretransferred. Attheend,theconnection isreleased. Wewillsee
shortlythatTCPandSCTPareconnection-oriented protocols.708 CHAPTER 23PROCESS-TO-PROCESS DELNERY: UDp,TCp,ANDSCTP
ReliableVersusUnreliable
Thetransport layerservicecanbereliableorunreliable. Iftheapplication layerprogram
needsreliability, weuseareliabletransport layerprotocol byimplementing flowand
errorcontrolatthetransport layer.Thismeansaslowerandmorecomplex service.On
theotherhand,iftheapplication program doesnotneedreliability becauseitusesits
ownflowanderrorcontrolmechanism oritneedsfastserviceorthenatureoftheservice
doesnotdemand flowanderrorcontrol(real-time applications), thenanunreliable
protocol canbeused.
IntheInternet,therearethreecommon differenttransport layerprotocols, aswehave
alreadymentioned. UDPisconnectionless andunreliable; TCPandSCTPareconnection­
oriented andreliable.Thesethreecanrespondtothedemands oftheapplication layer
programs.
Onequestion oftencomestothemind.Ifthedatalinklayerisreliableandhasflow
anderrorcontrol,doweneedthisatthetransport layer,too?Theanswerisyes.Reliability
atthedatalinklayerisbetweentwonodes;weneedreliability betweentwoends.Because
thenetworklayerintheInternetisunreliable (best-effort delivery), weneedtoimplement
reliability atthetransport layer.Tounderstand thaterrorcontrolatthedatalinklayerdoes
notguarantee errorcontrolatthetransport layer,letuslookatFigure23.7.
Figure23.7Errorcontrol
-Errorischeckedinthesepathsbythedatalinklayer
-Errorisnotcheckedinthesepathsbythedatalinklayer
Transport
NetworkTransport
Network
Datalink
Physical
Aswewillsee,flowanderrorcontrolinTCPisimplemented bytheslidingwindow
protocol, asdiscussed inChapter 11.Thewindow, however, is character-oriented,
insteadofframe-oriented.
ThreeProtocols
TheoriginalTCP/IPprotocol suitespecifies twoprotocols forthetransport layer:UDP
andTCP.WefirstfocusonUDP,thesimplerofthetwo,beforediscussing TCP.Anew
transport layerprotocol, SCTP,hasbeendesigned, whichwealsodiscussinthischapter.
Figure23.8showsthepositionoftheseprotocols intheTCP/IPprotocol suite.SECTION 23.2USERDATAGRAM PROTOCOL (UDP) 709
Figure23.8PositionofUDp,TCp,andSCTPinTCPIIPsuite
APPli';:~~~ISillP
IBBBI SNMP1·..1BOOTPI
Underlying LANorWAN
technologyPhysical
layerTm~:;:,IISCTP
II_TC-----'pII UDPII
IjIGMP11ICMPI I
Netwo<' ITI
layer IARPIIRARPI
Datalink
layer
23.2USERDATAGRAM PROTOCOL (UDP)
TheUserDatagram Protocol (UDP)iscalledaconnectionless, unreliable transport
protocol.Itdoesnotaddanything totheservicesofIPexcepttoprovideprocess-to­
processcommunication insteadofhost-to-host communication. Also,itperforms very
limitederrorchecking.
IfUDPissopowerless, whywouldaprocesswanttouseit?Withthedisadvantages
comesomeadvantages. UDPisaverysimpleprotocolusinganrinimum ofoverhead. If
aprocesswantstosendasmallmessage anddoesnotcaremuchaboutreliability, itcan
useUDP.Sendingasmallmessage byusingUDPtakesmuchlessinteraction between
thesenderandreceiverthanusingTCPorSCTP.
Well-Known PortsforUDP
Table23.1showssomewell-known portnumbers usedbyUDP.Someportnumbers
canbeusedbybothUDPandTCP.WediscussthemwhenwetalkaboutTCPlaterin
thechapter.
Table23.1Well-known portsusedwithUDP
Port Protocol Description
7Echo Echoesareceived datagram backtothesender
9Discard Discards anydatagram thatisreceived
11Users Activeusers710 CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCp,ANDSCTP
Table23.1Well-known portsusedwithUDP(continued)
Port Protocol Description
13Daytime Returnsthedateandthetime
17Quote Returnsaquoteoftheday
19Chargen Returnsastringofcharacters
53Nameserver DomainNameService
67BOOTPs Serverporttodownload bootstrap information
68BOOTPc Clientporttodownload bootstrap information
69TFTP TrivialFileTransfer Protocol
IIIRPC RemoteProcedure Call
123NTP Network TimeProtocol
161SNMP SimpleNetwork Management Protocol
162SNMP SimpleNetwork Management Protocol (trap)
Example 23.1
InUNIX,thewell-known portsarestoredinafilecalledfetcfservices. Eachlineinthisfilegives
thenameoftheserverandthewell-known portnumber.Wecanusethegreputilitytoextractthe
linecorresponding tothedesiredapplication. Thefollowing showstheportforFTP.Notethat
FrPcanuseport21witheitherUDPorTCP.
$grep
ftp
fipftpfetclservices
21ftcp
211udp
SNMPusestwoportnumbers (161and162),eachforadifferent purpose, aswewillseein
Chapter28.
$grep
snmp
snmp
snmptrapsnmpfetclservices
161ftcp
1611udp
162/udp#Simple NetMgmtProto
#Simple NetMgmtProto
#TrapsforSNMP
UserDatagram
UDPpackets,calleduserdatagrams, haveafixed-size headerof8bytes.Figure23.9
showstheformatofauserdatagram.
Thefieldsareasfollows:
oSourceportnumber. Thisistheportnumberusedbytheprocessrunningonthe
sourcehost.Itis16bitslong,whichmeansthattheportnumbercanrangefrom0to
65,535.Ifthesourcehostistheclient(aclientsendingarequest), theportnumber,in
mostcases,isanephemeral portnumberrequested bytheprocessandchosenbythe
UDPsoftware runningonthesourcehost.Ifthesourcehostis theserver(aserver
sendingaresponse), theportnumber,inmostcases,isawell-known portnumber.SECTION 23.2USERDATAGRAM PROTOCOL (UDP) 711
Figure23.9Userdatagram format
8bytes
I' 'I
Data
Sourceportnumber
16bits
Totallength
16bitsDestination portnumber
16bits
Checksum
16bits
oDestination portnumber. Thisistheportnumberusedbytheprocessrunningon
thedestination host.Itisalso16bitslong.Ifthedestination hostistheserver(a
clientsending arequest), theportnumber, inmostcases,isawell-known port
number.Ifthedestination hostistheclient(aserversendingaresponse), theport
number, inmostcases,isanephemeral portnumber. Inthiscase,theservercopies
theephemeral portnumberithasreceived intherequestpacket.
oLength. Thisisa16-bitfieldthatdefinesthetotallengthoftheuserdatagram,
headerplusdata.The16bitscandefineatotallengthof0to65,535bytes.How­
ever,thetotallengthneedstobemuchlessbecauseaUDPuserdatagram isstored
inanIPdatagram withatotallengthof65,535 bytes.
ThelengthfieldinaUDPuserdatagram isactually notnecessary. Auser
datagram isencapsulated inanIPdatagram. ThereisafieldintheIPdatagram
thatdefinesthetotallength.ThereisanotherfieldintheIPdatagram thatdefines
thelengthoftheheader.Soifwesubtractthevalueofthesecondfieldfromthe
first,wecandeducethelengthofaUDPdatagram thatisencapsulated inan
IPdatagram.
UDPlength=IPlength-IPheader'slength
However, thedesigners oftheUDPprotocol feltthatitwasmoreefficient forthe
destination UDPtocalculate thelengthofthedatafromtheinformation provided
intheUDPuserdatagram ratherthanasktheIPsoftware tosupplythisinformation.
Weshouldremember thatwhenthe IPsoftware deliverstheUDPuserdatagram to
theUDPlayer,ithasalreadydropped theIPheader.
oChecksum. Thisfieldisusedtodetecterrorsovertheentireuserdatagram (header
plusdata).Thechecksum isdiscussed next.
Checksum
Wehavealreadytalkedabouttheconceptofthechecksum andthewayitiscalculated
inChapter10.Wehavealsoshownhowtocalculate thechecksum fortheIPandICMP
packet.WenowshowhowthisisdoneforUDP.712CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCp,ANDSCTP
TheUDPchecksum calculation isdifferent fromtheoneforIPandICMP.Here
thechecksum includes threesections: apseudoheader, theUDPheader,andthedata
comingfromtheapplication layer.
ThepseudoheaderisthepartoftheheaderoftheIPpacketinwhichtheuserdata­
gramistobeencapsulated withsomefieldsfilledwithOs(seeFigure23.10).
Figure23.10Pseudoheader forchecksum calculation
32-bitsourceIPaddress
32-bitdestination IPaddress
AliOsI8-bitprotocol16-bitUDPtotallength(17)
Sourceportaddress Destination portaddress
16bits 16bits
UDPtotallength Checksum
16bits 16bits
J)ata
(padding mustbeaddedtomakethedataamultipleof16bits)
Ifthechecksum doesnotincludethepseudoheader, auserdatagram mayarrivesafe
andsound.However, iftheIPheaderiscorrupted, itmaybedelivered tothewronghost.
Theprotocol fieldisaddedtoensurethatthepacketbelongs toUDP,andnot
toothertransport-layer protocols. WewillseelaterthatifaprocesscanuseeitherUDP
orTCP,thedestination portnumbercanbethesame.Thevalueoftheprotocol field
forUDPis17.Ifthisvalueischangedduringtransmission, thechecksum calculation at
thereceiverwilldetectitandUDPdropsthepacket.Itisnotdelivered tothewrong
protocol.
Notethesimilarities between thepseudoheader fieldsandthelast12bytesofthe
IPheader.
Example 23.2
Figure23.11showsthechecksum calculation foraverysmalluserdatagram withonly7bytes
ofdata.Becausethenumberofbytesofdataisodd,paddingisaddedforchecksum calcUlation.
Thepseudoheader aswellasthepaddingwillbedroppedwhentheuserdatagram isdelivered
toIP.
Optional UseoftheChecksum
Thecalculation ofthechecksum anditsinclusion inauserdatagram areoptional.If
thechecksum isnotcalculated, thefieldisfilledwith1s.Notethatacalculated check­
sumcanneverbeallIsbecausethisimpliesthatthesumisallOs,whichisimpossible
becauseitrequiresthatthevalueoffieldstobeOs.SECTION 23.2USERDATAGRAM PROTOCOL (UDP) 713
Figure23.11 Checksum calculation ofasimpleUDPuserdatagram
--:----:----~--1~153.18.8.105
171.2.14.10
AllOsI17I15
1087
1513
AllOs10011001 00010010~ 153.18
00001000 01101001~ 8.105
1010101100000010~ 171.2
00001110 00001010~ 14.10
00000000 00010001~oand17
00000000 00001111~ 15
00000100 00111111~ 1087
00000000 00001101~ 13
00000000 00001111~ 15
00000000 00000000 ~0(checksum)
01010100 01000101~ TandE
01010011 01010100~SandT
01001001 01001110~ IandN
010001II00000000~ Gand0(padding)
1O01O110 11101011~ Sum
HUHIOOl 00010100~ Checksum
UDPOperation
UDPusesconcepts common tothetransport layer.Theseconcepts willbediscussed
herebriefly,andthenexpanded inthenextsectionontheTCPprotocol.
Connectionless Services
Asmentioned previously, UDPprovides aconnectionless service.Thismeansthateach
userdatagram sentbyUDPisanindependent datagram. Thereisnorelationship
betweenthedifferent userdatagrams eveniftheyarecomingfromthesamesourcepro­
cessandgoingtothesamedestination program. Theuserdatagrams arenotnumbered.
Also,thereisnoconnection establishmentand noconnection termination, asisthecase
forTCP.Thismeansthateachuserdatagram cantravelonadifferent path.
Oneoftheramifications ofbeingconnectionless isthattheprocessthatusesUDP
cannotsendastreamofdatatoUDPandexpectUDPtochopthemintodifferent
relateduserdatagrams. Insteadeachrequestmustbesmallenoughtofitintooneuser
datagram. Onlythoseprocesses sendingshortmessages shoulduseUDP.
FlowandErrorControl
UDPisaverysimple,unreliable transport protocol. Thereisnoflowcontrolandhence
nowindowmechanism. Thereceivermayoverflow withincoming messages.
Thereisnoerrorcontrolmechanism inUDPexceptforthechecksum. Thismeans
thatthesenderdoesnotknowifamessagehasbeenlostorduplicated. Whenthereceiver
detectsanerrorthroughthechecksum, theuserdatagram issilentlydiscarded.
ThelackofflowcontrolanderrorcontrolmeansthattheprocessusingUDP
shouldprovidethese mechanisms.
Encapsulation andDecapsulation
Tosendamessage fromone process toanother,theUDPprotocol encapsulates and
decapsulates messages inanIPdatagram.714 CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCp,ANDSCTP
Queuing
Wehavetalkedaboutportswithoutdiscussing theactualimplementation ofthem.In
UDP,queuesareassociated withports(seeFigure23.12).
Figure23.12QueuesinUDP
Daytime Daytime
client server[jD
Outgoing,\Incoming Outgoing,\Incoming
queue queue queue queue
~t ~t
UDP Port52000 UDP Port13
Attheclientsite,whenaprocessstarts,itrequestsaportnumberfromtheoperating
system.Someimplementations createbothanincoming andanoutgoing queueassociated
witheachprocess.Otherimplementations createonlyanincoming queueassociated
witheachprocess.
Notethatevenifaprocesswantstocommunicate withmultiple processes, it
obtainsonlyoneportnumberandeventually oneoutgoing andoneincoming queue.
Thequeuesopenedbytheclientare,inmostcases,identified byephemeral portnumbers.
Thequeuesfunctionaslongastheprocessisrunning.Whentheprocessterminates, the
queuesaredestroyed.
Theclientprocesscansendmessages totheoutgoing queuebyusingthesource
portnumberspecified intherequest.UDPremovesthemessages onebyoneand,after
addingtheUDPheader,deliversthemtoIP.Anoutgoing queuecanoverflow.Ifthis
happens, theoperating systemcanasktheclientprocesstowaitbeforesendingany
moremessages.
Whenamessage arrivesforaclient,UDPcheckstoseeifanincoming queuehas
beencreatedfortheportnumberspecified inthedestination portnumberfieldofthe
userdatagram. Ifthereissuchaqueue,UDPsendsthereceived userdatagram tothe
endofthequeue.Ifthereisnosuchqueue,UDPdiscardstheuserdatagram andasks
theICMPprotocoltosendaportunreachable message totheserver.Alltheincoming
messages foroneparticular clientprogram, whethercomingfromthesameoradifferent
server,aresenttothesamequeue.Anincoming queuecanoverflow.Ifthishappens,
UDPdropstheuserdatagram andasksforaportunreachable message tobesentto
theserver.
Attheserversite,themechanism ofcreatingqueuesisdifferent. Initssimplestform,
aserverasksforincoming andoutgoing queues,usingitswell-known port,whenitstarts
running.Thequeuesremainopenaslongastheserverisrunning.
Whenamessage arrivesforaserver,UDPcheckstoseeifanincoming queuehas
beencreatedfortheportnumberspecified inthedestination portnumberfieldoftheuserSECTION 23.3TCP 715
datagram. Ifthereissuchaqueue,UDPsendsthereceived userdatagram totheendof
thequeue.Ifthereisnosuchqueue,UDPdiscardstheuserdatagram andaskstheICMP
protocol tosendaportunreachable message totheclient.Alltheincoming messages
foroneparticular server,whethercomingfromthesameoradifferent client,aresentto
thesamequeue.Anincoming queuecanoverflow.Ifthishappens, UDPdropstheuser
datagram andasksforaportunreachable message tobesenttotheclient.
Whenaserverwantstorespondtoaclient,itsendsmessages totheoutgoing queue,
usingthesourceportnumberspecified intherequest.UDPremoves themessages one
byoneand,afteraddingtheUDPheader,deliversthemtoIP.Anoutgoing queuecan
overflow.Ifthishappens, theoperating systemaskstheservertowaitbeforesending
anymoremessages.
UseofUDP
Thefollowing listssomeusesoftheUDPprotocol:
oUDPissuitableforaprocessthatrequiressimplerequest-response communication
withlittleconcernforflowanderrorcontrol.Itisnotusuallyusedforaprocess
suchasFrPthatneedstosendbulkdata(seeChapter26).
oUDPissuitableforaprocesswithinternalflowanderrorcontrolmechanisms. For
example, theTrivialFileTransferProtocol (TFTP)processincludes flowanderror
control.ItcaneasilyuseUDP.
oUDPisasuitabletransport protocol formulticasting. Multicasting capability is
embedded intheUDPsoftware butnotintheTCPsoftware.
oUDPisusedformanagement processes suchasSNMP(seeChapter28).
oUDPisusedforsomerouteupdating protocols suchasRoutingInformation Protocol
(RIP)(seeChapter22).
23.3TCP
Thesecondtransport layerprotocol wediscussinthischapteriscalledTransmission
ControlProtocol (TCP).TCP,likeUDP,isaprocess-to-process (program-to-program)
protocol. TCP,therefore, likeUDP,usesportnumbers. UnlikeUDP,TCPisaconnection­
oriented protocol; itcreatesavirtualconnection between twoTCPstosenddata.In
addition, TCPusesflowanderrorcontrolmechanisms atthetransport level.
Inbrief,TCPiscalledaconnection-oriented, reliabletransport protocol.Itadds
connection-oriented andreliability featurestotheservicesofIP.
TCPServices
BeforewediscussTCPindetail,letusexplaintheservicesofferedbyTCPtothepro­
cessesattheapplication layer.
Process-to-Process Communication
LikeUDP,TCPprovidesprocess-to-process communication usingportnumbers. Table23.2
listssomewell-known portnumbers used byTCP.716 CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCP,ANDSCTP
Table23.2Well-known portsusedbyTCP
Port Protocol Description
7Echo Echoesareceiveddatagram backtothesender
9Discard Discards anydatagram thatisreceived
11Users Activeusers
13Daytime Returnsthedateandthetime
17Quote Returnsaquoteoftheday
19Chargen Returnsastringofcharacters
20FIP,Data FileTransferProtocol (dataconnection)
21FIP,Control FileTransfer Protocol (controlconnection)
23TELNET Tenninal Network
25SMTP SimpleMailTransferProtocol
53DNS DomainNameServer
67BOOTP Bootstrap Protocol
79Finger Finger
80HTTP Hypertext Transfer Protocol
111RPC RemoteProcedure Call
StreamDelivery Service
TCP,unlikeUDP,isastream-oriented protocol. InUDP,aprocess(anapplication pro­
gram)sendsmessages, withpredefined boundaries, toUDPfordelivery. UDPaddsits
ownheadertoeachofthesemessages anddeliversthemtoIPfortransmission. Each
message fromtheprocessiscalIedauserdatagram andbecomes, eventually, oneIP
datagram. NeitherIPnorUDPrecognizes anyrelationship betweenthedatagrams.
TCP,ontheotherhand,allows the sendingprocesstodeliverdataasastreamof
bytesandallows the receiving processtoobtaindataasastreamofbytes.TCPcreates
anenvironment inwhichthetwoprocesses seemtobeconnected byanimaginary "tube"
thatcarriestheirdataacrosstheInternet. Thisimaginary environment isdepicted in
Figure23.13.Thesendingprocessproduces (writesto)thestreamofbytes,andthe
receiving processconsumes (readsfrom)them.
Figure23.13 Streamdelivery
Sending
processReceiving
process
TCP TCPSECTION 23.3TCP 717
SendingandReceiving Buffers Becausethesendingandthereceiving processes may
notwriteorreaddataatthesamespeed,TCPneedsbuffersforstorage.Therearetwo
buffers,thesendingbufferandthereceiving buffer,oneforeachdirection. (Wewillsee
laterthatthesebuffersarealsonecessary forflowanderrorcontrolmechanisms used
byTCP.)Onewaytoimplement abufferistouseacirculararrayofI-bytelocations as
showninFigure23.14.Forsimplicity, wehaveshowntwobuffersof20byteseach;
normally thebuffersarehundreds orthousands ofbytes,depending ontheimplemen­
tation.Wealsoshowthebuffersasthesamesize,whichisnotalwaysthecase.
Figure23.14Sendingandreceiving buffers
Sending
process
TCP
Nextbyte
towriteReceiving
process
Nextbyte
toreadTCP
Figure23.14showsthemovement ofthedatainonedirection. Atthesendingsite,
thebufferhasthreetypesofchambers. Thewhitesectioncontains emptychambers that
canbefilledbythesendingprocess(producer). Thegrayareaholdsbytesthathave
beensentbutnotyetacknowledged. TCPkeepsthesebytesinthebufferuntilitreceives
anacknowledgment. Thecoloredareacontains bytestobesentbythesendingTCP.
However, aswewillseelaterinthischapter,TCPmaybeabletosendonlypartofthis
coloredsection.Thiscouldbeduetotheslowness ofthereceiving processorperhaps
tocongestion inthenetwork. Alsonotethatafterthebytesinthegraychambers are
acknowledged, thechambers arerecycled andavailable for usebythesendingprocess.
Thisiswhyweshowacircularbuffer.
Theoperation ofthebufferatthereceiver siteissimpler.Thecircularbufferis
dividedintotwoareas(shownaswhiteandcolored). Thewhiteareacontains empty
chambers tobefilledbybytesreceived fromthenetwork. Thecoloredsectionscontain
received bytesthatcanbereadbythereceiving process. Whenabyteisreadbythe
receiving process,thechamber isrecycled andaddedtothepoolofemptychambers.
Segments Although buffering handlesthedisparity betweenthespeedoftheproducing
andconsuming processes, weneedonemorestepbeforewecansenddata.TheIPlayer,
asaserviceprovider forTCP,needstosenddatainpackets,notasastreamofbytes.At718 CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCp,ANDSCTP
thetransport layer,TCPgroupsanumberofbytestogetherintoapacketcalledasegment.
TCPaddsaheadertoeachsegment(forcontrolpurposes) anddeliversthesegmenttothe
IPlayerfortransmission. Thesegments areencapsulated inIPdatagramsandtransmit­
ted.Thisentireoperation istransparent tothereceiving process.Laterwewillseethat
segments maybereceivedoutoforder,lost,orcorrupted andresent.Allthesearehandled
byTCPwiththereceiving process unaware ofanyactivities. Figure23.15showshow
segments arecreatedfromthebytesinthebuffers.
Figure23.15 TCPsegments
Sending
processReceiving
process
TCP TCP
Nextbyte
toacceptNextbyte
todeliver
Segment1 SegmentN
L-----.jI-+JjIUIlii"illiliil· ...•••II11Hl..-+-_----1
Notethatthesegments arenotnecessarily thesamesize.InFigure23.15,forsim­
plicity,weshowonesegment carrying 3bytesandtheothercarrying 5bytes.Inreality,
segments carryhundreds, ifnotthousands, ofbytes.
Full-Duplex Communication
TCPoffersfull-duplex service,inwhichdatacanflowinbothdirections atthesametime.
EachTCPthenhasasendingandreceiving buffer,andsegments moveinbothdirections.
Connection-Oriented Service
TCP,unlikeUDP,isaconnection-oriented protocol. WhenaprocessatsiteAwantsto
sendandreceivedatafromanotherprocessatsiteB,thefollowing occurs:
1.ThetwoTCPsestablish aconnection between them.
2.Dataareexchanged inbothdirections.
3.Theconnection isterminated.
Notethatthisisavirtualconnection, notaphysical connection. TheTCPsegment is
encapsulated inanIPdatagram andcanbesentoutoforder,orlost,orcorrupted, andthen
resent.Eachmayuseadifferentpathtoreachthedestination. Thereisnophysicalconnec­
tion.TCPcreatesastream-oriented environment inwhichitacceptstheresponsibility ofSECT/ON 23.3TCP719
delivering thebytesinordertotheothersite.Thesituation issimilartocreatingabridge
thatspansmultiple islandsandpassingallthebytesfromoneislandtoanotherinone
singleconnection. Wewilldiscussthisfeaturelaterinthechapter.
Reliable Service
TCPisareliabletransport protocol.Itusesanacknowledgment mechanism tocheck
thesafeandsoundarrivalofdata.Wewilldiscussthisfeaturefurtherinthesectionon
errorcontrol.
TCPFeatures
Toprovidetheservicesmentioned intheprevious section,TCPhasseveralfeaturesthat
arebrieflysummarized inthissectionanddiscussed laterindetail.
Numbering System
Although theTCPsoftware keepstrackofthesegments beingtransmitted orreceived,
thereisnofieldforasegment numbervalueinthesegment header.Instead,thereare
twofieldscalledthesequence number andtheacknowledgment number. Thesetwo
fieldsrefertothebytenumberandnotthesegmentnumber.
ByteNumber TCPnumbersalldatabytesthataretransmitted inaconnection. Number­
ingisindependent ineachdirection. WhenTCPreceivesbytesofdatafromaprocess,it
storestheminthesendingbufferandnumbersthem.Thenumbering doesnotnecessarily
startfromO.Instead,TCPgenerates arandomnumberbetween0and232-1forthenum­
berofthefirstbyte.Forexample, iftherandomnumberhappenstobe1057andthetotal
datatobesentare6000bytes,thebytesarenumbered from1057to7056.Wewillseethat
bytenumbering isusedforflowanderrorcontrol.
Thebytesofdatabeingtransferred ineachconnection arenumbered byTCP.
Thenumbering startswitharandomly generated number.
Sequence Number Afterthebyteshavebeennumbered, TCPassignsasequence
numbertoeachsegmentthatisbeingsent.Thesequence numberforeachsegment is
thenumberofthefirstbytecarriedinthatsegment.
Example 23.3
Suppose aTCPconnection istransferring afileof5000bytes.Thefirstbyteisnumbered 1O,00l.
Whatarethesequence numbers foreachsegmentifdataaresentinfivesegments, eachcarrying
1000bytes?
Solution
Thefollowing showsthesequence numberforeachsegment:
Segment 1 Sequence Number: 10,001(range:10,001to11,(00)
Segment 2 Sequence Number: 11,001(range:11,001to12,000)
Segment 3 Sequence Number: 12,001(range:12,001to13,000)
Segment 4 Sequence Number: 13,001(range:13,001to14,000)
Segment 5 Sequence Number: 14,001(range:14,001to15,000)720CHAPTER 23PROCESS-TO-PROCESS DEliVERY: UDp,TCP,ANDSCTP
Thevalueinthesequence numberfieldofasegmentdefinesthe
numberofthefirstdatabytecontained inthatsegment.
Whenasegment carriesacombination ofdataandcontrolinformation (piggy­
backing), itusesasequence number.Ifasegmentdoesnotcarryuserdata,itdoesnot
logically defineasequence number.Thefieldisthere,butthevalueisnotvalid.However,
somesegments, whencarrying onlycontrolinformation, needasequence numberto
allowanacknowledgment fromthereceiver. Thesesegments areusedforconnection
establishment, termination, orabortion. Eachofthesesegments consumes onesequence
numberasthoughitcarried1byte,buttherearenoactualdata.Iftherandomly generated
sequence numberisx,thefirstdatabyteisnumbered x+1.Thebytexisconsidered a
phonybytethatisusedforacontrolsegmenttoopenaconnection, aswewillseeshortly.
Acknowledgment Number Aswediscussed previously, communication inTCPisfull
duplex;whenaconnection isestablished, bothpartiescansendandreceivedataatthe
sametime.Eachpartynumbers thebytes,usuallywithadifferent startingbytenumber.
Thesequence numberineachdirection showsthenumberofthefirstbytecarriedby
thesegment. Eachpartyalsousesanacknowledgment numbertoconfirmthebytesithas
received. However, theacknowledgment numberdefinesthenumberofthenextbyte
thatthepartyexpectstoreceive.Inaddition, theacknowledgment numberiscumula­
tive,whichmeansthatthepartytakesthenumberofthelastbytethatithasreceived,
safeandsound,addsItoit,andannounces thissumastheacknowledgment number.
Thetermcumulative heremeansthatifapartyuses5643asanacknowledgment number,
ithasreceived allbytesfromthebeginning upto5642.Notethatthisdoesnotmean
thatthepartyhasreceived5642bytesbecausethefirstbytenumberdoesnothavetostart
fromO.
Thevalueoftheacknowledgment fieldinasegmentdefines
thenumberofthenextbyteapartyexpectstoreceive.
Theacknowledgment numberiscumulative.
FlowControl
TCP,unlikeUDP,provides flowcontrol.Thereceiverofthedatacontrolstheamountof
datathataretobesentbythesender.Thisisdonetopreventthereceiverfrombeingover­
whelmed withdata.Thenumbering systemallowsTCPtouseabyte-oriented flowcontrol.
ErrorControl
Toprovidereliableservice,TCPimplements anerrorcontrolmechanism. Although
errorcontrolconsiders asegmentastheunitofdataforerrordetection (lossorcorrupted
segments), errorcontrolisbyte-oriented, aswewillseelater.
Congestion Control
TCP,unlikeUDP,takesintoaccountcongestion inthenetwork. Theamountofdatasent
byasenderisnotonlycontrolled bythe receiver (flowcontrol), butisalsodetennined
bythelevelofcongestion inthenetwork.SECTION 23.3TCP 721
Segment
BeforewediscussTCPingreaterdetail,letusdiscusstheTCPpacketsthemselves. A
packetinTCPiscalledasegment.
Format
TheformatofasegmentisshowninFigure23.16.
Figure23.16TCPsegmentformat
Sequence number
32bits
Acknowledgment number
32bits
HLEN
4bits
OptionsandPaddingWindow size
16bits
Urgentpointer
16bits
Thesegment consistsofa20-to60-byteheader,followed bydatafromtheappli­
cationprogram. Theheaderis20bytesiftherearenooptionsandupto60bytesifit
containsoptions.Wewilldiscusssomeoftheheaderfieldsinthissection.Themeaning
andpurposeofthesewillbecomeclearerasweproceedthroughthechapter.
oSourceportaddress. Thisisa16-bitfieldthatdefinestheportnumberofthe
application program inthehostthatissending the segment. Thisservesthesame
purposeasthesourceportaddressintheUDPheader.
oDestination portaddress. Thisisa16-bitfieldthatdefinestheportnumberofthe
application program inthehostthatisreceiving thesegment. Thisservesthesame
purposeasthedestination portaddressintheUDPheader.
oSequence number. This32-bitfielddefinesthenumberassignedtothefirstbyteof
datacontained inthissegment. Aswesaidbefore,TCPisastreamtransport protocol.
Toensureconnectivity, eachbytetobetransmitted isnumbered. Thesequence number
tellsthedestination whichbyteinthissequence comprises thefirstbyteintheseg­
ment.Duringconnection establishment, eachpartyusesarandomnumbergenerator to
createaninitialsequence number(ISN),whichisusuallydifferentineachdirection.
oAcknowledgment number. This32-bitfielddefinesthebytenumberthatthe
receiverofthesegmentisexpecting toreceivefromtheotherparty.Ifthereceiver722CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCp,ANDSCTP
ofthesegment hassuccessfully received bytenumberxfromtheotherparty,it
definesx+Iastheacknowledgment number.Acknowledgment anddatacanbe
piggybacked together.
DHeaderlength.This4-bitfieldindicates thenumberof4-bytewordsintheTCP
header.Thelengthoftheheadercanbebetween 20and60bytes.Therefore, the
valueofthisfieldcanbebetween5(5x 4=20)and15(15x 4=60).
DReserved. Thisisa6-bitfieldreserved forfutureuse.
DControl. Thisfielddefines6differentcontrolbitsorflagsasshowninFigure23.17.
Oneormoreofthesebitscanbesetatatime.
Figure23.17Controlfield
RSTRST:Resettheconnection
SYN:Synchronize sequence numbers
FIN:Terminate theconnection
PSH ACKURG:Urgentpointerisvalid
ACK:Acknowledgment isvalid
PSH:Requestforpush
URGSYN FINI ____ 01.....-_""""-- _
Thesebitsenableflowcontrol,connection establishment andtermination, connection
abortion, andthemodeofdatatransferinTCP.Abriefdescription ofeachbitisshownin
Table23.3.Wewilldiscussthemfurtherwhenwestudythedetailedoperation ofTCP
laterinthechapter.
Table23.3Description offlagsinthecontrolfield
Flag Description
URGThevalueoftheurgentpointerfieldisvalid.
ACKThevalueoftheacknowledgment fieldisvalid.
PSHPushthedata.
RSTResettheconnection.
SYNSynchronize sequence numbers duringconnection.
FINTerminate theconnection.
DWindow size.Thisfielddefinesthesizeofthewindow, inbytes,thattheother
partymustmaintain. Notethatthelengthofthisfieldis16bits,whichmeansthat
themaximum sizeofthewindowis65,535bytes. This valueisnormally referred
toasthereceiving window(rwnd)andisdetermined bythereceiver. Thesender
mustobeythedictation ofthereceiverinthis case.
DChecksum. This16-bitfieldcontainsthechecksum. Thecalculation ofthecheck­
sumforTCPfollowsthesameprocedure astheone described forUDP.However, the
inclusion ofthechecksum intheUDPdatagram isoptional, whereastheinclusion
ofthechecksum forTCPismandatory. Thesamepseudoheader, servingthesameSECTION 23.3TCP 723
purpose,isaddedtothesegment. FortheTCPpseudoheader,thevalueforthepro­
tocolfieldis6.
oUrgentpointer. Thisl6-bitfield,whichisvalidonlyiftheurgentflagisset,is
usedwhenthesegmentcontains urgentdata.Itdefinesthenumberthatmustbe
addedtothesequence numbertoobtainthenumberofthelasturgentbyteinthe
datasectionofthesegment. Thiswillbediscussed laterinthischapter.
oOptions. Therecanbeupto40bytesofoptionalinformation intheTCPheader.
Wewillnotdiscusstheseoptionshere;pleaserefertothereference listformore
information.
ATCPConnection
TCPisconnection-oriented. Aconnection-oriented transport protocol establishes a
virtualpathbetweenthesourceanddestination. Allthesegments belonging toames­
sagearethensentoverthisvirtualpath.Usingasinglevirtualpathway fortheentire
message facilitates theacknowledgment processaswellasretransmission ofdamaged
orlostframes.YoumaywonderhowTCP,whichusestheservicesofIP,aconnection­
lessprotocol, canbeconnection-oriented. ThepointisthataTCPconnection isvirtual,
notphysical. TCPoperatesatahigherlevel.TCPusestheservicesofIPtodeliverindi­
vidualsegments tothereceiver,butitcontrolstheconnection itself.Ifasegmentislost
orcorrupted, itisretransmitted. UnlikeTCP,IPisunawareofthisretransmission. Ifa
segment arrivesoutoforder,TCPholdsituntilthemissingsegments arrive;IPis
unawareofthisreordering.
InTCP,connection-oriented transmission requiresthreephases:connection estab­
lishment, datatransfer,andconnection termination.
Connection Establishment
TCPtransmits datainfull-duplex mode.WhentwoTCPsintwomachines arecon­
nected,theyareabletosendsegments toeachothersimultaneously. Thisimpliesthat
eachpartymustinitialize communication andgetapproval fromtheotherpartybefore
anydataaretransferred.
Three-WayHandshaking Theconnection establishment inTCPiscalledthree­
wayhandshaking. Inourexample, anapplication program, calledtheclient,wantsto
makeaconnection withanotherapplication program, calledtheserver,usingTCPas
thetransport layerprotocol.
Theprocessstartswiththeserver.TheserverprogramtellsitsTCPthatitisready
toacceptaconnection. Thisiscalledarequestforapassiveopen.Although theserver
TCPisreadytoacceptanyconnection fromanymachine intheworld,itcannotmake
theconnection itself.
Theclientprogramissuesarequestforanactiveopen.Aclientthatwishestocon­
necttoanopenservertellsitsTCPthatitneedstobeconnected tothatparticular
server.TCPcannowstartthethree-way handshaking processasshowninFigure23.18.
Toshowtheprocess,weusetwotimelines:oneateachsite.Eachsegmenthasvalues
forallitsheaderfieldsandperhapsforsomeofitsoptionfields,too.However, weshow
onlythefewfieldsnecessary tounderstand eachphase.Weshowthesequence number,724CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCP,ANDSCTP
Figure23.18Connection establishment usingthree-way handshaking
Client
r--A:ACKflag
S:SYNflagServer-
Active
open
TimePassive
gr-~-~~~------l open
Time
theacknowledgment number,thecontrolflags(onlythosethatareset),andthewindow
size,ifnotempty.Thethreestepsinthisphaseareasfollows.
1.Theclientsendsthefirstsegment, aSYNsegment, inwhichonlytheSYNflagisset.
Thissegmentisforsynchronization ofsequence numbers.Itconsumes onesequence
number.Whenthedatatransferstarts,thesequence numberisincremented by1.We
cansaythattheSYNsegmentcarriesnorealdata,butwecanthinkofitascontaining
1imaginary byte.
ASYNsegmentcannotcarrydata,butitconsumes onesequence number.
2.Theserversendsthesecondsegment, aSYN+ACKsegment, with2flagbitsset:
SYNandACK.Thissegmenthasadualpurpose.ItisaSYNsegmentforcommu­
nication intheotherdirection andservesastheacknowledgment fortheSYN
segment.Itconsumes onesequence number.
ASYN+ACKsegmentcannotcarrydata,
butdoesconsume onesequence number.
3.Theclientsendsthethirdsegment. ThisisjustanACKsegment.Itacknowledges
thereceiptofthesecond segment withtheACKflagandacknowledgment number
field.Note that thesequence numberinthissegmentisthesameastheoneinthe
SYNsegment; theACKsegmentdoesnotconsume anysequence numbers.
AnACKsegment, ifcarrying nodata,consumes nosequence number.SECTION 23.3TCP 725
Simultaneous OpenAraresituation, calledasimultaneous open,mayoccurwhen
bothprocesses issueanactiveopen.Inthiscase,bothTCPstransmitaSYN+ACK
segmenttoeachother,andonesingleconnection isestablished betweenthem.
SYNFlooding Attack Theconnection establishment procedure inTCPissusceptible
toaserioussecurityproblemcalledtheSYNfloodingattack.Thishappenswhenamali­
ciousattackersendsalargenumberofSYNsegments toaserver,pretending thateach
ofthemiscorningfromadifferentclientbyfakingthesourceIPaddresses inthedata­
grams.Theserver,assuming thattheclientsareissuinganactiveopen,allocates the
necessary resources, suchascreatingcommunication tablesandsettingtimers.The
TCPserverthensendstheSYN+ACKsegments tothefakeclients,whicharelost.Dur­
ingthistime,however, alotofresources areoccupied withoutbeingused.If,duringthis
shorttime,thenumberofSYNsegments islarge,theservereventually runsoutof
resources andmaycrash.ThisSYNfloodingattackbelongstoatypeofsecurityattack
knownasadenial-of-service attack,inwhichanattackermonopolizes asystemwith
somanyservicerequeststhatthesystemcollapses anddeniesservicetoeveryrequest.
Someimplementations ofTCPhavestrategies toalleviate the effects ofaSYN
attack.Somehaveimposedalimitonconnection requestsduringaspecified periodof
time.Othersfilteroutdatagrams comingfromunwanted sourceaddresses. Onerecent
strategyistopostpone resource allocation untiltheentireconnection issetup,using
whatiscalledacookie.SCTP,thenewtransport layerprotocolthatwediscussinthe
nextsection,usesthisstrategy.
DataTransfer
Afterconnection isestablished, bidirectional datatransfer cantakeplace.Theclient
andservercanbothsenddataandacknowledgments. Wewillstudytherulesof
acknowledgment laterinthechapter;forthemoment, itisenoughtoknowthatdata
traveling inthesamedirection asanacknowledgment arecarriedonthesameseg­
ment.Theacknowledgment ispiggybacked withthedata.Figure23.19showsanexample.
Inthisexample, afterconnection isestablished (notshowninthefigure),theclient
sends2000bytesofdataintwosegments. Theserverthensends2000bytesinoneseg­
ment.Theclientsendsonemoresegment. Thefirstthreesegments carrybothdataand
acknowledgment, butthelastsegmentcarriesonlyanacknowledgment becausethere
arenomoredatatobesent.Notethevaluesofthesequence andacknowledgment
numbers. Thedatasegments sentbytheclienthavethePSH(push)flagsetsothatthe
serverTCPknowstodeliverdatatotheserverprocessassoonastheyarereceived.
Wediscusstheuseofthisflagingreaterdetaillater.Thesegmentfromtheserver,on
theotherhand,doesnotsetthepushflag.MostTCPimplementations havetheoption
tosetornotsetthisflag.
PushingDataWesawthatthesendingTCPusesabuffertostorethestreamofdata
comingfromthesendingapplication program. ThesendingTCPcanselectthesegment
size.Thereceiving TCPalsobuffersthedatawhentheyarriveanddeliversthemtothe
application programwhentheapplication programisreadyorwhenitisconvenient for
thereceiving TCP.Thistypeofflexibility increases theefficiency ofTCP.
However, onoccasion theapplication programhasnoneedforthisflexibility_ For
example, consideranapplication programthatcommunicates interactively withanother726CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCP,ANDSCTP
Figure23.19Datatransfer
Server
Client
A:ACKflag
P:PSHflag--
Data
bytes:8001-9000
Time Time
application program on theotherend.Theapplication program on onesitewantsto
sendakeystroke totheapplication attheothersiteandreceiveanimmediate response.
Delayedtransmission anddelayeddeliveryofdatamaynotbeacceptable bytheapplica­
tionprogram.
TCPcanhandlesuchasituation. Theapplication program atthesendingsitecan
requestapushoperation. ThismeansthatthesendingTCPmustnotwaitforthewindow
tobefilled.Itmustcreateasegment andsenditimmediately. ThesendingTCPmust
alsosetthepushbit(PSH)toletthereceiving TCPknowthatthesegmentincludesdata
thatmustbedelivered tothereceiving application program assoonaspossibleandnot
towaitformoredatatocome.
Although thepushoperation canberequested bytheapplication program, most
currentimplementations ignoresuchrequests. TCPcanchoosewhetherornottouse
thisfeature.
UrgentDataTCPisastream-oriented protocol. Thismeansthatthedataarepresented
fromtheapplication programtoTCPasastreamofbytes.Eachbyteofdatahasaposi­
tioninthestream.However, onoccasion anapplication program needstosendurgent
bytes.Thismeansthatthesendingapplication programwantsapieceofdatatoberead
outoforderbythereceiving application program. Asanexample, supposethatthesendingSECTION 23.3TCP727
application program issendingdatatobeprocessed bythereceiving application
program. Whentheresultofprocessing comesback,thesending application program
findsthateverything iswrong.Itwantstoaborttheprocess,butithasalreadysentahuge
amountofdata.Ifitissuesanabortcommand (control+C),thesetwocharacters willbe
storedattheendofthereceiving TCPbuffer.Itwillbedelivered tothereceiving appli­
cationprogramafterallthedatahavebeenprocessed.
ThesolutionistosendasegmentwiththeURGbitset.Thesendingapplication
programtellsthesendingTCPthatthepieceofdataisurgent.ThesendingTCPcreates
asegmentandinsertstheurgentdataatthebeginning ofthesegment. Therestofthe
segmentcancontainnormaldatafromthebuffer.Theurgentpointerfieldintheheader
definestheendoftheurgentdataandthestartofnormaldata.
Whenthereceiving TCPreceivesasegmentwiththeURGbitset,itextractsthe
urgentdatafromthesegment, usingthevalueoftheurgentpointer,anddeliversthem,
outoforder,tothereceiving application program.
Connection Termination
Anyofthetwopartiesinvolvedinexchanging data(clientorserver)canclosetheconnec­
tion,although itisusuallyinitiatedbytheclient.Mostimplementations todayallowtwo
optionsforconnection termination: three-way handshaking andfour-way handshaking
withahalf-close option.
Three-Way Handshaking Mostimplementations todayallowthree-way handshaking
forconnection termination asshowninFigure23.20.
1.Inanormalsituation, theclientTCP,after receiving aclosecommand fromthe
clientprocess,sendsthefirstsegment, aFINsegmentinwhichtheFINflagisset.
NotethataFINsegmentcanincludethelastchunkofdatasentbytheclient,orit
Figure23.20Connection termination usingthree-way handshaking
Client
r_....
Active
close
TimeA:ACKflag
F:FINflag
ACKServer.-
l:i.:Li::iJ~-
Passive
close
Time728CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCp,ANDSCTP
canbejustacontrolsegmentasshowninFigure23.20.Ifitisonlyacontrolseg­
ment,itconsumes onlyonesequence number.
TheFINsegmentconsumes onesequence numberifitdoesnotcarrydata.
2.TheserverTCP,afterreceiving theFINsegment, informsitsprocessofthesitua­
tionandsendsthesecondsegment, aFIN+ACKsegment, toconfirmthereceipt
oftheFINsegmentfromtheclientandatthesametimetoannounce theclosingof
theconnection intheotherdirection. Thissegmentcanalsocontainthelastchunk
ofdatafromtheserver.Ifitdoesnotcarrydata,itconsumes onlyonesequence
number.
TheFIN+ACKsegmentconsumes onesequence
numberifitdoesnotcarrydata.
3.TheclientTCPsendsthelastsegment, anACKsegment, toconfirmthereceiptof
theFINsegmentfromtheTCPserver.Thissegmentcontainstheacknowledgment
number,whichis1plusthesequence numberreceived intheFINsegmentfrom
theserver.Thissegmentcannotcarrydataandconsumes nosequence numbers.
Half-Close InTCP,oneendcanstopsendingdatawhilestillreceiving data.Thisis
calledahalf-close. Although eitherendcanissueahalf-close, itisnormally initiatedby
theclient.Itcanoccurwhentheserverneedsallthedatabeforeprocessing canbegin.A
goodexampleissorting.Whentheclient sendsdatatotheservertobesorted,theserver
needstoreceiveallthedatabeforesortingcanstart.Thismeanstheclient,aftersending
allthedata,canclosetheconnection intheoutbound direction. However, theinbound
direction mustremainopentoreceivethesorteddata.Theserver,afterreceiving the
data,stillneedstimeforsorting;itsoutbound direction mustremainopen.
Figure23.21showsanexampleofahalf-close. Theclienthalf-closes theconnection
bysendingaFINsegment.Theserveracceptsthehalf-close bysendingtheACKsegment.
Thedatatransferfromtheclienttotheserverstops.Theserver,however, canstillsend
data.Whentheserverhassentalltheprocessed data,itsendsaFINsegment, whichis
acknowledged byanACKfromtheclient.
Afterhalf-closing oftheconnection, datacantravelfromtheservertotheclient
andacknowledgments cantravelfromtheclienttotheserver.Theclientcannotsendany
moredatatotheserver.Notethesequence numbers wehaveused.Thesecondsegment
(ACK)consumes nosequence number.Although theclienthasreceivedsequence number
y-1andisexpecting y,theserversequence numberisstilly-1.Whentheconnection
finallycloses,thesequence numberofthelastACKsegment isstillx,becauseno
sequence numbers areconsumed duringdatatransferinthatdirection.
FlowControl
TCPusesaslidingwindow, asdiscussed inChapter11,tohandleflowcontrol.The
slidingwindowprotocolusedbyTCP,however, issomething between theGo-Back-N
andSelective Repeatslidingwindow. Theslidingwindowprotocol inTCPlookslikeSECTION 23.3TCP 729
Figure23.21Half-close
Server
Client
r--
Active
close
TimeA:ACKfiag
F:FINflag
fservertoclient...Datasegments rom
ACknoWledgmentsfromclienttoserver.
ACKPassive
close
Time
theGo-Back-N protocol becauseitdoesnotuseNAKs;itlookslikeSelective Repeat
becausethereceiverholds theout-of-order segments untilthemissingonesarrive.There
aretwobigdifferences between thisslidingwindowandtheoneweusedatthedata
linklayer.First,theslidingwindowofTCPisbyte-oriented; theonewediscussed inthe
datalinklayerisframe-oriented. Second,theTCP'sslidingwindowisofvariablesize;
theonewediscussed inthedatalinklayerwasoffixedsize.
Figure23.22showstheslidingwindowinTCP.Thewindowspansaportionofthe
buffercontaining bytesreceived fromtheprocess.Thebytesinsidethewindowarethe
bytesthatcanbeintransit;theycanbesentwithoutworrying aboutacknowledgment.
Theimaginary windowhastwowalls:oneleftandoneright.
Thewindowisopened,closed,orshrunk.Thesethreeactivities, aswewillsee,are
inthecontrolofthe receiver (anddependoncongestion inthenetwork), notthesender.
Thesendermustobeythecommands ofthereceiverinthismatter.
Opening awindowmeansmovingtherightwalltotheright.Thisallowsmorenew
bytesinthebufferthatareeligibleforsending.Closingthewindowmeansmovingthe
leftwalltotheright.Thismeansthatsomebyteshavebeenacknowledged andthesender730 CHAPTER 23PROCESS-TO-PROCESS DELNERY: UDp,TCP,ANDSCTP
Figure23.22Slidingwindow
IWindowsize=minimum (rwnd,cwnd)
p g ClosgShrinking
I•••In-InIn+ll... 1m-IImm+ll...I
Slidingwindow
in oenin
neednotworryaboutthemanymore. Sluinking thewindowmeansmovingtherightwall
totheleft.Thisisstrongly discouraged andnotallowedinsomeimplementations
becauseitmeansrevoking theeligibility ofsomebytesforsending.Thisisaproblemif
thesenderhasalreadysentthesebytes.Notethattheleftwallcannotmovetotheleft
becausethiswouldrevokesomeofthepreviously sentacknowledgments.
Aslidingwindowisusedtomaketransmission moreefficientasweDas
tocontroltheflowofdatasothatthedestination doesnotbecome
overwhelmed withdata.TCPslidingwindows arebyte-oriented.
Thesizeofthewindowatoneendisdetermined bythelesseroftwovalues:receiver
window(rwnd)orcongestion window(cwnd).Thereceiverwindowisthevalueadver­
tisedbytheopposite endinasegmentcontaining acknowledgment. Itisthenumberof
bytestheotherendcanacceptbeforeitsbufferoverflows anddataarediscarded. The
congestion windowisavaluedetermined bythenetworktoavoidcongestion. Wewill
discusscongestion laterinthechapter.
Example 23.4
Whatisthevalueofthereceiverwindow (rwnd)forhostAifthereceiver, hostB,hasabuffer
sizeof5000bytesand1000bytesofreceived andunprocessed data?
Solution
Thevalueofrwnd=5000-1000=4000.HostBcanreceiveonly4000bytesofdatabefore
overflowing itsbuffer.HostBadvertises thisvalueinitsnextsegmenttoA.
Example 23.5
WhatisthesizeofthewindowforhostAifthevalueofrwndis3000bytesandthevalueofcwnd
is3500bytes?
Solution
Thesizeofthewindowisthesmallerofrwndandcwnd,whichis3000bytes.
Example 23.6
Figure23.23showsanunrealistic exampleofaslidingwindow. Thesenderhassentbytesupto
202.Weassumethatcwndis20(inrealitythisvalueisthousands ofbytes).ThereceiverhassentSECTION 23.3TCP 731
Figure23.23 Example 23.6
Windowsize=minimum (20,9 )=9
Sent,not
acknowledged ICanbesentinunediately
~~,. ~.~~"~c"':c-c:: "
1•••11992001201120212031204120520612071208 2091•••1
~'= ·YT"""
Sentand
acknowledged•NextbytetobesentCan'tbe
sentuntilwindow
opens
anacknowledgment numberof200withanrwndof9bytes(inrealitythisvalueisthousands of
bytes).Thesizeofthesenderwindowistheminimum ofrwndandcwnd,or9bytes.Bytes200to
202aresent,butnotacknowledged. Bytes203to208canbesentwithout worrying about
acknowledgment. Bytes209andabovecannotbesent.
SomepointsaboutTCPslidingwindows:
oThesizeofthewindowisthelesserofrwndandcwnd.oThesourcedoesnothavetosendafullwindow's worthofdata.oThewindowcanbeopenedorclosedbythereceiver,butshouldnotbeshrunk.
oThedestination cansendanacknowledgment atanytimeaslongasitdoesnotresultin
ashrinking window.
oThereceivercantemporarily shutdownthewindow; thesender,however, canalways
sendasegmentof1byteafterthewindowisshutdown.
ErrorControl
TCPisareliabletransport layerprotocol. Thismeansthatanapplication program that
deliversastreamofdatatoTCPreliesonTCPtodelivertheentirestreamtotheappli­
cationprogram ontheotherendinorder,withouterror,andwithoutanypartlostor
duplicated.
TCPprovidesreliability usingerrorcontrol.Errorcontrolincludesmechanisms for
detecting corrupted segments, lostsegments, out-of-order segments, andduplicated
segments. Errorcontrolalsoincludesamechanism forcorrecting errorsaftertheyare
detected. Errordetection andcorrection inTCPisachieved throughtheuseofthree
simpletools:checksum, acknowledgment, andtime-out.
Checksum
Eachsegmentincludesachecksum fieldwhichisusedtocheckforacorrupted segment.
Ifthesegmentiscorrupted, itisdiscarded bythedestination TCPandisconsidered
aslost.TCPusesa16-bitchecksum thatismandatory ineverysegment. Wewillsee,in
Chapter24,thatthe16-bitchecksum isconsidered inadequate forthenewtransport732 CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCp,ANDSCTP
layer,SCTP.However, itcannotbechangedforTCPbecausethiswouldinvolverecon­
figuration oftheentireheaderformat.
Acknowledgment
TCPusesacknowledgments toconfirmthereceiptofdatasegments. Controlsegments
thatcarrynodatabutconsume asequence numberarealsoacknowledged. ACKsegments
areneveracknowledged.
ACKsegments donotconsume sequence numbers andarenotacknowledged.
Retransmission
Theheartoftheerrorcontrolmechanism istheretransmission ofsegments. Whena
segmentiscorrupted, lost,ordelayed,itisretransmitted. Inmodernimplementations, a
segment isretransmitted ontwooccasions: whenaretransmission timerexpiresor
whenthesenderreceivesthreeduplicate ACKs.
Inmodernimplementations, aretransmission occursiftheretransmission
timerexpiresorthreeduplicate ACKsegments havearrived.
Notethatnoretransmission occursforsegments thatdonotconsume sequence
numbers. Inparticular, thereisnotransmission foranACKsegment.
Noretransmission timerissetforanACKsegment.
Retransmission AfterRTOArecentimplementation ofTCPmaintains oneretrans­
missiontime-out (RTO)timerforalloutstanding (sent,butnotacknowledged) seg­
ments.Whenthetimermatures, theearliestoutstanding segmentisretransmitted even
thoughlackofareceivedACKcanbeduetoadelayedsegment, adelayedACK,oralost
acknowledgment. Notethatnotime-out timerissetforasegmentthatcarriesonlyan
acknowledgment, whichmeansthatnosuchsegment isresent.ThevalueofRTOis
dynamic inTCPandisupdatedbasedontheround-trip time(RTT)ofsegments. An
RTIisthetimeneededforasegmenttoreachadestination andforanacknowledgment
tobereceived.Itusesaback-offstrategysimilartoonediscussed inChapter12.
Retransmission AfterThreeDuplicate ACKSegments Theprevious ruleabout
retransmission ofasegmentissufficient ifthevalueofRTOisnotverylarge.Sometimes,
however, onesegmentislostandthereceiverreceivessomanyout-of-order segments
thattheycannotbesaved(limitedbuffersize).Toalleviate thissituation, mostimple­
mentations todayfollowthethree-duplicate-ACKs ruleandretransmit themissing
segmentimmediately. Thisfeatureisreferredtoasfastretransmission, whichwewill
seeinanexampleshortly.
Out-oj-Order Segments
Whenasegmentisdelayed,lost,ordiscarded, thesegments following thatsegmentarrive
outoforder.Originally, TCPwasdesigned todiscardallout-of-order segments, resultingSECTION 23.3TCP 733
intheretransmission ofthemissingsegmentandthefollowing segments. Mostimple­
mentations todaydonotdiscardtheout-of-order segments. Theystorethemtemporarily
andflagthemasout-of-order segments untilthemissingsegmentarrives.Note,however,
thattheout-of-order segments arenotdelivered totheprocess.TCPguarantees thatdata
aredelivered totheprocessinorder.
Datamayarriveoutoforderandbetemporarily storedbythereceiving TCP,
butyepguarantees thatnoout-of-order segmentisdelivered totheprocess.
SomeScenarios
Inthissectionwegivesomeexamples ofscenarios thatoccurduringtheoperation of
TCP.Inthesescenarios, weshowasegmentbyarectangle.Ifthesegmentcarriesdata,
weshowtherangeofbytenumbers andthevalueoftheacknowledgment field.Ifit
carriesonlyanacknowledgment, weshowonlytheacknowledgment numberina
smallerbox.
NormalOperation Thefirstscenarioshowsbidirectional datatransferbetweentwo
systems, asinFigure23.24.TheclientTCPsendsonesegment; theserverTCPsends
three.Thefigureshowswhichruleappliestoeachacknowledgment. Therearedatato
besent,sothesegmentdisplaysthenextbyteexpected. Whentheclientreceivesthe
firstsegmentfromtheserver,itdoesnothaveanymoredatatosend;itsends only an
Figure23.24Nonnaloperation
Server
Client_....
Seq:1201-1400
Act:4001
TimeSeq:4001-5000
Ack:1401
Seq:5001--6000
Ack:1401
Seq:6001-7000
Ack:1401
Time734 CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCp,ANDSCTP
ACKsegment. However, theacknowledgment needstobedelayedfor500mstoseeif
anymoresegments arrive.Whenthetimermatures, ittriggersanacknowledgment.
Thisissobecausetheclienthasnoknowledge ifothersegments arecoming; itcannot
delaytheacknowledgment forever.Whenthenextsegment arrives,anotheracknowl­
edgment timerisset.However, beforeitmatures, thethirdsegment arrives.Thearrival
ofthethirdsegment triggersanotheracknowledgment.
LostSegment Inthisscenario, weshowwhathappens whenasegment islostorcor­
rupted.Alostsegment andacorrupted segment aretreatedthesamewaybythe
receiver. Alostsegment isdiscarded somewhere inthenetwork; acorrupted segment is
discarded bythereceiver itself.Bothareconsidered lost.Figure23.25showsasitua­
tioninwhichasegment islostanddiscarded bysomerouterinthenetwork, perhaps
duetocongestion.
Figure23.25Lostsegment
Receiver
buffer
OutoforderGap
~
IIIIIReceiver
1"""
Seq:801-900
Ack:xSeq:70l-800
Ack:xSeq:501-600
:=::;=A:=c:.=k::::x:::::=!-.----------1-- ----1L..O.l..--_-----1
Seq:601-700
Ack:'x Ack:701 ---- -1'-.1-1-,-I_-----1--Sender
1"""
RTO
Time Time
Weareassuming thatdatatransferisunidirectional: onesiteissending, theotheris
receiving. Inourscenario, thesendersendssegments 1and2,whichareacknowledged
immediately byanACK.Segment 3,however, islost.Thereceiverreceives segment 4,
whichisoutoforder.Thereceiver storesthedatainthesegmentinitsbufferbutleaves
agaptoindicatethatthereisnocontinuity inthedata.Thereceiver immediately sends
anacknowledgment tothesender,displaying thenextbyteitexpects. Notethatthe
receiver storesbytes801to900,butneverdeliversthesebytestotheapplication until
thegapisfilled.
ThereceiverTCPdeliversonlyordereddatatotheprocess.SECTION 23.3TCP 735
Wehaveshownthetimerfortheearliestoutstanding segment. Thetimerforthis
definitely runsoutbecausethereceivernever sends anacknowledgment forlostorout­
of-ordersegments. Whenthetimermatures,thesendingTCPresendssegment3,which
arrivesthistimeandisacknowledged properly. Notethatthevalueinthesecondand
thirdacknowledgments differsaccording tothecorresponding rule.
FastRetransmission Inthisscenario, wewanttoshowtheideaoffastretransmis­
sion.OurscenarioisthesameasthesecondexceptthattheRTOhasahighervalue(see
Figure23.26).
Figure23.26 Fastretransmission
Sender
r
Seq:101-200
Ack:x
Seq:201~3oo
Ack:x
Seq:301-400
Ack:x
Seq:401-500
Ack:x
Seq:501-600
Ack:x
3ACKs--
TimeLostReceiver
r
Receiver
buffer
IIII
Allinorder
Time
Whenthereceiverreceives thefourth,fifth,andsixthsegments, ittriggersan
acknowledgment. Thesenderreceivesfouracknowledgments withthesamevalue(three
duplicates). Although thetimerforsegment3hasnotmaturedyet,thefasttransmission
requiresthatsegment3,thesegmentthatisexpected byalltheseacknowledgments, be
resentimmediately.
Notethatonlyonesegment isretransmitted although foursegments arenot
acknowledged. Whenthesenderreceivestheretransmitted ACK,itknowsthatthefour
segments aresafeandsoundbecauseacknowledgment iscumulative.
Congestion Control
Wediscusscongestion controlofTCPinChapter24.736 CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCp,ANDSCTP
23.4SCTP
StreamControlTransmission Protocol (SCTP)isanewreliable, message-oriented
transport layerprotocol. SCTP,however, ismostlydesigned forInternetapplications
thathaverecentlybeenintroduced. Thesenewapplications, suchasIUA(ISDNover
IP),M2UAandM3UA(telephony signaling), H.248(mediagatewaycontrol), H.323
(IPtelephony), andSIP(IPtelephony), needamoresophisticated servicethanTCPcan
provide.SCTPprovides thisenhanced performance andreliability. Webrieflycompare
UDP,TCP,andSCTP:
oUDPisamessage-oriented protocol. AprocessdeliversamessagetoUDP,which
isencapsulated inauserdatagram andsentoverthenetwork. UDPconserves the
message boundaries; eachmessage isindependent ofanyothermessage. Thisisa
desirable featurewhenwearedealingwithapplications suchasIPtelephony and
transmission ofreal-time data,aswewillseelaterinthetext.However, UDPis
unreliable; thesendercannotknowthedestinyofmessages sent.Amessagecanbe
lost,duplicated, orreceivedoutoforder.UDPalsolackssomeotherfeatures, such
ascongestion controlandflowcontrol,neededforafriendlytransport layerprotocol.
oTCPisabyte-oriented protocol.Itreceives amessage ormessages fromapro­
cess,storesthemasastreamofbytes,andsendstheminsegments. Thereisno
preservation ofthemessage boundaries. However, TCPisareliableprotocol.
Theduplicate segments aredetected, thelostsegments areresent,andthebytes
aredelivered totheendprocessinorder.TCPalsohascongestion controland
flowcontrolmechanisms.
oSCTPcombines thebestfeaturesofUDPandTCP.SCTPisareliablemessage­
orientedprotocol. Itpreserves themessageboundaries andatthesametimedetects
lostdata,duplicate data,andout-of-order data.Italsohascongestion controland
flowcontrolmechanisms. LaterwewillseethatSCTPhasotherinnovative features
unavailable inUDPandTCP.
SCTPisamessage-oriented, reliableprotocolthat
combines thebestfeaturesofUDPandTCP.
SCTPServices
Beforewediscusstheoperation ofSCTP,letusexplaintheservicesofferedbySCTPto
theapplication layerprocesses.
Process-to-Process Communication
SCTPusesallwell-known portsintheTCPspace.Table23.4listssomeextraport
numbers usedbySCTP.
Multiple Streams
Welearnedintheprevious sectionthatTCPisastream-oriented protocol. Eachcon­
nectionbetweenaTCPclientandaTCPserverinvolvesonesinglestream.TheproblemSECTION 23.4SCTP 737
Table23.4SomeSCTPapplications
Protocol PortNumber Description
IVA 9990 ISDNoverIP
M2UA 2904 SS7telephony signaling
M3UA 2905 SS7telephony signaling
H.248 2945 Mediagatewaycontrol
H.323 1718,1719, 1720,11720 IPtelephony
SIP 5060 IPtelephony
withthisapproach isthatalossatanypointinthestreamblocksthedeliveryoftherest
ofthedata.Thiscanbeacceptable whenwearetransferring text;itisnotwhenweare
sendingreal-time datasuchasaudioorvideo.SCTPallowsmultistream servicein
eachconnection, whichiscalledassociation inSCTPterminology. Ifoneofthestreams
isblocked, theotherstreamscanstilldelivertheirdata.Theideaissimilartomultiple
lanesonahighway. Eachlanecanbeusedforadifferent typeoftraffic.Forexample,
onelanecanbeusedforregulartraffic,anotherforcarpools.Ifthetrafficisblockedfor
regularvehicles, carpoolvehiclescanstillreachtheirdestinations. Figure23.27shows
theideaofmultiple-stream delivery.
Figure23.27Multiple-stream concept
Receiving
processSending
processD D
• ~. "')""
•·•
..\
SCTP•SCTP
Anassociation inSCTPcaninvolvemultiple streams.
Multihoming
ATCPconnection involvesonesourceandonedestination IPaddress.Thismeansthat
evenifthesenderorreceiverisamultihomed host(connected tomorethanonephysi­
caladdresswithmultiple IPaddresses), onlyoneoftheseIPaddresses perendcanbe
utilizedduringtheconnection. AnSCTPassociation, ontheotherhand,supports
multihoming service.Thesendingandreceiving hostcandefinemultipleIPaddresses
ineachendforanassociation. Inthisfault-tolerant approach, whenonepathfails,
anotherinterface canbeusedfordatadeliverywithoutinterruption. Thisfault-tolerant738 CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDP,TCP,ANDseTP
featureisveryhelpfulwhenwearesendingandreceiving areal-time payloadsuchas
Internettelephony. Figure23.28showstheideaofmultihoming.
Figure23.28Multihoming concept
Client
r
InternetServer­.-.
InFigure23.28,theclientisconnected totwolocalnetworks withtwoIPaddresses.
Theserverisalsoconnected totwonetworks withtwoIPaddresses. Theclientandthe
servercanmakeanassociation, using four different pairsofIPaddresses. However, note
thatinthecurrentimplementations ofSCTP,onlyonepairofIFaddresses canbechosen
fornormalcommunication; thealternative isusedifthemainchoicefails.Inother
words,atpresent,SCTPdoesnotallowloadsharingbetweendifferent paths.
SCTPassociation allowsmultipleIPaddresses foreachend.
Full-Duplex Communication
LikeTCP,SCTPoffersfull-duplex service,inwhichdatacanflowinbothdirections at
thesametime.EachSCTPthenhasasendingandreceiving buffer,andpacketsaresent
inbothdirections.
Connection-Oriented Service
LikeTCP,SCTPisaconnection-oriented protocol. However, inSCTP,aconnection is
calledanassociation. WhenaprocessatsiteAwantstosendandreceivedatafrom
anotherprocessatsiteB,thefollowing occurs:
1.ThetwoSCTPsestablish anassociation between eachother.
2.Dataareexchanged inbothdirections.
3.Theassociation isterminated.
Reliable Service
SCTP,likeTCP,isareliabletransport protocol. Itusesanacknowledgment mechanism
tocheckthesafeandsoundarrivalofdata.Wewilldiscussthisfeaturefurtherinthe
sectiononerrorcontrol.
SCTPFeatures
LetusfirstdiscussthegeneralfeaturesofSCTPandthencomparethemwiththoseofTCP.SECTION 23.4SCTP 739
Transmission Sequence Number
TheunitofdatainTCPisabyte.DatatransferinTCPiscontrolled bynumbering bytes
byusingasequence number.Ontheotherhand,theunitofdatainSCTPisaDATAchunk
whichmayormaynothaveaone-to-one relationship withthemessagecomingfromthe
processbecauseoffragmentation (discussed later),DatatransferinSCTPiscontrolled
bynumbering thedatachunks.SCTPusesatransmission sequence number (TSN)to
numberthedatachunks.Inotherwords,theTSNinSCTPplaystheanalogous roleto
thesequence numberinTCP.TSNsare32bitslongandrandomly initialized between0
and232-1.Eachdatachunkmustcarrythecorresponding TSNinitsheader.
InSCTP,adatachunkisnumbered usingaTSN.
StreamIdentifier
InTCP,thereisonlyonestreamineachconnection. InSCTP,theremaybeseveral
streamsineachassociation. EachstreaminSCTPneedstobeidentified byusinga
streamidentifier (SI).EachdatachunkmustcarrytheSIinitsheadersothatwhenit
arrivesatthedestination, itcanbeproperlyplacedinitsstream.The51isa16-bitnumber
startingfromO.
Todistinguish betweendifferent streams,SCTPusesanSI.
StreamSequence Number
Whenadatachunkarrivesatthedestination SCTP,itisdelivered totheappropriate
streamandintheproperorder.Thismeansthat,inadditiontoanSI,SCTPdefineseach
datachunkineachstreamwithastreamsequence number (SSN).
Todistinguish betweendifferent datachunksbelonging
tothesamestream,SCTPusesSSNs.
Packets
InTCP,asegmentcarriesdataandcontrolinformation. Dataarecarriedasacollection
ofbytes;controlinformation isdefinedbysixcontrolflagsintheheader.Thedesignof
SCTPistotallydifferent: dataarecarriedasdatachunks,controlinformation iscarried
ascontrolchunks.Severalcontrolchunksanddatachunkscanbepackedtogetherina
packet.ApacketinSCTPplaysthesameroleasasegmentinTCP.Figure23.29compares
asegmentinTCPandapacketinSCTP.Letusbriefly list thedifferences between an
SCTPpacketandaTCPsegment:
TCPhassegments; SCTPhaspackets.
1.Thecontrolinformation inTCPispartoftheheader;thecontrolinformation in
SCTPisincluded inthecontrolchunks.Thereareseveraltypesofcontrolchunks;
eachisusedforadifferent purpose.740CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCp,ANDSCTP
Figure23.29Comparison betweenaTCPsegmentandanSCTPpacket
Checksum
]§o Controlchunks ;:
J;Sourceportaddress Destination portaddress ]"":~
Verification tag ~
ro[.,
Cl
AsegmentinTCP ApacketinSCTP
2.ThedatainaTCPsegmenttreatedasoneentity;anSCTPpacketcancarryseveral
datachunks;eachcanbelongtoadifferent stream.
3.Theoptionssection,whichcanbepartofaTCPsegment, doesnotexistinan
SCTPpacket.OptionsinSCTParehandledbydefiningnewchunktypes.
4.Themandatory partoftheTCPheaderis20bytes,whilethegeneralheaderin
SCTPisonly12bytes.TheSCTPheaderisshorterduetothefollowing:
a.AnSCTPsequence number(TSN)belongstoeachdatachunkandhenceis
locatedinthechunk'sheader.
b.Theacknowledgment numberandwindowsizearepartofeachcontrolchunk.
c.Thereisnoneedforaheaderlengthfield(shownasHLintheTCPsegment)
becausetherearenooptionstomakethelengthoftheheadervariable; the
SCTPheaderlengthisfixed(12bytes).
d.ThereisnoneedforanurgentpointerinSCTP.
5.Thechecksum inTCPis16bits;inSCTP,itis32bits.
6.Theverification taginSCTPisanassociation identifier, whichdoesnotexistin
TCP.InTCP,thecombination ofIPandportaddresses definesaconnection; in
SCTPwemayhavemultihorning usingdifferentIPaddresses. Auniqueverification
tagisneededtodefineeachassociation.
7.TCPincludesonesequence numberintheheader,whichdefinesthenumberofthe
firstbyteinthedatasection.AnSCTPpacketcanincludeseveraldifferent data
chunks.TSNs,SIs,andSSNsdefineeachdatachunk.
8.Somesegments inTCPthatcarrycontrolinformation (suchasSYNandFIN)need
toconsume onesequence number;controlchunksinSCTPneveruseaTSN,SI,or
SSN.Thesethreeidentifiers belongonlytodatachunks,nottothewholepacket.
InSCTP,controlinformation anddatainformation arecarriedinseparate chunks.
InSCTP,wehavedatachunks,streams,andpackets.Anassociation maysendmany
packets, apacketmaycontainseveralchunks,andchunksmaybelongtodifferent
streams. Tomakethedefinitions ofthesetermsclear,letussupposethatprocessA
needstosend11messages toprocessBinthreestreams.Thefirstfourmessages areinSECTION 23.4SCTP 741
thefirststream,thesecondthreemessages areinthesecondstream,andthelastfour
messages areinthethirdstream.
Although amessage, iflong,canbecarriedbyseveraldatachunks,weassumethat
eachmessagefitsintoonedatachunk.Therefore, wehave11datachunksinthreestreams.
Theapplication processdelivers11messages toSCTP,whereeachmessage isear­
markedfortheappropriate stream.Although theprocesscoulddeliveronemessagefrom
thefirststreamandthenanotherfromthesecond,weassumethatitdeliversallmessages
belonging tothefirststreamfirst,allmessages belonging tothesecondstreamnext,and
finally,allmessages belonging tothelaststream.
Wealsoassumethatthenetworkallowsonlythreedatachunksperpacket,which
meansthatweneed.fourpacketsasshowninFigure23.30.Datachunksinstream0are
carriedinthefirstpacketandpartofthesecondpacket;thoseinstream1arecarriedin
thesecondandthirdpackets;thoseinstream2arecarriedinthethirdandfourthpackets.
Figure23.30 Packet,datachunks,andstreams
Firstpacket
Controlchunks
TSN:101
SI:O SSN:0
TSN:102
SI:OSSN:1
TSN:103
'-SI:0SSN:2Secondpacket
~~~~r:~;{?~i
Controlchunks
T5N:104
SI:O SSN:3
TSN:105
SI:1SSN:0
TSN:106
'-SI:1SSN:1Thirdpacket
~~f~j~~~t\~r~~f£~
Controlchunks
TSN:107
SI:1SSN:2
::rSN:108
SI:2SSN:0
TSN:109
SI:2SSN:1Fourthpacket
Controlchunks
TSN:llO
SI:2 SSN:2
TSN:III
51:2SSN:3
Flowofpacketsfromsendertoreceiver
Notethateachdatachunkneedsthreeidentifiers: TSN,SI,andSSN.TSNisa
cumulative numberandisused,aswewillseelater,forflowcontrolanderrorcontrol.
SIdefinesthestreamtowhichthechunkbelongs. SSNdefinesthechunk'sorderina
particular stream.Inourexample, SSNstartsfrom0foreachstream.
Datachunksareidentified bythreeitems:TSN,SI,andSSN.
TSNisacumulative numberidentifying theassociation;
SIdefinesthestream;SSNdefinesthechunkinastream.
Acknowledgment Number
TCPacknowledgment numbers arebyte-oriented andrefertothesequence numbers.
SCTPacknowledgment numbers arechunk-oriented. TheyrefertotheTSN.Asecond
difference betweenTCPandSCTPacknowledgments isthecontrolinformation. Recall
thatthisinformation ispartofthesegment headerinTCP.Toacknowledge segments
thatcarryonlycontrolinformation, TCPusesasequence numberandacknowledgment
number(forexample, aSYNsegmentneedstobeacknowledged byanACKsegment).
InSCTP,however, thecontrolinformation iscarriedbycontrolchunks,whichdonot742 CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCp,ANDSCTP
needaTSN.Thesecontrolchunksareacknowledged byanothercontrolchunkofthe
appropriate type(someneednoacknowledgment). Forexample, anINITcontrolchunk
isacknowledged byanINITACKchunk.Thereisnoneedforasequence numberoran
acknowledgment number.
InSCTP,acknowledgment numbers areusedtoacknowledge onlydatachunks;
controlchunksareacknowledged byothercontrolchunksifnecessary.
FlowControl
LikeTCP,SCTPimplements flowcontroltoavoidoverwhelming thereceiver. Wewill
discussSCTPflowcontrollaterinthechapter.
ErrorControl
LikeTCP,SCTPimplements errorcontroltoprovidereliability. TSNnumbers and
acknowledgment numbers areusedforerrorcontrol.Wewilldiscusserrorcontrollater
inthechapter.
Congestion Control
LikeTCP,SCTPimplements congestion control todetermine howmanydatachunks
canbeinjectedintothenetwork. Wewilldiscusscongestion controlinChapter24.
PacketFormat
Inthissection,weshowtheformatofapacketanddifferent typesofchunks.Mostof
theinformation presented inthissectionwillbecomeclearlater;thissectioncanbe
skippedinthefirstreadingorusedonlyasareference. AnSCTPpackethasamandatory
generalheaderandasetofblockscalledchunks.Therearetwotypesofchunks:control
chunksanddatachunks.Acontrolchunkcontrolsandmaintains the association; adata
chunkcarriesuserdata.Inapacket,thecontrolchunkscornebeforethedatachunks.
Figure23.31showsthegeneralformatofanSCTPpacket.
Figure23.31SCTPpacketformat
Generalheader
(12bytes)
-,
Chunkt.
;", (variable:length)
···
Ch.UJ;!k:N
(variable'length)"
" ".-SECTION 23.4SCTP 743
InanSCTPpacket,controlchunkscomebeforedatachunks.
GeneralHeader
Thegeneralheader(packetheader)definestheendpoints ofeachassociation towhich
thepacketbelongs, guarantees thatthepacketbelongstoaparticular association, and
preserves theintegrityofthecontentsofthepacketincluding theheaderitself.Thefonnat
ofthegeneralheaderisshowninFigure23.32.
Figure23.32Generalheader
SourceportaddressIDestination portaddress
16bits 16bits
Verification tag
32bits
Checksum
32bits
Therearefourfieldsinthegeneralheader:
oSourceportaddress. Thisisa16-bitfieldthatdefinestheportnumberofthepro­
cesssendingthepacket.
oDestination portaddress. Thisisa16-bitfieldthatdefinestheportnumberofthe
processreceiving thepacket.
oVerification tag.Thisisanumberthatmatches apackettoanassociation. This
prevents apacketfromaprevious association frombeingmistaken asapacketin
thisassociation. Itservesasanidentifier fortheassociation; itisrepeated inevery
packetduringtheassociation. Thereisaseparateverification usedforeachdirection
intheassociation.
oChecksum. This32-bitfieldcontains aCRC-32 checksum. Notethatthesizeof
thechecksum isincreased from16(inUDP,TCP,andIP)to32bitstoallowthe
useoftheCRC-32 checksum.
Chunks
Controlinfonnation oruserdataarecarriedinchunks.Thedetailedfonnatofeachchunk
isbeyondthescopeofthisbook.See[For06]fordetails.Thefirstthreefieldsarecom­
montoallchunks;theinformation fielddepends onthetypeofchunk.Theimportant
pointtoremember isthatSCTPrequires theinformation sectiontobeamultiple of
4bytes;ifnot,paddingbytes(eightas)areaddedattheendofthesection.SeeTable23.5
foralistofchunksandtheirdescriptions.
AnSCTPAssociation
SCTP,likeTCP,isaconnection-oriented protocol. However, aconnection inSCTPis
calledanassociation toemphasize multihoming.744 CHAPTER 23PROCESS-TO-PROCESS DEliVERY: UDp,TCp'ANDSCTP
Table23.5Chunks
Type Chunk Description
0 DATA Userdata
1 INIT Setsupanassociation
2INITACK Acknowledges INITchunk
3 SACK Selective acknowledgment
4 HEARTBEAT Probesthepeerforliveliness
5 HEARTBEAT ACK Acknowledges HEARTBEAT chunk
6 ABORT Abortsanassociation
7 SHUTDOWN Terminates anassociation
8 SHUTDOWN ACK Acknowledges SHUTDOWN chunk
9 ERROR Reportserrorswithoutshuttingdown
10 COOKIE ECHO Thirdpacketinassociation establishment
11 COOKIEACK Acknowledges COOKIE ECHOchunk
14 SHUTDOWN COMPLETE Thirdpacketinassociation termination
192 FORWARDTSN Foradjusting cumulative TSN
Aconnection inSCTPiscalledanassociation.
Association Establishment
Association establishment inSCTPrequires afour-way handshake. Inthisproce­
dure,aprocess,normally aclient,wants to establish anassociation withanotherprocess,
normally aserver,usingSCTPasthetransport layerprotocol. SimilartoTCP,the
SCTPserverneedstobeprepared toreceiveanyassociation (passive open).Associa­
tionestablishment, however, isinitiated bytheclient(activeopen).SCTPassociation
establishment isshowninFigure23.33.Thesteps,inanormalsituation, areasfollows:
1.Theclientsendsthefirstpacket,whichcontains anINITchunk.
2.Theserversendsthesecondpacket,whichcontains anINITACKchunk.
3.Theclientsendsthethirdpacket,whichincludes aCOOKIE ECHOchunk.This
isaverysimplechunkthatechoes,withoutchange,thecookiesentbytheserver.
SCTPallowstheinclusion ofdatachunksinthispacket.
4.Theserversendsthefourthpacket,whichincludes theCOOKIE ACKchunkthat
acknowledges thereceiptoftheCOOKIE ECHOchunk.SCTPallowstheinclusion
ofdatachunkswiththispacket.
Nootherchunkisallowedinapacketcarrying anINITorINITACKchunk.
ACOOKIE ECHOoraCOOKIE ACKchunkcancarrydatachunks.
Cookie Wediscussed aSYNflooding attackintheprevious section.WithTCP,a
malicious attackercanfloodaTCPserverwithahugenumberofphonySYNsegments
usingdifferent forgedIPaddresses. Eachtimetheserverreceives aSYNsegment, itSECTION 23.4SCTP 745
Figure23.33 Four-way handshaking
Client
r--
INIT
COOKIE ECHO
Cookie
TimeINITACK
Cookie
COOKIEACKServer
~
Time
setsupastatetableandallocates otherresources whilewaitingforthenextsegmentto
arrive.Afterawhile,however, theservermaycollapseduetotheexhaustion ofresources.
Thedesigners ofSCTPhaveastrategytopreventthistypeofattack.Thestrategy
istopostpone theallocation ofresources untilthereception ofthethirdpacket,when
theIPaddressofthesenderisverified.Theinformation receivedinthefirstpacketmust
somehow besaveduntilthethirdpacketarrives.Butiftheserversavedtheinformation,
thatwouldrequiretheallocation ofresources (memory); thisisthedilemma. Thesolution
istopacktheinformation andsenditbacktotheclient.Thisiscalledgenerating a
cookie.Thecookieissentwiththesecondpackettotheaddressreceived inthefirst
packet.Therearetwopotential situations.
1.Ifthesenderofthefirstpacketisanattacker, theserverneverreceivesthethird
packet;thecookieislostandnoresources areallocated. Theonlyeffortforthe
serveris"baking" the cookie.
2.Ifthesenderofthefirstpacketisanhonestclientthatneedstomakeaconnection,
itreceivesthesecondpacket,withthecookie.Itsendsapacket(thirdintheseries)
withthecookie,withnochanges. Theserverreceivesthethirdpacketandknows
thatithascomefromanhonestclientbecausethecookiethatthesenderhassentis
there.Theservercannowallocateresources.
Theabovestrategyworksifnoentitycan"eat"acookie"baked"bytheserver.Toguar­
anteethis,theservercreatesadigest(seeChapter30)fromtheinformation, usingits
ownsecretkey.Theinformation andthedigesttogethermakethe cookie, whichissent
totheclientinthesecondpacket.Whenthecookieisreturnedinthethirdpacket,the
servercalculates thedigestfromtheinformation. Ifthedigestmatchestheonethatis
sent,thecookiehasnotbeenchangedbyanyotherentity.
DataTransfer
Thewholepurposeofanassociation istotransferdatabetween twoends.Afterthe
association isestablished, bidirectional datatransfercantakeplace.Theclientandthe
servercanbothsenddata.LikeTCP,SCTPsupportspiggybacking.746 CHAPTER 23PROCESS-TO-PROCESS DELNERY: UDp,TCp,ANDSCTP
Thereisamajordifference, however, betweendatatransferinTCPandSCTP.TCP
receivesmessages fromaprocessasastreamofbyteswithoutrecognizing anyboundary
betweenthem.Theprocessmayinsertsomeboundaries foritspeeruse,butTCPtreats
thatmarkaspartofthetext.In otherwords,TCPtakeseachmessage andappendsitto
itsbuffer.Asegmentcancarrypartsoftwodifferent messages. Theonlyordering sys­
temimposed byTCPisthebytenumbers.
SCTP,ontheotherhand,recognizes andmaintains boundaries. Eachmessagecom­
ingfromtheprocessistreatedasoneunitandinsertedintoaDATAchunkunlessitis
fragmented (discussed later).Inthissense,SCTPislikeUDP,withonebigadvantage:
datachunksarerelatedtoeachother.
Amessage received fromaprocessbecomes aDATAchunk,orchunksiffrag­
mented,byaddingaDATAchunkheadertothemessage. EachDATAchunkformedby
amessage orafragment ofamessage hasoneTSN.Weneedtoremember thatonly
DATAchunksuseTSNsandonlyDATAchunksareacknowledged bySACKchunks.
InSCTP,onlyDATAchunksconsume TSNs;
DATAchunksaretheonlychunksthatareacknowledged.
Letusshowasimplescenario inFigure23.34.Inthisfigureaclientsendsfour
DATAchunksandreceivestwoDATAchunksfromtheserver.Later,wewilldiscuss
Figure23.34Simpledatatransfer
Server
Clientiac:u:;:::;:J
E3==
~ITSN:7105IDATAchunk
I......
TSN:7106r
DATAchunk
~1TSN:7107
1DATAchunk.....[ITSN:7108~
DATAchunk
~\\cumTSN: 7108
SACKchunk
tf---
TSN:121
DATAchunk
.....[TSN:122t~ ....- DATAchunk
r---cumTSN: 122I.....
SACKchunk --..
Time TimeSECTION 23.4SCTP 747
theuseofflowanderrorcontrolinSCTP.Forthemoment, weassumethateverything
goeswellinthisscenario.
1.TheclientsendsthefirstpacketcarryingtwoDATAchunkswithTSNs7105and
7106.
2.TheclientsendsthesecondpacketcarryingtwoDATAchunkswithTSNs7107
and7108.
3.Thethirdpacketisfromtheserver.Itcontains theSACKchunkneededto
acknowledge thereceiptofDATAchunksfromtheclient.Contrary toTCP,
SCTPacknowledges thelastin-orderTSNreceived, notthenextexpected. The
thirdpacketalsoincludesthefirstDATAchunkfromtheserverwithTSN121.
4.Afterawhile,theserversendsanotherpacketcarryingthelastDATAchunkwith
TSN122,butitdoesnotincludeaSACKchunkinthepacketbecausethelast
DATAchunkreceivedfromtheclientwasalreadyacknowledged.
5.Finally,theclientsendsapacketthatcontainsaSACKchunkacknowledging the
receiptofthelasttwoDATAchunksfromtheserver.
Theacknowledgment inSCTPdefinesthecumulative TSN,
theTSNofthelastdatachunkreceivedinorder.
Multihoming DataTransfer Wediscussed themultihoming capability ofSCTP,a
featurethatdistinguishes SCTP fromUDPandTCP.Multihoming allowsbothendsto
definemultipleIPaddresses forcommunication. However, onlyoneoftheseaddresses
canbedefinedastheprimary address; therestarealternative addresses. Theprimary
addressisdefinedduringassociation establishment. Theinteresting pointisthatthepri­
maryaddressofanendisdetermined bytheotherend.Inotherwords,asourcedefines
theprimaryaddressforadestination.
Multistream Delivery Oneinteresting featureofSCTPisthedistinction between
datatransferanddatadelivery.SCTPusesTSNnumbers tohandledatatransfer,move­
mentofdatachunksbetweenthesourceanddestination. Thedeliveryofthedatachunks
iscontrolled bySIsandSSNs.SCTPcansupportmultiplestreams,whichmeansthat
thesenderprocesscandefinedifferent streamsandamessage canbelongtooneof
thesestreams.Eachstreamisassigned astreamidentifier (SI)whichuniquely defines
thatstream.
Fragmentation Another issueindatatransferisfragmentation. Although SCTP
sharesthistermwithIP,fragmentation inIPandinSCTPbelongstodifferent levels:
theformeratthenetworklayer,thelatteratthetransport layer.
SCTPpreserves theboundaries ofthemessage fromprocesstoprocesswhen
creatingaDATAchunkfromamessage ifthesizeofthemessage (whenencapsu­
latedinanIPdatagram) doesnotexceedtheMTUofthepath.ThesizeofanIP
datagram carryingamessagecanbedetermined byaddingthesizeofthemessage, in
bytes,tothefouroverheads: datachunkheader,necessary SACKchunks,SCTPgen­
eralheader,andIPheader.IfthetotalsizeexceedstheMTU,themessageneedstobe
fragmented.748 CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCp,ANDSCTP
Association Termination
InSCTP,likeTCP,eitherofthetwopartiesinvolved inexchanging data(clientor
server)canclosetheconnection. However, unlikeTCP,SCTPdoesnotallowahalf­
closesituation.Ifoneendclosestheassociation, theotherendmuststopsendingnew
data.Ifanydataareleftoverinthequeueoftherecipient ofthetermination request,
theyaresentandtheassociation isclosed.Association termination usesthreepackets,
asshowninFigure23.35.Note that although thefigureshowsthecaseinwhichtermi­
nationisinitiatedbytheclient,itcanalsobeinitiatedbytheserver.Notethattherecan
beseveralscenarios ofassociation termination. Weleavethisdiscussion tothereferences
mentioned attheendofthechapter.
Figure23.35Association termination
Client
r--
SHUTDOWN
Active
close r------i~~_c;;__,..""
SHUTDOWN
COMPLETE
Time
FlowControlSHUTDOWN ACKServer-=
c::;:::u)
~-
Passive
close
Time
FlowcontrolinSCTPissimilartothatinTCP.InTCP,weneedtodealwithonlyone
unitofdata,thebyte.InSCTP,weneedtohandletwounitsofdata,thebyteandthe
chunk.Thevaluesofrwndandcwndareexpressed inbytes;thevaluesofTSNand
acknowledgments areexpressed inchunks.Toshowtheconcept, wemakesomeunre­
alisticassumptions. Weassumethatthereisnevercongestion inthenetwork andthat
thenetworkiserror-free. Inotherwords,weassumethatcwndisinfiniteandnopacketis
lostordelayedorarrivesoutoforder.Wealsoassumethatdatatransferisunidirectional.
Wecorrectourunrealistic assumptions inlatersections. CurrentSCTPimplementa­
tionsstilluseabyte-oriented windowforflowcontrol.We,however, showthebufferin
termsofchunkstomaketheconcepteasiertounderstand.
Receiver Site
Thereceiverhasonebuffer(queue)andthreevariables. Thequeueholdsthereceived
datachunksthathavenotyetbeenreadbytheprocess.Thefirstvariableholdsthelast
TSNreceived, cumTSN. Thesecondvariableholdstheavailable buffersize,winsize.SECTION 23.4SCTP 749
Thethirdvariableholdsthelastaccumulative acknowledgment, lastACK. Figure23.36
showsthequeueandvariables atthereceiversite.
Figure23.36Flowcontrol,receiversite
winSize
Received ---------l.~Toprocess
26
BBBB
Receiving queue
winSize
lastACK
1.Whenthesitereceivesadatachunk,itstoresitattheendofthebuffer(queue)and
subtracts thesizeofthechunkfromwinSize. TheTSNnumberofthechunkis
storedinthecumTSN variable.
2.Whentheprocessreadsachunk,itremoves itfromthequeueandaddsthesizeof
theremoved chunktowinSize(recycling).
3.WhenthereceiverdecidestosendaSACK,itchecksthevalueoflastAck;ifitis
lessthancumTSN, itsendsaSACKwithacumulative TSNnumberequaltothe
cumTSN. Italsoincludes thevalueofwinSizeastheadvertised windowsize.
SenderSite
Thesenderhasonebuffer(queue)andthreevariables: curTSN, rwnd,andinTransit,as
showninFigure23.37.Weassumeeachchunkis100byteslong.
Figure23.37Flowcontrol,sendersite
curTSN
rwnd
inTransitOutstanding chunks
BBB8BBBBB8BBBI~Tosend
Sendingqueue
'"'~::?~:/37,''
~::1dPO"
:t~1W'FromprocessL:
Thebufferholdsthechunksproduced bytheprocessthateitherhavebeensentorare
readytobesent.Thefirstvariable, curTSN,referstothenextchunktobesent.Allchunks
inthequeuewithaTSNlessthanthisvaluehavebeensent,butnotacknowledged; they
areoutstanding. Thesecondvariable, rwnd,holdsthelastvalueadvertised bythereceiver
(inbytes).Thethirdvariable, inTransit, holdsthenumberofbytesintransit,bytessent
butnotyetacknowledged. Thefollowing istheprocedure usedbythesender.750CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCp,ANDSCTP
1.AchunkpointedtobycurTSNcanbesentifthesizeofthedataislessthan or
equaltothequantityrwnd-inTransit. Aftersendingthechunk,thevalueofcurTSN
isincremented by1andnowpointstothenextchunktobesent.Thevalueof
inTransit isincremented bythesizeofthedatainthetransmitted chunk.
2.WhenaSACKisreceived, thechunkswithaTSNlessthanorequaltothecumula­
tiveTSNintheSACKareremoved fromthequeueanddiscarded. Thesenderdoes
nothavetoworryaboutthemanymore.ThevalueofinTransit isreducedbythe
totalsizeofthediscarded chunks.Thevalueofrwndisupdatedwiththevalueof
theadvertised windowintheSACK.
AScenario
LetusgiveasimplescenarioasshowninFigure23.38.Atthestartthevalueofrwndat
thesendersiteandthevalueofwinSizeatthereceiversiteare2000(advertised during
association establishment). Originally, therearefourmessages inthesenderqueue.The
sendersendsonedatachunkandaddsthenumberofbytes(1000)totheinTransit vari­
able.Afterawhile,thesenderchecksthedifference between therwndandinTransit,
whichis1000bytes,soitcansendanotherdatachunk.Nowthedifference betweenthe
twovariables is0andnomoredatachunkscanbesent.Afterawhile,aSACKarrives
thatacknowledges datachunks1and2.Thetwochunksareremoved fromthequeue.
ThevalueofinTransitisnowO.TheSACK,however, advertised areceiverwindowof
value0,whichmakesthesender.update rwndtoO.Nowthesenderisblocked; itcannot
sendanydatachunks(withoneexception explained later).
Figure23.38Flowcontrolscenario
Sender
r
DATA
TSN:1Receiver
r
cumTSN~winSize 2000~
lastACK ~
1000bytesr-"--1
DATAcumTSN~winSize 1000
lastACK
I~curTSN
@]~~0 0~wnd_=== 0znTranslt
:esswrites
iand6TSN:2 1000bytesr-.-.---I
SACK
ACK:2 rwnd:°
SACK
l---....~L::A:..::.C::::K~: 2::....-__rw_n_d_:2_0_0_0........cumTSN~winSize 0
[astACK
cumTSN~ ~winSize 2000
[astACK 2
Process reads
1and2
Time TimeSECTION 23.4SCTP 751
Atthereceiversite,thequeueisemptyatthebeginning. Afterthefirstdatachunk
isreceived, thereisonemessage inthequeueandthevalueofcumTSN is1.Thevalue
ofwinSizeisreducedto1000becausethefirstmessageoccupies 1000bytes.Afterthe
seconddatachunkisreceived, thevalueofwindowsizeisaandcumTSNis2.Now,as
wewillsee,thereceiverisrequiredtosendaSACKwithcumulative TSNof2.After
thefirstSACKwassent,theprocessreadsthetwomessages, whichmeansthatthereis
nowroominthequeue;thereceiveradvertises thesituation withaSACKtoallowthe
sendertosendmoredatachunks.Theremaining eventsarenotshowninthefigure.
ErrorControl
SCTP,likeTCP,isareliabletransport layerprotocol.ItusesaSACKchunktoreport
thestateofthereceiverbuffertothe sender. Eachimplementation usesadifferent setof
entitiesandtimersforthereceiverandsendersites.Weuseaverysimpledesigntoconvey
theconcepttothereader.
Receiver Site
Inourdesign,thereceiverstoresallchunksthathavearrivedinitsqueueincluding the
out-of-order ones.However, itleavesspacesforanymissingchunks.Itdiscardsdupli­
catemessages, butkeepstrackofthemforreportstothesender.Figure23.39showsa
typicaldesignforthereceiversiteandthestateofthereceiving queueataparticular
pointintime.
Figure23.39Errorcontrol,receiversite
Duplicate···
OutOfOrdercumTSN
winSize
lastACK
Thelastacknowledgment sentwasfordatachunk20.Theavailable windowsizeis
1000bytes.Chunks21to23havebeenreceivedinorder.Thefirstout-of-order block
containschunks26to28.Thesecondout-of-order blockcontainschunks31to34.A
variableholdsthevalueofcumTSN. Anarrayofvariables keepstrackofthebeginning
andtheendofeachblockthatisoutoforder.Anarrayofvariables holdstheduplicate
chunksreceived. Notethatthereisnoneedforstoringduplicate chunksinthequeue;
theywillbediscarded. ThefigurealsoshowstheSACKchunkthatwillbesentto752CHAPTER 23PROCESS-TO-PROCESS DELNERY: UDp,TCp,ANDSCTP
reportthestateofthereceivertothesender.TheTSNnumbersforout-of-order chunks
arerelative(offsets)tothecumulative TSN.
SenderSite
Atthesendersite,ourdesigndemands twobuffers(queues): asendingqueueanda
retransmission queue.Wealsousethethreevariables rwnd,inTransit,andcurTSNas
described intheprevioussection.Figure23.40showsatypicaldesign.
Figure23.40Errorcontrol,sendersite
Fromprocess
L
BBBBBBOutstanding chunks
...BBB~Tosend
inTransitcurTSN
rwnd
Retransmission
queueAddwhentimer ~'~I
expiresorthree-----l ..~:4'~,1"~Tosend
SACKsarereceived. .,...-----====Sendingqueue
Thesendingqueueholdschunks23to40.Thechunks23to36havealreadybeen
sent,butnotacknowledged; theyareoutstanding chunks.ThecurTSNpointstothe
nextchunktobesent(37).Weassumethateachchunkis100bytes,whichmeansthat
1400bytesofdata(chunks23to36)isintransit.Thesenderatthismomenthasa
retransmission queue.Whenapacketissent,aretransmission timerstartsforthat
packet(alldatachunksinthatpacket).Someimplementations useonesingletimerfor
theentireassociation, butwecontinuewithourtraditionofonetimerforeachpacketfor
simplification. Whentheretransmission timerforapacketexpires,orfourduplicate
SACKsarrivethatdeclareapacketasmissing(fastretransmission wasdiscussed in
Chapter12),thechunksinthatpacketaremovedtotheretransmission queuetobe
resent.Thesechunksareconsidered lost,ratherthanoutstanding. Thechunksinthe
retransmission queuehavepriority.Inotherwords,thenexttimethesendersendsa
chunk,itwouldbechunk21fromtheretransmission queue.
SendingDataChunks
Anendcansendadatapacketwhenever therearedatachunksinthesendingqueue
withaTSNgreaterthanorequaltocurTSNoriftherearedatachunksintheretransmis­
sionqueue.Theretransmission queuehaspriority.However, thetotalsizeofthedata
chunkorchunksincludedinthepacketmustnotexceedrwnd-inTransit,andthetotal
sizeoftheframemustnotexceedtheMTUsizeaswediscussed inprevioussections.SECTION 23.5RECOMMENDED READING 753
Retransmission Tocontrolalostordiscarded chunk,SCTP,likeTCP,employs two
strategies: usingretransmission timersandreceiving fourSACKswiththesamemissing
chunks.
Generating SACKChunks
Anotherissueinerrorcontrolisthegeneration ofSACKchunks.Therulesforgenerating
SCTPSACKchunksaresimilartotherulesusedforacknowledgment withtheTCP
ACKflag.
Congestion Control
SCTP,likeTCP,isatransport layerprotocolwithpacketssubjecttocongestion inthenet­
work.TheSCTPdesigners haveusedthesamestrategies wewilldescribeforcongestion
controlinChapter24forTCP.SCTPhasslowstart(exponential increase), congestion
avoidance (additive increase), andcongestion detection (multiplicative decrease) phases.
LikeTCP,SCTPalsousesfastretransmission andfastrecovery.
23.5RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
booksandsites.Theitemsinbrackets[...]refertothereference listattheendofthetext.
Books
UDPisdiscussed inChapter 11of[For06],Chapter 11of[Ste94],andChapter12of
[ComOO]. TCPisdiscussed inChapter12of[For06],Chapters 17to24of[Ste94],and
Chapter 13of[ComOO]. SCTPisdiscussed inChapter13of[For06]and[SX02].Both
UDPandTCParediscussed inChapter6of[Tan03].
Sites
owww.ietf.org/rfc.html Information aboutRFCs
RFCs
Adiscussion ofUDPcanbefound in RFC768.
Adiscussion ofTCPcanbefoundinthefollowing RFCs:
675,700,721,761,793,879,896,1078,1106,1110,1144, 1145,1146,1263,1323,1337,
1379,1644,1693,1901,1905,2001,2018,2488,2580
Adiscussion ofSCTPcanbefoundinthefollowing RFCs:.
2960,3257,3284,3285,3286,3309,3436,3554,3708,3758754CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCp,ANDSCTP
23.6KEYTERMS
acknowledgment number
association
association establishment
association termination
byte-oriented
chunk
client
client/server paradigm
connection abortion
connection-oriented service
connectionless service
connectionless, unreliable transport
protocol
cookie
COOKIE ACKchunk
COOKIE ECHOchunk
cumulative TSN
DATAchunk
datatransfer
denial-of-service attack
dynamic port
ephemeral portnumber
errorcontrol
fastretransmission
flowcontrol
four-way handshaking
fragmentation
full-duplex service
generalheader
half-close
inboundstream
INITACKchunkINITchunk
initialsequence number(ISN)
message-oriented
multihoming service
multistream service
portnumber
primaryaddress
process-to-process delivery
pseudoheader
queue
registered port
retransmission time-out (RTO)
retransmission timer
round-trip time(RTT)
SACKchunk
segment
sequence number
server
simultaneous close
simultaneous open
socketaddress
streamidentifier (SI)
streamsequence number(SSN)
SYNfloodingattack
three-way handshaking
Transmission ControlProtocol (TCP)
transmission sequence number(TSN)
transport layer
userdatagram
UserDatagram Protocol (UDP)
verification tag
well-known portnumber
23.7SUMMARY
oIntheclient/server paradigm, anapplication program onthelocalhost,calledthe
client,needsservicesfromanapplication program ontheremotehost,'calleda
server.SECTION 23.7SUMMARY 755
oEach application program hasaportnumberthatdistinguishes itfromotherpro­
gramsrunningatthesametimeonthesamemachine.
oTheclientprogram isassigned arandomportnumbercalledanephemeral port
number; theserverprogram isassigned auniversal portnumbercalledawell­
knownportnumber.
oTheICANNhasspecified rangesforthedifferent typesofportnumbers.
oThecombination oftheIPaddressandtheportnumber,calledthesocketaddress,
definesaprocessand ahost.
oUDPisaconnectionless, unreliable transport layerprotocol withnoembedded
floworerrorcontrolmechanism exceptthechecksum forerrordetection.
oTheUDPpacketiscalledauserdatagram. Auserdatagram isencapsulated inthe
datafieldofanIPdatagram.
oTransmission ControlProtocol (TCP)isoneofthetransport layerprotocols inthe
TCP/IPprotocolsuite.
oTCPprovides process-to-process, full-duplex, andconnection-oriented service.
oTheunitofdatatransferbetweentwodevicesusingTCPsoftwareiscalledasegment;
ithas20to60bytesofheader,followedbydatafromtheapplication program.
oATCPconnection normally consistsofthreephases:connection establishment,
datatransfer,andconnection termination.
oConnection establishment requiresthree-way handshaking; connection termination
requiresthree-orfour-way handshaking.
oTCPusesflowcontrol,implemented asaslidingwindowmechanism, toavoid
overwhelming areceiverwithdata.
oTheTCPwindowsizeisdetermined bythereceiver-advertised windowsize(rwnd)
orthecongestion windowsize(cwnd),whichever issmaller.Thewindowcanbe
openedorclosedbythereceiver, butshouldnotbeshrunk.
oThebytesofdatabeingtransferred ineachconnection arenumbered byTCP.The
numbering startswitharandomly generated number.
oTCPuseserrorcontroltoprovideareliableservice.Errorcontrolishandledbythe
checksum, acknowledgment, andtime-out. Corrupted andlostsegments areretrans­
mitted,andduplicate segments arediscarded. Datamayarriveoutoforderandare
temporarily storedbythereceiving TCP,butTCPguarantees thatnoout-of-order
segmentisdelivered totheprocess.
oInmodemimplementations, aretransmission occursiftheretransmission timer
expiresorthreeduplicate ACKsegments havearrived.
oSCTPisamessage-oriented, reliableprotocol thatcombines thegoodfeaturesof
UDPandTCP.
oSCTPprovides additional services notprovided byUDPorTep,suchasmultiple-
streamandmultihoming services.
oSCTPisaconnection-oriented protocol.AnSCTPconnection iscalledanassociation.
oSCTPusesthetermpackettodefineatransportation unit.
oInSCTP,controlinformation anddatainformation arecarriedinseparatechunks.756CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCP,ANDSCTP
oAnSCTPpacketcancontaincontrolchunksanddatachunkswithcontrolchunks
comingbeforedatachunks.
oInSCTP,eachdatachunkisnumbered usingatransmission sequence number(TSN).
oTodistinguish betweendifferent streams,SCTPusesthesequence identifier (SI).
oTodistinguish betweendifferent datachunksbelonging tothesamestream,SCTP
usesthestreamsequence number(SSN).
oDatachunksareidentified bythreeidentifiers: TSN,SI,andSSN.TSNisacumula­
tivenumberrecognized bythewholeassociation; SSNstartsfrom0ineachstream.
oSCTPacknowledgment numbersareusedonlytoacknowledge datachunks;control
chunksareacknowledged, ifneeded,byanothercontrolchunk.
oAnSCTPassociation isnormally established usingfourpackets(four-way hand­
shaking). Anassociation isnormally terminated usingthreepackets(three-way
handshaking) .
oAnSCTPassociation usesacookietopreventblindfloodingattacksandaverifica­
tiontagtoavoidinsertion attacks.
oSCTPprovides flowcontrol,errorcontrol,andcongestion control.
oTheSCTPacknowledgment SACKreportsthecumulative TSN,theTSNofthe
lastdatachunkreceivedinorder,andselective TSNsthathavebeenreceived.
23.8PRACTICE SET
ReviewQuestions
1.Incaseswherereliability isnotofprimaryimportance, UDPwouldmakeagood
transport protocol. Giveexamples ofspecificcases.
2.ArebothUDPandIPunreliable tothesamedegree?Whyorwhynot?
3.Doportaddresses needtobeunique?Whyorwhynot?Whyareportaddresses
shorterthanIPaddresses?
4.Whatisthedictionary definition ofthewordephemeral? Howdoesitapplytothe
conceptoftheephemeral portnumber?
5.Whatistheminimum sizeofaUDPdatagram?
6.Whatisthemaximum sizeofaUDPdatagram?
7.Whatistheminimum sizeoftheprocessdatathatcanbeencapsulated inaUDP
datagram?
8.Whatisthemaximum sizeoftheprocessdatathatcanbeencapsulated inaUDP
datagram?
9.Compare theTCPheaderandtheUDPheader.ListthefieldsintheTCPheader
thataremissingfromUDPheader.Givethereasonfortheirabsence.
10.UDPisamessage-oriented protocol. TCPisabyte-oriented protocol. Ifanappli­
cationneedstoprotecttheboundaries ofitsmessage, whichprotocol shouldbe
used,UDPorTCP?SECTION 23.8PRACTICE SET 757
11.WhatcanyousayabouttheTCPsegmentinwhichthevalueofthecontrolfieldis
oneofthefollowing?
a.000000
b.000001
c.010001
12.Whatisthemaximum sizeoftheTCPheader?Whatistheminimum sizeofthe
TCPheader?
Exercises
13.ShowtheentriesfortheheaderofaUDPuserdatagram thatcarriesamessagefrom
aTFTPclienttoaTFTPserver.Fillthechecksum fieldwithOs.Chooseanappro­
priateephemeral portnumberandthecorrectwell-known portnumber.Thelength
ofdatais40bytes.ShowtheUDPpacket,usingtheformatinFigure23.9.
14.AnSNMPclientresidingonahostwithIPaddress122.45.12.7 sendsamessage to
anSNMPserverresidingonahostwithIPaddress200.112.45.90. Whatis thepair
ofsocketsusedinthiscommunication?
15.ATFTPserverresidingonahostwithIPaddress130.45.12.7 sendsamessage toa
TFTPclientresiding onahostwithIPaddress14.90.90.33. Whatisthepairof
socketsusedinthiscommunication?
16.Aclienthasapacketof68,000bytes.Showhowthispacketcanbetransferred by
usingonlyoneUDPuserdatagram.
17.AclientusesUDPtosenddatatoaserver.Thedataare16bytes.Calculate theeffi­
ciencyofthistransmission attheUDPlevel(ratioofusefulbytestototalbytes).
18.RedoExercise 17,calculating theefficiency oftransmission attheIPleveLAssume
nooptionsfortheIPheader.
19.RedoExercise 18,calculating theefficiency oftransmission atthedatalinklayer.
AssumenooptionsfortheIPheaderanduseEthernet atthedatalinklayer.
20.Thefollowing isadumpofaUDPheaderinhexadecimal format.
0632000DOO lCE217
a.Whatisthesourceportnumber?
b.Whatisthedestination portnumber?
c.Whatisthetotallengthoftheuserdatagram?
d.Whatisthelengthofthedata?
e.Isthepacketdirectedfromaclienttoaserverorviceversa?
f.Whatistheclientprocess?
21.AnIPdatagram iscarryingaTCPsegmentdestinedforaddress 130.14.16.17/16. The
destination portaddressiscorrupted, anditarrivesatdestination 130.14.16.19/16.
Howdoesthereceiving TCPreacttothiserror?
22.InTCP,ifthevalueofHLENis0111,howmanybytesofoptionareincluded in
thesegment?758CHAPTER 23PROCESS-TO-PROCESS DELNERY: UDp,TCp,ANDSCTP
23.ShowtheentriesfortheheaderofaTCPsegment thatcarriesamessage froman
FTPclienttoanFTPserver.Fillthechecksum fieldwithOs.Chooseanappropriate
ephemeral portnumberandthecorrectwell-known portnumber.Thelengthofthe
datais40bytes.
24.Thefollowing isadumpofaTCPheaderinhexadecimal format.
05320017 000ססoo1 00000000 5OO207FF 00000000
a.Whatisthesourceportnumber?
b.Whatisthedestination portnumber?
c.Whatthesequence number?
d.Whatistheacknowledgment number?
e.Whatisthelengthoftheheader?
f.Whatisthetypeofthesegment?
g.Whatisthewindowsize?
25.Tomaketheinitialsequence numberarandomnumber,mostsystemsstartthecounter
at1duringbootstrap andincrement thecounterby64,000every0.5s.Howlong
doesittakeforthecountertowraparound?
26.Inaconnection, thevalueofcwndis3000andthevalueofrwndis5000.Thehosthas
sent2000byteswhichhasnotbeenacknowledged. Howmanymorebytescanbesent?
27.TCPopensaconnection usinganinitialsequence number(ISN)of14,534.The
otherpartyopenstheconnection withanISNof21,732.ShowthethreeTCPseg­
mentsduringtheconnection establishment.
28.AclientusesTCPtosenddatatoaserver.Thedataare16bytes.Calculate theeffi­
ciencyofthistransmission attheTCPlevel(ratioofusefulbytestototalbytes).
Calculate theefficiency oftransmission attheIPlevel.Assumenooptionsforthe
IPheader.Calculate theefficiency oftransmission atthedatalinklayer.Assumeno
optionsfortheIFheaderanduseEthernet atthedatalinklayer.
29.TCPissendingdataat1Mbyte/s.Ifthesequence numberstartswith7000,how
longdoesittakebeforethesequence numbergoesbacktozero?
30.ATCPconnection isusingawindow sizeof10,000bytes,andtheprevious
acknowledgment numberwas22,001.Itreceivesasegmentwithacknowledgment
number24,001andwindowsizeadvertisement of12,000.Drawadiagramtoshow
thesituation ofthewindowbeforeandafter.
31.Awindow holds bytes2001to5000.Thenextbytetobesentis3001.Drawafigure
toshowthesituation ofthewindowafterthefollowing twoevents.
a.AnACKsegment withtheacknowledgment number2500andwindow size
advertisement 4000isreceived.
b.Asegmentcarrying 1000bytesissent.
32.InSCTP,thevalueofthecumulative TSNinaSACKis23.Thevalueoftheprevious
cumulative TSNintheSACKwas29.Whatistheproblem?
33.InSCTP,thestateofareceiverisasfollows:
a.Thereceiving queuehaschunks1to8,11to14,and16to20.
b.Thereare1800bytesofspaceinthequeue.SECTION 23.8PRACTICE SET759
c.ThevalueoflastAckis4.
d.Noduplicate chunkhasbeenreceived.
e.ThevalueofcumTSN is5.
Showthecontentsofthereceiving queueandthevariables.
34.InSCTP,thestateofasenderisasfollows:
a.Thesendingqueuehaschunks18to23.
b.ThevalueofcumTSN is20.
c.Thevalueofthewindowsizeis2000bytes.
d.ThevalueofinTransit is200.
Ifeachdatachunkcontains 100bytesofdata,howmanyDATAchunkscanbesent
now?WhatisthenextDATAchunktobesent?
Research Activities
35.Findmoreinformation aboutICANN.Whatwasitcalledbeforeitsnamewaschanged?
36.TCPusesatransition statediagram tohandlesendingandreceiving segments.
Findoutaboutthisdiagramandhowithandlesflowandcontrol.
37.SCTPusesatransition statediagramtohandlesendingandreceiving segments.
Findoutaboutthisdiagramandhowithandlesflowandcontrol.
38.Whatisthehalf-open caseinTCP?
39.Whatisthehalf-duplex closecaseinTCP?
40.Thetcpdump command inUNIXorLINUXcanbeusedtoprinttheheaders
ofpacketsofanetworkinterface. Usetcpdumptoseethesegments sentandreceived.
41.InSCTP,findoutwhathappensifaSACKchunkisdelayedorlost.
42.Findthenameandfunctions oftimersusedinTCP.
43.Findthenameandfunctions oftimersusedinSCTP.
44.FindoutmoreaboutECNinSCTP.Findtheformatofthesetwochunks.
45.Someapplication programs, suchasFTP,needmorethanoneconnection when
usingTCP.Findhowthemultistream serviceofSCTPcanhelptheseapplications
establish onlyoneassociation withseveralstreams.CHAPTER 24
Congestion Controland
QualityofService
Congestion controlandqualityofservicearetwoissuessocloselyboundtogetherthat
improving onemeansimproving theotherandignoring oneusually means ignoring the
other.Mosttechniques topreventoreliminate congestion alsoimprove thequalityof
serviceinanetwork.
Wehavepostponed thediscussion oftheseissuesuntilnowbecausetheseareissues
relatednottoonelayer,buttothree:thedatalinklayer,thenetwork layer,andthe
transport layer.Wewaiteduntilnowsothatwecandiscusstheseissuesonceinsteadof
repeating thesubjectthreetimes.Throughout thechapter,wegiveexamples ofconges­
tioncontrolandqualityofserviceatdifferent layers.
24.1DATATRAFFIC
Themainfocusofcongestion controlandqualityofserviceisdatatraffic.Incongestion
controlwetrytoavoidtrafficcongestion. Inqualityofservice,wetrytocreatean
appropriate environment forthetraffic.So,beforetalkingaboutcongestion controland
qualityofservice,wediscussthedatatrafficitself.
TrafficDescriptor
Trafficdescriptors arequalitative valuesthatrepresent adataflow.Figure24.1showsa
trafficflowwithsomeofthesevalues.
Figure24.1Trafficdescriptors
DatarateMaximum
burstsize~
~-"'CC - - - - - - - Peakdatarate
- - - - - Average datarate
Seconds
761762CHAPTER 24CONGESTION CONTROL ANDQUAliTY OFSERVICE
AverageDataRate
Theaveragedatarateisthenumberofbitssentduringaperiodoftime,dividedbythe
numberofsecondsinthatperiod.Weusethefollowing equation:
Averagedatarate=amountofdata
time
Theaveragedatarateisaveryusefulcharacteristic oftrafficbecauseitindicates the
averagebandwidth neededbythetraffic.
PeakDataRate
Thepeakdataratedefinesthemaximum datarateofthetraffic.InFigure24.1itisthe
maximum yaxisvalue.Thepeakdatarateisaveryimportant measurement because
itindicates thepeakbandwidth thatthenetworkneedsfortraffictopassthroughwithout
changing itsdataflow.
Maximum BurstSize
Although thepeakdatarateisacriticalvalueforthenetwork, itcanusuallybeignored
ifthedurationofthepeakvalueisveryshort.Forexample, ifdataareflowingsteadily
attherateof1Mbpswithasuddenpeakdatarateof2Mbpsforjust1ms,thenetwork
probably canhandlethesituation. However, ifthepeakdataratelasts60ms,theremay
beaproblemforthenetwork. Themaximum burstsizenormally referstothemaximum
lengthoftimethetrafficisgenerated atthepeakrate.
Effective Bandwidth
Theeffective bandwidth isthebandwidth thatthenetwork needstoallocateforthe
flowoftraffic.Theeffective bandwidth isafunctionofthreevalues:averagedatarate,
peakdatarate,andmaximum burstsize.Thecalculation ofthisvalueisverycomplex.
TrafficProfiles
Forourpurposes, adataflowcanhaveoneofthefollowing trafficprofiles:constantbit
rate,variablebitrate,orburstyasshowninFigure24.2.
Constant BitRate
Aconstant-bit-rate (CBR),orafixed-rate, trafficmodelhasadataratethatdoesnot
change.Inthistypeofflow,theaveragedataratcandthcpeakdataratearethesame.
Themaximum burstsizeisnotapplicable. Thistypeoftrafficisveryeasyforanetwork
tohandlesinceitispredictable. Thenetworkknowsinadvancehowmuchbandwidth to
allocateforthistypeofflow.
VariableBitRate
Inthevariable-bit-rate (VBR)category, therateofthedataflowchangesintime,with
thechangessmoothinsteadofsuddenandsharp.Inthistypeofflow,theaveragedataSECTION 24.2CONGESTION 763
Figure24.2Threetrafficprofiles
Datarate
t--L-
Time
a.Constant bitrate
DatarateDatarate
L:_~~~.
Time
b.Variable bitrate
Time
c.Bursty
rateandthepeakdataratearedifferent. Themaximum burstsizeisusuallyasmall
value.Thistypeoftrafficismoredifficulttohandlethanconstant-bit-rate traffic,butit
normally doesnotneedtobereshaped, aswewillseelater.
Bursty
Intheburstydatacategory, thedataratechanges suddenly inaveryshorttime.It
mayjumpfromzero,forexample, to1Mbpsinafewmicroseconds andviceversa.It
mayalsoremainatthisvalueforawhile.Theaveragebitrateandthepeakbitrateare
verydifferent valuesinthistypeofflow.Themaximum burstsizeissignificant. This
isthemostdifficulttypeoftrafficforanetworktohandlebecausetheprofileisvery
unpredictable. Tohandlethistypeoftraffic,thenetworknormally needstoreshapeit,
usingreshaping techniques, aswewillseeshortly.Burstytrafficisoneofthemain
causesofcongestion inanetwork.
24.2CONGESTION
Animportant issueinapacket-switched networkiscongestion. Congestion inanetwork
mayoccuriftheloadonthenetwork-the numberofpacketssenttothenetwork-is
greaterthanthecapacityofthenetwork-the numberofpacketsanetworkcanhandle.
Congestion controlreferstothemechanisms andtechniques tocontrolthecongestion
andkeeptheloadbelowthecapacity.
Wemayaskwhythereiscongestion onanetwork. Congestion happens inany
systemthatinvolves waiting.Forexample, congestion happens onafreewaybecause
anyabnonnality intheflow,suchasanaccidentduringrushhour,createsblockage.Input
Output764 CHAPTER 24CONGESTION CONTROL ANDQUALITY OFSERVICE
Congestion inanetworkorinternetwork occursbecauseroutersandswitches have
queues-buffers thatholdthepacketsbeforeandafterprocessing. Arouter,forexample,
hasaninputqueueandanoutputqueueforeachinterface. Whenapacketarrivesatthe
incoming interface, itundergoes threestepsbeforedeparting, asshowninFigure24.3.
Figure24.3Queuesinarouter
1
..~~lIllll~lnputQueuesI 't:: c'\,~,'~~','
~~IIIIn~ Output
Input~~jIp~~ ~J- Queu;~"'" ',
Output~t1llll1'1+~
.,Q~eue~ ,.,~~.....T
L_
1.Thepacketisputattheendoftheinputqueuewhilewaitingtobechecked.
2.Theprocessing moduleoftherouterremoves thepacketfromtheinputqueueonce
itreachesthefrontofthequeueandusesitsroutingtableandthedestination
addresstofindtheroute.
3.Thepacketisputintheappropriate outputqueueandwaitsitstumtobesent.
Weneedtobeawareoftwoissues.First,iftherateofpacketarrivalishigherthanthe
packetprocessing rate,theinputqueuesbecomelongerandlonger.Second,ifthepacket
departure rateislessthanthepacketprocessing rate,theoutputqueuesbecomelonger
andlonger.
Network Performance
Congestion controlinvolvestwofactorsthatmeasuretheperformance ofanetwork: delay
andthroughput. Figure24.4showsthesetwoperformance measures asfunctionofload.
Figure24.4Packetdelayandthroughput asfunctions ofload
Delay Throughput
CapacityNocongestion areaCongestion area
Capacity LoadNocongestion
areaCongestion area
Load
a.Delayasafunction ofload b.Throughput asafunction ofloadSECTION 24.3CONGESTION CONTROL 765
DelayVersusLoad
Notethatwhentheloadismuchlessthanthecapacityofthenetwork, thedelayisata
minimum. Thisminimum delayiscomposed ofpropagation delayandprocessing delay,
bothofwhicharenegligible. However, whentheloadreachesthenetworkcapacity, the
delayincreases sharplybecausewe nowneedtoaddthewaitingtimeinthequeues(forall
routersinthepath)tothetotaldelay.Notethatthedelaybecomes infinitewhentheloadis
greaterthanthecapacity.Ifthisisnotobvious, consider thesizeofthequeueswhen
almostnopacketreachesthedestination, orreachesthedestination withinfinitedelay;the
queuesbecomelongerandlonger.Delayhasanegative effectontheloadandconse­
quentlythecongestion. Whenapacketisdelayed,thesource,notreceiving theacknowl­
edgment, retransmits thepacket,whichmakesthedelay,andthecongestion, worse.
Throughput VersusLoad
Wedefinedthroughput inChapter3asthenumberofbitspassingthroughapointina
second.Wecanextendthatdefinition frombitstopacketsandfromapointtoanet­
work.Wecandefinethroughput inanetwork asthenumberofpacketspassing
throughthenetworkinaunitoftime.Noticethatwhentheloadisbelowthecapacity
ofthenetwork, thethroughput increases proportionally withtheload.Weexpectthe
throughput toremainconstant aftertheloadreachesthecapacity, butinsteadthe
throughput declines sharply.Thereasonisthediscarding ofpacketsbytherouters.
Whentheloadexceedsthecapacity, thequeuesbecomefullandtheroutershavetodis­
cardsomepackets.Discarding packet;'does notreducethenumberofpacketsinthe
networkbecausethesourcesretransmit thepackets,usingtime-out mechanisms, when
thepacketsdonotreachthedestinations.
24.3CONGESTION CONTROL
Congestion controlreferstotechniques andmechanisms thatcaneitherpreventconges­
tion,beforeithappens, orremovecongestion, afterithashappened. Ingeneral,wecan
dividecongestion controlmechanisms intotwobroadcategories: open-loop congestion
control(prevention) andclosed-loop congestion control(removal) asshowninFigure24.5.
Figure24.5Congestion controlcategories
Retransmission policy
Window policy
Acknowledgment policy
Discarding policy
Admission policyBackpressure
Chokepacket
Implicitsignaling
Explicitsignaling766 CHAPTER 24CONGESTION CONTROL ANDQUALITY OFSERVICE
Open-Loop Congestion Control
Inopen-loop congestion control, policiesareappliedtopreventcongestion beforeit
happens. Inthesemechanisms, congestion controlishandledbyeitherthesourceorthe
destination. Wegiveabrieflistofpoliciesthatcanpreventcongestion.
Retransmission Policy
Retransmission issometimes unavoidable. Ifthesenderfeelsthatasentpacketislost
orcorrupted, the packet needstoberetransmitted. Retransmission ingeneralmay
increasecongestion inthenetwork. However, agoodretransmission policycanprevent
congestion. Theretransmission policyandtheretransmission timersmustbedesigned
tooptimize efficiency andatthesametimepreventcongestion. Forexample, the
retransmission policyusedbyTCP(explained later)isdesigned topreventoralleviate
congestion.
WindowPolicy
Thetypeofwindow atthesendermayalsoaffectcongestion. TheSelective Repeat
windowisbetterthantheGo-Back-N windowforcongestion control.IntheGo-Back-N
window, whenthetimerforapackettimesout,severalpacketsmayberesent,although
somemayhavearrivedsafeandsoundatthereceiver. Thisduplication maymakethe
congestion worse.TheSelective Repeatwindow, ontheotherhand,triestosendthe
specificpacketsthathavebeenlostorcorrupted.
Acknowledgment Policy
Theacknowledgment policyimposed bythereceivermayalsoaffectcongestion. Ifthe
receiverdoesnotacknowledge everypacketitreceives, itmayslowdownthesender
andhelppreventcongestion. Severalapproaches areusedinthiscase.Areceivermay
sendanacknowledgment onlyifithasapackettobesentoraspecialtimerexpires.A
receivermaydecidetoacknowledge onlyNpacketsatatime.Weneedtoknowthat
theacknowledgments arealsopartoftheloadinanetwork. Sendingfeweracknowl­
edgments meansimposing lessloadonthenetwork.
Discarding Policy
Agooddiscarding policybytheroutersmaypreventcongestion andatthesametime
maynotharmtheintegrity ofthetransmission. Forexample, inaudiotransmission, if
thepolicyistodiscardlesssensitive packetswhencongestion islikelytohappen,the
qualityofsoundisstillpreserved andcongestion isprevented oralleviated.
Admission Policy
Anadmission policy,whichisaquality-of-service mechanism, canalsopreventconges­
tioninvirtual-circuit networks. Switches inaflowfirstchecktheresource requirement
ofaflowbeforeadmitting ittothenetwork. Aroutercandenyestablishing avirtual­
circuitconnection ifthereiscongestion inthenetworkorifthereisapossibility offuture
congestion.SECTION 24.3CONGESTION CONTROL 767
Closed-Loop Congestion Control
Closed-loop congestion controlmechanisms trytoalleviate congestion afterithap­
pens.Severalmechanisms havebeenusedbydifferent protocols. Wedescribeafewof
themhere.
Backpressure
Thetechnique ofbackpressure referstoacongestion controlmechanism inwhicha
congested nodestopsreceiving datafromtheimmediate upstream nodeornodes.This
maycausetheupstream nodeornodestobecomecongested, andthey,inturn,reject
datafromtheirupstream nodesornodes.Andsoon.Backpressure isanode-to-node
congestion controlthatstartswithanodeandpropagates, intheopposite direction of
dataflow,tothesource.Thebackpressure technique canbeappliedonlytovirtualcircuit
networks, inwhicheachnodeknowsthe upstream nodefromwhichaflowofdatais
corning.Figure24.6 shows theideaofbackpressure.
Figure24.6Backpressure methodforalleviating congestion
SourceBackpressure......-
DataflowCongestion Destination
NodeIIIinthefigurehasmoreinputdatathanitcanhandle.Itdropssomepackets
initsinputbufferandinformsnodeIItoslowdown.NodeII,inturn,maybecongested
becauseitisslowingdowntheoutputflowofdata.IfnodeIIiscongested, itinforms
nodeItoslowdown,whichinturnmaycreatecongestion. Ifso,nodeIinformsthe
sourceofdatatoslowdown.This,intime,alleviates thecongestion. Notethatthepressure
onnodeIIIismovedbackward tothesourcetoremovethecongestion.
Noneofthevirtual-circuit networks westudiedinthisbookusebackpressure. It
was,however, implemented inthefirstvirtual-circuit network, X.25.Thetechnique
cannotbeimplemented inadatagram network because inthistypeofnetwork, anode
(router)doesnothavetheslightestknowledge oftheupstream router.
ChokePacket
Achokepacketisapacketsentbyanodetothesourcetoinformitofcongestion.
Notethedifference betweenthebackpressure andchokepacketmethods. Inbackpres­
sure,thewarning isfromonenodetoitsupstream node,although thewarningmay
eventually reachthesourcestation.Inthechokepacketmethod,thewarningisfromthe
router,whichhasencountered congestion, tothesourcestationdirectly. Theinter­
mediatenodesthroughwhichthepackethastraveledarenotwarned.Wehaveseen
anexample ofthistypeofcontrolinICMP.WhenarouterintheInternetisover­
wheh:ned withIPdatagrams, itmaydiscardsomeofthem;butitinformsthesource768 CHAPTER 24CONGESTION CONTROL ANDQUALITY OFSERVICE
host,usingasourcequenchICMPmessage. Thewarningmessagegoesdirectlytothe
sourcestation;theintermediate routers,anddoesnottakeanyaction.Figure24.7
showstheideaofachokepacket.
Figure24.7Chokepacket
Choke
packet
Source Congestion
DataflowDestination
ImplicitSignaling
Inimplicitsignaling, thereisnocommunication betweenthecongested nodeornodes
andthesource.Thesourceguessesthatthereisacongestion somewhere inthenetwork
fromothersymptoms. Forexample, whenasourcesendsseveralpacketsandthereis
noacknowledgment forawhile,oneassumption isthatthenetworkiscongested. The
delayinreceiving anacknowledgment isinterpreted ascongestion inthenetwork; the
sourceshouldslowdown.Wewillseethistypeofsignaling whenwediscussTCP
congestion controllaterinthechapter.
ExplicitSignaling
Thenodethatexperiences congestion canexplicitly sendasignaltothesourceordesti­
nation.Theexplicitsignaling method,however, isdifferent fromthechokepacket
method.Inthechokepacketmethod,aseparatepacketisusedforthispurpose; inthe
explicitsignaling method,thesignalisincluded inthepacketsthatcarrydata.Explicit
signaling, aswewillseeinFrameRelaycongestion control,canoccurineitherthe
forwardorthebackward direction.
Backward Signaling Abitcanbesetinapacketmovinginthedirection opposite
tothecongestion. Thisbitcanwarnthesourcethatthereiscongestion andthatitneeds
toslowdowntoavoidthediscarding ofpackets.
Forward Signaling Abitcanbesetinapacketmovinginthedirection ofthe
congestion. Thisbitcanwarnthedestination thatthereiscongestion. Thereceiverin
thiscasecanusepolicies,suchasslowingdowntheacknowledgments, toalleviatethei
congestion.
24.4TWOEXAMPLES
Tobetterunderstand theconceptofcongestion control,letusgivetwoexamples: onein
TCPandtheotherinFrameRelay.SECTION 24.41WOEXAMPLES 769
Congestion ControlinTCP
Wediscussed TCPinChapter23.WenowshowhowTCPusescongestion controlto
avoidcongestion oralleviate congestion inthenetwork.
Congestion Window
InChapter23,wetalkedaboutflowcontrolandtriedtodiscusssolutions whenthereceiver
isoverwhelmed withdata.Wesaidthatthesenderwindowsizeisdetermined bytheavail­
ablebufferspaceinthereceiver(rwnd).Inotherwords,weassumed thatitisonlythe
receiverthatcandictatetothesenderthesizeofthesender'swindow.Wetotallyignored
anotherentityhere-the network. Ifthenetworkcannotdeliverthedataasfastastheyare
createdbythesender,itmusttellthesendertoslowdown.Inotherwords,inadditionto
thereceiver,thenetworkisasecondentitythatdetermines thesizeofthesender'swindow.
Today,thesender'swindowsizeisdetermined notonlybythereceiverbutalsoby
congestion inthenetwork.
Thesenderhastwopiecesofinformation: thereceiver-advertised windowsizeand
thecongestion windowsize.Theactualsizeofthewindowistheminimum ofthesetwo.
Actualwindow size;;;;;;minimum (rwnd,cwnd)
Weshowshortlyhowthesizeofthecongestion window(cwnd)isdetermined.
Congestion Policy
TCP'sgeneralpolicyforhandling congestion isbasedonthreephases:slowstart,con­
gestionavoidance, andcongestion detection. Intheslow-start phase,thesenderstarts
withaveryslowrateoftransmission, butincreases theraterapidlytoreachathreshold.
Whenthethreshold isreached, thedatarateisreducedtoavoidcongestion. Finallyif
congestion isdetected, thesendergoesbacktotheslow-start orcongestion avoidance
phasebasedonhowthecongestion isdetected.
SlowStart:Exponential Increase Oneofthealgorithms usedinTCPcongestion
controliscalledslowstart.Thisalgorithm isbasedontheideathatthesizeofthecon­
gestionwindow(cwnd)startswithonemaximum segment size(MSS).TheMSSis
determined duringconnection establishment byusinganoptionofthesamename.The
sizeofthewindowincreases oneMSSeachtimeanacknowledgment isreceived. Asthe
nameimplies,thewindowstartsslowly,butgrowsexponentially. Toshowtheidea,letus
lookatFigure24.8.Notethatwehaveusedthreesimplifications tomakethediscussion
moreunderstandable. Wehaveusedsegmentnumbersinsteadofbytenumbers(asthough
eachsegment contains only1byte).Wehaveassumed thatrwndismuchhigherthan
cwnd,sothatthesenderwindowsizealwaysequalscwnd.Wehaveassumed thateach
segmentisacknowledged individually.
Thesenderstartswithcwnd=1MSS.Thismeansthatthesendercansendonly
onesegment. Afterreceiptoftheacknowledgment forsegment 1,thesizeofthe
congestion windowisincreased by1,whichmeansthatcwndisnow2.Nowtwo
moresegments canbesent.Wheneachacknowledgment isreceived, thesizeof
thewindow isincreased by1MSS.Whenallsevensegments areacknowledged,
cwnd=8.770 CHAPTER 24CONGESTION CONTROL ANDQUALITY OFSERVICE
Figure24.8Slowstart,exponential increase
Rnd:Roundoftransmission
cwnd=20= 1D
cwnd=21=2o::::J
cwnd=22=41.---0----.----'---'
LISender
TimeSegment 4
Segment5
Segment 6
Segment7Receiver
r--
Time
Ifwelookatthesizeofcwndintermsofrounds(acknowledgment ofthewhole
windowofsegments), wefindthattherateisexponential asshownbelow:
Start ..... cwnd=l
Afterround1..... cwnd=21=2
Afterround2..... cwnd=22=4
Afterround3..... cwnd=23=8
WeneedtomentionthatifthereisdelayedACKs,theincreaseinthesizeofthe
windowislessthanpowerof2.
Slowstartcannotcontinue indefinitely. Theremustbeathreshold tostopthis
phase.Thesenderkeepstrackofavariablenamedssthresh (slow-start threshold).
Whenthesizeofwindowinbytesreachesthisthreshold, slowstartstopsandthenext
phasestarts.Inmostimplementations thevalueofssthreshis65,535bytes.
Intheslow-start algorithm, thesizeofthecongestion window
increases exponentially untilitreachesathreshold.
Congestion Avoidance: Additive Increase Ifwestartwiththeslow-start algorithm,
thesizeofthecongestion windowincreases exponentially. Toavoidcongestion before
ithappens, onemustslowdownthisexponential growth.TCPdefinesanotheralgo­
rithmcalledcongestion avoidance, whichundergoes anadditive increase insteadof
anexponential one.Whenthesizeofthecongestion windowreachestheslow-start
threshold, theslow-start phasestopsandtheadditivephasebegins.Inthisalgorithm,
eachtimethewholewindowofsegments isacknowledged (oneround),thesizeoftheSECTION 24.41WOEXAMPLES 771
congestion windowisincreased by1.Toshowtheidea,weapplythisalgorithm tothesame
scenarioasslowstart,although wewillseethatthecongestion avoidance algorithm usually
startswhenthesizeofthewindowismuchgreaterthan1.Figure24.9showstheidea.
Figure24.9Congestion avoidance, additiveincrease
Rnd:Roundoftransmission Sender Receiver
-- --
cwnd=e10
~[Segment 1
cwnd =e1+1=2c:::::I:J
~[Segment 2
Segment 3
cwnd=2+1=3 I
<")Segment 5 "0c:
~
cwnd=3+1=4I,----,------,----l.....--'
Time Time
Inthiscase,afterthesenderhasreceivedacknowledgments foracomplete window
sizeofsegments, thesizeofthewindowisincreased byonesegment.
Ifwelookatthesizeofcwndintermsofrounds,wefindthattherateisadditiveas
shownbelow:
Start
Afterround1
Afterround2
Afterround3........................cwnd=l
cwnd=1+1=2
cwnd=2+ 1=3
cwnd=3+ 1=4
Inthecongestion avoidance algorithm, thesizeofthecongestion
windowincreases additively untilcongestion isdetected.
Congestion Detection: Multiplicative Decrease Ifcongestion occurs,thecongestion
windowsizemustbedecreased. Theonlywaythesendercanguessthatcongestion has
occurred isbytheneedtoretransmit asegment. However, retransmission canoccurin
oneoftwocases:whenatimertimesoutorwhenthreeACKsarereceived. Inboth
cases,thesizeofthethreshold isdroppedtoone-half, amultiplicative decrease. Most
TCPimplementations havetworeactions:
I.Ifatime-out occurs,thereisastronger possibility ofcongestion; asegment has
probably beendroppedinthenetwork, andthereisnonewsaboutthesentsegments.772CHAPTER 24CONGESTION CONTROL ANDQUALITY OFSERVICE
InthiscaseTCPreactsstrongly:
a.Itsetsthevalueofthethreshold toone-halfofthecurrentwindowsize.
b.Itsetscwndtothesizeofonesegment.
c.Itstartstheslow-start phaseagain.
2.IfthreeACKsarereceived, thereisaweakerpossibility ofcongestion; asegment
mayhavebeendropped, butsomesegments afterthatmayhavearrivedsafelysince
threeACKsarereceived. Thisiscalledfasttransmission andfastrecovery. Inthis
case,TCPhasaweakerreaction:
a.Itsetsthevalueofthethreshold toone-halfofthecurrentwindowsize.
b.Itsetscwndtothevalueofthethreshold (someimplementations addthree
segment sizestothethreshold).
c.Itstartsthecongestion avoidance phase.
Animplementations reactstocongestion detection inoneofthefollowing ways:
oIfdetection isbytime-out, anewslow-start phasestarts.
oIfdetection isbythreeACKs,anewcongestion avoidance phasestarts.
Summary InFigure24.10,wesummarize thecongestion policyofTCPandtherela­
tionships between thethreephases.
Figure24.10TCPcongestion policysummary
ssthresh=112window
cwnd=1MSS
{-
Time-out Slowstart 3ACKsCongestion Congestion
cwnd;:::ssthresh
ssthresh=112window
cwnd=ssthresh
Time-outCongestion3ACKs
Congestion avoidance Congestion
t
ssthresh=112wmdow
cwnd=ssthresh
Wegiveanexample inFigure24.11.Weassumethatthemaximum windowsizeis
32segments. Thethreshold issetto16segments (one-half ofthemaximum window
size).Intheslow-start phasethewindow sizestartsfrom1andgrowsexponentially
untilitreachesthethreshold. Afteritreachesthethreshold, thecongestion avoidance
(additive increase) procedure allowsthewindow sizetoincrease linearlyuntilatime­
outoccursorthemaximum windowsizeisreached. InFigure24.11,thetime-out occurs
whenthewindowsizeis20.Atthismoment, themultiplicative decrease procedure takesSECTION 24.4TWOEXAMPLES 773
Figure24.11 Congestion example
cwnd
58
234SS:Slowstart
AI:Additive increase
MD:Multiplicative decreaseTime-out
7 8 9 10111213141516Rounds26
24
22
20
18Threshold=16
16
14
12
10
08
06
04
02
overandreducesthethreshold toone-halfoftheprevious windowsize.Theprevious
windowsizewas20whenthetime-out happened sothenewthreshold isnow10.
TCPmovestoslowstartagainandstartswithawindowsizeof1,andTCPmoves
toadditiveincrease whenthenewthreshold isreached. Whenthewindowsizeis12,a
three-ACKs eventhappens. Themultiplicative decrease procedure takesoveragain.
Thethreshold issetto6andTCPgoestotheadditive increase phasethistime.It
remainsinthisphaseuntilanothertime-out oranotherthreeACKshappen.
Congestion ControlinFrameRelay
Congestion inaFrameRelaynetworkdecreases throughput andincreases delay.Ahigh
throughput andlowdelayarethemaingoalsoftheFrameRelayprotocol. FrameRelay
doesnothaveflowcontrol.Inaddition, FrameRelayallowstheusertotransmitbursty
data.ThismeansthataFrameRelaynetwork hasthepotential tobereallycongested
withtraffic,thusrequiring congestion control.
Congestion Avoidance
Forcongestion avoidance, theFrameRelayprotocoluses2bitsintheframetoexplicitly
warnthesourceandthedestination ofthepresence ofcongestion.
BECN Thebackward explicitcongestion notification (BECN)bitwarnsthesenderof
congestion inthenetwork. Onemightaskhowthisisaccomplished sincetheframesare
traveling awayfromthesender.Infact,therearetwomethods: Theswitchcanuseresponse
framesfromthereceiver(full-duplex mode),orelsetheswitchcanuseapredefined connec­
tion(DLCI=1023)tosendspecialframesforthisspecificpurpose.Thesendercanrespond
tothiswarningbysimplyreducing thedatarate.Figure24.12showstheuseofBECN.
FECN Theforward explicitcongestion notification (FECN) bitisusedtowarn
thereceiverofcongestion inthenetwork. Itmightappearthatthereceivercannotdo
anything torelievethecongestion. However, theFrameRelayprotocol assumesthatthe
senderandreceiverarecommunicating witheachotherandareusingsometypeofflow
controlatahigherlevel.Forexample, ifthereisanacknowledgment mechanism atthis774CHAPTER 24CONGESTION CONTROL ANDQUALITY OFSERVICE
Figure24.12 BECN
Direction ofcongestion
~
FrameRelaynetwork
higherlevel,thereceivercandelaytheacknowledgment, thusforcingthesenderto
slowdown.Figure24.13showstheuseofFECN.
Figure24.13 FECN
FrameRelaynetwork
Whentwoendpoints arecommunicating usingaFrameRelaynetwork, foursitua­
tionsmayoccurwithregardtocongestion. Figure24.14showsthesefoursituations
andthevaluesofFECNandBECN.
Figure24.14 Fourcasesofcongestion
~~ B~NI
I~B~N~
a.Nocongestion b.Congestion inthedirection A-B
~~N BE~NI
IFE~NBE~N~~~B~NI
!FE;NBE~~
c.Congestion inthedirection B-A d.Congestion inbothdirectionsSECTION 24.5QUALITY OFSERVICE 775
24.5QUALITY OFSERVICE
Qualityofservice(QoS)isaninternetworking issuethathasbeendiscussed morethan
defined.Wecaninformally definequalityofserviceassomething aflowseekstoattain.
FlowCharacteristics
Traditionally, fourtypesofcharacteristics areattributed toaflow:reliability, delay,
jitter,andbandwidth, asshowninFigure24.15.
Figure24.15 Flowcharacteristics
Reliability
Reliability isacharacteristic thataflowneeds.Lackofreliability meanslosinga
packetoracknowledgment, whichentailsretransmission. However, thesensitivity of
application programs toreliability isnotthesame.Forexample, itismoreimportant
thatelectronic mail,filetransfer,andInternetaccesshavereliabletransmissions than
telephony oraudioconferencing.
Delay
Source-to-destination delayisanotherflowcharacteristic. Againapplications cantolerate
delayindifferentdegrees.Inthiscase,telephony, audioconferencing, videoconferenc­
ing,andremotelog-inneedminimum delay,whiledelayinfiletransferore-mailisless
important.
Jitter
Jitteristhevariation indelayforpacketsbelonging tothesameflow.Forexample, if
fourpacketsdepartattimes0,1,2,3andarriveat20,21,22, 23,allhavethesame
delay,20unitsoftime.Ontheotherhand,iftheabovefourpacketsarriveat21,23,21,
and28,theywillhavedifferent delays:21,22,19,and24.
Forapplications suchasaudioandvideo,thefirstcaseiscompletely acceptable;
thesecondcaseisnot.Fortheseapplications, itdoesnotmatterifthepacketsarrive
withashortorlongdelayaslongasthedelayisthesameforallpackets.Forthisappli­
cation,thesecondcaseisnotacceptable.
Jitterisdefinedasthevariation inthepacketdelay.Highjittermeansthedifference
betweendelaysislarge;lowjittermeansthevariation issmall.
InChapter29,weshowhowmultimedia communication dealswithjitter.Ifthe
jitterishigh,someactionisneededinordertousethereceiveddata.776CHAPTER 24CONGEST/ON CONTROL ANDQUALITY OFSERVICE
Bandwidth
Different applications needdifferent bandwidths. Invideoconferencing weneedto
sendmillionsofbitspersecondtorefreshacolor screen whilethetotalnumberofbits
inane-mailmaynotreachevenamillion.
FlowClasses
Basedontheflowcharacteristics, wecanclassifyflowsintogroups,witheachgroup
havingsimilarlevelsofcharacteristics. Thiscategorization isnotformaloruniversal;
someprotocols suchasATMhavedefinedclasses,aswewillseelater.
24.6lECHNIQUES TOIMPROVE QoS
InSection24.5wetriedtodefineQoSintermsofitscharacteristics. Inthissection,we
discusssometechniques thatcanbeusedtoimprovethequalityofservice.Webriefly
discussfourcommon methods: scheduling, trafficshaping, admission control,and
resource reservation.
Scheduling
Packetsfromdifferentflowsarriveataswitchorrouterforprocessing.A goodscheduling
technique treatsthedifferent flowsinafairandappropriate manner.Severalscheduling
techniques aredesigned toimprovethequalityofservice.Wediscussthreeofthemhere:
FIFOqueuing, priorityqueuing, andweighted fairqueuing.
FIFOQueuing
Infirst-in,first-out(FIFO)queuing, packetswaitinabuffer(queue)untilthenode
(routerorswitch)isreadytoprocessthem.Iftheaveragearrivalrateishigherthanthe
averageprocessing rate,thequeuewillfillupandnewpacketswillbediscarded. AFIFO
queueisfamiliartothosewhohavehadtowaitforabusatabusstop.Figure24.16shows
aconceptual viewofaFIFOqueue.
Figure24.16 FIFOqueue
Arrival Departure
PriorityQueuing
Inpriorityqueuing, packetsarefirstassigned toapriorityclass.Eachpriorityclasshas
itsownqueue.Thepacketsinthehighest-priority queueareprocessed first.Packetsin
thelowest-priority queueareprocessed last.NotethatthesystemdoesnotstopservingSECTION 24.6TECHNIQUES TOIMPROVE QoS777
aqueueuntilitisempty.Figure24.17showspriorityqueuingwithtwoprioritylevels
(forsimplicity).
Figure24.17 Priorityqueuing
Theswitchturnstotheother
1--queuewhenthecurrentone
:isempty.
I
I
Arrival
 4ocesso~ Departure
Discard
ApriorityqueuecanprovidebetterQoSthantheFIFOqueuebecause higher­
prioritytraffic,suchasmultimedia, canreachthedestination withlessdelay.However,
thereisapotential drawback.Ifthereisacontinuous flowinahigh-priority queue,the
packetsinthelower-priority queueswillneverhaveachancetobeprocessed. Thisisa
condition calledstarvation.
Weighted FairQueuing
Abetterscheduling methodisweighted fairqueuing. Inthistechnique, thepacketsare
stillassigned todifferent classesandadmitted todifferent queues.Thequeues,how­
ever,areweighted basedonthepriorityofthequeues;higherprioritymeansahigher
weight.Thesystemprocesses packetsineachqueueinaround-robin fashionwiththe
numberofpacketsselectedfromeachqueuebasedonthecorresponding weight.For
example, iftheweightsare3,2,and1,threepacketsareprocessed fromthefirstqueue,
twofromthesecondqueue,andonefromthethirdqueue.Ifthesystemdoesnot
imposepriorityontheclasses,allweightscanbeequaLInthisway,wehavefairqueuing
withpriority.Figure24.18showsthetechnique withthreeclasses.
TrafficShaping
Trafficshaping isamechanism tocontroltheamountandtherateofthetrafficsentto
thenetwork. Twotechniques canshapetraffic:leakybucketandtokenbucket.
LeakyBucket
Ifabuckethasasmallholeatthebottom,thewaterleaksfromthebucketataconstantrate
aslongasthereiswaterinthebucket.Therateatwhichthewaterleaksdoesnotdepend
ontherateatwhichthewaterisinputtothebucketunlessthebucketisempty.Theinput
ratecanvary,buttheoutputrateremainsconstant. Similarly, innetworking, atechnique
calledleakybucketcansmoothoutburstytraffic.Burstychunksarestoredinthebucket
andsentoutatanaveragerate.Figure24.19showsaleakybucketanditseffects.778CHAPTER 24CONGESTION CONTROL ANDQUALITY OFSERVICE
Figure24.18 Weighted fairqueuing
ArrivalThetumingswitchselects
3packetsfromfirstqueue,1------, then2packetsfromthesecond
'---'---'--'-'- ............-L.....J queue,thenIpacketfromthe
thirdqueue.Thecyclerepeats.
Departure
Figure24.19Leakybucket
BurstyflowI---12Mbps
2Mbps
I I
012345678910
Burstydata
o1--1-1 _~_Mb_1-=-P~-I-I-I-~
2345678910 s,Fixedflow
Fixed-rate data
Inthefigure,weassumethatthenetwork hascommitted abandwidth of3Mbps
forahost.Theuseoftheleakybucketshapestheinputtraffictomakeitconform tothis
commitment. InFigure24.19thehostsendsaburstofdataatarateof12Mbpsfor2s,
foratotalof24Mbitsofdata.Thehostissilentfor5 sandthensendsdataatarateof
2Mbpsfor3s,foratotalof6Mbitsofdata.Inall,thehosthassent30Mbitsofdatain
lOs.Theleakybucketsmoothsthetrafficbysendingoutdataatarateof3Mbpsduring
thesame10s.Withouttheleakybucket,thebeginning burstmayhavehurtthenetwork
byconsuming morebandwidth thanissetasideforthishost.Wecanalsoseethatthe
leakybucketmaypreventcongestion. Asananalogy, considerthe freewayduringrush
hour(burstytraffic).If,instead,commuters couldstaggertheirworkinghours,congestion
o'nourfreeways couldbeavoided.
Asimple leaky bucketimplementation isshowninFigure24.20.AFIFOqueue
holdsthepackets.Ifthetrafficconsists offixed-size packets (e.g.,cellsinATMSECTION 24.6TECHNIQUES TOIMPROVE QoS 779
Figure24.20Leakybucketimplementation
Leakybucketalgorithm
Arrival Departure
networks), theprocessremoves afixednumberofpacketsfromthequeueateachtick
oftheclock.Ifthetrafficconsistsofvariable-length packets,thefixedoutputratemust
bebasedonthenumberofbytesorbits.
Thefollowing isanalgorithm forvariable-length packets:
1.Initialize acountertonatthetickoftheclock.
2.Ifnisgreaterthanthesizeofthepacket,sendthepacketanddecrement the
counterbythepacketsize.Repeatthisstepuntilnissmallerthanthepacketsize.
3.Resetthecounterandgotostep1.
Aleakybucketalgorithm shapesburstytrafficintofixed-rate trafficby
averaging thedatarate.Itmaydropthepacketsifthebucketisfull.
TokenBucket
Theleakybucketisveryrestrictive. Itdoesnotcreditanidlehost.Forexample, ifa
hostisnotsendingforawhile,itsbucketbecomes empty.Nowifthehosthasbursty
data,theleakybucketallowsonlyanaveragerate.Thetimewhenthehostwasidleis
nottakenintoaccount. Ontheotherhand,thetokenbucketalgorithm allowsidle
hoststoaccumulate creditforthefutureintheformoftokens.Foreachtickofthe
clock,thesystemsendsntokenstothebucket.Thesystemremoves onetokenfor
everycell(orbyte)ofdatasent.Forexample, ifnis100andthehostisidlefor100ticks,
thebucketcollects10,000tokens.Nowthehostcanconsume allthesetokensinone
tickwith10,000cells,orthehosttakes1000tickswith10cellspertick.Inother
words,thehostcansendburstydataaslongasthebucketisnotempty.Figure24.21
showstheidea.
Thetokenbucketcaneasilybeimplemented withacounter.Thetokenisinitial­
izedtozero.Eachtimeatokenisadded,thecounterisincremented by1.Eachtimea
unitofdataissent,thecounterisdecremented by1.Whenthecounteriszero,thehost
cannotsenddata.
Thetokenbucketallowsburstytrafficataregulated maximum rate.780CHAPTER 24CONGESTION CONTROL ANDQUAliTY OFSERVICE
Figure24.21 Tokenbucket
Onetokenadded
pertick
~
Arrival Departure
Combining TokenBucketandLeakyBucket
Thetwotechniques canbecombined tocreditanidlehostandatthesametimeregulate
thetraffic.Theleakybucketisappliedafterthetokenbucket;therateoftheleakybucket
needstobehigherthantherateoftokensdroppedinthebucket.
Resource Reservation
Aflowofdataneedsresources suchasabuffer,bandwidth, CPUtime,andsoon.The
qualityofserviceisimproved iftheseresources arereserved beforehand. Wediscussin
thissectiononeQoSmodelcalledIntegrated Services, whichdependsheavilyonresource
reservation toimprovethequalityofservice.
Admission Control
Admission controlreferstothemechanism usedbyarouter,oraswitch,toacceptor
rejectaflowbasedonpredefined parameters calledflowspecifications. Beforearouter
acceptsaflowforprocessing, itcheckstheflowspecifications toseeifitscapacity (in
termsofbandwidth, buffersize,CPUspeed,etc.)anditsprevious commitments toother
flowscanhandlethenewflow.
24.7INTEGRATED SERVICES
BasedonthetopicsinSections24.5and24.6,twomodelshavebeendesigned toprovide
qualityofserviceintheInternet: Integrated Services andDifferentiated Services. Both
modelsemphasize theuseofqualityofserviceatthenetworklayer(IP),although the
modelcanalsobeusedinotherlayerssuchasthedatalinleWediscussIntegrated Services
inthissectionandDifferentiated ServiceinSection24.8.
AswelearnedinChapter20,IPwasoriginally designed forbest-effort delivery.
Thismeansthateveryuserreceivesthesamelevelofservices. ThistypeofdeliverySECTION 24.7INTEGRATED SERVICES 781
doesnotguarantee theminimum ofaservice,suchasbandwidth, toapplications such
asreal-time audioandvideo.Ifsuchanapplication accidentally getsextrabandwidth,
itmaybedetrimental tootherapplications, resulting incongestion.
Integrated Services, sometimes calledIntServ, isafiow-based QoSmodel,which
meansthatauserneedstocreateaflow,akindofvirtualcircuit,fromthesourcetothe
destination andinformallroutersoftheresource requirement.
Integrated Servicesisaflow~based QoSmodeldesigned forIP.
Signaling
Thereadermayremember thatIPisaconnectionless, datagram, packet-switching pro­
tocol.Howcanweimplement aflow-based modeloveraconnectionless protocol? The
solutionisasignaling protocoltorunoverIPthatprovides thesignaling mechanism for
makingareservation. Thisprotocol iscalledResource Reservation Protocol (RSVP)
andwillbediscussed short!y.
Flow Specification
Whenasourcemakesareservation, itneedstodefineaflowspecification. Aflowsped­
ficationhastwoparts:Rspec(resource specification) andTspec(trafficspecification).
Rspecdefinestheresourcethattheflowneedstoreserve(buffer,bandwidth, etc.).Tspec
definesthetrafficcharacterization oftheflow.
Admission
Afterarouterreceivestheflowspecification fromanapplication, itdecidestoadmitor
denytheservice.Thedecision isbasedontheprevious commitments oftherouterand
thecurrentavailability oftheresource.
ServiceClasses
TwoclassesofserviceshavebeendefinedforIntegrated Services: guaranteed service
andcontrolled-load service.
Guaranteed ServiceClass
Thistypeofserviceisdesigned forreal-time trafficthatneedsaguaranteed minimum
end-to-end delay.Theend-to-end delayisthesumofthedelaysintherouters,theprop­
agationdelayinthemedia,andthesetupmechanism. Onlythefirst,thesumofthe
delaysintherouters,canbeguaranteed bytherouter.Thistypeofserviceguarantees
thatthepacketswillarrivewithinacertaindeliverytimeandarenotdiscarded ifflow
trafficstayswithintheboundary ofTspec.Wecansaythatguaranteed services are
quantitative services, inwhichtheamountofend-to-end delayandthedataratemustbe
definedbytheapplication.782 CHAPTER 24CONGESTION CONTROL ANDQUALITY OFSERVICE
Controlled-Load ServiceClass
This type ofserviceisdesigned for applications thatcanacceptsomedelays,butare
sensitive toanoverloaded network andtothedangeroflosingpackets.Goodexamples
ofthesetypesofapplications arefiletransfer,e-mail,andInternetaccess.Thecontrolled­
loadserviceisaqualitative typeofserviceinthattheapplication requeststhepossibility
oflow-loss orno-losspackets.
RSVP
IntheIntegrated Services model,anapplication program needsresource reservation. As
welearnedinthediscussion oftheIntServmodel,theresource reservation isforaflow.
ThismeansthatifwewanttouseIntServattheIPlevel,weneedtocreateaflow,akind
ofvirtual-circuit network, outoftheIP,whichwasoriginally designed asadatagram
packet-switched network. Avirtual-circuit networkneedsasignaling systemtosetupthe
virtualcircuitbeforedatatrafficcanstart.TheResource Reservation Protocol (RSVP)is
asignaling protocol tohelpIPcreateaflowandconsequently makearesource reserva­
tion.Beforediscussing RSVP,weneedtomention thatitisanindependent protocol
separatefromtheIntegrated Services model.Itmaybeusedinothermodelsinthefuture.
Multicast Trees
RSVPisdifferent fromsomeothersignaling systemswehaveseenbeforeinthatitisa
signaling systemdesigned formulticasting. However, RSVPcanbealsousedforuni­
castingbecauseunicasting isjustaspecialcaseofmulticasting withonlyonemember
inthemulticast group.ThereasonforthisdesignistoenableRSVPtoprovideresource
reservations forallkindsoftrafficincluding multimedia whichoftenusesmulticasting.
Receiver-Based Reservation
InRSVP,thereceivers, notthesender,makethereservation. Thisstrategymatches the
othermulticasting protocols. Forexample, inmulticast routingprotocols, thereceivers,
notthesender,makeadecision tojoinorleaveamulticast group.
RSVPMessages
RSVPhasseveraltypesofmessages. However, forourpurposes, wediscussonlytwo
ofthem:PathandResv.
PathMessages Recallthatthereceivers inaflowmakethereservation inRSVP.
However, thereceivers donotknowthepathtraveledbypacketsbeforethereservation
ismade.Thepathisneededforthereservation. Tosolvetheproblem, RSVPusesPath
messages. APathmessage travelsfromthesenderandreachesallreceivers inthemulti­
castpath.Ontheway,aPathmessage storesthenecessary information forthereceivers.
APathmessage issentinamulticast environment; anewmessage iscreatedwhenthe
pathdiverges. Figure24.22showspathmessages.
ResvMessages Afterareceiverhasreceived aPathmessage, itsendsaResvmessage.
TheResvmessage travelstowardthesender(upstream) andmakesaresource reservation
ontheroutersthatsupportRSVP.IfarouterdoesnotsupportRSVPonthepath,itroutesSECTION 24.7INTEGRATED SERVICES 783
Figure24.22 Pathmessages
Path~
81Path0-Path0-
ReIPath0-
~path
Rc2Rc3
thepacketbasedonthebest-effort deliverymethodswediscussed before.Figure24.23
showstheResvmessages.
Figure24.23 Resvmessages
81Resv
~DResv~
Rcl Rc2
Reservation Merging
InRSVP,theresources arenotreserved foreachreceiverinaflow;thereservation is
merged.InFigure24.24,Rc3requestsa2-Mbpsbandwidth whileRc2requestsaI-Mbps
bandwidth. RouterR3,whichneedstomakeabandwidth reservation, mergesthetwo
requests. Thereservation ismadefor2Mbps,thelargerofthetwo,becausea2-Mbps
inputreservation canhandlebothrequests. Thesamesituation istrueforR2.The
readermayaskwhyRc2andRc3,bothbelonging toonesingleflow,requestdifferent
amounts ofbandwidth. Theansweristhat,inamultimedia environment, different
receivers mayhandledifferent gradesofquality.Forexample, Rc2maybeable'to
receivevideoonlyat1Mbps(lowerquality),whileRc3maybeabletoreceivevideoat
2Mbps(higherquality).
Figure24.24 Reservation merging
3Mbps~ R2
Rcl2Mbps~
Rc2784CHAPTER 24CONGESTION CONTROL ANDQUALITY OFSERVICE
Reservation Styles
Whenthereismorethanoneflow,therouterneedstomakeareservation toaccommodate
allofthem.RSVPdefinesthreetypesofreservation styles,asshowninFigure24.25.
Figure24.25Reservation styles
WildCardFilterStyleInthisstyle,theroutercreatesasinglereservation forall
senders.Thereservation isbasedonthelargestrequest.Thistypeofstyleisusedwhen
theflowsfromdifferent sendersdonotoccuratthesametime.
FixedFilterStyleInthisstyle,theroutercreatesadistinctreservation foreachflow.
Thismeansthatiftherearenflows,ndifferent reservations aremade.Thistypeofstyle
isusedwhenthereisahighprobability thatflowsfromdifferent senderswilloccurat
thesametime.
SharedExplicitStyleInthisstyle,theroutercreatesasinglereservation whichcan
besharedbyasetofflows.
SoftState
Thereservation information (state)storedineverynodeforaflowneedstoberefreshed
periodically. Thisisreferredtoasasoftstateascompared tothehardstateusedin
othervirtual-circuit protocols suchasATMorFrameRelay,wheretheinformation
abouttheflowismaintained untilitiserased.Thedefaultintervalforrefreshing is
currently 30s.
Problems withIntegrated Services
Thereareatleasttwoproblems with Integrated Servicesthatmaypreventitsfullimple­
mentation intheInternet: scalability andservice-type limitation.
Scalability
TheIntegrated Servicesmodelrequiresthateachrouterkeepinformation foreachflow.
AstheInternetisgrowingeveryday,thisisaseriousproblem.
Service-Type Limitation
TheIntegrated Services modelprovides onlytwotypesofservices, guaranteed and
control-load. Thoseopposing thismodelarguethatapplications mayneedmorethan
thesetwotypesofservices.SECTION 24.8DIFFERENTIATED SERVICES 785
24.8DIFFERENTIATED SERVICES
Differentiated Services (DSorDiffserv) wasintroduced bytheIETF(Internet Engi­
neeringTaskForce)tohandletheshortcomings ofIntegrated Services. Twofundamental
changesweremade:
1.Themainprocessing wasmovedfromthecoreofthenetworktotheedgeofthe
network. Thissolvesthescalability problem. Theroutersdonothavetostore
information aboutflows.Theapplications, orhosts,definethetypeofservicethey
needeachtimetheysendapacket.
2.Theper-flowserviceischangedtoper-class service.Therouterroutesthepacket
basedontheclassofservicedefinedinthepacket,nottheflow.Thissolvesthe
service-type limitation problem. Wecandefinedifferenttypesofclassesbasedon
theneedsofapplications.
Differentiated Servicesisaclass-based QoSmodeldesigned forIP.
DSField
InDiffserv, eachpacketcontainsafieldcalledtheDSfield.Thevalueofthisfieldisset
attheboundary ofthenetworkbythehostorthefirstrouterdesignated astheboundary
router.IETFproposes toreplacetheexistingTOS(typeofservice)fieldinIPv4orthe
classfieldinIPv6bytheDSfield,asshowninFigure24.26.
Figure24.26 DSfield
DSCP .I~
TheDSfieldcontains twosubfields: DSCPandCU.TheDSCP(Differentiated
ServicesCodePoint)isa6-bitsubfieldthatdefinestheper-hopbehavior (PHB).The
2-bitCU(currently unused)subfieldisnotcurrently used.
TheDiffserv capablenode(router)usestheDSCP6bitsasanindextoatable
definingthepacket-handling mechanism forthecurrentpacketbeingprocessed.
Per-Hop Behavior
TheDiffserv modeldefinesper-hopbehaviors (PHBs)foreachnodethatreceivesa
packet.SofarthreePHBsaredefined:DEPHB,EFPHB,andAFPHB.
DEPHBTheDEPHB(defaultPHB)isthesameasbest-effort delivery, whichis
compatible withTOS.
EFPHBTheEFPHB(expedited forwarding PHB) provides thefollowing services:
oLowloss786CHAPTER 24CONGESTION CONTROL ANDQUALITY OFSERVICE
oLowlatency
oEnsuredbandwidth
Thisisthesameashavingavirtualconnection betweenthesourceanddestination.
AFPHBTheAFPHB(assured forwarding PHB)deliversthepacketwithahigh
assurance aslongastheclasstrafficdoesnotexceedthetrafficprofileofthenode.The
usersofthenetworkneedtobeawarethatsomepacketsmaybediscarded.
TrafficConditioner
Toimplement Oiffserv, theOSnodeusestrafficconditioners suchasmeters,markers,
shapers,anddroppers, asshowninFigure24.27.
Figure24.27 Trafficconditioner
Trafficconditioner
I"£&JInput-----""J'-......-......
Droppedkd
I-I-~~ Output
Meters Themetercheckstoseeiftheincoming flowmatchesthenegotiated traffic
profile.Themeteralsosendsthisresulttoothercomponents. Themetercanuseseveral
toolssuchasatokenbuckettochecktheprofile.
Marker Amarkercanremarkapacketthatisusingbest-effort delivery (OSCP:
000000)ordown-mark apacketbasedoninformation receivedfromthemeter.Down­
marking(lowering theclassoftheflow)occursiftheflowdoesnotmatchtheprofile.A
markerdoesnotup-mark (promote theclass)apacket.
Shaper Ashaperusestheinformation receivedfromthemetertoreshapethetrafficif
itisnotcompliant withthenegotiated profile.
Dropper Adropper,whichworksasashaperwithnobuffer,discardspacketsifthe
flowseverelyviolatesthenegotiated profile.
24.9QoSINSWITCHED NETWORKS
Wediscussed theproposed modelsforQoSintheIPprotocols. LetusnowdiscussQoS
asusedintwoswitched networks: FrameRelayandATM.Thesetwonetworks are
virtual-circuit networks thatneedasignaling protocolsuchasRSVP.SECTION 24.9QoSINSWITCHED NETWORKS 787
QoSinFrameRelay
Fourdifferent attributes tocontroltraffichavebeendevisedinFrameRelay:accessrate,
committed burstsizeBe'committed information rate(CIR),andexcessburstsizeBe'
Thesearesetduringthenegotiation between theuserandthenetwork. ForPVCcon­
nections, theyarenegotiated once;forSVCconnections, theyarenegotiated foreach
connection duringconnection setup.Figure24.28showstherelationships betweenthese
fourmeasurements.
Figure24.28 Relationship between trafficcontrolattributes
Rate
(bps)
Access1-- _
rate
Area=B.
eIR1----------------
T(s)
AccessRate
Foreveryconnection, anaccessrate(inbitspersecond)isdefined.Theaccessrate
actuallydependsonthebandwidth ofthechannelconnecting theusertothenetwork.
Theusercanneverexceedthisrate.Forexample, iftheuserisconnected toaFrame
RelaynetworkbyaT-lline,theaccessrateis1.544Mbpsandcanneverbeexceeded.
Committed BurstSize
Foreveryconnection, FrameRelaydefinesacommitted burstsizeBe.Thisisthe
maximum numberofbitsinapredefined timethatthenetworkiscommitted totransfer
withoutdiscarding anyframeorsettingtheDEbit.Forexample, ifaBeof400kbitsfor
aperiodof4 sisgranted,theusercansendupto400kbitsduringa4-sintervalwithout
worrying aboutanyframeloss.Notethatthisisnotaratedefinedforeachsecond.Itis
acumulative measurement. Theusercansend300kbitsduringthefirstsecond,nodata
duringthesecondandthethirdseconds, andfinally100kbitsduringthefourthsecond.
Committed Information Rate
Thecommitted information rate(CIR)issimilarinconcepttocommitted burstsize
exceptthatitdefinesanaveragerateinbitspersecond.Iftheuserfollowsthisratecon­
tinuously, thenetworkiscommitted todelivertheframes.However, becauseitisan
averagemeasurement, ausermaysenddataatahigherratethantheCIRattimesorat788 CHAPTER 24CONGESTION CONTROL ANDQUALITY OFSERVICE
alowerrateothertimes.Aslongastheaverageforthepredefined periodismet,the
frameswillbedelivered.
Thecumulative numberofbitssentduringthepredefined periodcannotexceedBe
NotethattheCIRisnotanindependent measurement; itcanbecalculated byusingthe
following formula:
BCIR==....Ebps
T
Forexample, iftheBeis5kbitsinaperiodof5s,theCIRis5000/5,or1kbps.
ExcessBurstSize
Foreveryconnection, FrameRelaydefinesanexcessburstsizeBe"Thisisthemaximum
numberofbitsinexcessofBethatausercansendduringapredefined time.Thenetwork
iscommitted totransferthesebitsifthereisnocongestion. Notethatthereislesscom­
mitmentherethaninthecaseofBeThenetworkiscommitting itselfconditionally.
UserRate
Figure24.29showshowausercansendburstydata.IftheuserneverexceedsBC'the
networkiscommitted totransmittheframeswithoutdiscarding any.Iftheuserexceeds
BebylessthanBe(thatis,thetotalnumberofbitsislessthanBe+Be)'thenetworkis
committed totransferalltheframesifthereisnocongestion. Ifthereiscongestion,
someframeswillbediscarded. Thefirstswitchthatreceivestheframesfromtheuser
hasacounterandsetstheDEbitfortheframesthatexceedBeTherestoftheswitches
willdiscardtheseframesifthereiscongestion. Notethatauserwhoneedstosenddata
fastermayexceedtheBelevel.AslongasthelevelisnotaboveBe+Be'thereisa
chancethattheframeswillreachthedestination withoutbeingdiscarded. Remember,
however, thatthemomenttheuserexceedstheBe+Belevel,alltheframessentafter
thatarediscarded bythefirstswitch.
Figure24.29 UserrateinrelationtoBeandBe+Be
IfareaislessthanBe'nodiscarding (DE=0).
Rate Ifareaisbetween BeandBe+Be'possiblediscarding ifcongestion (DE=1).
(bps) IfareaisgreaterthanBe+Be'discarding occurs.
Accessrater---------------------- ---------
Actual Actualrate
Actualrate rateeIRf------ --------------
Actualrate
Area=totalbitssentinTs
Actualrate
T(s)SECTION 24.9QoSINSWITCHED NETWORKS 789
QoSinATM
TheQoSinATMisbasedontheclass,user-related attributes, andnetwork-related attributes.
Classes
TheATMForumdefinesfourserviceclasses: CBR, VBR,ABR,andUBR(seeFig­
ure24.30).
Figure24.30 Serviceclasses
CBRTheconstant-bit-rate (CBR)classisdesigned forcustomers whoneedreal­
timeaudioorvideoservices. Theserviceissimilartothatprovided byadedicated line
suchasaTline.
VBRThevariable-bit-rate (VBR)classisdividedintotwosubclasses: real-time
(VBR-RT) andnon-real-time (VBR-NRT). VBR-RT isdesigned forthoseuserswho
needreal-time services(suchasvoiceandvideotransmission) andusecompression
techniques tocreateavariablebitrate.VBR-NRT isdesigned forthoseuserswhodo
notneedreal-time servicesbutusecompression techniques tocreateavariablebitrate.
ABRTheavailable-bit-rate (ABR)classdeliverscellsataminimum rate.Ifmore
networkcapacityisavailable, thisminimum ratecanbeexceeded. ABRisparticularly
suitableforapplications thatarebursty.
UBRTheunspecified-bit-rate (UBR)classisabest-effort deliveryservicethatdoes
notguarantee anything.
Figure24.31showstherelationship ofdifferent classestothetotalcapacityofthe
network.
Figure24.31Relationship ofserviceclassestothetotalcapacityofthenetwork
Capacity
Time790CHAPTER 24CONGESTION CONTROL ANDQUAUTY OFSERVICE
User-Related Attributes
ATMdefinestwosetsofattributes. User-related attributes arethoseattributes that
definehowfasttheuserwantstosenddata.Thesearenegotiated atthetimeofcontract
betweenauserandanetwork. Thefollowing aresomeuser-related attributes:
SCRThesustained cellrate(SCR)istheaveragecellrateoveralongtimeinterval.
Theactualcellratemaybelowerorhigherthanthisvalue,buttheaverageshouldbe
equaltoorlessthantheSCR.
PCRThepeakcellrate(PCR)definesthesender'smaximum cellrate.Theuser's
cellratecansometimes reachthispeak,aslongastheSCRismaintained.
MCRTheminimum cellrate(MCR)definestheminimum cellrateacceptable tothe
sender.Forexample, iftheMCRis50,000,thenetworkmustguarantee thatthesender
cansendatleast50,000cellspersecond.
CVDT Thecellvariation delaytolerance (CVDT)isameasureofthevariation in
celltransmission times.Forexample, iftheCVDTis5ns,thismeansthatthediffer­
encebetweentheminimum andthemaximum delaysindelivering thecellsshouldnot
exceed5ns.
Network-RelatedAttributes
Thenetwork-related attributes arethosethatdefinecharacteristics ofthenetwork. The
following aresomenetwork-related attributes:
CLRThecelllossratio(CLR)definesthefractionofcellslost(ordelivered solate
thattheyareconsidered lost)duringtransmission. Forexample, ifthesendersends
100cellsandoneofthemislost,theCLRis
CLR=_1_=10-2
100
CTDThecelltransferdelay(CTD)istheaveragetimeneededforacelltotravel
fromsourcetodestination. Themaximum CTDandtheminimum CTDarealsocon­
sideredattributes.
CDVThecelldelayvariation (CDV)isthedifference betweentheCTDmaximum
andtheCTDminimum.
CERThecellerrorratio(CER)definesthefractionofthecellsdelivered inerror.
24.10RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
booksandsites.Theitemsinbrackets [...]refertothereference listattheendof
thetext.SECTION24.12 SUMMARY 791
Books
Congestion controlandQoSarediscussed inSections 5.3and5.5of[Tan03]andin
Chapter3of[Sta9S].EasyreadingaboutQoScanbefoundin[FH98].Thefulldiscus­
sionofQoSiscoveredin[BlaOO].
24.11KEYTERMS
accessrate
additiveincrease
available bitrate(ABR)
averagedatarate
backward explicitcongestion notification
(BECN)
burstydata
chokepacket
closed-loop congestion control
committed burstsizeBe
committed information rate(CIR)
congestion
congestion avoidance
congestion control
constantbitrate(CBR)
delay
Differentiated Services (DSorDiffserv)
effective bandwidth
excessburstsizeBe
first-in,first-out(FIFO)queuing
forwardexplicitcongestion notification
(FECN)Integrated Services (IntServ)
jitter
leakybucket
load
maximum burstsize
multiplicative decrease
open-loop congestion control
Pathmessage
peakdatarate
per-hopbehavior (PHB)
priorityqueuing
qualityofservice(QoS)
reliability
Resource Reservation Protocol (RSVP)
Resvmessage
slowstart
throughput
tokenbucket
trafficshaping
unspecified bitrate(UBR)
variablebitrate(VBR)
weighted fairqueuing
24.12SUMMARY
oTheaveragedatarate,peakdatarate,maximum burstsize,andeffective bandwidth
arequalitative valuesthatdescribeadataflow.
oAdataflowcanhaveaconstantbitrate,avariablebitrate,ortrafficthatisbursty.
oCongestion controlreferstothemechanisms andtechniques tocontrolcongestion
andkeeptheloadbelowcapacity.
oDelayandthroughput measuretheperformance ofanetwork.
oOpen-loop congestion controlprevents congestion; closed-loop congestion control
removes congestion.792CHAPTER 24CONGESTION CONTROL ANDQUALITY OFSERVICE
oTCPavoidscongestion throughtheuseoftwostrategies: thecombination ofslow
startandadditiveincrease, andmultiplicative decrease.
DFrameRelayavoidscongestion through theuseoftwostrategies: backward
explicitcongestion notification (BECN)andforwardexplicitcongestion notification
(FECN).
DAflowcanbecharacterized byitsreliability, delay,jitter,andbandwidth.
oScheduling, trafficshaping, resource reservation, andadmission controlaretech-
niquestoimprovequalityofservice(QoS).
DFIFOqueuing,priorityqueuing,andweighted fairqueuingarescheduling techniques.
oLeakybucketandtokenbucketaretrafficshapingtechniques.
DIntegrated Servicesisaflow-based QoSmodeldesigned forIP.
oTheResource Reservation Protocol (RSVP)isasignaling protocol thathelpsIP
createaflowandmakesaresource reservation.
oDifferential Servicesisaclass-based QoSmodeldesigned forIP.
oAccessrate,committed burstsize,committed information rate,andexcessburst
sizeareattributes tocontroltrafficinFrameRelay.
oQualityofserviceinATMisbasedonserviceclasses,user-related attributes, and
network-related attributes.
24.13PRACTICE SET
ReviewQuestions
I.Howarecongestion controlandqualityofservicerelated?
2.Whatisatrafficdescriptor?
3.Whatistherelationship betweentheaveragedatarateandthepeakdatarate?
4.Whatisthedefinition ofburstydata?
5.Whatisthedifference between open-loop congestion controlandclosed-loop
congestion control?
6.Namethepoliciesthatcanpreventcongestion.
7.Namethemechanisms thatcanalleviatecongestion.
8.Whatdetermines thesenderwindowsizeinTCP?
9.HowdoesFrameRelaycontrolcongestion?
10.Whatattributes canbeusedtodescribe aflowofdata?
11.Whatarefourgeneraltechniques toimprovequalityofservice?
12.Whatistrafficshaping? Nametwomethods toshapetraffic.
13.Whatisthemajordifference betweenIntegrated ServicesandDifferentiated Services?
14.HowisResource Reservation Protocol relatedtoIntegrated Services?
IS.Whatattributes areusedfortrafficcontrolinFrameRelay?
16.Inregardtoqualityofservice,howdouser-related attributes differfromnetwork­
relatedattributes inATM?SECTION 24.13PRACTICE SET 793
Exercises
17.TheaddressfieldofaFrameRelayframeis1011000000010 Ill.Isthereanycon­
gestionintheforwarddirection? Isthereanycongestion inthebackward direction?
18.AframegoesfromAtoB.Thereiscongestion inbothdirections. IsthePECNbit
set?IstheBECNbitset?
19.Inaleakybucketusedtocontrolliquidflow,howmanygallonsofliquidareleftinthe
bucketiftheoutputrateis5gal/min, thereisaninputburstof100gal/minfor12s,
andthereisnoinputfor48s?
20.Anoutputinterface inaswitchisdesigned usingtheleaky bucket algorithm to
send8000bytes/s(tick).Ifthefollowing framesarereceived insequence, show the
framesthataresentduringeachsecond.
Frames1,2,3,4:4000byteseach
Frames5,6,7:3200byteseach
Frames8,9:400byteseach
Frames10,11,12:2000byteseach
21.Auserisconnected toaFrameRelaynetwork throughaT-lline.ThegrantedCIR
is1MbpswithaBeof5millionbits/5sandBeof1millionbits/5s.
a.Whatistheaccessrate?
b.Cantheusersenddataat1.6Mbps?
c.Cantheusersenddataat1Mbpsallthetime?Isitguaranteed thatframesare
neverdiscarded inthiscase?
d.Cantheusersenddataat1.2Mbpsallthetime?Isitguaranteed thatframesare
neverdiscarded inthiscase?Iftheanswerisno,isitguaranteed thatframesare
discarded onlyifthereiscongestion?
e.Repeatthequestion inpart(d)foraconstant rateof1.4Mbps.
f.Whatisthemaximum dataratetheusercanuseallthetimewithoutworrying
abouttheframesbeingdiscarded?
g.Iftheuserwantstotakearisk,whatisthemaximum dataratethatcan beused
withnochanceofdiscarding ifthereisnocongestion?
22.InExercise 21theusersendsdataat1.4Mbpsfor2 sandnothingforthenext3s.
Isthereadangerofdiscarded dataifthereisnocongestion? Isthereadangerof
discarded dataifthereiscongestion?
23.InATM,ifeachcelltakes10Jlstoreachthedestination, whatistheCTD?
24.AnATMnetworkhaslost5cellsoutof10,000and2areinerror.WhatistheCLR?
WhatistheCER?Application Layer
Objectives
Theapplication layerenablestheuser,whetherhumanorsoftware, toaccessthenet­
work.Itprovides userinterfaces andsupportforservicessuchaselectronic mail,file
accessandtransfer,accesstosystemresources, surfingtheworldwideweb,andnet­
workmanagement.
Theapplication layerisresponsible forproviding servicestotheuser.
Inthispart,webrieflydiscusssomeapplications thataredesigned asaclient/server
pairintheInternet. Theclientsendsarequestforaservicetotheserver;theserver
responds totheclient.
Part6ofthebookisdevotedtotheapplication layer
andtheservicesprovided bythislayer.
Chapters
Thispartconsistsoffivechapters: Chapters 25to29.
Chapter25
Chapter25discusses theDomainNameSystem(DNS).DNSisaclient/server application
thatprovides nameservicesforotherapplications. Itenablestheuseofapplication­
layeraddresses, suchasanemailaddress,insteadofnetworklayerlogicaladdresses.
Chapter26
Chapter26discusses threecommon applications intheInternet:remotelogin,electronic
mail,andfiletransfer.Aremoteloginapplication allowstheusertoremotely accessthe
resources ofasystem.Anelectronic mailapplication simulates thetasksofsnailmailata
muchhigherspeed.Afiletransferapplication transfersfilesbetweenremotesystems.Chapter27
Chapter27discusstheideasandissuesinthefamousworldwideweb(WWW).Italso
brieflydescribes theclient/server application program (HTTP)thatiscommonly used
toaccesstheweb.
Chapter28
Chapter28isdevotedtonetworkmanagement. Wefirstdiscussthegeneralideabehind
network management. Wethenintroduce theclient/server application, SNMP,thatis
usedforthispurposeintheInternet.Although networkmanagement canbeimplemented
ineverylayer,theInternethasdecidedtouseaclient/server application.
Chapter29
Chapter29discusses multimedia andasetofwiely-used application programs. These
programs havegenerated newissuessuchastheneedfornewprotocols inotherlayers
tohandlethespecificproblems relatedtomultimedia. Webrieflydiscusstheseissuesin
thischapter.CHAPTER 25
DomainNameSystem
Thereareseveralapplications intheapplication layeroftheInternetmodelthatfollow
theclient/server paradigm. Theclient/server programs canbedividedintotwocategories:
thosethatcanbedirectlyusedbytheuser,suchase-mail,andthosethatsupportother
application programs. TheDomainNameSystem(DNS)isasupporting program that
isusedbyotherprograms suchase-mail.
Figure25.1showsanexampleofhowaDNSclient/server programcansupportan
e-mailprogram tofindtheIP address ofane-mailrecipient. Auserofane-mailpro­
grammayknowthee-mailaddressoftherecipient; however, theIPprotocolneedsthe
IPaddress.TheDNSclientprogram sendsarequesttoaDNSservertomapthee-mail
addresstothecorresponding IPaddress.
Figure25.1ExampleofusingtheDNSservice
UserSMTP:SimpleMailTransferProtocol (e-mail)
DNS:DomainNameSystem
aperson@wonderful.com
Application
layerwonderful. com
200.200.200.5wonderfuI.com
200.200.200.5DNS
client
200.200.200.5
Transport layer
Toidentifyanentity,TCPIIPprotocols usetheIPaddress,whichuniquely identi­
fiestheconnection ofahosttotheInternet. However, peopleprefertousenames
insteadofnumericaddresses. Therefore, weneedasystemthatcanmapanametoan
addressoranaddresstoaname.
797798CHAPTER 25DOMAIN NAMESYSTEM
WhentheInternetwassmall,mapping wasdonebyusingahostfile.Thehostfile
hadonlytwocolumns: nameandaddress.Everyhostcouldstorethehostfileonits
diskandupdateitperiodically fromamasterhostfile.Whenaprogram orauser
wantedtomapanametoanaddress,thehostconsulted thehostfileandfoundthe
mapping.
Today,however, itisimpossible tohaveonesinglehostfiletorelateeveryaddress
withanameandviceversa.Thehostfilewouldbetoolargetostoreineveryhost.In
addition, itwouldbeimpossible toupdateallthehostfileseverytimetherewasa
change.
Onesolutionwouldbetostoretheentirehostfileinasinglecomputer andallow
accesstothiscentralized information toeverycomputer thatneedsmapping. Butwe
knowthatthiswouldcreateahugeamountoftrafficontheInternet.
Anothersolution, theoneusedtoday,istodividethishugeamountofinformation
intosmallerpartsandstoreeachpartonadifferent computer. Inthismethod,thehost
thatneedsmapping cancontacttheclosestcomputer holdingtheneededinformation.
ThismethodisusedbytheDomainNameSystem(DNS).Inthischapter,wefirst
discusstheconcepts andideasbehindtheDNS.Wethendescribe theDNSprotocol
itself.
25.1NAMESPACE
Tobeunambiguous, thenamesassigned tomachines mustbecarefully selectedfroma
namespacewithcomplete controloverthebindingbetweenthenamesandIPaddresses.
Inotherwords,thenamesmustbeuniquebecausetheaddresses areunique.Aname
spacethatmapseachaddresstoauniquenamecanbeorganized intwoways:fiator
hierarchical.
FlatNarneSpace
Inaflatnamespace,anameisassigned toanaddress. Anameinthisspaceisa
sequence ofcharacters withoutstructure. Thenamesmayormaynothaveacommon
section;iftheydo,ithasnomeaning. Themaindisadvantage ofafiatnamespaceis
thatitcannotbeusedinalargesystemsuchastheInternetbecauseitmustbecentrally
controlled toavoidambiguity andduplication.
Hierarchical NarneSpace
Inahierarchical namespace,eachnameismadeofseveralparts.Thefirstpartcan
definethenatureoftheorganization, thesecondpartcandefinethenameofanorganiza­
tion,thethirdpartcandefinedepartments intheorganization, andsoon.Inthiscase,the
authority toassignandcontrolthenamespacescanbedecentralized. Acentralauthority
canassignthepartofthenamethatdefinesthenatureoftheorganization andthename
oftheorganization. Theresponsibility oftherestofthenamecanbegiventotheorgani­
zationitself.Theorganization canaddsuffixes(orprefixes) tothenametodefineitshost
orresources. Themanagement oftheorganization neednotworrythattheprefixchosen
forahostistakenbyanotherorganization because, evenifpartofanaddressistheSECTION 25.2DOMAIN NAMESPACE 799
same,thewholeaddressisdifferent. Forexample, assumetwocollegesandacompany
calloneoftheircomputers challenger. Thefirstcollegeisgivenanamebythecentral
authority suchasjhda.edu, thesecondcollegeisgiventhenameberkeley.edu, andthe
company isgiventhenamesmart.com.Whentheseorganizations addthenamechal­
lengertothenametheyhavealreadybeengiven,theendresultisthreedistinguishable
names:challenger.jhda.edu, challenger.berkeley.edu, andchallenger.smart.com. Thenames
areuniquewithouttheneedforassignment byacentralauthority. Thecentralauthority
controlsonlypartofthename,notthewhole.
25.2DOMAIN NAMESPACE
Tohaveahierarchical namespace,adomainnamespacewasdesigned. Inthisdesign
thenamesaredefinedinaninverted-tree structure withtherootatthetop.Thetreecan
haveonly128levels:level0(root)tolevel127(seeFigure25.2).
Figure25.2Domainnamespace
Label
Eachnodeinthe treehasalabel,whichisastringwithamaximum of63characters.
Theroot label isanullstring(emptystring).DNSrequires thatchildren ofanode
(nodesthatbranchfromthesamenode)havedifferent labels,whichguarantees the
uniqueness ofthedomainnames.
DomainName
Eachnodeinthe treehasadomainname.Afulldomainnameisasequence oflabels
separated bydots(.).Thedomainnamesarealwaysreadfromthenodeuptotheroot.
Thelastlabelisthelabeloftheroot(null).Thismeansthatafulldomainnamealways
endsinanulllabel,whichmeansthelastcharacter isadotbecausethenullstringis
nothing.Figure25.3showssomedomainnames.800 CHAPTER 25DOMAIN NAMESYSTEM
Figure25.3Domainnamesandlabels
Root
~
~dU
FullyQualified Domain Name
Ifalabelisterminated byanullstring,itiscalledafullyqualified domainname
(FQDN). AnFQDNisadomainnamethatcontainsthefullnameofahost.Itcontains
alllabels,fromthemostspecifictothemostgeneral,thatuniquely definethenameof
thehost.Forexample, thedomainname
challenger.ate.tbda.edu.
istheFQDNofacomputer namedchallenger installed attheAdvanced Technology
Center(ATC)atDeAnzaCollege. ADNSservercanonlymatchanFQDNtoan
address.Notethatthenamemustendwithanulllabel,butbecausenullmeansnothing,
thelabelendswithadot(.).
Partially Qualified Domain Name
Ifalabelisnotterminated byanullstring,itiscalledapartially qualified domain
name(PQDN). APQDNstartsfromanode,butitdoesnotreachtheroot.Itisused
whenthenametoberesolvedbelongstothesamesiteastheclient.Heretheresolver
cansupplythemissingpart,calledthesuffix,tocreateanFQDN.Forexample, ifauser
atthejhda.edu. sitewantstogettheIPaddressofthechallenger computer, heorshe
candefinethepartialname
challenger
TheDNSclientaddsthesuffixatc.jhda.edu. beforepassingtheaddresstotheDNS
server.
TheDNSclientnormally holds alistofsuffixes.Thefollowing canbethelistof
suffixesatDeAnzaCollege.Thenullsuffixdefinesnothing.Thissuffixisaddedwhen
theuserdefinesanFQDN.SECTION 25.3DISTRIBUTION OFNAMESPACE 801
atc.fhda.edu
fhda.edu
null
Figure25.4showssomeFQDNsandPQDNs.
Figure25.4FQDNandPQDN
FQDN
challenger.atc.fhda.edu.
cs.hnune.com.
www.funny.int.
DomainPQDN
chal1engocMc.fhda.edll
cs.hmme
www
Adomainisasubtreeofthedomainnamespace.Thenameofthedomainisthedomain
nameofthenodeatthetopofthesubtree.Figure25.5showssomedomains. Notethata
domainmayitselfbedividedintodomains(orsubdomains astheyaresometimes called).
Figure25.5Domains
25.3DISTRIBUTION OFNAMESPACE
Theinformation contained inthedomainnamespacemustbestored.However, itis
veryinefficient andalsounreliable tohavejustonecomputer storesuchahugeamount
ofinformation. Itisinefficient becauseresponding torequests fromallovertheworld
placesaheavyloadonthesystem.Itisnotunreliable becauseanyfailuremakesthedata
inaccessible.802 CHAPTER 25DOMAIN NAMESYSTEM
Hierarchy ofNameServers
Thesolutiontotheseproblems istodistribute theinformation amongmanycomputers
calledDNSservers.Onewaytodothisistodividethewholespaceintomanydomains
basedonthefirstlevel.Inotherwords,welettherootstandaloneandcreateasmany
domains (subtrees) astherearefirst-level nodes.Becauseadomaincreatedinthisway
couldbeverylarge,DNSallowsdomains tobedividedfurtherintosmallerdomains
(subdomains). Eachservercanberesponsible (authoritative) foreitheralargeora
smalldomain.Inotherwords,wehaveahierarchy ofserversinthesamewaythatwe
haveahierarchy ofnames(seeFigure25.6).
Figure25.6Hierarchy ofnameservers
Rootserver
irwin.comcomserver usserver
~"\
==0.-....
mcgraw.comeduserver arpaserver
Zone
Sincethecomplete domainnamehierarchy cannotbestoredonasingleserver,itis
dividedamongmanyservers.Whataserverisresponsible fororhasauthority overis
calledazone.Wecandefineazoneasacontiguous partoftheentiretree.Ifaserver
acceptsresponsibility foradomainanddoesnotdividethedomainintosmaller
domains, thedomainandthezonerefertothesamething.Theservermakesadatabase
calledazonefileandkeepsalltheinformation foreverynodeunderthatdomain.How­
ever,ifaserverdividesitsdomainintosubdomains anddelegates partofitsauthority to
otherservers,domainandzonerefertodifferent things.Theinformation aboutthe
nodesinthesubdomains isstoredintheserversatthelowerlevels,withtheoriginal
serverkeepingsomesortofreference totheselower-level servers.Ofcoursetheorigi­
nalserverdoesnotfreeitselffromresponsibility totally:Itstillhasazone,butthe
detailedinformation iskeptbythelower-level servers(seeFigure25.7).
Aservercanalsodividepartofitsdomainanddelegateresponsibility butstillkeep
partofthedomainforitself.Inthiscase,itszoneismadeofdetailedinformation forthe
partofthedomainthatisnotdelegated andreferences tothosepartsthataredelegated.SECTION 25.4DNSINTHEINTERNET 803
Figure25.7Zonesanddomains
Root
,,,,
,,,,,,,,,,,,
I
I,
I,...-......,--- Zone,,.
......,l(f--- Domain
I,
..Zoneand"\.'-+--';-,-- domain.,
I
1,,--..._------.._--------
RootServer
Arootserverisaserverwhosezoneconsistsofthewholetree.Arootserverusually
doesnotstoreanyinformation aboutdomains butdelegates itsauthority tootherservers,
keepingreferences tothoseservers.Thereareseveralrootservers,eachcovering the
wholedomainnamespace.Theserversaredistributed allaroundtheworld.
Primary andSecondary Servers
DNSdefinestwotypesofservers:primaryandsecondary. Aprimary serverisaserver
thatstoresafileaboutthezoneforwhichitisanauthority.Itisresponsible forcreating,
maintaining, andupdating thezonefile.Itstoresthezonefileonalocaldisk.
Asecondary serverisaserverthattransfers thecomplete information abouta
zonefromanotherserver(primary orsecondary) andstoresthefileonitslocaldisk.The
secondary serverneithercreatesnorupdatesthezonefiles.IfupdaJing isrequired, it
mustbedonebytheprimaryserver,whichsendstheupdatedversiontothesecondary.
Theprimaryandsecondary serversarebothauthoritative forthezonestheyserve.
Theideaisnottoputthesecondary serveratalowerlevelofauthority buttocreate
redundancy forthedatasothatifoneserverfails,theothercancontinue servingclients.
Notealsothataservercanbeaprimaryserverforaspecificzoneandasecondary server
foranotherzone.Therefore, whenwerefertoaserverasaprimaryorsecondary server,
weshouldbecarefultowhichzonewerefer.
Aprimaryserverloadsallinformation fromthediskfile;thesecondary server
loadsallinformation fromtheprimaryserver.Whenthesecondary downloads
information fromtheprimary, itiscalledzonetransfer.
25.4DNSINTHEINTERNET
DNSisaprotocol thatcanbeusedindifferent platforms. IntheInternet, thedomain
namespace(tree)isdividedintothreedifferent sections: genericdomains, country
domains, andtheinversedomain(seeFigure25.8).804CHAPTER 25DOMAIN NAMESYSTEM
Figure25.8DNSusedintheInternet
Inverse
domain
Generic DomainsGeneric
domainsCountry
domains
Thegenericdomains defineregistered hostsaccording totheirgenericbehavior. Each
nodeinthetreedefinesadomain,whichisanindextothedomainnamespacedatabase
(seeFigure25.9).
Figure25.9Genericdomains
Rootlevel
Indextoaddresses
GenericdomainsSECTION 25.4DNSINTHEINTERNET 805
Looking atthetree,weseethatthefirstlevelinthegenericdomains sectionallows
14possiblelabels.Theselabelsdescribetheorganization typesaslistedinTable25.1.
Table25.1Genericdomainlabels
Label Description
aero Airlinesandaerospace companies
biz Businesses orfirms(similarto"com")
com Commercial organizations
coop Cooperativebusiness organizations
edu Educational institutions
gov Government institutions
info Information serviceproviders
int International organizations
mil Militarygroups
museum Museums andothernonprofit organizations
name Personal names(individuals)
net Network supportcenters
org Nonprofit organizations
pro Professional individual organizations
Country Domains
Thecountrydomains sectionusestwo-character countryabbreviations (e.g.,usfor
UnitedStates).Secondlabelscanbeorganizational, ortheycanbemorespecific,
national designations. TheUnitedStates,forexample, usesstate abbreviations asa
subdivision ofus(e.g.,ca.us.).
Figure25.10showsthecountrydomains section.Theaddressanza.cup.ca.us can
betranslated toDeAnzaCollegeinCupertino, California, intheUnitedStates.
InverseDomain
Theinversedomainisusedtomapanaddresstoaname.Thismayhappen,forexam­
ple,whenaserverhasreceivedarequestfromaclienttodoatask.Although theserver
hasafilethatcontains alistofauthorized clients,onlytheIPaddressoftheclient
(extracted fromthereceived IPpacket)islisted.Theserverasksitsresolvertosenda
querytotheDNSservertomapanaddresstoanametodetermine iftheclientisonthe
authorized list.
Thistypeofqueryiscalledaninverseorpointer(PTR)query.Tohandleapointer
query,theinversedomainisaddedtothedomainnamespacewiththefirst-level node
calledarpa(forhistorical reasons). Thesecondlevelisalsoonesinglenodenamed
in-addr(forinverseaddress). TherestofthedomaindefinesIPaddresses.
Theserversthathandletheinversedomainarealsohierarchical. Thismeansthenetid
partoftheaddressshouldbeatahigherlevelthanthesubnetidpart,andthesubnetidpart806 CHAPTER 25DOMAIN NAMESYSTEM
Figure25.10 Countrydomains
Rootlevel
anza.cup.ca.us.
Indextoaddresses
Countrydomains
higherthanthehostidpart.Inthisway,aserverservingthewholesiteisatahigherlevel
thantheserversservingeachsubnet.Thisconfiguration makesthedomainlookinverted
whencompared toagenericorcountrydomain.Tofollowtheconvention ofreadingthe
domainlabelsfromthebottomtothetop,anIFaddresssuchas132.34.45.121 (aclassB
addresswithnetid132.34)isreadas121.45.34.132.in-addr. arpa.SeeFigure25.11foran
illustration oftheinversedomainconfiguration.
25.5RESOLUTION
Mapping anametoanaddressoranaddresstoanameiscalledname-address resolution.
Resolver
DNSisdesigned asaclient/server application. Ahostthatneedstomapanaddresstoa
nameoranametoanaddresscallsaDNSclientcalledaresolver. Theresolveraccesses
theclosestDNSserverwithamapping request.Iftheserverhastheinformation, it
satisfiestheresolver; otherwise, iteitherreferstheresolvertootherserversorasksother
serverstoprovidetheinfonnation.
Aftertheresolverreceives themapping, itinterprets theresponse toseeifitisa
realresolution oranerror,andfinallydeliverstheresulttotheprocessthatrequested it.SECTION 25.5RESOLUTION 807
Figure25.11Inversedomain
Rootlevel
l21.45.34.132.in-addr.arpa.
Indextonames
Inversedomain
Mapping NamestoAddresses
Mostofthetime,theresolvergivesadomainnametotheserverandasksforthecorre­
sponding address.Inthiscase,theserverchecksthegenericdomains orthecountry
domains tofindthemapping.
Ifthedomainnameisfromthegenericdomains section,theresolverreceives a
domainnamesuchas"chal.atc.jhda.edu.". Thequeryissentbytheresolvertothelocal
DNSserverforresolution. Ifthelocalservercannotresolvethequery,iteitherrefers
theresolvertootherserversorasksotherserversdirectly.
Ifthedomainnameisfromthecountrydomains section,theresolverreceives a
domainnamesuchas"ch.jhda.cu.ca.us.". Theprocedure isthesame.
Mapping Addresses toNames
AclientcansendanIPaddresstoaservertobemappedtoadomainname.Asmentioned
before,thisiscalledaPTRquery.Toanswerqueriesofthiskind,DNSusestheinverse
domain.However, intherequest,theIPaddressisreversedandthetwolabelsin-addrand
arpaareappended tocreateadomainacceptable bytheinversedomainsection.For
example, iftheresolverreceivestheIFaddress132.34.45.121, theresolverfirstinverts
theaddressandthenaddsthetwolabelsbeforesending. Thedomainnamesentis
"121.45.34.132.in-addr.arpa." whichisreceivedbythelocalDNSandresolved.808CHAPTER 25DOMAIN NAMESYSTEM
Recursive Resolution
Theclient(resolver) canaskforarecursive answerfromanameserver.Thismeansthat
theresolverexpectstheservertosupplythefinalanswer.Iftheserveristheauthority
forthedomainname,itchecksitsdatabase andresponds.Iftheserverisnottheauthor­
ity,itsendstherequesttoanotherserver(theparentusually)andwaitsfortheresponse.
Iftheparentistheauthority, itresponds; otherwise, itsendsthequerytoyetanother
server.Whenthequeryisfinallyresolved, theresponse travelsbackuntilitfinally
reachestherequesting client.Thisiscalledrecursive resolution andisshownin
Figure25.12.
Figure25.12Recursive resolution
Rootserver&
~*' ed& g:m
~~
[I.&!l...~..- fhda.edu mcgraw.com
Client 10
Iterative Resolution
Iftheclientdoesnotaskforarecursive answer,themapping canbedoneiteratively. If
theserverisanauthority forthename,itsendstheanswer.Ifitisnot,itreturns(tothe
client)theIPaddressoftheserverthatitthinkscanresolvethequery.Theclientis
responsible forrepeating thequerytothissecondserver.Ifthenewlyaddressed server
canresolvetheproblem, itanswersthequerywiththeIPaddress;otherwise, itreturns
theIPaddressofanewservertotheclient.Nowtheclientmustrepeatthequerytothe
thirdserver.Thisprocessiscallediterative resolution becausetheclientrepeatsthe
samequerytomultipleservers.InFigure25.13theclientqueriesfourserversbeforeit
getsananswerfromthemcgraw.com server.
Caching
Eachtimeaserverreceives aqueryforanamethatisnotinitsdomain, itneedsto
searchitsdatabaseforaserverIPaddress.Reduction ofthissearchtimewouldincrease
efficiency. DNShandlesthiswithamechanism calledcaching. Whenaserverasksfor
amapping fromanotherserverandreceivestheresponse, itstoresthisinformation in
itscachememorybeforesendingittotheclient.Ifthesameoranotherclientasksfor
thesamemapping, itcancheckitscachememoryandsolvetheproblem. However, toSECTION 25.6DNSMESSAGES 809
Figure25.13Iterative resolution
Rootserver
r-;::=5==&
6
Client.e._D. I((_I:da.edU
2
7
8
10[Jeorn
~
informtheclientthattheresponse iscomingfromthecachememory andnotfroman
authoritative source,theservermarkstheresponse asunauthoritative.
Caching speedsupresolution, butitcanalsobeproblematic. Ifaservercachesa
mapping foralongtime,itmaysendanoutdated mapping totheclient.Tocounterthis,
twotechniques areused.First,theauthoritative serveralwaysaddsinformation tothe
mapping calledtime-to-live (TTL).Itdefinesthetimeinsecondsthatthereceiving
servercancachetheinformation. Afterthattime,themapping isinvalidandanyquery
mustbesentagaintotheauthoritative server.Second,DNSrequiresthateachserver
keepaTTLcounterforeachmapping itcaches.Thecachememory mustbesearched
periodically, andthosemappings withanexpiredTTLmustbepurged.
25.6DNSMESSAGES
DNShastwotypesofmessages: queryandresponse. Bothtypeshavethesameformat.
Thequerymessage consistsofaheaderandquestion records;theresponse message
consistsofaheader,question records,answerrecords,authoritative records,andaddi­
tionalrecords(seeFigure25.14).
Header
Bothqueryandresponse messages havethesameheaderformatwithsomefieldsset
tozeroforthequerymessages. Theheaderis12bytes,anditsformatisshownin
Figure25.15.
Theidentification subfieldisusedbytheclienttomatchtheresponse withthequery.
Theclientusesadifferent identification numbereachtimeitsendsaquery.Theserver
duplicates thisnumberinthecorresponding response. Theflagssubfieldisacollection of810CHAPTER 25DOMAIN NAMESYSTEM
Figure25.14Queryandresponse messages
,~r '_c-:;:f-'~ J
.--~~~-;_:-:;.'.-. :,,_' ~t':-';:-~Y--k-;."_:.;~<
Question section ",,""
a.Query
Figure25.15Headerformat.--~
c-- Header---- --'
...,:.7 Question section L7'
Z Answersection Z
Z Authoritative section Z
Z Additional section .<
b.Response
Identification Flags
Numberofquestion recordsNumberofanswerrecords
(allOsinquerymessage)
Numberofauthoritative records Numberofadditional records
(allOsinquerymessage) (allOsinquerymessage)
subfields thatdefinethetypeofthemessage, thetypeofanswerrequested, thetypeof
desiredresolution (recursive oriterative), andsoon.Thenumberofquestion recordssub­
fieldcontainsthenumberofqueriesinthequestion sectionofthemessage. Thenumber
ofanswerrecordssubfieldcontainsthenumberofanswerrecordsintheanswersection
oftheresponse message. Itsvalueiszerointhequerymessage. Thenumberofauthorita­
tiverecordssubfieldcontainsthenumberofauthoritative recordsintheauthoritative sec­
tionofaresponse message. Itsvalueiszerointhequerymessage. Finally,thenumberof
additional recordssubfieldcontainsthenumberadditional recordsintheadditional sec­
tionofaresponse message. Itsvalueiszerointhequerymessage.
Question Section
Thisisasectionconsisting ofoneormorequestion records.Itispresentonbothquery
andresponse messages. Wewilldiscussthequestion recordsinafollowing section.
AnswerSection
Thisisasectionconsisting ofoneormoreresourcerecords.Itispresentonlyonresponse
messages. Thissectionincludes theanswerfromtheservertotheclient(resolver). We
willdiscussresourcerecordsinafollowing section.SECTION 25.8REGISTRARS 811
Authoritative Section
Thisisasectionconsisting ofoneormoreresourcerecords.Itispresentonlyonresponse
messages. Thissectiongivesinfonnation (domainname)aboutoneormoreauthoritative
serversforthequery.
Additional Information Section
Thisisasectionconsisting ofoneormoreresourcerecords.Itispresentonlyonresponse
messages. Thissectionprovides additional infonnation thatmayhelptheresolver. For
example, aservermaygivethedomainnameofanauthoritative servertotheresolverin
theauthoritative section,andincludetheIPaddressofthesameauthoritative serverinthe
additional information section.
25.7TYPESOFRECORDS
AswesawinSection25.6,twotypesofrecordsareusedinDNS.Thequestion records
areusedinthequestion sectionofthequeryandresponse messages. Theresource
recordsareusedintheanswer,authoritative, andadditional information sectionsofthe
response message.
Question Record
Aquestion recordisusedbytheclienttogetinformation fromaserver.Thiscontains
thedomainname.
-Resource Record
Eachdomainname(eachnodeonthetree)isassociated witharecordcalledtheresource
record.Theserverdatabase consistsofresource records.Resource recordsarealsowhat
isreturnedbytheservertotheclient.
25.8REGISTRARS
Howarenewdomains addedtoDNS?Thisisdonethrougharegistrar, acommercial
entityaccredited byICANN. Aregistrar firstverifiesthattherequested domainnameis
uniqueandthenentersitintotheDNSdatabase. Afeeischarged.
Today,therearemanyregistrars; theirnamesandaddresses canbefoundat
http://www.intenic.net
Toregister,theorganization needstogivethenameofitsserverandtheIPaddress
oftheserver.Forexample, anewcommercial organization namedwonderful witha
servernamedwsandIPaddress200.200.200.5 needstogivethefollowing information
tooneoftheregistrars:
Domainname:WS.wonderful. com
IPaddress:200.200.200.5812CHAPTER 25DOMAIN NAMESYSTEM
25.9DYNAMIC DOMAIN NAMESYSTEM (DDNS)
WhentheDNSwasdesigned, noonepredicted thattherewouldbesomanyaddress
changes. InDNS,whenthereisachange,suchasaddinganewhost,removing ahost,
orchanging anIPaddress,thechangemustbemadetotheDNSmasterfile.Thesetypes
ofchangesinvolvealotofmanualupdating. Thesizeoftoday'sInternetdoesnotallow
forthiskindofmanualoperation.
TheDNSmasterfilemustbeupdateddynamically. TheDynamic DomainName
System(DDNS)therefore wasdevisedtorespondtothisneed.InDDNS,whenabind­
ingbetweenanameandanaddressisdetermined, theinformation issent,usuallyby
DHCP(seeChapter21)toaprimaryDNSserver.Theprimaryserverupdatesthezone.
Thesecondary serversarenotifiedeitheractivelyorpassively. Inactivenotification, the
primaryserversendsamessagetothesecondary serversaboutthechangeinthezone,
whereasinpassivenotification, thesecondary serversperiodically checkforanychanges.
Ineithercase,afterbeingnotifiedaboutthechange,thesecondary requestsinformation
abouttheentirezone(zonetransfer).
Toprovidesecurityandpreventunauthorized changesintheDNSrecords,DDNS
canuseanauthentication mechanism.
25.10ENCAPSULATION
DNScanuseeitherUDPorTCP.Inbothcasesthewell-known portusedbytheserver
isport53.UDPisusedwhenthesizeoftheresponse message islessthan512bytes
because mostUDPpackages havea512-byte packetsizelimit.Ifthesizeofthe
response messageismorethan512bytes,aTCPconnection isused.Inthatcase,oneof
twoscenarios canoccur:
oIftheresolverhaspriorknowledge thatthesizeoftheresponse message ismore
than512bytes,itusestheTCPconnection. Forexample, ifasecondary name
server(actingasaclient)needsazonetransferfromaprimaryserver,itusesthe
TCPconnection because thesizeoftheinformation beingtransferred usually
exceeds512bytes.
oIftheresolverdoesnotknowthesizeoftheresponse message, itcanusetheUDP
port.However, ifthesizeoftheresponse message ismorethan512bytes,the
servertruncates themessage andturnsontheTCbit.Theresolvernowopensa
TCPconnection andrepeatstherequesttogetafullresponse fromtheserver.
DNScanusetheservicesofUDPorTCPusingthewell-known port53.
25.11RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
booksandsites.Theitemsinbrackets[...]refertothereference listattheendofthetext.SECTION 25.13SUMMARY 813
Books
DNSisdiscussedin[AL98],Chapter17of[For06],Section9.1of[PD03],andSection7.1
of[Tan03].
Sites
Thefollowing sitesarerelatedtotopicsdiscussed inthischapter.
owww.intenic.net/Information aboutregistrars
Dwww.ietf.org/rfc.html Information aboutRFCs
RFCs
Thefollowing RFCsarerelatedtoDNS:
799,811.819,830,881,882,883,897,920,921, 1034,1035,1386,1480,1535,1536,1537,
1591,~1637,1664,
 1706,1112,1713.1982,2065,2137,2317,2535,2671
25.12KEYTERMS
caching
countrydomain
DNSserver
domaindomainname
domainnamespace
DomainNameSystem(DNS)
Dynamic DomainNameSystem(DDNS)
flatnamespace
fullyqualified domainname(FQDN)
genericdomain
hierarchical namespace
hostfile
inversedomain
iterativeresolution
labelnamespace
partiallyqualified domainname(PQDN)
primaryserver
querymessage
question record
recursive resolution
registrarresolver
resource record
response message
rootserver
secondary server
subdomain
suffix
zone
25.13SUMMARY
oTheDomainNameSystem(DNS)isaclient/server application thatidentifies each
hostontheInternetwithauniqueuser-friendly name.
DDNSorganizes thenamespaceinahierarchical structure todecentralize the
responsibilities involved innaming.814CHAPTER 25DOMAIN NAMESYSTEM
DDNScanbepicturedasaninvertedhierarchical treestructure withonerootnodeat
thetopandamaximum of128levels.
DEachnodeinthetreehasadomainname.
DAdomainisdefinedasanysubtreeofthedomainnamespace.
DThenamespaceinformation isdistributed amongDNSservers.Eachserverhas
jurisdiction overitszone.
DArootserver'szoneistheentireDNStree.
DAprimaryservercreates,maintains, andupdatesinformation aboutitszone.
DAsecondary servergetsitsinformation fromaprimaryserver.
DThedomainnamespaceisdividedintothreesections: genericdomains, country
domains, andinversedomain.
DThereare14genericdomains, eachspecifying anorganization type.
DEachcountrydomainspecifies a country.
DTheinversedomainfindsadomainnameforagivenIPaddress.Thisiscalled
address-to-name resolution.
DNameservers,computers thatruntheDNSserverprogram, areorganized ina
hierarchy.
DTheDNSclient,calledaresolver,mapsanametoanaddressoranaddresstoaname.
DInrecursive resolution, the client sendsitsrequesttoaserverthateventually
returnsaresponse.
DIniterativeresolution, theclientmaysenditsrequesttomultiple serversbefore
gettingananswer.
DCachingisamethodwherebyananswertoaqueryisstoredinmemory(foralimited
time)foreasyaccesstofuturerequests.
DAfullyqualified domain name (FQDN)isadomainnameconsisting oflabelsbegin­
ningwiththehostandgoingbackthrougheachleveltotherootnode.
DApartiallyqualified domainname(PQDN) isadomainnamethatdoesnotinclude
allthelevelsbetweenthehostandtherootnode.
DTherearetwotypesofDNSmessages: queriesandresponses.
DTherearetwotypesofDNSrecords:questionrecordsandresource records.
DDynamic DNS(DDNS) automatically updatestheDNSmasterfile.
DDNSusestheservicesofUDPformessages oflessthan512bytes;otherwise, TCP
isused.
25.14PRACTICE SET
ReviewQuestions
I.Whatisanadvantage ofahierarchical namespaceoveraflatnamespaceforasystem
thesizeoftheInternet?
2.Whatisthedifference betweenaprimaryserverandasecondary server?
3.Whatarethethreedomainsofthedomainnamespace?SECTION 25.14PRACTICE SET 815
4.Whatisthepurposeoftheinversedomain?
5.Howdoesrecursive resolution differfromiterativeresolution?
6.WhatisanFQDN?
7.WhatisaPQDN?
8.Whatisazone?
9.Howdoescachingincreasetheefficiency ofnameresolution?
10.Whatarethetwomaincategories ofDNSmessages?
11.WhywasthereaneedforDDNS?
Exercises
12.Determine whichofthefollowing isanFQDNandwhichisaPQDN.
a.xxx
b.xxx.yyy.
c.xxx.yyy.net
d.zzz.yyy.xxx.edu.
13.Determine whichofthefollowing isanFQDNandwhichisaPQDN.
a.mil.
b.edu.
c.xxx.yyy.net
d.zzz.yyy.xxx.edu
14.Whichdomainisusedbyyoursystem,genericorcountry?
15.WhydoweneedaDNSsystemwhenwecandirectlyuseanIPaddress?
16.TofindtheIPaddressofadestination, weneedtheserviceofDNS.DNSneedsthe
serviceofUDPorTCP.UDPorTCPneedstheserviceofIP.IPneedsanIPdesti­
nationaddress.Isthisaviciouscyclehere?
17.IfaDNSdomainnameisvoyager.fhda.edu, howmanylabelsareinvolved here?
Howmanylevelsofhierarchy?
18.IsaPQDNnecessarily shorterthanthecorresponding FQDN?
19.Adomainnameishello.customer. info.Isthisagenericdomainoracountrydomain?
20.Doyouthinkarecursive resolution isnormally fasterthananinteractive one?
Explain.
21.Canaquerymessage haveonequestion sectionbutthecorresponding response
message haveseveralanswersections?CHAPTER 26
RemoteLogging, Electronic Mail,
andFileTransfer
ThemaintaskoftheInternetistoprovideservicesforusers.Amongthemostpopular
applications areremotelogging,electronic mail,andfiletransfer.Wediscussthesethree
applications inthischapter;wediscussanotherpopularuseoftheInternet,accessing the
WorldWideWeb,inChapter27.
26.1REMOTE LOGGING
IntheInternet, usersmaywanttorunapplication programs ataremotesiteandcreate
resultsthatcanbetransferred totheirlocalsite.Forexample, studentsmaywanttocon­
necttotheiruniversity computer labfromtheirhometoaccessapplication programs for
doinghomework assignments orprojects. Onewaytosatisfythatdemandandothersis
tocreateaclient/server application program foreachdesiredservice.Programs suchas
filetransferprograms (FTPs),e-mail(SMTP), andsoonarecurrently available. How­
ever,itwouldbeimpossible towriteaspecificclient/server programforeachdemand.
Thebettersolutionisageneral-purp<Dse client/server program thatletsauseraccess
anyapplication program onaremotecomputer; inotherwords,allowtheusertologon
toaremotecomputer. Afterloggingon,ausercanusetheservicesavailable onthe
remotecomputer andtransfertheresultsbacktothelocalcomputer.
TELNET
Inthissection,wediscusssuchaclient/server application program: TELNET. TELNET
isanabbreviation forTErminaL NETwork. ItisthestandardTCP/IPprotocolforvirtual
terminal serviceasproposed bytheInternational Organization forStandards (ISO).
TELNET enablestheestablishment ofaconnection toaremotesysteminsuchaway
thatthelocalterminalappearstobeaterminalattheremotesystem.
TELNET isageneral-purpose client/server application program.
817818CHAPTER 26REMOTE LOGGING, ELECTRONIC MAIL,ANDFILETRANSFER
Timesharing Environment
TELNET wasdesigned atatimewhenmostoperating systems, suchasUNIX,were
operating inatimesharing environment. Insuchanenvironment, alargecomputer
supportsmultipleusers.Theinteraction betweenauserandthecomputer occursthrough
aterminal, whichisusuallyacombination ofkeyboard, monitor, andmouse.Evena
microcomputer cansimulateaterminalwithaterminalemulator.
Logging
Inatimesharing environment, usersarepartofthesystemwithsomerighttoaccess
resources. Eachauthorized userhasanidentification andprobablY,a password. Theuser
identification definestheuseraspartofthesystem.Toaccessthesystem,theuserlogs
intothesystemwithauseridorlog-inname.Thesystemalsoincludes password
checking topreventanunauthorized userfromaccessing th~resources. Figure26.1
showstheloggingprocess.
Figure26.1Localandremotelog-in
Application programs
Operating
system/,,...,
/,,,
Tenninal
r-
a.Locallog-in
TELNET
\ I
\ I I
\ I I
'\1•••1
\ I /
\ II
\ IIApplication programs
I~;...~I ~~:;;server
Operating
system
InternetTELNET
client
Operating
system
Tenninal
r-~
b.Remotelog-inSECTION 26.1REMOTE LOGGING 819
Whenauserlogsintoalocaltimesharing system,itiscalledlocallog-in.Asauser
typesataterminalorataworkstation runningaterminalemulator, thekeystrokes are
accepted bytheterminaldriver.Theterminaldriverpassesthecharacters totheoperat­
ingsystem.Theoperating system,inturn,interprets thecombination ofcharacters and
invokesthedesiredapplication programorutility.
Whenauserwantstoaccessanapplication programorutilitylocatedonaremote
machine, sheperforms remotelog-in.HeretheTELNET clientandserverprograms
comeintouse.Theusersendsthekeystrokes totheterminal driver,wherethelocal
operating systemacceptsthecharacters butdoesnotinterpretthem.Thecharacters are
senttotheTELNET client,whichtransforms thecharacters toauniversal character set
callednetworkvirtualterminal (NVT)characters anddeliversthemtothelocalTCP/IP
protocolstack.
Thecommands ortext,inNVTform,travelthroughtheInternetandarriveatthe
TCP/IPstackattheremotemachine. Herethecharacters aredelivered totheoperat­
ingsystemandpassedtotheTELNET server,whichchangesthecharacters tothe
corresponding characters understandable bytheremotecomputer. However, thechar­
acterscannotbepasseddirectlytotheoperating systembecausetheremoteoperating
systemisnotdesigned toreceivecharacters fromaTELNET server:Itisdesigned to
receivecharacters fromaterminal driver.Thesolutionistoaddapieceofsoftware
calledapseudoterminal driverwhichpretends thatthecharacters arecomingfrom
aterminal. Theoperating systemthenpassesthecharacters totheappropriate appli­
cationprogram.
Network VirtualTerminal
Themechanism toaccessaremotecomputer iscomplex. Thisissobecauseeverycom­
puteranditsoperating systemacceptaspecialcombination ofcharacters astokens.For
example, theend-of-file tokeninacomputer runningtheDOSoperating systemis
Ctrl+z,whiletheUNIXoperating systemrecognizes Ctrl+d.
Wearedealingwithheterogeneous systems.Ifwewanttoaccessanyremotecom­
puterintheworld,wemustfirstknowwhattypeofcomputer wewillbeconnected to,
andwemustalsoinstallthespecificterminalemulator usedbythatcomputer. TELNET
solvesthisproblembydefiningauniversal interface calledthenetwork virtualtermi­
nal(NVT)character set.Viathisinterface, theclientTELNET translates characters
(dataorcommands) thatcomefromthelocalterminalintoNVTformanddeliversthem
tothenetwork. TheserverTELNET, ontheotherhand,translates dataandcommands
fromNVTformintotheformacceptable bytheremotecomputer. Foranillustration of
thisconcept,seeFigure26.2.
NVTCharacter SetNVTusestwosetsofcharacters, one fordataandtheother
forcontrol.Bothare8-bitbytes.Fordata,NVTisan8-bitcharacter setinwhichthe
7lowest-order bitsarethesameasASCIIandthehighest-order bitisO.Tosendcontrol
characters betweencomputers (fromclienttoserverorviceversa),NVTusesan8-bit
character setinwhichthehighest-order bitissettol.
Table26.1listssomeofthecontrol characters andtheirmeanings.820 CHAPTER 26REMOTE LOGGING, ELECTRONIC MAIL,ANDFILETRANSFER
Figure26.2ConceptofNVT
Terminalr,TELNET
client
InternetTELNET
server
Pseudoterminal
driver
Datacharacter
Table26.1SomeNVTcontrolcharactersControlcharacter
Character Decimal Binary Meaning
EOF 236 11101100 Endoffile
EOR 239 11101111 Endofrecord
SE 240 11110000 Suboption end
NOP 241 11110001 Nooperation
DM 242 11110010 Datamark
BRK 243 11110011 Break
IP 244 11110100 Interrupt process
AO 245 11110101 Abortoutput
AYT 246 11110110 Areyouthere?
EC 247 11110111 Erasecharacter
EL 248 11111000 Eraseline
GA 249 11111001 Goahead
SB 250 11111010 Suboption begin
WILL 251 11111011 Agreement toenableoption
WONT 252 11111100 Refusaltoenableoption
DO 253 11111101 Approval tooptionrequest
DONT 254 11111110 Denialofoptionrequest
lAC 255 11111111 Interpret (thenextcharacter) ascontrol
Embedding
TELNET usesonlyoneTCPconnection. Theserverusesthewell-known port23,and
theclientusesanephemeral port.Thesameconnection isusedforsendingbothdataandSECTION 26.1REMOTE LOGGING 821
controlcharacters. TELNET accomplishes thisbyembedding thecontrolcharacters inthe
datastream.However, todistinguish datafromcontrolcharacters, eachsequence ofcon­
trolcharacters ispreceded byaspecialcontrolcharacter calledinterpret ascontrol(lAC).
Forexample, imagineauserwantsaservertodisplayafile(filel)onaremoteserver.
Shecantype
catfilel
However, supposethenameofthefilehasbeenmistyped (fileainsteadoffilel).The
userusesthebackspace keytocorrectthissituation.
catjllea<backspace>l
However, inthedefaultimplementation ofTELNET, theusercannoteditlocally;the
editingisdoneattheremoteserver.Thebackspace character istranslated intotwo
remotecharacters (lACEC),whichareembedded inthedataandsenttotheremote
server.WhatissenttotheserverisshowninFigure26.3.
Figure26.3Anexampleofembedding
Typedattheremoteterminal
Options
TELNET letstheclientandservernegotiate optionsbeforeorduringtheuseoftheser­
vice.Optionsareextrafeaturesavailable toauserwithamoresophisticated terminal.
Userswithsimplerterminals canusedefaultfeatures.Somecontrolcharacters discussed
previously areusedtodefineoptions.Table26.2showssomecommon options.
Table26.2Options
Code Option Meaning
0Binary Interpret as8-bitbinarytransmission.
1Echo Echothedatareceived ononesidetotheother.
3Suppress goahead Suppress go-ahead signalsafterdata.
5Status RequestthestatusofTELNET.
6Timingmark Definethetimingmarks.
24Terminal type Settheterminal type.
32Terrninalspeed Settheterminal speed.
34Linemode Changetolinemode.822CHAPTER 26REMOTE LOGGING, ELECTRONIC MAIL,ANDFILETRANSFER
OptionNegotiation Touseanyoftheoptionsmentioned intheprevious sectionfirst
requiresoptionnegotiation between theclientandtheserver.Fourcontrolcharacters
areusedforthispurpose; theseareshowninTable26.3.
Table26.3NVTcharacter setforoptionnegotiation
Character Decimal Binary Meaning
WILL 251 11111011 1.Offering toenable
2.Accepting arequesttoenable
WONT 252 11111100 1.Rejecting arequesttoenable
2.Offering todisable
3.Accepting arequesttodisable
DO 253 11111101 1.Approving anoffertoenable
2.Requesting toenable
DONT 254 11111110 1.Disapproving anoffertoenable
2.Approving anoffertodisable
3.Requesting todisable
Apartycanoffertoenableordisableanoptionifithastherighttodoso.The
offeringcanbeapproved ordisapproved bytheotherparty.Toofferenabling, theoffer­
ingpartysendstheWILLcommand, whichmeans"WillIenabletheoption?" The
otherpartysendseithertheDOcommand, whichmeans"Pleasedo,"ortheDONT
command, whichmeans"Pleasedon't."Toofferdisabling, theofferingpartysendsthe
WONTcommand, whichmeans"Iwon'tusethisoptionanymore."Theanswermust
betheDONTcommand, whichmeans"Don'tuseitanymore."
Apartycanrequestfromtheotherpartytheenabling orthedisabling ofanoption.
Torequestenabling, therequesting partysendstheDOcommand, whichmeans
"Pleasedoenablethe option." TheotherpartysendseithertheWILLcommand, which
means"Iwill,"ortheWONTcommand, whichmeans"Iwon't."Torequestdisabling,
therequesting partysendstheDONTcommand, whichmeans"Pleasedon'tusethis
optionanymore." TheanswermustbetheWONTcommand, whichmeans"Iwon'tuse
itanymore."
Example 26.1
Figure26.4showsanexampleofoptionnegotiation. Inthisexample, theclientwantstheserverto
echoeachcharacter senttotheserver.Inotherwords,whenacharacter istypedattheuserkeyboard
terminal, itgoestotheserverandissentbacktothescreenoftheuserbeforebeingprocessed. The
echooptionisenabledbytheserverbecauseitistheserverthatsendsthecharacters backtotheuser
tenninal. Therefore, theclientshouldrequestfromtheservertheenabling oftheoptionusingDO.
Therequestconsistsofthreecharacters: lAC,DO,andECHO.Theserveracceptstherequest
andenablestheoption.Itinformstheclientbysendingthethree-character approval: lAC,WILL,
andECHO.
Suboption Negotiation Someoptionsrequireadditional information. Forexample,
todefinethetypeorspeedofaterminal, thenegotiation includesastringoranumberSECTION 26.1REMOTE LOGGING 823
Figure26.4Example 26.1:Echooption
ClientServer==cu:::u:::J~-
todefinethetypeorspeed.Ineithercase,thetwosuboption characters indicated
inTable26.4areneededforsuboption negotiation.
Table26.4NVTcharacter setforsuboption negotiation
Character Decimal Binary Meaning
SE 240 11110000 Suboption end
SB 250 11111010 Suboption begin
Example 26.2
Figure26.5showsanexample ofsuboption negotiation. Inthisexample, theclientwantsto
negotiate thetypeoftheterminal.
Figure26.5Exampleofsuboption negotiation
Server==cu:::u:::J
E:::3-Iwillenabletheterminaloption1-------1 Terminal typeHWrLL~~f--------J"~1Client
r
Doenableterminaloption
~-----IIAC t~1 Terminal type1------1
Settheterminaltypeto"VT"
IrAC~[!J-~I Terminal typet[}!}~
ModeofOperation
MostTELNET implementations operateinoneofthreemodes:defaultmode,character
mode,orlinemode.
DefaultModeThedefaultmodeisusedifnoothermodesareinvokedthrough
optionnegotiation. Inthismode,theechoingisdonebytheclient.Theusertypesa824CHAPTER 26REMOTE LOGGING, ELECTRONIC MAIL,ANDFILETRANSFER
character, andtheclientechoesthecharacter onthescreen(orprinter)butdoesnot
sendituntilawholelineiscompleted.
Character ModeInthecharacter mode,eachcharacter typedissentbytheclientto
theserver.Theservernormally echoesthecharacter backtobedisplayed ontheclient
screen.Inthismodetheechoingofthecharacter canbedelayedifthetransmission
timeislong(suchasinasatelliteconnection). Italsocreatesoverhead (traffic)forthe
networkbecausethreeTCPsegments mustbesentforeachcharacter ofdata.
LineModeAnewmodehasbeenproposed tocompensate forthedeficiencies ofthe
defaultmodeandthecharacter mode.Inthismode,calledthelinemode,lineediting
(echoing, character erasing,lineerasing,andsoon)isdonebytheclient.Theclient
thensendsthewholelinetotheserver.
26.2ELECTRONIC MAIL
OneofthemostpopularInternetservicesiselectronic mail(e-mail). Thedesigners of
theInternetprobably neverimagined thepopularity ofthisapplication program. Its
architecture consistsofseveralcomponents thatwediscussinthischapter.
Atthebeginning oftheInternet era,themessages sentbyelectronic mailwereshort
andconsisted oftextonly;theyletpeopleexchange quickmemos.Today,electronic
mailismuchmorecomplex. Itallowsamessagetoincludetext,audio,andvideo.Italso
allowsonemessagetobesenttooneormorerecipients.
Inthischapter,wefirststudythegeneralarchitecture ofane-mailsystemincluding
thethreemaincomponents: useragent,message transferagent,andmessage access
agent.Wethendescribetheprotocols thatimplement thesecomponents.
Architecture
Toexplainthearchitecture ofe-mail,wegivefourscenarios. Webeginwiththesimplest
situationand addcomplexity asweproceed.Thefourthscenarioisthemostcommon in
theexchange ofemail.
FirstScenario
Inthefirstscenario, thesenderandthereceiverofthee-mailareusers(orapplication
programs) onthesamesystem;theyaredirectlyconnected toasharedsystem.The
administrator hascreatedonemailboxforeachuserwherethereceived messages are
stored.Amailboxispartofalocalharddrive,aspecialfilewithpermission restrictions.
Onlytheownerofthemailboxhasaccesstoit.WhenAlice,auser,needstosenda
message toBob,anotheruser,Alicerunsauseragent(VA)program topreparethe
messageandstoreitinBob'smailbox. Themessagehasthesenderandrecipient mail­
boxaddresses (namesoffiles).Bobcanretrieveandreadthecontentsofhismailboxat
hisconvenience, usingauseragent.Figure26.6showstheconcept.
Thisissimilartothetraditional memoexchange betweenemployees inanoffice.
Thereisamailroom whereeachemployee hasamailboxwithhisorhernameonit.SECTION 26.2ELECTRONIC MAIL 825
Figure26.6Firstscenario inelectronic mail
VA:useragent
System
WhenAliceneedstosendamemotoBob,shewritesthememoandinsertsitinto
Bob'smailbox. WhenBobcheckshismailbox, hefindsAlice'smemoandreadsit.
Whenthesenderandthereceiverofane-mailareonthesamesystem,
weneedonlytwouseragents.
SecondScenario
Inthesecondscenario, thesenderandthereceiverofthee-mailareusers(orapplication
programs) ontwodifferentsystems.The messageneedstobesentovertheInternet.Herewe
needuseragents(VAs)andmessagetransferagents(MTAs), asshowninFigure26.7.
Figure26.7Secondscenario inelectronic mail
VA:useragent
MTA:message transferagent
VAD
System
(mailserver)System
(mailserver)VAD
Aliceneedstouseauseragentprogram tosendhermessage tothesystemather
ownsite.Thesystem(sometimes calledthemailserver)athersiteusesaqueuetostore
messages waitingtobesent.Bobalsoneedsauseragentprogram toretrievemessages
storedinthemailboxofthesystemathissite.Themessage, however, needstobesent
throughtheInternetfromAlice'ssitetoBob'ssite.Heretwomessage transferagents
areneeded:one'clientandoneserver.Likemostclient/server programs ontheInternet,
theserverneedstorunallthetimebecauseitdoesnotknowwhenaclientwillaskfora826 CHAPTER 26REMOTE LOGGING, ELECTRONIC MAIL,ANDFILETRANSFER
connection. Theclient,ontheotherhand,canbealertedbythesystemwhenthereisa
message inthequeuetobesent.
Whenthesenderandthereceiverofane-mailareondifferent systems,
weneedtwoVAsandapairofMTAs (clientandserver).
ThirdScenario
Inthethirdscenario, Bob,asinthesecondscenario, isdirectlyconnected tohissystem.
Alice,however, isseparated fromhersystem.EitherAliceisconnected tothesystemvia
apoint-to-point WAN,suchasadial-upmodem,aDSL,oracablemodem;orsheiscon­
nectedtoaLANinanorganization thatusesonemailserverforhandling e-mails-all
usersneedtosendtheirmessages tothismailserver.Figure26.8showsthesituation.
Figure26.8Thirdscenario inelectronic mail
MTA
VA Alice client
[ja.[j,,,,
LAN
mWA;\\
,,,
II
a
I~~
System
(mailserver)VA:useragent
MTA:message transferagent
System
(mailserver)
Alicestill needs auseragenttopreparehermessage. Shethenneedstosendthe
messagethroughtheLANorWAN.Thiscanbedonethrough apairofmessagetransfer
agents(clientandserver).Whenever Alicehasamessage tosend,shecallstheuser
agentwhich,intum,callstheMTAclient.TheMTAclientestablishes aconnection
withtheMTAserveronthesystem,whichisrunningallthetime.ThesystematAlice's
sitequeuesallmessages received. ItthenusesanMTAclienttosendthemessages to
thesystematBob'ssite;thesystemreceivesthemessageandstoresitinBob'smailbox.SECTION 26.2ELECTRONIC MAIL 827
Athisconvenience, Bobuseshisuseragenttoretrievethemessage andreadsit.Note
thatweneedtwopairsofMTAclient/server programs.
Whenthesenderisconnected tothemailserverviaaLANoraWAN,
weneedtwoVAsandtwopaIrsofMTAs(clIentandserver).
FourthScenario
Inthefourthandmostcommon scenario, Bobisalsoconnected tohismailserverbya
WANoraLAN.AfterthemessagehasarrivedatBob'smailserver,Bobneedstoretrieve
it.Here,weneedanothersetofclient/server agents,whichwecallmessage access
agents(MAAs). BobusesanMAAclienttoretrievehismessages. Theclientsendsa
requesttotheMAAserver,whichisrunningallthetime,andrequeststhetransferofthe
messages. ThesituationisshowninFigure26.9.
Figure26.9Fourthscenario inelectronic mail
MTA
UA Alice client
DaD
\
\
\
LANOCW~'\
\
\
\
~~aUA:useragent
MTA:message transferagent
MAA:message accessagentMAA
client Bob UA
D&·D,,,
/lAhWAN
,,,
Therearetwoimportant pointshere.First,Bobcannotbypassthemailserverand
usetheMTAserverdirectly. TouseMTAserverdirectly,Bobwouldneedtorunthe
MTAserverallthetimebecausehedoesnotknow when amessage willarrive.This
impliesthatBobmustkeephiscomputer onallthetimeifheisconnected tohissystem
throughaLAN.Ifheisconnected througha-WAN,hemustkeeptheconnection upall
thetime.Neitherofthesesituations isfeasibletoday.828 CHAPTER 26REMOTE LOGGING, ELECTRONIC MAIL,ANDFILETRANSFER
Second, notethatBobneedsanotherpairofclient/server programs: message
accessprograms. Thisissobecause an MTAclient/server programisapushprogram:
theclientpushesthemessagetotheserver.Bobneedsapullprogram. Theclientneeds
topullthemessagefromtheserver.Figure26.10showsthedifference.
Figure26.10 Pushversuspullinelectronic email
MTA MTA
client serverDClientpushesmessagesD»
MAA MAA
client serverDClientpullsmessagesD0(
Whenbothsenderandreceiverareconnected tothemailserverviaaLANoraWAN,
weneedtwoVAs,twopairsofMTAs(clientandserver),andapairofMAAs
(clientandserver).Thisisthemostcommon situation today.
UserAgent
Thefirstcomponent ofanelectronic mailsystemistheuseragent(VA).Itprovides
servicetotheusertomaketheprocessofsendingandreceiving amessageeasier.
Services Provided byaUserAgent
Auseragentisasoftware package(program) thatcomposes, reads,repliesto,andfor­
wardsmessages. Italsohandlesmailboxes. Figure26.11showstheservicesofatypical
useragent.
Figure26.11 Servicesofuseragent
Useragent
I
I I I I I
Composing Reading Replying to Forwarding Handling
messages messages messages messages mailboxes
Composing Messages Auseragenthelpstheusercompose thee-mailmessagetobe
sentout.Mostuseragentsprovideatemplate onthescreentobefilledinbytheuser.
Someevenhaveabuilt-ineditorthatcandospellchecking, grammar checking, andSECTION 26.2ELECTRONIC MAIL 829
othertasksexpected fromasophisticated wordprocessor. Auser,ofcourse,couldalter­
nativelyusehisorherfavoritetexteditororwordprocessor tocreatethemessage and
importit,orcutandpasteit,intotheuseragenttemplate.
Reading Messages Theseconddutyoftheuseragentistoreadtheincoming mes­
sages.Whenauserinvokesauseragent,itfirstchecksthemailintheincoming mailbox.
Mostuseragentsshowaone-linesummary ofeachreceivedmail.Eache-mailcontains
thefollowing fields.
1.Anumberfield.
2.Aflagfieldthatshowsthestatusofthemailsuchasnew,alreadyreadbutnot
repliedto,orreadandrepliedto.
:).Thesizeofthemessage.
4.Thesender.
5.Theoptionalsubjectfield.
Replying toMessages Afterreadingamessage, ausercanusetheuseragenttoreply
toamessage. Auseragentusuallyallowstheusertoreplytotheoriginalsenderorto
replytoallrecipients ofthemessage. Thereplymessage maycontaintheoriginalmes­
sage(forquickreference) andthenewmessage.
Forwarding Messages Replying isdefinedassendingamessage tothesenderor
recipients ofthecopy.Forwarding isdefinedassendingthemessage toathirdparty.A
useragentallowsthereceivertoforwardthemessage, withorwithoutextracomments,
toathirdparty.
Handling Mailboxes
Auseragentnormally createstwomailboxes: aninboxandanoutbox.Eachboxisafile
withaspecialformatthatcanbehandledbytheuseragent.Theinboxkeepsallthereceived
e-mailsuntiltheyaredeletedbytheuser.Theoutboxkeepsallthesente-mailsuntil the
userdeletesthem.Mostuseragentstodayarecapableofcreatingcustomized mailboxes.
UserAgentTypes
Therearetwotypesofuseragents:command-driven andGUI-based.
Command-Driven Command-driven useragentsbelongtotheearlydaysofelectronic
mail.Theyarestillpresentastheunderlying useragentsinservers.Acommand-driven
useragentnormally acceptsaone-character command fromthekeyboard toperformits
task.Forexample, ausercantypethecharacter r,atthecommand prompt,toreplytothe
senderofthemessage, ortypethecharacter Rtoreplytothesenderandallrecipients.
Someexamples ofcommand-driven useragentsaremail,pine,andelm.
Someexamples ofcommand-driven useragentsaremail,pine,andelm.
GUI-Based ModemuseragentsareGUI-based. Theycontaingraphical-user inter­
face(GUI)components thatallowtheusertointeractwiththesoftware byusingboth
thekeyboard andthemouse.Theyhavegraphical components suchasicons,menu830 CHAPTER 26REMOTE LOGGING, ELECTRONIC MAIL,ANDFILETRANSFER
bars,andwindows thatmaketheserviceseasytoaccess.Someexamples ofGUI-based
useragentsareEudora,Microsoft's Outlook, andNetscape.
Someexamples ofGUI·based useragentsareEudora,Outlook, andNetscape.
Sending Mail
Tosendmail,theuser,throughtheUA,createsmailthatlooksverysimilartopostal
mail.Ithasanenvelope andamessage (seeFigure26.12).
Figure26.12Formatofane-mail
Behrollz Forouzan
DeAnzaCollege
Cupertino, CA96014
SophiaFegan
Com-Net
Cupertino, CA95014
a.PostalmailMailFrom:forouzan@deanza.eduv0-0RCPTTo:fegan@comnet.com ;:;
:>l::
~
From:Behrouz Forouzan...
TQ:SophiaFeganv'0
Date:liS/OScd
tlJ
Subject:Network::c
tlJ
O/j
cd'"DearMs.Fegan: '"v
Wewanttoinformyouthat;;S
ournetworkisworkingpro- :>-.'0perlyafterthelastrepair.0
Il:I
Yourstruly,.
Behrouz Porouzan
b.Electromc mall
Envelope Theenvelope usuallycontainsthesenderandthereceiveraddresses.
Message Themessage containstheheaderandthebody.Theheaderofthemessage
definesthesender,thereceiver, thesubjectofthemessage, andsomeotherinformation
(suchasencoding type,asweseeshortly).Thebodyofthemessage containstheactual
information tobereadbytherecipient.
Receiving Mail
Theuseragentistriggered bytheuser(oratimer).Ifauserhasmail,theVAinforms
theuserwithanotice.Iftheuserisreadytoreadthemail.alist isdisplayed inwhich
eachlinecontains asummary oftheinformation aboutaparticular message inthemail­
box.Thesummary usuallyincludes thesendermailaddress,thesubject,andthetime
themailwassentorreceived. Theusercanselectanyofthemessages anddisplayits
contentsonthescreen.SECTION 26.2ELECTRONIC MAIL 831
Addresses
Todelivermail,amailhandling systemmustuseanaddressing systemwithunique
addresses. IntheInternet,theaddress consists oftwoparts:alocalpartandadomain
name,separated byan@sign(seeFigure26.13).
Figure26.13E-mailaddress
Addressofthe
mailboxonthe
mailserver@
Thedomain
nameofthe
mailserver
LocalPartThelocalpartdefinesthenameofaspecialfile,calledtheusermailbox,
whereallthemailreceivedforauserisstoredforretrievalbythemessageaccessagent.
DomainNameThesecondpartoftheaddressisthedomainname.Anorganization
usuallyselectsoneormorehoststoreceiveandsende-mail;thehostsaresometimes
calledmailserversorexchangers. Thedomainnameassigned toeachmailexchanger
eithercomesfromtheDNSdatabase orisalogicalname(forexample, thenameofthe
organization).
MailingList
Electronic mailallowsonename,analias,torepresent severaldifferent e-mail
addresses; thisiscalledamailinglist.Everytimeamessageistobesent,thesystem
checkstherecipient's nameagainstthealiasdatabase; ifthereisamailinglistforthe
definedalias,separatemessages, oneforeachentryinthelist,mustbeprepared and
handedtotheMTA.Ifthereisnomailinglistforthealias,thenameitselfisthereceiving
addressandasinglemessageisdelivered tothemailtransferentity.
MIME
Electronic mailhasasimplestructure. Itssimplicity, however, comesataprice.Itcan
sendmessages onlyinNVT7-bitASCIIformat.Inotherwords,ithassomelimita­
tions.Forexample, itcannotbeusedforlanguages thatarenotsupported by7-bit
ASCIIcharacters (suchasFrench,German, Hebrew,Russian, Chinese, andJapanese).
Also,itcannotbeusedtosendbinaryfilesorvideooraudiodata.
Multipurpose InternetMailExtensions (MIME) isasupplementary protocolthat
allowsnon-ASCII datatobesentthroughe-mail.MIMEtransforms non-ASCII dataat
thesendersitetoNVTASCIIdataanddeliversthemtotheclientMTAtobesentthrough
theInternet.Themessageatthereceiving sideistransformed backtotheoriginaldata.
WecanthinkofMIMEasasetofsoftware functions thattransforms non-ASCII
data(streamofbits)toASCIIdataandviceversa,asshowninFigure26.14.832CHAPTER 26REMOTE LOGGING, ELECTRONIC MAIL,ANDFILETRANSFER
Figure26.14MIME
User
Non-ASCII code
7-bitNVTASCII
7-bitNVTASCIIUser
Non-ASCII code
7-bitNVTASCII
MIMEdefinesfiveheadersthatcanbeaddedtotheoriginale-mailheadersection
todefinethetransformation parameters:
1.MIME-Version
2.Content-Type
3.Content-Transfer-Encoding
4.Content-Id
5.Content-Description
Figure26.15showstheMIMEheaders. Wewilldescribe eachheaderindetail.
Figure26.15MIMEheader
E-mailheader
MIME-Version: 1.1
Content-Type: type/subtype
Content-Transfer-Encoding: encoding type MIMEheaders
Content-Id: messageid
Content-Description: textualexplanation ofnontextualcontents
MIME-Version ThisheaderdefinestheversionofMIMEused.Thecurrentversion
is1.1.SECTION 26.2ELECTRONIC MAIL 833
Content- TypeThisheaderdefinesthetypeofdatausedinthebodyofthemessage.
Thecontenttypeandthecontentsubtypeareseparated byaslash.Depending onthe
subtype,theheadermaycontainotherparameters.
CDBtent-'I)pe:~Jsubtjl;pe;parameters> .
MIMEallowssevendifferent typesofdata.ThesearelistedinTable26.5.
Table26.5Datatypesandsubtypes inMIME
Type Subtype Description
TextPlain Unformatted
HTML HTML format(seeChapter27)
Mixed Bodycontainsorderedpartsofdifferent datatypes
Multipart Parallel Sameasabove,butnoorder
Digest Similartomixedsubtypes, butthedefaultismessage/
RFC822
Alternative Partsaredifferent versionsofthesamemessage
RFC822 Bodyisanencapsulated message
Message Partial Bodyisafragment ofabiggermessage
External-Body Bodyisareference toanothermessage
Image IPEG ImageisinIPEGformat
GIF ImageisinGIFformat
Video MPEG VideoisinMPEGformat
Audio Basic Single-channel encoding ofvoiceat8kHz
Application PostScript AdobePostScript
Octet-stream Generalbinarydata(8-bitbytes)
Content- Transfer-Encoding Thisheaderdefinesthemethodusedtoencodethe
messages intoOsandIsfortransport:
::,
i·:.~on~~Tta~~;ltne{)~iIlg: <tyti,~
.,o~, '
Thefivetypesofencoding methods arelistedinTable26.6.
Content-Id Thisheaderuniquely identifies thewholemessageinamultiple-message
environment.834CHAPTER 26REMOTE LOGGING, ELECTRONIC MAIL,ANDFILETRANSFER
Table26.6Content-trans fer-encoding
Type Description
7-bit NVTASCIIcharacters andshortlines
8-bit Non-ASCII characters andshortlines
Binary Non-ASCII characters withunlimited-length lines
Base-64 6-bitblocksofdataencodedinto8-bitASCIIcharacters
Quoted-printable Non-ASCII characters encoded asanequalssignfollowed
byanASCIIcode
Content-Description Thisheaderdefineswhetherthebodyisimage,audio,orvideo.
Content-Description: <description>
Message Transfer Agent:SMTP
Theactualmailtransferisdonethroughmessagetransferagents.Tosendmail,asystem
musthavetheclientMTA,andtoreceivemail,asystemmusthaveaserverMTA.The
formalprotocolthatdefinestheMTAclientandserverintheInternetiscalledtheSimple
MailTransfer Protocol (SMTP). Aswesaidbefore,twopairsofMTAclient/server
programs areusedinthemostcommon situation (fourthscenario). Figure26.16shows
therangeoftheSMTPprotocolinthisscenario.
Figure26.16SMTPrange
SMTP SMTP
13~~ceiver
,,,,
"LANorWAN,,,,sende~a._I~
,,,,
LANorWAN",,,,
Mailserver Mailserver
SMTPisusedtwotimes,between thesenderandthesender's mailserverand
between thetwomailservers.Aswewillseeshortly,anotherprotocol isneeded
betweenthemailserverandthereceiver.
SMTPsimplydefineshowcommands andresponses mustbesentbackandforth.
Eachnetworkisfreetochooseasoftware packageforimplementation. Wediscussthe
mechanism ofmailtransferbySMTPintheremainder ofthesection.SECTION 26.2ELECTRONIC MAIL 835
Commands andResponses
SMTPusescommands andresponses totransfermessages between anMTAclientand
anMTAserver(seeFigure26.17).
Figure26.17Commands andresponses
Commands
MTA
client ResponsesMTA
server
Eachcommand orreplyisterminated byatwo-character (carriage returnandlinefeed)
end-of-line token.
Commands Commands aresentfromtheclienttotheserver.Thefonnatofacommand
isshowninFigure26.18.Itconsistsofakeyword followed byzeroormorearguments.
SMTPdefines14commands. Thefirstfivearemandatory; everyimplementation must
supportthesefivecommands. Thenextthreeareoftenusedandhighlyrecommended. The
lastsixareseldomused.
Figure26.18 Commandformat
Keyword: argument(s)
Thecommands arelistedinTable26.7.
Table26.7Commands
Keyword Argument( s)
HELO Sender's hostname
MAILFROM Senderofthemessage
RCPTTO Intended recipient ofthemessage
DATA Bodyofthemail
QUIT
RSET
VRFY Nameofrecipient tobeverified
NOOP
TURN
EXPN Mailinglisttobeexpanded
HELP Command name836CHAPTER 26REMOTE LOGGING, ELECTRONIC MAIL,ANDFILETRANSFER
Table26.7Commands (continued)
Keyword Argument(s)
SENDFROM Intended recipient ofthemessage
SMOLFROM Intended recipient ofthemessage
SMALFROM Intended recipient ofthemessage
Responses Responses aresentfromtheservertotheclient.Aresponse isathree­
digitcodethatmaybefollowed byadditional textualinformation. Table26.8listssome
oftheresponses.
Table26.8Responses
Code Description
PositiveCompletion Reply
211Systemstatusorhelpreply
214Helpmessage
220Serviceready
221Serviceclosingtransmission channel
250Requestcommand completed
251Usernotlocal;themessagewillbeforwarded
PositiveIntermediate Reply
354Startmailinput
Transient Negative Completion Reply
421Servicenotavailable
450Mailbox notavailable
451Command aborted:localerror
452Command aborted:insufficient storage
Permanent Negative Completion Reply
500Syntaxerror;unrecognized command
501Syntaxerrorinparameters orarguments
502Command notimplemented
503Badsequence ofcommands
504Command temporarily notimplemented
550Command isnotexecuted; mailboxunavailable
551Usernotlocal
552Requested actionaborted;exceeded storagelocation
553Requested actionnottaken;mailboxnamenotallowed
554Transaction failedSECTION 26.2ELECTRONIC MAIL 837
Asthetableshows,responses aredividedintofourcategories. Theleftmost digitof
thecode(2,3,4,and5)definesthecategory.
MailTransfer Phases
Theprocessoftransferring amailmessage occursinthreephases:connection estab­
lishment, mailtransfer, andconnection termination.
Example 26.3
LetusseehowwecandirectlyuseSMTPtosendane-mailandsimulate thecommands
andresponses wedescribed inthissection.WeuseTELNET tologintoport25(theweIl­
knownportforSMTP).Wethenusethecommands directlytosendane-mail.Inthisexample,
forouzanb@adelphia.net issendingane-mailtohimself.ThefirstfewlinesshowTELNET try­
ingtoconnecttotheAdelphia mailserver.
Afterconnection, wecantypetheSMTPcommands andthenreceivetheresponses, as
shownbelow.Wehaveshownthecommands inblackandtheresponses incolor.Notethatwe
haveadded,forclarification, somecomment lines,designated bythe"="signs.Theselinesare
notpartofthee-mailprocedure.
$teJnet mail.adelphia.netJ5~­
Trying68.168.78.100 •••,
Co~nectedro
~~.ad.elp~~~et\6~~1~~;~8!1~).,
======== c\lnnection EStablishment' --:===,==::::=
220mta13.auelphia.net SMTPserverready Fri,6Aug2004...-
HELO maP-.a9~lphia.net ..'
250mtal3:.adeJphia.net.
==-=::::===== MailTrallSfer
MAILFROM;. forouzanb({fad~hia.nef ~
ZSOSender:<iorouzanb 0i;deJphia.net> :Ok
R~T
 TO~fOl'(1nzanb.@aa~pbia.net
.f50Recipie~t <forouzanbW'adelpbia.llet~ Ok
DATA
354OkSenddataendiQg~:with <CRLF>.<CRLF>
})~~lD: lt~ro~.~ ..' 'C< .... '
..TO:F'orotJzan::: :.. ....
Tfiisisatest~age
to'showSMTPin action...
~-==...:--== ConneetIDn Termination =:=:==-==:..:.-.- :::!:---::::::
,..250Message
 received~~atlelphia.net@mail.adelpllia.net
QUIT ,.
•'\0•.221mta:13~ade]phia.ntit SMTPservcJ;..closingcOl1l1ection
~ ,", ,
COOnection closedbyforeignhost:.
Message AccessAgent:POPandIMAP
Thefirstandthesecondstagesofmaildelivery useSMTP.However, SMTPisnot
involved inthethirdstagebecauseSMTPisapushprotocol; itpushesthemessage from838CHAPTER 26REMOTE LOGGING, ELECTRONIC MAIL,ANDFILETRANSFER
theclienttotheserver.Inotherwords,thedirection ofthebulk:data(messages) isfrom
theclienttotheserver.Ontheotherhand,thethirdstageneedsapullprotocol; theclient
mustpullmessages fromtheserver.Thedirection ofthebulkdataisfromtheserverto
theclient.Thethirdstageusesamessage accessagent.
Currently twomessageaccessprotocols areavailable: PostOfficeProtocol, version3
(POP3)andInternetMailAccessProtocol, version4(IMAP4). Figure26.19showsthe
positionofthesetwoprotocols inthemostcommon situation (fourthscenario).
Figure26.19POP3andIMAP4
ISMTP
Alic~[I
sende~
........LANorWAN ............
MailserverSMTPPOP3
IMAP4I
(]~~b~eiver
;
;
;
;
;;LANorWAN
;
;
;
;
Mailserver
POP3
PostOfficeProtocol, version3(POP3)issimpleandlimitedinfunctionality. The
clientPOP3software isinstalled ontherecipient computer; theserverPOP3software
isinstalled onthemailserver.
Mailaccessstartswiththeclientwhentheuserneedstodownload e-mailfromthe
mailboxonthemailserver.Theclientopensaconnection totheserveronTCPport110.
Itthensendsitsusernameandpassword toaccessthemailbox. Theusercanthenlist
andretrievethemailmessages, onebyone.Figure26.20showsanexample ofdown­
loadingusingPOP3.
POP3hastwomodes:thedeletemodeandthekeepmode.Inthedeletemode,the
mailisdeletedfromthemailbox aftereachretrieval. Inthekeepmode,themail
remainsinthemailboxafterretrieval. Thedeletemodeisnormally usedwhentheuser
isworkingatherpermanent computer andcansaveandorganize thereceivedmailafter
readingorreplying. Thekeepmodeisnormally usedwhentheuseraccesses hermail
awayfromherprimarycomputer (e.g.,alaptop).Themailisreadbutkeptinthesystem
forlaterretrievalandorganizing.
IMAP4
Anothermailaccessprotocol isInternet MailAccessProtocol, version4(IMAP4).
IMAP4issimilartoPOP3,butithasmorefeatures; IMAP4ismorepowerful andmore
complex.SECTION 26.2ELECTRONIC MAIL 839
Figure26.20Theexchange ofcommands andresponses inPOP3
Mailserver Bob'scomputer
POP3isdeficient inseveralways.Itdoesnotallowtheusertoorganize hermailon
theserver;theusercannothavedifferent foldersontheserver.(Ofcourse,theusercan
createfoldersonherowncomputer.) Inaddition, POP3doesnotallowtheuserto
partiallycheckthecontentsofthemailbeforedownloading.
IMAP4provides thefollowing extrafunctions:
oAusercancheckthee-mailheaderpriortodownloading.
oAusercansearchthecontentsofthee-mailforaspecificstringofcharacters prior
todownloading.
oAusercanpartiallydownload e-mail.Thisisespecially usefulifbandwidth islimited
andthee-mailcontains multimedia withhighbandwidth requirements.oAusercancreate,delete,orrenamemailboxes onthemailserver.
oAusercancreateahierarchy ofmailboxes inafolderfore-mailstorage.
Web-Based Mail
E-mailissuchacommon application thatsomewebsites todayprovidethisserviceto
anyonewhoaccessesthesite.Twocommon sitesareHotmailandYahoo.Theideaisvery
simple.MailtransferfromAlice'sbrowsertohermailserverisdonethroughHTTP(see
Chapter27).Thetransferofthemessage fromthesendingmailservertothereceiving840CHAPTER 26REMOTE LOGGING, ELECTRONIC MAIL,ANDFILETRANSFER
mailserverisstillthroughSMTP.Finally,themessagefromthereceiving server(theWeb
server)toBob'sbrowserisdonethroughHTIP.
Thelastphaseisveryinteresting. InsteadofPOP3orIMAP4,HTTPisnormally
used.WhenBobneedstoretrievehise-mails,hesendsamessagetothewebsite(Hotmail,
forexample). ThewebsitesendsaformtobefilledinbyBob,whichincludesthelog-in
nameandthepassword.Ifthelog-innameandpassword match,thee-mailistransferred
fromtheWebservertoBob'sbrowserinHTMLformat.
26.3FILETRANSFER
Transferring filesfromonecomputer toanotherisoneofthemostcommon tasks
expected fromanetworking orinternetworking environment. Asamatteroffact,the
greatestvolumeofdataexchange intheInternettodayisduetofiletransfer. Inthis
section,wediscussonepopularprotocol involved intransferring files:FileTransfer
Protocol (FTP).
FileTransfer Protocol (FTP)
FileTransfer Protocol (FTP)isthestandard mechanism provided byTCP/IPfor
copyingafilefromonehosttoanother.Although transferring filesfromonesystemto
anotherseemssimpleandstraightforward, someproblems mustbedealtwithfirst.For
example, two systems mayusedifferent filenameconventions. Twosystemsmayhave
different waystorepresent textanddata.Twosystemsmayhavedifferent directory
structures. Alltheseproblems havebeensolvedbyFTPinaverysimpleandelegant
approach.
FTPdiffersfromotherclient/server applications inthatitestablishes twoconnec­
tionsbetweenthehosts.Oneconnection isusedfordatatransfer,theotherforcontrol
information (commands andresponses). Separation ofcommands anddatatransfer
makesFTPmoreefficient. Thecontrolconnection usesverysimplerulesofcommuni­
cation.Wcneedtotransferonlyalineofcommand oralineofresponse atatime.The
dataconnection, ontheotherhand,needsmorecomplex rulesduetothevarietyofdata
typestransferred. However, thedifference incomplexity isattheFTPlevel,notTCP.
ForTCP,bothconnections aretreatedthesame.
FTPusestwowell-known TCPports:Port21isusedforthecontrolconnection,
andport20isusedforthedataconnection.
FTPusestheservicesofTCP.ItneedstwoTCPconnections.
Thewell-known port21isusedforthe control connection
andthewell-known port20forthedataconnection.
Figure26.21showsthebasicmodelofFTP.Theclienthasthreecomponents: user
interface, clientcontrolprocess,andtheclientdatatransferprocess.Theserverhastwo
components: theservercontrolprocessandtheserverdatatransferprocess.Thecontrol
connection ismadebetweenthecontrolprocesses. Thedataconnection ismadebetween
thedatatransferprocesses.SECTION 26.3FILETRANSFER 841
Figure26.21FTP
Usert
User
interface
Client Server
Thecontrolconnection remainsconnected duringtheentireinteractive FTPses­
sion.Thedataconnection isopenedandthenclosedforeachfiletransferred. Itopens
eachtimecommands thatinvolvetransferring filesareused,anditcloseswhenthefile
istransferred. Inotherwords,whenauserstartsanFTPsession,thecontrolconnection
opens.Whilethecontrolconnection isopen,thedataconnection canbeopenedand
closedmultipletimesifseveralfilesaretransferred.
Communication overControlConnection
FTPusesthesameapproach asSMTPtocommunicate acrossthecontrolconnection. It
usesthe7-bitASCIIcharacter set(seeFigure26.22).Communication isachieved
throughcommands andresponses. Thissimplemethodisadequate forthecontrolcon­
nectionbecause wesendonecommand (orresponse) atatime.Eachcommand or
response isonlyoneshortline,soweneednotworryaboutfileformatorfilestructure.
Eachlineisterminated withatwo-character (carriage returnandlinefeed)end-of-line
token.
Figure26.22Usingthecontrolconnection
Local
code
,";,ConttO:( ,,
',;;:t't9C~~ "'
ClientNVTASCII
Control
connectionLocal
code
'C6ntrol
"prt-icess
" '
Server842CHAPTER 26REMOTE LOGGING, ELECTRONIC MAIL,ANDFILETRANSFER
Communication overDataConnection
Thepurposeofthedataconnection isdifferent fromthatofthecontrolconnection. We
wanttotransferfilesthroughthedataconnection. Filetransferoccursoverthedata
connection underthecontrolofthecommands sentoverthecontrolconnection. How­
ever,weshouldremember thatfiletransferinFTPmeansoneofthreethings:
oAfileistobecopiedfromtheservertotheclient.Thisiscalledretrieving aft/e.It
isdoneunderthesupervision oftheRETRcommand,
oAfileistobecopiedfromtheclienttotheserver.Thisiscalledstoringaft/e.Itis
doneunderthesupervision oftheSTORcommand.
oAlistofdirectory orfilenamesistobesentfromtheservertotheclient.Thisis
doneunderthesupervision oftheLISTcommand. NotethatFTPtreatsalistof
directory orfilenamesasafile.Itissentoverthedataconnection.
Theclientmustdefinethetypeoffiletobetransferred, thestructure ofthedata,
andthetransmission mode.Beforesendingthefilethroughthedataconnection, we
preparefortransmission throughthecontrolconnection. Theheterogeneity problem is
resolved bydefining threeattributes ofcommunication: filetype,datastructure, and
transmission mode(seeFigure26.23).
Figure26.23Usingthedataconnection
Localdatatype
andstructure
ClientFiletype,datastructure,
andtransmission mode
aredefinedbytheclient Localdatatype
andstructure
DatalTIlnSfe!.~----...r
process
Server
FileTypeFTPcantransferoneofthefollowing filetypesacrossthedataconnection:
anASCIIfile,EBCDIC file,orimagefile.TheASCIIfileisthedefaultformatfortrans­
ferringtextfiles.Eachcharacter isencoded using7-bitASCII.Thesendertransforms
thefilefromitsownrepresentation intoASCIIcharacters, andthereceivertransforms
theASCIIcharacters toitsownrepresentation. Ifoneorbothendsoftheconnection
useEBCDIC encoding (thefileformatusedbyIBM),thefilecanbetransferred using
EBCDIC encoding. Theimagefileisthedefaultformatfortransferring binaryfiles.
Thefileissentascontinuous streamsofbitswithoutanyinterpretation orencoding.
Thisismostlyusedtotransferbinaryfilessuchascompiled programs.
DataStructure FTPcantransferafileacrossthedataconnection byusingoneofthe
following interpretations aboutthestructure ofthedata:filestructure, recordstructure,
andpagestructure. Inthefilestructure format,thefileisacontinuous streamofbytes.In
therecordstructure, thefileisdividedintorecords.Thiscanbeusedonlywithtextfiles.
Inthepagestructure, thefileisdividedintopages,witheachpagehavingapagenumber
andapageheader.Thepagescanbestoredandaccessed randomly orsequentially.SECTION 26.3FILETRANSFER 843
Transmission ModeFTPcantransferafileacrossthedataconnection byusingone
ofthefollowing threetransmission modes:streammode,blockmode,andcompressed
mode.Thestreammodeisthedefaultmode.Dataaredelivered fromFTPtoTCPasa
continuous streamofbytes.TCPisresponsible forchopping dataintosegments of
appropriate size.Ifthedataaresimplyastreamofbytes(filestructure), noend-of-file
isneeded.End-of-file inthiscaseistheclosingofthedataconnection bythesender.If
thedataaredividedintorecords(recordstructure), eachrecordwillhaveaI-byteend­
of-record (EOR)character andtheendofthefilewillhaveaI-byteend-of-file (EOF)
character. Inblockmode,datacanbedelivered fromFTPtoTCPinblocks.Inthis
case,eachblockispreceded bya3-byteheader.Thefirstbyteiscalledtheblock
descriptor; thenext2bytesdefinethesizeoftheblockinbytes.Inthecompressed
mode,ifthefileisbig,thedatacanbecompressed. Thecompression methodnormally
usedisrun-length encoding. Inthismethod,consecutive appearances ofadataunitare
replaced byoneoccurrence andthenumberofrepetitions. Inatextfile,thisisusually
spaces(blanks). Inabinaryfile,nullcharacters areusuallycompressed.
Example 26.4
Thefollowing showsanactualFTPsessionforretrieving alistofitemsinadirectory. Thecol­
oredlinesshowtheresponses fromtheservercontrolconnection; theblacklinesshowthecom­
mandssentbytheclient.Thelinesinwhitewithablackbackground showdatatransfer.
$ftpvoyager.deanza.tbda.edu
Connected tovoyager.deanza.tbda.edu.
220(vsFTPd 1.2.1)
530PleaseloginwithUSERandPASS.
Name(voyager.deanza.tbda.edu:forouzan): forouzan
331Pleasespecifythepassword.
Password:
230Loginsuccessful.
RemotesystemtypeisUNIX.
Usingbinarymodetotransferfiles.
ftp>Isreports
227Entering PassiveMode(153,18,17,11,238,169)
150Herecomesthedirectory listing.
drwxr-xr-x 23027 411 4096Sep242002business
drwxr-xr-x 23027 411 4096Sep242002personal
drwxr-xr-x 23027 411 4096Sep242002school
226Directory sendOK.
ftp>quit
221Goodbye.
1.Afterthecontrolconnection iscreated,theFIPserversendsthe220(serviceready)response
onthecontrolconnection.
2.Theclientsendsitsname.
3.Theserverresponds with331(usernameisOK,password isrequired).844CHAPTER 26REMOTE LOGGING, ELECTRONIC MAIL,ANDFILETRANSFER
4.Theclientsendsthepassword (notshown).
5.Theserverresponds with230(userlog-inisOK).
6.Theclientsendsthelistcommand Osreports)tofindthelistoffilesonthedirectory named
report.
7.Nowtheserverresponds with150andopensthedataconnection.
8.Theserverthensendsthelistofthefilesordirectories (asafile)onthedataconnection.
Whenthewholelist(file)issent,theserverresponds with226(closingdataconnection)
overthecontrolconnection.
9.Theclientnowhastwochoices.ItcanusetheQUITcommand torequesttheclosingofthe
controlconnection, oritcansendanothercommand tostartanotheractivity(andeventually
openanotherdataconnection). Inourexample, theclientsendsaQUITcommand.
10.Afterreceiving theQUITcommand, theserverresponds with221(serviceclosing)andthen
closesthecontrolconnection.
Anonymous FTP
TouseFfP,auserneedsanaccount(username)andapassword ontheremoteserver.
Somesiteshaveasetoffilesavailable forpublicaccess,toenableanonymous FTP.To
accessthesefiles,auserdoesnotneedtohaveanaccountorpassword. Instead,theuser
canuseanonymous astheusernameandguestasthepassword.
Useraccesstothesystemisverylimited.Somesitesallowanonymous usersonly
asubsetofcommands. Forexample, mostsitesallowtheusertocopysomefiles,butdo
notallownavigation throughthedirectories.
Example 26.5
Weshowanexample ofanonymous FTP.Weassumethatsomepublicdataareavailable at
intemic.net.
$ftpintemic.net
Connected tointernic.net
220Serverready
Name:anonymous
331GuestloginOK,send"guest".as password'
.Password~guest .. .
-ftp>pwd"
257'I'iscurrentdirectory
jip>1s
:200-0K
150Opening ASCIImode
bin
...
ttp>close
221Goodbye
ftp>quitSECTION 26.5KEYTERMS 845
26.4RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
booksandsites.Theitemsinbrackets[...]refertothereference listattheendofthetext.
Books
Remoteloggingisdiscussed inChapter 18of[For06]andChapter26of[Ste94].
Electronic mailisdiscussed inChapter20of[For06],Section9.2of[PD03],Chapter32
of[Com04], Section7.2of[Tan03], andChapter28of[Ste94].FTPisdiscussed in
Chapter19of[For06],Chapter27of[Ste94],andChapter34of[Com04].
Sites
Thefollowing sitesarerelatedtotopicsdiscussed inthischapter.
owww.ietf.org/rfc.htrnl Information aboutRFCs
RFCs
Thefollowing RFCsarerelatedtoTELNET:
.~.:131~3~0,
393:i;4itj;'~~$.:,4~2;i·~,~4~S~$13f:529,,;~~2, ~~S;~&6;.:$99;i~6~~.b79,7()t,'<7{)2, 103""
128~1Q4,:78~}g~8,~~4;~5;~j.&4~bas~ i~~~;;;. .,.".',.:".....'....,..,,,
"," ~~~ ~, ~,,~,,~--:~-/,', 0-',-,','~~ ~',:,"o'Y' ~o~,~'oo; ;
Thefollowing RFCsarerelatedtoSMTP,POP,andIMAP:
'/196/221, 224,~18".~;ij.::5$:sl;1$( '~2~;7~(1;!f)6~ 82i;9j4~974;t041; 1081" lO~2;::1~Z5;
'1.400' ;f.4~6:·:14:26.:1£it2~;:f{j5'2;: '",<;l*i(~i:',>f7'l.5:i'¥34' '174iY 'r'~J:;j/'}67: lS6~r 1810·~();:tS':;'
':2~6:201t~;"~~~:::~~:11r2~SO:
 '2'f~2~;2OC~~';1~~:f~l~~i:~3$9::~~~~g~'~Q;:' ,"'';.;,'."',
Thefollowing RFCsarerelatedtoFTP:
..114;,133;i4j~ 16.3.,:rii:.'~~~ •.2~~.Z4i;;zS~,25~~~;~~t
 i~~h~,81~,2~l.~54:~85~41i:;414,Ai~, ;'
··430··4~;~:448;·:463;'if.~~:~18:':1J:~6:505~°00'5'S4Z~~3;~24,630:61iO;'69t·765,·91j··9S~······ ;"o:'}(;3k
 t1:S§~;'?~~8~~~~1~::;.J;;~1;;'/ ;,;:~;.~.,.~;•.;~.:·;:;·t:;;;..';;;;<';'>:. ,",.'...;..~
DNSisdiscussed in[AL98],chapter17of[For06], section9.1of[PD03],and
section7.1of[Tan03].
26.5KEYTERMS
alias
anonymous FTP
ASCIIfile
blockmode
bodycharacter mode
compressed mode
controlcharacter
controlconnection
dataconnection846CHAPTER 26REMOTE LOGGING, ELECTRONIC MAIL,ANDFILETRANSFER
defaultmode
domainname
envelope
filestructure
FileTransfer Protocol (FTP)
header
imagefile
InternetMailAccessProtocol, version4
(IMAP4)
linemode
locallog-in
localpart
message accessagent(MAA)
message transferagent(MTA)Multipurpose InternetMailExtensions
(MIME)
networkvirtualterminal (NVT)
optionnegotiation
pagestructure
PostOfficeProtocol, version3(POP3)
recordstructure
remotelog-in
SimpleMailTransferProtocol (SMTP)
streammode
suboption negotiation
terminal network(TELNET)
timesharing
useragent(VA)
26.6SUMMARY
oTELNET isaclient/server application thatallowsausertologontoaremote
machine, givingtheuseraccesstotheremotesystem.
oTELNET usesthenetworkvirtualterminal (NVT)systemtoencodecharacters on
thelocalsystem.Ontheservermachine, NVTdecodesthecharacters toaform
acceptable totheremotemachine.
oNVTusesasetofcharacters fordataandasetofcharacters forcontrol.
oInTELNET, controlcharacters areembedded inthedatastreamandpreceded by
theinterpret ascontrol(lAC)controlcharacter.
DOptionsarefeaturesthatenhancetheTELNET process.
oTELNET allowsnegotiation tosettransferconditions betweentheclientandserver
beforeandduringtheuseoftheservice.
DATELNET implementation operatesinthedefault,character, orlinemode.
1.Inthedefaultmode,theclientsendsonelineatatimetotheserver.
2.Inthecharacter mode,theclientsendsonecharacter atatimetotheserver.
3.Inthelinemode,theclientsendsonelineatatimetotheserver.
DSeveralprograms, including SMTP,POP3,andIMAP4,areusedintheInternetto
provideelectronic mailservices.
DInelectronic mail,theVAprepares themessage, createstheenvelope, andputsthe
message intheenvelope.
DInelectronic mail,themailaddressconsistsoftwoparts:alocalpart(usermailbox)
andadomainname.Theformislocalpart@domainname.
oInelectronic mail,Multipurpose InternetMailExtension (MIME)allowsthetransfer
ofmultimedia messages.
oInelectronic mail,theMTAtransfersthemailacrosstheInternet,aLAN,oraWAN.SECTION 26.7PRACTICE SET 847
oSMTPusescommands andresponses totransfermessages betweenanMTAclient
andanMTAserver.
oThestepsintransferring amailmessage are
1.Connection establishment·
2.Mailtransfer
3.Connection termination
oPostOfficeProtocol, version3(POP3)andInternetMailAccessProtocol, version4
(IMAP4) areprotocols usedforpullingmessages fromamailserver.
oOneoftheprograms usedforfiletransferintheInternetisFileTransfer Protocol
(FTP).
oFTPrequirestwoconnections fordatatransfer: acontrolconnection and adata
connection.
oFTPemploys NVTASCIIforcommunication between dissimilar systems.oPriortotheactualtransferoffiles,thefiletype,datastructure, andtransmission
modearedefinedbythe client throughthecontrolconnection.
oResponses aresentfromtheservertotheclientduringconnection establishment.
oTherearethreetypesoffiletransfer:
1.Afileiscopiedfromtheservertotheclient.
2.Afileiscopiedfromtheclienttotheserver.
3.Alistofdirectories orfilenamesissentfromtheservertotheclient.
oAnonymous FTPprovides amethodforthegeneralpublictoaccessfilesonremote
sites.
26.7PRACTICE SET
ReviewQuestions
1.Whatisthedifference betweenlocalandremotelog-ininTELNET?
2.Howarecontrolanddatacharacters distinguished inNVT?
3.Howareoptionsnegotiated inTELNET?
4.Describe theaddressing systemusedbySMTP.
5.Inelectronic mail,whatarethetasksofauseragent?
6.Inelectronic mail,whatisMIME?
7.WhydoweneedPOP3orIMAP4forelectronic mail?
8.WhatisthepurposeofFTP?
9.Describe thefunctions ofthetwoFTPconnections.
10.WhatkindsoffiletypescanFTPtransfer?
11.WhatarethethreeFTPtransmission modes?
12.Howdoesstoringafiledifferfromretrieving afile?
13.Whatisanonymous FTP?848CHAPTER 26REMOTE LOGGING, ELECTRONIC MAIL,ANDFILETRANSFER
Exercises
14.Showthesequence ofbitssentfromaclientTELNET forthebinarytransmission
of11110011 00111100 11111111.
15.IfTELNET isusingthecharacter mode,howmanycharacters aresentbackand
forthbetween theclientandservertocopyafilenamedfile1toanotherfilenamed
file2usingthecommand cpfile1file2?
16.Whatis theminimum numberofbitssentattheTCPleveltoaccomplish thetask
inExercise IS?
17.Whatistheminimum numberofbitssentatthedatalinklayerlevel(usingEthernet)
toaccomplish thetaskinExercise 15?
18.WhatistheratiooftheusefulbitstothetotalbitsinExercise 17?
19.Interpret thefollowing sequences ofcharacters (inhexadecimal) received bya
TELNET clientorserver.
a.FFFB01
b.FFFEOI
c.FFF4
d.FFF9
20.Asendersendsunformatted text.ShowtheMIMEheader.
21.AsendersendsaIPEGmessage. ShowtheMIMEheader.
22.Whyisaconnection establishment formailtransferneededifTCPhasalready
established aconnection?
23.Whyshouldtherebelimitations onanonymous FTP?Whatcouldanunscrupulous
userdo?
24.ExplainwhyFTPdoesnothaveamessage format.
Research Activities
25.Showthesequence ofcharacters exchanged between theTELNET clientandthe
servertoswitchfromthedefaultmodetothecharacter mode.
26.Showthesequence ofcharacters exchanged between theTELNET clientandthe
servertoswitchfromthedefaultmodetolinemode.
27.InSMTP,showtheconnection establishment phasefromaaa@xxx.com to
bbb@yyy.com.
28.InSMTP,showthemessage transferphasefromaaa@xxx.com tobbb@yyy.com.
Themessageis"Goodmorning myfriend."
29.InSMTP,showtheconnection termination phasefromaaa@xxx.com to
bbb@yyy.com.
30.Whatdoyouthinkwouldhappenifthecontrolconnection wereaccidentally severed
duringanFTPtransfer?SECTION 26.7PRACTICE SET 849
31.Findtheextended optionsproposed forTELNET.
32.Anotherlog-inprotocoliscalledRlogin.Findsomeinformation aboutRloginand
compare itwithTELNET.
33.Amoresecurelog-inprotocolinUNIXiscalledSecureShell(SSH).Findsome
information aboutthisprotocol.CHAPTER 27
WWWandHTTP
TheWorldWideWeb(WWW) isarepository ofinformation linkedtogether from
pointsallovertheworld.TheWWWhasauniquecombination offlexibility, portability,
anduser-friendly featuresthatdistinguish itfromotherservicesprovided bytheInternet.
TheWWWprojectwasinitiatedbyCERN(European Laboratory forParticlePhysics)
tocreateasystemtohandledistributed resources necessary forscientific research. In
thischapterwefirstdiscussissuesrelatedtotheWeb.Wethendiscussaprotocol,
HTTP,thatisusedtoretrieveinformation fromtheWeb.
27.1ARCHITECTURE
TheWWWtodayisadistributed clientJserver service,inwhichaclientusingabrowser
canaccessaserviceusingaserver.However, theserviceprovided isdistributed over
manylocations calledsites,asshowninFigure27.1.
Figure27.1Architecture ofWWW
Client
WebpageASiteA-DSiteB-
851852CHAPTER 27WWWANDHTTP
Eachsiteholdsoneormoredocuments, referredtoasWebpages.EachWebpagecan
containalinktootherpagesinthesamesiteoratothersites.Thepagescanberetrieved
andviewedbyusingbrowsers. LetusgothroughthescenarioshowninFigure27.1.The
clientneedstoseesomeinformation thatitknowsbelongstositeA.Itsendsarequest
throughitsbrowser, aprogram thatisdesigned tofetchWebdocuments. Therequest,
amongotherinformation, includestheaddressofthesiteandtheWebpage,calledthe
URL,whichwewilldiscussshortly.TheserveratsiteAfindsthedocument andsendsit
totheclient.Whentheuserviewsthedocument, shefindssomereferences tootherdocu­
ments,including aWebpageatsiteB.Thereference hastheURLforthenewsite.The
userisalsointerested inseeingthisdocument. Theclientsendsanotherrequesttothenew
site,andthenewpageisretrieved.
Client(Browser)
Avarietyofvendorsoffercommercial browsers thatinterpret anddisplayaWebdocu­
ment,andallusenearlythesamearchitecture. Eachbrowser usuallyconsistsofthree
parts:acontroller, clientprotocol, andinterpreters. Thecontroller receivesinputfrom
thekeyboard orthemouseandusestheclientprograms toaccessthedocument. After
thedocument hasbeenaccessed, thecontroller usesoneoftheinterpreters todisplaythe
document onthescreen.Theclientprotocolcanbeoneoftheprotocols described previ­
ouslysuchasFfPorHTIP(described laterinthechapter). Theinterpreter canbeHTML,
Java,orJavaScript, depending onthetypeofdocument. Wediscusstheuseofthese
interpreters basedonthedocument typelaterinthechapter(seeFigure27.2).
Figure27.2Browser
Browser
Interpreters
Server
TheWebpageisstoredattheserver.Eachtimeaclientrequestarrives,thecorresponding
document issenttotheclient.Toimproveefficiency, serversnormally storerequested
filesinacacheinmemory; memory isfastertoaccessthandisk.Aservercanalso
becomemoreefficientthroughmultithreading ormultiprocessing. Inthiscase,aserver
cananswermorethanonerequestatatime.SECTION 27.1ARCHITECTURE 853
Uniform Resource Locator
AclientthatwantstoaccessaWebpageneedstheaddress.Tofacilitate theaccessofdoc­
umentsdistributed throughout theworld,HTTPuseslocators. Theuniformresource
locator(URL)isastandardforspecifying anykindofinformation ontheInternet.The
URLdefinesfourthings:protocol, hostcomputer, port,andpath(seeFigure27.3).
Figure27.3URL
IProtocol1://IHost
Theprotocol istheclient/server program usedtoretrievethedocument. Many
different protocols canretrieveadocument; amongthemareFTPorHTTP.Themost
common todayisHTTP.
Thehostisthecomputer onwhichtheinformation islocated,although thenameof
thecomputer canbeanalias.Webpagesareusuallystoredincomputers, andcomputers
aregivenaliasnamesthatusuallybeginwiththecharacters "www".Thisisnotmandatory,
however, asthehostcanbeanynamegiventothecomputer thathoststheWebpage.
TheURLcanoptionally containtheportnumberoftheserver.Iftheportis
included, itisinsertedbetween thehostandthepath,anditisseparated fromthehost
byacolon.
Pathisthepathname ofthefilewheretheinformation islocated.Notethatthepath
canitselfcontainslashesthat,intheUNIXoperating system,separate thedirectories
fromthesubdirectories andfiles.
Cookies
TheWorldWideWebwasoriginally designed asastateless entity.Aclientsendsa
request;aserverresponds. Theirrelationship isover.TheoriginaldesignofWWW,
retrieving publicly available documents, exactly fitsthispurpose. TodaytheWebhas
otherfunctions; somearelistedhere.
I.Somewebsites needtoallowaccesstoregistered clientsonly.
2.Websites arebeingusedaselectronic storesthatallowuserstobrowsethroughthe
store,selectwanteditems,puttheminanelectronic cart,andpayattheendwitha
creditcard.
3.Somewebsites areusedasportals:theuserselectstheWebpageshewantstosee.
4.Somewebsites arejustadvertising.
Forthesepurposes, thecookiemechanism wasdevised.Wediscussed theuseofcook­
iesatthetransport layerinChapter23;wenowdiscusstheiruseinWebpages.
Creation andStorageofCookies
Thecreationandstorageofcookiesdependontheimplementation; however, theprinciple
isthesame.854CHAPTER 27WWWANDHTTP
1.Whenaserverreceivesarequestfromaclient,itstoresinformation abouttheclient
inafileorastring.Theinformation mayincludethedomainnameoftheclient,the
contentsofthecookie(information theserverhasgathered abouttheclientsuchas
name,registration number,andsoon),atimestamp, andotherinformation'depend­
ingontheimplementation.
2.Theserverincludesthecookieintheresponse thatitsendstotheclient.
3.Whentheclientreceivestheresponse, thebrowserstoresthecookieinthecookie
directory, whichissortedbythedomainservername.
UsingCookies
Whenaclientsendsarequesttoaserver,thebrowserlooksinthecookiedirectory to
seeifitcanfindacookiesentbythatserver.Iffound,thecookieisincluded inthe
request.Whentheserverreceivestherequest,itknowsthatthisisanoldclient,nota
newone.Notethatthecontentsofthecookieareneverreadbythebrowserordisclosed
totheuser.Itisacookiemadebytheserverandeatenbytheserver.Nowletusseehow
acookieisusedforthefourpreviously mentioned purposes:
1.Thesitethatrestrictsaccesstoregistered clientsonlysendsacookietotheclient
whentheclientregistersforthefirsttime.Foranyrepeated access,onlythoseclients
thatsendtheappropriate cookieareallowed.
2.Anelectronic store(e-commerce) canuseacookieforitsclientshoppers. Whena
clientselectsanitemandinsertsitintoacart,acookiethatcontains information
abouttheitem,suchasitsnumberandunitprice,issenttothebrowser. Iftheclient
selectsaseconditem,thecookieisupdatedwiththenewselection information. And
soon.Whentheclientfinishesshopping andwantstocheckout,thelastcookieis
retrieved andthetotalchargeiscalculated.
3.AWebportalusesthecookieinasimilarway.Whenauserselectsherfavorite
pages,acookieismadeandsent.Ifthesiteisaccessed again,thecookieissentto
theservertoshowwhattheclientislookingfor.
4.Acookieisalsousedbyadvertising agencies. Anadvertising agencycanplace
banneradsonsomemainwebsitethatisoftenvisitedbyusers.Theadvertising
agencysuppliesonlyaURLthatgivesthebanneraddressinsteadofthebanneritself.
Whenauservisitsthemainwebsiteandclicksontheiconofanadvertised corpora­
tion,arequestissenttotheadvertising agency.The advertising agencysendsthe
banner,aGIFfile,forexample, butitalsoincludesacookiewiththeilloftheuser.
AnyfutureuseofthebannersaddstothedatabasethatprofilestheWebbehaviorof
theuser.Theadvertising agencyhascompiled theinterestsoftheuserandcansell
thisinformation tootherparties.Thisuseofcookieshasmadethemverycontrover­
sial.Hopefully, somenewregulations willbedevisedtopreservetheprivacyofusers.
27.2WEBDOCUMENTS
Thedocuments intheWWWcanbegroupedintothreebroadcategories: static,dynamic,
andactive.Thecategory isbasedonthetimeatwhichthecontentsofthedocument are
determined.SECTION 27.2WEBDOCUMENTS 855
StaticDocuments
Staticdocuments arefixed-content documents thatarecreatedandstoredinaserver.
Theclientcangetonlyacopyofthedocument. Inotherwords,thecontents ofthefile
aredetermined whenthefileiscreated,notwhenitisused.Ofcourse,thecontents in
theservercanbechanged, buttheusercannotchangethem.Whenaclientaccesses the
document, acopyofthedocument issent.Theusercanthenuseabrowsing program to
displaythedocument (seeFigure27.4).
Figure27.4Staticdocument
Server
Client
r--
Request
StaticHTMLdocument
HTML
Hypertext Markup Language (HTML) isalanguage forcreating Webpages.The
termmarkuplanguage comesfromthebookpublishing industry. Beforeabookistype­
setandprinted,acopyeditorreadsthemanuscript andputs marks onit.Thesemarks
tellthecompositor howtoformatthetext.Forexample, ifthecopyeditorwantspartof
alinetobeprintedinboldface, heorshedrawsawavylineunderthatpart.Inthesame
way,dataforaWebpageareformatted forinterpretation byabrowser.
Letusclarifytheideawithanexample. Tomakepartofatextdisplayed inboldface
withHTML,weputbeginning andendingboldfacetags(marks)inthetext,asshown
inFigure27.5.
Figure27.5Boldface tags
IBOl~1 !!7bOld ]
<B> This isthetexttobeboldfaced.<!B>
Thetwotags<B>and</B>areinstructions forthebrowser. Whenthebrowser
seesthesetwomarks,itknowsthatthetextmust beboldfaced (seeFigure27.6).
Amarkuplanguage suchasHTMLallowsustoembedformatting instructions in
thefileitself.Theinstructions areincluded withthetext.Inthisway,anybrowsercan
readtheinstructions andformatthetextaccording tothespecificworkstation. Onemight856CHAPTER 27WWWANDHTTP
Figure27.6Effectofboldface tags
Browser
askwhywedonotusethefonnatting capabilities ofwordprocessors tocreateandsave
formatted text.Theansweristhatdifferent wordprocessors usedifferent techniques or
procedures forformatting text.Forexample, imaginethatausercreatesformatted texton
aMacintosh computer andstoresitinaWebpage.AnotheruserwhoisonanIBMcom­
puterwouldnotbeabletoreceivetheWebpagebecausethetwocomputers usedifferent
fonnatting procedures.
HTMLletsususeonlyASCIIcharacters forboththemaintextandformatting
instructions. Inthisway,everycomputer canreceivethewholedocument asanASCII
document. Themaintextisthedata,andtheformatting instructions canbeusedbythe
browsertoformatthedata.
AWebpageismadeupoftwoparts:theheadandthebody.Theheadisthefirstpart
ofaWebpage.Theheadcontains thetitleofthepageandotherparameters thatthe
browserwilluse.Theactualcontentsofapageareinthebody,whichincludesthetextand
thetags.Whereas thetextistheactualinfonnation contained inapage,thetagsdefinethe
appearance ofthedocument. EveryHTMLtagisanamefollowed byanoptionallistof
attributes, allenclosed betweenless-than andgreater-than symbols«and>).
Anattribute, ifpresent,isfollowed byanequalssignandthevalueoftheattribute.
Sometagscanbeusedalone;othersmustbeusedinpairs.Thosethatareusedinpairs
arecalledbeginning andendingtags.Thebeginning tagcanhaveattributes andvalues
andstartswiththenameofthetag.Theendingtagcannothaveattributes orvaluesbut
musthaveaslashbeforethenameofthetag.Thebrowsermakesadecision aboutthe
structure ofthetextbasedonthetags,whichareembedded intothetext.Figure27.7
showsthefonnatofatag.
Figure27.7Beginning andendingtags
<TagNarne
a.Beginning tagAttribute =Value Attribute=Value •••>
1_- <_rr_a_gN_arn_e_> 1
b.Endingtag
Onecommonly usedtagcategory isthetextformatting tagssuchas<B>and<!B>,
whichmakethetextbold;<1>and<II>,whichmakethetextitalic;and<U>and<IV>,
whichunderline thetext.SECTION 27.2WEBDOCUMENTS 857
Anotherinteresting tagcategory istheimagetag.Nontextual information suchas
digitized photosorgraphicimagesisnotaphysical partofanHTMLdocument. But
wecanuseanimagetagtopointtothefileofaphotoorimage.Theimagetagdefines
theaddress(URL)oftheimagetoberetrieved.Italsospecifies howtheimagecanbe
insertedafterretrievaL Wecanchoosefromseveralattributes. Themostcommon are
SRC(source), whichdefinesthesource(address), andALIGN, whichdefinesthealign­
mentoftheimage.TheSRCattributeisrequired. Mostbrowsers acceptimagesinthe
GIForIPEGformats. Forexample, thefollowing tagcanretrieveanimagestoredas
imagel.gif inthedirectory /bin/images:
Athirdinteresting category isthehyperlink tag,whichisneededtolinkdocuments
together. Anyitem(word,phrase,paragraph, orimage)canrefertoanotherdocument
throughamechanism calledananchor.Theanchorisdefinedby<A...>and<!A>tags,
andtheanchored itemusestheURLtorefertoanotherdocument. Whenthedocument
isdisplayed, theanchored itemisunderlined, blinking, orboldfaced. Theusercanclick
ontheanchored itemtogotoanotherdocument, whichmayormaynotbestoredon
thesameserverastheoriginaldocument. Thereference phraseisembedded betweenthe
beginning andendingtags.Thebeginning tagcanhaveseveralattributes, buttheone
required isHREF(hyperlink reference), whichdefinestheaddress(URL)ofthelinked
document. Forexample, thelinktotheauthorofabookcanbe
WhatappearsinthetextisthewordAuthor,onwhichtheusercanclicktogotothe
author'sWebpage.
Dynamic Documents
Adynamic document iscreatedbyaWebserverwhenever abrowserrequeststhedoc­
ument.Whenarequestarrives,theWebserverrunsanapplication program orascript
thatcreatesthedynamic document. Theserverreturnstheoutputoftheprogram or
scriptasaresponse tothebrowserthatrequested thedocument. Because afreshdocu­
mentiscreatedforeachrequest,thecontents ofadynamic document canvaryfrom
onerequesttoanother.Averysimpleexample ofadynamic document istheretrieval
ofthetimeanddatefromaserver.Timeanddatearekindsofinformation thatare
dynamic inthattheychangefrommomenttomoment. Theclientcanasktheserverto
runaprogram suchasthedateprogram inUNIXandsendtheresultoftheprogram to
theclient.
Common Gateway Interface (CGI)
TheCommon Gateway Interface (CGI)isatechnology thatcreatesandhandles
dynamic documents. CGIisasetofstandards thatdefines how adynamic document is
written,howdataareinputtotheprogram, andhowtheoutputresultisused.858CHAPTER 27WWWANDHTTP
COlisnotanewlanguage; instead,itallowsprogrammers touseanyofseveral
languages suchasC,C++,BoumeShell,KomShell,CShell,Tcl,orPerl.Theonly
thingthatCGIdefinesisasetofrulesandtennsthattheprogrammer mustfollow.
Thetenncommon inCOlindicates thatthestandard definesasetofrulesthatis
common toanylanguage orplatfonn. Thetenngateway heremeansthataCOlpro­
gramcanbeusedtoaccessotherresources suchasdatabases, graphical packages, and
soon.Thetenninterface heremeansthatthereisasetofpredefined tenns,variables,
calls,andsoon thatcanbeusedinanyCOlprogram. ACOlprogram initssimplest
fonniscodewritteninoneofthelanguages supporting COLAnyprogrammer whocan
encodeasequence ofthoughts inaprogram andknowsthesyntaxofoneoftheabove­
mentioned languages canwriteasimpleCGIprogram. Figure27.8illustrates thesteps
increatingadynamic program usingCOltechnology.
Figure27.8Dynamic document usingCGI
Client
Request
Dynamic HTMLdocumentServeri
Program
Input Intraditional programming, whenaprogram isexecuted, parameters canbe
passedtotheprogram. Parameter passingallowstheprogrammer towriteageneric
program thatcanbeusedindifferent situations. Forexample, agenericcopyprogram
canbewrittentocopyanyfiletoanother.Ausercanusetheprogram tocopyafile
namedxtoanotherfilenamedybypassingxandyasparameters.
Theinputfromabrowsertoaserverissentbyusingaform.Iftheinfonnation ina
fonnissmall(suchasaword),itcanbeappended totheURLafteraquestionmark.For
example, thefollowing URLiscarryingfonninfonnation (23,avalue):
http://www.deanzalcgi-binlprog.pl?23
WhentheserverreceivestheURL,itusesthepartoftheURLbeforethequestion
marktoaccesstheprogram toberun,anditinterprets thepartafterthequestion mark
(23)astheinputsentbytheclient.Itstoresthisstringinavariable. WhentheCGI
program isexecuted, itcanaccessthisvalue.
Iftheinputfromabrowseristoolongtofitinthequerystring,thebrowsercanask
theservertosendafonn.Thebrowsercanthenfillthefonnwiththeinputdataand
sendittotheserver.Theinfonnation inthefonncanbeusedastheinputtotheCOl
program.SECTION 27.2ltEBDOCUMENTS 859
Output ThewholeideaofCGIistoexecuteaCGIprogram attheserversiteand
sendtheoutputtotheclient(browser). Theoutputisusuallyplaintextoratextwith
HTMLstructures; however, theoutputcanbeavarietyofotherthings.Itcanbegraphics
orbinarydata,astatuscode,instructions tothebrowsertocachetheresult,orinstruc­
tionstotheservertosendan existing document insteadoftheactualoutput.
Tolettheclientknowaboutthetypeofdocument sent,aCGIprogram creates
headers. Asamatteroffact,theoutputoftheCGIprogram alwaysconsistsoftwo
parts:aheaderandabody.Theheaderisseparated byablanklinefromthebody.This
meansanyCGIprogram createsfirsttheheader,thenablankline,andthenthebody.
Although theheaderandtheblanklinearenotshownonthebrowserscreen,theheader
isusedbythebrowsertointerpretthebody.
Scripting Technologies forDynamic Documents
TheproblemwithCGItechnology istheinefficiency thatresultsifpartofthedynamic
document thatistobecreatedisfixedandnotchanging fromrequesttorequest.For
example, assumethatweneedtoretrievealistofspareparts,theiravailability, and
pricesforaspecificcarbrand.Although theavailability andpricesvaryfromtimeto
time,thename,description, andthepictureofthepartsarefixed.IfweuseCGI,the
programmustcreateanentiredocument eachtimearequestismade.Thesolutionisto
createafilecontaining thefixedpartofthedocument usingHTMLandembedascript,
asourcecode,thatcanberunbytheservertoprovidethevaryingavailability andprice
section.Figure27.9showstheidea.
Figure27.9Dynamic document usingserver-site script
Client
f""--
RequestServer
~
Dynamic HTMLdocument1-------ir;:;t1 Runthescript(8)
insidetheHTML
document
Afewtechnologies havebeeninvolvedincreatingdynamicdocuments usingscripts.
Amongthemostcommon areHypertext Preprocessor (pHP),whichusesthePerllan­
guage;JavaServerPages(JSP),whichusestheJavalanguage forscripting; Active
ServerPages(ASP),aMicrosoft productwhichusesVisualBasiclanguage forscripting;
andColdFusion, whichembedsSQLdatabasequeriesintheHTMLdocument.
Dynamic documents aresometimes referredtoas
server-site dynamic documents.860CHAPTER 27WWWANDHTTP
ActiveDocuments
Formanyapplications, weneedaprogram orascripttoberunattheclientsite.These
arecalledactivedocuments. Forexample, supposewewanttorunaprogram that
createsanimated graphics onthescreenoraprogram thatinteracts withtheuser.The
program definitely needstoberunatthe client sitewheretheanimation orinteraction
takesplace.Whenabrowserrequestsanactivedocument, theserversendsacopyofthe
document orascript.Thedocument isthenrunattheclient(browser) site.
JavaApplets
Onewaytocreateanactivedocument istouseJavaapplets.Javaisacombination ofa
high-level programming language, arun-time environment, andaclasslibrarythat
allowsaprogrammer towriteanactivedocument (anapplet)and abrowsertorunit.It
canalsobeastand-alone program thatdoesn'tuseabrowser.
AnappletisaprogramwritteninJavaontheserver.Itiscompiled andreadytobe
run.Thedocument isinbyte-code (binary)format.Theclientprocess(browser) creates
aninstanceofthisappletandrunsit.AJavaappletcanberunbythebrowserintwo
ways.Inthefirstmethod,thebrowsercandirectlyrequesttheJavaappletprogram in
theURLandreceivetheappletinbinaryform.Inthesecondmethod,thebrowsercan
retrieveandrunanHTMLfilethathasembedded theaddressoftheappletasatag.Fig­
ure27.10showshowJavaappletsareusedinthefirstmethod; the secondissimilarbut
needstwotransactions.
Figure27.10Activedocument usingJavaapplet
Client
--
RequestServer-
~-----l Applett------I
Runtheapplet
togettheresult
Result
JavaScript
Theideaofscriptsindynamic documents canalsobeusedforactivedocuments. Ifthe
activepartofthedocument issmall,itcanbewritteninascripting language; thenitcan
beinterpreted andrunbytheclientatthesametime.Thescriptisinsourcecode(text)
andnotinbinaryform.Thescripting technology usedinthiscaseisusuallyJavaScript.
JavaScript, whichbearsasmallresemblance toJava,isaveryhighlevelscripting
language developed forthispurpose.Figure27.11showshowJavaScript isusedtocreate
anactivedocument.SECTION 27.3HTTP 861
Figure27.11Activedocument usingclient-site script
Server
Client
Request
RuntheJavaScript (JS)
togettheresult
Result
Activedocuments aresometimes referredtoasclient-site dynamic documents.
27.3HTTP
TheHypertext Transfer Protocol (HTTP)isaprotocolusedmainlytoaccessdataon
theWorldWideWeb.HTTPfunctions asacombination ofFTPandSMTP.Itissimilarto
FfPbecauseittransfers filesandusestheservicesofTCP.However, itismuchsimpler
thanFfPbecauseitusesonlyoneTCPconnection. Thereisnoseparatecontrolconnec­
tion;onlydataaretransferred betweentheclientandtheserver.
HTTPislikeSMTPbecausethedatatransferred betweentheclientandtheserver
looklikeSMTPmessages. Inaddition, theformatofthemessages iscontrolled by
MIME-like headers.UnlikeSMTP,theHTTPmessages arenotdestinedtobereadby
humans; theyarereadandinterpreted bytheHTTPserverandHTTPclient(browser).
SMTPmessages arestoredandforwarded, butHTTPmessages aredelivered immedi­
ately.Thecommands fromtheclienttotheserverareembedded inarequestmessage.
Thecontentsoftherequested fileorotherinformation areembedded inaresponse
message. HTTPusestheservicesofTCPonwell-known port80.
HTTPusestheservicesofTCPonwell-known port80.
HTTPTransaction
Figure27.12illustrates theHTTPtransaction between theclientandserver.Although
HTTPusestheservicesofTCP,HTTPitselfisastatelessprotocol. Theclientinitializes
thetransaction bysendingarequestmessage. Theserverrepliesbysendingaresponse.
Messages
Theformatsoftherequestandresponse messages aresimilar;bothareshowninFig­
ure27.13.Arequestmessageconsistsofarequestline,aheader,andsometimes abody.
Aresponse message consistsofastatusline,aheader,andsometimes abody.862CHAPTER 27WWWANDHTTP
Figure27.12HTTPtransaction
Client
Request
Figure27.13Requestandresponse messages
Headers
Ablankline
RequestmessageServer
===u:u::u
E::::l-
Ablankline
Response message
RequestandStatusLinesThefirstlineinarequestmessageiscalledarequestline;
thefirstlineintheresponse message iscalledthestatusline.Thereisonecommon
field,asshowninFigure27.14.
Figure27.14Requestandstatuslines
Space Space
RequesttypeI~ ~IHTTPversion
a.Request line
Space Space
I~ ~I HTTPversion Statusphrase
b.StatuslineSECTION 27.3HTTP 863
oRequest type.Thisfieldisusedintherequestmessage. Inversion1.1ofHTTP,
severalrequesttypesaredefined.Therequesttypeiscategorized intomethods as
definedinTable27.1.
Table27.1Methods
Method Action
GET Requests adocument fromtheserver
HEAD Requests information aboutadocument butnotthedocument itself
POST Sendssomeinformation fromtheclienttotheserver
PUT Sendsadocument fromtheservertotheclient
TRACE Echoestheincoming request
CONNECT Reserved
OPTION Inquiresaboutavailable options
oURL.Wediscussed theURLearlierinthechapter.
oVersion. ThemostcurrentversionofHTTPis1.1.
oStatuscode.Thisfieldisusedintheresponse message. Thestatuscodefieldis
similartothoseintheFTPandtheSMTPprotocols. Itconsistsofthreedigits.
Whereas thecodesinthe100rangeareonlyinformational, thecodesinthe200
rangeindicateasuccessful request.Thecodesinthe300rangeredirecttheclient
toanotherURL,andthecodesinthe400rangeindicateanerrorattheclientsite.
Finally,thecodesinthe500rangeindicateanerrorattheserversite.Welistthe
mostcommon codesinTable27.2.
oStatusphrase. Thisfieldisusedintheresponse message.Itexplains thestatus
codeintextform.Table27.2alsogivesthestatusphrase.
Table27.2Statuscodes
Code Phrase Description
Informational
100Continue Theinitialpartoftherequesthasbeenreceived, andthe
clientmaycontinue withitsrequest.
101Switching Theserveriscomplying withaclientrequestto switch
protocols definedintheupgradeheader.
Success
200OK Therequestissuccessful.
201Created AnewURLiscreated.
202Accepted Therequestisaccepted, butitisnotimmediately actedupon.
204Nocontent Thereisnocontentinthebody.864CHAPTER 27WWWANDHITP
Table27.2Statuscodes(continued)
Code Phrase Description
Redirection
301Movedpermanently Therequested URLisnolongerusedbytheserver.
302Movedtemporarily Therequested URLhasmovedtemporarily.
304Notmodified Thedocument hasnotbeenmodified.
ClientError
400Badrequest Thereisasyntaxerrorintherequest.
401Unauthorized Therequestlacksproperauthorization.
403Forbidden Serviceisdenied.
404Notfound Thedocument isnotfound.
405Methodnotallowed Themethodisnot supported inthisURL.
406Notacceptable Theformatrequested isnotacceptable.
ServerError
500InternalservererrorThereisanerror,suchasacrash,attheserversite.
501Notimplemented Theactionrequested cannotbeperformed.
503Serviceunavailable Theserviceistemporarily unavailable, butmayberequested
inthefuture.
Header Theheaderexchanges additional information betweentheclientandtheserver.
Forexample, theclientcanrequestthatthedocument besentinaspecialformat,orthe
servercansendextrainformation aboutthedocument. Theheadercanconsistofoneor
moreheaderlines.Eachheaderlinehasaheadername,acolon,aspace,andaheader
value(seeFigure27.15).Wewillshowsomeheaderlinesintheexamples attheendof
thischapter.Aheaderlinebelongstooneoffourcategories: generalheader,request
header,response header,andentityheader.Arequestmessage cancontainonlygen­
eral,request,andentityheaders.Aresponse message, ontheotherhand,cancontainonly
general,response, andentityheaders.
Figure27.15Headerformat
Space
IHeadernamelOtIHeadervalueI
oGeneralheaderThegeneralheadergivesgeneralinformation aboutthemessage
andcanbepresentinbotharequestandaresponse. Table27.3listssomegeneral
headerswiththeirdescriptions.SECTION 27.3HTTP 865
Table27.3Generalheaders
Header Description
Cache-control Specifies infonnation aboutcaching
Connection Showswhethertheconnection shouldbeclosedornot
Date Showsthecurrentdate
MIME-version ShowstheMIMEversionused
Upgrade Specifies thepreferred communication protocol
oRequest headerTherequestheadercanbepresentonlyinarequestmessage.It
specifies theclient'sconfiguration andtheclient'spreferred document format.See
Table27.4foralistofsomerequestheadersandtheirdescriptions.
Table27.4Requestheaders
Header Description
Accept Showsthemediumfonnattheclientcanaccept
Accept-charset Showsthecharacter settheclientcanhandle
Accept-encoding Showstheencoding schemetheclientcanhandle
Accept-language Showsthelanguage theclientcanaccept
Authorization Showswhatpennissions theclienthas
From Showsthee-mail addressoftheuser
Host Showsthehostandportnumberoftheserver
If-modified-since Sendsthedocument ifnewerthanspecified date
If-match Sendsthedocument onlyifitmatchesgiventag
If-non-match Sendsthedocument onlyifitdoesnotmatchgiventag
~'-'-_._-- -- _._---.__.._-
If-range Sendsonlytheportionofthedocument thatismissing
If-unmodified-since Sendsthedocument ifnotchanged sincespecified date
Referrer Specifies theURLofthelinkeddocument
User-agent Identifies theclientprogram
oResponse headerTheresponse headercanbepresentonlyinaresponse message.
Itspecifies theserver'sconfiguration andspecialinformation abouttherequest.
SeeTable27.5foralistofsomeresponse headerswiththeirdescriptions.
Table27.5Response headers
Header Description
Accept-range Showsifserveracceptstherangerequested byclient
Age Showstheageofthe document
Public Showsthesupported listofmethods
Retry-after Specifies thedateafterwhichtheserver isavailable
Server Showstheservernameandversionnumber866CHAPTER 27WWWANDHTTP
oEntityheaderTheentityheadergivesinfonnation aboutthebodyofthedocu­
ment.Although itismostlypresentinresponse messages, somerequestmessages,
suchasPOSTorPUTmethods, thatcontainabodyalsousethistypeofheader.
SeeTable27.6foralistofsomeentityheadersandtheirdescriptions.
Table27.6Entityheaders
Header Description
Allow Listsvalidmethods thatcanbeusedwithaURL
Content-encoding Specifies theencoding scheme
Content-language Specifies thelanguage
Content-length Showsthelengthofthedocument
Content-range Specifies therangeofthedocument
Content-type Specifies themediumtype
Etag Givesanentitytag
Expires Givesthedateandtimewhencontentsmaychange
Last-modified Givesthedateandtimeofthelastchange
Location Specifies thelocationofthecreatedormoveddocument
BodyThebodycanbepresentinarequestorresponse message. Usually,itcontains
thedocument tobesentorreceived.
Example 27.1
Thisexample retrieves adocument. WeusetheGETmethodtoretrieveanimagewiththe
path/usr/bin/imagel. Therequestlineshowsthemethod(GET),theURL,andtheHTTPver­
sion(1.1).TheheaderhastwolinesthatshowthattheclientcanacceptimagesintheGIFor
JPEGformat.Therequestdoesnothaveabody.Theresponse message containsthestatusline
andfourlinesofheader.Theheaderlinesdefinethedate,server,MIMEversion,andlengthofthe
document. Thebodyofthedocument followstheheader(seeFigure27.16).
Figure27.16Example 27.1
Servercrtlen =g~
cu:::u::J
E::IRequest(GETmethod) -=p=
GETlusrlbinlimage1 HTTP/l.l
Accept:image/gif
Accept:image/jpeg
HTIP/l.l 200OK
Date:Mon,07-Jan-05 13:15:14 GMT
Server:Challenger
MIME-version: l.0
Content-length: 2048
(Bodyofthedocument)
ResponseSECTION 27.3HTTP 867
Example 27.2
Inthisexample, theclientwantstosenddatatotheserver.WeusethePOSTmethod.Therequest
lineshowsthemethod(POST), URL,andHTTPversion(1.1).Therearefourlinesofheaders.
Therequestbodycontains theinputinformation. Theresponse message contains thestatusline
andfourlinesofheaders.Thecreateddocument, whichisaCGIdocument, isincluded asthebody
(seeFigure27.17).
Figure27.17 Example 27.2
Request(POSTmethod)
POST/cgi-binldoc.pl HTIP/1.l
Accept:*/*
Accept:image/gif
I-----t Accept:image/jpeg
Content-length: 50
(Inputinformation)
HTTP/l.1 200OK
Date:Mon,07-Jan-02 13:15:14 GMT
Server:Challenger
~---t MIME-version: 1.0
Content-length: 2000
(Bodyofthedocument)
Response
Example 27.3
HTTPusesASCIIcharacters. AclientcandirectlyconnecttoaserverusingTELNET, which
logsintoport80.Thenextthreelinesshowthattheconnection issuccessful.
Wethentypethreelines.Thefirstshowstherequestline(GETmethod), thesecondisthe
header(defining thehost),thethirdisablank,terminating therequest.
Theserverresponse issevenlinesstartingwiththestatusline.Theblanklineattheendtermi­
natestheserverresponse. Thefileof14,230linesisreceivedaftertheblankline(notshownhere).
Thelastlineistheoutputbytheclient.
$teinetwww.mhhe.com 80
Trying198.45.24.104 ...
Connected towww.mhhe.com (198.45.24.104).
Escapecharacter is11\]'.
GET/engcslcompscilforouzan HTTP/I.t
From:forouzanbehrouz@fbda.edu
HTTP/t.l 200OK
Date:Thu,28Oct200416:27:46 GMT
Server:Apache/l.3.9 (Unix)ApacheJServ/1.1.2 PHP/4.1.2 PHP/3.0.18
MIME-version: 1.0
Content-Type:text/html868CHAPTER 27WWWANDHTTP
Last-modified: Friday,15-0ct-04 02:11:31 GMT
Content-length: 14230
Connection closedbyforeignhost.
Persistent VersusNonpersistent Connection
HTTPpriortoversion1.1specified anonpersistent connection, whileapersistent con­
nectionisthedefaultinversion1.1.
Nonpersistent Connection
Inanonpersistent connection, oneTCPconnection ismadeforeachrequest/response.
Thefollowing liststhestepsinthisstrategy:
1.TheclientopensaTCPconnection andsendsarequest.
2.Theserversendstheresponse andclosestheconnection.
3.Theclientreadsthedatauntilitencounters anend-of-file marker;itthenclosesthe
connection.
Inthisstrategy,forNdifferent picturesindifferent files,theconnection mustbeopened
andclosedNtimes.Thenonpersistent strategyimposes highoverhead ontheserver
becausetheserverneedsNdifferent buffersandrequiresaslowstartprocedure each
timeaconnection isopened.
Persistent Connection
HTTPversion1.1specifiesapersistent connection bydefault.Inapersistent connection,
theserverleavestheconnection openformorerequestsaftersendingaresponse. The
servercanclosetheconnection attherequestofaclientorifatime-outhasbeenreached.
Thesenderusuallysendsthelengthofthedatawitheachresponse. However, thereare
someoccasions whenthesenderdoesnotknowthelengthofthedata.Thisisthecase
whenadocument iscreateddynamically oractively.Inthesecases,theserverinforms
theclientthatthelengthisnotknownandclosestheconnection aftersendingthedataso
theclientknowsthattheendofthedatahasbeenreached.
HTTPversion1.1specifies apersistent connection bydefault.
ProxyServer
HTTPsupports proxyservers. Aproxyserverisacomputer thatkeepscopiesof
responses torecentrequests. TheHTTPclientsendsarequesttotheproxyserver.The
proxyserverchecksitscache.Iftheresponse isnotstoredinthecache,theproxy
serversendstherequesttothecorresponding server.Incoming responses aresenttothe
proxyserverandstoredforfuturerequestsfromotherclients.
Theproxyserverreducestheloadontheoriginalserver,decreases traffic,and
improves latency.However, tousetheproxyserver,theclientmustbeconfigured to
accesstheproxyinsteadofthetargetserver.SECTION 27.5KEYTERMS 869
27.4RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
booksandsites.Theitemsinbrackets[...]refertothereference listattheendofthetext.
Books
HTTPisdiscussed inChapters 13and14of[Ste96],Section9.3of[PD03],Chapter35
of[Com04], andSection7.3of[Tan03].
Sites
Thefollowing sitesarerelatedtotopicsdiscussed inthischapter.
owww.ietf.org/rfc.html Information aboutRFCs
RFCs
Thefollowing RFCsarerelatedtoWWW:
1614,1630,1737,1738
Thefollowing RFCsarerelatedtoHTTP:
2068,2109
27.5KEYTERMS
activedocument
ActiveServerPages(ASP)
applet
browser
ColdFusion
Common Gateway Interface (CGI)
dynamic document
entityheader
generalheader
host
Hypertext MarkupLanguage
(HTML)
Hypertext Preprocessor (PHP)
Hypertext TransferProtocol (HTTP)
Java
JavaScriptJavaServerPages(JSP)
nonpersistent connection
path
persistent connection
proxyserver
requestheader
requestline
requesttype
response header
staticdocument
statuscode
statusline
tag
uniformresource locator(URL)
Web
WorldWideWeb(WWW)870CHAPTER 27WWWANDHITP
27.6SUMMARY
oTheWorldWideWeb(WWW) isarepository ofinformation linkedtogetherfrom
pointsallovertheworld.
oHypertexts aredocuments linkedtooneanotherthroughtheconceptofpointers.
oBrowsers interpret anddisplayaWebdocument.
oAbrowserconsistsofacontroller, clientprograms, andinterpreters.
oAWebdocument canbeclassified asstatic,dynamic, oractive.
oAstaticdocument isoneinwhichthecontents arefixedandstoredinaserver.The
clientcanmakenochangesintheserverdocument.
oHypertext MarkupLanguage (HTML) isalanguage usedtocreatestaticWebpages.
oAnybrowser canreadformatting instructions (tags)embedded inanHTML
document.
oTagsprovidestructure toadocument, definetitlesandheaders,formattext,control
thedataflow,insertfigures,linkdifferent documents together, anddefineexecut­
ablecode.
oAdynamic Webdocument iscreatedbyaserveronlyatabrowserrequest.
oTheCommon Gateway Interface (CGI)isastandard forcreating andhandling
dynamic Webdocuments.
oACGIprogram withitsembedded CGIinterface tagscanbewritteninalanguage
suchasC,C++,ShellScript,orPerl.
oAnactivedocument isacopyofaprogram retrieved bytheclientandrunatthe
clientsite.
oJavaisacombination ofahigh-level programming language, arun-time environ­
ment,andaclasslibrarythatallowsaprogrammer towriteanactivedocument and
abrowsertorunit.
oJavaisusedtocreateapplets(smallapplication programs).
oTheHypertext Transfer Protocol (HTTP)isthemainprotocol usedtoaccessdata
ontheWorldWideWeb(WWW).
oHTTPusesaTCPconnection totransferfiles.
oAnHTTPmessage issimilarinformtoanSMTPmessage.
oTheHTTPrequestlineconsistsofarequesttype,aURL,andtheHTTPversion
number.
oTheuniformresource locator(URL)consistsofamethod,hostcomputer, optional
portnumber,andpathnametolocateinformation ontheWWW.
oTheHTTPrequesttypeormethodistheactualcommand orrequestissuedbythe
clienttotheserver.
oThestatuslineconsistsoftheHTTPversionnumber, astatuscode,andastatus
phrase.
oTheHTTPstatuscoderelaysgeneralinformation, information relatedtoasuccessful
request,redirection information, orerrorinformation.
oTheHTTPheaderrelaysadditional information between theclientandserver.SECTION 27.7PRACTICE SET 871
DAnHTTPheaderconsistsofaheadernameandaheadervalue.
DAnHTTPgeneralheadergivesgeneralinformation abouttherequestorresponse
message.
DAnHTTPrequestheaderspecifies aclient'sconfiguration andpreferred document
format.
DAnHTTPresponse headerspecifies aserver'sconfiguration andspecialinformation
abouttherequest.
DAnHTTPentityheaderprovides information aboutthebody ofadocument.
DHTTP,version1.1,specifies apersistent connection.
DAproxyserverkeepscopiesofresponses torecentrequests.
27.7PRACTICE SET
ReviewQuestions
1.HowisHTTPrelatedtoWWW?
2.HowisHTTPsimilartoSMTP?
3.HowisHTTPsimilartoFTP?
4.WhatisaURLandwhatareitscomponents?
5.WhatisaproxyserverandhowisitrelatedtoHTTP?
6.Namethecommon threecomponents ofabrowser.
7.WhatarethethreetypesofWebdocuments?
8.WhatdoesHTMLstandforandwhatisitsfunction?
9.Whatisthedifference between anactivedocument andadynamic document?
10.WhatdoesCGIstandforandwhatisitsfunction?
11.Describe therelationship between Javaandanactivedocument.
Exercises
12.Wherewilleachfigurebeshownonthescreen?
Lookatthefollowing picture:
thentellmewhatyoufeel:
<IMGSRC="PictureslFunnyl.gif" ALIGN=middle>
<lMGSRC="Pictures/Funny2.gif" ALIGN=bottom>
<B>Whatisyourfeeling?<IE>
13.Showtheeffectofthefollowing HTMLsegment.
Thepublisher ofthisbookis<AHREF="www.mhhe">
McGraw-Hill Publisher <fA>
14.Showarequestthatretrieves thedocument /usr/users/doc/docl. Useatleasttwo
generalheaders, tworequest headers, andoneentityheader.
15.Showtheresponse toExercise 14forasuccessful request.
16.Showtheresponse toExercise 14foradocument thathaspermanently movedto
/usr/deads/doc1.872CHAPTER 27WWWANDHTTP
17.Showtheresponse toExercise 14ifthereisasyntaxerrorintherequest.
18.ShowtheresponsetoExercise 14iftheclientisunauthorized toaccessthedocument.
19.Showarequestthatasksforinformation aboutadocument at/bin/users/file. Useat
leasttwogeneralheadersandonerequestheader.
20.Showtheresponse toExercise 19forasuccessful request.
21.Showtherequesttocopythefileatlocation/bin/usr/bin/file 1to/bin/file1.
22.Showtheresponse toExercise 21.
23.Showtherequesttodeletethefileatlocation/bin/file!.
24.Showtheresponse toExercise 23.
25.Showarequesttoretrievethefileatlocation/bin/etc/file!. Theclientneedsthe
document onlyifitwasmodified afterJanuary23,1999.
26.Showtheresponse toExercise 25.
27.Showarequesttoretrievethefileatlocation/bin/etc/filel. Theclientshouldiden­
tify itself.
28.Showtheresponse toExercise 27.
29.Showarequesttostoreafileatlocation/bin/letter. Theclientidentifies thetypes
ofdocuments itcanaccept.
30.Showtheresponse toExercise 29.Theresponse showstheageofthedocument as
wellasthedateandtimewhenthecontentsmaychange.CHAPTER 28
Network Management: SNMP
Wecandefinenetwork management asmonitoring, testing,configuring, andtrouble­
shooting network components tomeetasetofrequirements definedbyanorganiza­
tion.Theserequirements includethesmooth,efficient operation ofthenetwork that
provides thepredefined qualityofserviceforusers.Toaccomplish thistask,anetwork
management systemuseshardware, software, andhumans. Inthischapter,firstwe
brieflydiscussthefunctions ofanetwork management system.Thenweconcentrate
onthemostcommon management system,theSimpleNetwork Management Protocol
(SNMP).
28.1NETWORK MANAGEMENT SYSTEM
Wecansaythatthefunctions performed byanetwork management systemcanbe
dividedintofivebroadcategories: configuration management, faultmanagement, per­
formance management, securitymanagement, andaccounting management, asshown
inFigure28.1.
Figure28.1Functions ofanetworkmanagement system
Response timeFunctions ofanetwork
management system
I
I I I I I
Configuration Fault Performance Security Accounting
management management management management management
~Reconfiguration ~Reactive -Capacity
'--Documentation '--Proactive f--Traffic
~Throughput
'--,
873874CHAPTER 28NETWORK MANAGEMENT: SNMP
Configuration Management
Alargenetworkisusuallymadeupofhundreds ofentitiesthatarephysically orlogically
connected tooneanother.Theseentitieshaveaninitialconfiguration whenthenetwork
issetup,butcanchangewithtime.Desktop computers maybereplaced byothers;
application software maybeupdatedtoanewerversion;andusersmaymovefromone
grouptoanother.Theconfiguration management systemmustknow,atanytime,the
statusofeachentityanditsrelationtootherentities.Configuration management can
bedividedintotwosubsystems: reconfiguration anddocumentation.
Reconfiguration
Reconfiguration, whichmeansadjusting thenetworkcomponents andfeatures,canbea
dailyoccurrence inalargenetwork. Therearethreetypesofreconfiguration: hardware
reconfiguration, softwarereconfiguration, anduser-account reconfiguration.
Hardware reconfiguration coversallchangestothe hardware. Forexample, adesk­
topcomputer mayneedtobereplaced. Aroutermayneedtobemovedtoanotherpart
ofthenetwork. Asubnetwork maybeaddedorremoved fromthenetwork. Allthese
needthetimeandattention ofnetworkmanagement. Inalargenetwork, theremustbe
specialized personnel trainedforquickandefficienthardware reconfiguration. Unfortu­
nately,thistypeofreconfiguration cannotbeautomated andmustbemanually handled
casebycase.
Software reconfiguration coversallchanges tothesoftware. Forexample, new
software mayneedtobeinstalled onserversorclients.Anoperating systemmayneed
updating. Fortunately, mostsoftware reconfiguration canbeautomated. Forexample,
updating anapplication onsomeorallclientscanbeelectronically downloaded from
theserver.
User-account reconfiguration isnotsimplyaddingordeletingusersonasystem.
Youmustalsoconsider theuserprivileges, bothasanindividual andasamemberofa
group.Forexample, ausermayhavereadandwritepermission withregardtosome
files,butonlyreadpermission withregardtootherfiles.User-account reconfiguration
canbe,tosomeextent,automated. Forexample, inacollegeoruniversity, atthebegin­
ningofeachquarterorsemester, newstudentsareaddedtothesystem.Thestudentsare
normally groupedaccording tothecoursestheytakeorthemajorstheypursue.
Documentation
Theoriginalnetwork configuration andeachsubsequent changemustberecorded
meticulously. Thismeansthattheremustbedocumentation forhardware, software, and
useraccounts.
Hardware documentation normally involves twosetsofdocuments: mapsand
specifications. Mapstrackeachpieceofhardware anditsconnection tothenetwork.
Therecanbeonegeneralmapthatshowsthelogicalrelationship betweeneachsubnet­
work.Therecanalsobeasecondgeneralmapthatshowsthephysicallocationofeach
subnetwork. Foreachsubnetwork, then,thereisoneormoremapsthatshowallpieces
ofequipment. Themapsusesomekindofstandardization tobeeasilyreadandunder­
stoodbycurrentandfuturepersonnel. Mapsarenotenoughperse.Eachpieceofhard­
warealsoneedstobedocumented. Theremustbeasetofspecifications foreachpieceSECTION 28.1NETWORK MANAGEMENT SYSTEM 875
ofhardware connected tothenetwork. Thesespecifications mustincludeinformation
suchashardware type,serialnumber, vendor(address andphonenumber), timeof
purchase, andwarranty information.
Allsoftware mustalsobedocumented. Software documentation includesinforma­
tionsuchasthesoftwaretype,theversion,thetimeinstalled, andthelicenseagreement.
Mostoperating systemshaveautilitythatallowsthedocumentation ofuseraccounts
andtheirprivileges. Themanagement mustmakesurethatthefileswiththisinformation
areupdatedandsecured.Someoperating systemsrecordaccessprivileges intwodocu­
ments;oneshowsallfilesandaccesstypesforeachuser;theothershowsthelistofusers
thathaveaparticular accesstoafile.
FaultManagement
Complex networks todayaremadeupofhundreds andsometimes thousands ofcompo­
nents.Properoperation ofthenetworkdependsontheproperoperation ofeachcomponent
individually andinrelationtoeachother.Faultmanagement istheareaofnetwork
management thathandlesthisissue.
Aneffective faultmanagement systemhastwosubsystems: reactivefaultmanage­
mentandproactive faultmanagement.
Reactive FaultManagement
Areactivefaultmanagement systemisresponsible fordetecting, isolating, correcting,
andrecording faults.Ithandlesshort-termsolutions tofaults.
Thefirststeptakenbyareactivefaultmanagement systemistodetecttheexact
locationofthefault.Afaultisdefinedasanabnormal condition inthesystem.Whena
faultoccurs,eitherthesystemstopsworkingproperly orthesystemcreatesexcessive
errors. A goodexampleofafaultisadamaged communication medium. Thisfaultmay
interrupt communication orproduceexcessive errors.
Thenextsteptakenbyareactivefaultmanagement systemistoisolatethefault.A
fault,ifisolated, usuallyaffectsonlyafewusers.Afterisolation, theaffectedusersare
immediately notifiedandgivenanestimated timeofcorrection.
Thethirdstepistocorrectthefault.Thismayinvolvereplacing orrepairing the
faultycomponent(s).
Afterthefaultiscorrected, itmustbedocumented. Therecordshouldshowthe
exactlocationofthefault,thepossiblecause,theactionoractionstakentocorrectthe
fault,thecost,andtimeittookforeachstep.Documentation isextremely important for
severalreasons:
oTheproblemmayrecur.Documentation canhelpthepresentorfutureadministrator
ortechnician solveasimilarproblem.
oThefrequency ofthesamekindoffailureisanindication ofamajorproblem in
thesystem.Ifafaulthappensfrequently inonecomponent, itshouldbereplaced
withasimilarone,orthewholesystemshouldbechangedtoavoidtheuseofthat
typeofcomponent.
oThestatisticishelpfultoanotherpartofnetwork management, performance
management.876CHAPTER 28NETWORK MANAGEMENT: SNMP
Proactive FaultManagement
Proactive faultmanagement triestopreventfaultsfromoccurring. Although thisisnot
alwayspossible, sometypesoffailurescanbepredicted andprevented. Forexample, if
amanufacturer specifies alifetimeforacomponent orapartofacomponent, itisa
goodstrategytoreplaceitbeforethattime.Asanotherexample, ifafaulthappens
frequently atoneparticular pointofanetwork, itiswisetocarefully reconfigure the
networktopreventthefaultfromhappening again.
Performance Management
Performance management, whichiscloselyrelatedtofaultmanagement, triesto
monitorandcontrolthenetworktoensurethatitisrunningasefficiently aspossible.
Performance management triestoquantify performance byusingsomemeasurable
quantitysuchascapacity, traffic,throughput, orresponse time.
Capacity
Onefactorthatmustbemonitored byaperformance management systemisthecapacity
ofthenetwork. Everynetworkhasalimitedcapacity, andtheperformance management
systemmustensurethatitisnotusedabovethiscapacity. Forexample, ifaLANis
designed for100stationsatanaveragedatarateof2Mbps,itwillnotoperateproperlyif
200stationsareconnected tothenetwork. Thedataratewilldecrease andblocking
mayoccur.
Traffic
Trafficcanbemeasured intwoways:internally andexternally. Internaltrafficismea­
suredbythenumberofpackets(orbytes)traveling insidethenetwork. External traffic
ismeasured bytheexchange ofpackets(orbytes)outsidethenetwork. Duringpeak
hours,whenthesystemisheavilyused,blocking mayoccurifthereisexcessive traffic.
Throughput
Wecanmeasure thethroughput ofanindividual device(suchasarouter)orapartof
thenetwork. Performance management monitors thethroughput tomakesurethatitis
notreducedtounacceptable levels.
Response Time
Response timeisnormally measured fromthetimeauserrequestsaservicetothetime
theserviceisgranted.Otherfactorssuchascapacityandtrafficcanaffecttheresponse
time.Performance management monitors theaverageresponse timeandthepeak-hour
response time.Anyincreaseinresponse timeisaveryserious condition asitisanindi­
cationthatthenetworkisworkingaboveitscapacity.
Security Management
Security management isresponsible forcontrolling accesstothenetworkbasedon
thepredefined policy.Wediscusssecurityandinparticular networksecurityinChap­
ters31and32.SECTION 28.2SIMPLE NETWORK MANAGEMENT PROTOCOL (SNMP) 877
Accounting Management
Accounting management isthecontrolofusers'accesstonetworkresources through
charges.Underaccounting management, individual users,departments, divisions, or
evenprojectsarechargedfortheservicestheyreceivefromthenetwork. Charging does
notnecessarily meancashtransfer;itmaymeandebitingthedepartments ordivisions
forbudgeting purposes. Today,organizations useanaccounting management system
forthefollowing reasons:
oItpreventsusersfrommonopolizing limitednetworkresources.
oItpreventsusersfromusingthesysteminefficiently.
oNetwork managers candoshort-andlong-term planning basedonthedemandfor
networkuse.
28.2SIMPLE NETWORK MANAGEMENT
PROTOCOL (SNMP)
TheSimpleNetwork Management Protocol (SNMP) isaframework formanaging
devicesinaninternetusingtheTCPIIPprotocolsuite.Itprovides asetoffundamental
operations formonitoring andmaintaining aninternet.
Concept
SNMPusestheconceptofmanager andagent.Thatis,amanager, usuallyahost,
controlsandmonitors asetofagents,usuallyrouters(seeFigure28.2).
Figure28.2SNMPconcept
Agentvariables
AgentInternet
1------.-'1;':':1---,....,--Manager
SNMPisanapplication-level protocolinwhichafewmanager stationscontrola
setofagents.Theprotocol isdesigned attheapplication levelsothat itcanmonitor
devicesmadebydifferent manufacturers andinstalledondifferent physicalnetworks.
Inotherwords,SNMPfreesmanagement tasksfromboththephysicalcharacteristics
ofthemanaged devicesandtheunderlying networking technology. Itcanbeusedina
heterogeneous internetmadeofdifferentLANsandWANsconnected byroutersmade
bydifferentmanufacturers.878CHAPTER 28NETWORK MANAGEMENT: SNMP
Managers andAgents
Amanagement station,calledamanager, isahostthatrunstheSNMPclientprogram. A
managed station,calledanagent,isarouter(orahost)thatrunstheSNMPserverprogram.
Management isachieved throughsimpleinteraction betweenamanager andanagent.
Theagentkeepsperformance information inadatabase. Themanager hasaccess
tothevaluesinthedatabase. Forexample, aroutercanstoreinappropriate variables
thenumberofpacketsreceived andforwarded. Themanager canfetchandcompare the
valuesofthesetwovariables toseeiftherouteriscongested ornot.
Themanager canalsomaketherouterperform certainactions.Forexample, a
routerperiodically checksthevalueofarebootcountertoseewhenitshouldreboot
itself.Itrebootsitself,forexample, ifthevalueofthecounterisO.Themanager can
usethisfeaturetoreboottheagentremotely atanytime.Itsimplysendsapacketto
forcea0valueinthecounter.
Agentscanalsocontribute tothemanagement process.Theserverprogram running
ontheagentcanchecktheenvironment, andifitnoticessomething unusual, itcansend
awarningmessage, calledatrap,tothemanager.
Inotherwords,management withSNMPisbasedonthreebasicideas:
1.Amanager checksanagentbyrequesting information thatreflects the behavior of
theagent.
2.Amanager forcesanagenttoperformataskbyresetting valuesintheagentdatabase.
3.Anagentcontributes tothemanagement processbywarning themanager ofan
unusualsituation.
Management Components
Todomanagement tasks,SNMPusestwootherprotocols: Structure ofManagement
Information (SMI)andManagement Information Base(MIB).Inotherwords,man­
agement ontheInternetisdonethroughthecooperation ofthethreeprotocols SNMP,
SMI,andMIB,asshowninFigure28.3.
Figure28.3Components ofnetworkmanagement ontheInternet
Management
ISNMP
8MIIMIBI
Letuselaborate ontheinteractions between theseprotocols.
RoleofSNMP
SNMPhassomeveryspecificrolesinnetwork management. Itdefinestheformatof
thepackettobesentfromamanager toanagentandviceversa.Italsointerprets theSECTION 28.2SIMPLE NETWORK MANAGEMENT PROTOCOL (SNMP) 879
resultandcreatesstatistics (oftenwiththehelpofothermanagement software). The
packetsexchanged containtheobject(variable) namesandtheirstatus(values). SNMP
isresponsible forreadingandchanging thesevalues.
SNMPdefinestheformatofpacketsexchanged betweenamanager andanagent.
Itreadsandchangesthestatus(values)ofobjects(variables) in8NMPpackets.
RoleofSMI
TouseSNMP,weneedrules.Weneedrulesfornamingobjects.Thisisparticularly
important becausetheobjectsinSNMPformahierarchical structure (anobjectmay
haveaparentobjectandsomechildrenobjects). Partofanamecanbeinherited from
theparent.Wealsoneedrulestodefinethetypeoftheobjects.Whattypesofobjects
arehandledbySNMP?CanSNMPhandlesimpletypesorstructured types?Howmany
simpletypesareavailable? Whatarethesizesofthesetypes?Whatistherangeofthese
types?Inaddition, howareeachofthesetypesencoded?
Weneedtheseuniversal rulesbecausewedonotknowthearchitecture ofthecom­
putersthatsend,receive,orstorethesevalues.Thesendermaybeapowerful computer
inwhichanintegerisstoredas8-bytedata;thereceivermaybeasmallcomputer that
storesanintegeras4-bytedata.
SMIisaprotocolthatdefinestheserules.However, wemustunderstand thatSMI
onlydefinestherules;itdoesnotdefinehowmanyobjectsaremanaged inanentityor
whichobjectuseswhichtype.SMIisacollection ofgeneralrulestonameobjectsand
tolisttheirtypes.Theassociation ofanobjectwiththetypeisnotdonebySMI.
8MIdefinesthegeneralrulesfornamingobjects,definingobjecttypes(including
rangeandlength),andshowinghowtoencodeobjectsandvalues.
8M1doesnotdefinethenumberofobjectsanentityshouldmanageornametheobjects
tobemanaged ordefinetheassociation betweentheobjectsandtheirvalues.
RoleofMIB
Wehopeitisclearthatweneedanotherprotocol. Foreachentitytobemanaged, this
protocol mustdefinethenumberofobjects,namethemaccording totherulesdefined
bySMI,andassociate atypetoeachnamedobject.ThisprotocolisMIB.MIBcreates
asetofobjectsdefinedforeachentitysimilartoadatabase (mostlymetadata inadata­
base,namesandtypeswithoutvalues).
:MIBcreatesacollection ofnamedobjects,theirtypes,andtheirrelationships to
eachotherinanentitytobemanaged.
AnAnalogy
Beforediscussing eachoftheseprotocols ingreaterdetail,wegiveananalogy. The
threenetworkmanagement components aresimilartowhatweneedwhenwewritea
programinacomputer language tosolveaproblem.880CHAPTER 28NETWORK MANAGEMENT: SNMP
Beforewewriteaprogram, thesyntaxofthelanguage (suchasCorJava)mustbe
predefined. Thelanguage alsodefinesthestructure ofvariables (simple,structured,
pointer,andsoon)andhowthevariables mustbenamed.Forexample, avariablename
mustbe1toNcharacters inlengthandstartwithaletterfollowed byalphanumeric
characters. Thelanguage alsodefinesthetypeofdatatobeused(integer,float,char,
etc.).Inprogramming therulesaredefinedbythelanguage. Innetworkmanagement
therulesaredefinedbySMI.
Mostcomputer languages requirethatvariables bedeclaredineachspecificpro­
gram.Thedeclaration nameseachvariableanddefinesthepredefined type.Forexample,
ifaprogramhastwovariables (anintegernamedcounterandanarraynamedgradesof
typechar),theymustbedeclaredatthebeginning oftheprogram:
intcounter;
chargrades[40];
Notethatthedeclarations namethevariables (counterandgrades)anddefinethe
typeofeachvariable. Becausethetypesarepredefined inthelanguage, theprogram
knowstherangeandsizeofeachvariable.
MIBdoesthistaskinnetworkmanagement. MIBnameseachobjectanddefines ~e
typeoftheobjects.BecausethetypeisdefinedbySMI,SNMPknowstherangeandsize.
Afterdeclaration inprogramming, theprogramneedstowritestatements tostore
valuesinthevariables andchangethemifneeded.SNMPdoesthistaskinnetwork
management. SNMPstores,changes, andinterprets thevaluesofobjectsalready
declaredbyMIBaccording totherulesdefinedbySMI.
Wecancompare thetaskofnetwork management tothetaskofwritingaprogram.
oBothtasksneedrules.Innetworkmanagement thisishandledbySMI.
oBothtasksneedvariabledeclarations. Innetworkmanagement thisishandledbyMIB.oBothtaskshaveactionsperformed bystatements. Innetwork management thisis
handledbySNMP.
AnOverview
Beforediscussing eachcomponent indetail,weshowhoweachisinvolvedinasimple
scenario. Thisisanoverview thatwillbedeveloped laterattheendofthechapter.A
manager station(SNMPclient)wantstosendamessage toanagentstation(SNMP
server)tofindthenumberofUDPuserdatagrams receivedbytheagent.Figure28.4
showsanoverview ofstepsinvolved.
MIBisresponsible forfindingtheobjectthatholdsthenumberoftheUDPuser
datagrams received. SMI,withthehelpofanotherembedded protocol, isresponsible for
encoding thenameoftheobject.SNMPisresponsible forcreatingamessage, calleda
GetRequest message, andencapsulating theencoded message. Ofcourse,thingsare
morecomplicated thanthissimpleoverview, butwefirstneedmoredetailsofeach
protocol.SECTION 28.2SIMPLE NETWORK MANAGEMENT PROTOCOL (SNMP) 881
Figure28.4Management overview
NumberofUDPuserdatagrams?
--------------~
Theobjecthasanintegervalueand
iscalledudpInDatagram withid
1.3.6.1.2.1.7.1.0
--------------~
Retrieve thevalueofanobject
withcode0609.
--------------jSNMPI
Encapsulate therequestina
GetRequest message
Structure ofManagement Information
TheStructure ofManagement Information, version2(SMIv2) isacomponent fornet­
workmanagement. Itsfunctions are
1.Tonameobjects
2.Todefinethetypeofdatathatcanbestoredinanobject
3.Toshowhowtoencodedatafortransmission overthenetwork
SMIisaguideline forSNMP.Itemphasizes threeattributes tohandleanobject:name,
datatype,andencoding method(seeFigure28.5).
Figure28.5Objectattributes
Objectattributes
Type
Name
SMIrequiresthateachmanaged object(suchasarouter,avariableinarouter,avalue)
haveauniquename.Tonameobjectsglobally, SMIusesanobjectidentifier, whichis
ahierarchical identifier basedonatreestructure (seeFigure28.6).882CHAPTER 28NETWORK MANAGEMENT: SNMP
Figure28.6Objectidentifier
1.3.6.1(iso.org.dop.intemet)
1.3.6.1.2.1 (iso.org.dod.internet.mgmt.mib-2)
Thetreestructure startswithanunnamed root.Eachobjectcanbedefinedbyusing
asequence ofintegersseparated bydots.Thetreestructure canalsodefinean object by
usingasequence oftextualnamesseparated bydots.Theinteger-dot representation is
usedinSNMP.Thename-dot notationisusedbypeople.Forexample, thefollowing
showsthesameobjectintwodifferentnotations:
iso.org.dod.internet.mgmt.mib-2 ...1.3.6.1.2.1
TheobjectsthatareusedinSNMParelocatedunderthemib-2object,sotheir
identifiers alwaysstartwith1.3.6.1.2.1.
AUobjectsmanaged bySNMParegivenanobjectidentifier.
Theobjectidentifier alwaysstartswith1.3.6.1.2.1.
Type
Thesecondattributeofanobject isthetypeofdatastoredinit.Todefinethedatatype,
SMIusesfundamental Abstract SyntaxNotation 1(ASN.l) definitions andadds
somenewdefinitions. Inotherwords,SMIisbothasubsetandasupersetofASN.1.
SMIhastwobroadcategories ofdatatype:simpleandstructured. Wefirstdefine
thesimpletypesandthenshowhowthestructured typescanbeconstructed fromthe
simpleones(seeFigure28.7).SECTION 28.2SIMPLE NEIWORK MANAGEMENT PROTOCOL (SNMP) 883
Figure28.7Datatype
SimpleTypeThesimpledatatypesareatomicdatatypes.Someofthemaretaken
directlyfromASN.l;othersareaddedbySMI.Themostimportant onesaregivenin
Table28.1.ThefirstfivearefromASN.l;thenextsevenaredefinedbySMI.
Table28.1Datatypes
Type Size Description
INTEGER 4bytes Anintegerwithavaluebetween_231and231-1
Integer32 4bytes SameasINTEGER
Unsigned32 4bytes Unsigned withavaluebetween 0and232-1
OCTETSTRING Variable Bytestringupto65,535byteslong
OBJECT IDENTIFIER Variable Anobjectidentifier
IPAddress 4bytes AnIPaddressmadeoffourintegers
Counter32 4bytes Anintegerwhosevaluecanbeincremented
from0to232;whenitreachesitsmaximum
value,itwrapsbacktoO.
Counter64 8bytes 64-bitcounter
Gauge32 4bytes SameasCounter32, butwhenitreachesits
maximum value,itdoesnotwrap;itremains
thereuntilitisreset
TimeTicks 4bytes Acounting valuethatrecordstimeinl~s
BITS Astringofbits
Opaque Variable Uninterpreted string
Structured TypeBycombining simpleandstructured datatypes,wecanmakenew
structured datatypes.SMIdefinestwostructured datatypes:sequence andsequenceof
oSequence. Asequence datatypeisacombination ofsimpledatatypes,notneces­
sarilyofthesametype.Itisanalogous totheconceptofastructorarecordusedin
programming languages suchasC.
oSequence of.Asequence ofdatatypeisacombination ofsimpledatatypesallof
thesametypeoracombination ofsequence datatypesallofthesametype.Itis
analogous totheconceptofanarrayusedinprogramming languages suchasC.884 CHAPTER 28NETWORK MANAGEMENT: SNMP
Figure28.8showsaconceptual viewofdatatypes.
Figure28.8Conceptual datatypes-a.Simplevariable
b.Sequence of
(simplevariables)c.Sequence
d.Sequence of
(sequences)...
...
Encoding Method
SMIusesanotherstandard, BasicEncoding Rules(BER),toencodedatatobetrans­
mittedoverthenetwork. BERspecifies thateachpieceofdatabeencoded intriplet
format:tag,length,andvalue,asillustrated inFigure28.9.
Figure28.9Encoding format
oTag.ThetagisaI-bytefieldthatdefinesthetypeofdata.Itiscomposed ofthree
subfields: class(2bits),fonnat (1bit),andnumber(5bits).Theclasssubfielddefines
thescopeofthedata.Fourclassesaredefined:universal (00),applicationwide (01),
context-specific (10),andprivate(11).Theuniversal datatypesarethosetakenfrom
ASN.l(INTEGER, OCTETSTRING, andObjectIdentifier). Theapplicationwide
datatypesarethoseaddedbySMI(IPAddress, Counter,Gauge,andTimeTicks). The
fivecontext-specific datatypeshavemeanings thatmaychangefromoneprotocolto
another.Theprivatedatatypesarevendor-specific.
Theformatsubfieldindicates whetherthedataaresimple(0)orstructured (1).
Thenumbersubfieldfurtherdividessimpleorstructured dataintosubgroups. For
example, intheuniversal class,withsimpleformat,INTEGER hasavalueof2,
OCTETSTRING hasavalueof4,andsoon.Table28.2showsthedatatypeswe
useinthischapterandtheirtagsinbinaryandhexadecimal numbers.SECTION 28.2SIMPLE NETWORK MANAGEMENT PROTOCOL (SNMP) 885
Table28.2Codesfordatatypes
DataType ClassFormat Number Tag(Binary) Tag(Hex)
INTEGER 00 000010 00000010 02
OCTETSTRING 00 000100 00000100 04
OBJECT IDENTIFIER 00 000110 00000110 06
NULL 00 000101 00000101 05
Sequence, sequence of00 110000 00110000 30
IPAddress 01 000000 01000000 40
Counter 01 000001 01000001 41
Gauge 01 000010 01000010 42
TimeTicks 01 000011 01000011 43
Opaque 01 000100 01000100 44
oLength. ThelengthfieldisIormorebytes.Ifitis1byte,themostsignificant bit
mustbeO.Theother7bitsdefinethelengthofthedata.Ifitismorethan1byte,
themostsignificant bitofthefirstbytemustbe1.Theother7bitsofthefirstbyte
definethenumberofbytesneededtodefinethelength.SeeFigure28.10fora
depiction ofthelengthfield.
Figure28.10Lengthformat
~
a.Thecoloredpartdefinesthelength(2).
~~~
b.Theshadedpartdermesthelengthofthelength(2bytes);
thecoloredbytesdefinethelength(260bytes).
oValue.Thevaluefieldcodesthevalueofthedataaccording totherulesdefined
inBER.
Toshowhowthesethreefields-tag, length,andvalue-can defineobjects,wegive
someexamples.
Example 28.1
Figure28.11showshowtodefineINTEGER 14.
Example 28.2
Figure28.12showshowtodefinetheOCTETSTRING "HI."886CHAPTER 28NETWORK MANAGEMENT: SNMP
Figure28.11Example 28.1,INTEGER 14
Value(14)02
Tag
(integer)04
,';
1.li.lOOO100
Length
(4bytes)00
0000000000
0000000000
00000000OE
00001110
Figure28.12Example 28.2,OCTETSTRING "HI"
04 02 48 49
00000010~~'.01001000 01001001
Tag Length Value Value
(String) (2bytes) (H) (1)
Example 28.3
Figure28.13showshowtodefineObjectIdentifier 1.3.6.1(iso.org.dod.internet).
Figure28.13Example 28.3,ObjectIdentifier 1.3.6.1
06 04
~(~ ..~~~OOOQQIQ(J~·J
Tag Length
(ObjectId) (4bytes)
I-01
00000001
Value
(1)03 06 01
00000011 00000110 00000001
Value Value Value
(3) (6) 0)
1.3.6.1(iso.org.dod.intemet)'I
Example 28.4
Figure28.14showshowtodefineIPAddress 131.21.14.8.
Figure28.14Example 28.4,IPAddress 131.21.14.8
04 83 15 OE 08
000oo100 10000011 00010101 00001110 00001000
Tag Length Value Value Value Value
(IPAddress) (4bytes) (131) (21) (14) (8)
I- 131.21.14.8 >I
Management Information Base(MIB)
TheManagement Information Base,version2(MIB2)isthesecondcomponent usedin
networkmanagement. EachagenthasitsownMIB2,whichisacollection ofallthe
objectsthatthemanager canmanage. TheobjectsinMIB2arecategorized under10SECTION 28.2SIMPLE NETWORK MANAGEMENT PROTOCOL (SNMP) 887
different groups:system,interface, addresstranslation, ip,icmp,tcp,udp,egp,trans­
mission, andsnmp.Thesegroupsareunderthemib-2objectintheobjectidentifier tree
(seeFigure28.15).Eachgrouphasdefinedvariables and/ortables.
Figure28.15mib-2
1.3.6.1.2.1
Thefollowing isabriefdescription ofsomeoftheobjects:
DsysThis object (system) definesgeneralinformation aboutthenode(system),
suchasthename,location, andlifetime.
DifThisobject(inteiface) definesinformation aboutalltheinterfaces ofthenode
including interface number,physical address,andIPaddress.
DatThisobject(address translation) definestheinformation abouttheARPtable.
DipThisobjectdefinesinformation relatedtoIP,suchastheroutingtableandthe
IPaddress.
DicmpThisobjectdefinesinformation relatedtoICMP,suchasthenumberof
packetssentandreceived andtotalerrorscreated.
DtcpThisobjectdefinesgeneralinformation relatedtoTCP,suchastheconnection
table,time-out value,numberofports,andnumberofpacketssentandreceived.
DudpThis object definesgeneralinformation relatedtoUDP,suchasthenumber
ofportsandnumberofpacketssentandreceived.
DsnmpThisobjectdefinesgeneralinformation relatedtoSNMPitself.
Accessing MIBVariables
Toshowhowtoaccessdifferent variables, weusetheudpgroupasanexample. There
arefoursimplevariables intheudpgroupandonesequence of(tableof)records.
Figure28.16showsthevariables andthetable.
Wewillshowhowtoaccesseachentity.
SimpleVariables Toaccessanyofthesimplevariables, weusetheidofthegroup
(1.3.6.1.2.1.7) followed bytheidofthevariable. Thefollowing showshowtoaccess
eachvariable.
udpInDatagrams
.udpNoPorts
udplnErrors
udpOutDatagrams1.3,6.1.2.1.7.1
1.3.6.1.2.1.7.2
1.3.6.1.2.1.7.3
1.3.6.1.2.1.7.4888 CHAPTER 28NETWORK MANAGEMENT: SNMP
Figure28.16 udpgroup
udpLocal
AddressudpLocal
Port
However, theseobjectidentifiers definethevariable, nottheinstance(contents). Toshow
theinstanceorthecontentsofeachvariable, wemustaddaninstancesuffix.Theinstance
suffixforasimplevariableissimplyaO.Inotherwords,toshowaninstanceoftheabove
variables, weusethefollowing:
udpInDatagrams.O 1.3.6.1.2.1.7.1.0
udpNoPorts.O 1.3.6.1.2.1.7.2.0
udpInErrors.O 1.3.6.1.2.1.7.3.0
udpOutDa.tagrams.O 1.3.6.1.2.1.7.4.0
Tables Toidentifyatable,wefirstusethetableid.Theudpgrouphasonlyonetable
(withid5)asillustrated inFigure28.17.
Sotoaccessthetable,weusethefollowing:
udpTable...1.3.6.1.2.1.7.5
However, thetableisnotattheleaflevelinthetreestructure. Wecannotaccessthe
table;wedefinetheentry(sequence) inthetable(withidof1),asfollows:
udpEntry...1.3.6.1.2.1.7.5.1
Thisentryisalsonotaleafandwecannotaccessit.Weneedtodefineeachentity
(field)intheentry.
udpLocalAddress 1.3.6.1.2.1.7.5.1.1
udpLocalPoo' 1.3.6.1.2.1.7.5.1.2
Thesetwovariables areattheleafofthetree.Although wecanaccesstheirinstances,
weneedto define whichinstance. Atanymoment, thetablecanhaveseveralvaluesforSECTION 28.2SIMPLE NETWORK MANAGEMENT PROTOCOL (SNMP) 889
Figure28.17udpvariables andtables
udpInDatagrams
(1.3.6.1.2.1.7.1)'---I
udpLocaIAddress
(1.3.6.1.2.1.7.5.1.1)---_I
udpLocaIPort
(1.3.6.1.2.1.7.5.1.2)
udpEntry
(1.3.6.1.2.1.7.5.1)
udpNoPorts
(1.3.6.1.2.1.7.2)_------I
udpLocaIAddress
(1.3.6.1.2.1.7.5.1.1)~~I
udpLocaIPort
(1.3.6.1.2.1.7.5.1.2)
udpEntry
(1.3.6.1.2.1.7.5.1)
udpEnn-y
(1.3.6.1.2.1. 7.5.1)udplnErrors
(1.3.6.1.2.1.7.3)
~------IudpOutDatagrams
(1.3.6.1.2.1.7.4)_------I
udpLocalAddress
(1.3.6.1.2.1.7.5.1.1)···
-------,udpLocalPon
(1.3.6.1.2.1.7.5.1.2)
udpTable
(1.3.6.1.2.1.7.5)
eachlocaladdress/local portpair.Toaccessaspecificinstance (row)ofthetable,we
addtheindextotheaboveids.InMIB,theindexesofarraysarenotintegers(likemost
programming languages). Theindexesarebasedonthevalueofoneormorefieldsin
theentries.Inourexample, theudpTable isindexedbasedonboththelocaladdressand
thelocalportnumber.Forexample, Figure28.18showsatablewithfourrowsandvalues
foreachfield.Theindexofeachrowisacombination oftwovalues.
Toaccesstheinstanceofthelocaladdressforthefirstrow,weusetheidentifier
augmented withtheinstanceindex:
udpLocalAddress.181.23.45.14.23 ......1.3.6.1.2.7.5.1.1.181.23.45.14.23
Note that notalltablesareindexedinthesameway.Sometablesareindexedbyusing
thevalueofonefield,othersbyusingthevalueoftwofields,andsoon.
Lexicographic Ordering
Oneinteresting pointabouttheMIBvariables isthattheobjectidentifiers (including
theinstanceidentifiers) followinlexicographic order.Tablesareorderedaccording to
column-row rules,whichmeansoneshouldgocolumnbycolumn.Ineachcolumn,one
shouldgofromthetoptothebottom,asshowninFigure28.19.890CHAPTER 28NETWORK MANAGEMENT: SNMP
Figure28.18IndexesforudpTable
181.23.45.14I
1.3.6.1.2.1.7.5.1.1.181.23.45.14.23
192.13.5.10
1.3.6.1.2.1.7.5.1.1.192.13.5.10.161
227.2.45.18
1.3.6.1.2.1.7.5.1.1.227.2.45.18.180
230.20.5.24I
1.3.6.1.2.1.7.5.1.1.230.20.5.24.212
Figure28.19Lexicographic ordering23I
1.3.6.1.2.1.7.5.1.2.181.23.45.14.23
o
1.3.6.1.2.1.7.5.1.2.192.13.5.10.161
180I
1.3.6.1.2.1.7 .5.1.2.227.2.45.18.180
212I
1.3.6.1.2.1.7.5.1.2.230.20.5.24.212
I ~
I
I181.23.45.14I )23I
I
1.3.6.1.2.1.7.5.1. .181.23.45.14.23 1.3.6.1.2!1.7.5.1..181.23.45.14.23I
I
I
I
IIII I192.13.5.10I 161I
I
1.3.6.1.2.1.7.5.1. .192.13.5.10.161 /1.3.6.1.2.1.7.5.1. .192.13.5.10.161
I
I
I
I
IIII I227.2.45.18I180I
I
I1.3.6.1.2.1.7.5.1. 1.3.6.1.2.1.7.5.1. .227.2.45.18.1&0 .227.2.45.18.180
I
I
I
I
I230.20.5.24I I212I
I1.3.6.1.2.1.7 .5.1. 1.3.6.1.2.1.7.5.1. .23tl.20.5.24.212 .230.20.5.24.212
I
ISECTION 28.2SIMPLE NETWORK MANAGEMENT PROTOCOL (SNMP) 891
Thelexicographic ordering enablesamanager toaccessasetofvariables oneafter
anotherbydefiningthefirstvariable, aswewillseeintheGetNextRequest command in
thenextsection.
SNMP
SNMPusesbothSMIandMIBinInternetnetwork management. Itisanapplication
program thatallows
1.Amanager toretrievethevalueofanobjectdefinedinanagent
2.Amanager tostoreavalueinanobjectdefinedinanagent
3.Anagenttosendanalarmmessage aboutanabnormal situation tothemanager
PDUs
SNMPv3 defineseighttypesofpackets(orPDUs):GetRequest, GetNextRequest, Get­
BulkRequest, SetRequest, Response, Trap,InformRequest, andReport(seeFigure28.20).
Figure28.20SNMPPDUs
UDP
connections
TrapSNMP
manager
Client
<r--~-....R_e-,""-spo-....n-,,se,,---,~_: ~~',,,---',_''-I',I
~SNMP
agent
Server
-;~:~~~~epa~f~7 Toanothermanager'---_ ......
GetRequest TheGetRequest PDUissentfromthemanager (client)totheagent
(server)toretrievethevalueofavariableorasetofvariables.
GetNextRequest TheGetNextRequest PDUissentfromthemanager totheagentto
retrievethevalueofavariable.Theretrieved valueisthevalueoftheobjectfollowing the
definedObjectidinthePDD.Itismostlyusedtoretrievethevaluesoftheentriesinatable.
Ifthemanagerdoesnotknowtheindexesoftheentries,itcannotretrievethevalues.How­
ever,itcanuseGetNextRequest anddefinetheObjectIdofthetable.Becausethefirstentry
hastheObjectId immediately aftertheObjectId ofthetable,thevalueofthefirstentryis
returned. ThemanagercanusethisObjectIdtogetthevalueofthenextone,andsoon.892 CHAPTER 28NETWORK MANAGEMENT: SNMP
GetBulkRequest TheGetBulkRequest PODissentfromthemanager totheagent
toretrievealargeamountofdata.Itcanbeusedinsteadofmultiple GetRequest and
GetNextRequest PODs.
SetRequest TheSetRequest PDDissentfromthemanager totheagenttoset(store)
avalueinavariable.
Response TheResponse PDDissentfromanagenttoamanager inresponse to
GetRequest orGetNextRequest. Itcontainsthevalue(s)ofthevariable(s) requested by
themanager.
TrapTheTrap(alsocalledSNMPv2 Traptodistinguish itfromSNMPv1Trap)
PODissentfromtheagenttothemanager toreportanevent.Forexample, iftheagent
isrebooted, itinfonnsthemanager andreportsthetimeofrebooting.
InformRequest TheInfonnRequest PODissentfromonemanagertoanotherremote
manager togetthevalueofsomevariables fromagentsunderthecontroloftheremote
manager. Theremotemanager responds withaResponse POD.
Report TheReportPODisdesigned toreportsometypesoferrorsbetweenmanagers.
Itisnotyetinuse.
Format
ThefonnatfortheeightSNMPPODsisshowninFigure28.21.TheGetBulkRequest
PODdiffersfromtheothersintwoareas,asshowninthefigure.
Figure28.21 SNMPPDUformat
PDU
VarBind list:I
I'l~-~IValueI···IVaria.ble:11Value1
Differences:
1.Errorstatusanderrorindexvaluesarezerosforallrequest
messages exceptGetBulkRequest.
2.Errorstatusfieldisreplaced bynonrepeater fieldanderrorindex
fieldisreplaced bymax-repetitions fieldinGetBulkRequest.
Thefieldsarelistedbelow:
oPDUtype.ThisfielddefinesthetypeofthePOD(seeTable28.4).
oRequestID.Thisfieldisasequence numberusedbythemanagerinaRequestPOD
andrepeatedbytheagentinaresponse.Itisusedtomatcharequesttoaresponse.SECTION 28.2SIMPLE NETWORK MANAGEMENT PROTOCOL (SNMP) 893
oErrorstatus.ThisisanintegerthatisusedonlyinResponse PDUstoshowthe
typesoferrorsreported bytheagent.Itsvalueis0inRequestPDUs.Table28.3
liststhetypesoferrorsthatcanoccur.
Table28.3Typesoferrors
Status Name Meaning
0noError No error
1tooBig Response toobigtofitinonemessage
2noSuchName Variable doesnotexist
3badValue Thevaluetobestoredisinvalid
4readOnly Thevaluecannotbemodified
5genErr Othererrors
oNonrepeaters. ThisfieldISusedonlyinGetBulkRequest andreplacestheerror
statusfield,whichisemptyinRequestPDUs.
oErrorindex.Theerrorindexisanoffsetthattellsthemanager whichvariable
causedtheerrOr.
oMax~repetition. ThisfieldisalsousedonlyinGetBulkRequest andreplacesthe
errorindexfield,whichisemptyinRequestPDUs.
oVarBind list.Thisisasetofvariables withthecorresponding valuesthemanager
wantstoretrieveorset.ThevaluesarenullinGetRequest andGetNextRequest. In
aTrapPDU,itshowsthevariables andvaluesrelatedtoaspecificPDU.
Messages
SNMPdoesnotsendonlyaPDU,itembedsthePDUinamessage. Amessage in
SNMPv3 ismadeoffourelements: version, header,security parameters, anddata
(whichincludetheencodedPDU),asshowninFigure28.22.
Becausethelengthoftheseelements isdifferentfrom message tomessage, SNMP
usesBERtoencodeeachelement. Remember thatBERusesthetagandthelengthto
defineavalue.Theversiondefinesthecurrentversion(3).Theheadercontainsvaluesfor
message identification, maximum message size(themaximum sizeofthereply),mes­
sageflag(oneoctetofdatatypeOCTETSTRING whereeachbitdefinessecuritytype,
suchasprivacyorauthentication, Orotherinformation), and amessage securitymodel
(defining thesecurityprotocol). Themessage securityparameter isusedtocreateames­
sagedigest(seeChapter31).ThedatacontainthePDU.Ifthedataareencrypted, thereis
information abouttheencrypting engine(themanager programthatdidtheencryption)
andtheencrypting context(thetypeofencryption) followed bytheencrypted PDU.Ifthe
dataarenotencrypted, thedataconsistofjustthePDU.
TodefinethetypeofPDU,SNMPusesatag.Theclassiscontext-sensitive (10),the
formatisstructured (1),andthenumbers are0,1,2,3,5,6,7,and8(seeTable28.4).
NotethatSNMPvl definedA4forTrap,whichisobsoletetoday.894CHAPTER 28NETWORK MANAGEMENT: SNMP
Figure28.22SNMPmessage
Message
Version
Header
Securityparameter
Data
ContextengineID
Contextname
PDU
Table28.4CodesforSNMPmessages
, WholeTagWholeTag
Data ClassFormat Number (Binary) (Hex)
GetRequest 10 100000 10100000 AO
GetNextRequest 10 100001 10100001 Al
Response 10 100010 10100010 A2
SetRequest 10 100011 10100011 A3
GetBulkRequest 10 100101 10100101 AS
InformRequest 10 100110 10100110 A6
Trap(SNMPv2) 10 100111 10100111 A7
Report 10 101000 10101000 A8
Example 28,5
Inthisexample, amanager station(SNMPclient)usestheGetRequest message toretrievethe
numberofUDPdatagrams thatarouterhasreceived.
ThereisonlyoneVarBindentity.Thecorresponding MIDvariablerelatedtothisinforma­
tionisudpInDatagrams withtheobjectidentifier 1.3.6.1.2.1.7.1.0. Themanager wantstoretrieve
avalue(nottostoreavalue),sothevaluedefinesanullentity.Figure28.23showstheconceptualSECTION 28.2SIMPLE NETWORK MANAGEMENT PROTOCOL (SNMP) 895
Figure28.23 Example 28.5
3034
020103 INTEGER, version
300C1--...-IHeader,sequence
oflength12,notshown
020140 ]Two
0202 04 00 INTEGERs
040100J0400 Three
04 00 OCTETSTRINGs
30IF
AO10
0204000106IlThr
020100 ee
020100 INTEGERsData,a
30OFGetRequestsequencePDUofof31
30on length29bytesVarBindII0609010306010201070100Iv:Bindlist0500 arWholemessage
asequence of
52bytes
viewofthepacketandthehierarchical natureofsequences. Wehaveusedwhiteandcoloredboxes
forthesequences andagrayoneforthePDU.
TheVarBind listhasonlyoneVarBind. Thevariableisoftype06andlength09.Thevalueis
oftype05andlength00.ThewholeVarBind isasequence oflengthOD(13).TheVarBind listis
alsoasequence oflengthOF(15).TheGetRequest PDUisoflengthID(29).
NowwehavethreeOCTETSTRINGs relatedtothesecurityparameter, securitymodel,and
flags.Thenwehavetwointegers defining maximum size(1024)andmessage ID(64).The
headerisasequence oflength12,whichweleftblankforsimplicity. Thereisoneinteger,version
(version3).Thewholemessage isasequence of52bytes.
Figure28.24showstheactualmessagesentbythemanager station(client)totheagent(server).
UDPPorts
SNMPusestheservicesofUDPontwowell-known ports,161and162.Thewell­
knownport161isusedbytheserver(agent),andthewell-known port162isusedby
theclient(manager).
Theagent(server)issuesapassiveopenonport161.Itthenwaitsforaconnection
fromamanager (client).Amanager (client)issuesanactiveopen,usinganephemeral
port,Therequestmessages are sentfromtheclienttotheserver,usingtheephemeral
portasthesourceportandthewell-known port161asthedestination port.The
response messages aresentfromtheservertotheclient,usingthewell-known port161
asthesourceportandtheephemeral portasthedestination port.
Themanager (client)issuesapassiveopenonport162.Itthenwaitsforaconnec­
tionfromanagent(server).Whenever ithasaTrapmessagetosend,anagent(server)
issuesanactiveopen,usinganephemeral port.Thisconnection isonlyone-way, from
theservertotheclient(seeFigure28.25).896CHAPTER 28NETWORK MANAGEMENT: SNMP
Figure28.24GetRequest message
&Packet me=!
cu::uJ~
Manager ..-
Agent
30340201
0330OC
02
CLl014002 02bOoj0400 04 01 '"'"800040004
tl0030IFAOCLl::;10020400 0'
~01061102O:l001000201
0030OF30
0006 09 01
03060102
01070100
0500
Figure28.25PortnumbersforSNMP
ClientPassive
openPassive
OII(0pen.
IServer-_......
a.Passiveopenbybothclientandserver
Active
=8000:...,0II(f-°..;:.p_en --+j._
Client IServer--- '---
b.Exchange ofrequestandresponse messages
'__C_li_en_t_~f-ool(E---------A-O-~t1-~~-e~='__se_rv_e_r_
c.ServersendstrapmessageSECTION 28.4KEYTERMS 897
Theclient/server mechanism inSNMPisdifferent fromotherprotocols. Hereboth
theclientandtheserverusewell-known ports.Inaddition, boththeclientandthe
serverarerunninginfinitely. Thereasonisthatrequestmessages areinitiatedbyaman­
ager(client),butTrapmessages areinitiatedbyanagent(server).
Security
Themaindifference betweenSNMPv3 andSNMPv2 istheenhanced security.SNMPv3
provides twotypesofsecurity:generalandspecific.SNMPv3 providesmessageauthenti­
cation,privacy,andmanagerauthorization. WediscussthesethreeaspectsinChapter31.In
addition, SNMPv3 allowsamanager toremotely changethesecurityconfiguration, which
meansthatthemanagerdoesnothavetobephysically presentatthemanager station.
28.3RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
booksandsites.Theitemsinbrackets[...]refertothereference listattheendofthetext.
Books
SNMPisdiscussed in[MS01], Chapter 25of[Ste94], Section22.3of[Sta04],and
Chapter39of[Com04]. Network management isdiscussed in[Sub01].
Sites
Thefollowing sitesarerelatedtotopicsdiscussed inthischapter.
owww.ietf.org/rfc.html Information aboutRFCs
RFCs
Thefollowing RFCsarerelatedtoSNMP,MIB,andSMI:
1065,1067,1098, 1155,1157, 1212, 1213, 1229,1231,1243, 1284, 1351,1352,1354, 1389,
1398,1414,1441,1442,1443,1444,1445, 1446,1447,1448,1449, 1450, 1451,1452, 1461,
1472,1474, 1537, 1623,1643,1650, 1657, 1665, 1666,1696,1697, 1724, 1742,1743, 1748,
1749
28.4KEYTERMS
Abstract SyntaxNotation 1(ASN.l)
accounting management
agent
BasicEncoding Rules(BER)
configuration management
faultmanagement
hardware documentationlexicographic ordering
Management Information Base(MIB)
manager
networkmanagement
objectidentifier
performance management
securitymanagement898CHAPTER 28NE1WORK MANAGEMENT: SNMP
simpledatatype
SimpleNetwork Management Protocol
(SNMP)
structured datatypeStructure ofManagement Information
(SMI)
trap
28.5SUMMARY
oThefiveareascomprising networkmanagement areconfiguration management,
faultmanagement, performance management, accounting management, andsecurity
management.
oConfiguration management isconcerned withthephysical orlogicalchangesof
networkentities.Itincludes thereconfiguration anddocumentation ofhardware,
software, anduseraccounts.
oFaultmanagement isconcerned withtheproperoperation ofeachnetworkcompo­
nent.Itcanbereactiveorproactive.
oPerformance management isconcerned withthemonitoring andcontrolofthe
networktoensurethenetworkrunsasefficiently aspossible.Itisquantified by
measuring thecapacity, traffic,throughput, andresponse time.
oSecuritymanagement isconcerned withcontrolling accesstothenetwork.
oAccounting management isconcerned withthecontrolofuseraccesstonetwork
resources throughcharges.
oSimpleNetwork Management Protocol (SNMP) isaframework formanaging
devicesinaninternetusingtheTCP/IPprotocolsuite.
oAmanager, usuallyahost,controlsandmonitors asetofagents,usuallyrouters.
oThemanager isahostthatrunstheSNMPclientprogram.
oTheagentisarouterorhostthatrunstheSNMPserverprogram.
oSNMPfreesmanagement tasksfromboththephysicalcharacteristics ofthemanaged
devicesandtheunderlying networking technology.
oSNMPusestheservicesoftwootherprotocols: Structure ofManagement Infor­
mation(SMI)andManagement Information Base(MIB).
oSMInamesobjects,definesthetypeofdatathatcanbestoredinanobject,and
encodesthedata.
oSMIobjectsarenamedaccording toahierarchical treestructure.
oSMIdatatypesaredefinedaccording toAbstractSyntaxNotation 1(ASN.l).
oSMIusesBasicEncoding Rules(BER)toencodedata.
oMIBisacollection ofgroupsofobjectsthatcanbemanaged bySNMP.
oMIBuseslexicographic orderingtomanageitsvariables.
oSNMPfunctions inthreeways:
1.Amanager canretrievethevalueofanobjectdefinedinanagent.
2.Amanager canstoreavalueinanobjectdefinedinanagent.
3.Anagentcansendanalarmmessage tothemanager.SECTION 28.6PRACTICE SET 899
oSNMPdefineseighttypesofpackets: GetRequest, GetNextRequest, SetRequest,
GetBulkRequest, Trap,InformRequest, Response, andReport.
oSNMPusestheservicesofUDPontwowell-known ports,161and162.
oSNMPv3 hasenhanced securityfeaturesoverprevious versions.
28.6PRACTICE SET
ReviewQuestions
I.Definenetworkmanagement.
2.Listfivefunctions ofnetworkmanagement.
.3.Defineconfiguration management anditspurpose.
4.Listtwosubfunctions ofconfiguration management.
S.Definefaultmanagement anditspurpose.
6.Listtwosubfunctions offaultmanagement.
7.Defineperformance management anditspurpose.
8.Listfourmeasurable quantities ofperformance management.
9.Definesecuritymanagement anditspurpose.
10.Defineaccountmanagement anditspurpose.
Exercises
II.Showtheencoding forINTEGER 1456.
12.Showtheencoding fortheOCTETSTRING "HelloWorld."
13.Showtheencoding foranarbitrary OCTETSTRING oflength 1000.
14.Showhowthefollowing record(sequence) isencoded.
INTEGER
2345OCTETSTRING
"COMPUTER"IPAddress
185.32.1.5
15.Showhowthefollowing record(sequence) isencoded.
TimeTick
12000INTEGER
14564ObjectId
1.3.6.1.2.1.7
16.Showhowthefollowing array(sequence of)isencoded. Eachelement isan
integer.
2345
1236
122
1236900CHAPTER 28NETWORK MANAGEMENT: SNMP
17.Showhowthefollowing arrayofrecords(sequence ofsequence) isencoded.
INTEGER
2345
1123
3456OCTETSTRING
"COMPUTER"
"DISK"
"MONITOR"Counter
345
1430
2313
18.Decodethefollowing.
a.020401021432
b.30060201 11020114
c.300904034143420202 14 14
d.30OA400423516271020214 12CHAPTER 29
Multimedia
Recentadvances intechnology havechanged ouruseofaudioandvideo.Inthepast,
welistenedtoanaudiobroadcast througharadioandwatched avideoprogram broad­
castthroughaTV.Weusedthetelephone network tointeractively communicate with
anotherparty.Buttimeshavechanged. PeoplewanttousetheInternetnotonlyfortext
andimagecommunications, butalsoforaudioandvideoservices. Inthischapter, we
concentrate onapplications thatusetheInternetforaudioandvideoservices.
Wecandivideaudioandvideoservices intothreebroadcategories: streaming
storedaudio/video, streaming liveaudio/video, andinteractive audio/video, asshown
inFigure29.1.Streaming meansausercanlistento(orwatch)thefileafterthedown­
loadinghasstarted.
Figure29.1Internetaudio/video
Inthefirstcategory, streaming storedaudio/video, thefilesarecompressed and
storedonaserver.Aclientdownloads thefilesthroughtheInternet. Thisissometimes
referred toason-demand audio/video. Examples ofstoredaudiofilesaresongs,
symphonies, booksontape,andfamouslectures. Examples ofstoredvideofilesare
movies,TVshows,andmusicvideoclips.
Streaming storedaudio/video referstoon-demand
requestsforcompressed audio/video files.
901902CHAPTER 29MULTIMEDIA
Inthesecondcategory, streaming liveaudio/video, auserlistenstobroadcast
audioandvideothroughtheInternet.Agoodexampleofthistypeofapplication isthe
Internetradio.Someradiostationsbroadcast theirprograms onlyontheInternet; many
broadcast thembothontheInternetandontheair.InternetTVisnotpopularyet,but
manypeoplebelievethatTVstationswillbroadcast theirprograms ontheInternetin
thefuture.
Streaming liveaudio/video referstothebroadcasting of
radioandTVprograms throughtheInternet.
Inthethirdcategory, interactive audio/video, peopleusetheInternettointeractively
communicate withoneanother.Agoodexampleofthisapplication isInternettelephony
andInternetteleconferencing.
Interactive audio/video referstotheuseoftheInternet
forinteractive audio/video applications.
Wewilldiscussthesethreeapplications inthischapter,butfirstweneedtodiscuss
someotherissuesrelatedtoaudio/video: digitizing audioandvideoandcompressing
audioandvideo.
29.1DIGITIZING AUDIOANDVIDEO
BeforeaudioorvideosignalscanbesentontheInternet, theyneedtobedigitized. We
discussaudioandvideoseparately.
Digitizing Audio
Whensoundisfedintoamicrophone, anelectronic analogsignalisgenerated which
represents thesoundamplitude asafunction oftime.Thesignaliscalledananalog
audiosignal.Ananalogsignal,suchasaudio,canbedigitized toproduceadigitalsig­
nal.According totheNyquisttheorem, ifthehighestfrequency ofthesignalisf,we
needtosamplethesignal21timespersecond.Thereareothermethods fordigitizing
anaudiosignal,buttheprinciple isthesame.
Voiceissampledat8000samplespersecondwith8bitspersample.Thisresultsin
adigitalsignalof64kbps.Musicissampledat44,100samplespersecondwith16bits
persample.Thisresultsinadigitalsignalof705.6kbpsformonaural and1.411Mbps
forstereo.
Digitizing Video
Avideoconsistsofasequence offrames.Iftheframesaredisplayed onthescreenfast
enough,wegetanimpression ofmotion.Thereasonisthatoureyescannotdistinguish
therapidlyflashingframesasindividual ones.Thereisnostandardnumberofframes
persecond;inNorthAmerica 25framespersecondiscommon. However, toavoidaSECTION 29.2AUDIOANDVIDEOCOMPRESSION 903
condition knownasflickering, aframeneedstoberefreshed. TheTVindustryrepaints
eachframetwice.Thismeans50framesneedtobesent,orifthereismemory atthe
sendersite,25frameswitheachframerepainted fromthememory.
Eachframeisdividedintosmallgrids,calledpictureelements orpixels.Forblack­
and-white TV,each8-bitpixelrepresents oneof256differentgraylevels.ForacolorTV,
eachpixelis24bits,with8bitsforeachprimarycolor(red,green,andblue).
Wecancalculate thenumberofbitsin1sforaspecificresolution. Inthelowest
resolution acolorframeismadeof1024x768pixels.Thismeansthatweneed
2x25xI024x768x 24=944Mbps
Thisdatarateneedsaveryhighdataratetechnology suchasSONET.Tosendvideo
usinglower-rate technologies, weneedtocompress thevideo.
Compresswn isneededtosendvideoovertheInternet.
29.2AUDIOANDVIDEOCOMPRESSION
TosendaudioorvideoovertheInternetrequirescompression. Inthissection,wediscuss
audiocompression firstandthenvideocompression.
AudioCompression
Audiocompression canbeusedforspeechormusic.Forspeech,weneedtocompress
a64-kHzdigitized signal;formusic,weneedtocompress a1.41I-MHzsignal.Two
categories oftechniques areusedforaudiocompression: predictive encoding and
perceptual encoding.
Predictive Encoding
Inpredictive encoding, the differences between thesamplesareencoded insteadof
encoding allthesampledvalues.Thistypeofcompression isnormally usedforspeech.
Severalstandards havebeendefinedsuchasGSM(13kbps),G.729(8kbps),and
G.723.3 (6.4or5.3kbps).Detailed discussions ofthesetechniques arebeyondthe
scopeofthisbook.
Perceptual Encoding: MP3
Themostcommon compression technique thatisusedtocreateCD-quality audiois
basedontheperceptual encoding technique. Aswementioned before,thistypeof
audioneedsatleast1.411Mbps;thiscannotbesentovertheInt~rnetwithoutcompres­
sion.MP3(MPEGaudiolayer3),apartoftheMPEGstandard(discussed inthevideo
compression section),usesthistechnique.
Perceptual encoding isbasedonthescienceofpsychoacoustics, whichisthestudy
ofhowpeopleperceive sound.Theideaisbasedonflawsinourauditory system:
Somesoundscanmaskothersounds.Masking canhappeninfrequency andtime.In904CHAPTER 29MULTIMEDIA
frequency masking, aloudsoundinafrequency rangecanpartiallyortotallymaska
softersoundinanotherfrequency range.Forexample, wecannothearwhatourdance
partnersaysinaroomwherealoudheavymetalbandisperforming. Intemporal
masking, aloudsoundcannumbourearsforashorttimeevenafterthesoundhas
stopped.
MP3usesthesetwophenomena, frequency andtemporal masking, tocompress
audiosignals.Thetechnique analyzes anddividesthespectrum intoseveralgroups.
Zerobitsareallocated tothefrequency rangesthataretotallymasked.Asmallnumber
ofbitsareallocated tothefrequency rangesthatarepartiallymasked.Alargernumberof
bitsareallocated tothefrequency rangesthatarenotmasked.
MP3produces threedatarates:96kbps,128kbps,and160kbps.Therateisbased
ontherangeofthefrequencies intheoriginalanalogaudio.
VideoCompression
Aswementioned before,videoiscomposed ofmultiple frames.Eachframeisone
image.Wecancompress videobyfirstcompressing images.Twostandards areprevalent
inthemarket.JointPhotographic ExpertsGroup(JPEG)isusedtocompress images.
MovingPictureExpertsGroup(MPEG) isusedtocompress video.Webrieflydiscuss
JPEGandthenMPEG.
ImageCompression: lPEG
Aswediscussed previously, ifthepictureisnotincolor(grayscale),eachpixelcanbe
represented byan8-bitinteger(256levels).Ifthepictureisincolor,eachpixelcan
berepresented by24bits(3x 8bits),witheach8bitsrepresenting red,blue,orgreen
(RBG).Tosimplifythediscussion, weconcentrate onagrayscalepicture.
InJPEG,agrayscalepictureisdividedintoblocksof8 x 8pixels(seeFigure29.2).
Figure29.2lPEGgrayscale
..
Thepurposeofdividingthepictureintoblocksistodecreasethenumberofcalcula­
tionsbecause, asyouwillseeshortly,thenumberofmathematical operations foreach
pictureisthesquareofthenumberofunits.
ThewholeideaofJPEGistochangethepictureintoalinear(vector)setofnumbers
thatrevealstheredundancies. Theredundancies (lackofchanges) canthenberemovedSECTION 29.2AUDIOANDVIDEOCOMPRESSION 905
byusingoneofthetextcompression methods. Asimplified schemeoftheprocessis
showninFigure29.3.
Figure29.3lPEGprocess
ThreephasesofJPEG
IT][]•••bI
GJQ;)···~
oD···(I
Blocked
imageQuantizationData
compression001111·..000001
Compressed
image
Discrete CosineTransform (DCT) Inthisstep,eachblockof64pixelsgoesthrough
atransformation calledthediscrete cosinetransform (DCT).Thetransformation
changesthe64valuessothattherelativerelationships betweenpixelsarekeptbutthe
redundancies arerevealed. Wedonotgivetheformulahere,butwedoshowtheresults
ofthetransformation for threecases.
Case1Inthiscase,wehaveablockofuniformgray,andthevalueofeachpixelis
20.Whenwedothetransformations, wegetanonzero valueforthefirstelement
(upperleftcomer);therestofthepixelshaveavalueofO.ThevalueofT(O,O)isthe
average(multiplied byaconstant) oftheP(x,y)valuesandiscalledthedevalue(direct
current,borrowed fromelectrical engineering). Therestofthevalues,calledaevalues,
inT(m,n)represent changesinthepixelvalues.Butbecausetherearenochanges, the
restofthevaluesareOs(seeFigure29.4).
Figure29.4Case1:uniformgrayscale
20 202020202020 20 16000 0 0 0 00
20 2020 20 20 20 2020o0 0 0 0 0 0 0
20 2020 2020202020o0 0 0 0 0 0 0
--+-202020 2020 202020---+o0 0 0 0 0 0 0
2020202020 20 20 20o0 0 0 0 0 0 0
20 20 20 20 2020 20 20 o0 000 000
Picture20 20 20 20 202020 20 o0 0 0 0 0 00
20202020 20 20 2020o000 0 0 0 0
P(X,y) T(m,n)
Case2Inthesecondcase,wehaveablockwithtwodifferentuniformgrayscalesec­
tions.Thereisasharpchangeinthevaluesofthepixels(from20to50).Whenwedo
thetransformations, wegetadcvalueaswellasnonzeroacvalues.However, thereare
onlyafewnonzerovaluesclustered aroundthedcvalue.Mostofthevaluesare0(see
Figure29.5).
Case3Inthethirdcase,wehaveablockthatchangesgradually. Thatis,thereisno
sharpchangebetweenthevaluesofneighboring pixels.Whenwedothetransformations,
wegetadevalue,withmanynonzeroacvaluesalso(Figure29.6).906CHAPTER 29MULTIMEDIA
Figure29.5Case2:twosections
20 2020205050 50 50 28021090390225022
20 202020505050 50 0 0 0 0 0 0 00
iL202020 2050505050 0 0 0 0 0 0 0 0
---+202020 205050 50 50---+0 0 0 0 0 0 00
2020202050 505050 0 0 00 0 0 0 0
t, 20 20202050 5050 50 0 0 0 0 000 0
Picture20 20202050 50 50 50 0 0 0 0 0 0 00
20 2020 2050 505050 00 0 0 0 0 00
P(x,y) T(m,n)
Figure29.6Case3:gradient grayscale
2030405060708090 400214602312132128
2030405060708090 0 0 00 0 0 0 0
2030405060 708090 0000000 0
2030405060 708090 000000 0 0
2030405060 708090 0000000 0
2030405060 708090 0 0 0 0 0 00 0
Picture2030405060708090 0 0 00 0 0 0 0
2030405060 708090 0 0 00 0 0 0 0
P(x,y) T(m,n)
FromFigures29.4,29.5, and29.6,wecanstatethefollowing:
oThetransformation createstableTfromtableP.
oThedcvalueistheaveragevalue(multiplied byaconstant) ofthepixels.
oTheacvaluesarethechanges.
oLackofchangesinneighboring pixelscreatesOs.
Quantization MtertheTtableiscreated, the valuesarequantized toreducethenum­
berofbitsneededforencoding. Previously inquantization, wedroppedthefraction
fromeachvalueandkepttheintegerpart.Here,wedividethenumberbyaconstantand
thendropthefraction. Thisreducestherequired numberofbitsevenmore.Inmost
implementations, aquantizing table(8x8)defineshowtoquantize eachvalue.The
divisordependsonthepositionofthevalueintheTtable.Thisisdonetooptimize the
numberofbitsandthenumberofOsforeachparticular application. Notethattheonly
phaseintheprocessthatisnotreversible isthequantizing phase.Welosesomeinfor­
mationherethatisnotrecoverable. Asamatteroffact,theonlyreasonthatlPEGis
calledlossycompression isbecauseofthisquantization phase.
Compression Afterquantization, thevaluesarereadfromthetable,andredundant
Osareremoved. However, toclustertheOstogether, thetableisreaddiagonally ina
zigzagfashionratherthanrowbyroworcolumnbycolumn.Thereasonisthatifthe
picturechangessmoothly, thebottomrightcorneroftheTtableisallOs.Figure29.7
showstheprocess.SECTION 29.2AUDIOANDVIDEOCOMPRESSION 907
Figure29.7Reading thetable
20151512171200000"·0
Result
VideoCompression: MPEG
TheMovingPictureExpertsGroupmethodisusedtocompress video.Inprinciple, a
motionpictureisarapidflowofasetofframes,whereeachframeisanimage.Inother
words,aframeisaspatialcombination ofpixels,andavideoisatemporal combination
offramesthataresentoneafteranother.Compressing video,then,meansspatiallycom­
pressingeachframeandtemporally compressing asetofframes.
SpatialCompression Thespatialcompression ofeachframeisdonewithIPEG(or
amodification ofit).Eachframeisapicturethatcanbeindependently compressed.
Temporal Compression Intemporal compression, redundant frames are removed.
Whenwewatchtelevision, wereceive50framespersecond.However, mostofthecon­
secutiveframesarealmostthesame.Forexample, whensomeone istalking,mostofthe
frameisthesameasthepreviousoneexceptforthesegmentoftheframearoundthelips,
whichchangesfromoneframetoanother.
Totemporally compress data,theMPEGmethodfirstdividesframesintothree
categories: I-frames, P-frames, andB-frames.
oI-frames. Anintracoded frame(I-frame) isanindependent framethatisnot
relatedtoanyotherframe(nottotheframesentbeforeortotheframesentafter).
Theyarepresentatregularintervals (e.g.,everyninthframeisanI-frame). An
I-framemustappearperiodically tohandlesomesuddenchangeintheframethat
theprevious andfollowing framescannotshow.Also,whenavideoisbroadcast, a
viewermaytuneinatanytime.IfthereisonlyoneI-frameatthebeginning ofthe
broadcast, theviewerwhotunesinlatewillnotreceiveacomplete picture.
I-framesareindependent ofotherframesandcannotbeconstructed fromotherframes.
oP-frames. Apredicted frame(P-frame) isrelatedtothepreceding I-frameor
P-frame.Inotherwords,eachP-framecontainsonlythechangesfromthepreceding908CHAPTER 29MULTIMEDIA
frame.Thechanges, however, cannotcoverabigsegment. Forexample, forafast­
movingobject,thenewchangesmaynotberecorded inaP-frame. P-frames canbe
constructed onlyfromprevious 1-orP-frames. P-frames carry muchlessinforma­
tionthanotherframetypesandcarryevenfewerbitsaftercompression.
oB-frames. Abidirectional frame(B.frame) isrelatedtothepreceding and
following I-frameorP-frame. Inotherwords,eachB-frame isrelativetothepast
andthefuture.NotethataB-frame isneverrelatedtoanotherB-frame.
Figure29.8showsasamplesequence offrames.
Figure29.8MPEGframes
Figure29.9showshow1-,P-,andB-frames areconstructed fromaseriesofseven
frames.
Figure29.9MPEGframeconstruction
.---1 1----1
151 1617
1 :1 :
1 I
I I 1 1 I I
L 01""___ __.I 1.__ 01L _
MPEGhasgonethroughtwoversions. MPEG1wasdesigned foraCD-ROM with
adatarateof1.5Mbps.MPEG2wasdesigned forhigh-quality DVDwithadatarateof
3to6Mbps.
29.3STREAMING STORED AUDIONIDEO
Nowthatwehavediscussed digitizing andcompressing audio/video, weturnour
attention tospecificapplications. Thefirstisstreaming storedaudioandvideo.Down­
loadingthesetypesoffilesfromaWebservercanbedifferent fromdownloading otherSECTION 29.3STREAMING STORED AUDIOIVIDEO 909
typesoffiles.Tounderstand theconcept, letusdiscussfourapproaches, eachwitha
differentcomplexity.
FirstApproach: UsingaWebServer
Acompressed audio/video filecanbedownloaded asatextfile.Theclient(browser)
canusetheservicesofHTTPandsendaGETmessage todownload thefile.TheWeb
servercansendthecompressed filetothebrowser. Thebrowsercanthenuseahelp
application, normally calledamediaplayer,toplaythefile.Figure29.10showsthis
approach.
Figure29.10 UsingaWebserver
ClientmachineaServermachinei
-.GET:audio/video file-WebBrowser
RESPONSE .....server-
4~
Audio/video
file
Media
player
Thisapproach isverysimpleanddoesnotinvolvestreaming. However, ithasa
drawback. Anaudio/video fileisusuallylargeevenaftercompression. Anaudiofile
maycontaintensofmegabits, andavideofilemaycontainhundreds ofmegabits. In
thisapproach, thefileneedstodownload completely beforeitcanbeplayed.Using
contemporary datarates,theuserneedssomesecondsortensofsecondsbeforethefile
canbeplayed.
SecondApproach: UsingaWebServerwithMetafile
Inanotherapproach, themediaplayerisdirectlyconnected totheWebserverfordown­
loadingtheaudio/video file.TheWebserverstorestwofiles:theactualaudio/video file
andametafilethatholdsinformation abouttheaudio/video file.Figure29.11showsthe
stepsinthisapproach.
1.TheHTTPclientaccessestheWebserverbyusingtheGETmessage.
2.Theinformation aboutthemetafilecomesintheresponse.
3.Themetafileispassedtothemediaplayer.
4.ThemediaplayerusestheURLinthemetafiletoaccesstheaudio/video file.
5.TheWebserverresponds.910CHAPTER 29MULTIMEDIA
Figure29.11UsingaWebserverwithametafile
Clientmachine&Servermachinei
l- GET:metafile
r-
Browser
RESPONSE-"l;I
., Web
Metafileserver
GET:audio/video fIle '-
Media'"playerRESPONSE .---
ThirdApproach: UsingaMediaServer
Theproblemwiththesecondapproach isthatthebrowserandthemediaplayerboth
usetheservicesofHTIP.HTIPisdesigned torunoverTCP.Thisisappropriate for
retrieving themetafile, butnotforretrieving theaudio/video file.Thereasonisthat
TCPretransmits alostordamaged segment, whichiscountertothephilosophy of
streaming. WeneedtodismissTCPanditserror control~weneedtouseUDP.How­
ever,HTTP,whichaccessestheWebserver,andtheWebserveritselfaredesigned for
TCP;weneedanotherserver,amediaserver.Figure29.12showstheconcept.
1.TheHTTPclientaccessestheWebserverbyusingaGETmessage.
2.Theinformation aboutthemetafilecomesintheresponse.
Figure29.12Usingamediaserver
Clientmachine[J~Servermachinei
l- GET:metafile
'U'WebBrowser
RESPONSE ....server-
4'Metafile
GET:audio/video file I-.
Media~Media
playerRESPONSE-serverSECTION 29.3STREAMING STORED AUDIOIVIDEO 911
3.Themetafileispassedtothemediaplayer.
4.ThemediaplayerusestheURLinthemetafiletoaccessthemediaservertodown­
loadthefile.Downloading cantakeplacebyanyprotocolthatusesUDP.
5.Themediaserverresponds.
FourthApproach: UsingaMediaServerandRTSP
TheReal-Time Streaming Protocol (RTSP)isacontrolprotocoldesigned toaddmore
functionalities tothestreaming process. UsingRTSP,wecancontroltheplayingof
audio/video. RTSPisanout-of-band controlprotocolthatissimilartothesecondcon­
nectioninFTP.Figure29.13showsamediaserverandRTSP.
Figure29.13UsingamediaserverandRTSP
Clientmachinea
GET:metafile
Browser
RESPONSE
Metafile
SETUP
RESPONSE
PLAY
Media
player
RESPONSEServermachinei
Web
server
Media
server
1.TheHTTPclientaccessestheWebserverbyusingaGETmessage.
2.Theinformation aboutthemetafilecomesintheresponse.
3.Themetafileispassedtothemediaplayer.
4.ThemediaplayersendsaSETUPmessage tocreateaconnection withthemedia
server.
5.Themediaserverresponds.
6.ThemediaplayersendsaPLAYmessagetostartplaying(downloading).
7.Theaudio/video fileisdownloaded byusinganotherprotocolthatrunsoverUDP.912CHAPTER 29MULTIMEDIA
8.Theconnection isbrokenbyusingtheTEARDOWN message.
9.Themediaserverresponds.
Themediaplayercansendothertypesofmessages. Forexample, aPAUSEmessage
temporarily stopsthedownloading; downloading canberesumedwithaPLAYmessage.
29.4STREAMING LIVEAUDIONIDEO
Streaming liveaudio/video issimilartothebroadcasting ofaudioandvideobyradio
andTVstations. Insteadofbroadcasting totheair,thestationsbroadcast through
theInternet. Thereareseveralsimilarities between streaming storedaudio/video and
streaming liveaudio/video. They arebothsensitivetodelay;neithercanacceptretrans­
mission.However, thereisadifference. Inthefirstapplication, thecommunication is
unicastandon-demand. Inthesecond,thecommunication ismulticast andlive.Live
streaming isbettersuitedtothemulticast servicesofIPandtheuseofprotocols suchas
UDPandRTP(discussed later).However, presently, livestreaming isstillusingTCP
andmultipleunicasting insteadofmulticasting. Thereisstillmuchprogresstobemade
inthisarea.
29.5REAL-TIMEINTERACTIVE AUDIONIDEO
Inreal-time interactive audio/video, peoplecommunicate withoneanotherinrealtime.
TheInternetphoneorvoiceoverIPisanexample ofthistypeofapplication. Video
conferencing isanotherexamplethatallowspeopletocommunicate visuallyandorally.
Characteristics
Beforeaddressing theprotocols usedinthisclassofapplications, wediscusssome
characteristics ofreal-time audio/video communication.
TimeRelationship
Real-time dataonapacket-switched networkrequirethepreservation ofthetimerela­
tionshipbetweenpacketsofasession.Forexample, letusassumethatareal-time video
servercreateslivevideoimagesandsendsthemonline.Thevideoisdigitized and
packetized. Thereareonlythree packets, andeachpacketholdslOsofvideoinforma­
tion.Thefirstpacketstartsat00:00:00, thesecondpacketstartsat00:00:10,andthe
thirdpacketstartsat00:00:20. Alsoimaginethatittakes1s(anexaggeration forsim­
plicity)foreachpackettoreachthedestination (equaldelay).Thereceivercanplay
backthefirstpacketat00:00:01, thesecondpacketat00:00:11, andthethirdpacketat
00:00:21. Although thereisaI-stimedifference between whattheserversendsand
whattheclientseesonthecomputer screen,theactionishappening inrealtime.The
timerelationship betweenthepacketsispreserved. TheI-sdelayisnotimportant. Fig­
ure29.14showstheidea.SECTION 29.5REAL-11ME INTERACTIVE AUDIOIVIDEO 913
Figure29.14Timerelationship
Server
Client IIliiIIIl
r-c;::;:w]
Internet ~-
00.00.0100.00.00
Firstpacket
00.00.1100.00.10
'" enSecondpacket00 ('f)
t"")
00.00.21
00.00.31
Arriveandplaytime Sendtime
Butwhathappensifthepacketsarrivewithdifferent delays?Forexample, saythe
firstpacketarrivesat00:00:01 (l-sdelay),thesecondarrivesat00:00:15(5-sdelay),
andthethirdarrivesat00:00:27 (7-sdelay).Ifthereceiverstartsplayingthefirstpacket
at00:00:01, itwillfinishat00:00:11.However, thenextpackethasnotyetarrived;it
arrives4 slater.Thereisagapbetween thefirstandsecondpacketsandbetween the
secondandthethirdasthevideoisviewedattheremotesite.Thisphenomenon iscalled
jitter.Figure29.15showsthesituation.
Jitterisintroduced inreal-time databythedelaybetweenpackets.
Figure29.15Jitter
--Server
InternetClient
r-
00.00.01 ~ -IOO.OO.OO
Firstpacket
00.00.3000.00.20Secondpacket
00.00.3700.00.27
1:==========::::::====-,00.00.10
00.00.15
Arriveandplaytime Sendtime
Timestamp
Onesolutiontojitteristheuseofatimestamp. Ifeachpackethasatimestamp that
showsthetimeitwasproduced relativetothefirst(orprevious) packet,thenthereceiver914CHAPTER 29MULTIMEDIA
canaddthistimetothetimeatwhichitstartstheplayback. Inotherwords,thereceiver
knowswheneachpacketistobeplayed.Imaginethefirstpacketinthepreviousexample
hasatimestamp of0,thesecondhasatimestamp of10,andthethirdhasatimestamp of
20.Ifthereceiverstartsplayingback the firstpacketat00:00:08, thesecondwillbe
playedat00:00:18andthethirdat00:00:28. Therearenogapsbetween thepackets.
Figure29.16showsthesituation.
Figure29.16Timestamp
Server
Client
Internet
00.00.01l------------100.00.00
Firstpacket(0)
00.00.3000.00.20
FlowSecondpacket(10)
00.00.3700.00.27
C===============~I 00.00.1000.00.15
00.00.28
00.00.3800.00.1800.00.08
Playtime Arrivetime Sendtime
Topreventjitter,wecantime-stamp thepacketsand
separate thearrivaltimefromtheplayback time.
Playback Buffer
Tobeabletoseparatethearrivaltimefromtheplayback time,weneedabuffertostore
thedatauntiltheyareplayedback.Thebufferisreferredtoasaplayback buffer.
Whenasessionbegins(thefirstbitofthefirstpacketarrives),thereceiverdelaysplaying
thedatauntilathreshold isreached. Intheprevious example, thefirstbitofthefirst
packetarrivesat00:00:01; thethreshold is7s,andtheplayback timeis00:00:08. The
threshold ismeasured intimeunitsofdata.Thereplaydoesnotstartuntilthetimeunits
ofdataareequaltothethreshold value.
Dataarestoredinthebufferatapossibly variable rate,buttheyareextracted
andplayedbackatafixedrate.Notethattheamountofdatainthebuffershrinksor
expands, butaslongasthedelayislessthanthetimetoplaybackthethreshold amount
ofdata,thereisnojitter.Figure29.17showsthebufferatdifferent timesforour
example.
Ordering
Inadditiontotimerelationship information andtimestamps forreal-time traffic,one
morefeatureisneeded.Weneedasequence numberforeachpacket.Thetimestamp
alonecannotinformthereceiverifapacketislost.Forexample, supposethetimestampsSECTION 29.5REAL-TIME INTERACTIVE AUDIOIVIDEO 915
Figure29.17Playbackbuffer
Attime00:00:08
Arrival" j"PlaYbaCk
I·7.[
Attime00:00:18
Arrival" I"Playback
I·3
·1
Attime00:00:28
Arrival" I"PlaYbaCk
~
Aplayback bufferisrequired forreal-time traffic.
are0,10,and20.Ifthesecondpacketislost,thereceiverreceivesjusttwopacketswith
timestamps 0and20.Thereceiverassumes thatthepacketwithtimestamp 20isthe
secondpacket,produced 20safterthefirst.Thereceiverhasnowayofknowing that
thesecondpackethasactuallybeenlost.Asequence numbertoorderthepacketsis
neededtohandlethissituation.
Asequence numberoneachpacketisrequired forreal-time traffic.
Multicasting
Multimedia playaprimaryroleinaudioandvideoconferencing. Thetrafficcanbeheavy,
andthedataaredistributed byusingmulticasting methods. Conferencing requirestwo­
waycommunication betweenreceivers andsenders.
Real-time trafficneedsthesupportofmulticasting.
Translation
Sometimes real-time trafficneedstranslation. Atranslator isacomputer thatcanchange
theformatofahigh-bandwidth videosignaltoalower-quality narrow-bandwidth signal.
Thisisneeded,forexample, forasourcecreatingahigh-quality videosignalat5Mbps
andsendingtoarecipient havingabandwidth oflessthan1Mbps.Toreceivethesignal,
atranslator isneededtodecodethesignalandencodeitagainatalowerqualitythat
needslessbandwidth.916CHAPTER 29MULTIMEDIA
Translation meanschanging theencoding ofapayloadtoalowerquality
tomatchthebandwidth ofthereceiving network.
Mixing
Ifthereismorethanonesourcethatcansenddataatthesametime(asinavideoor
audioconference), thetrafficismadeofmultiple streams. Toconverge thetraffictoone
stream,datafromdifferent sourcescanbemixed.Amixermathematically addssignals
comingfromdifferent sourcestocreateonesinglesignal.
Mixingmeanscombining severalstreamsoftrafficintoonestream.
SupportfromTransport LayerProtocol
Theprocedures mentioned intheprevious sectionscanbeimplemented intheapplication
layer.However, theyaresocommon inreal-time applications thatimplementation inthe
transport layerprotocol ispreferable. Let'sseewhichoftheexistingtransport layers is
suitableforthistypeoftraffic.
TCPisnotsuitableforinteractive traffic.Ithasnoprovision fortime-stamping, and
itdoesnotsupportmulticasting. However, itdoesprovideordering (sequence numbers).
OnefeatureofTCPthatmakesitparticularly unsuitable forinteractive trafficisitserror
controlmechanism. Ininteractive traffic,wecannotallowtheretransmission ofalostor
corrupted packet.Ifapacketislostorcorrupted ininteractive traffic,itmustbeignored.
Retransmission upsetsthewholeideaoftime-stamping andplayback. Todaythereisso
muchredundancy inaudioandvideosignals(evenwithcompression) thatwecansimply
ignorealostpacket.Thelistenerorviewerattheremotesitemaynotevennoticeit.
TCP,withallitssophistication, isnotsuitableforinteractive multimedia
trafficbecausewecannotallowretransmission ofpackets.
UDPismoresuitableforinteractive multimedia traffic.UDPsupports multicasting
andhasnoretransmission strategy. However, UDPhasnoprovision fortime-stamping,
sequencing, ormixing.Anewtransport protocol, Real-time Transport Protocol (RTP),
provides thesemissingfeatures.
UDPismoresuitablethanTCPforinteractive traffic.However, weneedtheservices
ofRTP,anothertransport layerprotocol, tomakeupforthedeficiencies ofUDP.
29.6RTP
Real-time Transport Protocol (RTP)istheprotocol designed tohandlereal-time traffic
ontheInternet. RTPdoesnothaveadelivery mechanism (multicasting, portnumbers,
andsoon);itmustbeusedwithUDP.RTPstandsbetween UDPandtheapplicationSECTION 29.6RTP 917
program. Themaincontributions ofRTParetime-stamping, sequencing, andmixing
facilities. Figure29.18showsthepositionofRTPintheprotocolsuite.
Figure29.18RTP
I.Motion
IPEG•••
IMPEG2
video
IPMPEGI
videoMPEG
audio
UDP I~-~--
~
"
Underlying LANorWAN
technologyN<lWmkllayer
Physical
layerDatalink
layerTransport
layerApplicationGeMIH261I
layer
'---------'
RTPPacketFormat
Figure29.19showstheformatoftheRTPpacketheader.Theformatisverysimple
andgeneralenoughtocoverallreal-time applications. Anapplication thatneeds
moreinformation addsittothebeginning ofitspayload. Adescription ofeachfield
follows.
OVer. This2-bitfielddefinestheversionnumber.Thecurrentversionis2.
Figure29.19RTPpacketheaderformat
veriplxl;~~~IMIPayloadtypeISequence number
Timestamp
Synchronization sourceidentifier
Contributor identifier
·••
.
Contributor identifier918CHAPTER 29MULTIMEDIA
oP.ThisI-bitfield,ifsetto1,indicates thepresence ofpaddingattheendofthe
packet.Inthiscase,thevalueofthelastbyteinthepaddingdefinesthelengthof
thepadding. Paddingisthenormifapacketisencrypted. Thereisnopaddingif
thevalueofthePfieldisO.
oX.ThisI-bitfield,ifsetto1,indicates anextraextension headerbetween the
basicheaderandthedata.Thereisnoextraextension headerifthevalueofthis
fieldisO.
oContributor count.This4-bitfieldindicates thenumberofcontributors. Notethat
wecanhaveamaximum of15contributors becausea4-bitfieldonlyallowsanum­
berbetween0and15.
oM.ThisI-bitfieldisamarkerusedbytheapplication toindicate, forexample, the
endofitsdata.
oPayload type.This7-bitfieldindicates thetypeofthepayload. Severalpayload
typeshavebeendefinedsofar.Welistsomecommon applications inTable29.1.
Adiscussion ofthetypesisbeyondthescopeofthisbook.
Table29.1Payloadtypes
TypeApplication Type Application Type Application
aPCMj.lAudio 7LPCaudio 15G728audio
11016 8PCMAaudio 26MotionJPEG
2G721audio 9G722audio 31H.261
3GSMaudio 10-11 L16audio 32MPEGIvideo
5-6DV14audio 14MPEGaudio 33MPEG2video
oSequence number. Thisfieldis16bitsinlength.ItisusedtonumbertheRTP
packets.Thesequence numberofthefirstpacketischosenrandomly; itisincre­
mentedby1foreachsubsequent packet.Thesequence numberisusedbythe
receivertodetectlostorout-of-order packets.
oTimestamp. Thisisa32-bitfieldthatindicates thetimerelationship between
packets.Thetimestamp forthefirstpacketisarandomnumber.Foreachsucceeding
packet,thevalueisthesumofthepreceding timestamp plusthetimethefirstbyte
isproduced (sampled). Thevalueoftheclocktickdependsontheapplication. For
example, audioapplications normally generate chunksof160bytes;theclocktick
forthisapplication is160.Thetimestamp forthisapplication increases 160for
eachRTPpacket.
oSynchronization sourceidentifier.Ifthereisonlyonesource,this32-bitfield
definesthesource.However, ifthereareseveralsources,themixeristhesynchroni­
zationsourceandtheothersourcesarecontributors. Thevalueofthesourceidentifier
isarandomnumberchosenbythesource.Theprotocolprovidesastrategyincaseof
conflict(twosourcesstartwiththesamesequence number).
oContributor identifier. Eachofthese32-bitidentifiers (amaximum of15)defines
asource.Whenthereismorethanonesourceinasession,themixeristhesynchro­
nizationsourceandtheremaining sourcesarethecontributors.SECTION 29.7RTCP 919
UDPPort
Although RTPisitselfatransport layerprotocol, theRTPpacketisnotencapsulated
directlyinanIPdatagram. Instead, RTPistreatedasanapplication program andis
encapsulated inaUDPuserdatagram. However, unlikeotherapplication programs, no
well-known portisassigned toRTP.Theportcanbeselectedondemandwithonlyone
restriction: Theportnumbermustbeanevennumber.Thenextnumber(anoddnumber)
isusedbythecompanion ofRTP,Real-time Transport ControlProtocol (RTCP).
RTPusesatemporary even-numbered UDPport.
29.7RTCP
RTPallowsonlyonetypeofmessage, onethatcarriesdatafromthesourcetothedesti­
nation.Inmanycases,thereisaneedforothermessages inasession.Thesemessages
controltheflowandqualityofdataandallowtherecipient tosendfeedback tothesource
orsources.Real-time Transport ControlProtocol (RTCP) isaprotocol designed for
thispurpose. RTCPhasfivetypesofmessages, asshowninFigure29.20.Thenumber
nexttoeachboxdefinesthetypeofthemessage.
Figure29.20RTCPmessage types
---iSenderreport1200
---iReceiver report1201
RTCP ISourcedescription message1202message types I
---iByemessage1203
Application-specific message1204
SenderReport
Thesenderreportissentperiodically bytheactivesendersinaconference toreport
transmission andreception statistics forallRTPpacketssentduringtheinterval. The
senderreportincludes anabsolute timestamp, whichisthenumberofseconds
elapsed sincemidnight onJanuary 1,1970.Theabsolute timestamp allowsthe
receiver tosynchronize different RTPmessages. Itisparticularly important when
bothaudioandvideoaretransmitted (audioandvideotransmissions useseparate
relativetimestamps).920CHAPTER 29MULTIMEDIA
Receiver Report
Thereceiverreportisforpassiveparticipants, thosethatdonotsendRTPpackets.The
reportinfonnsthesenderandotherreceivers aboutthequalityofservice.
SourceDescription Message
Thesourceperiodically sendsasourcedescription message togiveadditional infonna­
tionaboutitself.Thisinfonnation canbethename,e-mailaddress, telephone number,
andaddressoftheowner orcontroller ofthesource.
ByeMessage
Asourcesendsabyemessage toshutdownastream.Itallowsthesourcetoannounce
thatitisleavingtheconference. Although othersourcescandetecttheabsenceofa
source,thismessage isadirectannouncement. Itisalsoveryusefultoamixer.
Application-Specific Message
Theapplication-specific message isapacketforanapplication thatwantstousenew
applications (notdefinedinthestandard). Itallowsthedefinition ofanewmessage
type.
UDPPort
RTCP,likeRTP,doesnotuseawell-known UDPport.Itusesatemporary port.The
UDPportchosenmustbethenumberimmediately following theUDPportselectedfor
RTP.Itmustbeanodd-numbered port.
RTCPusesanodd-numbered UDPportnumberthat
followstheportnumberselectedforRTP..
29.8VOICEOVERIP
Letusconcentrate ononereal-time interactive audio/video application: voiceoverIP,
orInternettelephony. TheideaistousetheInternetasatelephone network withsome
additional capabilities. Insteadofcommunicating overacircuit-switched network, this
application allowscommunication between twopartiesoverthepacket-switched Internet.
1\voprotocols havebeendesigned tohandlethistypeofcommunication: SIPandH.323.
Webrieflydiscussboth.
SIP
TheSessionInitiation Protocol (SIP)wasdesigned byIETEItisanapplication layer
protocol thatestablishes, manages, andterminates amultimedia session(call).Itcanbe
usedtocreatetwo-party, multiparty, ormulticast sessions. SIPisdesigned tobeindepen­
dentoftheunderlying transport layer;itcanrunonUDP,TCP,orSCTP.SECTION 29.8VOICEOVERIP921
Messages
SIPisatext-based protocol, asisHTTP.SIP,likeHTTP,usesmessages. Sixmessages
aredefined,asshowninFigure29.21.
Figure29.21 SIPmessages
SIP
messages
I
I I I I I I
INVITE ACK BYE OPTIONS CANCELIREGISTERI
Eachmessage hasaheaderandabody.Theheaderconsistsofseverallinesthat
describe thestructure ofthemessage, caller'scapability, mediatype,andsoon.We
giveabriefdescription ofeachmessage. Thenweshowtheirapplications inasimple
session.
Thecallerinitializes asessionwiththeINVITEmessage. Afterthecalleeanswers
thecall,thecallersendsanACKmessage forconfirmation. TheBYEmessage termi­
natesasession.TheOPTIONS message queriesamachine aboutitscapabilities. The
CANCEL message cancelsanalreadystartedinitialization process.TheREGISTER
message makesaconnection whenthecalleeisnotavailable.
Addresses
Inaregulartelephone communication, atelephone numberidentifies thesender,and
anothertelephone numberidentifies thereceiver. SIPisveryflexible.InSIP,ane-mail
address,anIPaddress,atelephone number,andothertypesofaddresses canbeusedto
identifythesenderandreceiver. However, theaddressneedstobeinSIPformat(also
calledscheme). Figure29.22showssomecommon formats.
Figure29.22SIPformats
sip:bob@201.23.45.78 11__siP_:_bo_b_@_fu_da_.e_d_u __11sip:bob@408~864-8900 ·1
IPv4address E-mailaddress Phonenumber
SimpleSession
AsimplesessionusingSIPconsistsofthreemodules: establishing, communicating, and
terminating. Figure29.23showsasimplesessionusingSIP.922CHAPTER 29MULTIMEDIA
Figure29.23SIPsimplesession
Caller Calleeg- g-
INVITE: address,optionsOilQ
:.E
.~OK:address
~'" I u.lACK.
I
I>/).5
~u
'13Exchanging audio='SS0u
I>/)
.S
~f-· .~." J I.
l:: BYE·s 1 I
....
~
Establishing aSession Establishing asessioninSIPrequiresathree-way handshake.
ThecallersendsanINVITEmessage, usingUDP,TCP,orSCTPtobeginthecommuni­
cation.Ifthecalleeiswillingtostartthesession,shesendsareplymessage. Toconfirm
thatareplycodehasbeenreceived, thecallersendsanACKmessage.
Communicating Afterthesessionhasbeenestablished, thecallerandthecalleecan
communicate byusingtwotemporary ports.
Terminating theSession Thesessioncanbeterminated withaBYEmessage sentby
eitherparty.
Tracking theCallee
Whathappensifthecalleeisnotsittingatherterminal? Shemaybeawayfromhersystem
oratanotherterminal. ShemaynotevenhaveafixedIPaddressifDHCPisbeingused.
SIPhasamechanism (similartooneinDNS)thatfindstheIPaddressoftheterminalat
whichthecalleeissitting.Toperformthistracking, SIPusestheconceptofregistration.
SIPdefinessomeserversasregistrars. Atanymomentauserisregistered withatleastone
registrar server;thisserverknowstheIPaddressofthecallee.
Whenacallerneedstocommunicate withthecallee,thecallercanusethee-mail
addressinsteadoftheIPaddressintheINVITEmessage. Themessage goestoaproxy
server.Theproxyserversendsalookupmessage (notpartofSIP)tosomeregistrar
serverthathasregistered thecallee.Whentheproxyserverreceives areplymessage
fromtheregistrarserver,theproxyservertakesthecaller'sINVITEmessage andinserts
thenewlydiscovered IPaddressofthecallee.Thismessage isthensenttothecallee.
Figure29.24showstheprocess.Figure29.24 Tracking thecalleeSECTION 29.8VOICEOVERIP923
CallerProxyserver
INVITE
OK
ACK~Registrar
Lookup~
Reply
INVITE
OK
ACKCallee
--
Exchanging audio
BYE
H.323
H.323isastandard designed bylTVtoallowtelephones onthepublictelephone
network totalktocomputers (calledterminals inH.323)connected totheInternet.
Figure29.25showsthegeneralarchitecture ofH.323.
Figure29.25H.323architecture
Gateway
~
t------!w::::LWJ 1----(
E:::::J-
Agateway connects theInternettothetelephone network. Ingeneral,agatewayis
afive-layer devicethatcantranslateamessagefromoneprotocolstacktoanother.The924CHAPTER 29MULTIMEDIA
gatewayheredoesexactlythesamething.Ittransforms atelephone networkmessageto
anInternetmessage. Thegatekeeper serveronthelocalareanetworkplaystheroleof
theregistrarserver,aswediscussed intheSIP.
Protocols
H.323usesanumberofprotocols toestablishandmaintainvoice(orvideo)communica­
tion.Figure29.26showstheseprotocols.
Figure29.26H.323protocols
@"~'>
Compression
code
RTCP H.225
RTP
IP
H.323usesG.71orG.723.1forcompression. Itusesaprotocol namedH.245
whichallowsthepartiestonegotiate thecompression method.Protocol Q.931isused
.forestablishing andterminating connections. Anotherprotocol calledH.225,orRAS
(Registration! Administration!Status), isusedforregistration withthegatekeeper.
Operatio1l
Letusshowtheoperation ofatelephone communication usingH.323withasimple
example. Figure29.27showsthestepsusedbyaterminal tocommunicate witha
telephone.
1.Theterminalsendsabroadcast messagetothegatekeeper. Thegatekeeper responds
withitsIPaddress.
2.Theterminalandgatekeeper communicate, usingH.225tonegotiate bandwidth.
3.Theterminal, gatekeeper, gateway, andtelephone communicate byusingQ.931to
setupaconnection.
4.Theterminal, gatekeeper, gateway, andtelephone communicate byusingH.245to
negotiate thecompression method.
5.Theterminal, gateway, andtelephone exchange audiobyusingRTPunderthe
management ofRTCP.
6.Theterminal, gatekeeper, gateway, andtelephone communicate byusingQ.931to
terminate thecommunication.SECTION 29.10KEYTERMS 925
Figure29.27H.323example
Tenninal
RTPforaudioexchange
RTCPformanagementGateway
Telephone
29.9RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
booksandsites.Theitemsinbrackets[...]refertothereference listattheendofthetext.
Books
Multimedia communication isdiscussed in[HalOl]andinSection7.4of[Tan03].Image
andvideocompression arefullydiscussed in[Dro02].
Sites
owww.ietf.org/rfc.html Infonnation aboutRFCs
29.10KEYTERMS
bidirectional frame(B-frame)
compression
discretecosinetransform (DCT)
frequency masking
gatekeepergateway
H.323
interactive audio/video
intracoded frame(I-frame)
jitter926CHAPTER 29MULTIMEDIA
JointPhotographic ExpertsGroup(JPEG)
mediaplayer
mediaserver
metafile
mixer
MovingPictureExpertsGroup(MPEG)
MP3
multicasting
on-demand audio/video
perceptual encoding
pixel
playback buffer
predicted frame(P-frame)
predictive encoding
quantizationReal-TimeStreaming Protocol (RTSP)
real-time traffic
Real-time Transport ControlProtocol
(RTCP)
Real-time Transport Protocol (RTP)
registrarserver
SessionInitiation Protocol (SIP)
spatialcompression
streaming liveaudio/video
streaming storedaudio/video
temporal compression
temporal masking
timestamp
translation
voiceoverIP
29.11SUMMARY
oAudio/video filescanbedownloaded forfutureuse(streaming storedaudio/video)
orbroadcast toclientsovertheInternet(streaming liveaudio/video). TheInternet
canalsobeusedforliveaudio/video interaction.
oAudioandvideoneedtobedigitized beforebeingsentovertheInternet.
oAudiofilesarecompressed throughpredictive encoding orperceptual encoding.
oJointPhotographic ExpertsGroup(JPEG)isamethodtocompress picturesand
graphics.
oTheJPEGprocessinvolves blocking, thediscretecosinetransform, quantization,
andlosslesscompression.
oMovingPicturesExpertsGroup(MPEG) isamethodtocompress video.
oMPEGinvolves bothspatialcompression andtemporal compression. Theformer
issimilartoJPEG,andthelatterremoves redundant frames.
oWecanuseaWebserver,oraWebserverwithametafile, oramediaserver,ora
mediaserverandRTSPtodownload astreaming audio/video file.
oReal-time dataonapacket-switched networkrequirethepreservation ofthetime
relationship betweenpacketsofasession.
oGapsbetweenconsecutive packetsatthereceivercauseaphenomenon calledjitter.
oJittercanbecontrolled throughtheuseoftimestamps andajudicious choiceofthe
playback time.
DAplayback bufferholdsdatauntiltheycanbeplayedback.
DAreceiverdelaysplayingbackreal-time dataheldintheplayback bufferuntila
threshold levelisreached.SECTION 29.12PRACTICE SET 927
oSequence numbers onreal-time datapacketsprovideaformoferrorcontrol.
oReal-time dataaremulticast toreceivers.
oReal-time trafficsometimes requiresatranslator tochangeahigh-bandwidth signal
toalower-quality narrow-bandwidth signal.
oAmixercombines signalsfromdifferent sourcesintoonesignal.
oReal-time multimedia trafficrequires bothUDPandReal-time Transport Protocol
(RTP).
oRTPhandlestime-stamping, sequencing, andmixing.
oReal-time Transport ControlProtocol (RTCP)provides flowcontrol,qualityofdata
control,andfeedback tothesources.
oVoiceoverIPisareal-time interactive audio/video application.
oTheSessionInitiation Protocol (SIP)isanapplication layerprotocol that establishes,
manages, andterminates multimedia sessions.
oH.323isanITUstandard thatallowsatelephone connected toapublictelephone
network totalktoacomputer connected totheInternet.
29.12PRACTICE SET
ReviewQuestions
1.Howdoesstreaming liveaudio/video differfromstreaming storedaudio/video?
2.Howdoesfrequency masking differfromtemporal masking?
3.Whatisthefunctionofametafileinstreaming storedaudio/video?
4.WhatisthepurposeofRTSPinstreaming storedaudio/video?
5.Howdoesjitteraffectreal-time audio/video?
6.DiscusshowSIPisusedinthetransmission ofmultimedia.
7.WhenwouldyouuseJPEG?WhenwouldyouuseMPEG?
8.InJPEG,whatisthefunctionofblocking?
9.WhyistheDCTneededinJPEG?
10.Whatisspatialcompression compared totemporal compression?
Exercises
11.InFigure29.17whatistheamountofdataintheplayback bufferateachofthe
following times?
a.00:00:17
b.00:00:20
c.00:00:25
d.00:00:30
12.Compare andcontrastTCPwithRTP.Arebothdoingthesamething?
13.CanwesayUDPplusRTPisthesameasTCP?
14.WhydoesRTPneedtheserviceofanotherprotocol, RTCP,butTCPdoesnot?928CHAPTER 29MULTIMEDIA
15.InFigure29.12,cantheWebserverandmediaserverrunondifferent machines?
16.WediscusstheuseofSIPinthischapterforaudio.Isthereanydrawback toprevent
usingitforvideo?
17.DoyouthinkH.323isactuallythesameasSIP?Whatarethedifferences? Makea
comparison betweenthetwo.
18.Whataretheproblems forfullimplementation ofvoiceoverIP?Doyouthinkwe
willstopusingthetelephone networkverysoon?
19.CanrI.323alsobeusedforvideo?
Research Activities
20.FindtheformatofanRTCPsenderreport.Payparticular attention tothepacket
lengthandthepartsrepeated foreachsource.Describe eachfield.
21.FindtheformatofanRTCPreceiverreport.Payparticular attention tothepacket
lengthandthepartsrepeated foreachsource.Describe eachfield.
22.FindtheformatofanRTCPsourcedescription. Payparticular attention tothe
packetlengthandthepartsrepeated foreachsource.Describe eachfield.
23.Findthemeaningofthesourcedescription itemsusedintheRTCPsourcedescription
packet.Specifically, findthemeaning ofCNAME, NAME,EMAIL, PHONE, LOC,
TOOL,NOTE,andPRIY.
24.FindtheformatofanRTCPbyemessage. Payparticular attentiontothepacketlength
andthepartsrepeated foreachsource.Describe eachfield.Security
Objectives
Noonecandenytheimportance ofsecurityindatacommunications andnetworking.
Security innetworking isbasedoncryptography, thescienceandartoftransforming
messages tomakethemsecureandimmunetoattack.Cryptography canprovideseveral
aspectsofsecurityrelatedtotheinterchange ofmessages throughnetworks. Theseaspects
areconfidentiality, integrity, authentication, andnonrepudiation.
Cryptography canprovideconfidentiality, integrity, authentication,
andnonrepudiation ofmessages.
Cryptography canalsobeusedtoauthenticate thesenderandreceiverofthemessage
toeachother.Forexample, auserwhoneedsaccesstotheresources ofasystemmust
firstbeauthorized. Wecallthisaspectentityauthentication.
Cryptography canalsoprovideentityauthentication.
Inthispartofthebook,wefirstintroduce cryptography withoutdelvingintothe
mathematical foundations ofthissubject.Wethenbrieflyexplore security aspectsas
appliedtoanetwork. Finally,wediscusssomecommon protocols thatimplement security
aspectsattheupperthreelayersoftheInternetmodel.
Part7ofthebookisdevotedtodifferent securityaspects.
Chapters
Thispartconsistsofthreechapters: Chapters 30, 31,and32.Chapter30
Chapter30isabriefdiscussion ofabroadtopiccalledcryptography. Although cryptography,
whichisbasedonabstractalgebra,canitselfbeacomplete course,weintroduce ithere
brieflyandavoidreferences toabstractalgebraasmuchaspossible. Wegivejustenough
background information asafoundation forthematerialinthenexttwochapters.
Chapter31
Chapter 31isanintroduction, andmotivation, forthebroadtopicofnetwork security.
Wediscussselectedissuesthatareoftenencountered whendealingwithcommunications
andnetworking problems.
Chapter32
Chapter32brieflydiscusses theapplications oftopicsdiscussed inChapters 30and31
totheInternetmodel.Weshowhownetwork securityandcryptography canbeusedin
threeupperlayersoftheInternetmodel.CHAPTER 30
Cryptography
Network securityismostlyachieved throughtheuseofcryptography, asciencebased
onabstractalgebra.Inthischapter,webrieflydiscussthecryptography suitableforthe
scopeofthisbook.Wehavetriedtolimitourdiscussion ofabstract algebra asmuchas
wecould.Ourgoalistogiveenoughinformation aboutcryptography tomakenetwork
securityunderstandable. Thechapteropensthedoorforstudying network securityin
Chapter31andInternetsecurityinChapter32.
30.1INTRODUCTION
Letusintroduce theissuesinvolvedincryptography. First,weneedtodefinesometerms;
thenwegivesometaxonomies.
Definitions
Wedefinesometermsherethatareusedintherestofthechapter.
Cryptography
Cryptography, awordwithGreekorigins,means"secretwriting." However, weusethe
termtorefertothescienceandartoftransforming messages tomakethemsecureand
immunetoattacks.Figure30.1showsthecomponents involved incryptography.
Figure30.1Cryptography components
Receiver
Plaintext
Encryption1------------+-1 DecryptionCiphertext
931932CHAPTER 30CRYPTOGRAPHY
Plaintext andCiphertext
Theoriginalmessage, beforebeingtransformed, iscalledplaintext. Afterthemessage
istransformed, itiscalledciphertext. Anencryption algorithm transforms theplain­
textintociphertext; adecryption algorithm transforms theciphertext backintoplain­
text.Thesenderusesanencryption algorithm, andthereceiver usesadecryption
algorithm.
Cipher
Werefertoencryption anddecryption algorithms asciphers. Thetermcipherisalso
usedtorefertodifferent categories ofalgorithms incryptography. Thisisnottosay
thateverysender-receiver pairneedstheirveryownuniquecipherforasecurecommu­
nication. Onthecontrary, oneciphercanservemillionsofcommunicating pairs.
Key
Akeyisanumber(orasetofnumbers) thatthecipher,asanalgorithm, operateson.To
encryptamessage, weneedanencryption algorithm, anencryption key,andtheplaintext.
Thesecreatetheciphertext. Todecryptamessage, weneedadecryption algorithm, a
decryption key,andtheciphertext. Theserevealtheoriginalplaintext.
Alice,Bob,andEve
Incryptography, itiscustomary tousethreecharacters inaninformation exchange
scenario; weuseAlice,Bob,andEve.Aliceisthepersonwhoneedstosendsecure
data.Bobistherecipient ofthedata.Eveisthepersonwhosomehow disturbsthecom­
munication betweenAliceandBobbyintercepting messages touncoverthedataorby
sendingherowndisguised messages. Thesethreenamesrepresent computers orpro­
cessesthatactuallysendorreceivedata,orintercept orchangedata.
TwoCategories
Wecandivideallthecryptography algorithms (ciphers) intotwogroups:symmetric­
key(alsocalledsecret-key) cryptography algorithms andasymmetric (alsocalled
public-key) cryptography algorithms. Figure30.2showsthetaxonomy.
Figure30.2Categories ofcryptography
Secret-key Public-keySECTION 30.1INTRODUCTION 933
Symmetric·Key Cryptography
Insymmetric-key cryptography, thesamekeyisusedbybothparties.Thesenderuses
thiskeyandanencryption algorithm toencryptdata;thereceiverusesthesamekeyand
thecorresponding decryption algorithm todecryptthedata(seeFigure30.3).
Figure30.3Symmetric-key cryptography
Sharedsecretkey
1---------------11---------------I
1 I
1 I
l t
I------------~ Decryption
L............__ -' CiphertextBob
r--
Plaintext
Insymmetric·key cryptography, thesamekeyisusedbythesender
(forencryption) andthereceiver(fordecryption).
Thekeyisshared.
Asymmetric-Key Cryptography
Inasymmetric orpublic-key cryptography, therearetwokeys:aprivatekeyandapublic
key.Theprivatekeyiskeptbythereceiver. Thepublickeyisannounced tothepublic.
InFigure30.4,imagineAlicewantstosendamessage toBob.Aliceusesthepublickey
toencryptthemessage. Whenthemessage isreceived byBob,theprivatekeyisusedto
decryptthemessage.
Figure30.4Asymmetric-key cryptography
Tothepublic1A
I 1_________________________ 1::.:.=_=_=_=_=:::: jBob'spublickey
....-----tBob'sprivatekey
y
Encryption1----- ~-----+1 DecryptionCiphertextBob
r
Plaintext
Inpublic-key encryption/decryption, thepublickeythatisusedforencryption is
different fromtheprivatekeythatisusedfordecryption. Thepublickey isavailable to
thepublic;'theprivatekeyisavailable onlytoanindividual.934CHAPTER 30CRYPTOGRAPHY
ThreeTypesofKeys
Thereadermayhavenoticedthatwearedealingwiththreetypesofkeysincryptography:
thesecretkey,thepublickey,andtheprivatekey.Thefirst,thesecretkey,istheshared
keyusedinsymmetric-key cryptography. Thesecondandthethirdarethepublic
andprivatekeysusedinasymmetric-key cryptography. Wewillusethreedifferent icons
forthesekeysthroughout thebooktodistinguish onefromtheothers,asshownin
Figure30.5.
Figure30.5Keysusedincryptography
I
Secretkey
Symmetric-key cryptographyPublickeyPrivatekey
Asynunetric-key cryptography
Comparison
Letuscompare symmetric-key andasymmetric-key cryptography. Encryption canbe
thoughtofaselectronic locking; decryption aselectronic unlocking. Thesenderputs
themessage inaboxandlockstheboxbyusingakey;thereceiverunlocksthebox
withakeyandtakesoutthemessage. Thedifference liesinthemechanism ofthelocking
andunlocking andthetypeofkeysused.
Insymmetric-key cryptography, thesamekeylocksandunlocks thebox.In
asymmetric-key cryptography, onekeylocksthebox,butanotherkeyisneededto
unlockit.Figure30.6showsthedifference.
Figure30.6Comparison betweentwocategories ofcryptography
Alice
Ciphertext
a.Symmetric-key cryptography
Alice
Ciphertext
b.Asymmetric-key cryptographySECTION 30.2SYMMETRIC-KEY CRYPTOGRAPHY 935
30.2SYMMETRIC-KEY CRYPTOGRAPHY
Symmetric-key cryptography startedthousands ofyearsagowhenpeopleneededto
exchange secrets(forexanlple, inawar).Westillmainlyusesymmetric-key cryptography
inournetworksecurity. However, today'sciphersaremuchmorecomplex. Letusfirst
discusstraditional algorithms, whichwerecharacter-oriented. Thenwediscussthemodem
ones,whicharebit-oriented.
Traditional Ciphers
Webrieflyintroduce sometraditional ciphers,whicharecharacter-oriented. Although
these are nowobsolete, thegoalistoshowhowmodernciphersevolvedfromthem.We
candividetraditional symmetric-key ciphersintotwobroadcategories: substitution
ciphersandtransposition ciphers,asshowninFigure30.7.
Figure30.7Traditional ciphers
Transposition
ciphers
Substitution Cipher
Asubstitution ciphersubstitutes onesymbolwithanother.Ifthesymbolsintheplain­
textarealphabetic characters, wereplaceonecharacter withanother.Forexample, we
canreplacecharacter AwithD,andcharacter TwithZ.Ifthesymbols aredigits(0to
9),wecanreplace3with7,and2with6.Substitution ciphers canbecategorized as
eithermonoalphabetic orpolyalphabetic ciphers.
Asubstitution cipherreplacesonesymbolwithanother.
Inamonoalphabetic cipher,acharacter (orasymbol)intheplaintext isalways
changedtothesamecharacter (orsymbol)intheciphertext regardless ofitspositionin
thetext.Forexample, ifthealgorithm saysthatcharacter Aintheplaintext ischanged
tocharacter D,everycharacter Aischangedtocharacter D.Inotherwords,therelation­
shipbetweencharacters intheplaintext andtheciphertext isaone-to-one relationship.
Inapolyalphabetic cipher,eachoccurrence ofacharacter canhaveadifferent
substitute. Therelationship between acharacter intheplaintext toacharacter inthe936CHAPTER 30CRYPTOGRAPHY
ciphertext isaone-to-many relationship. Forexample, character Acouldbechangedto
Dinthebeginning ofthetext,butitcouldbechangedtoNatthemiddle.Itisobvious
thatiftherelationship betweenplaintext characters andciphertext characters isone-to­
many,thekeymusttelluswhichofthemanypossible characters canbechosenfor
encryption. Toachievethisgoal,weneedtodividethetextintogroupsofcharacters
anduseasetofkeys.Forexample, wecandividethetext"THISISANEASYTASK"
intogroupsof3characters andthenapplytheencryption usingasetof3keys.Wethen
repeattheprocedure forthenext3characters.
Example 30.1
Thefollowing showsaplaintext anditscorresponding ciphertext. Istheciphermonoalphabetic?
Plaintext: HELLO
Ciphertext: KHOOR
Solution
Thecipherisprobably monoalphabetic becausebothoccurrences ofL'sareencrypted asO's.
Example 30.2
Thefollowing showsaplaintext anditscorresponding ciphertext. Istheciphermonoalphabetic?
Plaintext: HELLO
Ciphertext: ABNZF
Solution
Thecipherisnotmonoalphabetic becauseeachoccurrence ofLisencrypted byadifferent char­
acter.ThefirstLisencrypted asN;the second asZ.
ShiftCipher Thesimplest monoalphabetic cipherisprobably theshiftcipher.We
assumethattheplaintext andciphertext consistofuppercase letters(AtoZ)only.In
thiscipher,theencryption algorithm is"shiftkeycharacters down,"withkeyequalto
somenumber.Thedecryption algorithm is"shiftkeycharacters up."Forexample, ifthe
keyis5,theencryption algorithm is"shift5characters down"(towardtheendofthe
alphabet). Thedecryption algorithm is"shift5characters up"(towardthebeginning of
thealphabet). Ofcourse,ifwereachtheendorbeginning ofthealphabet, wewrap
around.
JuliusCaesarusedtheshiftciphertocommunicate withhisofficers.Forthisreason,
theshiftcipherissometimes referredtoastheCaesarcipher.Caesarusedakeyof3
forhiscommunications.
Theshiftcipherissometimes referredtoastheCaesarcipher.
Example 30.3
Usetheshiftcipherwithkey=15toencryptthemessage "HELLO."SECTION 30.2SYMMETRIC-KEY CRYPTOGRAPHY 937
Solution
Weencryptonecharacter atatime.Eachcharacter isshifted15characters down.LetterHis
encrypted toW.LetterEisencrypted toT.ThefirstLisencrypted toA.ThesecondLisalso
encrypted toA.And0isencrypted toD.TheciphertextisWTAAD.
Example 30.4
Usetheshiftcipherwithkey=15todecryptthemessage"WTAAD."
Solution
Wedecryptonecharacter atatime.Eachcharacter isshifted15characters up.LetterWis
decrypted toH.LetterTisdecrypted toE.ThefirstAisdecrypted toL.ThesecondAis
decrypted toL.And,finally,Disdecrypted toO.Theplaintext isHELLO.
Transposition Ciphers
Inatransposition cipher,thereisnosubstitution ofcharacters; instead,theirlocations
change.Acharacter inthefirstpositionoftheplaintext mayappearinthetenthposition
oftheciphertext. Acharacter intheeighthpositionmayappearinthefirstposition. In
otherwords,atransposition cipherreordersthesymbolsinablockofsymbols.
Atransposition cipherreorders (permutes) symbols inablockofsymbols.
KeyInatransposition cipher,thekeyisamapping betweenthepositionofthesymbols
intheplaintext andciphertext.Forexample, thefollowing showsthekeyusingablock
offourcharacters:
Plaintext:
Ciphertext:2 4 1 3
1234
Inencryption, wemovethecharacter atposition2toposition 1,thecharacter at
position4toposition2,andsoon.Indecryption, wedothereverse.Notethat,tobe
moreeffective, thekeyshouldbelong,whichmeansencryption anddecryption oflong
blocksofdata.Figure30.8showsencryption anddecryption forourfour-character
Figure30.8Transposition cipher
Plaintext
(block)Key. Plaintext
(block)
I"1123 4
111...+
11(rKIReorderI IReorderI (downward direction) (upwarddirection)
Encryption Decryption
Ciphertext (block)938CHAPTER 30CRYPTOGRAPHY
blockusingtheabovekey.Thefigureshowsthattheencryption anddecryption usethe
samekey.Theencryption appliesitfromdownward whiledecryption appliesitupward.
Example 30.5
Encryptthemessage "HELLO MYDEAR,"usingtheabovekey.
Solution
Wefirstremovethespacesinthemessage. Wethendividethetextintoblocksoffourcharacters.
Weaddaboguscharacter Zattheendofthethirdblock.TheresultisHELLOMYDEARZ.We
createathree-block ciphertext ELHLMDOYAZER.
Example 30.6
UsingExample 30.5,decryptthemessage "ELHLMDOYAZER".
Solution
TheresultisHELLOMYDEARZ.Afterremoving theboguscharacter andcombining thechar­
acters,wegettheoriginalmessage "HELLO MYDEAR."
SimpleModern Ciphers
Thetraditional cipherswehavestudiedsofararecharacter-oriented. Withtheadventof
thecomputer, ciphersneedtobebit-oriented. Thisissobecausetheinformation tobe
encrypted isnotjusttext;itcanalsoconsistofnumbers, graphics, audio,andvideodata.
Itisconvenient toconvertthesetypesofdataintoastreamofbits,encryptthestream,
andthensendtheencrypted stream.Inaddition, whentextistreatedatthebitlevel,each
character isreplaced by8(or16)bits,whichmeansthenumberofsymbolsbecomes 8
(or16).Mingling andmangling bitsprovides moresecuritythanmingling andmangling
characters. Modemciphersuseadifferent strategythanthetraditional ones.Amodern
symmetric cipherisacombination ofsimpleciphers.Inotherwords,amoderncipher
usesseveralsimplecipherstoachieveitsgoal.Wefirstdiscussthesesimpleciphers.
XORCipher
Moderncipherstodayarenormally madeofasetofsimpleciphers, whicharesimple
predefined functions inmathematics orcomputer science.Thefirstonediscussed here
iscalledtheXORcipherbecauseitusestheexclusive-or operation asdefinedincomputer
science.Figure30.9showsanXORcipher.
Figure30.9XORcipherSECTION 30.2SYMMETRIC-KEY CRYPTOGRAPHY 939
AnXORoperation needstwodatainputsplaintext, asthefirstandakeyasthesec­
ond.Inotherwords,oneoftheinputsistheblocktobetheencrypted, theotherinputis
akey;theresultistheencrypted block.NotethatinanXORcipher,thesizeofthekey,
theplaintext, andtheciphertext areallthesame.XORciphershaveaveryinteresting
property: theencryption anddecryption arethesame.
Rotation Cipher
Another common cipheristherotationcipher,inwhichtheinputbitsarerotatedto
theleftorright.Therotationciphercanbekeyedorkeyless.Inkeyedrotation,thevalueof
thekeydefinesthenumberofrotations; inkeylessrotationthenumberofrotations isfixed.
Figure30.10showsanexampleofarotationcipher.Notethattherotationciphercanbe
considered aspecialcaseofthetranspositional cipherusingbitsinsteadofcharacters.
Figure30.10Rotation cipher
Input
Output
Therotationcipherhasaninteresting property.Ifthelengthoftheoriginalstream
isN,afterNrotations, wegettheoriginalinputstream.Thismeansthatitisuselessto
applymorethanN-1rotations. Inotherwords,thenumberofrotations mustbebetween
1andN-1.
Thedecryption algorithm fortherotationcipherusesthesamekeyandtheopposite
rotationdirection. Ifweusearightrotationintheencryption, weusealeftrotationin
decryption andviceversa.
Substitution Cipher:S-box
AnS-box(substitution box)parallels thetraditional substitution cipherforcharacters.
TheinputtoanS-boxisastreamofbitswithlengthN;theresultisanotherstreamof
bitswithlengthM.AndNandMarenotnecessarily thesame.Figure30.11showsan
S-box.
TheS-boxisnormally keylessandisusedasanintermediate stageofencryption
ordecryption. Thefunction thatmatchestheinputtotheoutputmaybedefinedmathe­
matically orbyatable.
Transposition Cipher:P-box
AP-box(permutation box)forbitsparallelsthetraditional transposition cipherforchar­
acters.Itperforms atransposition atthebitlevel;ittransposes bits.Itcanbeimplemented940CHAPTER 30CRYPTOGRAPHY
Figure30.11S-box
S-boxNinputbits
Afunction thatmatchesNinputs
toMoutputs
Moutputbits
insoftware orhardware, buthardware isfaster.P-boxes, likeS-boxes, arenonnally key­
less.Wecanhavethreetypesofpennutations inP-boxes: thestraight permutation,
expansion permutation, andcompression permutation asshowninFigure30.12.
Figure30.12P-boxes: straight, expansion, andcompression
2 3 45
22
3a.Straight
3
452 3 45
23
24
35
b.Expansion c.Compression
Astraightpermutation cipherorastraightP-boxhasthesamenumberofinputsas
outputs.Inotherwords,ifthenumberofinputsisN,thenumberofoutputsisalsoN.In
anexpansion pennutation cipher,thenumberofoutputportsisgreaterthanthenumber
ofinputports.Inacompression pennutation cipher,thenumberofoutputportsisless
thanthenumberofinputports.
Modern RoundCiphers
Theciphersoftodayarecalledroundciphersbecausetheyinvolvemultiple rounds,
whereeachroundisacomplex ciphermadeupofthesimpleciphersthatwepreviouslySECTION 30.2SYMMETRIC-KEY CRYPTOGRAPHY 941
described. Thekeyusedineachroundisasubsetorvariation ofthegeneralkeycalledthe
roundkey.IfthecipherhasNrounds,akeygenerator producesNkeys,KbKz,...,KN,
whereK1isusedinround1,K2inround2,andsoon.
Inthissection,weintroduce twomodemsymmetric-key ciphers:DESandAES.
Theseciphersarereferredtoasblockciphersbecausetheydividetheplaintext into
blocksandusethesamekeytoencryptanddecrypttheblocks.DEShasbeenthede
factostandard untilrecently.AESistheformalstandardnow.
DataEncryption Standard (DES)
Oneexampleofacomplex blockcipheristheDataEncryption Standard (DES).DES
wasdesigned byIBMandadoptedbytheU.S.government asthestandard encryption
methodfornonmilitary andnonclassified use.Thealgorithm encrypts a64-bitplaintext
blockusinga64-bitkey,asshowninFigure30.13.
Figure30.13DES
64-bitplaintext
DES
IInitialpermutationI
r---------I---------~I IIKj
Round1I~
•I
I
IIIK2
Round2p
Round
key....
...-
• •generator
• ••·
Kl6
ILRound16
I
~--------1t---------
IFinalpermutationI
,..64-bitkey
64-bitciphertext
DEShastwotransposition blocks(P-boxes) and16complexroundciphers(theyare
repeated). Although the16iterationroundciphersareconceptually thesame,eachuses
adifferent keyderivedfromtheoriginalkey.
Theinitialandfinalpermutations arekeylessstraightpermutations thatarethe
inverseofeachother.Thepermutation takesa64-bitinputandpermutes themaccording
topredefined values.942CHAPTER 30CRYPTOGRAPHY
EachroundofDESisacomplex roundcipher,asshowninFigure30.14.Notethat
thestructure oftheencryption roundciphersisdifferentfromthatofthedecryption one.
Figure30.14OneroundinDESciphers
Kj
(48bits)
a.Encryption round b.Decryption roundK;
(48bits)
DESFunction TheheartofDESistheDESfunction. TheDESfunction appliesa
48-bitkeytotherightmost 32bitsRitoproducea32-bitoutput.Thisfunctionismade
upoffouroperations: anXOR,anexpansion permutation, agroupofS-boxes, anda
straightpermutation, asshowninFigure30.15.
Figure30.15DESfunction
R;
(32bits)
Function
S-boxesXOR~---- ...-K;(48bits)
32bitsSECTION 30.2SYMMETRIC-KEY CRYPTOGRAPHY 943
TripleDES
CriticsofDEScontendthatthekeyistooshort.Tolengthen thekey,TripleDESor3DES
hasbeenproposed andimplemented. ThisusesthreeDESblocks,asshowninFigure30.16.
Notethattheencrypting blockusesanencryption-decryption-encryption combination of
DESs,whilethedecryption blockusesadecryption-encryption-decryption combination.
Twodifferentversionsof3DESareinuse:3DESwithtwokeysand3DESwiththreekeys.
Tomakethekeysize112bitsandatthesametimeprotectDESfromattackssuchasthe
man-in-the-middle attack,3DESwithtwokeyswasdesigned. Inthisversion,thefirstand
thethirdkeysarethesame(KeYl=KeY3)'Thishastheadvantage inthatatextencrypted by
asingleDESblockcanbedecrypted bythenew3DES.WejustsetallkeysequaltoKeYl'
Manyalgorithms usea3DEScipherwiththreekeys.Thisincreases thesizeofthekey
to168bits.
Figure30.16TripleDES
64-bitplaintext 64-bitplaintext
EncryptDES KeYl Decrypt DES KeYl
filtn
QDecrypt DES KeY2gs
EncryptDES KeY2.., ..,
15.. "S..
'I::ES E-;
EncryptDESKeY3DecryptDESKeY3
64-bitciphertext 64-bitciphertext
a.Encryption TripleDES b.Decryption TripleDES
Advanced Encryption Standard (AES)
TheAdvanced Encryption Standard (AES)wasdesigned becauseDES'skeywastoo
small.Although TripleDESODES)increased thekeysize,theprocesswastooslow.
TheNational Institute ofStandards andTechnology (NIST)chosetheRijndael
algorithm, namedafteritstwoBelgianinventors, VincentRijmenandJoanDaemen,
asthebasisofAES.AESisaverycomplex roundcipher.AESisdesigned withthree
keysizes:128,192,or256bits.Table30.1showstherelationship betweenthedatablock,
numberofrounds,andkeysize.
Table30.1AESconfiguration
SizeofDataBlock NumberofRounds KeySize
10 128bits
128bits 12 192bits
14 256bits944CHAPTER 30CRYPTOGRAPHY
AEShasthreedifferent configurations withrespect
tothenumberofroundsandkeysize.
Inthistext,wediscussjustthelO-round, 12S-bitkeyconfiguration. Thestructure and
operation oftheotherconfigurations aresimilar.Thedifference liesinthekeygeneration.
Thegeneralstructure isshowninFigure30.17.ThereisaninitialXORoperation
followed by10roundciphers.Thelastroundisslightlydifferent fromthepreceding
rounds;itismissingoneoperation.
Although the10iteration blocksarealmostidentical, eachusesadifferent key
derivedfromtheoriginalkey.
Figure30.17AES
12S-bitplaintext
AES
+""Ko
/
r--------- -----------,
iII~K1
Ronnd1II
I•I
iII RoundIIK2keyRound2Iigenerator
I
II
II
I·I
I·I·· I·I· I I
I I
I I
iIRound10 IlKIO
(slightlydifferent) III'---------------______ 1
,r12S-bitkey
l2S-bitciphertext
Structure ofEachRound EachroundofAES,exceptforthelast,isacipherwithfour
operations thatareinvertible. Thelastroundhasonlythreeoperations. Figure30.18is
aflowchart thatshowstheoperations ineachround.Eachofthefouroperations usedin
eachroundusesacomplex cipher;thistopicisbeyondthescopeofthisbook.
OtherCiphers
Duringthelasttwodecades, afewothersymmetric blockciphershavebeendesigned and
used.Mostoftheseciphershavesimilarcharacteristics tothetwocipherswediscussed in
thischapter(DESandAES).Thedifference isusuallyinthesizeoftheblockorkey,the
numberofrounds,andthefunctions used.Theprinciples arethesame.Inordernotto
burdentheuserwiththedetailsoftheseciphers,wegiveabriefdescription ofeach.SECTION 30.2SYMMETRIC-KEY CRYPTOGRAPHY 945
Figure30.18Structure ofeachround
Roundi
SubByte128-bitdata
Bytesubstitution
ShiftRow
Bytepermutation
MixCo1umn
~~~~IKi
1__ _ _ _ _ _ _ _ _ _ _ _ _ J
128-bitdata
IDEATheInternational DataEncryption Algorithm (IDEA)wasdeveloped byXuejia
LaiandJamesMassey.Theblocksizeis64andthekeysizeis128.Itcanbeimple­
mentedinbothhardware andsoftware.
Blowfish Blowfish wasdeveloped byBruceSchneier. Theblocksizeis64andthe
keysizebetween32and448.
CAST-128CAST-128 wasdeveloped byCarlisleAdamsandStaffordTavares.Itisa
Feistelcipherwith16roundsandablocksizeof64bits;thekeysizeis128bits.
ReSRCSwasdesigned byRonRivest.Itisafamilyofcipherswithdifferent block
sizes,keysizes,andnumbers ofrounds.
ModeofOperation
Amodeofoperation isatechnique thatemploysthemodernblockcipherssuchasDES
andAES thatwediscussed earlier(seeFigure30.19).
Figure30.19Modesofoperation forblockciphers946CHAPTER 30CRYPTOGRAPHY
Electronic CodeBook
Theelectronic codebook(ECB)modeisapurelyblockciphertechnique. Theplain­
textisdividedintoblocksofNbits.Theciphertext ismadeofblocksofNbits.The
valueofNdependsonthetypeofcipherused.Figure30.20showsthemethod.
Figure30.20ECBmode
KPi:Plaintext blocki
Ci:Ciphertext blocki
NbitsK
Wementionfourcharacteristics ofthismode:
1.Becausethekeyandtheencryption/decryption algorithm arethesame,equalblocks
intheplaintext becomeequalblocksintheciphertext. Forexample, ifplaintext
blocks1,5,and9arethesame,ciphertext blocksI,5,and9arealsothesame.
Thiscanbeasecurityproblem; theadversary canguessthattheplaintext blocks
arethesameifthecorresponding ciphertext blocksarethesame.
2.Ifwereordertheplaintext block,theciphertext isalsoreordered.
3.Blocksareindependent ofeachother.Eachblockisencrypted ordecrypted inde­
pendently. Aprobleminencryption ordecryption ofablockdoesnotaffectother
blocks.
4.Anerrorinoneblockisnotpropagated tootherblocks.Ifoneormorebitsarecor­
ruptedduringtransmission, itonlyaffectsthebitsinthecorresponding plaintext
afterdecryption. Otherplaintext blocksarenotaffected. Thisisarealadvantage if
thechannelisnotnoise-free.
CipherBlockChaining
Thecipherblockchaining (CBC)modetriestoalleviatesomeoftheproblems inECB
byincluding thepreviouscipherblockinthepreparation ofthecurrentblock.Ifthecur­
rentblockisi,thepreviousciphertext blockCi-1isincludedintheencryption ofblocki.
Inotherwords,whenablockiscompletely enciphered, theblockissent,butacopyofit
iskeptinaregister(aplacewheredatacanbeheld)tobeusedintheencryption ofthe
nextblock.Thereadermaywonderabouttheinitialblock.Thereisnociphertext block
beforethefirstblock.Inthiscase,aphonyblockcalledtheinitiation vector(IV)is
used.Boththesenderandreceiveragreeuponaspecificpredetermined IV.Inother
words,theIVisusedinsteadofthenonexistent CO,Figure30.21showstheCBCmode.
Thereadermaywonderaboutthedecryption. Doestheconfiguration showninthe
figureguarantee thecorrectdecryption? Itcanbeproventhatitdoes,butweleavethe
prooftoatextbook innetworksecurity.SECTION 30.2SYMMETRIC-KEY CRYPTOGRAPHY 947
Figure30.21 CBCmode
KInitiated
,..--------''------.--.--" withIVF,:Plaintext blocki
CiCiphertext blocki
IV:Initialization vector
NbitsInitiated
withIV,------''------"
K
Thefollowing aresomecharacteristics ofCBC.
1.Eventhoughthekeyandtheencryption/decryption algorithm arethesame,equal
blocksintheplaintext donotbecomeequalblocksintheciphertext. Forexample,
ifplaintext blocks1,5,and9arethesame,ciphertext blocksI,5,and9willnotbe
thesame.Anadversary willnotbeabletoguessfromtheciphertext thattwoblocks
arethesame.
2.Blocksaredependent oneachother.Eachblockisencrypted ordecrypted basedon
aprevious block.Aproblem inencryption ordecryption ofablockaffectsother
blocks.
3.Theerrorinoneblockispropagated totheotherblocks.Ifoneormorebitsare
corrupted duringthetransmission, itaffectsthebitsinthenext blocks oftheplain­
textafterdecryption.
CipherFeedback
Thecipherfeedback (CFB)modewascreatedforthosesituations inwhichweneed
tosendorreceiverbitsofdata,whererisanumberdifferent fromtheunderlying
blocksizeoftheencryption cipherused.Thevalueofrcanbe1,4,8,oranynumberof
bits.Sinceallblockciphersworkonablockofdataatatime,theproblem ishowto
encryptjustrbits.Thesolution istoletthecipherencryptablockofbitsanduseonly
thefirstrbitsasanewkey(streamkey)toencrypttherbitsofuserdata.Figure30.22
showstheconfiguration.
Thefollowing aresomecharacteristics oftheCFBmode:
1.IfwechangetheIVfromoneencryption toanotherusingthesameplaintext, the
ciphertext isdifferent.
2.Theciphertext Cidepends onbothPiandthepreceding ciphertext block.
3.Errorsinoneormorebitsoftheciphertext blockaffectthenextciphertext blocks.
OutputFeedback
Theoutputfeedback (OFB)modeisverysimilartotheCFBmodewithonedifference.
Eachbitintheciphertext isindependent oftheprevious bitorbits.Thisavoidserror948CHAPTER 30CRYPTOGRAPHY
Figure30.22CFBmode
N-bit
shiftregister
initiallyIV
rbits
Pi--~rbits
- - - Ci_1
p/Plaintext blocki
Ci:Ciphertext blocki
IV:Initialization vector
rbitsActualkeyN-bit
shiftregister
initiallyIVrbits---Ci-1
propagation. Ifanerroroccursintransmission, itdoesnotaffectthefuturebits.Note
that,asinCFB,boththesenderandthereceiverusetheencryption algorithm. Note
alsothatinOFB,blockcipherssuchasDESorAEScanonlybeusedtocreatethekey
stream.Thefeedback forcreatingthenextbitstreamcomesfromtheprevious bitsof
thekeystreaminsteadoftheciphertext. Theciphertext doesnottakepartincreating
thekeystream.Figure30.23showstheOFBmode.
Figure30.23OFBmode
N-bit
shiftregister
initiallyIV
Actualkeyrbits
Pi:Plaintext blocki
Cj:Ciphertext blocki
IV:Initialization vectorKN-bit
shiftregister
initiallyIV
Actualkeyrbits
rbits +rbitsPi
+}----------------+J PiCi
Thefollowing aresomeofthecharacteristics oftheOFBmode.
1.IfwechangetheIVfromoneencryption toanotherusingthesameplaintext, the
ciphertext willbedifferent.
2.Theciphertext Cidependsontheplaintext Pi'
3.Errorsinoneormorebitsoftheciphertext donotaffectfutureciphertext blocks.SECTION 30.3ASYMMETRIC-KEY CRYPTOGRAPHY 949
30.3ASYMMETRIC-KEY CRYPTOGRAPHY
Intheprevious sections, wediscussed symmetric-key cryptography. Inthissectionwe
introduce asymmetric-key (publickeycryptography). Aswementioned before,an
asymmetric-key (orpublic-key) cipherusestwokeys:oneprivateandonepublic.We
discusstwoalgorithms: RSAandDiffie-Hellman.
RSA
Themostcommon publickeyalgorithm isRSA,namedforitsinventors Rivest,Shamir,
andAdleman (RSA).Itusestwonumbers, eandd,asthepublicandprivatekeys,as
showninFigure30.24.
Figure30.24RSA
Topublic
i!i
, , I
I , I,__L L __J _
I
.~:
;;5,e::>,
0-<,,
Y
j
C=pemodn
EncryptionCiphertextCalculating e,d,
mldn
p=Cemodn
DecryptionBob
--
Plaintext
Thetwokeys,eandd,haveaspecialrelationship toeachother,adiscussion ofthis
relationship isbeyondthescopeofthisbook.Wejustshowhowtocalculate thekeys
withoutproof.
Selecting Keys
Bobusethefollowing steps toselecttheprivateandpublickeys:
1.Bobchoosestwoverylargeprimenumberspandq.Remember thataprimenum­
berisonethatcanbedividedevenlyonlyby1anditself.
2.Bobmultiplies theabovetwoprimestofindn,themodulus forencryption and
decryption. Inotherwords,n:::pXq.
3.Bobcalculates anothernumber <1>:::(p-1)X(q-1).
4.Bobchoosesarandomintegere.Hethencalculates dsothatdxe:::1mod <1>.
5.Bobannounces eandntothepublic;hekeeps <1>anddsecret.
InRSA,eandnareannounced tothepublic;dand<I>arekeptsecret.950CHAPTER 30CRYPTOGRAPHY
Encryption
Anyonewhoneedstosendamessage toBobcanusenande.Forexample, ifAlice
needstosendamessage toBob,shecanchangethemessage, usuallyashortone,toan
integer.Thisistheplaintext. Shethencalculates theciphertext, usingeandn.
C=pt!(modn)
AlicesendsC,theciphertext, toBob.
Decryption
Bobkeeps <panddprivate.Whenhereceivestheciphertext, heuseshisprivatekeydto
decryptthemessage:
P=Cd(modn)
Restriction
ForRSAtowork,thevalueofPmustbelessthanthevalueofn.IfPisalargenumber,
theplaintext needstobedividedintoblockstomakePlessthann.
Example 30.7
Bobchooses7and11aspandqandcalculates n= 7 .11=77.Thevalueof<p=(7-1)(11-1)
or60.Nowhechoosestwokeys,eandd.Ifhechooses etobe13,thendis37.Nowimagine
Alicesendstheplaintext 5toBob.Sheusesthepublickey13toencrypt5.
Plaintext: 5
C=513;::::26mod77
Ciphertext: 26
Bobreceivestheciphertext 26andusestheprivatekey37todecipher theciphertext:
Ciphertext: 26
P=2637=5mod77
Plaintext: 5 Intended m~agesentbY'Alice
Theplaintext 5sentbyAliceisreceived asplaintext 5byBob.
Example 30.8
Jennifercreatesapairofkeysforherself.Shechoosesp=397andq=401.Shecalculates n=
159,197and<p=396.400=158,400. Shethenchooses e=343andd=12,007.ShowhowTed
cansendamessage toJenniferifheknowseandn.
Solution
Suppose Tedwantstosendthemessage "NO"toJennifer. Hechangeseachcharacter toanumber
(from00to25)witheachcharacter codedastwodigits.Hethenconcatenates thetwocoded
characters andgetsafour-digit number.Theplaintext is1314.Tedthenuseseandntoencrypt
themessage. Theciphertext is1314343=33,677mod159,197. Jennifer receives themessageSECTION 30.3ASYMMETRIC-KEY CRYPTOGRAPHY 951
33,677andusesthedecryption keydtodecipheritas33,67712,007=1314mod159,197.Jennifer
thendecodes1314asthemessage"NO".Figure30.25showstheprocess.
Figure30.25Example 30.8
Jennifer
r
id=12,007P''''391q'"401
n;::;·159,197
e",)43d"'·12,007
I-------i~ P=33.67712,007mod159,1971------'je=343
C=1314:>43.mod159,197
Example 30.9
Letusgivearealisticexample. Wechoosea512-bitp andq.Wecalculatenand <1>.Wethen
chooseeandtestforrelativeprimeness with<I>(n).Wecalculate d.Finally,weshowtheresultsof
encryption anddecryption. WehavewrittenaprogramwritteninJavatodoso;thistypeofcalcula­
tioncannotbedonebyacalculator.
Werandomly choseanintegerof512bits.Theintegerpisa159-digitnumber.
p=96130345313583504574191581280615427909309845594996215822583150879647940
45505647063849125716018034750312098666606492420191808780667421096063354
219926661209
Theintegerqisa160-digitnumber.
q=12060191957231446918276794204450896001555925054637033936061798321731482
14848376465921538945320917522527322683010712069560460251388714552496900
0359660045617
Wecalculate n.Ithas309digits.
n=11593504I73967614968892509864615887523771457375454144775485526137614788
54083263508172768788159683251684688493006254857641112501624145523391829
27162507656772727460097082714127730434960500556347274566628060099924037
10299142447229221577279853172703383938133469268413732762200096667667183
1831088373420823444370953
Wecalculate <1>.Ithas309digits:
<1>=
115935041739676149688925098646158875237714~7375454144775485526137614788
54083263~0817276878&159683251684688493OO6254857641112501624145523391829
27162507656751054233608492916752034482627988117554787657013923444405716
98958172819609822636107546721186461217135910735864061400888517026537727
1264467341066243857664128952CHAPTER 30CRYPTOGRAPHY
Wechoosee=35,535.Wethenfindd.
e=35335
d=58oo8302860037763936093661289677917594669062089650962180422866111380593852
82235873170628691003002171085904433840217072986908760061153062025249598844
48047568240966247081485817130463240644077704833134010850947385295645071936
77406119732655742423721761767462077637164207600337085333288532144708859551
36670294831
Alicewantstosendthemessage "THISISATEST"whichcanbechanged toanumeric
valuebyusingthe00-26encoding scheme(26isthespacecharacter).
P=1907081826081826002619041819
Theciphertext calculated byAliceisC=pe,whichis
c'=
475309123646226827206365550610545J80942371796070491716523239243aS44j~',
60613199328566617843418359114151197411252005682979794571736036101278:21'
8847892741566090480023507190715277185914975188465888632101148354103361
6578984679683867637337657774656250792805211481418440481418443081277305",
9004692874248559166462108656
Bobcanrecovertheplaintext fromtheciphertext byusingP=Cd,whichis
P=:1907081826081826002619041819
Therecovered plaintext isTHISISATESTafterdecoding.
Applications
Although RSAcanbeusedtoencryptanddecryptactualmessages, itisveryslowifthe
message islong.RSA,therefore, isusefulforshortmessages suchasasmallmessage
digest(seeChapter31)orasymmetric keytobeusedforasymmetric-key cryptosystem.
Inparticular, wewillseethatRSAisusedindigitalsignatures andothercryptosystems
thatoftenneedtoencryptasmallmessage withouthavingaccesstoasymmetric key.
RSAisalsousedforauthentication aswewillseelater.
Diffie-Hellman
RSAisapublic-key cryptosystem thatisoftenusedtoencryptanddecryptsymmetric
keys.Diffie-Hellman, ontheotherhand,wasoriginally designed forkeyexchange. Inthe
Diffie-Hellman cryptosystem, twopartiescreateasymmetric sessionkeytoexchange
datawithouthavingtoremember orstorethekeyforfutureuse.Theydonothavetomeet
toagreeonthekey;itcanbedonethroughtheInternet.Letusseehowtheprotocolworks
whenAliceandBobneedasymmetric keytocommunicate. Beforeestablishing asym­
metrickey,thetwopartiesneedtochoosetwonumberspandg.Thefirstnumber,p,isaSECTION 30.3ASYMMETRIC-KEY CRYPTOGRAPHY 953
largeprimenumberontheorderof300decimaldigits(1024bits).Thesecondnumberis
arandomnumber.Thesetwonumbers neednotbeconfidential. Theycanbesentthrough
theInternet;theycanbepublic.
Procedure
Figure30.26showstheprocedure. Thestepsareasfollows:
Figure30.26Diffie-Hellman method
0,-....,._ ...Thevaluesof
pandgarepublic.
Sharedsecretkey~-.;.,._....
-------------------0-------------------
K=gXYmodp
oStep1:Alicechoosesalargerandomnumberxandcalculates R1=Ifmodp.
oStep2:Bobchoosesanotherlargerandomnumberyandcalculates R2=gYmodp.
oStep3:AlicesendsR1toBob.NotethatAlicedoesnotsendthevalueofx;she
sendsonlyR1-oStep4:BobsendsR2toAlice.Again,notethatBobdoesnotsendthevalueofy,
hesendsonlyR2.
oStep5:Alicecalculates K=(R2lmodp.
oStep6:Bobalsocalculates K=(R1?modp.
Thesymmetric keyforthesessionisK.
(.fmodp)Ymodp=(gYmodp)Xmodp=.fYmodp
Bobhascalculated K=(R1?modp=(Ifmodp?modp=lfYmodp.Alicehas
calculated K=(R2)Xmodp=(gYmodp)Xmod=lfYmodp.Bothhavereachedthesame
valuewithoutBobknowing thevalueofxandwithoutAliceknowing thevalueofy.
Thesymmetric (shared)keyintheDiffie-Hellman protocolis
K=!tYmodp.954CHAPTER 30CRYPTOGRAPHY
Example 30.10
Letusgiveatrivialexample tomaketheprocedure clear.Ourexample usessmallnum­
bers,butnotethatinarealsituation, thenumbers areverylarge.Assumeg=7andp=23.
Thestepsareasfollows:
1.Alicechoosesx=3andcalculates R1=73mod23=21.
2.Bobchoosesy=6andcalculates R2=76mod23=4.
3.Alicesendsthenumber21toBob.
4.Bobsendsthenumber4toAlice.
5.Alicecalculates thesymmetric keyK=43mod23=18.
6.Bobcalculates thesymmetric keyK=216mod23=18.
ThevalueofKisthesameforbothAliceandBob;EfYmodp=718mod23=18.
IdeaofDiffie-Hellman
TheDiffie-Hellman concept, showninFigure30.27,issimplebutelegant.Wecanthink
ofthesecretkeybetweenAliceandBobasmadeofthreeparts:g,x,andy.Thefirstpart
ispublic.Everyone knowsone-third ofthekey;gisapublicvalue.Theothertwoparts
mustbeaddedbyAliceandBob.Eachaddsonepart.Aliceaddsxasthesecondpartfor
Bob;BobaddsyasthesecondpartforAlice.WhenAlicereceivesthetwo-thirds com­
pletedkeyfromBob,sheaddsthelastpart,herx,tocomplete thekey.WhenBobreceives
thetwo-thirds completed keyfromAlice,headdsthelastpart,hisy,tocomplete thekey.
Notethatalthough thekeyinAlice'shandconsistsofg-y-xandthekeyinBob'shandis
g-x-y,thesetwokeysarethesamebecauseEfY=gYx.
Figure30.27Diffie-Hellman idea
Alice_....
bd
Alicefillsupanother!
one-third ofthe
secretkeyusing
herrandomnumber
fBOne-third ofthekeyispublic.
Thetwokeysarethesame
becauseitdoesnotmatter
ifxisfilledfirstory.Bobfillsupanother
one-third ofthe
secretkeyusing
hisrandomnumberSECTION 30.3ASYMMETRIC-KEY CRYPTOGRAPHY 955
Notealsothatalthoughthetwokeysarethesame,Alicecannotfindthevalueyusedby
Bobbecausethe calculation isdoneinmodulop;Alicereceives gYmodpfromBob,notgY.
Man-in-the-Middle Attack
Diffie-Hellman isaverysophisticated symmetric-key creationalgorithm.Ifxandyare
verylargenumbers, itisextremely difficultforEvetofindthekey,knowing onlypand
g.Anintruderneedstodetermine xandyifR1andR2areintercepted. Butfindingx
fromR1andyfromR2aretwodifficulttasks.Evenasophisticated computer would
needperhapsyearstofindthekeybytryingdifferent numbers. Inaddition, Aliceand
Bobwillchangethekeythenexttimetheyneedtocommunicate.
However, theprotocoldoeshaveaweakness. Evedoesnothavetofindthevalueof
xandytoattacktheprotocol. ShecanfoolAliceandBobbycreatingtwokeys:one
between herselfandAliceandanotherbetween herselfandBob.Figure30.28shows
thesituation.
Figure30.28Man-in-the-middle attack
pandgarepublic.
Alice
Eve
Rz=gZmodp
K]:=;(R1)tmodp
Kz""(R;FmodpBob".
R3=gYmodp
Alice-Eve key Eve-Bob key-----------1----------------------1----------
K1=gXZmodp Kz=gZYmodp
Thefollowing canhappen:
1.Alicechoosesx,calculates R1=gXmodp,andsendsR1toBob.
2.Eve,theintruder, intercepts Rl'Shechoosesz,calculates R2=Efmodp,andsends
R2tobothAliceandBob.956CHAPTER 30CRYPTOGRAPHY
3.Bobchooses y,calculates R3=gYmodp,andsendsR3toAlice;R3isintercepted
byEveandneverreachesAlice.
4.AliceandEvecalculate KI=Etzmodp,whichbecomes asharedkeybetweenAlice
andEve.Alice,however, thinksthatitisakeysharedbetweenBobandherself.
5.EveandBobcalculate K2=gZYmodp,whichbecomes asharedkeybetweenEve
andBob.Bob,however, thinksthatitisakeysharedbetweenAliceandhimself.
Inotherwords,twokeys,insteadofone,arecreated:onebetweenAliceandEveand
onebetweenEveandBob.WhenAlicesendsdatatoBobencrypted withK1(sharedby
AliceandEve),itcanbedeciphered andreadbyEve.EvecansendthemessagetoBob
encrypted byK2(sharedkeybetweenEveandBob);orshecanevenchangethemes­
sageorsendatotallynewmessage. Bobisfooledintobelieving thatthemessage has
comefromAlice.AsimilarscenariocanhappentoAliceintheotherdirection.
Thissituationiscalledaman-in-the-middle attackbecauseEvecomesinbetween
andintercepts RI,sentbyAlicetoBob,andR3,sentbyBobtoAlice.Itisalsoknown
asabucketbrigadeattackbecauseitresembles ashortlineofvolunteers passinga
bucketofwaterfrompersontoperson.
Authentication
Theman-in-the-middle attackcanbeavoidedifBobandAlicefirstauthenticate each
other.Inotherwords,theexchange keyprocesscanbecombined withanauthentication
schemetopreventaman-in-the-middle attack.Wediscussauthentication inChapter31.
30.4RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
books.Theitemsinbrackets[...]refertothereference listattheendofthetext.
Books
Cryptography canbefoundinmanybooksdedicated tothesubjectsuchas[Bar02],
[GartH], [Sti02],[Mao04], [MOV97], and[Sch96].
30.5KEYTERMS
Advanced Encryption Standard (AES)
blockcipher
bucketbrigadeattack
Caesarcipher
cipherblockchaining (CBC)mode
cipherfeedback (CFB)mode
ciphertext
compression permutationcryptography
DataEncryption Standard (DES)
decryption
decryption algorithm
DESfunction
Diffie-Hellman cryptosystem
electronic codebook(ECB)mode
encryptionencryption algorithm
expansion permutation
initiation vector(IV)
key
man-in-the-middle attack
modeofoperation
monoalphabetic cipher
National InstituteofStandards and
Technology (NIST)
outputfeedback (OFB)mode
P-box
plaintext
polyalphabetic cipher
privatekey
publickeySECTION 30.6SUMMARY 957
Rijndael algorithm
Rivest,Shamir,Adleman (RSA)
rotationcipher
round
roundcipher
S-box
secretkey
sessionkey
shiftcipher
simplecipher
straightpermutation
substitution cipher
transposition cipher
TripleDES
XORcipher
30.6SUMMARY
oCryptography isthescienceandartoftransforming messages tomakethemsecure
andimmune toattacks.
oTheplaintext istheoriginalmessage beforetransformation; theciphertext isthe
message aftertransformation.
oAnencryption algorithm transforms plaintext tociphertext; adecryption algorithm
transforms ciphertext toplaintext.
oAcombination ofanencryption algorithm andadecryption algorithm iscalleda
cipher.
oThekeyisanumberorasetofnumbers onwhichthecipheroperates.
oWecandivideallciphersintotwobroadcategories: symmetric-key ciphersand
asymmetric-key ciphers.
oInasymmetric-key cipher,thesamekeyisusedbyboththesenderandreceiver. The
keyiscalledthesecretkey.
oInanasymmetric-key cipher,apairofkeysisused.Thesenderusesthepublickey;
thereceiverusestheprivatekey.
oAsubstitution cipherreplaces onecharacter withanothercharacter.
oSubstitution cipherscanbecategorized intotwobroadcategories: monoalphabetic
andpolyalphabetic.
oTheshiftcipheristhesimplest monoalphabetic cipher.Itusesmodular arithmetic
withamodulus of26.TheCaesarcipherisashiftcipherthathasakeyof3.
oThetransposition cipherreorders theplaintext characters tocreateaciphertext.oAnXORcipheristhe simplest cipherwhichisself-invertible.
oArotationcipherisaninvertible cipher.958CHAPTER 30CRYPTOGRAPHY
oAnS-boxisakeylesssubstitution cipherwithNinputsandMoutputsthatusesa
formulatodefinetherelationship between theinputstreamandtheoutputstream.
oAP-boxisakeylesstransposition cipherwithNinputsandMoutputsthatusesa
tabletodefinetherelationship between theinputstreamandtheoutputstream.A
P-boxisinvertible onlyifthenumbersofinputsandoutputsarethesame.AP-boxcan
useastraightpermutation, acompression peilliutation, oranexpansion permutation.
oAmoderncipherisusuallyaroundcipher;eachroundisacomplex ciphermadeof
acombination ofdifferent simpleciphers.
oDESisasymmetric-key methodadoptedbytheU.S.government. DEShasaninitial
andfinalpermutation blockand16rounds.
oTheheartofDESistheDESfunction. TheDESfunction hasfourcomponents: an
expansion permutation, anXORoperation, S-boxes, andastraightpermutation.
oDESusesakeygenerator togenerate sixteen48-bitroundkeys.
oTripleDESwasdesigned toincreasethesizeoftheDESkey(effectively 56bits)
forbettersecurity.
oAESisaroundcipherbasedontheRijndael algorithm thatusesa128-bitblockof
data.AEShasthreedifferent configurations: 10roundswithakeysizeof128bits,
12roundswithakeysizeof192bits,and14roundswithakeysizeof256bits.
oModeofoperation referstotechniques thatdeploythecipherssuchasDESorAES.
Fourcommon modesofoperation areECB,CBC,CBF,andOFB.ECBandCBC
areblockciphers;CBFandOFBarestreamciphers.
oOnecommonly usedpublic-key cryptography methodistheRSAalgorithm,
invented byRivest,Shamir,andAdleman.
oRSAchoosesntobetheproductoftwoprimespandq.
oTheDiffie-Hellman methodprovides aone-time sessionkeyfortwoparties.
oTheman-in-the-middle attackcanendanger thesecurityoftheDiffie-Hellman
methodiftwopartiesarenotauthenticated toeachother.
30.7PRACTICE SET
ReviewQuestions
1.Insymmetric-key cryptography, howmanykeysareneededifAliceandBobwant
tocommunicate witheachother?
2.Insymmetric-key cryptography, canAliceusethesamekeytocommunicate with
bothBobandJohn?Explainyouranswer.
3.Insymmetric-key cryptography, ifeverypersoninagroupof10peopleneedsto
communicate witheveryotherpersoninanothergroupof10people,howmany
secretkeysareneeded?
4.Insymmetric-key cryptography, ifeverypersoninagroupof10peopleneedstocom­
municate witheveryotherpersoninthegroup,howmanysecretkeysareneeded?
5.RepeatQuestion 1forasymmetric-key cryptography.SECTION 30.7PRACTICE SET 959
6.RepeatQuestion 2forasymmetric-key cryptography.
7.RepeatQuestion 3forasymmetric-key cryptography.
8.RepeatQuestion 4forasymmetric-key cryptography.
Exercises
9.Insymmetric-key cryptography, howdoyouthinktwopersonscanestablish asecret
keybetweenthemselves?
10.Inasymmetric-key cryptography, howdoyouthinktwopersonscanestablish two
pairsofkeysbetweenthemselves?
11.Encryptthemessage"THISISANEXERCISE" usingashiftcipherwithakeyof20.
Ignorethespacebetweenwords.Decryptthemessagetogettheoriginalplaintext.
12.Canweusemonoalphabetic substitution ifoursymbols arejust0 andI?Isita
goodidea?
13.Canweusepolyalphabetic substitution ifoursymbolsarejust0 andI?Isitagood
idea?
14.Encrypt"INTERNET" usingatransposition cipherwiththefollowing key:
35214
1 2345
15.Rotate11100Ithreebitstotheright.
16.Rotate100111threebitstotheleft.
17.A6-by-2S-boxaddsthebitsattheodd-numbered positions (1,3,5,...)togetthe
rightbitoftheoutputandaddsthebitsattheeven-numbered positions (2,4,6,...)
togettheleftbitoftheoutput.Iftheinputis1100I0,whatistheoutput?Ifthe
inputis10110I,whatistheoutput?Assumetherightmost bitisbitI.
18.Whatareallthepossiblenumbercombinations ofinputsina6-by-2S-box?What
isthepossiblenumberofoutputs?
19.Theleftmostbitofa4-by-3S-boxrotatestheother3bits.Iftheleftmostbitis0,
the3otherbitsarerotatedtotheright1bit.IftheleftmostbitisI,the3otherbits
arerotatedtotheleftIbit.Iftheinputis10II,whatistheoutput?Iftheinputis
0110,whatistheoutput?
20.AP-boxusesthefollowing tableforencryption. Showtheboxandconnecttheinput
totheoutput.
4 2,
13
21.
IstheP-boxstraight,compression, orexpansion?
21.InRSA,giventwoprimenumbersp=19andq=23,findnand<p.Choosee=5 and
trytofindd,suchthateanddmeetthecriteria.
22.Tounderstand thesecurityoftheRSAalgorithm, finddifyouknowthate=17and
n=187.ThisexerciseproveshoweasyisforEvetobreakthesecretifnissmall.960CHAPTER 30CRYPTOGRAPHY
23.FortheRSAalgorithm withalargen,explainwhyBobcancalculate dfromn,but
Evecannot.
24.Usinge=13,d=37,andn=77intheRSAalgorithm, encryptthemessage"FINE"
usingthevaluesof00to25forlettersAtoZ.Forsimplicity, dotheencryption and
decryption character bycharacter.
25.Whycan'tBobchoose1asthepublickeyeinRSA?
26.Whatisthedangerinchoosing 2asthepublickeyeinRSA?
27.EveusesRSAtosendamessage toBob,usingBob'spublickey.Later,atacock­
tailparty,EveseesBobandaskshimifthemessage hasarrivedandBobconfirms
it.Afterafewdrinks,EveasksBob,"Whatwastheciphertext?" Bobgivesthe
valueoftheciphertext toEve.Canthisendanger thesecurityofBob'sprivatekey?
Explainyouranswer.
28.Whatisthevalueofthesymmetric keyintheDiffie-Hellman protocolifg=7,p=23,
x=2,andy=5?
29.IntheDiffie-Hellman protocol, whathappensifxandyhavethesamevalue?That
is,AliceandBobhaveaccidentally chosenthesamenumber.ArethevaluesofR1
andR2thesame?Arethevaluesofthesessionkeyscalculated byAliceandBob
thesame?Useanexample toproveyourclaims.
Research Activities
30.Anotherasymmetric-key algorithm iscalledEIGamal. Dosomeresearch andfind
outsomeinformation aboutthisalgorithm. Whatisthedifference between RSA
andEIGamal?
31.Anotherasymmetric-key algorithm isbasedonellipticcurves.Ifyouarefamiliar
withellipticcurves,dosomeresearch andfindthealgorithms basedonelliptic
curves.
32.TomakeDiffie-Helman algorithm morerobust,oneusescookies.Do some research
andfindoutabouttheuseofcookiesintheDiffie-Helman algorithm.CHAPTER 31
Network Security
InChapter30,weintroduced thescienceofcryptography. Cryptography hasseveral
applications innetworksecurity. Inthischapter,wefirstintroduce thesecurityservices
wetypically expectinanetwork. Wethenshowhowtheseservicescanbeprovided
usingcryptography. Attheendofthechapter,wealsotouchontheissueofdistributing
symmetric andasymmetric keys.Thechapterprovides thebackground necessary for
Chapter32,wherewediscusssecurityintheInternet.
31.1SECURITY SERVICES
Network securitycanprovideoneofthefiveservicesasshowninFigure31.1.Fourof
theseservicesarerelatedtothemessageexchanged usingthenetwork: messageconfi­
dentiality, integrity, authentication, andnonrepudiation. Thefifthserviceprovides
entityauthentication oridentification.
Figure31.1Securityservicesrelatedtothemessageorentity
Message
Security
services
EntityConfidentiality
Integrity
Authentication
Nonrepudiatton
Authentication
961962CHAPTER 31NETWORK SECURiTY
Message Confidentiality
Message confidentiality orprivacymeansthatthesenderandthereceiverexpectcon­
fidentiality. Thetransmitted message mustmakesensetoonlytheintended receiver. To
allothers,themessage mustbegarbage. Whenacustomer communicates withher
bank,sheexpectsthatthecommunication istotallyconfidential.
Message Integrity
Message integrity meansthatthedatamustarriveatthereceiverexactlyastheywere
sent.Theremustbenochangesduringthetransmission, neitheraccidentally normali­
ciously.Asmoreandmoremonetary exchanges occurovertheInternet,integrityiscrucial.
Forexample, itwouldbedisastrous ifarequestfortransferring $100changed toa
requestfor$10,000or$100,000. Theintegrity ofthemessage mustbepreserved ina
securecommunication.
Message Authentication
Message authentication isaservicebeyondmessageintegrity. Inmessageauthentication
thereceiverneedstobesureofthesender'sidentityandthatanimposter hasnotsentthe
message.
Message Nonrepudiation
Message nonrepudiation meansthatasendermustnotbeabletodenysendingamessage
thatheorshe,infact,didsend.Theburdenofprooffallsonthereceiver. Forexample,
whenacustomer sendsamessage totransfermoneyfromoneaccounttoanother,the
bankmusthaveproofthatthecustomer actuallyrequested thistransaction.
EntityAuthentication
Inentityauthentication (oruseridentification) theentityoruserisverifiedpriorto
accesstothesystemresources (files,forexample). Forexample, astudentwhoneedsto
accessheruniversity resources needstobeauthenticated duringtheloggingprocess.
Thisistoprotecttheinterestsoftheuniversity andthestudent.
31.2MESSAGE CONFIDENTIALITY
Theconceptofhowtoachievemessage confidentiality orprivacyhasnotchangedfor
thousands ofyears.The message mustbeencrypted atthesendersiteanddecrypted
atthereceiversite.Thatis,themessagemustberendered unintelligible tounauthorized
parties.Agoodprivacytechnique guarantees tosomeextentthatapotential intruder
(eavesdropper) cannotunderstand thecontents ofthemessage. Aswediscussed in
Chapter30,thiscanbedoneusingeithersymmetric-key cryptography orasymmetric­
keycryptography. Wereviewboth.SECTION 31.2MESSAGE CONFIDENTIALITY 963
Confidentialitywith Symmetric-Key Cryptography
Although modernsymmetric-key algorithms aremorecomplex thantheonesused
throughthelonghistoryofthesecretwriting,theprinciple isthesame.Toprovideconfi­
dentiality withsymmetric-key cryptography, asenderandareceiverneedtosharea
secretkey.Inthepastwhendataexchange wasbetweentwospecificpersons(forexam­
ple,twofriendsorarulerandherarmychief),itwaspossibletopersonallyexchange the
secretkeys.Today'scommunication doesnotoftenprovidethisopportunity. Aperson
residingintheUnitedStatescannotmeetandexchange asecretkeywithapersonliving
inChina.Furthermore, thecommunication isbetweenmillionsofpeople,notjustafew.
Tobeabletousesymmetric-key cryptography, weneedtofindasolutiontothe
keysharing.Thiscanbedoneusingasessionkey.Asessionkeyisonethatisusedonly
forthedurationofonesession.Thesessionkeyitselfisexchanged usingasymmetric­
keycryptography aswewillseelater.Figure31.2showstheuseofasessionsymmetric
keyforsendingconfidential messages fromAlicetoBobandviceversa.Notethatthe
natureofthesymmetric keyallowsthecommunication tobecarriedoninbothdirec­
tionsalthough itisnotrecommended today.Usingtwodifferent keysismoresecure,
becauseifonekeyiscompromised, thecommunication isstillconfidential intheother
direction.
Figure31.2Message confidentiality usingsymmetric keysintwodirections
Alice GI Sharedkeys nmr-----------------------------lIBob
Plaintext ,----------, Ciphertext ,...-------, Plaintext1-------------1
Dataflow
a.AsharedsecretkeycanbeusedinAlice-Bob communication
Alice
Plaintext Ciphertext .....-----, PlaintextI-----l Decry;pnonI---------'-------f
.. L.........."""::"::"--o....J
Dataflow
b.Adifferent sharedsecretkeyisrecommended inBob-Alice communicationBob
Thereasonsymmetric-key cryptography isstillthedominant methodforconfiden­
tialityofthemessageisitsefficiency. Foralongmessage, symmetric-key cryptography
ismuchmoreefficientthanasymmetric-key cryptography.
Confidentiality withAsymmetric- KeyCryptography
Theproblem wementioned aboutkeyexchange insymmetric-key cryptography for
privacyculminated inthecreationofasymmetric-key cryptography. Here,thereisno
keysharing;thereisapublicannouncement. Bobcreatestwokeys:oneprivateandone964CHAPTER 31NETWORK SECURITY
public.Hekeepstheprivatekeyfordecryption; hepubliclyannounces thepublickeyto
theworld.Thepublickeyisusedonlyforencryption; theprivatekeyisusedonlyfor
decryption. Thepublickeylocksthemessage; theprivatekeyunlocksit.
Foratwo-way communication between AliceandBob,twopairsofkeysare
needed.WhenAlicesendsamessage toBob,sheusesBob'spair;whenBobsendsa
messagetoAlice,heusesAlice'spairasshowninFigure31.3.
Figure31.3Message confidentiality usingasymmetric keys
Alice
r-,------------- ---~~f f~r ~ B~
PlaintextI. I Ciphertext r------, PlaintextEncryption----2-------1
•'-----_----J
Dataflow
a.Bob'skeysareusedinAlice-Bob communication
~r-----------------~ t t
~ ~ r
it
Dataflow
b.Alice'skeysareusedinBob·Alice communicationBob
Confidentiality withasymmetric-key cryptosystem hasitsownproblems. First,the
methodisbasedonlongmathematical calculations usinglongkeys.Thismeansthat
thissystemisveryinefficient forlongmessages; itshouldbeappliedonlytoshortmes­
sages.Second,thesenderofthemessage still needs tobecertainaboutthepublickey
ofthereceiver. Forexample, inAlice-Bob communication, Aliceneedstobesurethat
Bob'spublickeyisgenuine; Evemayhaveannounced herpublickeyinthenameof
Bob.Asystemoftrustisneeded,aswewillseelaterinthechapter.
31.3MESSAGE INTEGRITY
Encryption anddecryption providesecrecy,orconfidentiality, butnotintegrity. How­
ever,onoccasion wemaynotevenneedsecrecy,butinsteadmusthaveintegrity. For
example, Alicemaywriteawilltodistribute herestateuponherdeath.Thewilldoes
notneedtobeencrypted. Afterherdeath,anyonecanexaminethewill.Theintegrityof
thewill, however, needstobepreserved. AlicedoesnotwantthecontentsofthewilltoSECTION 31.3MESSAGE INTEGRITY 965
bechanged. Asanotherexample, supposeAlicesendsamessage instructing herbanker,
Bob,topayEveforconsulting work.Themessage doesnotneedtobehiddenfromEve
becauseshealreadyknowssheistobepaid.However, themessage doesneedtobesafe
fromanytampering, especially byEve.
Document andFingerprint
Onewaytopreserve theintegrity ofadocument isthroughtheuseofafingerprint. If
Aliceneedstobesurethatthecontentsofherdocument willnotbeillegally changed,
shecanputherfingerprint atthebottomofthedocument. Evecannotmodifythecontents
ofthisdocument orcreateafalsedocument because shecannotforgeAlice'sfinger­
print.Toensurethatthedocument hasnotbeenchanged, Alice'sfingerprint onthedoc­
umentcanbecompared toAlice'sfingerprint onfile.Iftheyarenotthesame,the
document isnotfromAlice.
Topreserve theintegrity ofadocument,
boththedocument andthefingerprint areneeded.
Message andMessageDigest
Theelectronic equivalent ofthedocument andfingerprint pairisthemessage andmes­
sagedigestpail:Topreserve theintegrity ofamessage, themessage ispassedthrough
analgorithm calledahashfunction. Thehashfunction createsacompressed imageof
themessage thatcanbeusedasafingerprint. Figure31.4showsthemessage, hash
function, andthemessage digest.
Figure31.4Message andmessage digest
Message
(Document)Hash
function
Difference
Thetwopairsdocument/fingerprint andmessage/message digestaresimilar,withsome
differences. Thedocument andfingerprint arephysically linkedtogether; also,neither
needstobekeptsecret.Themessage andmessage digestcanbeunlinked (orsent)sep­
aratelyand,mostimportantly, themessage digestneedstobekeptsecret.Themessage
digestiseitherkeptsecretinasafeplaceorencrypted ifweneedtosenditthrougha
communications channel.
Themessagedigestneedstobekeptsecret.966CHAPTER 31NETWORK SECURITY
Creating andChecking theDigest
Themessage digestiscreatedatthesendersiteandissentwiththemessage tothe
receiver. Tochecktheintegrityofamessage, ordocument, thereceivercreatesthehash
function againandcompares thenewmessage digestwiththeonereceived.Ifbothare
thesame,thereceiverissurethattheoriginalmessagehasnotbeenchanged. Ofcourse,
weareassuming thatthedigesthasbeensentsecretly.Figure31.5showstheidea.
Figure31.5Checking integrity
Alice&
HashFunction CriteriaMessage
and
digestBob
&
Tobeeligibleforahash,afunction needstomeetthreecriteria:one-wayness, resis­
tancetoweakcollision, andresistance tostrongcollision asshowninFigure31.6.
Figure31.6Criteriaofahashfunction
Hashfunction
criteria
I
I I I
Onc-wayncssWeakcollisionIStron~collision
resistance resistance
One-wayness
Ahashfunction musthaveone-wayness; amessage digestiscreatedbyaone-way
hashingfunction. Wemustnotbeabletorecreatethemessage fromthedigest.Some­
timesitisdifficulttomakeahashfunction 100percentone-way; thecriteriastatethatit
mustbeextremely difficultorimpossible tocreatethemessageifthemessagedigestis
given.Thisissimilartothedocument/fingerprint case.Noonecanmakeadocument
fromafingerprint.SECTION 31.3MESSAGE INTEGRITY 967
Example 31.1
Canweuseaconventional losslesscompression methodasahashingfunction?
Solution
Wecannot.Alosslesscompression methodcreatesacompressed message thatisreversible. You
canuncompress thecompressed message togettheoriginalone.
Example 31.2
Canweuseachecksum methodasahashingfunction?
Solution
Wecan.Achecksum function isnotreversible; itmeetsthefirstcriterion. However, itdoesnot
meettheothercriteria.
WeakCollision Resistance
Thesecondcriterion, weakcollision resistance, ensuresthatamessage cannoteasily
beforged.IfAlicecreatesamessage andadigestandsendsbothtoBob,thiscriterion
ensuresthatEvecannoteasilycreateanothermessage thathashesexactlytothesame
digest.Inotherwords,givenaspecificmessage anditsdigest,itisimpossible (orat
leastverydifficult) tocreateanothermessage withthesamedigest.
Whentwomessages createthesamedigest,wesaythereisacollision. Inaweek
collision, givenamessage digest,itisveryunlikelythatsomeone cancreateamessage
withexactlythesamedigest.Ahashfunction musthaveweakcollision resistance.
StrongCollision Resistance
Thethirdcriterion, strongcollision resistance, ensuresthatwecannotfindtwomessages
thathashtothesamedigest.ThiscriterionisneededtoensurethatAlice,thesenderofthe
message, cannotcauseproblems byforgingamessage.IfAlicecancreatetwomessages
thathashtothesamedigest,shecandenysendingthefirsttoBobandclaimthatshesent
onlythesecond.
Thistypeofcollision iscalledstrongbecausetheprobability ofcollision ishigher
thanintheprevious case.Anadversary cancreatetwomessages thathashtothesame
digest.Forexample, ifthenumberofbitsinthemessage digestissmall,itislikely
Alicecancreatetwodifferent messages withthesamemessage digest.Shecansendthe
firsttoBobandkeepthesecondforherself.Alicecanlatersaythatthesecondwas
theoriginalagreed-upon document andnotthefirst.
Suppose twodifferent willscanbecreatedthathashtothesamedigest.Whenthe
timecomesfortheexecution ofthewill,thesecondwillispresented totheheirs.Since
thedigestmatchesbothwills,thesubstitution issuccessful.
HashAlgorithms: SHA-l
Whilemanyhashalgorithms havebeendesigned, themostcommon isSHA-l.SHA-1
(SecureHashAlgorithm 1)isarevisedversionofSHAdesigned bytheNational
InstituteofStandards andTechnology (NIST).Itwaspublished asaFederalInformation
Processing Standard (PIPS).968CHAPTER 31NETWORK SECURITY
Averyinteresting pointaboutthisalgorithm andothersisthattheyallfollowthe
sameconcept. EachcreatesadigestoflengthNfromamultiple-block message. Each
blockis512bitsinlength,asshowninFigure31.7.
Figure31.7Message digestcreation
512bitsMessage, multiple5l2-bitblocks
•••
...
...
Message digest·1
AbufferofNbitsisinitialized toapredetermined value.Thealgorithm mangles
thisinitialbufferwiththefirst512bitsofthemessage tocreatethefirstintermediate
message digestofNbits.Thisdigestisthenmangled withthesecond512-bitblockto
createthesecondintermediate digest.The(n-l)thdigestismangled withthenthblock
tocreatethenthdigest.Ifablockisnot512bits,padding (Os)isaddedtomakeitso.
Whenthelastblockisprocessed, theresulting digestisthemessage digestforthe
entiremessage. SHA-lhasamessagedigestof160bits(5words,eachof32bits).
SHA-lhashalgorithms createanN-bitmessage
digestoutofamessage of512-bitblocks.
SHA-lhasamessagedigestof160bits(5wordsof32bits).
WordExpansion
Beforeprocessing, theblockneedstobeexpanded. Ablockismadeof512bitsor16
32-bitwords,butweneed80wordsintheprocessing phase.Sothe16-wordblockneeds
tobeexpanded to80words,wordOtoword79.
Processing EachBlock
Figure31.8showsthegeneraloutlinefortheprocessing ofoneblock.Thereare80steps
inblockprocessing. Ineachstep,onewordfromtheexpanded blockandone32-bit
constant aremangled together andthenoperated ontocreateanewdigest.Atthe
beginning ofprocessing, thevaluesofdigestwords(A,B,C,D,andE)aresavedinto
fivetemporary variables. Attheendoftheprocessing (afterstep79),thesevaluesareSECTION 31.4MESSAGE AUTHENTICATION 969
Figure31.8Processing ofoneblockinSHA-1
Resultsoftheprevious block
ortheinitialdigest
IAIBICIDtE I
• ,Wl}"Step0j.;...KotttttIAIBjCtDIEI·•·-t-t-t-t-t
.~Wi9 Step79~K79tttttIAIBICIDIEI
Final
adding
"
"",~""rtJI lliI'-+l:t:Jl:!::JltJ l:!:J
'f'f'f'f'fIAIBIC/DIE
Valuesforthenextblock
orthefinaldigest
addedtothevaluescreatedfromstep79.Thedetailofeachstepiscomplex andbeyond
thescopeofthisbook.Theonlythingweneedtoknowisthateachstepmangles a
wordofdataandaconstanttocreatearesultthatisfedtothenextstep.
31.4MESSAGE AUTHENTICATION
Ahashfunction guarantees theintegrityofamessage.Itguarantees thatthemessagehas
notbeenchanged. Ahashfunction, however, doesnotauthenticate thesenderofthemes­
sage.WhenAlicesendsamessagetoBob,Bobneedstoknowifthemessage iscoming
fromAliceorEve.Toprovidemessage authentication, Aliceneedstoprovideproofthat
itisAlicesendingthemessage andnotanimposter. Ahashfunction persecannot
providesuchaproof.Thedigestcreatedbyahashfunctionisnormally calledamodifi­
cationdetection code(MDC).Thecodecandetectanymodification inthemessage.
MAC
Toprovidemessage authentication, weneedtochangeamodification detection codeto
amessage authentication code(MAC). AnMDCusesakeylesshash function~ a
MACusesakeyedhashfunction. Akeyedhashfunction includes thesymmetric key970 CHAPTER 31NETWORK SECURITY
betweenthesenderandreceiverwhencreatingthedigest.Figure31.9showshowAlice
usesakeyedhashfunction toauthenticate hermessage andhowBobcanverifythe
authenticity ofthemessage.
Figure31.9MAC,createdbyAliceandcheckedbyBob
Alice Bob
Message
and
MAC
Alice,usingthesymmetric keybetween herselfandBob(KAB)andakeyedhash
function, generates aMAC.Shethenconcatenates theMACwiththeoriginalmessage
andsendsthetwotoBob.Bobreceivesthemessage andtheMAC.Heseparates the
message fromtheMAC.Heappliesthesamekeyedhashfunctiontothemessage using
thesymmetric keyKABtogetafreshMAC.Hethencompares theMACsentbyAlice
withthenewlygenerated MAC.IfthetwoMACsareidentical, themessagehasnotbeen
modified andthesenderofthemessage isdefinitely Alice.
HMAC
Thereareseveralimplementations ofMACinusetoday.However, inrecent'years,
someMACshavebeendesigned thatarebasedonkeylesshashfunctions suchas
SHA-l.ThisideaisahashedMAC,calledHMAC, thatcanuseanystandardkeyless
hashfunction suchasSHA-l.HMACcreatesanestedMACbyapplying akeyless
hashfunction totheconcatenation ofthemessage and asymmetric key.Figure31.10
showsthegeneralidea.
Acopyofthesymmetric keyisprepended tothemessage. Thecombination is
hashedusingakeylesshashfunction, suchasSHA-1.Theresultofthisprocessisan
intermediate HMACwhichisagainprependedwiththekey(thesamekey),andthe
resultisagainhashedusingthesamealgorithm. ThefinalresultisanHMAC.
ThereceiverreceivesthisfinalHMACandthemessage. Thereceivercreatesits
ownHMACfromthereceived message andcompares thetwoHMACs tovalidatethe
integrity ofthemessage andauthenticate thedataorigin.Notethatthedetailsofan
HMACcanbemorecomplicated thanwhatwehaveshownhere.SECTION 31.5DIGITAL SIGNATURE 971
Figure31.10HMAC
Message
HMAC
31.5DIGITAL SIGNATURE
Although aMACcanprovidemessage integrity andmessage authentication, ithasa
drawback. Itneedsasymmetric keythatmustbeestablished between thesenderand
thereceiver.Adigitalsignature, ontheotherhand,canuseapairofasymmetric keys(a
publiconeandaprivateone).
Weareallfamiliarwiththeconceptofasignature. Wesignadocument toshow
thatitoriginated fromusorwasapproved byus.Thesignature isprooftotherecipient
thatthedocument comesfromthecorrectentity.Whenacustomer signsacheckto
himself,thebankneedstobesurethatthecheckisissuedbythatcustomer andnobody
else.Inotherwords,asignature onadocument, whenverified,isasignofauthentica­
tion;thedocument isauthentic. Consider apaintingsignedbyanartist.Thesignature
ontheart,ifauthentic, meansthatthepaintingisprobably authentic.
WhenAlicesendsamessage toBob,Bobneedstochecktheauthenticity ofthe
sender;heneedstobesurethatthemessagecomesfromAliceandnotEve.Bobcanask
Alicetosignthemessage electronically. Inotherwords,anelectronic signature can
provetheauthenticity ofAliceasthesenderofthemessage. Werefertothistypeofsig­
natureasadigitalsignature.
Comparison
Beforewecontinue anyfurther,letusdiscussthedifferences betweentwotypesofsig­
natures:conventional anddigital.
Inclusion
Aconventional signature isincluded inthedocument; itispartofthedocument. When
wewriteacheck,thesignature isonthecheck;itisnotaseparatedocument. Onthe
otherhand,whenwesignadocument digitally, wesendthesignature asaseparatedoc­
ument.Thesendersendstwodocuments: themessage andthesignature. Therecipient
receivesbothdocuments andverifiesthatthesignature belongstothesupposed sender.
Ifthisisproved,themessage iskept;otherwise, itisrejected.972CHAPTER 31NETWORK SECURITY
Verification Method
Theseconddifference between thetwotypesofdocuments isthemethodofverifying
thesignature. Inconventional signature, whentherecipient receivesadocument, she
compares thesignature onthedocument withthesignature onfile.Iftheyarethesame,
thedocument isauthentic. Therecipient needstohaveacopyofthissignature onfile
forcomparison. Indigitalsignature, therecipient receivesthemessage andthesigna­
ture.Acopyofthesignature isnotstoredanywhere. Therecipient needstoapplya
verification technique tothecombination ofthemessage andthesignature toverifythe
authenticity.
Relationship
Inconventional signature, thereisnormally aone-to-many relationship betweenasig­
natureanddocuments. Aperson,forexample, hasasignature thatisusedtosignmany
checks,manydocuments, etc.Indigitalsignature, thereisaone-to-one relationship
betweenasignature and amessage. Eachmessage hasitsownsignature. Thesignature
ofonemessage cannotbeusedinanothermessage.IfBobreceivestwomessages, one
afteranother,fromAlice,hecannotusethesignature ofthefirstmessage toverifythe
second.Eachmessageneedsanewsignature.
Duplicity
Anotherdifference betweenthetwotypesofsignatures isaqualitycalledduplicity. In
conventional signature, acopyofthesigneddocument canbedistinguished fromthe
originaloneonfile.Indigitalsignature, thereisnosuchdistinction unlessthereisa
factoroftime(suchasatimestamp) onthedocument. Forexample, supposeAlice
sendsadocument instructing BobtopayEve.IfEveintercepts thedocument andthe
signature, shecanresenditlatertogetmoneyagainfromBob.
NeedforKeys
Inconventional signature asignature islikeaprivate"key"belonging tothesignerof
thedocument. Thesignerusesittosignadocument; nooneelsehasthissignature. The
copyofthesignature isonfilelikeapublickey;anyonecanuseittoverifyadocument,
tocompare ittotheoriginalsignature.
Indigitalsignature, thesignerusesherprivatekey,appliedtoasigningalgorithm,
tosignthedocument. Theverifier,ontheotherhand,usesthepublickeyofthesigner,
appliedtotheverifying algorithm, toverifythedocument.
Canweuseasecret(symmetric) keytobothsignandverifyasignature? Theanswer
isnoforseveralreasons.First,asecretkeyisknownonlybetween twoentities(Alice
andBob,forexample). SoifAliceneedstosignanotherdocument andsendittoTed,
sheneedstouseanothersecretkey.Second,aswewillsee,creatingasecretkeyfora
sessioninvolvesauthentication, whichnormally usesdigitalsignature. Wehaveavicious
cycle.Third,BobcouldusethesecretkeybetweenhimselfandAlice,signadocument,
sendittoTed,andpretendthatitcamefromAlice.
Adigitalsignature needsapublic-key system.SECTION 31.5DIGITAL SIGNATURE 973
Process
Digitalsignature canbeachieved intwoways:signingthedocument orsigningadigest
ofthedocument.
SigningtheDocument
Probably, theeasier,butlessefficientwayistosignthedocument itself.Signingadoc­
umentisencrypting itwiththeprivatekeyofthesender;verifying thedocument is
decrypting itwiththepublickeyofthesender.Figure31.11showshowsigningand
verifying aredone.
Figure31.11Signingthemessage itselfindigitalsignature
~ t tkeys
Alicei jBob-~ -~
Plaintext Signeddocument PlaintextEncryption Decryption.-
Signing Dataflow Verifying
Weshouldmakeadistinction between privateandpublickeysasusedindigital
signature andpublicandprivatekeysasusedforconfidentiality. Inthelatter,theprivate
andpublickeysofthereceiverareusedintheprocess.Thesenderusesthepublickey
ofthereceivertoencrypt;thereceiveruseshisownprivatekeytodecrypt.Indigital
signature, theprivateandpublickeysofthesenderareused.Thesenderusesherpri­
vatekey;thereceiverusesthepublickeyofthesender.
Inacryptosystem, weusetheprivateandpublickeysofthereceiver;
indigitalsignature, weusetheprivateandpublickeyofthesender.
SigningtheDigest
Wementioned thatthepublickeyisveryinefficient inacryptosystem ifwearedealing
withlongmessages. Inadigitalsignature system,ourmessages arenormally long,but
wehavetousepublickeys.Thesolutionisnottosignthemessage itself;instead,we
signadigestofthemessage. Aswelearned,acarefully selectedmessage digesthasa
one-to-one relationship withthemessage. Thesendercansignthemessage digest,and
thereceivercanverifythemessage digest.Theeffectisthesame.Figure31.12shows
signingadigestinadigitalsignature system.
Adigestismadeoutofthemessage atAlice'ssite.Thedigestthengoesthrough
thesigningprocessusingAlice'sprivatekey.Alicethensendsthemessage andthesig­
naturetoBob.Aswewillseelaterinthechapter,therearevariations intheprocessthat
aredependent onthesystem.Forexample, theremightbeadditional calculations before
thedigestismadeorothersecretkeysmightbeused.Insomesystems, thesignature is
asetofvalues.974CHAPTER 31NETWORK SECURITY
Figure31.12Signingthedigestinadigitalsignature
Sign
Alice
Message
and
signatureVerify
Bob
&
AtBob'ssite,usingthesamepublichashfunction, adigestisfirstcreatedoutof
thereceivedmessage. Calculations aredoneonthesignature andthedigest.Theverifying
processalsoappliescriteriaontheresultofthecalculation todetennine theauthenticity
ofthesignature.Ifauthentic, themessage isaccepted; otherwise, itisrejected.
Services
Adigitalsignature canprovidethreeoutofthefiveserviceswementioned forasecurity
system:messageintegrity, message authentication, andnonrepudiation. Notethatadig­
italsignature schemedoesnotprovideconfidential communication. Ifconfidentiality is
required, themessage andthesignature mustbeencrypted usingeitherasecret-key or
public-key cryptosystem.
Message Integrity
Theintegrity ofthemessage ispreserved evenifwesignthewholemessage because
wecannotgetthesamesignature ifthemessageischanged. Thesignature schemestoday
useahashfunctioninthesigningandverifying algorithms thatpreserve theintegrityof
themessage.
Adigitalsignature todayprovides messageintegrity.
Message Authentication
Asecuresignature scheme,likeasecureconventional signature (onethatcannotbe
easilycopied),canprovidemessage authentication. Bobcanverifythatthemessage is
sentbyAlicebecauseAlice'spublickeyisusedinverification. Alice'spublickeycannot
createthesamesignature asEve'sprivatekey.
Digitalsignature provides messageauthentication.SECTION 31.5DIGITAL SIGNATURE 975
Message Nonrepudiation
IfAlicesignsamessage andthendeniesit,canBoblaterprovethatAliceactually
signedit?Forexample, ifAlicesendsamessage toabank(Bob)andaskstotransfer
$10,000 fromheraccounttoTed'saccount, canAlicelaterdenythatshesentthis
message? Withtheschemewehavepresented sofar,Bobmighthaveaproblem.
Bobmustkeepthesignature onfileandlateruseAlice'spublickeytocreatethe
originalmessage toprovethemessage inthefileandthenewlycreatedmessage are
thesame.ThisisnotfeasiblebecauseAlicemayhavechanged herprivate/public
keyduringthistime;shemayalsoclaimthatthefilecontaining thesignature isnot
authentic.
Onesolutionisatrustedthirdparty.Peoplecancreateatrustedpartyamongthem­
selves.InChapter32,wewillseethatatrustedpartycansolvemanyotherproblems
concerning securityservicesandkeyexchange. Figure31.13showshowatrustedparty
canpreventAlicefromdenyingthatshesentthemessage.
Figure31.13Usingatrustedcenterfornonrepudiation
Alice,Bob,
M,SAM:Message
SA:Signature fromAlice
ST:Signature fromtrustedcenter
Trustedcenter
Alice,Bob,
M,ST
Alicecreatesasignature fromhermessage (SA)andsendsthemessage, heriden­
tity,Bob'sidentity, andthesignature tothecenter.Thecenter,afterchecking that
Alice'spublickeyisvalid,verifiesthroughAlice'spublickeythatthemessagecomes
fromAlice.Thecenterthensavesacopyofthemessagewiththesenderidentity,recip­
ientidentity,andatimestamp initsarchive.Thecenterusesitsprivatekeytocreate
anothersignature (ST)fromthemessage. Thecenterthensendsthemessage, thenew
signature, Alice'sidentity,andBob'sidentitytoBob.Bobverifiesthemessage using
thepublickeyofthetrustedcenter.
IfinthefutureAlicedeniesthatshehassentthemessage, thecentercanshowa
copyofthesavedmessage. IfBob'smessageisaduplicate ofthemessagesavedatthe
center,Alicewilllosethedispute.Tomakeeverything confidential, alevelofencryption!
decryption canbeaddedtotheschemeasdiscussed inthenextsection.
Nonrepudiation canbeprovided usingatrustedparty.976CHAPTER 31NETWORK SECURITY
Signature Schemes
Severalsignature schemes haveevolvedduringthelastfewdecades. Someofthem
havebeenimplemented. SuchasRSAandDSS(DigitalSignature Standard) schemes.
Thelatterwillprobably becomethestandard. However, thedetailsoftheseschemes are
beyondthescopeofthisbook.
31.6ENTITY AUTHENTICATION
Entityauthentication isatechnique designed toletonepartyprovetheidentityof
anotherparty.Anentitycanbeaperson,aprocess, aclient,oraserver.Theentity
whoseidentityneedstobeprovediscalledtheclaimant; thepartythattriestoprove
theidentityoftheclaimant iscalledtheverifier.WhenBobtriestoprovetheidentityof
Alice,Aliceistheclaimant, andBobistheverifier.
Therearetwodifferences betweenmessageauthentication andentityauthentication.
First,message authentication maynothappeninrealtime;entityauthentication does.
Intheformer,AlicesendsamessagetoBob.WhenBobauthenticates themessage, Alice
mayormaynotbepresentinthecommunication process. Ontheotherhand,when
Alicerequests entityauthentication, thereisnorealmessage communication involved
untilAliceisauthenticated byBob.Aliceneedstobeonlineandtakespartintheprocess.
Onlyaftersheisauthenticated canmessages becommunicated betweenAliceandBob.
Message authentication isrequired whenane-mailissentfromAlicetoBob.Entity
authentication isrequiredwhenAlicegetscashfromanautomatic tellermachine. Second,
message authentication simplyauthenticates onemessage; theprocessneedstobe
repeated foreachnewmessage. Entityauthentication authenticates theclaimant forthe
entiredurationofasession.
Inentityauthentication, theclaimant mustidentifyherselftotheverifier.Thiscanbe
donewithoneofthreekindsofwitnesses: something known,something possessed, or
something inherent.
oSomething known.Thisisasecretknownonlybytheclaimant thatcanbechecked
bytheverifier.Examples areapassword, aPINnumber,asecretkey,andaprivatekey.
oSomething possessed. Thisissomething thatcanprovetheclaimant's identity.
Examples areapassport, adriver'slicense,anidentification card,acreditcard, and
asmartcard.
oSomething inherent. Thisisaninherentcharacteristic oftheclaimant. Examples
areconventional signature, fingerprints, voice,facialcharacteristics, retinalpattern,
andhandwriting.
Passwords
Thesimplestandtheoldestmethodofentityauthentication isthepassword, something
thattheclaimant possesses. Apassword isusedwhenauserneedstoaccessasystemto
usethesystem's resources (log-in).Eachuserhasauseridentification thatispublicand
apassword thatisprivate.Wecandividethisauthentication schemeintotwoseparate
groups:thefixedpassword andtheone-time password.SECTION 31.6ENTITYAUTHENTICATION 977
FixedPassword
Inthisgroup,thepassword isfixed;thesamepassword isusedoverandoverforevery
access.Thisapproach issubjecttoseveralattacks.
oEavesdropping. EvecanwatchAlicewhenshetypesherpassword. Mostsystems,
asasecuritymeasure, donotshowthecharacters ausertypes.Eavesdropping can
takeamoresophisticated form.Evecanlistentothelineandthenintercept the
message, therebycapturing thepassword forherownuse.
oStealingaPassword. ThesecondtypeofattackoccurswhenEvetriestophysically
stealAlice'spassword. Thiscanbeprevented ifAlicedoesnotwritedown the
password; instead,shejustcommits ittomemory. Therefore, apassword shouldbe
verysimpleorelserelatedtosomething familiartoAlice,whichmakesthepassword
vulnerable toothertypesofattacks.
oAccessing afile.Evecanhackintothesystemandgetaccesstothefilewherethe
passwords arestored.EvecanreadthefileandfindAlice'spassword oreven
changeit.Topreventthistypeofattack,thefilecanberead/write protected. How­
ever,mostsystemsneedthistypeoffiletobereadable bythepublic.
oGuessing. EvecanlogintothesystemandtrytoguessAlice'spassword bytrying
different combinations ofcharacters. Thepassword isparticularly vulnerable ifthe
userisallowedtochooseashortpassword (afewcharacters). Itisalsovulnerable
ifAlicehaschosensomething unimaginative, suchasherbirthday, herchild'sname,
orthenameofherfavoriteactor.Topreventguessing, alongrandompassword is
recommended, something thatisnotveryobvious.However, theuseofsucharandom
password mayalsocreateaproblem; Alicemightstorethepassword somewhere
soasnottoforgetit.Thismakesthepassword subjecttostealing.
Amore secure approach istostorethehashofthepassword inthepassword file
(insteadoftheplaintext password). Anyusercanreadthecontentsofthefile,but,
becausethehashfunction isaone-way function, itisalmostimpossible toguessthe
valueofthepassword. ThehashfunctionpreventsEvefromgainingaccesstothesystem
eventhoughshehasthepassword file.However, thereisapossibility ofanothertypeof
attackcalledthedictionary attack.Inthisattack,Eveisinterested infindingonepass­
word,regardless oftheuserID.Forexample, ifthepassword is6digits,Evecancreate
alistof6-digitnumbers (000000to999999), andthenapplythehashfunction toevery
number; theresultisalistof1millionhashes.Shecanthengetthepassword fileand
searchthesecond-column entriestofindamatch.Thiscouldbeprogrammed andrun
offlineonEve'sprivatecomputer. Afteramatchisfound,Evecangoonlineandusethe
password toaccessthesystem.Wewillseehowtomakethisattackmoredifficultinthe
thirdapproach.
Anotherapproach iscalledsaltingthepassword. Whenthepassword stringiscreated,
arandomstring,calledthesalt,isconcatenated tothepassword. Thesaltedpassword is
thenhashed.TherD,salt,andthehasharethenstoredinthefile.Now,whenauserasks
foraccess,thesystemextractsthesalt,concatenates itwiththereceived password,
makesahashoutoftheresult,andcompares itwiththehashstoredinthefile.Ifthere
\~amatc\\., a.cce.~~ \~%,tal\te.d:, C)fue.N1\I2,e., \t\~de.me.d. Salt\w~,mak.e.12,the.d\ct\c)l\aI'j attack
moredifficult.Iftheoriginalpassword is6digitsandthesaltis4digits,thenhashingis978CHAPTER 31NETWORK SECURITY
doneoveralO-digitvalue.ThismeansthatEvenowneedstomakealistof10million
itemsandcreateahashforeachofthem.Thelistofhasheshas10millionentriesand
thecomparison takesmuchlonger.Saltingisveryeffective ifthesaltisaverylongran­
domnumber.TheUNIXoperating systemusesavariation ofthismethod.
Inanotherapproach, twoidentification techniques arecombined. Agoodexample
ofthistypeofauthentication istheuseofanATMcardwithaPIN(personal identifica­
tionnumber). Thecardbelongstothecategory "something possessed" andthePIN
belongstothecategory "something known." ThePINisactually apassword that
enhances thesecurityofthecard.Ifthecardisstolen,itcannotbeusedunlessthePIN
isknown.ThePIN,however, istraditionally veryshortsoitiseasilyremembered by
theowner.Thismakesitvulnerable totheguessing typeofattack.
One-Time Password
Inthistypeofscheme,apassword isusedonlyonce.Itiscalledtheone-time password.
Aone-time password makeseavesdropping andstealinguseless.However, thisapproach
isverycomplex, andweleaveitsdiscussion tosomespecialized books.
Challenge- Response
Inpassword authentication, theclaimant provesheridentitybydemonstrating thatshe
knowsasecret,thepassword. However, sincetheclaimant revealsthissecret,thesecret
issusceptible tointerception bytheadversary. Inchallenge-response authentication,
theclaimant provesthatsheknowsasecretwithoutrevealing it.Inotherwords,the
claimant doesnotrevealthesecrettotheverifier;theverifiereitherhasitorfindsit.
Inchallenge-response authentication,
theclaimant provesthatsheknowsasecretwithoutrevealingit.
Thechallenge isatime-varying valuesuchasarandomnumberoratimestamp
whichissentbytheverifier.Theclaimant appliesafunctiontothechallenge andsends
theresult,calledaresponse, totheverifier.Theresponse showsthattheclaimant knows
thesecret.
Thechallenge isatime-varying valuesentbytheverifier;
theresponseistheresultofafunctionappliedonthechanenge.
UsingaSymmetric-Key Cipher
Inthefirstcategory, thechallenge-response authentication isachieved usingsymmetric­
keyencryption. Thesecrethereisthesharedsecretkey,knownbyboththeclaimant
andtheverifier.Thefunction istheencrypting algorithm appliedonthechallenge.
Figure31.14showsoneapproach. Thefirstmessage isnotpartofchallenge-response,
itonlyinformstheverifierthattheclaimant wantstobechallenged. Thesecondmes­
sageisthechallenge. AndRBisthenoncerandomly chosenbytheverifiertochallenge
theclaimant. Theclaimant encryptsthenonceusingthesharedsecretkeyknownonly
totheclaimant andtheverifierandsendstheresulttotheverifier.TheverifierdecryptsSECTION 31.6ENTITYAUTHENTICATION 979
Figure31.14 Challenge/response authentication usinganonce
Bob
(server)Alice
(user)
...-----------iAlicel------------'l~
I+----------i RB1-----------'
themessage. Ifthenonceobtained fromdecryption isthesameastheonesentbythe
verifier,Aliceisgrantedaccess.
Notethatinthisprocess,theclaimant andtheverifierneedtokeepthesymmetric
keyusedintheprocesssecret.Theverifiermustalsokeepthevalueofthenoncefor
claimantidentification untiltheresponse isreturned.
Thereadermayhavenoticedthatuseofanoncepreventsareplayofthethirdmes­
sagebyEve.Evecannotreplaythethirdmessage andpretendthatitisanewrequest
forauthentication byAlicebecauseonceBobreceivestheresponse, thevalueofRBis
notvalidanymore.Thenexttimeanewvalueisused.
Inthesecondapproach, thetime-varying valueisatimestamp, whichobviously
changeswithtime.Inthisapproach thechallenge messageisthecurrenttimesentfrom
theverifiertotheclaimant. However, thissupposes thattheclientandtheserverclocks
aresynchronized; theclaimantknowsthecurrenttime.Thismeansthatthereisnoneed
forthechallenge message. Thefirstandthirdmessages canbecombined. Theresultis
thatauthentication canbedoneusingonemessage, theresponsetoanimplicitchallenge,
thecurrenttime.Figure31.15showstheapproach.
Figure31.15 Challenge-response authentication usingatimestamp
Alice
(user)Bob
(server)---
Alice,T
UsingKeyed-Hash Functions
Insteadofusingencryption anddecryption forentityauthentication, wecanusea
keyed-hash function (MAC).Therearetwoadvantages tothisscheme. First,the980CHAPTER 31NETWORK SECURITY
encryption/decryption algorithm isnotexportable tosomecountries. Second,inusinga
keyed-hash function, wecanpreservetheintegrityofchallenge andresponse messages
andatthesametimeuseasecret,thekey.
Letusseehowwecanuseakeyed-hash functiontocreateachallenge response with
atimestamp. Figure31.16showsthescheme.
Figure31.16Challenge-response authentication usingakeyed-hash function
Alice
(user)
Alice,TIn+T
HashBob
(server)
Notethatinthiscase,thetimestamp issentbothasplaintext andastextscrambled
bythekeyed-hash function. WhenBobreceivesthemessage, hetakestheplaintext T,
appliesthekeyed-hash function, andthencompares hiscalculation withwhathe
receivedtodetermine theauthenticity ofAlice.
UsinganAsymmetric-Key Cipher
Insteadofasymmetric-key cipher,wecanuseanasymmetric-key cipherforentity
authentication. Herethesecretmustbetheprivatekeyoftheclaimant. Theclaimant
mustshowthatsheownstheprivatekeyrelatedtothepublickeythatisavailable to
everyone. Thismeansthattheverifiermustencryptthechallenge usingthepublickey
oftheclaimant; theclaimant thendecrypts themessage usingherprivatekey.The
response tothechallenge isthedecrypted challenge. Weshowtwoapproaches: onefor
unidirectional authentication andoneforbidirectional authentication. Inoneapproach,
Bobencrypts thechallenge usingAlice'spublickey.Alicedecrypts themessage with
herprivatekeyandsendsthenoncetoBob.Figure31.17showsthisapproach.
Figure31.17Authentication, asymmetric-key
Alice
(user)
AliceBob
(server)-SECTION 31.7KEYMANAGEMENT 981
UsingDigitalSignature
Wecanusedigitalsignature forentityauthentication. Inthismethod,welettheclaim­
antuseherprivatekeyforsigninginsteadofusingitfordecryption. Inoneapproach
showninFigure31.18,Bobusesaplaintext challenge. Alicesignstheresponse.
Figure31.18Authentication, usingdigitalsignature
Alice
(user)
Alice
Bob
31.7KEYMANAGEMENTBob
(server)
Wehaveusedsymmetric-key andasymmetric-key cryptography inourdiscussion
throughout thechapter.However, weneverdiscussed howsecretkeysinsymmetric-key
cryptography andhowpublickeysinasymmetric-key cryptography aredistributed and
maintained. Inthissection,wetouchonthesetwoissues.Wefirstdiscussthedistribu­
tionofsymmetric keys;wethendiscussthedistribution ofasymmetric keys.
Symmetric- KeyDistribution
Wehavelearnedthatsymmetric-key cryptography ismoreefficientthanasymmetric­
keycryptography whenweneedtoencryptanddecryptlargemessages. Symmetric­
keycryptography, however, needsasharedsecretkeybetween twoparties.
IfAliceneedstoexchange confidential messages withNpeople,sheneedsNdifferent
keys.WhatifNpeopleneedtocommunicate withoneanother?AtotalofN(N-1)/2keys
isneeded.EachpersonneedstohaveN-1keystocommunicate witheachoftheother
people,butbecausethekeysareshared,weneedonlyN(N-1)12.Thismeansthatif
1millionpeopleneedtocommunicate withoneanother,eachpersonhasalmost0.5mil­
liondifferentkeys;intotal,almost1billionkeysareneeded.Thisisnormally referredtoas
theN2problembecausethenumberofrequiredkeysforNentitiesisclosetoN2.
Thenumberofkeysisnottheonlyproblem; thedistribution ofkeysisanother.If
AliceandBobwanttocommunicate, theyneedtosomehow exchange asecretkey;if
Alicewantstocommunicate with1millionpeople,howcansheexchange 1million
keyswith1millionpeople?UsingtheInternetisdefinitely notasecuremethod.982CHAPTER 31NETWORK SECURITY
Itisobviousthatweneedanefficientwayofmaintaining anddistributing secret
keys.
KeyDistribution Center:KDC
Apractical solutionistheuseofatrustedparty,referredtoasakeydistribution cen­
ter(KDC).Toreducethenumberofkeys,eachpersonestablishes asharedsecretkey
withtheKDCasshowninFigure31.19.
Figure31.19KDC
Alice~. KAlice K~Bob~~~ Bb~~~
&
K~'~~""';- "'~"'K~~~~~& Ann George
Ann------------ c;:::;:::u:J---------- --George
E:9
• "-......KBetsy
:Krd",KDC .....Ie, ....., ... , ..
Ted&,/ ..........& Betsy
Asecretkeyisestablished betweenKDCandeachmember. Alicehasasecretkey
withKDC,whichwerefertoasKAlice;BobhasasecretkeywithKDC,whichwerefer
toasKBob;andsoon.Nowthequestion is,HowcanAlicesendaconfidential message
toBob?Theprocessisasfollows:
1.AlicesendsarequesttoKDC,statingthatsheneedsasession(temporary) secret
keybetweenherselfandBob.
2.KDCinformsBobofAlice'srequest.
3.IfBobagrees,asessionkeyiscreatedbetweenthetwo.
Thesecretkeybetween AliceandBobthatisestablished withtheKDCisusedto
authenticate AliceandBobtotheKDCandtopreventEvefromimpersonating either
ofthem.Wediscusshowasessionkeyisestablished betweenAliceandBoblaterinthe
chapter.
SessionKeys
AKDCcreatesasecretkeyforeachmember. Thissecretkeycanbeusedonlybetween
thememberandtheKDC,notbetween twomembers. IfAliceneedstocommunicate
secretlywithBob,sheneedsasecretkeybetweenherselfandBob.AKDCcancreatea
session(temporary) keybetweenAliceandBobusingtheirkeyswiththecenter.The
keysofAliceandBobareusedtoauthenticate AliceandBobtothe center andtoeach
otherbeforethesessionkeyisestablished. Aftercommunication isterminated, theses­
sionkeyisnolongervalid.
Asessionsymmetric keybetweentwopartiesisusedonlyonce.SECTION 31.7KEYMANAGEMENT 983
Severaldifferent approaches havebeenproposed tocreatethesessionkeyusing
ideaswepreviously discussed forentityauthentication.
Letusdiscussoneapproach, thesimplest one,asshowninFigure31.20.Although
thissystemhassomeflaws,itshowstheidea.Moresophisticated approaches canbe
foundinsecuritybooks.
Figure31.20 Creating asessionkeybetweenAliceandBobusingKDC
KDC­u:;:L::UJ~-- ••-----1 Alice,BobI---~~IBob_....
DStep1Alicesendsaplaintext message totheKDCtoobtainasymmetric session
keybetween Bobandherself.Themessage contains herregistered identity(the
wordAliceinthefigure)andtheidentityofBob(thewordBobinthefigure).This
message isnotencrypted, itispublic.KDCdoesnotcare.
DStep2KDCreceivesthemessage andcreateswhatiscalledaticket.Theticketis
encrypted usingBob'skey(KB).Theticketcontainstheidentities ofAliceandBob
andthesessionkey(KAB).TheticketwithacopyofthesessionkeyissenttoAlice.
Alicereceives themessage, decrypts it,andextractsthesessionkey.Shecannot
decryptBob'sticket;theticketisforBob,notforAlice.Notethatwehaveadouble
encryption inthismessage; theticketisencrypted andtheentiremessage isalso
encrypted. Inthesecondmessage, Aliceisactually authenticated totheKDC,
becauseonlyAlicecanopenthewholemessageusinghersecretkeywithKDC.
DStep3AlicesendsthetickettoBob.BobopenstheticketandknowsthatAliceneeds
tosendmessages tohimusingKABasthesessionkey.Notethatinthismessage,
Bobisauthenticated totheKDCbecauseonlyBobcanopentheticket.SinceBobis
authenticated totheKDC,heisalsoauthenticated toAlicewhotruststheKDC.In
thesameway,Aliceisalsoauthenticated toBob,becauseBobtruststheKDCand
theKDChassentthetickettoBobwhichincludestheidentityofAlice.
Kerberos
Kerberos isanauthentication protocol andatthesametimeaKDCthathasbecome
verypopular.Severalsystemsincluding Windows 2000useKerberos. Itisnamedafter
thethree-headed doginGreekmythology thatguardstheGatesofHades.Originally
designed atM.LT.,ithasgonethroughseveralversions. Wediscussonlyversion4,the
mostpopular.Bob(Server)984CHAPTER 31NETWORK SECURITY
Servers Threeserversareinvolved intheKerberos protocol: anauthentication server
(AS),aticket-granting server(TGS),andareal(data)serverthatprovides servicesto
others.Inourexamples andfiguresBobistherealserverandAliceistheuserrequest­
ingservice.Figure31.21showstherelationship betweenthesethreeservers.
Figure31.21Kerberos servers
1.Request ticketforTGS
2.Alice-TGSsessionkey
andticketforTGSIil
Alire
~: ~AS,:;:;,
~II(-~'8
3.Request ticketforBob
4.Alice-Bob sessionkey
__an_d_tl_'c_ke_t_fo_r_Bo_b •~
5.Request access~
6.Grantaccess
oAuthentication Server(AS).ASistheKDCinKerberos protocol. Eachuserreg­
isterswithASandisgrantedauseridentityandapassword. AShasadatabase
withtheseidentities andthecorresponding passwords. ASverifiestheuser,issues
asessionkeytobeusedbetweenAliceandTGS,andsendsaticketforTGS.
oTicket-Granting Server(TGS).TGSissuesaticketfortherealserver(Bob).It
alsoprovides thesessionkey(KAB)between AliceandBob.Kerberos hassepa­
ratedtheuserverification fromticketissuing.Inthisway,although Aliceverifies
herIDjustoncewithAS,shecancontactTGSmultipletimestoobtainticketsfor
different realservers.
oRealServer.Therealserver(Bob)provides servicesfortheuser(Alice).Kerberos
isdesigned foraclient/server program suchasFTP,inwhichauserusestheclient
processtoaccesstheserverprocess. Kerberos isnotusedforperson-to-person
authentication.
Operation Aclientprocess(Alice)canaccessaprocessrunningontherealserver
(Bob)insixstepsasshowninFigure31.22.
oStep1.AlicesendsherrequesttoASinplaintext, usingherregistered identity.
oStep2.ASsendsamessage encrypted withAlice'ssymmetric keyKA-Themes­
sagecontainstwoitems:asessionkeyKsthatisusedbyAlicetocontactTGSanda
ticketforTGSthatisencrypted withtheTGSsymmetric keyKTG.Alicedoesnot
knowKA,butwhenthemessage arrives,shetypeshersymmetric password. The
password andtheappropriate algorithm togethercreateKAifthepassword iscorrect.
Thepassword isthenimmediately destroyed; itisnotsenttothenetwork, anditdoesSECTION 31.7KEYMANAGEMENT 985
Figure31.22 Kerberos example
Server(Bob)
ASTGS =i-Aliceiu::::u::u
E:=l
~iii.!!!!!!
1--1""..'"
I~B~KBI1I;IIf----------- l:2]c'0lice,KABI-------·~I
1+---------1
 f&ful---------·~~I:
notstayintheterminal.ItisonlyusedforamomenttocreateKA-Theprocessnow
usesKAtodecryptthemessagesent.BothKsandtheticketareextracted.
oStep3.AlicenowsendsthreeitemstoTGS.Thefirstistheticketreceivedfrom
AS.Thesecondisthenameoftherealserver(Bob),thethirdisatimestamp which
isencrypted byKs.Thetimestamp preventsareplaybyEve.
oStep4.Now,TGSsendstwotickets,eachcontaining thesessionkeybetween
AliceandBobKAB.TheticketforAliceisencrypted withKs;theticketforBobis
encrypted withBob'skeyKB.NotethatEvecannotextractKABbecauseshedoes
notknowKsorKB.Shecannotreplaystep3becauseshecannotreplacethetimestamp
withanewone(shedoesnotknowKS)'Evenifsheisveryquickandsendsthe
step3message beforethetimestamp hasexpired,shestillreceivesthesametwo
ticketsthatshecannotdecipher.
oStep5.AlicesendsBob'sticketwiththetimestamp encrypted byKAB.
oStep6.Bobconfirms thereceiptbyadding1tothetimestamp. Themessage is
encrypted withKABandsenttoAlice.
UsingDifferent Servers NotethatifAliceneedstoreceiveservicesfromdifferent
servers,sheneedrepeatonlysteps3to6.ThefirsttwostepshaveverifiedAlice'siden­
tityandneednotberepeated. AlicecanaskTGStoissueticketsformultipleserversby
repeating steps3to6.986CHAPTER 31NETWORK SECURITY
Realms Kerberos allowstheglobaldistribution ofASsandTGSs,witheachsystem
calledarealm.Ausermaygetaticketforalocalserveroraremoteserver.Inthesec­
ondcase,forexample, AlicemayaskherlocalTGStoissueaticketthatisaccepted by
aremoteTGS.ThelocalTGScanissuethisticketiftheremoteTGSisregistered with
thelocalone.ThenAlicecanusetheremoteTGStoaccesstheremoterealserver.
Public-KeyDistribution
Inasymmetric-key cryptography, peopledonotneedtoknowasymmetric sharedkey.
IfAlicewantstosendamessage toBob,sheonlyneedstoknowBob'spublickey,
whichisopentothepublicandavailable toeveryone.IfBobneedstosendamessage
toAlice,heonlyneedstoknowAlice'spublickey,whichisalsoknowntoeveryone. In
public-key cryptography, everyone shieldsaprivatekeyandadvertises apublickey.
Inpublic-key cryptography, everyone hasaccesstoeveryone's publickey;
publickeysareavailable tothepublic.
Publickeys,likesecretkeys,needtobedistributed tobeuseful.Letusbrieflydis­
cussthewaypublickeyscanbedistributed.
PublicAnnouncement
Thenaiveapproach istoannounce publickeyspublicly. Bobcanputhispublickeyon
hiswebsiteorannounce itinalocalornationalnewspaper. WhenAliceneedstosenda
confidential message toBob,shecanobtainBob'spublickeyfromhissiteorfromthe
newspaper, orshecanevensendamessagetoaskforit.Figure31.23showsthesituation.
Figure31.23 Announcing apublickey
I
I
\ I I
" I" '.....',:,' .".'
" \ I I.".'
......\I'------'-.....j:'------
Publickey
Bob
Thisapproach, however, isnotsecure;itissubjecttoforgery.Forexample, Eve
couldmakesuchapublicannouncement. BeforeBobcanreact,damagecouldbedone.
EvecanfoolAliceintosendingheramessage thatisintended forBob.Evecouldalso
signadocument withacorresponding forgedprivatekeyandmakeeveryone believeit
wassignedbyBob.Theapproach isalsovulnerable ifAlicedirectlyrequests Bob's
publickey.Evecanintercept Bob'sresponse andsubstitute herownforgedpublickey
forBob'spublickey.SECTION 31.7KEYMANAGEMENT 987
TrustedCenter
Amoresecureapproach istohaveatrustedcenterretainadirectory ofpublickeys.The
directory, liketheoneusedinatelephone system,isdynamically updated. Eachuser
canselectaprivate/public key,keeptheprivatekey,anddeliverthepublickeyforinser­
tionintothedirectory. Thecenterrequires thateachuserregisterinthecenterand
provehisorheridentity.Thedirectory canbepubliclyadvertised bythetrustedcenter.
Thecentercanalsorespondtoanyinquiryaboutapublickey.Figure31.24showsthe
concept.
Figure31.24 Trustedcenter
,,,
\... \"', \......,
".....\.
Directory· ·· ·
AliceKA· ···· ·
BobKB· ·· ·· ·
Trustedcenter
Controlled TrustedCenter
Ahigherlevelofsecuritycanbeachieved ifthereareaddedcontrolsonthedistribution
ofthepublickey.Thepublic-key announcements canincludeatimestamp andbe
signedbyanauthority topreventinterception andmodification oftheresponse. IfAlice
needstoknowBob'spublickey,shecansendarequesttothecenterincluding Bob's
nameandatimestamp. Thecenterresponds withBob'spublickey,theoriginalrequest,
andthetimestamp signedwiththeprivatekeyofthecenter.Aliceusesthepublickeyof
thecenter,knownbyall,todecryptthemessageandextractBob'spublickey.Figure31.25
showsonescenario.
Certification Authority
Theprevious approach cancreateaheavyloadonthecenterifthenumberofrequests
islarge.Thealternative istocreatepublic-key certificates. Bobwantstwothings:he
wantspeopletoknowhispublickey,andhewantsnoonetoacceptapublickeyforged
ashis.Bobcangotoacertification authority (CA)-a federalorstateorganization
thatbindsapublickeytoanentityandissuesacertificate. TheCAhasawell-known
publickeyitselfthatcannotbeforged.TheCAchecksBob'sidentification (usinga988 CHAPTER 31NETWORK SECURITY
Figure31.25 Controlled trustedcenter
Directory······
AliceKA······
BobKg·:··
Alice
r'--Trustedcenter cw:::w:::J
E:::3-
NeedBob'skey,Time
KCenter
NeedBob'skey,Time,KB
pictureIDalongwithotherproof).ItthenasksforBob'spublickeyandwritesitonthe
certificate. Topreventthecertificate itselffrombeingforged,theCAsignsthecertificate
withitsprivatekey.NowBobcanuploadthesignedcertificate. Anyonewhowants
Bob'spublickeydownloads thesignedcertificate andusesthepublickeyofthecenter
toextractBob'spublickey.Figure31.26showstheconcept.
Figure31.26 Certification authority
Directory
__A"p~IX jL.....-K......B_I-_=-=cw:::w:::JTrustedE3center-
Issue· ··:·
AliceKA······
,~BobKg· ··:·
Bob
..
-",' II
.. II,,' II
" II I
I I
I I
IAnnounce topUblic
I
\ I
, I
\ I
,I
"....',I
" \ I
....,, I..-------- ~--- -SECTION 31.7KEYMANAGEMENT 989
X.509Although theuseofaCAhassolvedtheproblemofpublic-key fraud,ithas
createdasideeffect.Eachcertificate mayhaveadifferent format.IfAlicewa.!1tstouse
aprogram toautomatically download different certificates anddigestsbelonging todif­
ferentpeople,theprogram maynotbeabletodoso.Onecertificate mayhavethepublic
keyinoneformatandanotherinanotherformat.Thepublickeymaybeonthefirstline
inonecertificate andonthethirdlineinanother.Anything thatneedstobeuseduniver­
sallymusthaveauniversal format.
Toremovethissideeffect,lTDhasdesigned aprotocolcalledX.509,whichhasbeen
accepted bytheInternetwithsomechanges.X.509isawaytodescribethecertificate ina
structured way.Itusesawell-known protocolcalledASN.1(Abstract Syntax Notation 1)
thatdefinesfieldsfamiliartoCprogrammers. Thefollowing liststhefieldsinacertificate.
DVersion ThisfielddefinestheversionofX.509ofthecertificate. Theversion
numberstartedat0;thecurrentversionis2(thethirdversion).
oSerialnumber Thisfielddefinesanumberassigned toeachcertificate. Thevalue
isuniqueforeachcertificate issued.
oSignature Thisfield,forwhichthenameisinappropriate, identifies thealgorithm
usedtosignthecertificate. Anyparameter thatisneededforthesignature isalso
definedinthisfield.
oIssuerThisfieldidentifies thecertification authority thatissuedthecertificate. The
nameisnormally ahierarchy ofstringsthatdefinesacountry,state,organization,
department, andsoon.oPeriodofvalidity Thisfielddefinestheearliestandthelatesttimesthecertificate
isvalid.oSubject Thisfielddefinestheentitytowhichthepublickeybelongs.Itisalsoa
hierarchy ofstrings.Partofthefielddefineswhatiscalledthecommon name,
whichistheactualnameofthebeholder ofthekey.
oSubject's publickeyThisfielddefinesthesubject's publickey,theheartofthe
certificate. Thefieldalsodefinesthecorresponding algorithm (RSA,forexample)
anditsparameters.
oIssueruniqueidentifier Thisoptionalfieldallowstwoissuerstohavethesame
issuerfieldvalue,iftheissueruniqueidentifiers aredifferent.
DSubjectuniqueidentifier Thisoptionalfieldallowstwodifferent subjectstohave
thesamesubjectfieldvalue,ifthesubjectuniqueidentifiers aredifferent.
oExtension Thisfieldallowsissuerstoaddmoreprivateinformation tothecertificate.
oEncrypted Thisfieldcontains thealgorithm identifier, asecurehashoftheother
fields,andadigitalsignature ofthathash.
Public-Key Infrastructures (PKI)
Whenwewanttousepublickeysuniversally, wehaveaproblem similartosecret-key
distribution. WefoundthatwecannothaveonlyoneKDCtoanswerthequeries.We
needmanyservers.Inaddition, wefoundthatthebestsolutionistoputtheserversina
hierarchical relationship withoneanother.Likewise, asolutiontopublic-key queriesis
ahierarchical structure calledapublic-key infrastructure (PKI).Figure31.27shows
anexampleofthishierarchy.990CHAPTER 31NETWORK SECURITY
Figure31.27PKIhierarchy
Level-l
CAl
Atthefirstlevel,wecanhavearootCAthatcancertifytheperformance ofCAsin
thesecondlevel;theselevel-lCAsmayoperateinalargegeographic orlogicalarea.
Thelevel-2CAsmayoperateinsmallergeographic areas.
Inthishierarchy, everybody truststheroot.Butpeoplemayormaynottrustinter­
mediateCAs.IfAliceneedstogetBob'scertificate, shemayfindaCAsomewhere to
issuethecertificate. ButAlicemaynottrustthatCA.Inahierarchy Alicecanaskthe
next-higher CAtocertifytheoriginalCA.Theinquirymaygoallthewaytotheroot.
31.8RECOMMENDED READING
Formoredetailsaboutthesubjectsdiscussed inthischapter,werecommend thefollowing
booksandsites.Theitemsinbrackets[...]refertothereference listattheendofthetext.
Books
Severalbooksarededicated tonetworksecurity,suchas[PHS02], [Bis03],and[SalO3].
31.9KEYTERMS
authentication server(AS)
certification authority (CA)
challenge-response authentication
claimant
dictionary attack
digitalsignature
eavesdropping
entityauthentication
fingerprint
fixedpassword
hashfunctionhashedmessage authentication code
(HMAC)
identification
integrity
Kerberos
keydistribution center(KDC)
message authentication
message authentication code(MAC)
message confidentiality orprivacy
message digest
message integritymessage nonrepudiation
modification detection code
(MDC)
nonce
nonrepudiation
one-time password
one-wayness
password
privacy
public-key infrastructure
(PKI)
saltingSECTION 31.10SUMMARY 991
sessionkey
SHA-I
signature scheme
signingalgorithm
strongcollision
ticket
ticket-granting server
(TGS)
verifier
verifying algorithm
weakcollision
X.509
31.10SUMMARY
DCryptography canprovidefiveservices. Fourofthesearerelatedtothemessage
exchange between AliceandBob.Thefifthisrelatedtotheentitytryingtoaccessa
systemforusingitsresources.
DMessage confidentiality meansthatthesenderandthereceiverexpectprivacy.
DMessage integrity meansthatthedatamustarriveatthereceiverexactlyassent.
DMessage authentication meansthatthereceiverisensuredthatthemessage iscoming
fromtheintended sender,notanimposter.
DNonrepudiation meansthatasender must notbeabletodenysendingamessage
thathesent.
DEntityauthentication meanstoprovetheidentityoftheentitythattriestoaccess
thesystem's resources.
DAmessage digestcanbeusedtopreserve theintegrityofadocument oramessage.
Ahashfunction createsamessage digestoutofamessage.
DAhashfunction mustmeetthreecriteria:one-wayness, resistance toweakcollision,
andresistance tostrongcollision.
DAkeylessmessage digestisusedasamodification detection code(MDC).Itguar­
anteestheintegrity ofthemessage. Toauthenticate thedataorigin,oneneedsa
message authentication code(MAC).
DMACsarekeyedhashfunctions thatcreateacompressed digestfromthemessage
addedwiththekey.Themethodhasthesamebasisasencryption algorithms.
DAdigitalsignature schemecanprovidethesameservices provided byaconven­
tionalsignature. Aconventional signature isincluded inthe document; adigital
signature isaseparateentity.
DDigitalsignature provides message integrity, authentication, andnonrepudiation.
Digitalsignature cannotprovideconfidentiality forthemessage.Ifconfidentiality
isneeded,acryptosystem mustbeappliedoverthescheme.992CHAPTER 31NETWORK SECURiTY
oAdigitalsignature needsanasymmetric-key system.
oInentityauthentication, aclaimant provesheridentitytotheverifierbyusingone
ofthethreekindsofwitnesses: something known,something possessed, orsome­
thinginherent.
oInpassword-based authentication, theclaimant usesastringofcharacters assome­
thingsheknows.
oPassword-based authentication canbedividedintotwobroadcategories: fixedand
one-time.
oInChallenge-response authentication, theclaimant provesthatsheknowsasecret
withoutactuallysendingit.
oChallenge-response authentication canbedividedintofourcategories: symmetric­
keyciphers,keyed-hash functions, asymmetric-key ciphers,anddigitalsignature.
DAkeydistribution center(KDC)isatrustedthirdpartythatassignsasymmetric
keytotwoparties.
oKDCcreatesasecretkeyonlybetween amemberandthecenter.Thesecretkey
between members needstobecreatedasasessionkeywhentwomembers con­
tactKDC.
DKerberos isapopularsessionkeycreatorprotocolthatrequiresanauthentication
serverandaticket-granting server.
DAcertification authority (CA)isafederalorstateorganization thatbindsapublic
keytoanentityandissuesacertificate.
DApublic-key infrastructure (PKI)isahierarchical systemtoanswerqueriesabout
keycertification.
31.11PRACTICE SET
ReviewQuestions
1.Whatisanonce?
2.WhatistheN2problem?
3.NameaprotocolthatusesaKDCforuserauthentication.
4.WhatisthepurposeoftheKerberos authentication server?
5.WhatisthepurposeoftheKerberos ticket-granting server?
6.WhatisthepurposeofX,S09?
7.Whatisacertification authority?
8.Whataresomeadvantages anddisadvantages ofusinglongpasswords?
9.Wediscussed fixedandone-time passwords astwoextremes. Whataboutfrequently
changedpasswords? Howdoyouthinkthisschemecanbeimplemented? Whatare
theadvantages anddisadvantages?
10.Howcanasystempreventaguessing attackonapassword? Howcanabank
preventPINguessing ifsomeone hasfoundorstolenabankcardandtriedto
useit?SECTION 31.11PRACTICE SET 993
Exercises
11.Amessage ismadeof10numbers between 00and99.Ahashalgorithm createsa
digestoutofthismessage byaddingallnumbers modulo100.Theresulting digest
isanumberbetween 00and99.Doesthisalgorithm meetthefirstcriterion ofa
hashalgorithm? Doesitmeetthesecondcriterion? Doesitmeetthethirdcriterion?
12.Amessage ismadeof100characters. Ahashalgorithm createsadigestoutofthis
message bychoosing characters 1,11,21,...,and91.Theresulting digesthas
10characters. Doesthisalgorithm meetthefirstcriterion ofahashalgorithm?
Doesitmeetthesecondcriterion? Doesitmeetthethirdcriterion?
13.Ahashalgorithm createsadigestofNbits.Howmanydifferent digestscanbe
createdfromthisalgorithm?
14.Ataparty,whichismoreprobable, apersonwithabirthday onaparticular dayor
two(ormore)personshavingthesamebirthday?
15.HowisthesolutiontoExercise 14relatedtothesecondandthirdcriteriaofahashing
function?
16.Whichoneismorefeasible, afixed-size digestoravariable-size digest?Explain
youranswer.
17.Amessage is20,000characters. WeareusingadigestofthismessageusingSHA-l.
Aftercreatingthedigest,wedecidedtochangethelast10characters. Canwesay
howmanybitsinthedigestwillbechanged?
18.Aretheprocesses ofcreatingaMACandofsigningahashthesame?Whatarethe
differences?
19.Whenapersonusesamoneymachine togetcash,isthisamessage authentication,
anentityauthentication, orboth?
20.ChangeFigure31.14toprovidetwo-way authentication (AliceforBobandBob
forAlice).
21.ChangeFigure31.16toprovidetwo-way authentication (AliceforBobandBob
forAlice).
22.ChangeFigure31.17toprovidetwo-way authentication (AliceforBobandBob
forAlice).
23.ChangeFigure31.18toprovidetwo-way authentication (AliceforBobandBob
forAlice).
24.Inauniversity, astudentneedstoencryptherpassword (withauniquesymmetric
key)beforesendingitwhenshelogsin.Doesencryption protecttheuniversity or
thestudent?Explainyouranswer.
25.InExercise24,doesithelpifthestudentappendsatimestamp tothepassword before
encryption? Explainyouranswer.
26.InExercise 24,doesithelpifastudenthasalistofpasswords andusesadifferent
oneeachtime?
27.InFigure31.20,whathappensifKDCisdown?
28.InFigure31.21,whathappensiftheASisdown?WhathappensiftheTGSisdown?
Whathappensifthemainserverisdown?
29.InFigure31.26,whathappensifthetrustedcenterisdown?994CHAPTER 31NETWORK SECURITY
30.Addasymmetric-key encryption/decryption layertoFigure31.11toprovideprivacy.
31.Addanasymmetric-key encryption/decryption layertoFigure31.11toprovideprivacy.
Research Activities
32.Thereisahashingalgorithm calledMD5.Findthedifference betweenthisalgorithm
andSHA-l.
33.Thereisahashingalgorithm calledRIPEMD-160. Findthedifference between
thisalgorithm andSHA-l.
34.Compare MD5.SHA-1,andRIPEMD-160.
35.Findsomeinfonnation aboutRSAdigitalsignature.
36.Findsomeinformation aboutDSSdigitalsignature.CHAPTER 32
SecurityintheInternet: IPSec,
SSUTLS, PGp,VPN,andFirewalls
Inthischapter,wewant toshowhowcertainsecurityaspects,particularly privacyand
messageauthentication, canbeappliedtothenetwork, transport, andapplication layersof
theInternetmodel.WebrieflyshowhowtheIPSecprotocol canaddauthentication and
confidentiality totheIPprotocol, howSSL(orTLS)candothesamefortheTCPprotocol,
andhowPGPcandoitfortheSMTPprotocol(e-mail).
Inalltheseprotocols, therearesomecommon issuesthatweneedtoconsider. First,
weneedtocreateaMAC.ThenweneedtoenCl)'ptthemessage and,probably, the
MAC.Thismeans,thatwithsomeminorvariations, thethreeprotocols discussed inthis
chaptertakeapacketfromtheappropriate layerandcreateanewpacketwhichisauthen­
ticatedandencrypted. Figure32.1showsthisgeneralidea.
Figure32.1Common structureofthreesecurityprotocols
Headerofsecurityprotocol
Payload
(fromIP,TCP,orSMTP)
)
Dataflow
Notethattheheaderorthetrailerofthesecurityprotocolmayormaynotbeincluded
intheencryption process.Notealsothatsomeprotocols may needmoreinformation in
thesecuredpacket;thefigureshowsonlythegeneralidea.
Onecommon issueinalltheseprotocols issecurityparameters. Even the simplified
structure inFigure32.1suggeststhatAliceandBobneedtoknowseveralpiecesofinfor­
mation,securityparameters, beforetheycansendsecureddatatoeachother.Inparticular,
theyneedtoknowwhichalgorithms touseforauthentication andencryption/decryption.
995996CHAPTER 32SECURITY INTHEINTERNET: IPSec,SSl./TLS, PGP,VPN,ANDFIREWALLS
Evenifthesealgorithms canbepredetermined foreveryone intheworld,whichtheyare
notaswewillsee,BobandAlicestillneedatleasttwokeys:onefortheMACandone
forencryption/decryption. Inotherwords,thecomplexity oftheseprotocols liesnotin
thewaytheMAC dataarecalculated orthewayencryption isperformed; itliesinthefact
thatbeforecalculating the MAC andperforming encryption, weneedtocreateasetof
securityparameters betweenAliceandBob.
Atfirstglance,itlooksasiftheuseofanyoftheseprotocols mustinvolveaninfi­
nitenumberofsteps.Tosendsecureddata,weneedasetofsecurityparameters. The
secureexchange ofsecurityparameters needsasecondsetofsecurityparameters. The
secureexchange ofthesecondsetofsecurityparameters needsathirdsetofsecurity
parameters. Andsoonadinfinitum.
Tolimitthesteps,wecanusepublic-key cryptography ifeachpersonhasaprivate
andpublickeypair.Thenumberofstepscanbereducedtooneortwo.Intheone-step
version,wecanusesessionkeystocreatetheMACandencryptbothdataandMAC.
Thesessionkeysandthelistofalgorithms canbesentwiththepacketbutencrypted by
usingpublic-key ciphers.Inthetwo-step version,wefirstestablish thesecuritypara­
metersbyusingpublic-key ciphers.Wethenusethesecurityparameters tosecurely
sendactualdata.Oneofthethreeprotocols, PGP,usesthefirstapproach; theothertwo
protocols, IPSecandSSLITLS, usethesecond.
Wealsodiscussacommon protocol, thevirtualprivatenetwork(VPN),thatuses
theIPSec.Attheendofthechapter,wediscussthefirewall,amechanism forpreventing
theattackonthenetworkoftheorganization.
32.1IPSecurity (IPSec)
IPSecurity (IPSec)isacollection ofprotocols designed bytheInternetEngineering
TaskForce(IETF)toprovidesecurityforapacketatthenetworklevel.IPSechelpsto
createauthenticated andconfidential packetsfortheIPlayerasshowninFigure32.2.
Figure32.2TCPIIPprotocol suiteandIPSec
Applications
UDP,TCP,orSCTP
TwoModesIP
Underlying physical networksI
IIPSecisdesigned
toprovidesecurity
atthenetworklayer.
IPSecoperatesinoneoftwodifferent modes:thetransport modeorthetunnelmodeas
showninFigure32.3.SECTION 32.1IPSecurity (IPSec) 997
Figure32.3Transport modeandtunnelmodesofIPSecprotocol
Transport layer
Transport, layer
payload
Network layer
IPSec
a.Transport modeNetwork layer
IPSec
b.Tunnelmode
Transport Mode
Inthetransport mode,IPSecprotectswhatisdelivered fromthetransport layertothe
network layer.Inotherwords,thetransport modeprotectsthenetwork layerpayload,
thepayloadtobeencapsulated inthenetworklayer.
Notethatthetransport modedoesnotprotecttheIPheader.Inotherwords,the
transport modedoesnotprotectthewholeIPpacket;itprotectsonlythepacketfrom
thetransport layer(theIPlayerpayload). Inthismode,theIPSecheaderandtrailerare
addedtotheinformation corningfromthetransport layer.TheIPheaderisaddedlater.
IPSecinthetransport modedoesnotprotecttheIPheader;
itonlyprotectstheinformation comingfromthetransport layer.
Thetransport modeisnormally usedwhenweneedhost-to-host (end-to-end) pro­
tectionofdata.ThesendinghostusesIPSectoauthenticate and/orencryptthepayload
delivered fromthetransport layer.Thereceiving hostusesIPSectochecktheauthenti­
cationandlordecrypttheIPpacketanddeliverittothetransport layer.Figure32.4
showsthisconcept.
Figure32.4Transport modeinaction
!~. Transport layer fI Transport layerJI:;!IPSeclayer )!=i::jl:::::::::::=±=!l IPSeclayer
!II! INetwork layer I1il!ll!C::::.=:::::::::::::::ll Network layer
~-----illlac::::::=:=::::::::::::rt>>----&
HostA HostB998CHAPTER 32SECURITY INTHEINTERNET: IPSec,SSUTLS, PGP,VPN,ANDFIREWALLS
TunnelMode
Inthetunnelmode,IPSecprotectstheentireIPpacket.IttakesanIPpacket,including
theheader,appliesIPSecsecuritymethods totheentirepacket,andthenaddsanewIP
headerasshowninFigure32.5.
ThenewIPheader,aswewillseeshortly,hasdifferent information thantheoriginal
IFheader.Thetunnelmodeisnormally usedbetween tworouters,between ahostanda
router,orbetween arouterandahostasshowninFigure32.5.
Figure32.5Tunnelmodeinaction
HostA
r--!I:
I·Network layer
IPSeclayer
Network layer
Tunnel~~HostB
r--
Inotherwords,weusethetunnelmodewheneitherthesenderorthereceiverisnot
ahost.Theentireoriginalpacketisprotected fromintrusion between thesenderandthe
receiver. It'sasifthewholepacketgoesthroughanimaginary tunnel.
IPSecintunnelmodeprotectstheoriginalIPheader.
TwoSecurity Protocols
IPSecdefinestwoprotocols-the Authentication Header(AH)Protocol andtheEncap­
sulatingSecurity Payload(ESP)Protocol-to provideauthentication and/orencryption
forpacketsattheIPlevel.
Authentication Header(AH)
TheAuthentication Header(AH)Protocol isdesigned toauthenticate thesourcehost
andtoensuretheintegrity ofthepayloadcarriedintheIPpacket.Theprotocol usesa
hashfunction andasymmetric keytocreateamessage digest;thedigestisinsertedin
theauthentication header.TheAHisthenplacedintheappropriate locationbasedonthe
mode(transport ortunnel).Figure32.6showsthefieldsandthepositionoftheauthen­
ticationheaderinthetransport mode.
WhenanIPdatagram carriesanauthentication header,theoriginalvalueinthepro­
tocolfieldoftheIPheaderisreplaced bythevalue51.Afieldinsidetheauthentication
header(thenextheaderfield)holdstheoriginalvalueoftheprotocol field(thetypeof
payload beingcarriedbytheIPdatagram). Theaddition ofanauthentication header
followsthesesteps:
1.Anauthentication headerisaddedtothepayloadwiththeauthentication datafield
settozero.SECTION 32.1IPSecurity (IPSec) 999
Figure32.6Authentication Header(AH)Protocol intransport mode
I,Datausedincalculation ofauthentication data
(exceptthosefieldsinIPheaderchanging duringtransmission)
Transport layerpayload
Securityparameter index
Sequence number
Authentication data(digest)
(variable length),I
2.Padding maybeaddedtomakethetotallengthevenforaparticular hashing
algorithm.
3.Hashingisbasedonthetotalpacket.However, onlythosefieldsoftheIPheaderthat
donotchangeduringtransmission areincluded inthecalculation ofthemessage
digest(authentication data).
4.Theauthentication dataareinsertedintheauthentication header.
S.TheIPheaderisaddedafterthevalueoftheprotocolfieldischanged to51.
Abriefdescription ofeachfieldfollows:
oNextheader. The8-bitnext-header fielddefinesthetypeofpayloadcarriedbythe
IPdatagram (suchasTCP,UDP,ICMP,orOSPF).Ithasthesamefunction asthe
protocol fieldintheIPheaderbeforeencapsulation. Inotherwords,theprocess
copiesthevalueoftheprotocol fieldintheIPdatagram tothisfield.Thevalueof
theprotocol fieldinthenewIPdatagram isnowsetto51toshowthatthepacket
carriesanauthentication header.
oPayloadlength.Thenameofthis8-bitfieldismisleading. Itdoesnotdefinethe
lengthofthepayload; itdefinesthelengthoftheauthentication headerin4-byte
multiples, butitdoesnotincludethefirst8bytes.
oSecurity parameter index.The32-bitsecurityparameter index(SPI)fieldplays
theroleofavirtual-circuit identifier andisthesameforallpacketssentduringa
connection calledasecurityassociation (discussed later).
oSequence number. A32-bitsequence numberprovides ordering information for
asequence ofdatagrams. Thesequence numbers preventaplayback. Notethatthe
sequence numberisnotrepeated evenifapacketisretransmitted. Asequence num­
berdoesnotwraparoundafteritreaches232;anewconnection mustbeestablished.
oAuthentication data.Finally,theauthentication datafieldistheresultofapplying
ahashfunctiontotheentireIPdatagram exceptforthefieldsthatarechangedduring
transit(e.g.,time-to-live),1000 CHAPTER 32SECURITY INTHEINTERNET: IPSec,SSUFLS, PCP,VPN,ANDFIREWALLS
TheAHProtocol provides sourceauthentication anddataintegrity, butnotprivacy.
Encapsulating Security Payload(ESP)
TheAHProtocol doesnotprovideprivacy,onlysourceauthentication anddataintegrity.
IPSeclaterdefinedanalternative protocolthatprovides sourceauthentication, integrity,
andprivacycalledEncapsulating Security Payload (ESP).ESPaddsaheaderand
trailer.NotethatESP'sauthentication dataareaddedattheendofthepacketwhich
makesitscalculation easier.Figure32.7showsthelocation oftheESPheaderand
trailer.
Figure32.7Encapsulation SecurityPayload(ESP)Protocol intransport mode
I'
Securityparameter index
Sequence numberAuthenticated
Encrypted
.PaddingSbits
Nextheader
WhenanIPdatagram carriesanESPheaderandtrailer,thevalueoftheprotocol
fieldintheIPheaderis50.AfieldinsidetheESPtrailer(thenext-header field)holdsthe
originalvalueoftheprotocolfield(thetypeofpayloadbeingcarriedbytheIPdatagram,
suchasTCPorUDP).TheESPprocedure followsthesesteps:
1.AnESPtrailerisaddedtothepayload.
2.Thepayloadandthetrailerareencrypted.
3.TheESPheaderisadded.
4.TheESPheader,payload, andESPtrailerareusedtocreatetheauthentication data.
5.Theauthentication dataareaddedtotheendoftheESPtrailer.
6.TheIPheaderisaddedaftertheprotocol valueischangedto50.
Thefieldsfortheheaderandtrailerareasfollows:
oSecurity parameter index.The32-bitsecurityparameter indexfieldissimilarto
thatdefinedfortheAHProtocol.
oSequence number. The32-bitsequence numberfieldissimilartothatdefinedfor
theAHProtocol.
oPadding. Thisvariable-length field(0to255bytes)ofOsservesaspadding.
oPadlength.The8-bitpadlengthfielddefinesthenumberofpaddingbytes.The
valueisbetween 0and255;themaximum valueisrare.
oNextheader.The8-bitnext-header fieldissimilartothatdefinedintheAHProtocol.
ItservesthesamepurposeastheprotocolfieldintheIPheaderbeforeencapsulation.SECTION 32.1IPSecurity (iPSec) 1001
oAuthentication data.Finally,theauthentication datafieldistheresultofapplying
anauthentication schemetopartsofthedatagram. Notethedifference betweenthe
authentication datainAHandESP.InAH,partoftheIPheaderisincluded inthe
calculation oftheauthentication data;inESP,itisnot.
ESPprovides sourceauthentication, dataintegrity, andprivacy.
IPv4andIPv6
IPSecsupports bothIPv4andIPv6.InIPv6,however, AHandESParepartofthe
extension header.
AHVersusESP
TheESPProtocol wasdesigned aftertheAHProtocol wasalreadyinuse.ESPdoes
whatever AHdoeswithadditional functionality (privacy). Thequestion is,Whydowe
needAH?Theansweris,Wedon't.However, theimplementation ofAHisalready
included insomecommercial products, whichmeansthatAHwillremainpartofthe
Internetuntiltheproducts arephasedout.
Services Provided byIPSec
The twoprotocols, AHandESP,canprovideseveralsecurityservicesforpacketsatthe
networklayer.Table32.1showsthelistofservicesavailable foreachprotocol.
Table32.1IPSecservices
Services AH ESP
Accesscontrol Yes Yes
Message authentication (message integrity) Yes Yes
Entityauthentication (datasourceauthentication) Yes Yes
Confidentiality No Yes
Replayattackprotection Yes Yes
AccessControl IPSecprovides accesscontrolindirectly byusingaSecurityAssoci­
ationDatabase (SADB)aswewillseeinthenextsection.Whenapacketarrivesata
destination, andthereisnosecurityassociation alreadyestablished forthispacket,the
packetisdiscarded.
Message Authentication Theintegrityofthemessage ispreserved inbothAHand
ESPbyusingauthentication data.Adigestofdataiscreatedandsentbythesenderto
becheckedbythereceiver.
EntityAuthentication Thesecurityassociation andthekeyed-hashed digestofthe
datasentbythesenderauthenticate thesenderofthedatainbothAHandESP.
Confidentiality Theencryption ofthemessageinESPprovides confidentiality. AH,
however, doesnotprovideconfidentiality. Ifconfidentiality isneeded,oneshoulduse
ESPinsteadofAH.1002 CHAPTER 32SECURITY INTHEINTERNET: IPSec,SSUTLS, PGP,VPN,ANDFIREWALLS
ReplayAttackProtection Inbothprotocols, thereplayattackisprevented byusing
sequence numbers andaslidingreceiverwindow.EachIPSecheadercontainsaunique
sequence numberwhenthesecurityassociation isestablished. Thenumberstartsfrom
oandincreases untilthevaluereaches232-1(thesizeofthesequence numberfieldis
32bits).Whenthesequence numberreachesthemaximum, itisresettozeroand,atthe
sametime,theoldsecurityassociation (seethenextsection)isdeletedandanewoneis
established. Topreventprocessing ofduplicate packets,IPSecmandates theuseofa
fixed-size windowatthereceiver.Thesizeofthewindowisdetermined bythereceiver
withadefaultvalueof64.
Security Association
Aswementioned intheintroduction tothechapter,eachofthreeprotocols wediscuss
inthischapter(IPSec,SSLffLS, andPGP)needsasetofsecurityparameters beforeit
canbeoperative. InIPSec,theestablishment ofthesecurityparameters isdoneviaa
mechanism calledsecurityassociation (SA).
IP,aswehaveseen,isaconnectionless protocol: Eachdatagram isindependent of
theothers.Forthistypeofcommunication, thesecurityparameters canbeestablished
inoneofthreeways.
1.Securityparameters relatedtoeachdatagram canbeincluded ineachdatagram.
Thedesigner ofIPSecdidnotchoosethisoptionprobably becauseofoverhead.
Addingsecurityparameters toeachdatagram createsalargeoverhead, particularly
ifthedatagram isfragmented severaltimesduringitsjourney.
2.Asetofsecurityparameters canbeestablished foreachdatagram. Thismeansthat
beforeeachdatagram istransmitted, asetofpacketsneedstobeexchanged between
thesenderandreceivertoestablish securityparameters. Thisisprobably lesseffi­
cientthanthefirstchoice,anditisnotusedinIPSec.
3.IPSecusesthethirdchoice.Asetofsecurityparameters canbeestablished between
asenderandaparticular receiverthefirsttimethesenderhasadatagram tosendto
thatparticular receiver.Thesetcanbesavedforfuturetransmission ofIPpacketsto
thesamereceiver.
Security association isaveryimportant aspectofIPSec.Usingsecurityassociation,
IPSecchangesaconnectionless protocol, IP,toaconnection-oriented protocol. We
canthinkofanassociation asaconnection. WecansaythatwhenAliceandBob
agreeuponasetofsecurityparameters betweenthem,theyhaveestablished alogical
connection betweenthemselves (whichiscalledassociation). However, theymaynot
usethisconnection allthetime.Afterestablishing theconnection, Alicecansenda
datagram toBobtoday,anotherdatagram afewdayslater,andsoon.Thelogical
connection isthereandreadyforsendingasecuredatagram. Ofcourse,theycan
breaktheconnection, ortheycanestablish anewoneafterawhile(whichisamore
securewayofcommunication).
ASimpleExample
Asecurityassociation isaverycomplex setofpiecesofinformation. However, wecan
showthesimplestcaseinwhichAlicewantstohaveanassociation withBobforuseinSECTION 32.11PSecurity (IPSec) 1003
atwo-way communication. Alicecanhaveanoutbound association (fordatagrams to
Bob)andaninboundassociation (fordatagrams fromBob).Bobcanhavethesame.In
thiscase,thesecurityassociations arereducedtotwosmalltablesforbothAliceand
BobasshowninFigure32.8.
Figure32.8Simpleinboundandoutbound securityassociations
ToProtocol AuthenticationOutbound SA
ESP SHA-I,xDES,yOutbound SA
ToProtocol Authentication Encryption
Bob ESP SHA-l,xDES,y Alice AH MD5,z
Authentication Encryption
Authenticate
andencrypt
VerifyAlice
--
IPSecpacket
IPSecpacketBobIf""':·
Verify
anddecrypt
Authenticate
ThefigureshowsthatwhenAliceneedstosendadatagram toBob,sheusesthe
ESPProtocolofIPSec.Authentication isdonebyusingSHA-lwithkeyx.Theencryption
isdonebyusingDESwithkeyy.WhenBobneedstosendadatagram toAlice,heuses
theARProtocol ofIPSec.Authentication isdonebyusingMD5withkeyz.Notethat
theinboundassociation forBobisthesameastheoutbound association forAlice,and
viceversa.
SecurityAssociation Database (SADB)
Asecurityassociation canbeverycomplex. Thisisparticularly trueifAlicewantsto
sendmessages tomanypeopleandBobneedstoreceivemessages frommanypeople.
Inaddition, eachsiteneedstohavebothinboundandoutbound SAstoallowbidirectional
communication. Inotherwords,weneedasetofSAsthatcanbecollected intoadatabase.
Thisdatabase iscalledthesecurityassociation database (SADB). Thedatabase can
bethoughtofasatwo-dimensional tablewitheachrowdefiningasingleSA.Normally,
therearetwoSADBs,oneinboundandoneoutbound.
SecurityParameter Index
Todistinguish oneassociation fromtheother,eachassociation isidentified byaparameter
calledthesecurityparameter index(SPI).Thisparameter, inconjunction withthe
destination address(outbound) orsourceaddress(inbound) andprotocol (ARorESP),
uniquely definesanassociation.1004 CHAPTER 32SECURITY INTHEINTERNET: IPSec,SSUTLS, PGP,VPN,ANDF/REWALLS
Internet KeyExchange (IKE)
Nowwecometothelastpartofthepuzzle-how SADBsarecreated.TheInternetKey
Exchange (IKE)isaprotocol designed tocreatebothinbound andoutbound security
associations inSADBs.
IKEcreatesSAsforIPSec.
IKEisacomplex protocol basedonthreeotherprotocols-Oakley, SKEME, and
ISAKMP-as showninFigure32.9.
Figure32.9IKEcomponents
InternetSecurityAssociation
andKeyManagement Protocol
(ISAKMP)
Oakley SKEMEI'-
InternetKeyExchange (IKE)
TheOakleyProtocol wasdeveloped byHilarieOrman.Itisakeycreationprotocol
basedontheDiffie-Hellman key-exchange method,butwithsomeimprovements. Oakley
isafree-formatted protocolinthesensethatitdoesnotdefinetheformatofthemessage
tobeexchanged.
SKEME, designed byHugoKrawcyzk, isanotherprotocol forkeyexchange. It
usespublic-key encryption forentityauthentication inakey-exchange protocol.
TheInternetSecurityAssociation andKeyManagement Protocol (ISAKMP) is
aprotocoldesigned bytheNational SecurityAgency(NSA)thatactuallyimplements the
exchanges definedinIKE.Itdefinesseveralpackets,protocols, andparameters thatallow
theIKEexchanges totakeplaceinstandardized, formatted messages tocreateSAs.
OnemayaskhowISAKMP iscarriedfromthesendertothereceiver. Thisprotocol
isdesigned soastobeapplicable withanyunderlying protocol. Forexample, the
packetcanbeusedasthepayloadinthenetworklayerortransport layer.Whenweuse
IPSec,itisnaturalthatthispacketbeconsidered asapayloadfortheIPprotocol and
carriedinthedatagram. Nowthenextquestion is,Howarethedatagrams thatcarry
ISAKMP securely exchanged? Theansweristhatthereisnoneed.Thereisnothingin
theISAKMP packetsthatneedstobesecured.
VirtualPrivateNetwork
Virtualprivatenetwork (VPN)isatechnology thatisgainingpopularity amonglarge
organizations thatusetheglobalInternetforbothintra-andinterorganization commu­
nication, butrequireprivacyintheirinternalcommunications. WediscussVPNhere
becauseitusestheIPSecProtocol toapplysecuritytotheIPdatagrams.SECT/ON 32.//PSecurity (/PSec) 1005
PrivateNetworks
Aprivatenetwork isdesigned foruseinsideanorganization. Itallowsaccesstoshared
resources and,atthesametime,provides privacy.Beforewediscusssomeaspectsof
thesenetworks, letusdefinetwocommonly used,relatedterms:intranetandextranet.
Intranet Anintranet isaprivatenetwork (LAN)thatusestheInternetmodel.How­
ever,accesstothenetwork islimitedtotheusersinsidetheorganization. Thenetwork
usesapplication programs definedfortheglobalInternet, suchasHTTP,andmayhave
Webservers,printservers,fileservers,andsoon.
Extranet Anextranet isthesameasanintranetwithonemajordifference: Some
resources maybeaccessed byspecificgroupsofusersoutsidetheorganization under
thecontrolofthenetwork administrator. Forexample, anorganization mayallow
authorized customers accesstoproductspecifications, availability, andonlineordering.
Auniversity oracollegecanallowdistance learning students accesstothecomputer
labafterpasswords havebeenchecked.
Addressing Aprivatenetwork thatusestheInternet modelmustuseIPaddresses.
Threechoicesareavailable:
1.Thenetworkcanapplyforasetofaddresses fromtheInternetauthorities andusethem
withoutbeingconnected totheInternet.Thisstrategyhasanadvantage. Ifinthefuture
theorganization decidestobeconnected totheInternet,itcandosowithrelativeease.
However, thereisalsoadisadvantage: Theaddressspaceiswastedinthemeantime.
2.Thenetwork canuseanysetofaddresses withoutregistering withtheInternet
authorities. Because thenetworkisisolated, theaddresses donothavetobeunique.
However, thisstrategyhasaseriousdrawback: Usersmightmistakenly confusethe
addresses aspartoftheglobalInternet.
3.Toovercome theproblems associated withthefirstandsecondstrategies, theInternet
authorities havereserved threesetsofaddresses, showninTable32.2.
Table32.2Addresses forprivatenetworks
Prefix Range Total
10/8 10.0.0.0to10.255.255.255 224
172.16/12 172.16.0.0 to172.31.255.255 220
192.168/16 192.168.0.0 to192.168.255.255 216
Anyorganization canuseanaddressoutofthissetwithoutpermission fromtheInternet
authorities. Everybody knowsthatthesereserved addresses areforprivatenetworks.
Theyareuniqueinsidetheorganization, buttheyarenotuniqueglobally. Norouterwill
forwardapacketthathasoneoftheseaddresses asthedestination address.
Achieving Privacy
Toachieveprivacy, organizations canuseoneofthreestrategies: privatenetworks,
hybridnetworks, andvirtualprivatenetworks.1006 CHAPTER 32SECURITY INTHEINTERNET: IPSec,SSUTLS, PGP,VPN,ANDFIREWALLS
PrivateNetworks Anorganization thatneedsprivacywhenroutinginformation inside
theorganization canuseaprivatenetwork asdiscussed previously. Asmallorganiza­
tionwithonesinglesitecanuseanisolatedLAN.Peopleinsidetheorganization can
senddatatooneanotherthattotallyremaininsidetheorganization, securefromoutsiders.
Alargerorganization withseveralsitescancreateaprivateinternet. TheLANsat
different sitescanbeconnected toeachotherbyusingroutersandleasedlines.Inother
words,aninternetcanbemadeoutofprivateLANsandprivateWANs.Figure32.10
showssuchasituation foranorganization withtwosites.TheLANsareconnected to
eachotherbyroutersandoneleasedline.
Figure32.10 Privatenetwork
~A ~B
I
I
I
IIIII
______________ .JLeasedlineI
I
I
I
I
I
I
• I
• I• I
R2 :
I
I
I
I
I ______________ -.J
Inthissituation, theorganization hascreatedaprivateinternetthatistotallyisolated
fromtheglobalInternet. Forend-to-end communication between stationsatdifferent
sites,theorganization canusetheInternetmodel.However, thereisnoneedforthe
organization toapplyforIPaddresses withtheInternetauthorities. Itcanuseprivate
IPaddresses. Theorganization canuseanyIPclassandassignnetwork andhost
addresses internally. Becausetheinternetisprivate,duplication ofaddresses byanother
organization intheglobalInternetisnotaproblem.
HybridNetworks Today,mostorganizations needtohaveprivacyinintraorganization
dataexchange, but,atthesametime,theyneedtobeconnected totheglobalInternet
fordataexchange withotherorganizations. Onesolution istheuseofahybrid
network. Ahybridnetworkallowsanorganization tohaveitsownprivateinternetand,
atthesametime,accesstotheglobalInternet.Intraorganization dataareroutedthrough
theprivateinternet; interorganization dataareroutedthroughtheglobalInternet. Fig­
ure32.11showsanexampleofthissituation.
Anorganization withtwositesusesroutersRlandR2toconnectthetwositespri­
vatelythroughaleasedline;itusesroutersR3andR4toconnectthetwositestothe
restoftheworld.Theorganization usesglobalIPaddresses forbothtypesofcommuni­
cation.However, packetsdestinedforinternalrecipients areroutedonlythroughrouters
RlandR2.RoutersR3andR4routethepacketsdestinedforoutsiders.
VirtualPrivateNetworks Bothprivateandhybridnetworks haveamajordrawback:
cost.Privatewide-area networks (WANs) areexpensive. Toconnectseveralsites,an
organization needsseveralleasedlines,whichmeansahighmonthlyfee.OnesolutionSECTION 32.1IPSecurity (IPSec)1007
Figure32.11Hybridnetwork
Internet
Leasedline
R2
istousetheglobalInternetforbothprivateandpubliccommunications. Atechnology
calledvirtualprivatenetwork allowsorganizations tousetheglobalInternetforboth
purposes.
VPNcreatesanetworkthatisprivatebutvirtual.Itisprivatebecauseitguarantees
privacyinsidetheorganization. ItisvirtualbecauseitdoesnotuserealprivateWANs;
thenetworkisphysically publicbutvirtually private.
Figure32.12showstheideaofavirtual private network. RoutersRlandR2use
VPNtechnology toguarantee privacyfortheorganization.
Figure32.12Virtualprivatenetwork
R2SiteA SiteB
I
----~----------
VPNTechnology
VPNtechnology usesIPSecinthetunnelmodetoprovideauthentication, integrity, and
privacy.
Tunneling Toguarantee privacyandothersecurity measures foranorganization,
VPNcanusetheIPSecinthetunnelmode.Inthismode,each IPdatagram destinedfor
privateuseintheorganization isencapsulated inanotherdatagram. TouseIPSecin
tunneling, theVPNsneedtousetwosetsofaddressing, asshowninFigure32.13.1008 CHAPTER 32SECURITY INTHEINTERNET: IPSec,SSUTLS, PGP,VPN,ANDFIREWALLS
Figure32.13 Addressing inaVPN
r------------------,SiteA
R2SiteB
~------------------1
1
1
I
I
I
II
I
I
I
I
I
I
II
Station200:
I
I-------- ---------~Internet
FromRl toR211
I
I
I
I
I
I
I_____ ..JStation100
1 ------
From100to200 From100to200
Thepublicnetwork(Internet) isresponsible forcarryingthepacketfromRltoR2.
Outsiders cannotdecipher thecontents ofthepacketorthesourceanddestination
addresses. Deciphering takesplaceatR2,whichfindsthedestination addressofthe
packetanddeliversit.
32.2SSL/TLS
Atransport layersecurityprovides end-to-end securityservicesforapplications thatuse
areliabletransport layerprotocol suchasTCP.Theideaistoprovidesecurityservices
fortransactions ontheInternet.Forexample, whenacustomer shopsonline,thefollow­
ingsecurityservicesaredesired:
1.Thecustomer needstobesurethattheserverbelongstotheactualvendor,notan
imposter. Thecustomer doesnotwanttogiveanimposter hercreditcardnumber
(entityauthentication). Likewise, thevendorneedstoauthenticate thecustomer.
2.Thecustomer andthevendorneedtobesurethatthecontents ofthemessage are
notmodified duringtransition (message integrity).
3.Thecustomer andthevendorneedtobesurethatanimposter doesnotintercept
sensitive information suchasacreditcardnumber(confidentiality).
Twoprotocols aredominant todayforproviding securityatthetransport layer:theSecure
SocketsLayer(SSL)Protocol andtheTransport LayerSecurity (TLS)Protocol. The
latterisactuallyanIETFversionoftheformer.FirstwediscussSSL,thenwebriefly
mention themaindifferences between SSLandTLS.Figure32.14showstheposition
ofSSLandTLSintheInternetmodel.
SSLServices
SecureSocketLayer(SSL)isdesigned toprovidesecurityandcompression services
todatagenerated fromtheapplication layer.Typically, SSLcanreceivedatafromany
application layerprotocol, butusuallytheprotocolisHTTP.Thedatareceived fromtheSECTION 32.2SSUTLS 1009
Figure32.14LocationofSSLandTLSintheInternetmodel
IApplications
~---_----I
ITCP
IP
Underlying physicalnetworksI
ISSLrrLS isdesigned
toprovidesecurity
atthetransport layer.
application arecompressed (optional), signed,andencrypted. Thedataarethenpassed
toareliabletransport layerprotocol suchasTCP.Netscape developed SSLin1994.
Versions 2and3werereleasedin1995.Inthischapter,wediscussSSLv3.SSLprovides
severalservicesondatareceived fromtheapplication layer.
Fragmentation
First,SSLdividesthedataintoblocksof214bytesorless.
Compression
Eachfragment ofdataiscompressed byusingoneofthelosslesscompression methods
negotiated betweentheclientandserver.Thisserviceisoptional.
Message Integrity
Topreserve theintegrityofdata,SSLusesakeyed-hash function tocreateaMAC.
Confidentiality
Toprovideconfidentiality, theoriginaldataandtheMACareencrypted usingsymmetric­
keycryptography.
Framing
Aheaderisaddedtotheencrypted payload. The,payload isthenpassedtoareliable
transport layerprotocol.
Security Parameters
Whenwediscussed IPSecintheprevious section,wementioned thateachofthetwo
partiesinvolved indataexchange needstohaveasetofparameters foreachassociation
(SA).SSLhasasimilargoal,butadifferent approach. TherearenoSAs,butthereare
ciphersuitesandcryptographic secretsthattogethermakethesecurityparameters.
CipherSuite
Thecombination ofkeyexchange, hash,andencryption algorithms definesaciphersuite
foreachSSLsession.EachsuitestartswiththetermSSL,followed bythekey-exchange1010 CHAPTER 32SECURITY INTHEINTERNET: IPSec,SSUILS, PGP,VPN,ANDFIREWALLS
algorithm. ThewordWITHseparates thekeyexchange algorithm fromtheencryption
andhashalgorithms. Forexample,
SSL_DBE_RSA_WITH_DES_CBC~SHA
definesDHE_RSA (ephemeral Diffie-Hellman withRSAdigitalsignature) asthekey
exchange withDES_CBC astheencryption algorithm andSHAasthehashalgorithm.
NotethatDHisfixedDiffie-Hellman, DHEisephemeral Diffie-Hellman, andDH-anon is
anonymous Diffie-Hellman. Table32.3showsthesuitesusedintheUnitedStates.We
havenotincluded thosethatareusedforexport.Notethatnotallcombinations ofkey­
exchange algorithms (toestablish keysformessage authentication andencryption),
encryption algorithms, andauthentication algorithms areincluded intheciphersuitelist.
Wehavenotdefinedordiscussed severalalgorithms youcanfindinthetable,butwewish
todescribethewholepicturesothatthereadercanhaveanideaofhowgeneralthesuiteis.
Table32.3SSLciphersuitelist
KeyExchange Encryption Hash
CipherSuite Algorithm Algorithm Algorithm
SSL_NULL_WITH_NULL_NULL NULL NULL NULL
SSL_RSA_ WITH_NULL_MD5 RSA NULL MD5
SSL_RSA_WITH_NULL_SHA RSA NULL SHA
SSL_RSA_ WITH_RC4_128_MD5 RSA RCU28 MD5
SSL_RSA_WITH_RC4_128_SHA RSA RC4-128 SHA
SSL_RSA_WITH_IDEA_CBC_SHA RSA IDEA_CSC SHA
SSL_RSA_WITH_DES_CBC_SHA RSA DES_eSC SHA
SSL_RSA_ WITH_3DES_EDE_ CBC_SHA RSA 3DES_EDE_CBC SHA
SSL_DH3ll0ll_WITH_RC4_128_MD5 DH_anon RC4_128 MD5
SSL_DH_anon_ WITH_DES_ CRC_SHA DH_anon DES_CBC SHA
SSL_DH_anon_ WITH_3DES_EDE_CBC_SHA DH_anon 3DES_EDE_CBC SHA
SSL_DHE_RSA_WITH_DES_CBC_SHA DHE_RSA DES_CBC SHA
SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA DHE_RSA 3DES_EDLCBC SHA
SSL_DHE_DSS_WITH_DES_CBCSHA DHE_DSS DES_CBC SHA
SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA DHE_DSS 3DBS_EDE_CSC SHA
SSL_DH_RSA_WITH_DES_CRC_SHA DH_RSA DES_CBC SHA
SSL_DH_RSA_WITH_3DES_EDE_CBC_SHA DH_RSA 30BS_EDE_CSC SHA
SSL_DH_DSS_ WITH_DES_CBC_SHA DH_DSS DES_CEC SHA
SSL_DH_DSS_ WITH_3DES_EDE_CBC_SHA DH_DSS .'\DES_EDEJ'SC SHA
SSL_FORTEZZA_DMS_WITH_NULL_SHA FORTEZZA_DMS NULL SHA
SSL_FORTEZZA_DMS_WITH_FORTEZZA_CRC_SHA FORTEZZA_DMS FORTEZZA_CBC SHA
SSL]ORTEZZA_DMS_WITH_RC4_128_SHA FORTEZZA_DMS RC-U28 SHA
Cryptographic Secrets
Thesecondpartofsecurityparameters isoftenreferredtoascryptographic secrets.To
achievemessage integrity andconfidentiality, SSLneedssixcryptographic secrets,four
keys,andtwoIVs.SECTION 32.2SSl./TLS 1011
Theclientandtheserverhavesixdifferent cryptography secrets.
TheprocessofcreatingthesesecretsisshowninFigure32.15.Theclientneeds
onekeyformessage authentication, onekeyforencryption, andoneIVforblock
encryption. Theserverneedsthesame.SSLrequiresthatthekeysforonedirection be
different fromthosefortheotherdirection.Ifthereisanattackinonedirection, the
otherdirection isnotaffected. Theseparameters aregenerated byusinganegotiation
protocol, aswewillseeshortly.
Figure32.15Creationofcryptographic secretsinSSL
Client
I--Clientauthentication key
II--Serverauthentication key
III--Clientencryption key
IV--Serverencryption key
V--Clientinitiation vector
VI--Serverinitiation vector
Acomplex algorithm
usingSHA-IandMD5Server
Some constants
Someconstants
IIIIV
1.Theclientandserverexchange tworandomnumbers; oneiscreatedbytheclient
andtheotherbytheserver.
2.Theclientandserverexchange onepremaster secretbyusingoneofthekey­
exchange algorithms wediscussed previously.
3.A48-bytemastersecretiscreatedfromthepremaster secretbyapplying twohash
functions (SHA-landMD5).
4.Themastersecretisusedtocreatevariable-length secretsbyapplying thesameset
ofhashfunctions andprepending withdifferentconstants.
SessionsandConnections
ThenatureofIPandTCPprotocols isdifferent. IPisaconnectionless protocol; TCPis
aconnection-oriented protocol. Anassociation inIPSectransforms theconnectionless
IPtoaconnection-oriented securedprotocol. TCPisalreadyconnection-oriented.1012 CHAPTER 32SECURITY INTHEINTERNET: IPSec,SSurLS, PGP,VPN,ANDFIREWALLS
However, thedesigners ofSSLdecidedthattheyneededtwo-levels ofconnectivity:
sessionandconnection. Asessionbetweentwosystemsisanassociation thatcanlastfor
alongtime;aconnection canbeestablished andbrokenseveraltimesduringasession.
Someofthesecurityparameters arecreatedduringthesessionestablishment and
areineffectuntilthesessionisterminated (forexample, ciphersuiteandmasterkey).
Someofthesecurityparameters mustberecreated (oroccasionally resumed) foreach
connection (forexample, sixsecrets).
FourProtocols
Wehavediscussed theideaofSSLwithoutshowing howSSLaccomplishes itstasks.
SSLdefinesfourprotocols intwolayers,asshowninFigure32.16.TheRecordProtocol
isthecarrier.Itcarriesmessages fromthreeotherprotocols aswellasthedatacoming
fromtheapplication layer.Messages fromtheRecordProtocol arepayloads tothe
transport layer,normally TCP.TheHandshake Protocol provides securityparameters
fortheRecordProtocol.Itestablishes aciphersetandprovides keysandsecurity
parameters. Italsoauthenticates theservertotheclientandtheclienttotheserver,if
needed.TheChangeCipherSpec Protocol isusedforsignaling thereadiness ofcryp­
tographic secrets.TheAlertProtocol isusedtoreportabnormal conditions. Wewill
brieflydiscusstheseprotocols inthissection.
Figure32.16FourSSLprotocols
SSL,---------------------------------------------------1
L--:d:::------
-~~:g:~~::I~Y-~-----~;~------1-----J
Protocol Protocol Protocol
I RecordProtocol I
, f 1
: Transport layer :I J
Handshake Protocol
TheHandshake Protocol usesmessages tonegotiate theciphersuite,toauthenticate the
servertotheclientandtheclienttotheserver(ifneeded), andtoexchangeinformation
forbuildingthecryptographic secrets.Thehandshaking isdoneinfourphases,asshown
inFigure32.17.
ChangeCipherSpec Protocol
Wehaveseenthatthenegotiation oftheciphersuiteandthegeneration ofcrypto­
graphicsecretsareformedgradually duringtheHandshake Protocol. Thequestion now
is,Whencanthetwopartiesusetheseparameter secrets?SSLmandates thatthepartiesSECTION 32.2SSUFLS 1013
Figure32.17 Handshake Protocol
Client
r--
PhaseI Establishing SecurityCapabilities
Serverauthentication andkeyexchangeServer-
PhaseII
PhaseIII
,,',PhaseIV
notusetheseparameters orsecretsuntiltheyhavesentorreceived aspecialmessage,
theChangeCipherSpec message, whichisexchanged duringtheHandshake Protocoland
definedintheChangeCipherSpec Protocol. Beforetheexchange ofanyChangeCipherSpec
messages, onlythependingcolumnshavevalues.
AlertProtocol
SSLusestheAlertProtocolforreporting errorsandabnormal conditions. Ithasonlyone
messagetype,thealertmessage, thatdescribes theproblemanditslevel(warning orfatal).
RecordProtocol
TheRecordProtocol carriesmessages fromtheupperlayer(Handshake Protocol,
ChangeCipherSpec Protocol, AlertProtocol, orapplication layer).Themessageisfrag­
mentedandoptionally compressed; aMACisaddedtothecompressed message by
usingthenegotiated hashalgorithm. Thecompressed fragment andtheMACare
encrypted byusingthenegotiated encryption algorithm. Finally,theSSLheaderis
addedtotheencrypted message. Figure32.18showsthisprocessatthesender.The
processatthereceiverisreversed.
Transport LayerSecurity
Transport LayerSecurity (TLS)istheIETFstandard versionofSSL.Thetwoare
verysimilar,withslightdifferences. Wehighlight thedifferences below:
oVersion. TheSSLv3.0 discussed inthissectioniscompatible withTLSv1.0.
oCipherSuite.TLSciphersuitedoesnotsupportFortezza.
oCryptography Secret.Thereareseveraldifferences inthegeneration ofcrypto­
graphicsecrets.TLSusesapseudorandom function (PRF)tocreatethemaster
keyandthekeymaterials.1014 CHAPTER 32SECURITY INTHEINTERNET: IPSec,SSUTLS, PGP,VPN,ANDFIREWALLS
Figure32.18Processing donebytheRecordProtocol
SSLHeaderAuthentication keyConstant
COmpIeS&edl,;Fi-agroent ~d
'JCompressionr'IPayloadfromupper-layer protocol
---~i""";"""';--"""
: I
'JEncryptionG--Encryption key
, "r'..Encrypted fragment' .')
~'..SSLpayload ..~
a.Process b.PacketCompressed fragment
oAlertProtocol. TLSdeletessomealertmessages andaddssomenewones.
oHandshake Protocol. Thedetailsofsomemessages havebeenchanged inTLS.
oRecordProtocol. InsteadofusingMAC,TLSusestheHMACasdefinedin
Chapter31.
32.3PGP
Oneoftheprotocols toprovidesecurityattheapplication layerisPrettyGoodPrivacy
(PGP).PGPisdesigned tocreateauthenticated andconfidential e-mails.Figure32.19
showsthepositionofPGPintheTCP/IPprotocol suite.
Figure32.19PositionofPGPintheTCPlIPprotocol suite
IUDP,TCP.orSCTP _____ -01IApplications (e-mail)I
IPGPisdesigned
toprovidesecurity
attheapplication layer.
I IP .....
Underlying physicalnetworksSECTION 32.3PGP 1015
Sending ane-mailisaone-time activity.Thenatureofthisactivityisdifferent
fromthosewehaveseenintheprevious twosections. InIPSecorSSL,weassumethat
thetwopartiescreateasessionbetween themselves andexchange datainbothdirec­
tions.Ine-mail,there isnosession.AliceandBobcannotcreateasession.Alicesends
amessage toBob;sometime later,Bobreadsthemessage andmayormaynotsenda
reply.Wediscussthesecurityofaunidirectional message becausewhatAlicesendsto
Bobistotallyindependent ofwhatBobsendstoAlice.
Security Parameters
Ife-mailisaone-time activity,howcanthesenderandreceiveragreeonthesecurity
parameters tousefore-mailsecurity? Ifthereisnosessionandnohandshaking to
negotiate thealgorithms forencryption andauthentication, howcanthereceiverknow
whichalgorithm thesenderhaschosenforeachpurpose? Howcanthereceiverknow
thevaluesofthekeysusedforencryption andauthentication?
PhilZimmerman, thedesignerandcreatorofPGP,hasfoundaveryelegantsolution
totheabovequestions. Thesecurityparameters needtobesentwiththemessage.
InPGP,thesenderofthemessage needstoincludetheidentifiers ofthe
algorithms usedinthemessage aswellasthevaluesofthekeys.
Services
PGPcanprovideseveralservicesbasedontherequirements oftheuser.Ane-mailcan
useoneormoreoftheseservices.
Plaintext
Thesimplest caseistosendthee-mailmessage inplaintext (noservice). Alice,the
sender,composes amessage andsendsittoBob,thereceiver. Themessage isstoredin
Bob'smailboxuntilitisretrieved byhim.
Message Authentication
Probably thenextimprovement istoletAlicesignthemessage. Alicecreatesadigest
ofthemessage andsignsitwithherprivatekey.WhenBobreceivesthemessage, he
verifiesthemessage byusingAlice'spublickey.Twokeysareneededforthisscenario.
Aliceneedstoknowherprivatekey;BobneedstoknowAlice'spublickey.
Compression
Afurtherimprovement istocompress themessage anddigesttomakethepacketmore
compact. Thisimprovement hasnosecuritybenefit,butiteasesthetraffic.
Confidentiality withOne·TimeSessionKey
Aswediscussed before,confidentiality inane-mailsystemcanbeachieved byusing
conventional encryption withaone-time sessionkey.Alicecancreateasessionkey,use
thesessionkeytoencryptthemessage andthedigest,andsendthekeyitselfwiththe
message. However, toprotectthesessionkey,AliceencryptsitwithBob'spublickey.1016 CHAPTER 32SECURITY INTHEINTERNET: IPSec,SSUFLS, PGP,VPN,ANDFIREWALLS
CodeConversion
Anotherserviceprovided byPGPiscodeconversion. Moste-mailsystemsallowthe
message toconsistofonlyASCIIcharacters. Totranslate othercharacters notinthe
ASCIIset,PGPusesRadix64conversion. Eachcharacter tobesent(afterencryption)
isconverted toRadix64code.
Segmentation
PGPallowssegmentation ofthemessage afterithasbeenconverted toRadix64to
makeeachtransmitted unittheuniformsizeallowedbytheunderlying e-mailprotocoL
AScenario
Letusdescribe ascenario thatcombines someoftheseservices, authentication and
confidentiality. ThewholeideaofPGPisbasedontheassumption thatagroupofpeople
whoneedtoexchange e-mailmessages trustoneanother.Everyone inthegroupsome­
howknows(withadegreeoftrust)thepublickeyofanyotherpersoninthegroup.
Basedonthissingleassumption, Figure32.20showsasimplescenario inwhichan
authenticated andencrypted message issentfromAlicetoBob.
Figure32.20Ascenario inwhichane-mailmessage isauthenticated andencrypted
Alice'sBob's
privatepublic
j
Alice
r---Bob'sAlice's
privatepublic
j
Bob
PGPmessage
PGP
header
PAl+
PAl:Public-key algorithm 1(forencrypting sessionkey)
PA2:PubliC-key algorithm (forencrypting thedigest)
.SA:Symmetric-key algorithm identification (forencrypting message anddigest)
HA:Hashalgorithm identification (forcreatingdigest)
SenderSite
Thefollowing showsthestepsusedinthisscenarioatAlice'ssite:
1.Alicecreatesasessionkey(forsymmetric encryption/decryption) andconcatenates
itwiththeidentityofthealgorithm whichwillusethiskey.TheresultisencryptedSECTION 32.3PGP 1017
withBob'spublickey.Aliceaddstheidentification ofthepublic-key algorithm
usedabovetotheencrypted result.Thispartofthemessage containsthreepieces
ofinformation: thesessionkey,thesymmetric encryption/decryption algorithm to
beusedlater,andtheasymmetric encryption/decryption algorithm thatwasused
forthispart.
2.
a.Aliceauthenticates themessage (e-mail)byusingapublic-key signature algo­
rithmandencrypts itwithherprivatekey.Theresultiscalledthesignature.
Aliceappendstheidentification ofthepublickey(usedforencryption) aswell
astheidentification ofthehashalgorithm (usedforauthentication) tothesigna­
ture.Thispartofthemessage contains thesignature andtwoextrapiecesof
information: theencryption algorithm andthehashalgorithm.
b.Aliceconcatenates thethreepiecesofinformation createdabovewiththemessage
(e-mail)andencryptsthewholething,usingthesessionkeycreatedinstep1.
3.Alicecombines theresultsofsteps1and 2andsendsthemtoBob(afteraddingtue
appropriate PGPheader).
Receiver Site
Thefollowing showsthestepsusedinthisscenarioatBob'ssideafterhehasreceived
thePGPpacket:
1.Bobuseshisprivatekeytodecryptthecombination ofthesessionkeyand
symmetric-key algorithm identification.
2.Bobusesthesessionkeyandthealgorithm obtained instep1todecrypttherestof
thePGPmessage. Bobnowhasthecontentofthemessage, theidentification ofthe
publicalgorithm usedforcreatingandencrypting thesignature, andtheidentifica­
tionofthehashalgorithm usedtocreatethehashoutofthemessage.
3.BobusesAlice'spublickeyandthealgorithm definedbyPA2todecryptthedigest.
4.Bob uses thehashalgorithm definedbyHAtocreateahashoutofmessage he
obtained instep2.
5.Bobcompares thehashcreatedinstep4andthehashhedecrypted instep3.Ifthe
twoareidentical, heacceptsthemessage; otherwise, hediscardsthemessage.
PGPAlgorithms
Table32.4showssomeofthealgorithms usedinPOP.Thelistisnotcomplete; new
algorithms arecontinuously added.
Table32.4
Algorithm ID Description
Publickey 1RSA(encryption orsigning)
2RSA(forencryption only)
3RSA(forsigningonly)
17DSS(forsigning)1018 CHAPTER 32SECURITY INTHEINTERNET: IPSec,SSLfTLS, PGP,VPN,ANDFIREWALLS
Table32.4(continued)
Algorithm ID Description
Hashalgorithm 1MD5
2SHA-l
3RIPE-MD
Encryption 0Noencryption
1IDEA
2TripleDES
9AES
KeyRings
Intheprevious scenarios, weassumedthatAliceneededtosendamessagetoonlyBob.
Thatisnotalwaysthecase.Alicemayneedtosendmessages tomanypeople.Inthis
case,Aliceneedsakeyringofpublickeys,withakeybelonging toeachpersonwith
whomAliceneedstocorrespond (sendorreceivemessages). Inaddition, thePGP
designers specified aringofprivate/public keys.OnereasonisthatAlicemaywishto
changeherpairofkeysfromtimetotime.Another reason isthatAlicemayneedto
correspond withdifferent groupsofpeople(friends,colleagues, andsoon).Alicemay
wishtouseadifferent keypairforeachgroup.Therefore, eachuserneedstohave
twosetsofrings:aringofprivate/public keysandaringofpublickeysofotherpeople.
Figure32.21showsacommunity offourpeople,eachhavingaringofpairsofprivate/
publickeysand,atthesametime,aringoffourpublickeysbelonging totheotherfour
peopleinthecommunity. Thefigureshowssevenpublickeysforeachpublicring.Each
personintheringcankeepmorethanonepublickeyforeachotherperson.
Figure32.21Rings
Alice'srings Bob'srings
A
*~
John'sringsSECTION 32.3PGP 1019
Alice,forexample, hasseveralpairsofprivate/public keysbelonging toherand
publickeysbelonging tootherpeople.Notethateveryone canhavemorethanonepublic
key.Twocasesmayarise.
1.Aliceneedstosendamessage tooneofthepersonsinthecommunity.
a.Sheusesherprivatekeytosignthedigest.
b.Sheusesthereceiver's publickeytoencryptanewlycreatedsessionkey.
c.Sheencrypts themessage andsignsthedigestwiththesessionkeycreated.
2.Alicereceivesamessage fromoneofthepersonsinthecommunity.
a.Sheusesherprivatekeytodecryptthesessionkey.
b.Sheusesthesessionkeytodecryptthemessage anddigest.
c.Sheusesherpublickeytoverifythe digest.
PGPCertificates
Totrusttheownerofthepublickey,eachuserinthePGPgroupneedstohave,implicitly
orexplicitly, acopyofthecertificate ofthepublic-key owner.Although thecertificate
cancomefromacertificate authority (CA),thisrestriction isnotrequired inPGP.PGP
hasitsowncertificate system.
Protocols thatuseX509certificates dependonthehierarchical structure ofthe
trust.Thereisapredefined chainoftrustfromtheroottoanycertificate. Everyuser
fullytruststheauthority oftheCAattherootlevel(prerequisite). Therootissuescertif­
icatesfortheCAsatthesecondlevel,asecond-level CAissuesacertificate forthe
thirdlevel,andsoon.Everypartythatneedstobetrustedpresents acertificate from
someCAinthetree.IfAlicedoesnottrustthecertificate issuerforBob,shecanappeal
toahigher-level authority uptotheroot(whichmustbetrustedforthesystemtowork).
Inotherwords,thereisonesinglepathfromafullytrustedCAtoacertificate.
InPGP,thereisnoneedforCAs;anyoneintheringcansignacertificate forany­
oneelseinthering.Bobcansignacertificate forTed,John,Anne,andsoon.Thereis
nohierarchy oftrustinPGP;thereisnotree.Asaresultofthelackofhierarchical
structure, Tedmayhaveonecertificate fromBobandanothercertificate fromLiz.If
Alicewantstofollowthelineofcertificates forTed,ithastwopaths:onestartsfrom
BobandtheotherstartsfromLiz.Aninteresting pointisthatAlicemayfullytrustBob,
butonlypartially trustLiz.Therecanbemultiple paths inthelineoftrustfromafully
orpartially trustedauthority toacertificate. InPGP,theissuerofacertificate isusually
calledanintroducer.
InPGP,therecanbemultiplepathsfromrunyor
partiallytrustedauthorities toanysubject.
TrustsandLegitimacy
Theentireoperation ofPGPisbasedonintroducer trust,thecertificate trust,andthe
legitimacy ofthepublickeys.
Introducer TrustLevels Withthelackofacentralauthority, itisobviousthatthering
cannotbeverylargeifeveryuserinthePGPringofusershastofullytrusteveryone else.1020 CHAPTER 32SECURITY INTHEINTERNET: IPSec,SSUFLS, PGP,VPN,ANDFIREWALLS
(Eveninreallifewecannotfullytrusteveryone thatweknow.)Tosolvethisproblem,
PGPallowsdifferent levelsoftrust.Thenumberoflevelsismostlyimplementation­
dependent, butforsimplicity, letusassignthreelevelsoftrusttoanyintroducer: none,
partial,andfull.Theintroducer trustlevelspecifiesthetrustlevelsissuedbytheintro­
ducerforotherpeopleinthering.Forexample, AlicemayfullytrustBob,partiallytrust
Anne,andnottrustJohnatalLThereisnomechanism inPGPtodetermine howtomake
adecisionaboutthetrustworthiness oftheintroducer; itisuptotheusertomakethis
decision.
Certificate TrustLevels When Alicereceivesacertificate fromanintroducer, she
storesthecertificate underthenameofthesubject(certified entity).Sheassigns a level
oftrusttothiscertificate. Thecertificate trustlevelisnormally thesameastheintro­
ducertrustlevelthatissuedthecertificate. AssumeAlicefullytrustsBob,partially
trustsAnneandJanette,andhasnotrustin John.Thefollowing scenarios canhappen.
1.Bobissuestwocertificates, oneforLinda(withpublickeyK1)andoneforLesley
(withpublickeyK2).Alicestoresthepublickeyandcertificate forLindaunder
Linda'snameandassignsafullleveloftrusttothiscertificate. Alicealsostoresthe
certificate andpublickeyforLesleyunderLesley'snameandassignsafulllevelof
trusttothiscertificate.
2.Anneissuesacertificate forJohn(withpublickeyK3).Alicestoresthiscertificate
andpublickeyunderJohn'sname,butassignsapartiallevelforthiscertificate.
3.Janetteissuestwocertificates, oneforJohn(withpublickeyK3)andoneforLee
(withpublickeyK4).AlicestoresJohn'scertificate underhisnameandLee'scer­
tificateunderhisname,eachwithapartialleveloftrust.NotethatJohnnowhas
twocertificates, onefromAnneandonefromJanette,eachwithapartiallevel
oftrust.
4.Johnissuesacertificate forLiz.Alicecandiscardorkeepthiscertificate witha
signature trustofnone.
KeyLegitimacy Thepurposeofusingintroducer andcertificate trustsistodeter­
minethelegitimacy ofapublickey.Aliceneedstoknowhowlegitimate arethepublic
keysofBob,John,Liz,Anne,andsoon.PGPdefinesaveryclearprocedure fordeter­
miningkeylegitimacy. Thelevelofthekeylegitimacy forauseristheweighted trust
l~velofthatuser.Forexample, supposeweassignthefollowing weightstocertificate
trustlevels:
1.Aweightof0toanontrusted certificate
2.Aweightof~toacertificate withpartialtrust
3.Aweightof1toacertificate withfulltrust
Thentofullytrustanentity,Aliceneedsonefullytrustedcertificate ortwopartially
trustedcertificates forthatentity.Forexample, AlicecanuseJohn'spublickeyinthe
previous scenario becausebothAnneandJanettehaveissuedacertificate forJohn,
eachwithacertificate trustlevelof!.Notethatthelegitimacy ofapublickeybelonging2toanentitydoesnothaveanything todowiththetrustlevelofthatperson.Although
BobcanuseJohn'spublickeytosendamessagetohim,Alicecannotacceptanycertif­
icateissuedbyJohnbecause,forAlice,Johnhasatrustlevelofnone.SECTION 32.4FIREWALLS 1021
StartingtheRing
Youmighthaverealizedaproblemwiththeabovediscussion. Whatifnobodysendsa
certificate forafullyorpartially trustedentity?Forexample, howcanthelegitimacy
ofBob'spublickeybedetermined ifnoonehassentacertificate forBob?InPGP,the
keylegitimacy ofatrustedorpartiallytrustedentitycanbealsodetermined byother
methods.
1.Alicecanphysically obtainBob'spublickey.Forexample, AliceandBobcanmeet
personally andexchange apublickeywrittenonapieceofpaperortoadisk.
2.IfBob'svoiceisrecognizable toAlice,Alicecancallhimandobtainhispublickey
onthephone.
3.Abettersolutionproposed byPGPisforBobtosendhispublickeytoAliceby
e-mail.BothAliceandBobmakea16-byteMD5(or20-byteSHA-l)digest
fromthekey.Thedigestisnormally displayed aseightgroupsoffourdigits(or
10groupsoffourdigits)inhexadecimal andiscalledafingerprint. Alicecanthen
callBobandverifythefingerprint onthephone.Ifthekeyisalteredorchanged
duringthee-mailtransmission, thetwofingerprints donotmatch.Tomakeiteven
moreconvenient, PGPhascreatedalistofwords,eachrepresenting afour-digit
combination. WhenAlicecallsBob,Bobcanpronounce theeightwords(or
10words)forAlice.Thewordsarecarefully chosenbyPGPtoavoidthosesimilar
inpronunciation; forexample, ifswordisinthelist,wordisnot.
4.InPGP,nothingpreventsAlicefromgettingBob'spublickeyfromaCAinasepa­
rateprocedure. Shecantheninsertthepublickeyinthepublic-key ring.
WebofTrust
PGPcaneventually makeaweboftrustbetween agroupofpeople.Ifeachentity
introduces moreentitiestootherentities,thepublic-key ringforeachentitygetslarger
andlargerandentitiesintheringcansendsecuree-mailtooneanother.
KeyRevocation
Itmaybecomenecessary foranentitytorevokehisorherpublickeyfromthering.
Thismayhappeniftheownerofthekeyfeelsthatthekeyiscompromised (stolen,for
example) orjusttoooldtobesafe.Torevokeakey,theownercansendarevocation
certificate signedbyherself.Therevocation certificate mustbesignedbytheoldkey
anddisseminated toallthepeopleintheringwhousethatpublickey.
32.4FIREWALLS
Allprevioussecuritymeasures cannotpreventEvefromsendingaharmfulmessagetoa
system.Tocontrolaccesstoasystem,weneedfirewalls. Afirewallisadevice(usuallya
routeroracomputer) installedbetweentheinternalnetworkofanorganization andthe
restoftheInternet.Itisdesigned toforwardsomepacketsandfilter(notforward) others.
Figure32.22showsafirewall.1022 CHAPTER 32SECURITY INTHEINTERNET: IPSec,SSUTLS, PGP,VPN,ANDFIREWALLS
Figure32.22 Firewall
Firewall
Forexample, afirewallmayfilterallincoming packetsdestinedforaspecifichost
oraspecificserversuchasHTTP.Afirewallcanbeusedtodenyaccesstoaspecific
hostoraspecificserviceintheorganization.
Afirewallisusuallyclassified asapacket-filter firewalloraproxy-based firewall.
Packet-FilterFirewall
Afirewallcanbeusedasapacketfilter.Itcanforwardorblockpacketsbasedonthe
information inthenetwork layerandtransport layerheaders: sourceanddestination
IPaddresses, sourceanddestination portaddresses, andtypeofprotocol(TCPorUDP).
Apacket-filter firewallisarouterthatusesafilteringtabletodecidewhichpackets
mustbediscarded (notforwarded). Figure32.23showsanexample ofafilteringtable
forthiskindofafirewall.
Figure32.23 Packet-filter firewall
Packet-filter
firewall
Toandfrom
globalInternet-----I
InterfaceSource Source Destination Destination
IP porl IP port
131.34.0.0 * * *
* * *23
* *194.78.20.8 *
2 * 80 * *
According toFigure32.23,thefollowing packetsarefiltered:
).Incoming packetsfromnetwork131.34.0.0 areblocked(security precaution). Note
thatthe*(asterisk) means"any."
2.Incoming packetsdestinedforanyinternalTELNET server(port23)areblocked.
3.Incoming packetsdestinedforinternalhost194.78.20.8 areblocked. Theorganiza­
tionwantsthishostforinternaluseonly.
4.Outgoing packetsdestined foranHTfPserver(port80)areblocked. Theorgani­
zationdoesnotwantemployees tobrowsetheInternet.SECTION 32.4FlREWALLS 1023
Apackef.filter firewallfiltersatthenetworkortransport layer.
ProxyFirewall
Thepacket-filter firewallisbasedontheinformation available inthenetworklayerand
transport layerheaders(IPandTCPIUDP). However, sometimes weneedtofiltera
message basedontheinformation available inthemessage itself(attheapplication
layer).Asanexample, assumethatanorganization wantstoimplement thefollowing
policiesregarding itsWebpages:OnlythoseInternetuserswhohavepreviously estab­
lishedbusinessrelations withthecompany canhaveaccess;accesstootherusersmust
beblocked. Inthiscase,apacket-filter firewallisnotfeasiblebecauseitcannotdistin­
guishbetweendifferent packetsarrivingatTCPport80(HTTP).Testingmustbedone
attheapplication level(usingURLs).
Onesolutionistoinstallaproxycomputer (sometimes calledanapplication gate­
way),whichstandsbetween thecustomer (userclient)computer andthecorporation
computer showninFigure32.24.
Figure32.24 Proxyfirewall
Errors
HTIPproxy
GlobalInternetAllHTIP
packets
HTIPserverAccepted
packets
Whentheuserclientprocesssendsamessage, theproxyfirewallrunsaserver
processtoreceivetherequest.Theserveropensthepacketattheapplication leveland
findsoutiftherequestislegitimate.Ifitis,theserveractsasaclientprocessandsends
themessagetotherealserverinthecorporation. Ifitisnot,themessageisdroppedand
anerrormessage issenttotheexternaluser.Inthisway,therequestsoftheexternal
usersarefilteredbasedonthecontentsattheapplication layer..Figure32.24showsa
proxyfirewallimplementation.
Aproxyfirewallfiltersattheapplication layer.1024 CHAPTER 32SECURITY INTHEINTERNET: IPSec,SSUTLS, PGP,VPN,ANDFIREWALLS
32.5RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
books.Thebrackets, [...],refertothereference listattheendofthetext.
Books
IPSecisdiscussed inChapter7of[Rhe03], Section18.1of[PHS03], andChapters 17
and18of[KPS02]. Afulldiscussion ofIPSec canbefoundin[DH03].SSLITLS isdis­
cussedinChapter8of[Rhe03], andChapter19of[KPS02]. Afulldiscusion ofSSLand
TLScanbefoundin[ResOl]and[ThoOO]. PGPisdiscussed inChapter9of[Rhe03], and
Chapter22of[KPS02]. Firewalls arediscussed inChapter10of[Rhe03]andChapter23
of[KPS02]. Firewalls arefullydiscussed in[CBR03]. Virtualprivatenetworks arefully
discussed in[YSO1]and[SWE99].
32.6KEYTERMS
AlertProtocol
Authentication Header(AH)
Protocol
certificate trust
ChangeCipherSpec Protocol
ciphersuite
connection
Encapsulating SecurityPayload
(ESP)
extranet
fingerprint
firewall
Handshake Protocol
hybridnetwork
InternetKeyExchange (IKE)
InternetSecurityAssociation andKey
Management Protocol (lSAKMP)
intranet
introducer
introducer trust
IPSecurity (IPSec)
keylegitimacy
keymaterial
keyringmastersecret
Oakley
packet-filter firewall
premaster secret
PrettyGoodPrivacy(PGP)
privatenetwork
proxyfirewall
pseudorandom function (PRF)
RecordProtocol
replayattack
SecureSocketLayer(SSL)
securityassociation (SA)
securityassociation database
(SADB)
securityparameter index(SPI)
session
SKEME
Transport LayerSecurity
(TLS)
transport mode
tunnelmode
tunneling
virtualprivatenetwork(VPN)
weboftrustSECTION 32.7SUMMARY 1025
32.7SUMMARY
oIPSecurity (IPSec)isacollection ofprotocols designed bytheIETF(Internet
Engineering TaskForce)toprovidesecurityforapacketatthenetworklevel.
oIPSecoperatesinthetransport modeorthetunnelmode.
oInthetransport mode,IPSecprotectsinformation delivered fromthetransport
layertothenetworklayer.IPSecinthetransport modedoesnotprotecttheIPheader.
Thetransport modeisnormally usedwhenweneedhost-to-host (end-to-end) pro­
tectionofdata.
oInthetunnelmode,IPSecprotectsthewholeIPpacket,including theoriginalIP
header.
oIPSecdefinestwoprotocols-Authentication Header(AH)Protocol andEncapsu­
latingSecurity Payload(ESP)Protocol-to provideauthentication orencryption
orbothforpacketsattheIPlevel.
oIPSecrequiresalogicalrelationship betweentwohostscalledasecurityassociation
(SA).IPSecusesasetofSAscalledthesecurityassociation database orSADB.
oTheInternetKeyExchange (IKE)istheprotocoldesigned tocreatesecurityasso­
ciations,bothinboundandoutbound. IKEcreatesSAsforIPSec.
[lIKEisacomplex protocol basedonthreeotherprotocols: Oakley,SKEME, and
ISAKMP.
oAprivatenetworkisusedinsideanorganization.
oAnintranetisaprivatenetwork thatusestheInternetmodel.Anextranetisan
intranetthatallowsauthorized accessfromoutsideusers.
oTheInternetauthorities havereserved addresses forprivatenetworks.
[]Avirtualprivatenetwork(VPN)provides privacyforLANsthatmustcommunicate
throughtheglobalInternet.
oAtransport layersecurityprotocolprovides end-to-end securityservicesforappli­
cationsthatusetheservicesofareliabletransport layerprotocolsuchasTCP.
oTwoprotocols aredominant todayforproviding securityatthetransport layer:
SecureSocketsLayer(SSL)andTransport LayerSecurity (TLS).Thesecondis
actuallyanIETFversionofthefirst.
oSSLisdesigned toprovidesecurityandcompression services todatagenerated
fromtheapplication layer.Typically, SSLcanreceiveapplication datafromany
application layerprotocol, buttheprotocolisnormally HTTP.
ClSSLprovides servicessuchasfragmentation, compression, messageintegrity, con­
fidentiality, andframingondatareceivedfromtheapplication layer.
oThecombination ofkeyexchange, hash,andencryption algorithms definesacipher
suiteforeachSSLsession.Thenameofeachsuiteisdescriptive ofthecombination.
UIne-mail,thecryptographic algorithms andsecretsaresentwiththemessage.
DOnesecurityprotocol forthee-mailsystemisPrettyGoodPrivacy(PGP).PGP
wasinvented byPhilZimmerman toprovideprivacy,integrity, andauthentication
ine-mail.1026 CHAPTER 32SECURITY INTHEINTERNET: IPSec,SSUFLS, PGP,VPN,ANDFIREWALLS
oToexchange e-mailmessages, auserneedsaringofpublickeys;onepublickeyis
neededforeache-mailcorrespondent.
oPOPhasalsospecified aringofprivate/public keypairstoallowausertochange
herpairofkeysfromtimetotime.POPalsoallowseachusertohavedifferent user
IDs(e-mailaddresses) fordifferent groupsofpeople.
oPOPcertification isdifferent fromX509.InX509,thereisasinglepathfromthe
fullytrustedauthority toanycertificate. InPOP,therecanbemultiple pathsfrom
fullyorpartially trustedauthorities.
opapusestheideaofcertificate trustlevels.
oWhenauserreceives acertificate fromanintroducer, itstoresthecertificate under
thenameofthesubject(certified entity).Itassignsaleveloftrusttothiscertificate.
32.8PRACTICE SET
ReviewQuestions
1.WhydoesIPSecneedasecurityassociation?
2.HowdoesIPSeccreateasetofsecurityparameters?
3.Whatarethetwoprotocols definedbyIPSec?
4.WhatdoesAHaddtotheIPpacket?
5.WhatdoesESPaddtotheIPpacket?
6.ArebothAHandESPneededforIPsecurity? Whyorwhynot?
7.Whatarethetwoprotocols discussed inthischapterthatprovidesecurity atthe
transport layer?
8.WhatisIKE?
9.Whatisthedifference between asessionandaconnection inSSL?
10.HowdoesSSLcreateasetofsecurityparameters?
11.Whatisthenameoftheprotocol, discussed inthischapter,thatprovides security
fore-mail?
12.HowdoesPGPcreateasetofsecurityparameters?
13.WhatisthepurposeoftheHandshake Protocol inSSL?
14.WhatisthepurposeoftheRecordProtocol inSSL?
15.Whatisthepurposeofafirewall?
16.Whatarethetwotypesoffirewalls?
17.WhatisaVPNandwhyisitneeded?
18.HowdoLANsonafullyprivateinternetcommunicate?
Exercises
19.ShowthevaluesoftheAHfieldsinFigure32.6.Assume thereare128bitsof
authentication data.
20.ShowthevaluesoftheESPheaderandtrailerfieldsinFigure32.7.SECTION 32.8PRACTICE SET 1027
21.RedrawFigure32.6ifAHisusedintunnelmode.
22.RedrawFigure32.7ifESPisusedintunnelmode.
23.DrawafiguretoshowthepositionofAHinIPv6.
24.DrawafiguretoshowthepositionofESPinIPv6.
25.DoestheIPSecProtocol needtheservicesofaKDC?Explainyouranswer.
26.DoestheIPSecProtocol needtheservicesofaCA?Explainyouranswer.
27.DoestheSSLProtocol needtheservicesofaKDC?Explainyouranswer.
28.DoestheSSLProtocol needtheservicesofaCA?Explainyouranswer.
29.DoesthePGPProtocol needtheservicesofaKDC?Explainyouranswer.
30.DoesthepapProtocol needtheservicesofaCA?Explainyouranswer.
31.ArethereanyciphersuitesinIPSec?Explainyouranswer.
32.ArethereanyciphersuitesinPGP?Explainyouranswer.APPENDIX A
Unicode
Computers usenumbers. Theystorecharacters byassigning anumberforeachone.The
originalcodingsystemwascalledASCII(American Standard CodeforInformation
Interchange) andhad128numbers (0to127)eachstoredasa7-bitnumber.ASCIIcould
satisfactorily handlelowercase anduppercase letters,digits,punctuation characters, and
somecontrolcharacters. AnattemptwasmadetoextendtheASCIIcharacter setto8bits.
Thenewcode,whichwascalledExtended ASCII,wasneverinternationally standardized.
Toovercome thedifficulties inherentinASCIIandExtended ASCII,theUnicode
Consortium (agroupofmultilingual software manufacturers) createdauniversal
encoding systemtoprovideacomprehensive character setcalledUnicode.
Unicode wasoriginally a2-bytecharacter set.Unicode version3,however, isa
4-bytecodeandisfullycompatible withASCIIandExtended ASCII.TheASCIIset,
whichisnowcalledBasicLatin,isUnicodewith theupper25bitssettozero.Extended
ASCII,whichisnowcalledLatin-I,isUnicode withthe24upperbitssettozero.Fig­
ureA.Ishowshowthedifferent systemsarecompatible.
FigureA.lUnicode compatibility
"Extended ASCIII
1-.-1• D_e_fin_in_g_p_lan_e_s __ -+I'I 1•ASCII :
1__8_b_its_---..JII__8_b_its_---..J1 ~=,*f.,..",~c;...,....*M""""'~~=~i'..".,~""""'~l ~;Ji~~j~]j*ii£:~'-l
I, Unicode .j
A.IUNICODE
Theprevalent codetodayisUnicode. Eachcharacter orsymbolinthiscodeisdefined
bya32-bitnumber.Thecodecandefineupto232(4,294,967,296) characters orsym­
bols.Thenotationuseshexadecimal digitsinthefollowing format:
10291030 APPENDIX AUNICODE
EachXisahexadecimal digit.Therefore, thenumbering goesfromU-OOOOOOOO to
U-FFFFFFFF.
Planes
Unicode dividestheavailable spacecodesintoplanes.Themostsignificant 16bits
definetheplane,whichmeanswecanhave65,535planes.Eachplanecandefineupto
65,536character orsymbols. FigureA.2showsthestructure ofUnicode spacesand
planes.
FigureA.2Unicodeplanes
o ~M{'tjoa a aa a a aa a a aReserved
§i§g:;~=88888Reserved
Plane0000:BasicMultilingual Plane(BMP)
Plane0001:Supplementary Multilingual Plane(SMP)
Plane0002:Supplementary Ideographic Plane(SIP)PlaneOOOE:Supplementary SpecialPlane(SSP)
PlaneOOOF:PrivateUsePlane(PUP)
Plane0010:PrivateUsePlane(PUP)
BasicMultilingual Plane(BMP)
Plane0000,thebasicmultilingual plane(BMP),isdesigned tobecompatible withthe
previous 16-bitUnicode. Themostsignificant 16bitsinthisplaneareallzeros.Thecodes
arenormally shownasU+XXXX withtheunderstanding thatXXXXdefinesonlythe
leastsignificant 16bits.Thisplanemostlydefinescharacter setsindifferent languages
withtheexception ofsomecodesusedforcontrolorotherspecialcharacters. TableA.I
showsthemainclassification ofcodesinplane0000.
TableA.IUnicodeBMP
Range Description,
A-Zone(Alphabetical Characters andSymbols)
U+OOOO toU+OOFF BasicLatinandLatin-l
U+OIOOtoU+OIFF Latinextended
U+0200 toU+02FF IPAextension, andspacemodifier letters
U+0300toU+03FF Combining diacritical marks,Greek
U+0400 toU+04FF Cyrillic
U+0500toU+05FF Armenian, Hebrew
U+0600toU+06FF ArabicTableA.IUnicodeBMP(continued)APPENDIX AUNICODE 1031
Range Description
U+0700toU+08FF Reserved
U+0900toU+09FF Devanagari, Bengali
U+OAOO toU+OAFF Gumukhi, Gujarati
U+OBOO toU+OBFF Oriya,Tamil
U+OCOO toU+OCFF Telugu,Kannda
U+ODOO toU+ODFF Malayalam
U+OEOO toU+OEFF Thai,Lao
U+OFOO toU+OFFF Reserved
U+1000toU+lOFF Georgian
U+1100 toU+llFF HangulJamo
U+1200 toU+1DFF Reserved
U+IEOO toU+1EFF Latinextended additional
U+1FOO toU+1FFF Greekextended
U+2000toU+20FF Punctuation, sub/superscripts, currency, marks
U+2100toU+21FF Letterlike symbols, numberforms,arrows
U+2200toU+22FF Mathematical operations
U+2300 toU+23FF Miscellaneous technical symbols
U+2400toU+24FF Controlpictures, OCR,andenclosed alphanumeric
U+2500toU+25FF Boxdrawing, blockdrawing, andgeometric shapes
U+2600toU+26FF Miscellaneous symbols
U+2700toU+27FF Dingbats andBraillepatterns
U+2800toU+2FFF Reserved
U+3000toU+30FF CJKsymbols andpunctuation, hiragana, katakana
U+3100toU+31FF Bopornfo, hanguljambo,cjkmiscellaneous
U+3200toU+32FF Enclosed CJKlettersandmonths
U+3300toU+33FF CJKcompatibility
U+3400toU+4DFF Hangul
I-Zone(Ideographic Characters)
U+4EOO toU+9FFF CJKunifiedideographic
O-Zone(Open)
U+AOOO toU+DFFF Reserved
R·Zone(Restricted Use)
U+EOOO toU+F8FF Privateuse
U+F900 toU+FAFF CJKcompatibility ideographs
U+FBOO toU+FBFF Arabicpresentation form-A1032 APPENDIX AUNICODE
TableA.IUnicodeBMP(continued)
Range DescriptionI
I
U+FCOO toU+FDFF Arabicpresentation form-B
U+FEOO toU+FEFF Halfmarks,smallforms
U+FFOOtoU+FFFF Half-width andfull-width forms I
I
Supplementary Multilingual Plane(SMP)
Plane0001,thesupplementary multilingual plane(SMP),isdesigned toprovidemore
codesforthosemultilingual characters thatarenotincluded intheBMP.
Supplementary Ideographic Plane(SIP)
Plane0002,thesupplementary ideographic plane(SIP),isdesigned toprovidecodesfor
ideographic symbols, symbolsthatprimarily denoteanidea(ormeaning) incontrasttoa
sound(orpronunciation).
Supplementary SpecialPlane(SSP)
PlaneOOOE,thesupplementary specialplane(SSP),isusedforspecialcharacters.
PrivateUsePlanes(PUPs)
PlanesOOOFand0010,privateuseplanes(PUPs),areforprivateuse.
A.2ASCII
TheAmerican Standard CodeforInformation Interchange (ASCII)isa7-bitcodethat
wasdesigned toprovidecodefor128symbols, mostlyinAmerican English. Today,
ASCII,orBasicLatin,ispartofUnicode.Itoccupies thefirst128codesinUnicode
(00000000 to0000007F). TableA.2contains thedecimal, hexadecimal, andgraphic
codes(symbols) withanEnglishinterpretation, ifappropriate. Thecodesinhexadecimal
justdefinethetwoleastsignificant digitsinUnicode. Tofindtheactualcode,weprepend
000000inhexadecimal tothecode.Thedecimalcodeisjusttoshowtheintegervalue
ofeachsymbolwhenconverted.
TableA.2ASCIICodes
Decimal Hex Symbol Interpretation
0 00 null Nullvalue
1 01 SOH Startofheading
2 02 STX Startoftext
3 03 ETX Endoftext
4 04 EaT EndoftransmissionTableA.2ASCIICodes(continued)APPENDIX AUN/CODE 1033
Decimal Hex Symbol Interpretation
5 05 ENQ Enquiry
6 06 ACK Acknowledgment
7 07 BEL Ringbell
8 08 BS Backspace
9 09 HT Horizontal tab
10 OA LF Linefeed
11 OB VT Verticaltab
12 OC FF Fonnfeed
13 OD CR Carriage return
14 OE SO Shiftout
15 OF SI Shiftin
16 10 DLE Datalinkescape
17 11 DC1 Devicecontrol1
18 12 DC2 Devicecontrol2
19 13 DC3 Devicecontrol3
20 14 DC4 Devicecontrol4
21 15 NAK Negative acknowledgment
22 16 SYN Synchronous idle
23 17 ETB Endoftransmission block
24 18 CAN Cancel
25 19 EM Endofmedium
26 1A SUB Substitute
27 lB ESC Escape
28 1C FS Fileseparator
29 10 GS Groupseparator
30 IE RS Recordseparator
31 IF US Unitseparator
32 20 SP Space
33 21 !
34 22nDoublequote
35 23 #
36 24 $
37 25 %
38 26 &
39 27,Apostrophe1034 APPENDIX AUNICODE
TableA.2ASCIICodes(continued)
Decimal Hex Symbol InterpretationI
40 28 (
41 29 )
42 2A*
43 2B +
44 2C , Comma
45 2D - Minus
46 2E
47 2F /
48 30 0
49 31 1
50 32 2
51 33 3
52 34 4
53 35 5
54 36 6
55 37 7
56 38 8
57 39 9
58 3A Colon
59 3B , Semicolon
60 3C<
61 3D=
62 3E>
63 3F ?
64 40 @
65 41 A
66 42 B
67 43 C
68 44 D
69 45 E
70 46 F
71 47 G
72 48 H
73 49 I
74 4A JTableA.2ASCIICodes(continued)APPENDIX AUNICODE 1035
Decimal Hex Symbol Interpretation
75 4B K
76 4C L
77 4D M
78 4E N
79 4F 0
80 50 P
81 51Q_. .f------ ...'--_.-_..-"
82 52 R
83 53 S
84 54 T
85 55 U
86 56 V
87 57 W
88 58 X
89 59 y
90 5A Z
91 5B [ Openbracket
92 5C \ Backs1ash
93 5D ] Closebracket
94 5EA Caret
95 5F-Underscore
96 60,Graveaccent
97 61 a
98 62 b
99 63 c
100 64 d
101 65 e
102 66 f
103 67 g
104 68 h
105 69 i
106 6A J
107 6B k
108 6C 1
109 6D m1036 APPENDIX AUNICODE
TableA.2ASCIICodes(continued)
Decimal Hex Symbol Interpretation
110 6E n
111 6F 0
112 70 p
113 71 q
114 72 r
115 73 s
116 74 t
117 75 u
118 76 v
119 77 w
120 78 x
121 79 y
122 7A z
123 7B { Openbrace
124 7C I Bar
125 7D } Closebrace
126 7E- Tilde
127 7F DEL Delete
SOllIeProperties ofASCII
ASCIIhas some interesting properties thatwebrieflymentionhere.
I.Thefirstcode(0)isthenullcharacter, whichmeansthelackofanycharacter.
2.Thefirst32codes,0to31,arecontrolcharacters.
3.Thespacecharacter, whichisaprintable character, isatposition32.
4.Theuppercase lettersstartfrom65(A).Thelowercase lettersstartfrom97.When
compared, uppercase lettersarenumerically smallerthanlowercase letters.This
meansthatinasortedlistbasedonASCIIvalues,theuppercase lettersappear
beforethelowercase letters.
5.Theuppercase andlowercase lettersdifferbyonlyonebitinthe7-bitcode.Forexam­
ple,character Ais1000001(Ox4l)andcharacter ais110000I(Ox61).Thedifference
isinbit6,whichis0inuppercase lettersand1inlowercase letters.Ifweknowthe
codeforonecase,wecaneasilyfindthecodefortheotherbyaddingorsubtracting
32indecimal(Ox20inhexadecimal), orwecanjustflipthesixthbit.
6.Theuppercase lettersarenotimmediately followed bylowercase letters.Thereare
somepunctuation characters inbetween.
7.Digits(0to9)startfrom48(Ox3).Thismeansthatifyouwanttochangeanumeric
character toitsfacevalueasaninteger,youneedtosubtract48.APPENDIXB
Numbering Systems
Weusedifferent numbering systems:base10(decimal), base2(binary), base8(octal),
base16(hexadecimal), base256,andsoon.Allthenumbering systemsexamined here
arepositional, meaning thatthepositionofasymbolinrelationtoothersymbolsdeter­
minesitsvalue.Eachsymbolinanumberhasaposition. Thepositiontraditionally
startsfrom0andgoeston-1,wherenisthenumberofsymbols. Forexample, inFig­
ureB.1,thedecimalnumber14,782hasfivesymbolsinpositions 0to4.
FigureB.lPositions andsymbolsinanumber
Decimal number:14.782
2 3 4___ 4__7_--,--_8_-,--_2_1 Symbols
(JPositions
Aswewillsee,thedifference betweendifferentnumbering systemsisbasedonthe
weightassigned toeachposition.
B.lBASE10:DECIMAL
Thebase-10ordecimalsystemistheonemostfamiliartousineveryday life.Allour
termsforindicating countable quantities arebasedonit,and,infact,whenwespeakof
othernumbering systems, wetendtorefertotheirquantities bytheirdecimalequiva­
lents.ThetermdecimalisderivedfromtheLatinstemdeci,meaning 10.Thedecimal
systemuses10symbolstorepresent quantitative values:0,1,2,3,4,5,6, 7,8,and9.
Decimalnumbers use10symbols: 0,1,2,3,4,5,6,7,8, and9.
10371038 APPENDIX BNUMBERING SYSTEMS
Weights
Inthedecimalsystem,eachweightequals10raisedtothepowerofitsposition. The
weightofthesymbolatposition0is100(1);theweightofthesymbolatposition1is
101(10);andsoon.
B.2BASE2:BINARY
Thebinarynumbersystemprovides thebasisforallcomputer operations. Computers
workbyturningelectriccurrentonandoff.Thebinarysystemusestwosymbols, 0and
1,soitcorresponds naturally toatwo-state device,suchasaswitch,with0torepresent
theoffstateand1torepresent theonstate.ThewordbinaryderivesfromtheLatin
stembi,meaning 2.
Binarynumbers usetwosymbols: 0and1.
Weights
Inthebinarysystem,eachweightequals2raisedtothepowerofitsposition. The
weightofthesymbolatposition0is20(1);theweightofthesymbolatposition1is21(2);
andsoon.
Conversion
Nowletusseehowwecanconvertbinarytodecimalanddecimaltobinary.FigureB.2
showthetwoprocesses.
FigureB.2Binary-to-decimal anddecimal~to-binary conversion
11001110IBinarynumber
6432168 4 2 1 Weights
64008420Weighted results~
~Decimalnumber
a.Binarytodecimal...l-- Q_uo_ti_en_ts Decimal
I( number
~11100111 0~
Binarynumber
b.Decimal tobinary
Toconvertabinarynumbertodecimal,weusetheweights.Wemultiplyeachsymbol
byitsweightandaddalltheweighted results.FigureB.2showshowwecanchange
binary1001110 toitsdecimalequivalent 78.
Asimpledivisiontrickgivesusaconvenient waytoconvertadecimalnumberto
itsbinaryequivalent, asshowninFigureB.2.Toconvertanumberfromdecimalto
binary,dividethenumberby2andwritedowntheremainder (lor0).Thatremainder
istheleastsignificant binarydigit.Now,dividethequotientofthatdivisionby2andAPPENDIX BNUMBERING SYSTEMS 1039
writedownthenewremainder inthesecondposition. Repeatthisprocessuntilthequo­
tientbecomes zero.
B.3BASE16:HEXADECIMAL
Anothersystemusedinthistextisbase16.Thetermhexadecimal isderivedfromthe
Greektermhexadec, meaning 16.Thehexadecimal numbersystemisconvenient for
identifying alargebinarynumberinashorterform.Thehexadecimal systemuses
16symbols: 0,1,...,9,A,B,C,D,E,andF.Thehexadecimal systemusesthesame
first10symbols asthedecimalsystem,butinsteadofusing10,11,12,13, 14,and
15,itusesA,B, C,D,E,andF.Thisprevents anyconfusion between twoadjacent
symbols.
Hexadecimal numbers use16symbols: 0,1,2,3,4,5,6,7,8,9,A,B,C,D,E,andF.
Weights
Inthehexadecimal system,eachweightequals16raisedtothepowerofitsposition.
Theweightofthesymbolatposition0is16°(1);theweightofthesymbolatposition1is
161(16);andsoon.
Conversion
Nowletusseehowwecanconverthexadecimal todecimalanddecimaltohexadecimal.
FigureB.3showthetwoprocesses.
FigureB.3Hexadecimal-to-decimal anddecimal-to-hexadecimal conversion
QuotientsI3
4,096A
2567
16Decimal
.......f--------- number
Hexadecimal number
a.Hexadecimal todecimal b.Decimal tohexadecimal
Toconvertahexadecimal numbertodecimal, weusetheweights. Wemultiply
eachsymbolbyitsweightandaddalltheweighted results.FigureB.3showshow
hexadecimal Ox3A73istransformed toitsdecimalequivalent 14,963.
Weusethesametrickweusedforchanging decimaltobinarytotransform a
decimaltohexadecimal. Theonly difference isthatwedividethenumberby16instead
of2.Thefigurealsoshowshow14,963indecimalisconverted tohexadecimal Ox3A73.1040 APPENDIX BNUMBERING SYSTEMS
AComparison
TableB.lshowshowsystemsrepresent thedecimalnumbers 0through15.Asyoucan
see,decimal13isequivalent tobinary1101,whichisequivalent tohexadecimal D.
TableB.IComparison ofthreesystems
Decimal Binary Hexadecimal
0 0 0
1 1 1
2 10 2
3 11 3
4 100 4
5 101 5
6 110 6
7 111 7Decimal Binary Hexadecimal
8 1000 8
9 1001 9
10 1010 A
11 1011 B
12 1100 C
13 1101 D
14 1110 E
15 1111 F
B.4BASE256:IPADDRESSES
Onenumbering systemthatisusedintheInternetisbase256.IPv4addresses use this
basetorepresent anaddressindotteddecimalnotation. WhenwedefineanIPv4
addressas131.32.7.8, weareusingabase-256 number.Inthisbase,wecouldhave
used256uniquesymbols, butremembering thatmanysymbolsandtheirvaluesisbur­
densome. Thedesigners oftheIPv4addressdecidedtousedecimalnumbers 0to255
assymbolsandtodistinguish between thesymbols, adotisused.Thedotisusedto
separatethesymbols; itmarkstheboundary betweenthepositions. Forexample, the
IPv4address131.32.7.8 ismadeofthefoursymbols 8,7,32,and131atpositions 0,1,2,
and3,respectively.
IPv4addresses usethebase-256 numbering system.
Thesymbolsin1Pv4aredecimalnumbers between 0and255;
theseparator isadot.
Weights
Inbase256,eachweightequals256raisedtothepowerofitsposition. Theweightof
thesymbolatposition0is2560(1);theweightofthesymbolatposition 1is2561
(256);andsoon.
Conversion
Nowletusseehowwecanconverthexadecimal todecimalanddecimaltohexadecimal.
FigureB.4showthetwoprocesses.APPENDIX BNUMBERING SYSTEMS 1041
FigureB.4IPv4addresstodecimaltransformation
12,215,708,6861 Decimal number__1_3_2 1_7 8 14_1IPv4address
2563256225612560Weights
2,214,592,512 1,114,112 2,048 14Results..Quotients Decimal
~---- number
a.IPaddresstodecimal b.DecimaltoIPaddress
ToconvertanIPv4addresstodecimal,weusetheweights.Wemultiplyeachsymbol
byitsweightandaddalltheweighted results.ThefigureshowshowtheIPv4address
131.32.7.8 istransformed toitsdecimalequivalent.
Weusethesametrickweusedforchanging decimaltobinarytotransform adecimal
toanIPv4address.Theonlydifference isthatwedividethenumberby256insteadof2.
However, weneedtoremember thattheIPv4addresshasfourpositions. Thismeans
thatwhenwearedealingwithanIPv4address,wemuststopafterwehavefoundfour
values.FigureBAshowsanexample foranIPv4address.
B.5OTHER CONVERSIONS
Thereareothertransformations suchasbase2tobase16orbase16tobase256.Itis
easytousebase10astheintermediate system.Inotherwords,tochangeanumber
frombinarytohexadecimal wefirstchangethebinarytodecimalandthenchangethe
decimaltohexadecimal. Wediscusssomeeasymethods forcommon transformations.
BinaryandHexadecimal
Thereisasimplewaytoconvertbinarytohexadecimal andviceversaasshownin
FigureB.5.
FigureB.5Transformation frombinarytohexadecimal
I10]100011110IBinary~~~
2 8 E Hexadecimal
a.BinarytohexadecimalHexadecimal
Binary'----'---'----------'
b.Hexadecimal tobinary
Tochangeanumberfrombinarytohexadecimal, wegroupthebinarydigitsfrom
therightbyfours.Thenweconverteach4-bitgrouptoitshexadecimal equivalent,1042 APPENDIX BNUMBERING SYSTEMS
usingTableB.1.Inthefigure,weconvertbinary1010001110 tohexadecimal Ox28E.
Tochangeahexadecimal numbertobinary,weconverteachhexadecimal digittoits
equivalent binarynumber,usingTableB.1,andconcatenate theresults.InFigureB.5
weconverthexadecimal Ox28Etobinary.
Base256andBinary
Toconvertabase256numbertobinary,wefirstneedtoconvertthenumberineach
position toan8-bitbinarygroupandthenconcatenate thegroups.Toconvertfrom
binarytobase256,weneedtodividethebinarynumberintogroupsof8bits,convert
eachgrouptodecimal, andtheninsertseparators (dots)betweenthedecimalnumbers.APPENDIXC
Mathematical Review
Inthisappendix, wereviewsomemathematical concepts thatmayhelpyoutobetter
understand thetopicscoveredinthebook.Perhapsthemostimportant conceptindata
communications issignalsandtheirrepresentation. Westartwithabriefreviewoftrig­
onometric functions, asdiscussed inatypicalprecalculus book.Wethenbrieflydiscuss
Fourieranalysis, whichprovides atoolforthetransformation between thetimeandfre­
quencydomains. Wefinallygiveabrieftreatment ofexponential andlogarithmic functions.
C.lTRIGONOMETRIC FUNCTIONS
Letusbrieflydiscusssomecharacteristics ofthetrigonometric functions asusedinthe
book.
SineWave
Wecanmathematically describeasinewaveas
set)==Asin(21tft) ::::Asin(2;t)
wheresistheinstantaneous amplitude, Aisthepeakamplitude,fisthefrequency, and
Tistheperiod(phasewillbediscussed later).FigureC.lshowsasinewave.
FigureC.IAsinewave
Time
T
Notethatthevalueof21tfiscalledtheradianfrequency andwrittenas0)(omega),
whichmeansthatasinefunctioncanwrittenasset)=Asin(rot).
10431044 APPENDIX CMATHEMATICAL REVIEW
Example C.l
Findthepeakvalue,frequency, andperiodofthefollowing sinewaves.
a.set)=5sin(10m)
b.set)=sin(lOt)
Solution
a.Peakamplitude: A=5
Frequency: 101t=2rtf,sof=5
Period:T=IIJ=1/5s
b.Peakamplitude: A=1
Frequency: 10=2rtf,sof=1O/(2rt)=1.60
Period:T=IIJ=1/1.60=0.628s
Example C.2
Showthemathematical representation ofasinewavewithapeakamplitude of2andafrequency
of1000Hz.
Solution
Themathematical representation isset)=2sin(20001tt).
Horizontal Shifting(Phase)
Allthesinefunctions wediscussed sofarhaveanamplitude ofvalue0attheorigin.
Whatifweshiftthesignaltotheleftortotheright?FigureC.2showstwosimplesine
waves,oneshiftedtotherightandonetotheleft.
FigureC.2Twohorizontally shiftedsinewaves
Is(t)=Asin(COt-<Il)
A---
Time
<Il
00 T
Is(t)=Asin(cot+<Il) CO=21tfI
...
Time
<Il
<0 T
Whenasignalisshiftedtotheleftorright,itsfirstzerocrossingwillbeatapoint
intimeotherthantheorigin.Toshowthis,weneedtoaddorsubtractanotherconstant
tooot,asshowninthefigure.APPENDIX CMATHEMATICAL REVIEW 1045
Shiftingasinewavetotheleftorrightisapositiveornegativeshift,respectively.
VerticalShifting
Whenasinewaveisshiftedvertically, aconstant isaddedtotheinstantaneous ampli­
tudeofthesignal.Forexample, ifweshiftasinewave2unitsofamplitude upward, the
signalbecomes set)=2+sin(rot);ifweshiftit2unitsofamplitude downward, wehave
set)=-2+sin(rot).FigureC.3showstheidea.
FigureC.3Verticalshiftingofsinewaves
Is(t)=2+Asin(rot) 00=2rrfI
Time
Is(t)=-2+Asin(rot) 00=2rtfI
CosineWave
IfweshiftasinewaveT/2totheleft,wegetwhatiscalledacosinewave(cos).
Asin(rot+1tI2) =Acos(rot)
FigureC.4showsacosinewave.
FigureC.4Acosinewave
s(t~tIs(t)=Asin(rot+T/4)=Acos(rot) 00=2rtfI
-w=~---
f/\
r~V\7
4 T----)­
Time1046 APPENDIX CMATHEMATICAL REVIEW
OtherTrigonometric Functions
Therearemanytrigonometric functions; twoofthemorecommon aretan(cot)and
cot(illt).Theyaredefinedastan((Ot)=sine(Ot)/cos( cot)andcot(cot)=cos(ffit)/sin((Ot).
Notethattanandcotaretheinverseofeachother.
Trigonometric Identities
Thereareseveralidentities betweentrigonometric functions thatwesometimes needto
know.TableC.lgivestheseidentities forreference. Otheridentities canbeeasily
derivedfromthese.
TableC.lSometrigonometric identities
Name Formula
Pythagorean sin2x+cos2x=1
Even/odd sin(-x)=-sin(x)cos(-x)=cos(x)
Sum sin(x+y)=sin(x)cos(y)+cos(x)sin(y)
cos(x+y)=cos(x)cos(y)-sin(x)sin(y)
Difference sin(x-y)=sin(x)cos(y)-cos(x)sin(y)
cos(x-y)=cos(x)cos(Y)+sin(x)sin(y)
Producttosum sin(x)sin(y)=1/2[cos(x-y)-cos(x+y)]
cos(x)cos(y)=1/2[cos(x-y)+cos(x+y)]
sin(x)cos(y)=1/2[sin(x+y)+sin(x-y)]
cos(x)sin(y)=1/2[sin(x+y)-sin(x-y)]
C.2FOURIER ANALYSIS
Fourieranalysisisatoolthatchangesatime-domain signaltoafrequency-domain signal
andviceversa.
FourierSeries
Fourierprovedthatacomposite periodic signalwithperiodT(frequency f)canbe
decomposed intoaseriesofsineandcosinefunctions inwhicheachfunction isan
integralharmonic ofthefundamental frequencyfofthecomposite signal.Theresultis
calledtheFourierseries.Inotherwords,wecanwriteacomposite signalasshownin
FigureC.S.Usingtheseries,wecandecompose anyperiodicsignalintoitsharmonics.
NotethatAoistheaveragevalueofthesignaloveraperiod,Anisthecoefficient ofthe
nthcosinecomponent, andBnisthecoefficient ofthenthsinecomponent.
Example C.3
Letusshowthecomponents ofasquarewavesignalasseeninFigureC.6.Thefigurealsoshows
thetimedomainandthefrequency domain.According tothefigure,suchasquarewavesignalhas
onlyAncoefficients. NotealsothatthevalueofAo=0becausetheaveragevalueofthesignalis0;
itisoscillating aboveandbelowthetimeaxis.Thefrequency domainofthesignalisdiscrete;APPENDIX CMATHEMATICAL REVIEW 1047
FigureC.SFourierseriesandcoefficients oftenns
Fourierseries
~ ~
s(t)=Ao+LAllsin(21tnft)+LB"cos(21tnft)n=l n=l
Coefficients
Fourierseries
Timedomain:periodic Frequency domain:discrete
onlyoddharmonics arepresentandtheamplitudes arealternatively positiveandnegative. Avery
important pointisthattheamplitude oftheharmonics approaches zeroaswemovetowardinfin­
ity.Something whichisnotshowninthefigureisthephase.However, weknowthatallcompo­
nentsarecosinewaves,whichmeansthateachhasaphaseof90°.
FigureC.6FindingtheFourierseriesofaperiodic squarefunction
Timedomain
Time oA----;I---+---+--+---t--t---+---..-
-A
T
Ao=O
set)=~cos(21tft)-j~cos(21t3ft)+1~cos(21t5ft)-j~cos(2rr:7ft)+•••
4A1t
f
4A
31t4A
51t
Frequency
Frequency domain1048 APPENDIX CMATHEMATICAL REVIEW
Example C.4
Nowletusshowthecomponents ofasawtooth signalasseeninFigureC.7.Thistime,wehave
onlyEncomponents (sinewaves).Thefrequency spectrum, however, isdenser;wehaveallhar­
monicsif,2j,3j,...).Apointwhichisnotclearfromthediagramisthephase.Allcomponents
aresinewaves,whichmeanseachcomponent hasaphaseof00.
FigureC.7FindingtheFourierseriesforasawtooth signal
Timedomain
IA •••----,.'----I----:ll..r----i------::;.,,;-:---1----+-
~ TI~
set)=2,¢sin(2rcft)-~sin(2rc2ft)+~sin(21t3ft)-~sin(21t4!t)+•••
2A
1t
f21
I
2A
-2rc2A
3rcI4f
3fI
2A
-4rc2A
5
11t6f
5f'2A
-61tFrequency
Frequency domain
FourierTransform
WhiletheFourierseriesgivesthediscretefrequency domainofaperiodicsignal,the
Fouriertransform givesthecontinuous frequency domainofanonperiodic signal.
FigureC.Sshowshowwecancreateacontinuous frequency domainfromanonperiodic
time-domain functionandviceversa.
FigureC.SFouriertransform andinverseFouriertransform
S(f)=f~t)e-j2"ft dt set)=L~f)ej21tft dt
Fouriertransform InverseFouriertransformAPPENDIX CMATHEMATICAL REVIEW 1049
Fouriertransform
Timedomain: nonperiodic Frequency domain:continuous
ExampleC.s
FigureC.9showsthetimeandfrequency domainsofonesinglesquarepulse.Thetimedomainis
between-t/2andtl2;thefrequency domainisacontinuous function thatstretches fromnegative
infinitytopositiveinfinity.Unliketheprevious examples, thefrequency domainiscontinuous; all
frequencies arethere,notjusttheintegralones.
FigureC.9FindingtheFouriertransform ofasquarepulse
Timedomain
-'t/201;/2
sin(1t'tj)
Sif)=A't1tTj
Frequency domainAt
Frequency
Time-Limited andBand-Limited Signals
Twoveryinteresting concepts relatedtotheFouriertransform arethetime-limited
andband-limited signals.Atime-limited signalisasignalforwhichtheamplitude of
set)isnonzeroonlyduringaperiodoftime;theamplitude iszeroeverywhere else.
Aband-limited signal,ontheotherhand,isthesignalforwhichtheamplitude ofSif)
isnonzeroonlyforarangeoffrequencies; theamplitude iszeroeverywhere else.A
band-limited signalplaysaveryimportant roleinthesampling theoremandNyquist
frequency becausethecorresponding timedomaincanberepresented asaseriesof
samples.
Time-limited signal:s(t)=0forItI~T
Band-limited signal:Sif)=0forIfI~B1050 APPENDIX CMATHEMATICAL REVIEW
C.3EXPONENT ANDLOGARITHM
Insolvingnetworking problems, weoftenneedtoknowhowtohandleexponential and
logarithmic functions. Thissectionbrieflyreviewsthesetwoconcepts.
Exponential Function
Theexponential functionwithbaseaisdefinedas
y=cr
Ifxisaninteger(integralvalue),wecaneasilycalculate thevalueofybymultiplying
thevalueofabyitselfxtimes.
Example C.6
Calculate thevalueofthefollowing exponential functions.
a.y=32
b.Y=5.26
Solution
a.y=3x3=9
b.y=5.2x5.2x5.2x5.2x5.2x5.2=19,770.609664
Ifxisnotinteger,weneedtouseacalculator.
Example C.7
Calculate thevalueofthefollowing exponential functions.
a.y=32.2
b.y=5.26.3
Solution
a.y=11.212(approximately)
b.y=32,424.60 (approximately)
NaturalBase
Oneverycommon baseusedinscienceandmathematics isthenaturalbasee,which
hasthevalue2.71828183 ....Mostcalculators showthisfunction as£1,whichcanbe
calculated easilybyenteringonlythevalueoftheexponent.
ExampleC.s
Calculate thevalueofthefollowing exponential functions.
_ 4a.y-e
b.y=e6.3
Solution
a.y=54.56(approximately)
b.y=544.57(approximately)APPENDIX CMATHEMATICAL REVIEW 1051
Properties oftheExponential Function
Exponential functions haveseveralproperties; someareusefultousinthistext:
First:
Second:
Third:y=aO=1
y=a1=a
_y=a-x=.!.
aX
Example C.9
Thethirdproperty isusefultousbecause wecancalculate thevalueofanexponential function
withanegative value.Wefirstcalculate thepositivevalueandwetheninverttheresult.
a.y=e-4
b.y=e-6·3
Solution
a.y=1/54.56=0.0183
b.y=1/544.57=0.00183
Logarithmic Function
Alogarithmic functionistheinverseofanexponential function, asshownbelow.Just
asintheexponential function, aiscalledthebaseofthelogarithmic function:
y=£c.-..x=lo~y
Inotherwords,ifxisgiven,wecancalculate ybyusingtheexponential function~
ifyisgiven,wecancalculate xbyusingthelogarithmic function.
Exponential andlogarithmic functions aretheinverseofeachother.
Example C.10
Calculate thevalueofthefollowing logarithmic function,s.
a.x=log39
b.x=log216
Solution
Wehavenotyetshownhowtocalculate thelogfunction indifferent bases,butwecansolvethis
problem intuitively.
a.Because 32:=9,wecansaythatlog39=2,usingthefactthatthetwofunctions arethe
inverseofeachother.
b.Because24=16,wecansaythatlog2l6=4byusingtheprevious fact.
TwoCommon Bases
Thetwocommon basesforlogarithmic functions, thosethatcanbehandledbyacalcu­
lator,arebaseeandbase10.Thelogarithm inbaseeisnormally shownasIn(natural
logarithm); thelogarithm inbase10isnormally shownaslog(omitting thebase).1052 APPENDIX CMATHEMATICAL REVIEW
ExampleCll
Calculate thevalueofthefollowing logarithmic functions.
a.x=log233
b.x=In45
Solution
Forthesetwobaseswecanuseacalculator.
a.x=log233=2.367
b.x=In45=3.81
BaseTransformation
Weoftenneedtofindthevalueofalogarithmic functioninabaseotherthaneor10.If
theavailable calculator cannotgivetheresultinourdesiredbase,wecanuseavery
fundamental property ofthelogarithm, basetransformation, asshown:
10gbY
IO&1Y=-­10gba
Notethattheright-hand sideistwologfunctions withbaseb,whichisdifferent
fromthebaseaattheleft-hand side.Thismeansthatwecanchooseabasethatis
available inourcalculator (baseb)andfindthelogofabasethatisnotavailable
(basea).
Example C12
Calculate thevalueofthefollowing logarithmic functions.
a.x=log3810
b.x=log5600
Solution
Thesetwobases,3and5,arenotavailable onacalculator, butwecanusebase10whichisavailable.
loglO8102.908a.x=log3810= =--=6.095log1030.477
log106002.778
b.x=log5600= =--=3.975
log1050.699
Properties ofLogarithmic Functions
Likeanexponential function, alogarithmic functionhassomeproperties thatareuseful
in:simplifying thecalculation ofalogfunction.
First:
Second:
Third:10&11=0
10&1a=1
10&1!=-10&1xxFourth:
Fifth:
Sixth:10&1(xxY)=10&1x+lo~y
10&1:!:=l0&zx-10&1yy
lo&zxY=Yx10&1xAPPENDIX CMATHEMATICAL REVIEW 1053
Example C13
Calculate thevalueofthefollowing logarithmic functions.
a.x=log31
b.x=log33
c.x=loglO(l/10)
d.loga(xxy)ifweknowthatlogax=2andlogay=3
e.logz(1024)withoutusingacalculator
Solution
Weusethepropertyoflogfunctions tosolvetheproblems.
a.x=log31=0
b.x=log33=1
c.x=loglO(1110)=loglOlO-l=-loglO10=-1
d.loga(xxy)=logax+logaY=2+3=5
e.10gz(1024)=logz(210)=10logz2=10x 1=10APPENDIXD
8B/6TCode
Thisappendix isatabulation of8B/6Tcodepairs.The8-bitdataareshowninhexadecimal
format.The6Tcodeisshownas+(positive signal),-(negative signal),and0(lackof
signal)notation.
TableD.l8B/6Tcode
Data Code Data Code Data Code Data Code
00-+00-+ 20-++-00 40-00+0+ 600++0-0
010-+-+0 21+00+-- 410-00++ 61+0+-00
020-+0-+ 22-+0-++ 420-0+0+ 62+0+0-0
030-++0- 23+-0-++ 430-0++0 63+0+00-
04-+0+0- 24+-0+00 44-00++0 640++00-
05+0--+0 25-+0+00 4500-0++ 65++0-00
06+0-0-+ 26+00-00 4600-+0+ 66++00-0
07+0-+0- 27-+++-- 4700-++0 67++000-
08-+00+- 280++-0- 4800+000 680++-+-
090-++-0 29+0+0-- 49++-000 69+0++--
OA0-+0+- 2A+0+-0- 4A+-+000 6A+0+-+-
OB0-+-0+ 2B+0+--0 4B-++000 6B+0+--+
OC-+0-0+ 2C0++--0 4C0+-000 6C0++--+
OD+0-+-0 2D++00-- 4D+0-000 6D++0+--
OE+0-0+- 2E++0-0- 4E0-+000 6E++0-+-
OF+0--0+ 2F++0--0 4F-0+000 6F++0--+
100--+0+ 30+-00-+ 50+--+0+ 70000++-
11-0-0++ 310+--+0 51-+-0++ 71000+-+
12-0-+0+ 320+-0-+ 52-+-+0+ 72000-++
13-0-++0 330+-+0- 53-+-++0 73 000+00
10551056 APPENDIX D8B/6TCODE
TableD.I8B/6Tcode(continued)
Data Code Data Code Data Code Data Code
140--++0 34+-0+0- 54+--++0 74 000+0-
15--00++ 35-0+-+0 55--+0++ 75000+-0
16--0+0+ 36-0+0-+ 56--++0+ 76 000-0+
17--0++0 37-0++0- 57--+++0 77 000-+0
18-+0-+0 38+-00+- 58--0+++ 78+++--0
19+-0-+0 390+-+-0 59-0-+++ 79+++-0-
lA-++-+0 3A0+-0+- 5A0--+++ 7A+++0--
IB+00-+0 3B0+--0+ 5B0--0++ 7B0++0--
lC+00+-0 3C+-0-0+ 5C+--0++ 7C-00-++
ID-+++-0 30-0++-0 50-000++ 7D -00+00
IE+-0+-0 3E-0+0+- 5E0+++-- 7E+---++
IF-+0+-0 3F-0+-0+ 5F0++-00 7F+--+00
80-00+-+ AO-++0-0 CO-+0+-+ EO-++0-+
810-0-++ Al+-+-00 Cl0-+-++ El+-++0
820-0+-+ A2+-+0-0 C20-++-+ E2+-+0-+
830-0++- A3+-+00- C30-+++- E3+-++0-
84-00++- A4-++00- C4-+0++- E4-+++0-
8500--++ A5++--00 C5+0--++ E5++--+0
8600-+-+ A6++-0-0 C6+0-+-+ E6++-0-+
8700-++- A7++-00- C7+0-++- E7++-+0-
88-000+0 A8-++-+- C8-+00+0 E8-++0+-
890-0+00 A9+-++-- C90-++00 E9+-++-0
8A0-00+0 AA+-+-+- CA0-+0+0 EA+-+0+-
8B0-000+ AB+-+--+ CB0-+00+ EB+-+-0+
8C-0000+ AC-++--+ CC-+000+ EC-++-0+
8000-+00 AD++-+-- CD+0-+00 ED++-+-0
8E00-0+0 AE++--+- CE+0-0+0 EE++-0+-
8F00-00+ AF++---+ CF+0-00+ EF++--0+
90+--+-+ BO+000-0 DO+-0+-+ FO+000-+
91-+--++ Bl0+0-00 010+--++ Fl0+0-+0
92-+-+-+ B20+00-0 020+-+-+ F20+00-+
93-+-++- B30+000- D30+-++- F30+0+0-
94+--++- B4+0000- D4+-0++- F4+00+0-TableD.I8B/6Tcode (continued)APPENDIX D8B/6TCODE 1057
Data Code Data Code Data Code Data Code
95--+-++ B500+-00 05-0+-++ F500+-+0
96--++-+ B600+0-0 06-0++-+ F600+0-+
97--+++- B700+00- 07-0+++- F700++0-
98+--0+0 B8+00-+- 08+-00+0 F8+000+-
99-+-+00 B90+0+-- 090+-+00 F90+0+-0
9A-+-0+0 BA0+0-+- OA0+-0+0 FA0+00+-
9B-+-00+ BB0+0--+ OB0+-00+ FB0+0-0+
9C+--00+ BC+00--+ OC+-000+ FC+00-0+
90--++00 BO00++-- 00-0++00 FD00++-0
9E--+0+0 BE00+-+- OE-0+0+0 FE00+0+-
9F--+00+ BF00+--+ OF-0+00+ FF00+-0+APPENDIXE
Telephone History
InChapter9,wediscussed telephone networks. Inthisappendix, webrieflyreviewthe
historyoftelephone networks. ThehistoryintheUnitedStatescanbedividedintothree
eras:priorto1984,between 1984and1996,andafter1996.
Before1984
Before1984,almostalllocalandlong-distance serviceswereprovided bytheAT&TBell
System.In1970,theU.S.government, believing thattheBellSystemwasmonopolizing
thetelephone serviceindustry, suedthecompany. Theverdictwasinfavorofthegovern­
mentandresultedinadocument calledtheModified FinalJudgment (MFJ).Beginning on
January1,1984,AT&TwasbrokenintoAT&TLongLines,23BellOperating Compa­
nies(BOCs), andothers.The23BOCsweregrouped tomakeseveralRegional Bell
Operating Companies (RBOSs). Thislandmark event,theAT&Tdivestiture of1984,was
beneficial tocustomers oftelephone services. Telephone rateswerelowered.
Between 1984and1996
Thedivestiture dividedthecountryintomorethan200LATAs;somecompanies were
allowedtoprovideservicesinsideaLATA(LECs),andotherswereallowedtoprovide
servicesbetween LATAs(IXCs).Competition, particularly between long-distance car­
riers,increased asnewcompanies wereformed.However, noLECcouldprovidelong­
distanceservices, andnoIXCscouldprovidelocalservices.
After1996
Another majorchangeintelecommunications occurred in1996.TheTelecommunica­
tionsActof1996combined thedifferent services provided bydifferent companies
undertheumbrella oftelecommunication services; thisincluded localservices, long­
distancevoiceanddataservices, videoservices, andsoon.Inaddition, theactallowed
anycompany toprovideanyofthese services atthelocalandlong-distance levels.In
otherwords,acommon carriercompany provides servicesbothinsidetheLATAand
betweentheLATAs.However, topreventtherecabling ofresidents, thecarriersthatwere
givenintra-LATA services (ILECs) continued toprovidethemainservices; thenew
competitors (CLECs) provided otherservices.
1059APPENDIXF
ContactAddresses
Thefollowing isalistofcontactaddresses forvariousorganizations mentioned in
thetext.
oATMForum
PresidioofSanFrancisco
P.O.Box29920(mail)
572BRugerStreet(surface)
SanFrancisco, CA94129-0920
Telephone: 415561-6275
E-mail:info@atmforum.com
www.atmforum.com
oFederalCommunications Commission (FCC)
44512thStreetS.W.
Washington, DC20554
Telephone: 1-888-225-5322
E-mail:fccinfo@fcc.gov
www.fcc.gov
oInstitute ofElectrical andElectronics Engineers (IEEE)
Operations Center
445HoesLane
Piscataway, NJ08854-1331
Telephone: 732981-0060
www.ieee.org
10611062 APPENDIX FCONTACT ADDRESSES
oInternational Organization forStandardization (ISO)
1,ruedeVarembe
CaissePosta1e56
CH-1211 Geneve20
Switzerland
Telephone: 41227490111
E-mail:central@iso.ch
www.iso.orgoInternational Telecommunication Union(ITU)
PlacedesNations
CH-1211Geneva20
Switzerland
Telephone: 41227305852
E-mail:tsbmail@itu.int
www.itu.intlhome
oInternetArchitecture Board(lAB)
E-mail:lAB@isi.edu
www.iab.orgoInternetCorporation forAssigned NamesandNumbers (ICANN)
4676Admiralty Way,Suite330
MarinadelRey,CA90292-6601
Telephone: 310823-9358
E-mail:icann@icann.org
www.icann.org
oInternetEngineering Steering Group(IESG)
E-mail:iesg@ietf.org
www.ietf.org/iesg.html
oInternetEngineering TaskForce(IETF)
E-mail:ietf-infor@ietf.org
www.ietf.org
oInternetResearch TaskForce(IRTF)
E-mail:irtf-chair@ietf.org
www.irtf.org
oInternetSociety(ISOC)
1775WeihleAvenue,Suite102
Reston,VA20190-5108
Telephone: 703.326-9880
E-mail:info@isoc.org
www.isoc.orgAPPENDIXG
RFCs
InTableG.1,welistalphabetically byprotocol theRFCsthataredirectlyrelatedto
thematerial inthistext.Formoreinformation gotothefollowing site:http://
www.rfc-editor.org.
TableG.tRFCsforeachprotocol
Protocol RFC
ARPandRARP 826,903,925,1027,1293,1329,1433,1868,1931,2390
BGP 1092,1105,1163,1265,1266,1267,1364,1392,1403,1565,
1654,1655,1665,1771,1772,1745,1774,2283
BOOTPandDHCP 951,1048,1084,1395,1497, 1531, 1532, 1533, 1534,1541,
1542,2131,2132
CIDR 1322,1478,1479,1517,1817
DHCP SeeBOOTPandDHCP
DNS 799,811,819,830,881,882,883,897,920,921,1034,1035,
1386,1480,1535,1536,1537,1591,1637,1664,1706,1712,
1713,1982,2065,2137,2317,2535,2671
FTP 114,133,141,163,171,172,238,242,250,256,264,269,281,
291,354,385,412,414,418,430,438,448,463,468,478,486,
505,506,542,553,624,630,640,691,765,913,959,1635,
1785,2228,2577
HTML 1866
HTTP 2068,2109
ICMP 777,792,1016,1018,1256,1788,2521
IGMP 966,988,1054,1112,1301,1458,1469,1768,2236,2357,2365,
2502,2588
IMAP SeeSMTP,MIME,POP,IMAP
IP 760,781,791,815, 1025, 1063, 1071,1141, 1190, 1191,
1624,2113
10631064 APPENDIX GRFCs
TableG.!RFCsfor eachprotocol (continued)
Protocol RFC
IPv6 1365,1550,1678, 1680,1682,1683,1686,1688,1726,1752,
1826,1883,1884,1886,1887,1955,2080,2373,2452,2463,
2465,2466,2472,2492,2545,2590
MIB SeeSNMP,MIB,SMI
MIME SeeSMTP,MIME,POP,IMAP
Multicast Routing 1584,1585,2117,2362
NAT 1361,2663,2694
OSPF 1131,1245,1246,1247,1370,1583, 1584, 1585, 1586,1587,
2178,2328,2329,2370
POP SeeSMTP,MIME,POP,IMAP
RARP SeeARPandRARP
RIP 1131,1245,1246,1247,1370,1583, 1584,1585, 1586, 1587,
1722,1723,2082,2453
SCTP 2960,3257,3284,3285,3286,3309,3436,3554,3708,3758
SMI SeeSNMP,MIB,SMI
SMTP,MIME,POP, 196,221,224,278,524,539,753,772,780,806,821,934,974,
IMAP 1047, 1081, 1082, 1225, 1460,1496,1426, 1427, 1652,1653,
1711,1725,1734,1740,1741,1767,1869,1870,2045,2046,
2047,2048,2177,2180,2192,2193,2221,2342,2359,2449,
2683,2503
SNMP,MIB,SMI 1065,1067,1098, 1155, 1157,1212,1213,1229,1231,1243,
1284,1351,1352,1354,1389, 1398, 1414,1441,1442,1443,
1444, 1445, 1446,1447,1448,1449,1450,1451,1452, 1461,
1472,1474,1537,1623,1643, 1650, 1657, 1665, 1666, 1696,
1697,1724,1742, 1743, 1748,1749
TCP 675,700,721,761,793,879,896,1078,1106,1110,1144,1145,
1146,1263,1323,1337,1379,1644,1693,1901,1905,2001,
2018,2488,2580
TELNET 137,340,393,426,435,452,466,495,513,529,562,595,596,
599,669,679,701,702,703,728,764,782,818,854,855,1184,
1205,2355
TFfP 1350,1782,1783,1784
UDP 768
VPN 2547,2637,2685
WWW 1614,1630,1737,1738APPENDIXH
UDPandTCPPorts
TableH.Iliststhecommon well-known portsorderedbyportnumber.
TableH.IPortsbyportnumber
PortNumber UDPffCP Protocol
7 TCP ECHO
13 UDPrrCp DAYTIME
19 UDPITCP CHARACTER GENERATOR
20 TCP FTP-DATA
21 TCP FTP-CONTROL
23 TCP TELNET
25 TCP SMTP
37 UDPrrCp TIME
67 UDP BOOTP-SERVER
68 UDP BOOTP-CLIENT
69 UDP TFTP
70 TCP GOPHER
79 TCP FINGER
80 TCP HTTP
109 TCP POP-2
110 TCP POP-3
111 UOPITCP RPC
161 UOP SNMP
162 UOP SNMP-TRAP
179 TCP BGP
520 UOP RIP
10651066 APPENDIX HUDPANDTCPPORTS
TableH.2liststheports,orderedalphabetically byprotocol.
TableH.2Portnumbers byprotocol
Protocol UDPITCP PortNumber
BGP TCP 179
BOOTP-SERVER UDP 67
BOOTP-CLIENT UDP 68
CHARACTER GENERATOR UDP/TCP 19
DAYTIME UDP/TCP 13
ECHO TCP 7
FINGER TCP 79
FTP-CONTROL TCP 21
FTP-DATA TCP 20
GOPHER TCP 70
HTTP TCP 80
POP-2 TCP 109
POP-3 TCP 110
RIP UDP 520
RPC UDP/TCP 111
SMTP TCP 25
SNMP UDP 161
SNMP-TRAP UDP 162
TELNET TCP 23
TFTP UDP 69
TIME UDP/TCP 37Acronyms
AAL application adaptation layer BER BasicEncoding Rules
ABM asynchronous balanced mode BOP BorderGateway Protocol
ACK acknowledgment BNC Bayone-Neill-Concelman
ACL asynchronous connectionless link BOOTP Bootstrap Protocol
AOSL asymmetric digitalsubscriber line BSS basicserviceset
AES Advanced Encryption Standard BUS broadcast/unknown server
AH Authentication Header CA Certification Authority
AM amplitude modulation CATV community antennaTV
AMI alternate markinversion CBC cipherblockchaining mode
AMPS Advanced MobilePhoneSystem CBR constantbitrate
ANSI American NationalStandards Institute CBT Core-Based Tree
AP accesspoint CCITT Consultative Committee for
ARP AddressResolution Protocol International Telegraphy and
ARPA Advanced Research ProjectsAgencyTelephony
ARPANET Advanced Research ProjectsAgencyCCK complementary codekeying
Network COMA codedivisionmultipleaccess
ARQ automatic repeatrequest CFB cipherfeedback mode
AS authentication server COl Common Gateway Interface
AS autonomous system CHAP Challenge Handshake Authentication
ASCII American Standard CodeforProtocol
Information Interchange CrOR Classless InterDomain Routing
ASK amplitude shiftkeying CrR committed information rate
ASN.l Abstract SyntaxNotation 1 CLEC competitive localexchange carrier
ATM Asynchronous TransferMode CMTS cablemodemtransmission system
AUr attachment unitinterface CRC cyclicredundancy check
B8ZS bipolarwith8-zerosubstitution CS convergence sublayer
Be committed burstsize CSM cipherstreammode
Be excessburstsize CSMA carriersensemultipleaccess
BECN backward explicitcongestion CSMAICA carriersensemUltipleaccesswith
notification collision avoidance
10671068 ACRONYMS
CSMA/CD carriersensemultipleaccesswith FSK frequency shiftkeying
collision detectionFTP FileTransfer Protocol
D-AMPS digitalAMPSGPS GlobalPositioning System
DARPA DefenseAdvanced Research Projects GSM GlobalSystemforMobile
Agency Communication
dB decibelHDLC High-level DataLinkControl
DC directcurrent HDSL highbitratedigitalsubscriber line
DCF distributed coordination function HFC hybrid-fiber-coaxial network
OCT discretecosinetransform HMAC hashed-message authentication code
DONS Dynamic DomainNameSystem HR-DSSS HighRateDirectSequence Spread
DDS digitaldataservice Spectrum
DE discardeligibility HTML HyperText MarkupLanguage
DEMUX demultiplexer HTTP HyperText TransferProtocol
DES dataencryption standard Hz hertz
DHCP Dynamic HostConfiguration Protocol lAB InternetArchitecture Board
DIFS distributed interframe space lANA InternetAssigned Numbers Authority
DLCI datalinkconnection identifier ICANN InternetCorporation forAssigned
DMT discretemultitone techniqueNamesandNumbers
DNS DomainNameSystemICMP InternetControlMessage Protocol
DOCSIS DataOverCableSystemInterfaceICMPv6 InternetControlMessage Protocol,
Specificationsversion6
DS digitalsignalIEEE InstituteofElectrical andElectronics
EngineersOS Differentiated ServicesIESG InternetEngineering SteeringGroupDSL digitalsubscriber lineIETF InternetEngineering TaskForceDSLAM digitalsubscriber lineaccessIFS interframe spacemultiplexer
DSSS directsequence spreadspectrumIGMP InternetGroupManagement Protocol
DVMRP Distance VectorMulticast RoutingIKE InternetKeyExchange
ProtocolILEC incumbent localexchange carrier
DWDM densewave-division multiplexingIMAP4 InternetMailAccessProtocol, version4
EIA Electronics Industries AssociationINTERNIC InternetNetwork Information Center
ESP Encapsulating SecurityPayloadIntServ Integrated Services
ESS Extended ServiceSetIP InternetProtocol
FCC FederalCommunications CommissionIPCP Internetwork ProtocolControlProtocol
FDM frequency-division multiplexingIPng InternetProtocol nextgeneration
FDMA frequency divisionmultipleaccessIPSec IPSecurity
IPv4 InternetProtocol version4FDMA frequency-division multipleaccessIPv6 InternetProtocol, version6FECN forwardexplicitcongestion notificationIRTF InternetResearch TaskForce
FHSS frequency hoppingspreadspectrumIS-95 InterimStandard 95
FIFO first-in,first-outISAKMP InternetSecurityAssociation andKey
FM frequency modulation Management Protocol
FQDN fullyqualified domainnameISO International Organization of
FRAD FrameRelayassembler/disassembler StandardizationACRONYMS 1069
ISOC InternetSociety MTU maximum transferunit
ISP Internetserviceprovider MUX multiplexer
ISUP ISDNuserport NAP networkaccesspoint
ITM-2000 InternetMobileCommunication NAT networkaddresstranslation
ITU-T International Telecommunications NAV networkallocation vector
Union-Telecommunication NCP Network ControlProtocol
Standardization SectorNIC networkinterface card
IXC interexchange carrierNNI network-to-network interface
IPEG JointPhotographic ExpertsGroupNRM nonnalresponse mode
KOC keydistribution centerNRZ nonreturn tozero
L2CAP LogicalLinkControlandAdaptationNRZ-I nonreturn tozero,invertProtocolNRZ-L nonreturn tozero,levelLAN localareanetworkNVT Network VirtualTenninalLANE LANemulationOC opticalcarrierLANE localareanetworkemulationOFB outputfeedbackLATA localaccessandtransport areaOFOM orthogonal frequency divisionLCP LinkControlProtocolmultiplexing
LEC LANemulation clientOSI OpenSystemsInterconnection
LEC localexchange carrierOSPF openshortestpathfirst
LEO lowearthorbitPAM pulseamplitude modulation
LES LANemulation serverPAP Password Authentication Protocol
LLC logicallinkcontrolPCF pointcoordination function
LMI localmanagement infonnationPCM pulsecodemodulation
LSA linkstateadvertisementPCS personal communication system
LSP linkstatepacketPGP PrettyGoodPrivacy
MA multipleaccessPHB perhopbehavior
MAA messageaccessagentPIM ProtocolIndependent Multicast
MAC mediumaccesscontrolsublayerPIM-OM ProtocolIndependent Multicast,
MAC message authentication code DenseMode
MAN metropolitan areanetwork PIM-SM ProtocolIndependent Multicast,
MBONE multicast backbone SparseMode
MOC modification detection mode PKI publickeyinfrastructure
MEO mediumEarthorbit PM phasemodulation
MIB Management Infonnation Base PN pseudorandom noise
MIl mediumindependent interface POP pointofpresence
MIME Multipurpose InternetMailExtension POP3 PostOfficeProtocol, version3
MLT-3 multiline transmission, 3-level POTS plainoldtelephone system
MOSPF Multicast OpenShortestPathFirst PPP Point-to-Point Protocol
MPEG motionpictureexpertsgroup PQON partiallyqualified domainname
MSC mobileswitching center PSK phaseshiftkeying
MTA mailtransferagent PVC permanent virtualcircuit
MTA message transferagent QAM quadrature amplitude modulation
MTSO mobiletelephone switching office QoS qualityofservice1070 ACRONYMS
RADSL rateadaptive asymmetrical digital STM synchronous transport module
subscriber line STP shielded twisted-pair
RARP ReverseAddressResolution Protocol STP signaltransport port
RFC RequestforComment STS synchronous transport signal
RIP RoutingInformation Protocol SVC switched virtualcircuit
ROM read-only memory TCAP transaction capabilities application port
RPB reversepathbroadcasting TCP Transmission ControlProtocol
RPF reversepathforwarding TCP/IP Transmission ControlProtocol!
RPM reversepathmulticasting Internetworking Protocol
RSA Rivest,Shamir,Adleman TDD-TDMA timedivisionduplexing TDMA
RSVP Resource Reservation Protocol TDM time-division multiplexing
RTCP Real-time Transport ControlProtocol TDMA timedivisionmultipleaccess
RTP Real-time Transport Protocol TELNET Terminal Network
RTSP Real-TimeStreaming Protocol TFTP TrivialFileTransfer Protocol
RTT round-trip time TGS ticket-granting server
RZ returntozero TLS Transport LayerSecurity
SA SecurityAssociation TOS typeofservice
SADB securityassociation database TSI time-slot interchange
SAR segmentation andreassembly TTL timetolive
SCCP signaling connection controlpoint TUP telephone userport
seo synchronous connection oriented UA useragent
SCP servercontrolpoint UBR unspecified bitrate
SCTP StreamControlTransmission Protocol UDP UserDatagram Protocol
SDH Synchronous DigitalHierarchy UNI usernetworkinterface
SDSL symmetric digitalsubscriber line UNI user-to-network interface
SEAL simpleandefficientadaptation layer URL Uniform Resource Locator
SHA-l SecureHashAlgorithm 1 UTP unshielded twisted-pair
SIFS shortinterframe space VBR variablebitrate
SIP SessionInitiation Protocol ve virtualcircuit
SMI Structure ofManagement Information VDSL veryhighbitratedigitalsubscriber
SMTP SimpleMailTransfer Protocol line
SNMP SimpleNetwork Management Protocol VLAN virtuallocalareanetwork
SNR signal-to-noise ratio VOFR VoiceOverFrameRelay
SONET Synchronous OpticalNetwork VPN virtualprivatenetwork
SP signalpoint VT virtualtributary
SPE synchronous payloadenvelope WAN wideareanetwork
SPI securityparameter index WATS wideareatelephone service
SS7 Signaling SystemSeven WDM wave-division multiplexing
SSL SecureSocketLayer WWW WorldWideWeb1000Base-CX Thetwo-wire STPimplementation ofGigabitEthernet.
1000Base-LX Thetwo-wire fiberimplementation ofGigabitEthernet usinglong-wave laser.
1000Base-SX Thetwo-wire fiberimplementation ofGigabitEthernet usingshort-wave laser.
1000Base- TThefour-wire UTPimplementation ofGigabitEthernet.
100Base-FX Thetwo-wire fiberimplementation ofFastEthernet.
100Base- T4Thefour-wire UTPimplementation ofFastEthernet.
IOOBase-TXThetwo-wire UTPimplementation ofFastEthernet.
IOBase2 Thethincoaxialcableimplementation ofStandard Ethernet.
IOBase5 Thethickcoaxialcableimplementation ofStandard Ethernet.
10Base-F Thefiberimplementation ofStandard Ethernet.
10Base-T Thetwisted-pair implementation ofStandard Ethernet.
10GBase-E Theextended implementation ofTen-Gigabit Ethernet.
10GBase-L Thefiberimplementation ofTen-Gigabit Ethernet usinglong-wave laser.
10GBase-S Thefiberimplementation ofTen-Gigabit Ethernet usingshort-wave laser.
I-persistent strategy ACSMApersistence strategyinwhichastationsendsaframeimme­
diatelyifthelineisidle.
2BIQencoding Alineencoding technique inwhicheachpulserepresents 2bits.
4B/5Bencoding Ablockcodingtechnique inwhich4bitsareencodedintoa5-bitcode.
8B/10Bencoding Ablockcodingtechnique inwhich8bitsareencodedintoalO-bitcode.
8B6Tencoding Athree-level lineencoding schemethatencodesablockof8bitsintoasig­
nalof6ternarypulses.
4-dimensional, 5-levelpulseamplitude modulation (4D-PAM5) Anencoding
schemeusedby1OOOBase- T.
56Kmodem Amodemtechnology usingtwodifferent datarates:oneforuploading andone
fordownloading fromtheInternet.
10711072 GLOSSARY
A
Abstract SyntaxNotation 1(ASN.l) Astandard forrepresenting simpleandstructured
data.
accesspoint(AP)AcentralbasestationinaBSS.
acknowledgment (ACK) Aresponse sentbythereceivertoindicatethesuccessful receipt
ofdata.
activedocument IntheWorldWideWeb,adocument executed atthelocalsiteusingJava.
adaptive deltamodulation Adeltamodulation technique inwhichthevalueofdelta
changesaccording totheamplitude oftheanalogsignal.
add/drop multiplexer ASONETdevicethatremoves andinsertssignalsinapathwithout
demultiplexing andre-multiplexing.
additive increase Withslowstart,acongestion avoidance strategyinwhichthewindowsize
isincreased byjustonesegment insteadofexponentially.
addressaggregation Amechanism inwhichtheblocksofaddresses forseveralorganizations
areaggregated intoonelargerblock.
Address Resolution Protocol (ARP) InTCPIIP,aprotocol forobtaining thephysical
addressofanodewhentheInternetaddressisknown.
addressspaceThetotalnumberofaddresses available byaprotocol.
ADSLLiteAsplitterless ADSL.Thistechnology allowsanASDLLitemodemtobeplugged
directlyintoatelephone jackandconnected tothecomputer. Thesplittingisdoneatthetelephone
company.
Advanced Encryption Standard (AES) Asecret-key cryptosystem adaptedbyNISTto
replaceDES.
Advanced MobilePhoneSystem(AMPS) ANorthAmerican analogcellularphone
systemusingFDMA.
Advanced Research Projects Agency(ARPA) Thegovernment agencythatfunded
ARPANET.
Advanced Research Projects AgencyNetwork (ARPANET) Thepacket-switching
networkthatwasfundedbyARPA.
ALOHA Theoriginalrandommultiple accessmethodinwhichastationcansendaframeany
timeithasonetosend.
alternate markinversion (AMI) Adigital-to-digital bipolarencoding methodinwhich
theamplitude representing 1alternates between positiveandnegative voltages.
American National Standards Institute (ANSI) Anationalstandards organization that
definesstandards intheUnitedStates.
American Standard CodeforInformation Interchange (ASCII) Acharacter code
developed byANSIthatusedextensively fordatacommunication.
amplitude Thestrengthofasignal,usuallymeasured involts.
amplitude modulation (AM)Ananalog-to-analog conversion methodinwhichthecarrier
signal'samplitude varieswiththeamplitude ofthemodulating signal.
amplitude shiftkeying(ASK) Amodulation methodinwhichtheamplitude ofthecarrier
signalisvariedtorepresent binary0or1.
analogdataDatathatarecontinuous andsmoothandnotlimitedtoaspecificnumberofvalues.GLOSSARY 1073
analogsignal Acontinuous waveform thatchangessmoothly overtime.
analog-to-analog conversion Therepresentation ofanaloginformation byananalog
signal.
analog-to-digital conversion Therepresentation ofanaloginformation byadigitalsignal.
angleofincidence Inoptics,theangleformedbyalightrayapproaching theinterface
between twomediaandthelineperpendicular totheinterface.
anycastaddress Anaddressthatdefinesagroupofcomputers withaddresses thathavethe
samebeginning.
aperiodic signal Asignalthatdoesnotexhibitapatternorrepeating cycle.
applet Acomputer program forcreatinganactiveWebdocument. ItisusuallywritteninJava.
application adaptation layer(AAL) AlayerinATMprotocol thatbreaksuserdatainto
48-bytepayloads.
application layerThefifthlayerintheInternetmodel;provides accesstonetworkresources.
areaAcollection ofnetworks, hosts,androutersallcontained withinanautonomous system.
association Aconnection inSCTP.
asymmetric digitalsubscriber line(ADSL) Acommunication technology inwhichthe
downstream datarateishigherthantheupstream rate.
asynchronous balanced mode(ABM) InHDLC,acommunication modeinwhichall
stationsareequal.
asynchronous connectionless link(ACL) AlinkbetweenaBluetooth masterandslave
inwhichacorrupted payloadisretransmitted.
Asynchronous Transfer Mode(ATM) Awideareaprotocolfeaturing highdatarates
andequal-sized packets(cells);ATMissuitablefortransferring text,audio,andvideodata.
asynchronous transmission Transfer ofdatawithstartandstopbites)andavariabletime
intervalbetweendataunits.
ATMLANALANusingATMtechnology.
ATMlayerAlayerinATMthatprovides routing,trafficmanagement, switching, andmulti­
plexingservices.
attachment unitinterface (AUI) AlOBase5 cablethatperforms thephysicalinterface
functions betweenthestationandthetransceiver.
attenuation Thelossofasignal'senergyduetotheresistance ofthemedium.
audio Recording ortransmitting ofsoundormusic.
authentication Verification ofthesenderofamessage.
Authentication Header(AB)Protocol AprotocoldefinedbyIPSecatthenetworklayer
thatprovidesintegritytoamessagethrough thecreationofadigitalsignature byahashingfunction.
authentication server(AS)TheKDCintheKerberos protocol.
automatic repeatrequest(ARQ) Anerror-control methodinwhichcorrection ismadeby
retransmission ofdata.
autonegotiation AFastEthernet featurethatallowstwodevicestonegotiate themodeor
datarate.
autonomous system(AS)Agroupofnetworks androutersundertheauthority ofasingle
administration.1074 GLOSSARY
B
backward explicitcongestion notification (BECN) AbitintheFrameRelaypacket
thatnotifiesthesenderofcongestion.
band-pass channel Achannelthatcanpassarangeoffrequencies.
bandwidth Thedifference between thehighestandthelowestfrequencies ofacomposite
signal.Italsomeasures theinformation-carrying capacityofalineoranetwork.
bandwidth ondemand Adigitalservicethatallowssubscribers higherspeedsthroughthe
useofmultiplelines.
bandwidth-delay product Ameasureofthenumberofbitsthatcanbesentwhilewaiting
fornewsfrom the receiver.
banyanswitch Amultistage switchwithmicroswitchesateachstagethatroutethepackets
basedontheoutputportrepresented asabinarystring.
Barkersequence Asequence of11bitsusedforspreading.
baseband transmission Transmission ofdigitaloranalogsignalwithoutmodulation using
alow-pass channel.
baseheader InIPv6,themainheaderofthedatagram.
baseline wandering Indecoding adigitalsignal,thereceivercalculates arunningaverage
ofthereceivedsignalpower.Thisaverageiscalledthebaseline. AlongstringofOsorIscan
causeadriftinthebaseline(baseline wandering) andmakeitdifficultforthereceivertodecode
correctly.
BasicEncoding Rule(BER) Astandard thatencodesdatatobetransferred througha
network.
BasicLatin ASCIIcharacter set.
basicserviceset(BSS) ThebuildingblockofawirelessLANasdefinedbytheIEEE
802.11standard.
Batcher-banyan switch Abanyanswitchthatsortsthearrivingpacketsbasedontheir
destination port.
baudrateThenumberofsignalelements transmitted persecond.Asignalelementconsistsof
oneormorebits.
Bayone-Neill-Concelman (BNC)connector Acommon coaxialcableconnector.
bidirectional authentication Anauthentication methodinvolving achallenge anda
response fromsendertoreceiverandviceversa.
bidirectional frame(B-frame) AnMPEGframethatisrelatedtothepreceding and
following I-frameorP-frame.
binaryexponential backup Incontention accessmethods, aretransmission delaystrategy
usedbyasystemtodelayaccess.
binarynotation Representation ofIPaddresses inbinary.
biphase Atypeofpolarencoding wherethesignalchangesatthemiddleofthebitinterval.
Manchester anddifferential Manchester areexamples ofbiphaseencoding.
bipolarencoding Adigital-to-digital encoding methodinwhich0amplitude represents
binary0andpositiveandnegativeamplitudes represent alternate Is.
bipolarwith8-zerosubstitution (B8ZS) Ascrambling technique inwhichastreamof8
zerosarereplaced byapredefined patterntoimprovebitsynchronization.GLOSSARY 1075
bitBinarydigit.Thesmallestunitofdata(0or1).
bitrateThenumberofbitstransmitted persecond.
bitstuffing Inabit-oriented protocol, theprocessofaddinganextrabitinthedatasectionof
aframetopreventasequence ofbitsfromlookinglikeaflag.
bit-oriented protocol Aprotocolinwhichthedataframeisinterpreted asasequence ofbits.
blockcipher Anencryption/decryption algorithm thathasablockofbitsasitsbasicunit.
blockcodeAnerrordetection/correction codeinwhichdataaredividedintounitscalled
datawords. Redundant bitsareaddedtoeachdataword tocreateacodeword.
blockcoding Acodingmethodtoensuresynchronization anddetection oferrors.
blocking Aneventthatoccurswhenaswitched networkisworking atitsfullcapacity and
cannotacceptmoreinput.
Bluetooth AwirelessLANtechnology designed toconnectdevicesofdifferentfunctions such
astelephones andnotebooks inasmallareasuchasaroom.
Bootstrap Protocol (BOOTP) Theprotocol thatprovides configuration information from
atable(file).
BorderGateway Protocol (BGP) Aninterautonomous systemroutingprotocolbasedon
pathvectorrouting.
bridge Anetworkdeviceoperating atthefirsttwolayersoftheInternetmodelwithfiltering
andforwarding capabilities.
broadband transmission Transmission ofsignalsusingmodulation ofahigherfrequency
signal.Thetermimpliesawide-bandwidth datacombined fromdifferent sources.
broadcast address Anaddressthatallowstransmission ofamessagetoallnodesofanetwork.
broadcast/unknown server(BUS) Aserverconnected toanATMswitchthatcanmulticast
andbroadcast franles.
broadcasting Transmission ofamessage toallnodesinanetwork.
browser Anapplication program thatdisplaysaWWWdocument. Abrowserusuallyuses
otherInternetservicestoaccessthedocument.
BSS-transition mobility InawirelessLAN,astationthatcanmovefromoneBSSto
anotherbutisconfined insideoneESS.
bucketbrigadeattack Seeman-in-the middleattack.
bursterrorErrorinadataunitinwhichtwoormorebitshavebeenaltered.
burstydataDatawithvaryinginstantaneous transmission rates.
bustopology Anetworktopology inwhichallcomputers areattached toasharedmedium.
bytestuffing Inabyte-oriented protocol, theprocessofaddinganextrabyteinthedatasection
ofaframetopreventabytefromlookinglikeaflag.
byte-oriented protocol Aprotocol inwhichthedatasectionoftheframeisinterpreted asa
sequence ofbytes(characters).
c
cablemodem Atechnology inwhichtheTVcableprovides Internetaccess.
cablemodemtransmission system(CMTS) Adeviceinstalled inside the distribution
hubthatreceivesdatafromtheInternetandpassesthemtothecombiner.1076 GLOSSARY
cableTVnetwork Asystemusingcoaxialorfiberopticcablethatbringsmultiplechannels
ofvideoprograms intohomes.
caching Thestoringofinformation inasmall,fastmemory.
Caesarcipher AshiftcipherusedbyJuliusCaesarwiththekeyvalueof3.
carrierextension Atechnique inGigabitEthernetthatincreases theminimum lengthofthe
frametoachieveahighermaximum cablelength.
carriersensemultiple access(CSMA) Acontention accessmethodinwhicheachstation
listenstothelinebeforetransmitting data.
carriersensemultiple accesswithcollision avoidance (CSMA/CA) Anaccess
methodinwhichcollision isavoided.
carriersensemultiple accesswithcollision detection (CSMA/CD) Anaccessmethod
inwhichstationstransmitwhenever thetransmission mediumisavailable andretransmit when
collisionoccurs.
carriersignal Ahighfrequency signalusedfordigital-to-analog oranalog-to-analog modu­
lation.Oneofthecharacteristics ofthecarriersignal(amplitude, frequency, orphase)ischanged
according tothemodulating data.
cellAsmall,fixed-size dataunit;also,incellulartelephony, ageographical areaservedbya
celloffice.
cellnetwork Anetworkusingthecellasitsbasicdataunit.
cellular telephony Awirelesscommunication technique inwhichanareaisdividedinto
cells.Acellisservedbyatransmitter.
Certification Authority (CA)Anagencysuchasafederalorstateorganization thatbinds
apublickeytoanentityandissuesacertificate.
Challenge Handshake Authentication Protocol (CHAP) InPPp,athree-way handshaking
protocolusedforauthentication.
channel Acommunications pathway.
channelization Amultipleaccessmethodinwhichtheavailable bandwidth ofalinkis
sharedintime.
character-oriented protocol Seebyte-oriented protocol.
checksum Avalueusedforerrordetection.Itisformedbyaddingdataunitsusingone's
complement arithmetic andthencomplementing theresult.
chipInCDMA,anumberinacodethatisassignedtoastation.
chokepointApacketsentbyaroutertothesourcetoinformitofcongestion.
chunk Aunitoftransmission inSCTP.
cipher Anencryption/decryption algorithm.
cipherblockchaining (CBC)modeADESandtripleDESoperation modeinwhichthe
encryption (ordecryption) ofablockdependsonallpreviousblocks.
cipherfeedback mode(CFB) ADESandtripleDESoperation modeinwhichdataissent
andreceivedIbitatatime,witheachbitindependent ofthepreviousbits.
cipherstreammode(CSM) ADESandtripleDESoperation modeinwhichdataissent
andreceived1byteatatime.
ciphersuiteAlistofpossibleciphers.GLOSSARY 1077
ciphertext Theencrypted data.
circuitswitching Aswitching technology thatestablishes anelectrical connection between
stationsusingadedicated path.
cladding Glassorplasticsurrounding thecoreofanopticalfiber;theopticaldensityofthe
claddingmustbelessthanthatofthecore.
classfuladdressing AnIPv4addressing mechanism inwhichtheIPaddressspaceisdivided
into5classes:A,B, C,D,andE.Eachclassoccupies somepartofthewholeaddressspace.
classless addressing Anaddressing mechanism inwhichtheIPaddressspaceisnotdivided
intoclasses.
Classless InterDomain Routing (CIDR) Atechnique toreducethenumberofrouting
tableentrieswhensupemetting isused.
clientprocess Arunningapplication programonalocalsitethatrequestsservicefroma
runningapplication programonaremotesite.
client-server model Themodelofinteraction betweentwoapplication programs inwhicha
programatoneend(client)requestsaservicefromaprogramattheotherend(server).
closed-loop congestion control Amethodtoalleviatecongestion afterithappens.
coaxialcableAtransmission mediumconsisting ofaconducting core,insulating material,
andasecondconducting sheath.
codedivision multiple access(CDMA) Amultipleaccessmethodinwhichonechannel
carriesalltransmissions simultaneously.
codeword Theencodeddataword.
ColdFusion Adynamicwebtechnology thatallowsthefusionofdataitemscomingfroma
conventional database.
collision Theeventthatoccurswhentwotransmitters sendatthesametimeonachannel
designed foronlyonetransmission atatime;datawillbedestroyed.
collision domain Thelengthofthemediumsubjecttocollision.
committed burstsize(Be)Themaximum numberofbitsinaspecifictimeperiodthata
FrameRelaynetworkmusttransferwithoutdiscarding anyframes.
committed information rate(CIR)Thecommitted burstsizedividedbytime.
common carrier Atransmission facilityavailable tothepublicandsubjecttopublicutility
regulation.
Common Gateway Interface (CGI) Astandardforcommunication betweenHTTPservers
andexecutable programs. CGIisusedincreatingdynamicdocuments.
community antenna TV(CATV) Acablenetworkservicethatbroadcasts videosignalsto
locations withpoorornoreception.
compatible address AnIPv6addressconsisting of96bitsofzerofollowed by32bitsof
IPv4.
competitive localexchange carrier(CLEC) Atelephone company thatcannotprovide
maintelephone services; instead,otherservicessuchasmobiletelephone serviceandtollcalls
insideaLATAareprovided.
complementary codekeying(CCK) AnHR-DSSS encoding methodthatencodesfouror
eightbitsintoonesymboL
composite signal Asignalcomposed ofmorethanonesinewave.1078 GLOSSARY
congestion Excessive network orinternetwork trafficcausingageneraldegradation ofservice.
connecting device Atoolthatconnects computers ornetworks.
connection establishment Thepreliminary setupnecessary foralogicalconnection priorto
actualdatatransfer.
connectionless service Aservicefordatatransferwithoutconnection establishment or
terminati on.
constant bitrate(CBR) ThedatarateofanATMserviceclassthatisdesigned forcustomers
requiring real-time audioorvideoservices.
constellation diagram Agraphical representation ofthephaseandamplitude ofdifferent bit
combinations indigital-to-analog modulation.
Consultative Committee forInternational Telegraphy andTelephony (CCITT) An
international standards groupnowknownasthelTD-T.
contention Anaccessmethodinwhichtwoormoredevicestrytotransmitatthesametime
onthesamechannel.
controlled access Amultiple accessmethodinwhichthestationsconsultoneanotherto
determine whohastherighttosend.
convergence sublayer (CS)InATMprotocol, theupperAALsublayer thataddsaheader
oratrailertotheuserdata.
cookie Astringofcharacters thatholdssomeinformation abouttheclientandmustbe
returned tothe server untouched.
coreTheglassorplasticcenterofanopticalfiber.
Core-Based Tree(CBT) Inmulticasting, agroup-shared protocol thatusesacenterrouter
astherootofthetree.
countrydomain Asubdomain intheDomainNameSystemthatusestwocharacters asthe
lastsuffix.
crossbar switch Aswitchconsisting ofalatticeofhorizontal andverticalpaths.Atthe
intersection ofeachhorizontal andverticalpath,thereisacrosspoint thatcanconnecttheinput
totheoutput.
crosspoint Thejunctionofaninputandanoutputonacrossbar switch.
crosstalk Thenoiseonalinecausedbysignalstraveling alonganotherline.
cryptography Thescienceandartoftransforming messages tomakethemsecureand
immunetoattacks.
cycliccodeAlinearcodeinwhichthecyclicshifting(rotation) ofeachcodeword creates
anothercodeword.
cyclicredundancy check(CRC) Ahighlyaccurateerror-detection methodbasedon
interpreting apatternofbitsasapolynomial.
D
dataelement Thesmallestentitythatcanrepresent apieceofinformation. Abit.
dataencryption standard (DES) TheU.S.government standard encryption methodfor
nonmilitary andnonclassified use.
datalinkconnection identifier (DLCI) Anumberthatidentifies thevirtualcircuitin
FrameRelay.GLOSSARY 1079
datalinkcontrol Theresponsibilities ofthedatalinklayer:flowcontrolanderrorcontrol.
datalinklayerThesecondlayerintheInternetmodel.Itisresponsible fornode-to-node delivery.
DataOverCableSystemInterface Specifications (DOCSIS) Astandard fordata
transmission overanHFCnetwork.
datarateThenumberofdataelements sentinonesecond.
datatransfer phase Theintermediate phaseincircuit-switched orvirtual-circuit networkin
whichdatatransfertakesplace.
datatransparency Theabilitytosendanybitpatternasdatawithoutitbeingmistaken for
controlbits.
datagram Inpacketswitching, anindependent dataunit.
datagram network Apacket-switched networkinwhichpacketsareindependent fromeach
other.
dataword Thesmallestblockofdatainblockcoding.
defactostandard Aprotocol thathasnotbeenapproved byanorganized bodybutadopted
asastandard throughwidespread use.
dejurestandard Aprotocol thathasbeenlegislated byanofficially recognized body.
deadlock Asituation inwhichataskcannotproceedbecauseitiswaitingforaneventhatwill
neveroccur.
decibel(dB)Ameasure oftherelativestrengthoftwosignalpoints.
decryption Recovery oftheoriginalmessage fromtheencrypted data.
defaultmaskThemaskforanetworkthatisnotsubnetted.
defaultrouting Aroutingmethodinwhicharouterisassigned toreceiveallpacketswithno
matchintheroutingtable.
DefenseAdvanced Research Projects Agency(DARPA) Agovernment organization,
which,underthenameofARPAfundedARPANET andtheInternet.
deltamodulation Ananalog-to-digital conversion technique inwhichthevalueofthedigital
signalisbasedonthedifference between thecurrentandtheprevious samplevalues.
demodulation Theprocessofseparating thecarriersignalfromtheinformation-bearing signal.
demultiplexer (DEMUX) Adevicethatseparates amultiplexed signalintoitsoriginal
components.
denialofserviceattack Aformofattackinwhichthesiteisfloodedwithsomanyphony
requeststhatiseventually forcedtodenyservice.
densewave-division multiplexing (DWDM) AWDMmethodthatcanmultiplex avery
largenumberofchannels byspacingchannels closertogether.
differential Manchester encoding Adigital-to-digital polarencoding methodthatfeaturesa
transition atthemiddleofthebitintervalaswellasaninversion atthebeginning ofeach1bit.
Differentiated Services (DSorDiffserv) Aclass-based QoSmodeldesigned forIF.
Diffie-Hellman protocol Akeymanagement protocol thatprovides aone-time sessionkey
fortwoparties.
digest Acondensed versionofadocument.
digitalAMPS(D-AMPS) Asecond-generation cellularphonesystemthatisadigitalversion
ofAMPS.1080 GLOSSARY
digitaldataDatarepresented bydiscretevaluesorconditions.
digitaldataservice(DDS) Adigitalversionofananalogleasedlinewitharateof64Kbps.
digitalsignal Adiscretesignalwithalimitednumberofvalues.
digitalsignal(DS)service Atelephone company servicefeaturing ahierarchy ofdigital
signals.
digitalsignature Amethodtoauthenticate thesenderofamessage.
digitalsubscriber line(DSL) Atechnology usingexistingtelecommunication networks to
accomplish high-speed deliveryofdata,voice,video,andmultimedia.
digitalsubscriber lineaccessmultiplexer (DSLAM) Atelephone company sitedevice
thatfunctions likeanADSLmodem.
digital-to-analog conversion Therepresentation ofdigitalinformation byananalogsignal.
digital-to-digital conversion Therepresentation ofdigitalinformation byadigitalsignal.
digitization Conversion ofanaloginformation todigitalinformation.
Dijkstra's algorithm Inlinkstaterouting,analgorithm thatfindstheshortestpathtoother
routers.
directcurrent (DC)Azero-frequency signalwithaconstantamplitude.
directdelivery Adeliveryinwhichthefinaldestination ofthepacketisahostconnected to·c.
thesamephysicalnetworkasthesender.
directsequence spreadspectrum (DSSS) Awirelesstransmission methodinwhicheach
bittobesentbythesenderisreplacedbyasequence ofbitscalledachipcode.
discard eligibility (DE)Abitthatidentifies apacketthatcanbediscarded ifthereis
congestion inthenetwork.
discrete cosinetransform (DCT) AJPEGphaseinwhichatransformation changesthe
64valuessothattherelativerelationships betweenpixelsarekeptbuttheredundancies arerevealed.
discrete multitone technique (DMT)Amodulation methodcombining elements ofQAM
andFDM.
Distance VectorMulticast Routing Protocol (DVMRP) Aprotocolbasedondistance
vectorroutingthathandlesmulticast routinginconjunction withIGMP.
distance vectorrouting Aroutingmethodinwhicheachroutersendsitsneighbors alistof
networks itcanreachandthedistancetothatnetwork.
distortion Anychangeinasignalduetonoise,attenuation, orotherinfluences.
distributed coordination function (DCF) ThebasicaccessmethodinwirelessLANs;
stationscontendwitheachothertogetaccesstothechannel.
distributed database Information storedinmanylocations.
distributed interframe space(DIFS) InwirelessLANs,aperiodoftimethatastation
waitsbeforesendingacontrolframe.
distributed processing Astrategyinwhichservicesprovided forthenetworkresideat
multiplesites.
DNSserver Acomputer thatholdsinformation aboutthenamespace.
domainnameIntheDNS,asequence oflabelsseparated bydots.
domainnamespaceAstructure fororganizing thenamespaceinwhichthenamesare
definedinaninverted-tree structure withtherootatthetop.GLOSSARY 1081
DomainNameSystem(DNS) ATCP/IPapplication servicethatconvertsuser-friendly
namestoIPaddresses.
dotted-decimal notation AnotationdevisedtomaketheIPaddresseasiertoread;each
byteisconverted toitsdecimalequivalent and then setofffromitsneighbor byadecimal.
downlink Transmission fromasatellitetoanearthstation.
downloading Retrieving afileOrdatafromaremotesite.
dynamic document A Webdocument createdbyrunningaCOlprogram attheserver
site.
Dynamic DomainNameSystem(DDNS) AmethodtoupdatetheDNSmasterfile
dynamically.
Dynamic HostConfiguration Protocol (DHCP) Anextension toBOOTPthatdynamically
assignsconfiguration information.
dynamic mapping Atechnique inwhichaprotocolisusedforaddressresolution.
dynamic routing Routinginwhichtheroutingtableentriesareupdatedautomatically bythe
routingprotocol.
E
ElinesTheEuropean equivalent ofTlines.
electromagnetic spectrum Thefrequency rangeoccupied byelectromagnetic energy.
electronic codeblock(ECB)modeADESandtripleDESoperation methodinwhicha
longmessage isdividedinto64-bitblocksbeforebeingencrypted separately.
Electronics Industries Association (EIA) Anorganization thatpromotes electronics
manufacturing concerns. Ithasdeveloped interface standards suchasEIA-232, EIA-449, and
EIA-530.
Encapsulating Security Payload (ESP) AprotocoldefinedbyIPSecthatprovides privacy
aswellasacombination ofintegrity andmessage authentication.
encapsulation Thetechnique inwhichadataunitfromoneprotocolisplacedwithinthedata
fieldportionofthedataunitofanotherprotocol.
encryption Converting amessage intoanunintelligible formthatisunreadable unless
decrypted.
endofficeAswitching officethatistheterminus forthelocalloops.
endsystem AsenderOrreceiverofdata.
ephemeral portnumber Aportnumberusedbytheclient.
errorcontrol Thehandling oferrorsindatatransmission.
Ethernet AlocalareanetworkusingtheCSMAlCD accessmethod.
excessburstsize(Be)InFrameRelay,themaximum numberofbitsinexcessofBethatthe
usercansendduringapredefined periodoftime.
Extended ServiceSet(ESS) AwirelessLANservicecomposed oftwoormoreBSSswith
APsasdefinedbytheIEEE802.11standard.
exteriorrouting Routingbetweenautonomous systems.
extranet AprivatenetworkthatusestheTCP/IPprotocol suitethatallowsauthorized access
fromoutsideusers.1082 GLOSSARY
F
FastEthernet Ethernetwithadatarateof100Mbps.
fastretransmission Retransmission ofasegmentintheTCPprotocolwhenthreeacknowledg­
mentshavebeenreceivedthatimplythelossorcorruption ofthatsegment.
FederalCommunications Commission (FCC) Agovernment agencythatregulates
radio,television, andtelecommunications.
fiber-optic cableAhigh-bandwidth transmission mediumthatcarriesdatasignalsinthe
formofpulsesoflight.Itconsistsofathincylinderofglassorplastic,calledthecore,surrounded
byaconcentric layerofglassorplasticcalledthecladding.
FileTransfer Protocol (FTP) InTCPIIP,anapplication layerprotocolthattransfers files
betweentwosites.
filtering Aprocessinwhichabridgemakesforwarding decisions.
finitestatemachine Amachinethatgoesthroughalimitednumberofstates.
firewall Adevice(usuallyarouter)installedbetweentheinternalnetworkofanorganization
andtherestoftheInternettoprovidesecurity.
first-in,first-out (FIFO)queue Aqueueinwhichthefirstiteministhefirstitemout.
flagAbitpatternoracharacter addedtothebeginning andtheendofaframetoseparatethe
frames.
flatnamespaceAnamespaceinwhichthereisnohierarchical structure.
flooding Saturation ofanetworkwithamessage.
flowcontrol Atechnique tocontroltherateofflowofframes(packetsormessages).
footprint AnareaonEarththatiscoveredbyasatelliteataspecifictime.
forwarderrorcorrection Correction oferrorsatthereceiver.
forward explicitcongestion notification (FECN) AbitintheFrameRelaypacketthat
notifiesthedestination ofcongestion.
forwarding Placingthepacketinitsroutetoitsdestination.
Fourieranalysis Themathematical technique usedtoobtainthefrequency spectrum ofan
aperiodic signalifthetime-domain representation isgiven.
fragmentation Thedivisionofapacketintosmallerunitstoaccommodate aprotocol's MTU.
frame Agroupofbitsrepresenting ablockofdata.
framebursting Atechnique inCSMAlCD GigabitEthernet inwhichmultipleframesare
logically connected toeachothertoresemble alongerframe.
FrameRelay Apacket-switching specification definedforthefirsttwolayersoftheInternet
model.Thereisnonetworklayer.Errorchecking isdoneonend-to-end basisinsteadofon
eachlink.
FrameRelayassembler/disassembler (FRAD) AdeviceusedinFrameRelaytohandle
framescomingfromotherprotocols.
frequency Thenumberofcyclespersecondofaperiodicsignal.
frequency divisionmultiple access(FDMA) Amultipleaccessmethodinwhichthe
bandwidth isdividedintochannels.
frequency hopping spreadspectrum (FHSS) Awirelesstransmission methodinwhich
thesendertransmits atonecarrierfrequency forashortperiodoftime,thenhopstoanotherGLOSSARY 1083
carrierfrequency forthesameamountoftime,hopsagainforthesameamountoftime,andso
on.AfterNhops, the cycleisrepeated.
frequency modulation (FM)Ananalog-to-analog modulation methodinwhichthecarrier
signal'sfrequency varieswiththeamplitude ofthemodulating signal.
frequency shiftkeying(FSK) Adigital-to-analog encoding methodinwhichthefrequency
ofthecarriersignalisvariedtorepresent binary0or1.
frequency-division multiple access(FDMA) Anaccessmethodtechnique inwhich
multiple sourcesuseassigned bandwidth inadatacommunication band.
frequency-division multiplexing (FDM) Thecombining ofanalogsignalsintoasingle
signal.
frequency-domain plotAgraphical representation ofasignal'sfrequency components.
full-duplex mode Atransmission modeinwhichbothpartiescancommunicate
simultaneously.
full-duplex switched Ethernet Ethernet inwhicheachstation,initsownseparatecollision
domain,canbothsendandreceive.
fullyqualified domainname (FQDN) Adomainnameconsisting oflabelsbeginning
withthehostandgoingbackthrougheachleveltotherootnode.
fundamental frequency Thefrequency ofthedominant sinewaveofacomposite signal.
G
gatekeeper IntheH.323standard, aserverontheLANthatplaystheroleoftheregistrar
server.
gateway Adeviceusedtoconnecttwoseparatenetworks thatusedifferent communication
protocols.
genericdomain Asubdomain inthedomainnamesystemthatusesgenericsuffixes.
geographical routing Aroutingtechnique inwhichtheentireaddressspaceisdividedinto
blocksbasedonphysical landmasses.
GigabitEthernet Ethernet witha1000Mbpsdatarate.
GlobalPositioning System(GPS) AnMEOpublicsatellitesystemconsisting of24satellites
andusedforlandandseanavigation. GPSisnotusedforcommunications.
GlobalSystemforMobileCommunication (GSM) Asecond-generation cellular
phonesystemusedinEurope.
Globalstar AnLEOsatellitesystemwith48satellites insixpolarorbitswitheachorbithosting
eightsatellites.
Go-Back-N ARQAnerror-control methodinwhichtheframeinerrorandallfollowing
framesmustberetransmitted.
grafting Resumption ofmulticast messages.
groundpropagation Propagation ofradiowavestlU"oughthelowestportionoftheatmosphere
(hugging theearth).
group-shared treeAmulticast routingfeatureinwhicheachgroupinthesystemsharesthe
sametree.
guardbandAbandwidth separating twosignals.
guidedmedia Transmission mediawithaphysical boundary.1084 GLOSSARY
H
H.323Astandard designed byITUtoallowtelephones onthepublictelephone networktotalk
tocomputers (calledterminals inH.323)connected totheInternet.
half-duplex mode Atransmission modeinwhichcommunication canbetwo-way butnotat
thesametime.
Hamming codeAmethodthataddsredundant bitstoadataunittodetectandcorrectbit
errors.
Hamming distance Thenumberofdifferences between thecorresponding bitsintwo
datawords.
handoff Changing toanewchannelasamobiledevicemovesfromonecelltoanother.
harmonics Components ofadigitalsignal,eachhavingadifferent amplitude, frequency, and
phase.
hashfunction Analgorithm thatcreatesafixed-size digestfromavariable-length message.
hashed-message authentication code(HMAC) AMACbasedonakeylesshashfunction
suchasSHA-l.
header Controlinformation addedtothebeginning ofadatapacket.
hertz(Hz)Unitofmeasurement forfrequency.
hexadecimal colonnotation InIPv6,anaddressnotationconsisting of32hexadecimal
digits,witheveryfourdigitsseparated byacolon.
hierarchical routing Aroutingtechnique inwhichtheentireaddressspaceisdividedinto
levelsbasedonspecificcriteria.
highbitratedigitalsubscriber line(HDSL) AservicesimilartotheTl-linethatcan
operateatlengthsupto3.6km.
HighRateDirectSequence SpreadSpectrum (HR-DSSS) Asignalgeneration
methodsimilartoDSSSexceptfortheencoding method(CCK).
High-level DataLinkControl(HDLC) Abit-oriented datalinkprotocol definedby
theISO.
hopcount Thenumberofnodesalongaroute.Itisameasurement ofdistanceinrouting
algorithms.
hop-to-hop delivery Transmission offramesfromonenodetothenext.
hornantenna Ascoop-shaped antennausedinterrestrial microwave communication.
hostAstationornodeonanetwork.
hostid ThepartofanIPaddressthatidentifies ahost.
host-specific routing AroutingmethodinwhichthefullIPaddressofahostisgiveninthe
routingtable.
hubAcentraldeviceinastartopology thatprovides acommon connection amongthenodes.
Huffman encoding Astatistical compression methodusingvariable-length codestoencode
asetofsymbols.
hybridnetwork AnetworkwithaprivateinternetandaccesstotheglobalInternet.
hybrid-fiber-coaxial (HFC)network Thesecondgeneration ofcablenetworks; uses
fiberopticandcoaxialcable.
hypertext Information containing textthatislinkedtootherdocuments throughpointers.GLOSSARY 1085
HyperText Markup Language (HTML) Thecomputer language forspecifying the
contentsandformatofawebdocument. Itallowsadditional texttoincludecodesthatdefine
fonts,layouts,embedded graphics, andhypertext links.
HyperText Transfer Protocol (HTTP) Anapplication serviceforretrieving aweb
document.
I
inbandsignaling Usingthesamechannelfordataandcontroltransfer.
incumbent localexchange carrier(ILEC) Atelephone company thatprovided services
before1996andistheownerofthecablingsystem.
indirect delivery Adeliveryinwhichthesourceanddestination ofapacketareindifferent
networks.
infrared waveAwavewithafrequency between300GHzand400THz;usuallyusedfor
short-range communications.
innerproduct Anumberproduced bymultiplying twosequences, elementbyelement,and
summing theproducts.
Institute ofElectrical andElectronics Engineers (IEEE) Agroupconsisting of
professional engineers whichhasspecialized societies whosecommittees preparestandards in
members' areasofspecialty.
Integrated Services (IntServ) Aflow-based QoSmodeldesigned forIP.
interactive audio/video Real-time communication withsoundand images.
interautonomous systemrouting protocol Aprotocoltohandletransmissions between
autonomous systems.
interdomain routing Routingamongautonomous systems.
interexchange carrier(IXC) Along-distance company that,priortotheActof1996,
provided communication servicesbetweentwocustomers indifferentLATAs.
interface Theboundary betweentwopiecesofequipment. Italsoreferstomechanical, electrical,
andfunctional characteristics oftheconnection.
interference Anyundesired energythatinterferes withthedesiredsignals.
interframe space(IFS)InwirelessLANs,atimeintervalbetweentwoframestocontrol
accesstothechannel.
InterimStandard 95(IS-95) Oneofthedominant second-generation cellulartelephony
standards inNorthAmerica.
interior routing Routinginsideanautonomous system.
interleaving Inmultiplexing, takingaspecificamountofdata from eachdeviceinaregular
order.
International Organization ofStandardization (ISO)Aworldwide organization that
definesanddevelops standards onavarietyoftopics.
International Telecommunications Union-Telecommunication Standardization
Sector(ITU-T)Astandards organization formerly knownastheCCITT.
internet Acollection ofnetworks connected byinternetworking devicessuchasroutersor
gateways.
Internet AglobalinternetthatusestheTCPIIPprotocolsuite.1086 GLOSSARY
Internet address A32-bitorl28-bitnetwork-layer addressusedtouniquely defineahoston
aninternetusingtheTCP/IPprotocol.
Internet Architecture Board(lAB) Thetechnical advisertotheISOC;oversees the
continuing development oftheTCP/IPprotocol suite.
Internet Assigned Numbers Authority (lANA) Agroupsupported bytheU.S.govern­
mentthatwasresponsible forthemanagement ofInternetdomainnamesandaddresses until
October1998.
Internet ControlMessage Protocol (ICMP) Aprotocol intheTCP/IPprotocol suite
thathandleserrorandcontrolmessages.
Internet ControlMessage Protocol, version6(ICMPv6) Aprotocol inIPv6that
handleserrorandcontrolmessages.
Internet Corporation forAssigned NamesandNumbers (ICANN) Aprivate,
nonprofit corporation managed byaninternational boardthatassumed lANAoperations.
Internet draftAworkingInternetdocument (aworkinprogress) withnoofficialstatusanda
six-month lifetime.
Internet Engineering Steering Group(IESG) Anorganization thatoversees theactivities
ofIETF.
Internet Engineering TaskForce(IETF) Agroupworkingonthedesignanddevelopment
oftheTCP/IPprotocol suiteandtheIntemet.
Internet GroupManagement Protocol (IGMP) Aprotocol intheTCP/IPprotocol
suitethathandlesmulticasting.
Internet KeyExchange (IKE) Aprotocol designed tocreatesecurityassociations in
SADBs.
Internet MailAccessProtocol, version4(IMAP4) Acomplex andpowerful protocol
tohandlethetransmission ofelectronic mail.
Internet MobileCommunication (ITM-2000) AnITUissuedblueprint thatdefines
criteriaforthirdgeneration cellulartelephony.
Internet model A5-layerprotocolstackthatdominates datacommunications andnetworking
today.
Internet Network Information Center(INTERNIC) Anagencyresponsible for
collecting anddistributing information aboutTCP/IPprotocols.
Internet Protocol (lP)Thenetwork-layer protocol intheTCP/IPprotocol suitegoverning
connectionless transmission acrosspacketswitching networks.
Internet Protocol nextgeneration (IPng) SeeInternetProtocol version6(IPv6).
Internet Protocol version4(IPv4) ThecurrentversionofInternetProtocoL
Internet Protocol, version6(IPv6) ThesixthversionoftheInternetProtocol.
Internet Research TaskForce(IRTF) Aforumofworkinggroupsfocusing onlong-term
research topicsrelatedtotheInternet.
Internet Security Association andKeyManagement Protocol (ISAKMP) Aprotocol
designed bytheNational SecurityAgency(NSA)thatactuallyimplements theexchanges defined
inIKE.
Internet serviceprovider (ISP)Usually,acompany thatprovides Internetservices.
Internet Society(ISOC) Thenonprofit organization established topublicize theInternet.GLOSSARY 1087
Internetstandard Athoroughly testedspecification thatisusefultoandadheredtobythose
whoworkwiththeInternet. Itisaformalized regulation thatmustbefollowed.
internetwork (internet) Anetworkofnetworks.
Internetwork Protocol ControlProtocol (lPCP) InPPP,thesetofprotocols that
establish andterminate anetwork layerconnection forIPpackets.
internetworking Connecting severalnetworks together usinginternetworking devicessuch
asroutersandgateways.
intranetAprivatenetwork thatusestheTCP/IPprotocol suite.
inversedomain Asubdomain intheDNSthatfindsthedomainnamegiventheIPaddress.
inversemultiplexing Takingdatafromonesourceandbreaking itintoportions thatcanbe
sentaCroSSlower-speed lines.
IPdatagram TheInternetworking Protocol dataunit.
IPSecurity (IPSec) Acollection ofprotocols designed bytheIETF(Internet Engineering
TaskForce)toprovidesecurityforapacketcarriedontheInternet.
IrDAportAportthatallowsawireless keyboard tocommunicate withaPC.
Iridium A66-satellite networkthatprovides communication fromanyEarthsitetoanother.
ISDNuserport(ISUP) Aprotocol attheupperlayerofSS7thatprovides servicessimilar
tothoseofanISDNnetwork.
isochronous transmission Atypeoftransmission in which theentirestreamofbitsis
synchronized underthecontrolofacommon clock.
iterative resolution Resolution oftheIPaddressin which theclientmaysenditsrequestto
multiple serverSbeforegettingananswer.
J
jamming signal InCSMAlCD, asignalsentbythefirststationthatdetectscollision toalert
everyotherstationofthesituation.
JavaAprogramming language usedtocreateactiveWebdocuments.
jitterAphenomenon inreal-time trafficcausedbygapsbetweenconsecutive packetsatthereceiver.
JointPhotographic ExpertsGroup(JPEG) Astandardforcompressing continuous-tone
picture.
K
Kerberos Anauthentication protocol usedbyWindows 2000.
keydistribution center(KDC) Insecretkeyencryption, atlustedthirdpartythatsharesa
keywitheachuser.
L
LANemulation (LANE) Localareanetwork emulation usingATMswitches.
LANemulation client(LEC) InATMLANs,clientsoftwarethatreceivesservicesfromaLES.
LANemulation server(LES) InATMLANs,serversoftware thatcreatesavirtualcircuit
between thesourceanddestination.
leakybucketalgorithm Analgorithm toshapeburstytraffic.1088 GLOSSARY
least-cost treeAnMOSPFfeatureinwhichthetreeisbasedonachosenmetricinsteadof
shortestpath.
legacyATMLANLANinwhichATMtechnology isusedasabackbone toconnect
traditional LANs.
linecoding Converting binarydataintosignals.
linearblockcodeAblockcodeinwhichaddingtwocodewords createsanother
codeword.
line-of-sight propagation Thetransmission ofveryhighfrequency signalsinstraightlines
directlyfromantennatoantenna.
linkThephysical communication pathway thattransfers datafromonedevicetoanother.
LinkControlProtocol (LCP) APPPprotocolresponsible forestablishing, maintaining,
configuring, andterminating links.
linklocaladdress AnIPv6addressusedbyaprivateLAN.
linkstate advertisement (LSA) InOSPF,amethodtodisperseinformation.
linkstatedatabase Inlinkstaterouting,adatabase common toallroutersandmadefrom
LSPinformation.
linkstatepacket(LSP) Inlinkstaterouting,asmallpacketcontaining routinginformation
sentbyaroutertoallotherrouters.
linkstaterouting Aroutingmethodinwhicheachroutersharesitsknowledge ofchangesin
itsneighborhood withallotherrouters.
localaccessandtransport area(LATA) Anareacoveredbyoneormoretelephone
companies.
localareanetwork (LAN) Anetworkconnecting devicesinsideasinglebuildingorinside
buildings closetoeachother.
localareanetwork emulation (LANE) Software thatenablesanATMswitchtobehave
likeaLANswitch.
localexchange carrier(LEC) Atelephone company thathandlesservicesinsideaLATA.
localloopThelinkthatconnects asubscriber tothetelephone centraloffice.
localmanagement information (LMI) Aprotocol usedinFrameRelaythatprovides
management features.
logicaladdress Anaddressdefinedinthenetworklayer.
logicallinkcontrol(LLC) TheuppersublayerofthedatalinklayerasdefinedbyIEEE
Project802.2.
LogicalLinkControlandAdaptation Protocol (L2CAP) ABluetooth layerusedfor
dataexchange onanACLlink.
logicaltunnel Theencapsulation ofamulticast packetinsideaunicast packet toenable
multicast routingbynon-multicast routers.
longestmaskmatching Thetechnique inCIDRinwhichthelongestprefixishandledfirst
when searching aroutingtable.
lowearthorbit(LEO)Apolarsatelliteorbitwithanaltitudebetween500and2000km.
Asatellitewiththisorbithasarotationperiodof90to120minutes.
low-pass channel Achannelthatpassesfrequencies betweenaand!GLOSSARY 1089
M
mailtransferagent(MTA)AnSMTPcomponent thattransfers themailacrossthe
Internet.
Management Information Base(MIB) Thedatabase usedbySNMPthatholdsthe
information necessary formanagement ofanetwork.
Manchester encoding Adigital-to-digital polarencoding methodinwhichatransition
occursatthemiddleofeachbitintervaltoprovidesynchronization.
man-in-the-middle attack Akeymanagement probleminwhichanintruderintercepts and
sendsmessages between theintended senderandreceiver.
mappedaddress AnIPv6addressusedwhenacomputer thathasmigrated toIPv6wantsto
sendapackettoacomputer stillusingIPv4.
maskForIPv4,a32-bitbinarynumberthatgivesthefirstaddressintheblock(thenetwork
address)whenANDedwithanaddressintheblock.
maximum transferunit(MTU) Thelargestsizedataunitaspecificnetworkcanhandle.
medium accesscontrol(MAC)sublayer Thelowersublayer inthedatalinklayer
definedbytheIEEE802project.Itdefinestheaccessmethodandaccesscontrolindifferent local
areanetworkprotocols.
mediumEarthorbit(MEO) Asatelliteorbitpositioned between thetwoVanAllenbelts.
Asatelliteatthisorbittakessixhourstocircletheearth.
meshtopology Anetworkconfiguration inwhicheachdevicehasadedicated point-to-point
linktoeveryotherdevice.
message accessagent(MAA) Aclient-server program thatpullsthestoredemail
messages.
message authentication Asecuritymeasureinwhichthesenderofthemessage isverified
foreverymessage sent.
message authentication code(MAC) Akeyedhashfunction.
message transferagent(MTA) AnSMTPcomponent thattransfers themessage across
theInternet.
metric Acostassigned forpassingthroughanetwork.
metropolitan areanetwork (MAN) Anetworkthatcanspanageographical areathesize
ofacity.
microwave Electromagnetic wavesrangingfrom2GHzto40GHz.
minimum Hamming distance Inasetofwords,thesmallestHamming distancebetween
allpossiblepairs.
mobilehostAhostthatcanmovefromonenetworktoanother.
mobileswitching center(MSC) Incellulartelephony, aswitching officethatcoordinates
communication between allbasestationsandthetelephone centraloffice.
mobiletelephone switching office(MTSO) Anofficethatcontrolsandcoordinates
communication betweenallofthecellofficesandthetelephone controloffice.
modem Adeviceconsisting ofamodulator andademodulator. Itconvertsadigitalsignalinto
ananalogsignal(modulation) andviceversa(demodulation).
modification detection code(MDC) Thedigestcreatedbyahashfunction.1090 GLOSSARY
modular arithmetic Arithmetic thatusesalimitedrangeofintegers(0ton-1).
modulation Modification ofoneormorecharacteristics ofacarrierwavebyaninformation­
bearingsignal.
modulus Theupperlimitinmodular arithmetic (n).
monoalphabetic substitution Anencryption methodinwhicheachoccurrence ofa
character isreplaced byanothercharacter intheset.
motionpictureexpertsgroup(MPEG) Amethodtocompress videos.
multicast address Anaddressusedformulticasting.
multicast backbone (MBONE) Asetofinternetrouterssupporting multicasting through
theuseoftunneling.
Multicast OpenShortest PathFirst(MOSPF) Amulticast protocol thatusesmulticast
linkstateroutingtocreateasource-based leastcosttree.
multicast router Arouterwithalistofloyalmembers relatedtoeachrouterinterface that
distributes themulticast packets.
multicast routing Movingamulticast packettoitsdestinations.
multicasting Atransmission methodthatallowscopiesofasinglepackettobesenttoa
selectedgroupofreceivers.
multihoming service Aserviceprovided bySCTPthatallowsacomputer tobeconnected to
different networks.
multiline transmission, 3-level(MLT-3)encoding Alinecodingschemefeaturing
3levelsofsignalsandtransitions atthebeginning ofthe1bit.
multimode graded-index fiberAnopticalfiberwithacorehavingagradedindexof
refraction.
multimode step-index fiberAnopticalfiberwithacorehavingauniformindexofrefraction.
Theindexofrefraction changessuddenly atthecorelcladding boundary.
multiple access(MA)Alineaccessmethodinwhicheverystationcanaccessthelinefreely.
multiple unicasting Sendingmultiple copiesofamessage, eachwithadifferent unicast
address.
multiplexer (MUX) Adeviceusedformultiplexing.
multiplexing Theprocessofcombining signalsfrommultiplesourcesfortransmission across
asingledatalink.
multiplicative decrease Acongestion avoidance technique inwhichthethreshold issetto
halfofthelastcongestion windowsize,andthecongestion windowsizestartsfromoneagain.
Multipurpose Internet MailExtension (MIME) Asupplement toSMTPthatallows
non-ASCII datatobesentthroughSMTP.
multistage switch AnmTayofswitches designed toreducethenumberofcrosspoints.
multistream service Aserviceprovided bySCTPthatallowsdatatransfertobecarried
usingdifferent streams.
N
namespace Allthenamesassigned tomachines onaninternet.
name-address resolution Mapping anametoanaddressoranaddresstoaname.GLOSSARY 1091
Needham-Schroeder protocol Akeymanagement protocol usingmultiplechallenge­
response interactions between 2entities.
netidThepartofanIPaddressthatidentifies thenetwork.
network Asystemconsisting ofconnected nodesthatsharedata,hardware, andsoftware.
network accesspoint(NAP) Acomplex switching stationthatconnects backbone networks.
network address Anaddressthatidentifies anetworktotherestoftheInternet; itisthefirst
addressinablock.
network addresstranslation (NAT) Atechnology thatallowsaprivatenetworktousea
setofprivateaddresses forinternalcommunication andasetofglobalInternetaddresses for
externalcommunication.
network allocation vector(NAV)InCSMAlCA, theamountoftimethatmustpassbefore
astationcancheckforanidleline.
Network ControlProtocol (NCP) InPPP,asetofcontrolprotocols thatallowsthe
encapsulation ofdatacomingfromnetworklayerprotocols.
network interface card(NIC) Anelectronic device,internalorexternaltoastation,that
containscircuitry toenablethestationtobeconnected tothenetwork.
network layerThethirdlayerintheInternetmodel,responsible forthedeliveryofapacket
tothefinaldestination.
Network VirtualTerminal (NVT) ATCPJIPapplication protocolthatallowsremotelogin.
network-specific routing Routinginwhichallhostsonanetworkshareoneentryinthe
routingtable.
network-to-network interface (NNI) InATM,theinterface between twonetworks.
next-hop routing Aroutingmethodinwhichonlytheaddressofthenexthopislistedinthe
routingtableinsteadofacomplete listofthestopsthepacketmustmake.
nodeAnaddressable communication device(e.g.,acomputer orrouter)onanetwork.
node-to-node delivery Transferofadataunitfromonenodetothenext.
noiseRandom electrical signalsthatcanbepickedbythetransmission mediumandcause
degradation ordistortion ofthedata.
noiseless channel Anerror-free channel.
noisychannel Achannelthatcanproduceerrorindatatransmission.
nonce Alargerandomnumberthatisusedoncetodistinguish afreshauthentication request
fromausedone.
nonpersistent strategy Arandommultipleaccessmethodinwhichastationwaitsarandom
periodoftimeafteracollision issensed.
nonrepudiation Asecurityaspectinwhichareceivermustbeabletoprovethatareceived
message camefromaspecificsender.
nonreturn tozero(NRZ) Adigital-to-digital polarencoding methodinwhichthesignal
levelisalwayseitherpositiveornegative.
nonreturn tozero,invert(NRZ-I) AnNRZencoding methodinwhichthesignallevelis
invertedeachtimea 1isencountered.
nonreturntozero,level(NRZ-L) AnNRZencoding methodinwhichthesignallevelis
directlyrelatedtothebitvalue.1092 GLOSSARY
normalresponse mode(NRM) InHDLC,acommunication modeinwhichthesecondary
stationmusthavepermission fromtheprimarystationbeforetransmission canproceed.
NyquistbitrateThedataratebasedontheNyquisttheorem.
Nyquisttheorem Atheoremthatstatesthatthenumberofsamplesneededtoadequately
represent ananalogsignalisequaltotwicethehighestfrequency oftheoriginalsignal.
o
Oakley Akeycreationprotocol, developed byHilarieOrman,whichisoneofthethree
components ofIKEprotocol.
omnidirectional antenna Anantennathatsendsoutorreceivessignalsinalldirections.
one'scomplement Arepresentation ofbinarynumbers inwhichthecomplement ofa
numberisfoundbycomplementing allbits.
openshortestpathfirst(OSPF) Aninteriorroutingprotocol basedonlinkstate
routing.
OpenSystemsInterconnection (OSI)model Aseven-layer modelfordatacommunication
definedbyISO.
open-loop congestion control Policiesappliedtopreventcongestion.
opticalcarrier(OC)Thehierarchy offiber-optic carriersdefinedinSONET.
opticalfiberAthinthreadofglassorothertransparent materialtocarrylightbeams.
orbitThepathasatellitetravelsaroundtheearth.
Orthogonal Frequency Division Multiplexing (OFDM) Amultiplexing method
similartoFDM,withallthesubbands usedbyonesOurceatagiventime.
orthogonal sequence Asequence withspecialproperties between elements.
Otway-Reesprotocol Akeymanagement protocolwithlessstepsthantheNeedham-Schroeder
method.
out-of-band signaling Usingtwoseparatechannels fordataandcontrol.
outputfeedback (OFB)modeAmodesimilartotheCFBmodewithonedifference. Each
bitintheciphertext isindependent oftheprevious bitorbits.
p
packetswitching Datatransmission usingapacket-switched network.
packet-filter firewall Afirewallthatforwards orblockspacketsbasedontheinformation in
thenetwork-layer andtransport-layer headers.
packet-switched network Anetworkinwhichdataaretransmitted inindependent units
calledpackets.
parabolic dishantenna Anantennashapedlikeaparabola usedforterrestrial microwave
communication.
paralleltransmission Transmission inwhichbitsinagrouparesentsimultaneously, each
usingaseparatelink.
paritycheck Anerror-detection methodusingaparitybit.
partially qualified domainname(PQDN) Adomainnamethatdoesnotincludeallthe
levelsbetweenthehostandtherootnode.GLOSSARY 1093
Password Authentication Protocol (PAP)Asimpletwo-step authentication protocol
usedinPPP.
pathvectorrouting AroutingmethodonwhichBGPisbased;inthismethod,theASs
throughwhichapacketmustpassareexplicitly listed.
P-boxAhardware circuitusedinencryption thatconnects inputtooutput.
peer-to-peer process Aprocessonasendingandareceiving machine thatcommunicates at
agivenlayer.
perhopbehavior (PUB) IntheDiffservmodel,a6-bitfieldthatdefinesthepacket-handling
mechanism forthepacket.
period Theamountoftimerequired tocomplete onefullcycle.
periodic signalAsignalthatexhibitsarepeating pattern.
permanent virtualcircuit(PVC) Avirtualcircuittransmission methodinwhichthesame
virtualcircuitisusedbetweensourceanddestination onacontinual basis.
persistent connection Aconnection whichtheserverleavesopenforadditional requests
aftersendingaresponse.
Personal Communication System(peS) Agenerictermforacommercial cellular
systemthatoffersseveralkindsofcommunication services.
phase Therelativepositionofasignalintime.
phasemodulation (PM)Ananalog-to-analog modulation methodinwhichthecarrier
signal'sphasevarieswiththeamplitude ofthemodulating signal.
phaseshiftkeying(PSK) Adigital-to-analog modulation methodinwhichthephaseofthe
carriersignalisvariedtorepresent aspecificbitpattern.
PUYsublayer Thetransceiver inFastEthernet.
physical address Theaddressofadeviceatthedatalinklayer(MACaddress).
physical layerThefirstlayeroftheInternetmodel,responsible forthemechanical and
electrical specifications ofthemedium.
piconet ABluetooth network.
piggybacking Theinclusion ofacknowledgment onadataframe.
pipelining InGo-Back-n ARQ,sendingseveralframesbeforenewsisreceived concerning
previous frames.
pixelApictureelementofanimage.
plainoldtelephone system(POTS) Theconventional telephone networkusedforvoice
communication.
plaintext Inencryption/decryption, theoriginalmessage.
playback buffer Abufferthatstoresthedatauntiltheyarereadytobeplayed.
pointcoordination function (PCF) InwirelessLANs,anoptionalandcomplex access
methodimplemented inaninfrastructure network.
pointofpresence (POP)Aswitching officewherecarrierscaninteractwitheachother.
point-to-point connection Adedicated transmission linkbetween twodevices.
Point-to-Point Protocol (PPP)Aprotocolfordatatransfer aCrOSSaserialline.
poisonreverse Afeatureaddedtosplithorizoninwhichatableentrythathascomethrough
oneinterface issettoinfinityintheupdatepacket.1094 GLOSSARY
polarencoding Adigital-to-analog encoding methodthatusestwolevels(positive and
negative) ofamplitude.
policyrouting Apathvectorroutingfeatureinwhichtheroutingtablesarebasedonrulesset
bythenetwork administrator ratherthanametric.
pollIntheprimary/secondary accessmethod,aprocedure inwhichtheprimarystationasksa
secondary stationifithasanydatatotransmit.
poll/final (PIF)bitAbitinthecontrolfieldofHDLC;iftheprimaryissending, itcanbea
pollbit;ifthesecondary issending, itcanbeafinalbit.
poll/select Anaccessmethodprotocol usingpollandselectprocedures. Seepoll.Seeselect.
polling Anaccessmethodinwhichonedeviceisdesignated asaprimarystationandthe
othersasthesecondary stations.Theaccessiscontrolled bytheprimarystation.
polyalphahetic substitution Anencryption methodinwhicheachoccurrence ofacharacter
canhaveadifferent substitute.
polynomial Analgebraic tennthatcanrepresent aCRCdivisor.
portaddress InTCPJIPprotocol anintegerthatidentifies aprocess.
portnumber Seeportaddress.
PostOfficeProtocol, version3(POP3) ApopularbutsimpleSMTPmailaccessprotocol.
p-persistent ACSMApersistence strategyin which astationsendswithprobability pifit
findsthelineidle.
preamble The7-bytefieldofanIEEE802.3frameconsisting ofalternating IsandOsthat
alertandsynchronize thereceiver.
predictive encoding Inaudiocompression, encoding onlythedifferences betweenthesamples.
prefix Thecommon partofanaddressrange.
presentation layerThesixthlayeroftheOSImodel;responsible fortranslation, encryption,
authentication, anddatacompression.
PrettyGoodPrivacy(PGP) Aprotocol thatprovides allfouraspectsofsecurityinthe
sendingofemail.
primary station Inprimary/secondary accessmethod,astationthatissuescommands tothe
secondary stations.
priorityqueueing Aqueuingtechnique inwhichpacketsareassigned toapriorityclass,
eachwithitsownqueue.
privacy Asecurityaspectinwhichthemessage makessenseonlytotheintended receiver.
privatekeyInconventional encryption, akeysharedbyonlyonepairofdevices, asender
andareceiver. Inpublic-key encryption, theprivatekeyisknownonlytothereceiver.
privatenetwork AnetworkthatisisolatedfromtheInternet.
process Arunningapplication program.
process-to-process delivery Delivery ofapacketfromthesendingprocesstothedestina­
tionprocess.
Project802Theprojectundertaken bytheIEEEinanattempttosolveLANincompatibility.
SeealsoIEEEProject802.
propagation speed Therateatwhichasignalorbittravels;measured bydistance/second.
propagation timeThetimerequired forasignaltotravelfromonepointtoanother.GLOSSARY 1095
protocol Rulesforcommunication.
Protocol Independent Multicast (PIM) Amulticasting protocolfamilywithtwomembers,
PIM-DM andPIM-SM; bothprotocols areunicast-protocol dependent.
Protocol Independent Multicast, DenseMode(PIM-DM) Asource-based routing
protocol thatusesRPFandpruning/grafting strategies tohandlemulticasting.
Protocol Independent Multicast, SparseMode(PIM-SM)Agroup-shared routing
protocol thatissimilartoCBTandusesarendezvous pointasthesourceofthetree.
protocol suiteAstackorfamilyofprotocols definedforacomplex communication system.
proxyARPAtechnique thatcreatesasubnetting effect;oneserveranswersARPrequestsfor
multiplehosts.
proxyfirewall A firewall thatfiltersamessage basedontheinformation available inthe
message itself(attheapplication layer).
proxyserver Acomputer thatkeepscopiesofresponses torecentrequests.
pruning Stopping thesendingofmulticast messages fromaninterface.
pseudoheader Information from the IPheaderusedonlyforchecksum calculation inthe
UDPandTCPpacket.
pseudorandom noise(PN)Apseudorandom codegenerator usedinFHSS.
publickeyinfrastructure (PKI) Ahierarchical structure ofCAservers.
public-key cryptography Amethodofencryption basedonanonreversible encryption
algorithm. Themethodusestwotypesofkeys:Thepublickeyisknowntothepublic;theprivate
key(secretkey)isknownonlytothereceiver.
pulseamplitude modulation (PAM) Atechnique inwhichananalogsignalissampled;
theresultisaseriesofpulsesbasedonthesampleddata.
pulsecodemodulation (PCM) Atechnique thatmodifiesPAMpulsestocreateadigitalsignal.
pulsestuffing InTDM,atechnique thataddsdummybitstotheinputlineswithlowerrates.
pureALOHA TheoriginalALOHA.
Q
quadrature amplitude modulation (QAM) Adigital-to-analog modulation methodin
whichthephaseandamplitude ofthecarriersignalvarywiththemodulating signal.
qualityofservice(QoS) Asetofattributes relatedtotheperformance oftheconnection.
quantization Theassignment ofaspecificrangeofvaluestosignalamplitudes.
quantization errorErrorintroduced inthesystemduringquantization (analog-to-digital
conversion).
queue Awaitinglist.
R
radiowaveElectromagnetic energyinthe3-KHzto300-GHz range.
randomaccess Amediumaccesscategory inwhicheachstationcanaccessthemedium
withoutbeingcontrolled byanyotherstation.
ranging InanHFCnetwork, aprocessthatdetermines thedistance between theCMand
theCMTS.1096 GLOSSARY
rateadaptive asymmetrical digitalsubscriber line(RADSL) ADSL-based technology
thatfeaturesdifferent dataratesdepending onthetypeofcommunication.
read-only memory (ROM) Permanent memory withcontents thatcannotbechanged.
Real-Time Streaming Protocol (RTSP) Anout-of-band controlprotocol designed toadd
morefunctionality tothestreaming audio/video process.
Real-time Transport ControlProtocol (RTCP) Acompanion protocol toRTPwith
messages thatcontroltheflowandqualityofdataandallowtherecipient tosendfeedback tothe
sourceorsources.
Real-time Transport Protocol (RTP) Aprotocolforreal-time traffic;usedinconjunction
withUDP.
reconciliation sublayerAFastEthernet sublayer whichpassesdatain4-bitformattotheMIL
recursive resolution Resolution oftheIPaddressinwhichtheclientsendsitsrequesttoa
serverthateventually returnsaresponse.
redundancy Theadditionofbitstoamessage forerrorcontrol.
Reed-Solomon Acomplex, butefficient, cycliccode.
reflection Thephenomenon relatedtothebouncing backoflightattheboundary oftwomedia.
refraction Thephenomenon relatedtothebendingoflightwhenitpassesfromonemedium
toanother.
regionalISP AsmallISPthatisconnected tooneormoreNSPs.
registrar Anauthority toregisternewdomainnames.
relayagent ForBOOTP, arouterthatcanhelpsendlocalrequests toremoteservers.
reliability AQoSflowcharacteristic; dependability ofthetransmission.
remotebridge Adevicethatconnects LANsandpoint-to-point networks; oftenusedina
backbone network.
rendezvous router Arouterthatisthecoreorcenterforeachmulticast group;itbecomes
therootofthetree.
rendezvous-point treeAgroup-shared treemethodinwhichthereisonetreeforeachgroup.
repeater Adevicethatextendsthedistance asignalcantravelbyregenerating thesignal.
replayattack Theresending ofamessage thathasbeenintercepted byanintruder.
RequestforComment (RFC)AformalInternetdocument concerning anInternetissue.
resolver TheDNSclientthatisusedbyahostthatneedstomapanaddresstoanameora
nametoanaddress.
Resource Reservation Protocol (RSVP) Asignaling protocol tohelpIPcreateaflow
andmakearesource reservation toimproveQoS.
retransmission time-out Theexpiration ofatimerthatcontrolstheretransmission ofpackets.
returntozero(RZ)Adigital-to-digital encoding technique inwhichthevoltageofthe
signaliszeroforthesecondhalfofthebitinterval.
reusefactor Incellulartelephony, thenumberofcellswithadifferent setoffrequencies.
ReverseAddress Resolution Protocol (RARP) ATCPIIPprotocol thatallowsahostto
finditsInternetaddressgivenitsphysical address.
reversepathbroadcasting (RPB) Atechnique inwhichtherouterforwards onlythepackets
thathavetraveledtheshortestpathfromthesourcetotherouter.GLOSSARY 1097
reversepathforwarding (RPF) Atechnique inwhichtherouterforwards onlythepackets
thathavetraveledtheshortestpathfromthesourcetotherouter.
reversepathmulticasting (RPM) Atechnique thataddspruningandgraftingtoRPBto
createamulticast shortestpathtreethatsupports dynamic membership changes.
Rijndael algorithm Analgorithm namedafteritstwoBelgianinventors, VincentRijmen
andJoanDaemen thatisthebasisofAES.
ringtopology Atopology inwhichthedevicesareconnected inaring.Eachdeviceonthering
receivesthedataunitfromtheprevious device,regenerates it,andforwards ittothenextdevice.
Rivest,Shamir,Adleman (RSA)encryption SeeRSAencryption.
RJ45Acoaxialcableconnector.
roaming Incellulartelephony, theabilityofausertocommunicate outsideofhisownservice
provider's area.
rootserver InDNS,aserverwhosezoneconsistsofthewholetree.Arootserverusually
doesnotstoreanyinformation aboutdomains butdelegates itsauthority tootherservers,keeping
references tothoseservers.
rotarydialing Accessing theswitching stationthroughaphonethatsendsadigitalsignalto
theendoffice.
rotationcipher Akeyedorkeylesscipherinwhichtheinputbitsarerotatedtotheleftor
righttocreateoutputbits.
round-trip time(RTT) Thetimerequiredforadatagram togofromasourcetoadestination
andthenbackagain.
routeApathtraveledbyapacket.
router Aninternetworking deviceoperating atthefirstthreelayers.Arouterisattached totwo
ormorenetworks andforwards packetsfromonenetworktoanother.
routing Theprocessperformed byarouter;findingthenexthopforadatagram.
RoutingInformation Protocol (RIP) Aroutingprotocol basedonthedistancevector
routingalgorithm.
routingtableAtablecontaining information arouterneedstoroutepackets.Theinformation
mayincludethenetworkaddress,thecost,theaddressofthenexthop,andsoon.
RSAcryptosystem Apopularpublic-key encryption methoddeveloped byRivest,Shamir,
andAdleman.
s
sampling Theprocessofobtaining amplitudes ofasignalatregularintervals.
sampling rateThenumberofsamplesobtained persecondinthesampling process.
satellitenetwork Acombination ofnodesthatprovides communication formonepointon
theearthtoanother.
S-box Anencryption devicemadeofdecoders, P-boxes, andencoders.
scatternet Acombination ofpiconets.
scrambling Indigital-to-digital conversion, modifying partofthelUlesinlinecodingscheme
tocreatebitsynchronization.
secondary station Inthepoll/select accessmethod,astationthatsendsaresponse inanswer
toacommand fromaprimarystation.1098 GLOSSARY
secret-key encryption Asecuritymethodinwhichthekeyforencryption isthesameasthe
keyfordecryption; bothsenderandreceiverhavethesamekey.
SecureHashAlgorithm 1(SHA-l) Ahashalgorithm designed bytheNational Institute
ofStandards andTechnology (NIST).Itwaspublished asaFederalInformation Processing
Standard (PIPS).
SecureSocketLayer(SSL)Aprotocoldesigned toprovidesecurityandcompression
servicestodatagenerated fromtheapplication layer.
Security Association (SA)AnIPSecprotocolthatcreatesalogicalconnection betweentwo
hosts.
securityassociation database (SADB) Adatabase definingasetofsinglesecurity
associations.
securityparameter index(SPI)Aparameter thatuniquely distinguish onesecurity
association fromtheothers.
segment ThepacketattheTCPlayer.Also,thelengthoftransmission mediumsharedby
devices.
segmentation Thesplittingofamessage intomultiple packets;usuallyperformed atthe
transport layer.
segmentation andreassembly (SAR) ThelowerAALsublayer intheATMprotocol in
whichaheaderand/ortrailermaybeaddedtoproducea48-byteelement.
selectInthepolVselect accessmethod,aprocedure inwhichtheprimarystationasksasecondary
stationifitisreadytoreceivedata.
selective-repeat ARQAnerror-control methodinwhichonlytheframeinerrorisresent.
self-synchronization Synchronization oflongstringsof1sorOsthroughthecodingmethod.
semantics Themeaningofeachsectionofbits.
sequence number Thenumberthatdenotesthelocationofaframeorpacketinamessage.
serialtransmission Transmission ofdataonebitatatimeusingonlyonesinglelink.
server Aprogram thatcanprovideservicestootherprograms, calledclients.
servercontrolpoint(SCP) InSS7terminology, thenodethatcontrolsthewholeoperation
ofthenetwork.
SessionInitiation Protocol (SIP)InvoiceoverIP,anapplication protocolthatestablishes,
manages, andterminates amultimedia session.
sessionlayerThefifthlayeroftheOSImodel,responsible fortheestablishment, manage­
ment,andtermination oflogicalconnections betweentwoendusers.
setupphase Invirtualcircuitswitching, aphaseinwhichthesourceanddestination usetheir
globaladdresses tohelpswitches maketableentriesfortheconnection.
Shannon capacity Thetheoretical highestdatarateforachannel.
shielded twisted-pair (STP) Twisted-pair cableenclosed inafoilormeshshieldthat
protectsagainstelectromagnetic interference.
shiftcipher Thesimplestmonoalphabetic cipherinwhichtheplaintext andciphertext consist
ofletters.Intheencryption algorithm, thecharacters areshifteddownthecharacter list;inthe
decryption algorithm, thecharacters areshiftedupthecharacter list.
shiftregister Aregisterinwhicheachmemorylocation, atatimeclick,acceptsthebitatits
inputport,storesthenewbit,anddisplaysitontheoutputport.GLOSSARY 1099
shortinterframe space(SIFS) InCSMAlCA, aperiodoftimethatthedestination waits
afterreceiving theRTS.
shortestpathtreeAroutingtableformedbyusingtheDijkstraalgorithm.
signalingconnection controlpoint(SCCP) InSS7,thecontrolpointsusedforspecial
servicessuchas800calls.
signalelement Theshortest section ofasignal(time-wise) thatrepresents adataelement.
signalpoint(SP)InSS7terminology, theusertelephone orcomputer isconnected tothe
signalpoints.
signalrateThenumberofsignalelements sentinonesecond.
signaltransport port(STP) InSS7terminology, thenodeusedbythesignaling network.
Signaling SystemSeven(SS7)Theprotocolthatisusedinthesignaling network.
signal-to-noise ratio(SNR) Theratioofaveragesignalpowertoaveragenoisepower.
sillywindowsyndrome Asituation inwhichasmallwindowsizeisadvertised bythe
receiverandasmallsegmentsentbythesender.
simpleandefficientadaptation layer(SEAL) AnAALlayerdesigned fortheInternet
(AAL5).
simplebridge Anetworking devicethatlinkstwosegments; requiresmanualmaintenance
andupdating.
SimpleMailTransfer Protocol (SMTP) TheTCP/IPprotocoldefiningelectronic mail
serviceontheInternet.
SimpleNetwork Management Protocol (SNMP) TheTCPIIPprotocolthatspecifies
theprocessofmanagement intheInternet.
SimpleProtocol Thesimpleprotocol weusedtoshowanaccessmethodwithoutflowand
errorcontrol.
simplexmodeAtransmission modeinwhichcommunication isoneway.
sinewaveAnamplitude-versus-time representation ofarotatingvector.
single-bit errorErrorinadataunitinwhichonlyonesinglebithasbeenaltered.
single-mode fiberAnopticalfiberwithanextremely smalldiameter thatlimitsbeamstoa
fewangles,resulting inanalmosthorizontal beam.
sitelocaladdress AnIPv6addressforasitehavingseveralnetworks butnotconnected to
theInternet.
SKEME Aprotocolforkeyexchange designed byHugoKrawcyzk. Itisoneofthethree
protocols thatformthebasisofIKE.
skypropagation Propagation ofradiowavesintotheionosphere andthenbacktoearth.
slashnotation Ashorthand methodtoindicatethenumberof1sinthemask.
slidingwindow Aprotocolthatallowsseveraldataunitstobeintransition beforereceiving
anacknowledgment.
slidingwindowARQAnerror-control protocolusingslidingwindowconcept.
slottedALOHA Themodified ALOHA accessmethodinwhichtimeisdividedintoslots
andeachstationisforcedtostartsendingdataonlyatthebeginning oftheslot.
slowconvergence ARIPshortcoming apparent whenachangesomewhere intheinternet
propagates veryslowlythroughtherestoftheinternet.1100 GLOSSARY
slowstartAcongestion-control methodinwhichthecongestion windowsizeincreases
exponentially atfirst.
socketaddress Astructure holdinganIPaddressandaportnumber.
sourcequench Amethod,usedinICMPforflowcontrol,inwhichthesourceisadvisedto
slowdownorstopthesendingofdatagrams becauseofcongestion.
sourcerouting Explicitly definingtherouteofapacketbythesenderofthepacket.
sourceroutingbridgeAsourceordestination station thatperforms someofthedutiesofa
transparent bridgeasamethodtopreventloops.
source-based treeAtreeusedformulticasting bymulticasting protocols inwhichasingle
treeismadeforeachcombination ofsourceandgroup.
source-to-destination delivery Thetransmission ofamessage fromtheoriginalsenderto
theintended recipient.
spacepropagation Atypeofpropagation thatcanpenetrate theionosphere.
space-division switching Switching inwhichthepathsareseparated fromeachotherspatially.
spanning treeAtreewiththesourceastherootandgroupmembers asleaves;atreethat
connects allofthenodes.
spatialcompression Compressing animagebyremoving redundancies.
spectrum Therangeoffrequencies ofasignal.
splithorizon AmethodtoimproveRIPstabilityinwhichtherouterselectively choosesthe
interface fromwhichupdating information issent.
spreadspectrum Awirelesstransmission technique thatrequiresabandwidth severaltimes
theoriginalbandwidth.
Standard Ethernet Theconventional Ethernet operating at10Mbps.
startopology Atopology inwhichallstationsareattachedtoacentraldevice(hub).
startbitInasynchronous transmission, abittoindicatethebeginning oftransmission.
statetransition diagram Adiagramtoillustrate thestatesofafinitestatemachine.
staticdocument OntheWorldWideWeb,afixed-content document thatiscreatedand
storedinaserver.
staticmapping Atechnique inwhichalistoflogicalandphysical addresscorrespondences
isusedforaddressresolution.
staticrouting Atypeofroutinginwhichtheroutingtableremainsunchanged.
stationary hostAhostthatremainsattached toonenetwork.
statistical TDMATDMtechnique inwhichslotsaredynamically allocated toimprove
efficiency.
statuslineIntheHTTPresponse message alinethatconsistsoftheHTTPversion,aspace,a
statuscode,aspace,astatusphrase.
stopbitInasynchronous transmission, oneormorebitstoindicatetheendoftransmission.
stop-aDd-wait ARQAnerror-control protocolusingstop-and-wait flowcontrol.
Stop-aDd- WaitProtocol Aprotocol inwhichthesendersendsoneframe,stopsuntilit
receivesconfirmation fromthereceiver, andthensendsthenextframe.
store-aDd-forward switchAswitchthatstorestheframeinaninputbufferuntilthewhole
packethasarrived.GLOSSARY 1101
straighttipconnector Atypeoffiber-optic cableconnector usingabayonetlockingsystem.
StreamControlTransmission Protocol (SCTP) Thetransport layerprotocol designed
forInternettelephony andrelatedapplications.
streaming liveaudio/video Broadcast datafromtheInternet that ausercanlistentoorwatch.
streaming storedaudio/video Datadownloaded asfilesfromtheInternetthatausercan
listentoorwatch.
strongcollision Creating twomessage withthesamedigest.
Structure ofManagement Information (SMI) InSNMP,acomponent usedinnetwork
management.
STSmultiplexer/demultiplexer ASONETdevicethatmultiplexes anddemultiplexes
signals.
stublinkAnetwork thatisconnected toonlyonerouter.
subnet subnetwork.
subnetaddress Thenetwork addressofasubnet.
subnetmaskThemaskforasubnet.
subnetwork Apartofanetwork.
subscriber channelconnector Afiber-optic cableconnector usingapushipulllocking
mechanism.
substitution cipher Abit-level encryption methodinwhichnbitssubstitute foranother
nbitsasdefinedbyP-boxes, encoders, anddecoders.
suffix Foranetwork, thevaryingpart(similartothehostid)oftheaddress.InDNS,astring
usedbyanorganization todefineitshostorresources.
summary linktoASboundary routerLSAAnLSApacketthatletsarouterinsidean
areaknowtheroutetoanautonomous boundary router.
summary linktonetwork LSAAnLSApacketthatfindsthecostofreaching networks
outsideofthearea.
supergroup Asignalcomposed offivemultiplexed groups.
supernet Anetwork formedfromtwoormoresmallernetworks.
supernet maskThemaskforasupernet.
switch Adeviceconnecting multiple communication linestogether.
switched Ethernet AnEthernet inwhichaswitch,replacing thehub,candirectatransmission
toitsdestination.
switched virtualcircuit(SVC) Avirtualcircuittransmission methodinwhichavirtual
circuitiscreatedandinexistence onlyforthedurationoftheexchange.
switched/56 Atemporary 56-Kbps digitalconnection between twousers.
switching office Theplacewheretelephone switches arelocated.
symmetric digitalsubscriber line(SDSL) ADSL-based technology similartoHDSL,
butusingonlyonesingletwisted-pair cable.
symmetric-key cryptography Acipherinwhichthesamekeyisusedforencryption and
decryption.
synchronization points Reference pointsintroduced intothedatabythesessionlayerfor
thepurposeofflowanderrorcontrol.1102 GLOSSARY
synchronous connection oriented (SCO)linkInaBluetooth network, aphysical link
createdbetween amasterandaslavethatreservesspecificslotsatregularintervals.
Synchronous DigitalHierarchy (SDH) ThelTD-Tequivalent ofSONET.
Synchronous OpticalNetwork (SONET) Astandard developed byANSIforfiberoptic
teChnology thatcantransmithigh-speed data.Itcanbeusedtodelivertext,audio,andvideo.
synchronous payloadenvelope (SPE) ThepartoftheSONETframecontaining userdata
andtransmission overhead.
synchronous TDM ATDMtechnique inwhicheachinputhasanallotment intheoutput
evenwhenitisnotsendingdata.
synchronous transmission Atransmission methodthatrequiresaconstanttimingrelationship
between thesenderandthereceiver.
synchronous transport module(STM) AsignalintheSDHhierarchy.
synchronous transport signal(STS) AsignalintheSONEThierarchy.
syndrome Asequence ofbitgenerated byapplying theerrorchecking function toacodeword.
syntax Thestructure orformatofdata,meaning theorderinwhichtheyarepresented.
T
TlinesAhierarchy ofdigitallinesdesigned tocarryspeechandothersignalsindigitalforms.
Thehierarchy definesT-I,T-2,T-3,andT-41ines.
tandemoffice Thetollofficeinatelephone network.
TCPIIPprotocol suiteAfive-layer protocolsuitethatdefinestheexchange oftransmissions
acrosstheInternet.
teardownphase Invirtualcircuitswitching, thephaseinwhichthesourceanddestination
informtheswitchtoerasetheirentry.
telecommunications Exchange ofinformation overdistanceusingelectronic equipment.
teleconferencing Audioandvisualcommunication betweenremoteusers.
Teledesic Asystemofsatellites thatprovides fiber-optic communication (broadband channels,
lowerrorrate,andlowdelay)
telephone userport(TUP) Aprotocol attheupperlayerofSS7thatisresponsible for
settingupvoicecalls.
temporal compression AnMPEGcompression methodinwhichredundant framesareremoved.
Ten-Gigabit Ethernet Thenewimplementation ofEthernet operating at10Gbps.
Terminal Network (TELNET) Ageneralpurposeclient-server program thatallows
remotelogin.
three-way handshaking Asequence ofeventsforconnection establishment ortermination
consisting oftherequest,thentheacknowledgment oftherequest,andthenconfirmation ofthe
acknowledgment.
throughput Thenumberofbitsthatcanpassthroughapointinonesecond.
ticket-granting server(TGS) AKerberos serverthatissuestickets.
timedivisionduplexingTDMA(TDD-TDMA) InaBluetooth network, akindofhalf­
duplexcommunication inwhichtheslaveandreceiversendandreceivedata,butnotatthesame
time(half-duplex).GLOSSARY 1103
timedivisionmultipleaccess(TDMA) Amultipleaccessmethodinwhichthebandwidth
isjustonetime-shared channel.
timetolive(TTL) Thelifetimeofapacket.
time-division multiplexing (TDM) Thetechnique ofcombining signalscomingfrom
low-speed channels tosharetimeonahigh-speed path.
time-division switching Acircuit-switching technique inwhichtime-division multiplexing
isusedtoachieveswitching.
time-domain plotAgraphical representation ofasignal'samplitude versustime.
time-slot interchange (TSI)Atime-division switchconsisting ofRAMandacontrolunit.
tokenAsmallpacketusedintoken-passing accessmethod.
tokenbucket Analgorithm thatallowsidlehoststoaccumulate creditforthefutureinthe
fonnoftokens.
tokenpassing Anaccessmethodinwhichatokeniscirculated inthenetwork. Thestation
thatcapturesthetokencansenddata.
TokenRingALANusingaringtopology andtoken-passing accessmethod.
topology Thestructure ofanetworkincluding physicalarrangement ofdevices.
trafficcontrol Amethodforshapingandcontrolling trafficinawideareanetwork.
trafficshaping Amechanism tocontroltheamountandtherateofthetrafficsenttothe
networktoimproveQoS.
trailer Controlinformation appended toadataunit.
transaction capabilities application port(TCAP) AprotocolattheupperlayerofSS7
thatprovides remoteprocedure callsthatletanapplication program onacomputer invokea
procedure onanothercomputer.
transceiver Adevicethatbothtransmits andreceives.
transient linkAnetworkwith severalroutersattachedtoit.
Transmission ControlProtocol (TCP) Atransport protocolintheTCP/IPprotocolsuite.
Transmission ControlProtocollInternetworking Protocol (TCP/IP) Afive-layer
protocolsuitethatdefinestheexchange oftransmissions acrosstheInternet.
transmission medium Thephysicalpathlinkingtwocommunication devices.
transmission rateThenumberofbitssentpersecond.
transparency Theabilitytosendanybitpatternasdatawithoutitbeingmistaken for
controlbits.
transparent bridge Anothernameforalearningbridge.
transparent dataDatathatcancontaincontrolbitpatternswithoutbeinginterpreted ascontrol.
transport layerThefourthlayerintheInternetandOSImodel;responsible forreliable
end-to-end deliveryanderrorrecovery.
Transport LayerSecurity (TLS) TheIETFstandard versionofSSL.Thetwoarevery
similar,withslightdifferences.
transposition cipher Acharacter-level encryption methodinwhichthepositionofthe
character changes.
trellis-coded modulation Amodulation technique thatincludeserrorcorrection.1104 GLOSSARY
trilateration Atwo-dimensional methodoffindingalocationgiventhedistances from3different
points.
tripleDESAnalgorithm compatible withDESthatusesthreeDESblocksandtwo
56-bitkeys.
TrivialFileTransfer Protocol (TFTP) Anunreliable TCP/IPprotocol forfiletransfer
thatdoesnotrequirecomplex interaction between clientandserver.
trunk Transmission mediathathandlecommunications between offices.
tunneling Inmulticasting, aprocessinwhichthemulticast packetisencapsulated inaunicast
packetandthensentthroughthenetwork. InVPN,theencapsulation ofanencrypted IPdatagram
inasecondouterdatagram. ForIPv6,astrategyusedwhentwocomputers usingIPv6wantto
communicate witheachotherwhenthepacketmustpassthrougharegionthatusesIPv4.
twisted~pair cableAtransmission mediumconsisting oftwoinsulated conductors inatwisted
configuration.
two-dimensional paritycheck Anerrordetection methodintwodimensions.
typeofservice(TOS) AcriteriaOrvaluethatspecifies thehandling ofthedatagram.
u
unbalanced configuration AnHDLCconfiguration inwhichonedeviceisprimaryandthe
otherssecondary.
unguided medium Atransmission mediumwithnophysicalboundaries.
unicastaddress Anaddressbelonging toonedestination.
unicastrouting Thesendingofapackettojustonedestination.
unicasting Thesendingofapackettojustonedestination.
Unicode Theinternational character setusedtodefinevalidcharacters incomputer science.
unidirectional antenna Anantennathatsendsorreceivessignalsinonedirection.
Uniform Resource Locator(URL) Astringofcharacters (address) thatidentifies apage
ontheWorldWideWeb.
unipolar encoding Adigital-to-digital encoding methodinwhichonenonzerovaluerepresents
either1or0;theotherbitisrepresented byazerovalue.
unshielded twisted-pair (UTP) Acablewithwiresthataretwistedtogethertoreduce
noiseandcrosstalk. Seealsotwisted-pair cableandshielded twisted-pair.
unspecified bitrate(UBR) ThedatarateofanATMserviceclassspecifying onlybest-effort
delivery.
uplink Transmission fromanearthstationtoasatellite.
uploading Sendingalocalfileordatatoaremotesite.
useragent(UA)AnSMTPcomponent thatprepares themessage, createstheenvelope, and
putsthemessage intheenvelope.
userauthentication Asecuritymeasureinwhichthesenderidentityisverifiedbeforethe
startofacommunication.
userdatagram ThenameofthepacketintheUDPprotocol.
UserDatagram Protocol (UDP) Aconnectionless TCP/IPtransport layerprotocol.
usernetwork interface (UNI) Theinterface between auserandtheATMnetwork.GLOSSARY 1105
usersupportlayers Thesession,presentation, andapplication layers.
user-to-network interface (UNI) InATM,theinterface between anendpoint(user)and
anATMswitch.
v
Vseries ITU-Tstandards thatdefinedatatransmission overtelephone lines.Somecommon
standards areY.32,V.32bis,Y.90,andV92.
variable bitrate(VBR) ThedatarateofanATMserviceclassforusersneedingavarying
bitrate.
veryhighbitratedigitalsubscriber line(VDSL) ADSL-based technology forshort
distances.
videoRecording ortransmitting ofapictureoramovie.
Vigenere cipher Apolyalphabetic substitution schemethatusesthepositionofacharacter in
theplaintext andthecharacter's positioninthealphabet.
virtualcircuit(Ve)Alogicalcircuitmadebetween thesendingandreceiving computer.
virtualcircuitswitching Aswitching technique usedinswitched WANs.
virtuallinkAnOSPFconnection betweentworoutersthatiscreatedwhenthephysical link
isbroken.Thelinkbetweenthemusesalongerpaththatprobably goesthroughseveralrouters.
virtuallocalareanetwork (VLAN) Atechnology thatdividesaphysicalLANintovirtual
workgroups throughsoftware methods.
virtualprivatenetwork (VPN) Atechnology thatcreatesanetworkthatisphysically
public,butvirtually private.
virtualtributary (VT)ApartialpayloadthatcanbeinsertedintoaSONETframeand
combined withotherpartialpayloads tofillouttheframe.
VoiceOverFrameRelay(VOFR) AFrameRelayoptionthatcanhandlevoicedata.
voiceoverIPAtechnology inwhichtheInternetisusedasatelephone network.
w
WalshtableInCDMA,atwo-dimensional tableusedtogenerate orthogonal sequences.
wave-division multiplexing (WDM) Thecombining ofmodulated lightsignalsintoonesignal.
wavelength Thedistanceasimplesignalcantravelinoneperiod.
weakcollision Givenadigest,creatingasecondmessage withthesamedigest.
webpageAunitofhypertext orhypermedia available ontheWeb.
weighted fairqueueing Apacketscheduling technique toimproveQoSinwhichthepackets
areassigned toqueuesbasedonagivenprioritynumber.
well-known portnumber Aportnumberthatidentifies aprocessontheserver.
wideareanetwork (WAN) Anetwork thatusesatechnology thatcanspanalarge
geographical distance.
wideareatelephone service(WATS)Atelephone serviceinwhichthechargesarebased
onthenumberofcallsmade.
WorldWideWeb(WWW) Amultimedia Internetservicethatallowsuserstotraversethe
Internetbymovingfromonedocument toanothervialinksthatconnectthemtogether.1106 GLOSSARY
x
X.25AnITU-Tstandard thatdefinestheinterface between adataterminal deviceanda
packet-switching network
X.509 AnITU-Tstandard forpublickeyinfrastructure (PKI)
z
zoneInDNS,whataserverisresponsible fororhasauthority over.[AL98]
[AZ03]
[Bar02]
[BELOO]
[Ber96J
[Bis03]
[BlaOO]
[81a03][CBR03]
[ComOO]
[Com04]
[CouOl]
[DH03]
[Dro02]Albitz,P.andLiu,C.DNSandBIND.Sebastopol, CA:O'Reilly, 1998.
Agrawal D.andZeng,Q.Introduction toWireless andMobileSystems.
PacificGrove,CA,NJ:Brooks/Cole Thomson Learning, 2003.
Barr,T,Invitation toCryptology. UpperSaddleRiver,NJ:PrenticeHall,
2002.
Bellamy, J.DigitalTelephony. NewYork,NY:Wiley,2000.
Bergman, J.DigitalBaseband Transmission andRecording. Boston,
MA:Kluwer,1996.
Bishop,M.Computer Security. Reading, MA:Addison-Wesley, 2003.
Black,U.QoSInWideAreaNetwork. UpperSaddleRiver,NJ:Prentice
Hall,2000.
Blahut,R.Algebraic CodesforDataTransmission. Cambridge, UK:
Cambridge University Press,2003.
Cheswick, W.,Bellovin, S.,andRubin,A.Firewalls andInternetSecurity.
Reading, MA:Addison-Wesley, 2003.
Comer,D.Internetworking withTCPlIp,Volume1:Principles, Protocols,
andArchitecture. UpperSaddleRiver,NJ:PrenticeHall,2000.
Comer,D.Computer Networks. UpperSaddleRiver,NJ:PrenticeHall,
2004.
Couch,L.DigitalandAnalogCommunication Systems. UpperSaddle
River,NJ:PrenticeHall,2000.
Doraswamy, H.andHarkins, D.IPSec.UpperSaddleRiver,NJ:Prentice
Hall,2003.
Drozdek, A.ElementsofDataCompression. Brooks/Cole Thomson
Learning, 2003.
11071108 REFERENCES
[DutOl]
[FH98]
[For03]
[For06]
[FRE96]
[GarOl]
[Gas02]
[GW04]
[HaIOl]
[Ham80]
[Hsu03]
[HuiOO]
[IzzOO]
[Jam03]
[KCK98]
[Kei02]
[Kes97]
[KMK04]
[KPS02]
[KROS]
[Los04]
[Mao04]Dutcher, D.TheNATHandbook. NewYork,NW:Wiley,2001.
Ferguson, P.andHuston,G.Qualityo/Service. NewYork,NW:Wiley,1996.
Forouzan, B.LocalAreaNetworks. NewYork,NY:McGraw-Hill, 2003.
Forouzan, B.TCPIIPProtocol Suite.NewYork,NY:McGraw-Hill, 2006.
Freeman, R.Telecommunication SystemEngineering. NewYork,NW:
Wiley,1996.
Garret,P.Making,Breaking Codes.UpperSaddleRiver,NJ:Prentice
Hall,2001.
Gast,M.802.11WirelessNetwork. Sebastopol, CA:O'Reilly, 2000.
Garcia,A.andWidjaja,I,Communication Networks. NewYork,NY:
McGraw-Hill, 2003.
Halsall,F.Multimedia Communication. Reading, MA:Addison-Wesley,
2001.
Hamming, R.CodingandInformation Theory.UpperSaddleRiver,NJ:
Prentice Hall,1980.
Hsu,H.AnalogandDigitalCommunications. NewYork,NY:
McGraw-Hill, 2003.
Huitema, C.RoutingintheInternet. UpperSaddleRiver,NJ:Prentice
Hall,2000.
Izzo,P.GigabitNetworks. NewYork,NY:Wiley,2000.
Jamalipour, A.WirelessMobileInternet. NewYork,NY:Wiley,2003.
Kadambi, j.,Crayford, I.,andKalkunte, M.GigabitEthernet. Upper
SaddleRiver,NJ:Prentice Hall,1998.
Keiser,G.LocalAreaNetworks. NewYork,NY:McGraw-Hill, 2002.
Keshav,S.AnEngineering Approach toComputer Networking. Reading,
MA:Addison-Wesley, 1997.
KumarA.,Manjunath, D.,andKuri,1.Communication Networking. San
Francisco, CA:Morgan, Kaufmans, 2004.
Kaufman,c.,Pedmann, R.,andSpeciner, M.NetworkSecurity. Upper
SaddleRiver,NJ:Prentice Hall,2000.
Kurose, 1.andRoss,K.Computer Networking. Reading, MA:Addison­
Wesley,2005.
Loshin, P.IPv6:Theory,Protocol, andPractice. SanFrancisco, CA:
Morgan, Kaufmans, 2001.
Mao,W.ModemCryptography. UpperSaddleRiver,NJ:Prentice Hall,
2004.[Max99]
[MOV97]
[Moy98]
[MSOl]
[PD03]
[Pea92]
[PerOO]
[PHS03]
[ResOl]
[Rhe03]
[Ror96]
[SaI03]
[Sau98]
[Sch96]
[Sch03]
[Spi74]
[SpuOO]
[S8805][8ta02]
[Sta03]
[8ta04]REFERENCES 1109
Maxwell, K.Residential Broadband. NewYork,NY:Wiley,2003.
Menezes, A.,Oorschot, P.,andVanstone, S.Handbook ofApplied
Cryptograpy. NewYork,NY:CRCPress,1997.
Moy,J.OSPF:AnatomyofanInternetRoutingProtocol. Reading, MA:
Addison- Wesley,1998.
MauroD.andSchmidtK.Essential SNMPSebastopol, CA:O'Reilly,
2001.
Peterson, L.,andDavieB.Computer Networks: ASystemsApproach.
SanFrancisco, CA:Morgan, Kaufmans, 2000.
Pearson, J.BasicCommunication Theory.UpperSaddleRiver,NJ:
Prentice Hall,'1992.
Perlman,R.Interconnection: Bridges,Routers,Switches, andIntemet­
workingProtocols. Reading, MA:Addison-Wesley, 2000.
Pieprzyk, J.,Hardjono, T,andSeberry,J,Fundamentals ofComputer
Security. Berlin,Germany: Springer, 2003.
Rescorla, E.SSLandTSL.UpperSaddleRiver,NJ:Prentice Hall,2000.
Rhee,M,InternetSecurity. NewYork,NY:Wiley,2003.
Rorabaugh, C.ErrorCodingCookbook. NewYork,NY:
McGraw-Hill, 1996.
Solomon, D. DataPrivacyandSecurity. Berlin,Germany: Springer,
2003.
Sauders, S.GigabitEthernet Handbook. NewYork,NY:McGraw-Hill,
1998.
Schneier, B.AppliedCryptography. Reading, MA:Addison-Wesley,
1996.
Schiller,B.MobileCommunications. Reading, MA:Addison-Wesley,
2003.
Spiegel,M.FourierAnalysis. NewYork,NY:McGraw-Hill, 1974.
Spurgeon, C.Ethernet. Sebastopol, CA:O'Reilly, 2000.
Shimonski, R.,Steiner,R.Sheedy,S.Network CablingIlluminated.
Sudbury, MA:JonesandBartlette, 2005.
Stallings, W.Wireless Communications andNetworks. UpperSaddle
River,NJ:Prentice Hall,2002.
Stallings, W.Cryptography andNetwork Security. UpperSaddleRiver,
NJ:Prentice Hall,2003.
Stallings, W.DataAndComputer Communications. UpperSaddleRiver,
NJ:Prentice Hall,2004.1110 REFERENCES
[S1398]
[Ste94]
[Ste96]
[Ste99]
[Sti02]
[SubOl]
[SWE99]
[SX02]
[Tan03]
[ThoOO]
[WVOO]
[WZOl]
[YSOl]
[Zar02]Stallings, W.HighSpeedNetworks. UpperSaddleRiver,NJ:Prentice
Hall,1998.
Stevens, W.TCPIIPIllustrated, Volume1.UpperSaddleRiver,NJ:
Prentice Hall,2000.
Stevens, W.TCPIIPIllustrated, Volume3.UpperSaddleRiver,NJ:
Prentice Hall,2000.
StewartIII,J.BGP4:Inter-Domain RoutingintheInternet. Reading,
MA:Addison-Wesley, 1999.
Stinson,D.Cryptography. NewYork,NY:Chapman &Hall/CRC, 2002.
Subramanian, M.Network Management. Reading, MA:Addison­
Wesley,2000.
Scott,C.,Wolfe,P,andErwin,M.VirtualPrivateNetworks. Sebastopol,
CA:O'Reilly, 1998.
Stewart,R.andXie,Q.StreamControlTransmission Protocol (SCTP).
Reading, MA:Addison-Wesley, 2002.
Tanenbaum, A.Computer Networks. UpperSaddleRiver,NJ:Prentice
Hall,2003.
Thomas, S.SSLandTLSEssentials. NewYork,NY:Wiley,2000.
Warland, J.andVaraiya, P.HighPeiformance Communication
Networks. SanFrancisco, CA:Morgan, Kaufmans, 2000.
Wittmann, R.andZitterbart, M.Multicast Communication. San
Francisco, CA:Morgan, Kaufmans, 2001.
YuanR.andStrayer,W.VirtualPrivateNetwork. Reading, MA: Addison­
Wesley,2001.
Zaragoza, R.TheArtofErrorCorrecting Coding.Reading, MA:
Addison- Wesley,2002.Numerics
1000Base-CX, 414
1000Base-LX, 414
lOOOBase-SX, 414
1000Base- T,414
100Base-FX,410-411
100Base-T4, 410,412
1OOBase-TX,410-411
lOBase2, 404
10Base5,403
lOBase-F,405
lOBase-T,404
full-duplex, 408
lOGBase-E,416
10GBase-L,416
IOGBase-S, 416
2BIQ,111
HDSL,255
3DES.SeeTripleDES
4B/5B,1164D-PAM5,
113
GigabitEthernet, 415
56Kmodem,250
ADSL,252
5-s10tframe,439
800service,247
802.11,428
8BIlOB,118
GigabitEthernet, 415
8B/6Tcode,1055
8B6T,112
900service,247
A
AAbattery,60
AAL,532
AALl,532
AAL2,532
AAL3/4,534
AAL5,535
ABM,341
ACvalue,905
access,363
accesscontrol
datalinklayer,35
accesspoint.SeeAPaccessrate,787
accounting management, 877
ACK,724
duplicate, 732
inpoll,381
Selective RepeatARQ,339
ACKframe,318
ACKmessage, 921
acknowledgement number,
319,719
acknowledgement policy,766
acknowledgment, 731
circuitswitching, 217~218
CSMAlCA, 378
flowcontrol,311
Go-Back-N, 326
virtual-circuit network, 225
ACL,439
activedocument, 860
activeopen,723
adhocarchitecture
network,421
additiveincrease, 770
address,1061
IP,47
link,46
logical,36
needformultiple, 612
physical, 46
port,49
service-point, 38,701
types,45,52
virtual-circuit network, 222
addressaggregation,
561,652
addressallocation, 561
addressblock,555
addressfield
HDLC,342
addressmask
ICMPv6,640
addressmaskmessage, 626
addressresolution protocol.
SeeARP
addressspace,550
addresstoname
resolution, 807addressing, 45
circuitswitching, 215
Ethernet, 400
VPN,1007
admission, 781
admission control,780
admission policy,766
ADSL,252-253, 255
adaptive, 252
DMT,254
downstream dataand
control,253
HDSL,255
idlechannels, 252
localloop,252
upstream dataandcontrol,
253
VDSL,255
voice,252
ADSLLite,254
Advanced Encryption
Standard. SeeAES
Advanced MobilePhone
System.SeeAMPS
Advanced Research Projects
Agency.SeeARPA
AES,943
configurations, 944
round,944
structure, 944
AFPHB,786
agent,877-878
database, 878
function, 891
MIB,886
passiveopen,895
trap,878
AHprotocol, 998
authentication data
field,999
ESP,1001
nextheaderfield,999
sequence number,999
SPIfield,999
ALfield,534
alias,831
Alice,932allocation ofresources, 745
ALOHA,365
collision, 365
pureALOHA, 365
vulnerable time,367
alternate markinversion.
SeeAMI
AM,153-155
bandwidth, 153-154
carrier,153
AMbandwidth, 153
AMradio,71,167
AMstation,154
American National Standards
Institute. SeeANSI
Amelican Standard Codefor
Information Interchange.
SeeASCII
AMI,110
B8ZS,119
HDSL,255
synchronization, 111
amplifier, 447
attenuation, 81
cableTV,256
amplitude, 142,144
ASK,143
FM,154
FSK,146
measurement, 59
PM,155
PSK,148
sinewave,65
amplitude modulation. SeeAM
amplitude shiftkeying.
SeeASK
AMPS,470
analogdata,57
analoghierarchy
telephone system,165
analogleasedservice,
165,247
analogservice,247
analogsignal,57-58,
101,120
digitize,120
periodic, 59
11111112 INDEX
analogswitched service,247
analogtransmission, 141
Tline,177
analogTV,71
analog-to-analog conversion,
141,152
analog-to-digital
conversion, 101
ANDoperation, 557
angleofincidence, 198
anonymous FTP,844
ANSI,20
antenna
focus,206
hom,207
line-of-sight, 203
parabolic dish,207
satellite,480
anti-jamming, 183
anycastaddress,570
AP,421
APNIC,569
applet,860
application adaptation layer.
SeeAAL
application layer,41
directory services, 42
filemanipulation, 42
mailservices, 42
NVT,41
responsibilities, 41,795
services, 41
TCPIIP,42,45
architecture
e-mail,824
OSImodel,30
area,671
areaborderrouter,671
ARP,43-44,613
broadcast query,612
encapsulation, 615
fourcases,615
hardware lengthfield,614
hardware typefield,614
hosttohostondifferent
networks, 616
hosttohostonsingle
network, 615
ICMPv6, 596,640
operation, 615
operation field,614
packetcomponents, 612
packetformat,613
process,615
protocollengthfield,614
protocoltypefield,614
proxy,617querypacket,612
response packet,612
response packet
components, 612
routertohostondifferent
networks, 616
routertohostonsame
network, 616
senderhardware address
field,614
senderprotocoladdress
field,614
targethardware address
field,614
targetprotocoladdress
field,614
unicastresponse, 612
ARPA,17
ARPANET, 17
ARQ,311
AS,659,984
graphical
representation, 673
multihomed, 677
speakernode,674
stub,676
transit,677
types,676
ASCII,5,628,1029
character codetable,1032
ASK,142
bandwidth, 144,146
binary,144
carriersignal,143
constellation, 151
implementation, 144
multilevel, 145
withPSK,152
ASN.1,989
simpletypeexamples, 883
SMI,882
ASP,859
association, 737,743
termination, 748
asymmetric
cryptography, 932
asymmetrical DSL.
SeeADSL
asymmetric-key
cryptography, 933
keys,933
asynchronous balanced mode.
SeeABM
asynchronous connectionless
link.SeeACL
asynchronous TDM
ATM,525asynchronous
transmission, 133-134
Asynchronous Transmission
Mode.SeeATM
AT&TBellSystem,1059
AT&Tdivestiture, 1059
ATM,227,308,523,
526-527
AALl,532
AAL2,532
AAL3/4,534
AAL5,535
architecture, 526
asynchronousTDM,525
ATMlayer,530
available bitrateclass,789
backward compatibility, 523
cell,527
celldelayvariation, 790
cellerrorratio,790
celllossratio,790
celltransferdelay,790
cellvariation delay
tolerance, 790
connection
establishment, 528
connection release,528
connection types,536
connection-oriented, 538
connections, 528
constantbitrateclass,789
designgoals,523
example, 526
headerforNNI,531
hierarchical routing,527
Identifier, 527
Information Super-
Highway, 523
layers,529
minimum cellrate,790
multimedia, 536
multiplexing, 525
network-related
attributes, 790
peakcellrate,790
physicallayer,530
QoS,789
SONET,530
sustained cellrate,790
SVC,529
switching, 529
switching fabric,529
unspecified bitrateclass,789
user-related attributes, 790
variablebitrateclass,789
variablebitratenon-real
time,789variablebitratenonreal
time,789
variablebitrate
real-time, 789
virtualconnection, 526
WAN,536
ATMForum,523
address,1061
ATMLAN,536
advantages, 536
architecture, 536
BUS,539
client/server, 540
expansion, 536
LANE,538
legacy,536
mixedarchitecture, 537
pure,536
ATMlayer,529
celllosspriority,532
cellsize,530
congestion control,532
function, 530
genericflowcontrol,531
headererror
correction, 532
headerforUN!.531
headerformat,531
NNIlevelflowcontrol,531
payloadtype,531
UNIlevelflowcontrol,531
VCIfield,531
VPI,531
VPIfield,531
ATMswitch,536
attenuation,81,446
amplifier, 81
opticalfiber,202
attribute, 856
audio
compression, 903
audiosignal,902
authentication, 349
AHprotocol, 1000
Diffie-Hellman, 956
entity,962
IPv6,567,596
message, 962
packet,349
PPP,352
authentication data,999
authentication extension
header,602
Authentication Header
protocol. SeeAHprotocol
authentication serve.SeeAS
authentication state,349automatic repeatrequest.
SeeARQ
autonegotiation, 409
autonomous system,671.
SeealsoAS
averagedatarate,762
B
B8ZS,118
backbone, 671
areaid,671
bus,11
logicalbus,456
logicalstar,457
virtuallink,671
backbone network, 456
backbone router,67\
backoffstrategy
CSMAlCA,378
backofftime,366
backward explicit
congestion notification.
SeeBECN
backward signal,768
band,204
AMPS,470
Bluetooth, 437
D-AMPS, 471
GSM,472
IS-95,474
band-limited signal,1049
band-pass channel,79,141
low-pass, 79
bandwidth, 69,89,103,143,
154,248,518
AM,153-154
AMradio,154,167
ASK,144,146
audiosignal,154--155
baudrate,104
BFSK,146
bitrate,78
BPSK,149
bridge,406
cellulartelephone, 167
digitalsignal,74
digitalsignal
approximation, 77
effective, 104
Ethernet, 406
FDM,162
flowcharacteristic, 776
FM,154--155
FMrequirement, 154
group,166
inbps,89
inhertz,89infinite,74
localloop,242
mastergroup,166
minimum, 104
non-periodic signal,69
NRZ-IandNRZ-L,108
opticalfiber,202
periodicsignal,69
PM,156
QAM,152
real-time traffic,915
supergroup, 166
telephone line,248
throughput, 90
transmission time,91
bandwidth ondemand
burstydata,518
bandwidth-delay product,
92,322
banyanswitch,233
internalcollision, 235
Barkersequence, 184
base,1050
base10,1051
base256,1037,1040
tobinary,1042
weightandvalue,1040
basee,1051
baseheader,597
basestation(BS),467
hasetransfonnation, 1052
baseband layer,437
baseband transmission, 75
approximation, 78
baseline, 104
baselinewandering, 104
Manchester, 109
NRZ-L,107
BasicEncoding Rules.
SeeBER
BasicLatin,1029
basicmultilingual plane
(BMP),1030
basicserviceset.
SeeBSS
BAsize,534
Batcher,235
Batcher-banyan switch,235
baudrate,103,142
andbitrate,142
bandwidth, 104
Be,787
Be,788
beaconframe,426
BECN,521
mechanism, 773
sender,773Bell Operating Company.
SeeBOC
BER,884
classsubfield, 884
format,884
formatsubfield, 884
integerexample, 885
lengthfield,885
numbersubfield, 884
SNMP,893
tagfield,884
valuefield,885
best-effort delivery, 44,583
B-frame, 908
BFSK,146
BGP,659,676
external, 677
internal,677
pathattributes, 677
pathvectorrouting,676
port,1065
session,677
bidirectional edge,673
bidirectional frame,908
binaryASK,144
binaryexponential
backoff,366
binarynotation, 550
findingtheclass,552
binarynumber,1038-1040
binaryPSK,148
symbols, 1038-1039
tobase256,1042
tohexadecimal, 1041
weightandvalue,1038
binarysystem,
1037-1038
biphasecoding,109
bipolarAMI,110
bipolarcoding,110
bit,102
bitpadding, 174,176
bitrate,73,103,142
andbaudrate,142
bandwidth, 78
bitstuffing,174,310
bit-oriented cipher,938
bit-oriented protocol, 309
bitspersecond,73
block,555
messagedigest,968
blockcode
errorcorrection, 277
linear,277
minimum Hamming
distance, 276
non-linear, 277INDEX' 1113
blockcoding,115,269
8B/I0B,118
combination, 115
division, 115
errorcorrection, 273
errordetection, 272
substitution, 115
blockdescriptor, 843
blockprocessing
RIPEMD-160, 968
blocking, 229
Blowfish, 945
Bluetooth, 421,434
applications, 434
architecture, 435
device,436
framefonnat,439
layers,436
Bluetooth LAN,435
BNCconnector, 196
Bob,932
BOC,1059
BOOTP, 618-619
binding,620
relayagent,619
staticconfiguration
protocol, 620
staticprotocol, 620
BorderGateway Protocol.
SeeBGP
BPSK,148
constellation, 151
implementation, 149
QPSK,149
bridge,406,447
asafilter,448
collision domain,407
connecting LANs,454
dynarnic, 449
Ethernet, 406
function, 406,447
loopproblem, 450
multipleLANissues,454
redundant, 450
sourcerouting,454
transparent, 449
bridgeprotocoldataunit
(BPDU),452
bridgedEthernet, 406
broadcast address
Ethernet, 400
broadcast/unknown server.
Seebus
broadcasting, 680
VLAN,460
browser, 852
clientprotocol, 8521114 INDEX
browser-Cant.
controller, 852
dynamic document, 857
HTML,855
interpreter, 852
markuplanguage, 855
streaming storedaudio/
video,909
BSS,421
BSS-transition mobility, 423
Btag,534
bucketbrigadeattack,956
buffer
circular,717
flowcontrol,311
message digest,968
packetswitch,232
receiversite,717
sendersite,717
TCP,717
bufferallocation, 534
burst,267
bursterror,267-268
2single-bit errors,296
example, 268
burstydata,518
FrameRelay,518
T-line,518
trafficcontrol,788
burstyflow,763
burstytraffic
leakybucket,779
tokenbucket,779
bus,9,11-12
advantages, II
backbone, II
disadvantages, 12
droplines,11
fault,12
tap,11
busringtopology, 382
bustopology, 34
BYEmessage, 921
bytenumber,719
bytestuffing,308
bytesynchronization, 135
byte-oriented protocol, 736
byte-stuffing, 349
C
CA,987,992
cable
coaxial,195
twisted-pair, 193
cablemodem. SeeCM
cablemodemtransmission
system.SeeCMTScablenetwork, 241
cableTV,256
coaxialcable,197
headend,256
caching,808
counter,809
problems, 809
time-to-live, 809
unauthoritative source,809
CaesarCipher,936
CANCEL message, 921
capacities, 178,876
carrier,79,370
AM,153-154
FM,154-155
inter-LATA, 243
PM,155
carrierdivisionmultiple
access.SeeCOMA
carrierextension, 413
carrierfrequency, 143-144
carriersensemultipleaccess.
SeeCSMA
carriersensemultiple aCCess
withcollision avoidance.
SeeCSMAICA
carriersensemultipleaccess
withcollision detection.
SeeCSMAICO
carriersignal,143
ASK,143
cascading, 82
casefactor,103
CAST-l28,945
CATV,256
CBC,946
characteristics, 947
CBT,690
autonomous system,690
corerouter,691
OVMRP andMOSPF, 690
encapsulation, 691
leavingthegroup,690
multicast packet,691
rendezvous router,690
CCITT,20
CCK,434
COMA,162,383,385,
474-475,478
encoding, 387
sequence generation, 389
COMAmultiplexer, 475
COMA2000,478
cell,524, 527-528, 790
ATM,527
definition, 524
header,528payload,527
size,527
structure, 528
cellnetwork, 524
concept,524
example, 525
multiplexing, 524
real-time transmission, 525
stream,525
vsframenetwork, 524
cellrelay,523
cellulartelephone, 167
cellulartelephony, 467
firstgeneration, 469
handoff,469
MSC,469
placingacall,468
querysignal,469
radius,467
receiving acall,469
secondgeneration, 470
thirdgeneration, 477
tracking, 467
transmission power,467
weaksignal,469
centerrouter,684
Cerf,Vint,17
certification authority.
SeeCA
CFB,947
CGI,857
body,859
form,858
header,859
output,859
parameter passing,858
querystring,858
Challenge Handshake
Authentication Protocol.
SeeCHAP
channel,8,162
channelidentifier, 533
channelization, 383
channels
FDM,162
CHAP,352
packettypes,353
password, 353
security,353
three-way handshake, 352
character-oriented cipher,938
character-oriented
protocol, 308
Cheapemet. SeelOBase2
checksum, 298,711,731
ashashfunction, 967
example, 594examples, 298
fragmentation, 591
headercoverage, 594
IPv4,594
option,712
performance, 301
protocolfield,712
receiverprocedure, 300
SCTP,740
senderprocedure, 300
testing,628
UOP,711-712
chip,l84,386
chokepoint,767
chunk,739,743
format,743
identifier, 741
TSN,739
CIDR,556
cipher,932
AES,943
bit-oriented, 938
Caesar,936
character-oriented, 938
compression
permutation, 940
monoalphabetic, 935
polyalphabetic, 935
rotation,939
shift,936
straightpermutation, 940
substitution, 935,939
transposition, 937
XOR,938
cipherblockchaining mode.
SeeCBC
cipherfeedback mode.
SeeCFB
ciphertext, 932
RSA,950
CIR,787
circuit
dedicated, 217
circuitswitching, 214
acknowledgment, 217
datatransfer,217
delay,217
efficiency, 217
telephone company, 218
circuit-switched network,
214,217
telephone network, 244
circularbuffer,717
cladding, 198
step-index multimode, 199
classAaddress,553
classBaddress,553classCaddress,553
classfuladdressing, 552
blocks,553
classes,553
classless addressing, 554
classless addressing, 555
addressallocation, 561
c1assfuladdressing, 554
firstaddress,556
hierarchy, 561
lastaddress,556
restrictions, 555
routingtable,656
Classless Interdomain
Routing. SeeClDR
cleartosend(CTS),425
CLEC,242,1059
POP,243
client,704
clientprogram
portnumber,704
client/server
DNS,797
e-mail,827
LANE,539
paradigm, 704
remotelogin,817
types,797
WWW,851
client-server paradigm, 704
Closcriteria,230
closed-loop congestion
control,765
coax.Seecoaxialcable
coaxialcable,192,195
applications, 197
cableTV,197,256
conductor, 196
connector, 196
Ethernet, 198
frequency range,195
HFC,257
performance, 197
sheath,196
standards, 196
telephone networlc, 197
code,5
codedivisionmultipleaccess.
SeeCDMA
codepoint, 585
codeword, 271,275
dataword, 292
geometry, 276
coding,10I,269
AMI,110
complexity, 106
errOrdetection, 106noise
coding,106
NRZ,107
schemes, 106
summary, 114
codingtheory,386
coherent BFSK,147
ColdFusion, 859
collision, 364
CSMA,370
CSSMAJCD,374
hashfunction, 967
slottime,401
wireless, 425
collision domain,407
Committed, 787
committed burstsize.
SeeBe
committed information rate.
SeealsoCIR
calculation, 788
common carrier,242
after1996,1059
Common Gateway Interface.
SeeCGI
community antennaTV,256
compatible address,571
competitive localexchange
carrier.SeeCLEC
complement
Walshtable,389
complementary codekeying.
SeeCCK
composite analogsignal,74
composite signal,66,1046
distortion, 83
compression
FTP,843
MPEG,907
spatial,907
computer data,80
conductor
twisted-pair, 193
unguided media,203
confidentiality, 962, 964, 991
configuration
management, 874
documentation, 874
hardware
reconfiguration, 874
reconfiguration, 874
subsystems, 874
congestion, 521,763,773
additive increase, 770
buffer,623
destination host,623
example, 763FrameRelay,521
ICMPv6,639
leakybucket,778
mUltiplicative
decrease, 771
prevention, 766
queue,764
routers,623
congestion avoidance
FrameRelay,773
congestion avoidance
(additive increase), 772
congestion control,522,720,
761,763,765
closed-loop, 767
FrameRelay,773
networkrole,769
open-loop, 766
SCTP,742,753
congestion policy,769
congestion window, 769
congestion window
(cwnd),730
congestion-controlled
traffic,599
connecting device,
36,445
connection
nonpersistent, 868
persistent, 868
connection control,38
connection establishment
procedure, 723
three-way
handshaking, 723
connection setup,217
connection teardown, 217
connection termination, 748
connectionless, 219
connectionless network, 219
connectionless service,
582,707
UDP,713
connectionless transport
layer,38,701
connection-oriented
protoco\' 538
connection-oriented service,
582,707,718,738
TCP,45
connection-oriented transport
layer,38,701
connector, 193
coaxialcable,196
opticalfiber,200
constantbitratetraffic,762
constellation diagram, 150INDEX 1115
Consultative Committee for
International Telegraphy
andTelephony. See
CCITT
contactaddress,1061
contention, 364
contention window, 378
controlchunk,742
controlfield
HDLC,342
types,343
controlframe,428
controlinformation
SCTP,740
controlvariable, 319
controlled access,379
controller, 10,852
convergence sublayer. SeeCS
convolution coding,269
cookie,725,744-745,853-854
advertising agency,854
COOKIE ACKchunk,744
COOKIE ECHOchunk,744
core,198
corerouter,684,690
Core-Based Tree.SeeCBT
corrupted frame,318
cosinewave,1045
cosmicray,192
cotangent, 1046
countrydomain,805
example, 805
mapping, 807
CPI,534-535
CRC,284,535
ATM,532
design,290
hardware
implementation, 287
HDLC,342
PPP,348
standardpolynomial, 297
CRC-32,399
wireless, 427
criticalangle,198
crossbarswitch,228,233
limitation, 228
crosspoint, 228
crosstalk, 84,193
cryptography, 931,957
comparison, 934
cryptosystem
Diffie-Hellman, 952
CS,532
CSMA,370,377
collision, 370
vulnerable time,3711116 INDEX
CSMAlCA, 365,377
procedure, 378
wirelessnetwork, 378
CSMAlCD, 365,373,
377,401
Ethernet, 399,401
framesize,374
full-duplex switched
Ethernet, 408
procedure, 375
wireless, 423,425
CTS,425
CU,785
curTSN,749
cycle,58
infinite,62
phase,63
cycliccode,284
advantages, 297
analysis, 293
cyclicredundancy check.
SeeCRC
D
DA,399
D-AMPS, 471
data,4,311
transmission, 57
datachunk,742
datacommunications, 4
datacompression
presentation layer,41
datadelivery, 747
dataelement, 102,142
DataEncryption Standard.
SeeDES
dataframe,428
inpoll,381
DataLinkConnection
Identifier. SeeDLCI
datalinkcontrol,
307,311,363
datalinklayer,34,307
accesscontrol,35
addressing, 35
errorcontrol,35,311
flowcontrol,35,311
framing, 35,308
function, 34
physicaladdressing, 35
PPP,347
sub-layers, 363,395
virtual-circuit network, 227
datalinkprocessor, 232
DataoverCableSystem
Interface Specification.
SeeDOCSISdatarate,103
bandwidth, 104
maximum, 129
signalrate,103
dataratelimits,85
datatraffic,761
descriptor, 761
datatransfer,725,747
circuitswitching, 217
multi-homing, 747
SCTP,745
virtual-circuit network, 223
vsdatadelivery, 747
database
DHCP,620
multicasting, 681
datagram, 45,219,583
format,583
inIPv4,583
IP,44
datagram network, 214,219
dataword, 271,275
augmented, 288
codeword, 292
dccomponent, 105
8B6T,112
bipolar,110
Manchester, 109
NRZ-IandNRZ-L,108
DCF,423,442
PIFS,425
repetition interval,426
DCT,905
ACvalue,905
gradientcase,905
sharpchangecase,905
uniformgrayscale
case,905
DDNS,812
DHCp,812
DDS,248
defactostandard, 20
dejurestandard, 20
DEPHB,785
decibel,81decimalnumber,1037
decimalsystem,1037
symbols, 1037
tobinary,1038
weightandvalue,1038
decisionlogicanalyzer, 280
decoder, 278
decoding
CDMA,387
decryption, 932
RSA,950
defaultmask,553defaultmethod,649
defaultrouter,624
degreeofpolynomial, 291
delay,90,764
circuitswitching, 217
datagram network, 221
load,765
real-time, 912
time-division switch,231
virtual-circuit network, 226
delayedresponse, 633
delimiter, 309
delivery, 647
direct,647
end-to-end, 37,701
indirect,647
source-to-destination,
36-37,547,701
station-to-station, 36,547
deltamodulation. SeeDM
demodulator, 164
demultiplexer, 162
demultiplexing, 164,707
filters,164
transport layer,707
DEMUX. Seedemultiplexer
denialofserviceattack,725
denseWDM,168
Department ofDefense.
SeeDOD
DES,941
triple,943
designated parentrouter,688
destination address.SeeDA
destination host
reassembly, 590
destination option,603
destination serviceaccess
point(DSAP), 396
destination unreachable, 623
ICMPv6,639
DHCP,620
BOOTP, 620
configuration, 620
database, 620
DDNS,812
dynamic configuration
protocol, 620
dialogcontrol,39
Differential Manchester, 109
Differentiated Services.
SeeDF
Diffie-Hellman, 952
DIFS,425
digital
vsanalog,57
digitalAMPS.SeeD-AMPSdigitalcellulartelephone, 80
digitaldata,57,101
digitaldataservice.SeeDDS
digitalservice,247
noise,247
digitalserviceunit.SeeDSU
digitalsignal,57-58,
71,101
bandwidth, 74
bitrate,73
composite analogsignal,
74,79
levels,71
non-periodic, 74
digitalsignalservice.SeeDS
digitalsubscriber line.
SeeDSL
digitalsubscriber lineaccess
multiplexer. SeeDSLAM
digitaltoanalog
encoding, 142
digitaltransmission, 101
digital-to-analog, 141-142
bandwidth, 143
digital-to-digital
conversion, 101
Dijkstraalgorithm, 668
multicast linkstate
routing,685
directcurrent,105
directdelivery, 647
directsequence spread
spectrum. SeeDSSS
directory services, 42
discarding policy,766
DiscreteCosineTransform.
SeeDCT
discretemultitonetechnique.
SeeDMT
disklessmachine, 618
distanceleaming, 682
Distance VectorMulticast
RoutingProtocol.
SeeDVMRP
distancevector
routing,660
initialtables,661
instability, 663
RIP,665
sharing,661
distortion, 83
distributed coordination
function. SeeDCF
distributed interframe space
(DIFS),425
distributed processing, 7
distribution hub,257distribution system,422
divisor
CRC,286-287
DLCI,519
FrameRelay,520
DM,129
adaptive, 131
demodulator, 130
modulator, 130
quantization error,131
DMT,252,255
ADSL,253
divisionofbandwidth, 252
FDM,252
QAM,252
VDSL,255
voice,252
DNS,797-798
caching,808
countrydomain,805
divisions, 803
domain,802
encapsulation, 812
genericdomain,804
Internet, 803
inverted-tree
structure, 799
labels,799
levels,799
message, 809
primaryserver,803
questionrecord,811
recordtypes,811
resolver, 806
resource record,811
reversedomain,805
rootserver,803
secondary server,803
server,802
TCP,812
UDP,812
updating, 812
zone,802
DNSmessage
additional information
section,811
answersection,810
authoritative section,811
header,809
identification field,809
question section,810
DNSresponse
answerrecordsfield,810
question records
field,810
DOcommand, 822
donotfragment bit,591DOCSIS,260
downstream, 261
upstream, 260
document, 854,965
active,860
dynamic, 857
static,855
DOD,17
domain,801
country,805
generic,805
inverse,805
domainname,799,831
full,799
DomainNameSystem.
SeeDNS
domains, 802
DONTcommand, 822
dotted-decimal notation, 550
downlink, 481
downloading
V90,250
dropcable,256
dropline,11
dropper,786
DS,176,785
DS-Oservice,176
DS-lservice,176
DS-2service,176
DS-3service,177
DS-4service,177
field,785
hierarchy ofdigital
signals,176
DS-O,I77
DSCP,785
DSL,241,251
limitation, 257
DSLAM,254
DSSS,184,474-475
bandwidth sharing,185
HR-DSSS,434
wireless, 432
DSU,248
dualringtopology, 382
dualstack,604
duplex,7
duplicate ACKs,732
DVMRP, 686,690
CBT,690
MBONE,693
PIM-DM,692
DWDM,168
dynamic, 658
dynamic database, 620
dynamic document, 857
example, 857
script,859Dynamic DomainName
System.SeeDDNS
Dynamic HostConfiguration
Protocol. SeeDHCP
dynamic mapping, 612
dynamic port,705
dynamicrouting,655
dynamic routingtable,656
dynamic table,658
E
Eline,178
capacity, 178
eavesdropping, 603
ECB,946
echorequestandreply
messages, 625
ICMPv6,640
e-commerce, 854
EFPHB,785
effective bandwidth,
104,762
efficiency
circuitswitching, 217
datagram network, 220
virtual-circuit network, 226
EHF,204
EIA,20
interfaces, 21
manufacturing concerns, 21
electromagnetic energy,192
electromagnetic signals,57
electromagnetic spectrum,
192,203
bands,204
Electronic CodeBlock
(ECB),946
electronic codebookmode.
SeeECB
Electronic Industries
Association. SeeEIA
electronic mail.Seee-mail
electronic serialnumber
(ESN),474
elm,829
e-mail,824
address,831
alias,831
architecture, 824
composing, 828
forwarding, 829
reading,829
replying, 829
encapsulati on
ARP,615
DNS,812
IGMP,635INDEX 1117
Encapsulation Security
Payload. SeeESP
encoder, 278
CRC,286
encoding
Ethernet, 403
RZ,108
encrypted securitypayload.
SeeESP
encryption, 932
DES,941
IPv6,596
presentation layer,40
RSA,950
symmetric-key, 933
endoffice,241-242
endswitch,243
POP,243
endingtag,534
end-of-option option,595
energylevel,375
entity,19
envelope, 830
AM,153
ephemeral portnumber,704
queue,714
error,267
errorcontrol,38,307,311,
702,720,731
concept, 311
datalinklayer,311
HDLC,343
PPP,348
retransmission, 31]
SACKchunk,753
SCTP,742,751
TCP,715
transport layer,37,701
UDP,713
errorcorrection, 269,273
blockcoding,273
minimum distance, 276
retransmission, 269
errordetection, 269
blockcoding,116,272
checksum, 298
FrameRelay,518
HDLC,342
tools,731
errorreporting, 638
ICMP,622
ICMPv6,639
escapecharacter (ESC),309
ESP,603,1000
AHprotocol, 1001
authentication data
field,10011118 INDEX
ESP-Cont.
nextheaderfield,1000
padlengthfield,1000
paddingfield,1000
procedure, 1000
sequence number
field,1000
SPIfield,1000
ESS,421
communication, 422
composition, 422
stations,422
ESS-transition mobility, 423
established, 528
establishment state,349
Etag,534
Ethernet
addresstransmission, 400
addressing, 400
BNC,196
bridged,406
collision, 401
collision domain,407
CRC,399
CSMA/CD, 408
DA,399
datafield,399
fields,398
framelength,399
full-duplex switched, 408
implementations, 402
IPv6address,570
length/type field,399
MACcontrolsublayer, 409
MACframe,398
MACsublayer, 409
maximum frame
length,399
minimum datalength,399
multicast address,400
multicasting, 636
networklength,402
preamble, 398
SA,399
SFD,398
sharedcapacity, 406
slottime,401
switched, 407
thick,403--405
thin,404
unicastaddress,400
Ethernet address,46
Eudora,830
Eve,932
excessburstsize.SeeBe
exclusive OR.SeeXOR
exponential function, 1050exponential increase, 769
exposedstation,429,431
extended address,521
Extended ASCII,1029
extended serviceset.SeeESS
extension header,602
authentication, 602
destination option,603
ESP,603
fragmentation, 602
hop-by-hop option,602
sourcerouting,602
externalBGP(E-BGP), 677
extremely highfrequency.
SeeEHF
F
fall-back, 249
fall-forward, 249
FastEthernet, 397,409
autonegotiation, 409
backward compatibility, 409
encoding, 411
MACsublayer, 409
physicallayer,410
fastretransmission, 732
faultidentification, 10
faultisolation
ring,12
faultmanagement, 875
isolating thefault,875
performance
management, 876
proactive, 876
reactive, 875
subsystems, 875
FCC,205,477
address,1061
FCS,342
HDLC,342
PPP,348
FDM,162
applications, 167
carrier,162
cellulartelphone, 167
channels, 162
circuit-switched
network, 214
FDMA,384
guardbands,163
implementation, 167
OFDM,433
process,163
telephone system,165
TV,167
FDMA,383,470,473,478
FDM,384FECN,521
receiver, 773
FederalCommunications
Committee. SeeFCC
Feistel,942
DES,941
FHSS,181
bandwidth, 182
bandwidth sharing,183
Bluetooth, 437
wireless, 432
fiber,168,491
fibernode,257
fiber-optic cable,192
bandwiddth
capabilities, 491
trunk,242
FIFOqueueing, 776
leakybucket,778
priorityqueueing, 777
fifthharmonic, 68
filetransfer
problems, 840
filetransferprotocol. SeeFrP
filter
localloop,252
filtering, 448
FINsegment, 727~728
FIN+ACK segment, 728
final,343
fingerprint, 965
firewall,1021
packetfilter,1022
proxy,1023
firstharmonic, 68,77
fixedfilterstyle,784
flag
character-oriented
protocol, 308
flagfield
HDLC,342
flat-topsampling, 121
flickering, 903
flooding, 667
multicast distancevector
routing,686
RPF,686
flowcharacteristics, 775
flowclass,776
flowcontrol,38,307,311,
701,720
buffer,311
concept, 311
congestion, 623
datalinklayer,311
FrameRelay,773
HDLC,343inIF,623
PPP,348
receiver, 311
SCTP,742,748
TCP,715
transport layer,37,701
UDP,713
flowlabel,597,600
real-time transmission, 601
rulesforuse,601
flowspecification, 780-781
FM,153
bandwidth, 154
FMradio,71,167
bandwidth, 167
footprint, 480
LEO,484
forums, 20~21
forwarderrorcorrection, 269
forwardexplicit
congestion notification.
SeeFECN
forwardsignal,768
forwarding, 647-648
classless addrressing, 650
forwarding techniques, 648
four-dimensional five-level
pulseamplitude
modulation.
See4D-PAM5
Fourieranalysis, 67,
74,1046
Fourierseries,1046
Fouriertransform, 1048
four-way handshake,
722,744
FQDN
DNSserver,800
FRAD,522
FrameRelay,522
fragmenation
fragment ofa
fragment, 593
fragmentation, 589,602,747
checksum, 591
definition, 590
donotfragment bit,591
example, 591
fieldscopied,590
flagsfield,591
fragmentation offset,591
headerfields,591
ICMPerrormessage, 591
identification field,591
IPv6,639
morefragment bit,591
offset,591reassembly, 590
reassembly steps,593
SCTP,747
wireless, 426
frame,35,307,342,519,521,
773-774
Bluetooth, 439
HDLC,341
MPEG,907
TDM,170
video,902
framebursting, 413
framechecksequence.
SeeFCS
framelength
Ethernet, 399
fraInenetwork, 523
framesize,524
FrameRelay,227,517
accessrate,787
addressfield,520
architecture, 518
BC,787
Be,788
BECN,521
burstydata,518
CIR,787
command response
bit,521
congestion, 521
congestion avoidance, 773
congestion situation, 774
cost,518
datalinklayer,520
datarate, 518
discardeligibility bit,521
DLCI,519
extended addressbit,521
FECN,521
flowcontrol,773
FRAD,522
frameformat,520
framesize,518
layers,518-519
LMI,522
QoS,787
switchtable,519
userrate,788
virtualcircuitnetwork, 519
YOFR,522
FrameRelayassembler/
disassembler. SeeFRAD
framesize
CSMAlCD, 374
frametag,462
framenetwork
delay,524framing, 307,396
fixed-size, 308
MAC,397
variable-length, 308
framingbit,J75
frequency, 60, 62,121,
142,153
AM,153
asrateofchange,62
ASK,143
carriersignal,143
cellulartelephony, 467
extremes, 62
FM,154
high,62
infinite,62
inverse,60
low,62
non-periodic signal,74
periodicsignal,74
PM,155
PSK,148
sinewave,65
units,61
wavelength, 64
zero,62
frequency band
satellite
communication, 480
frequency divisionmultiple
access.SeeFDMA
frequency hoppingspread
spectrum. SeeFHSS
frequency masking, 904
frequency modulation.
SeeFM
frequency shiftkeying.
SeeFSK
frequency-division
mUltiplexing. SeeFDM
frequency-domain plot,65
FSK,142,144
frequency, 146
FTP,840,852-853
anonymous FTP,844
ASCIIfile,842
attributes of
communication, 842
binaryfile,842-843
block mode, 843
clientcomponents, 840
clientdefinitions, 842
communication, 841
compressed mode,843
connections, 840
controlconnection,
840-841dataconnection, 840-842
datastructure, 842
fileretrieval, 842
filestorage,842
filestructure, 843
filetransfer,843
filetype,842
HTTP,861
NYT,841
pagestructure, 842
port,1065
ports,840
recordstructure, 842-843
sendingadirectory orfile
name,842
servercomponents, 840
textfile,843
transmission mode,843
fulldomainname,799
full-duplex, 7,34
Seeduplex
full-duplex service,718,738
FullyQualified Domain
Name.SeeFQDN
fundamental frequency, 68
G
G.71,924
G.723.1,924
G.723.3,903
G.729,903
gammaray,192
gap
asynchronous
transmission, 133
gatekeeper, 924
gateway, 923
gatewaylink(GWL),484
G-Back-N
sendersite,328
generalheader
SCTP,743
generalquerymessage
generator, 272, 278, 282, 953
CRC,285
examples, 297
generator polynomial, 294
genericdomain,804
firstlevel,805
mapping, 807
GEOsatellite,480-481
geographical routing,655
geosynchronous orbit,481
geosynchronous satellite,481
GETmessage, 909-911
GFSK,437
GIF,857INDEX 1119
GigabitEthernet, 397,412
carrierextension, 413
encoding, 415
framebursting, 413
implementation, 414
MACsublayer, 412
mediumaccess,412
networklength,413
physicallayer,414
traditional, 413
gigabitLAN
4D-PAM5, 113
globaladdress,222
globaladdressing, 549
GlobalPositioning System
(GPS),481
GlobalSystemforMobile
Communication.
SeeGSM
Globalstar, 486
Go-Back-N, 324
acknowledgment, 327
design,327
receiversite,330
receivewindow size,328
sendwindowsize,328
senderslidingwindow, 324
sequence number,324
timer,326
Go-Back-N ARQ
Stop-and-WaitARQ,331
Go-Back-N window, 766
Gopher,853
port,1065
government regulatory
agencies, 20
GPS,482
graded-index multimode
opticalfiber,199
grafting, 689
groundpropagation, 203
antenna, 203
group,166
bandwidth, 166
groupaddress,679
groupid, 632
group-shared tree,684
GSM,472,903
guardband,163,383
jumbogroup,166
telephone system,166
guardtime,384
guestpassword, 844
guidedmedia,192
conductor, 192
definition, 192
fiber-optic cable,1921120 INDEX
H
H.225,924
H.245,924
H.248,736
H.323,736,920, 923
half-close, 727-728
half-duplex, 6,34
Hamming, 280
Hamming code,280
performance, 283
Hamming distance, 274
error,275
minimum, 274
handoff, 469
handshaking
wireless, 425
hardhandoff, 469
hardstate,784
harmonics, 1047
hashalgorithm, 967
hashfunction, 965
criteria,966
MAC,969
weakcollision, 967
hashing
AHprotocol, 999
HDB3,119
HDLC,340,346
addressfield,342
controlfield,342
definition, 340
errordetection, 342
flagfield,342
frameformat,342
frametypes,341
information field,342
LLC,396
NRM,340
stationaddress,342
synchronization pattern,342
transfermodes,340
HDSL,255
2BIQencoding, 255
HDTV,73
headend,256
header,32
cell,528
CGI,859
SCTP,740,743
headererror,624
headertranslation, 605
HEC,534
hexadecimal colon
notation, 567
hexadecimal system,
1037,1039
tobinary,1042
weightandvalue,1039HF,204
HFC,256
bands,258
bandwidth, 257
datarate,258-259
downstream data,258
downstream sharing,259
modulation, 258
sharing,259
transmission medium, 256
upstream data,258
upstream sharing,259
videoband,258
hiddenstation,423,429
hierarchical namespace,798
hierarchical routing,653
hierarchy
nameserver,802
highbitratedigitalsubscriber
line.SeeHDSL
high-density bipolar3-zero.
SeeHDB3
High-level DataLink
Control. SeeHDLC
high-rate DSSS.
SeeHR-DSSS
HMAC,970
hopcount,658
RIP,665
hop-by-hop option,602
jumbopayload, 602
Padl,602
PadN,602
payload, 602
homantenna, 206-207
host
routingtable,624
hostfile,798
hostid,553
host-to-host delivery,
579,703
host-to-host protocol, 44
Hotmail, 839
housevoltage,59
HR-DSSS, 434
HTML,852,855
anchor,857
attribute, 856
browser, 856
example, 855
graphicimage,857
markuplanguage, 855
tag,856
HTTP,839,852-853, 861,
909-911
body,866
client,861embedded commands, 861
entityheader,866
FrPsimilarity, 861
generalheader,864
header,864
headercategories, 864
message format,861
MIME,861
port,1065
proxyserver,868
requestheader,865
response header,865
retrieval Example, 866
server,861
SMTPsimilarity, 861
statuscode,863
statusphrase,863
transaction, 861
version,863
WWW,861
hub,10
humanvoice,69
hybridnetwork, 1005-1006
IPaddress, 1006
hybrid-fiber-coaxial network.
SeeHFC
HyperText Markup
Language.
SeeHTML
Hypertext Transfer Protocol.
SeeHTTP
I
IAB
address, 1062
IANA,705
ICANN, 561,811
address, 1062
ICMP,43,621
checksum, 626
checksum field,622
codefield,622
datasection,622
echorequestandreply
messages, 625
errorcorrection, 622
errorhandled, 622
errorhandling, 44
errormessage, 622
errorreporting, 622
error-reporting
message, 621
ICMPtypefield,621
IPheader,623
loop,624
message format,621
message types,621messages, 44
modifications, 597
nongeneration of
message, 622
parameter problem
message, 624,639
portnumbers, 623
purpose, 622
querymessage, 621,625
redirectmessage, 624
routersolicitation and
Advertisement, 626
sourcequench
message, 623
timeexceeded
message, 624,639
timestamp messages, 626
ICMPv6
compared toICMPv4,
638-639
destination umeachable
message, 639
echorequestandreply,640
errorpacket,638
errorreporting, 638
groupmembership, 640
IGMP,640
neighbor solicitation and
advertisement, 640
packettoobig,639
parameter problem, 639
querymessages, 639
redirection, 639
routersolicitation and
advertisement, 640
timeexceeded, 639
idealsampling, 121
IEEE,20
address, 1061
Project802,395
IEEE802.11,421
IEEE802.11FHSS,432
IEEE802.11infrared, 432
IEEE802.11aOFDM,433
IEEE802.11bDSSS,434
IEEE802.15,435
IESG
address, 1062
IETF,920
address, 1062
ifconfig, 657
I-frame, 341,343,907
IFS,377
IGMP,43,630
addressconversion, 636
addressmapping, 636
checksum field,632data-link layer,636
delayedresponse,
633-634
destination IP
address,635
distributing router,632
domain,635
encapsulation, 635
Ethernet address,636
function, 630
groupaddressfield,632
hostlist,632
hostmembership, 632
ICMPv6,596,640
IPprotocol, 630
joiningagroup,632
leavereport,631
leavingagroup,633
loyalmember, 632
maximum response type
field,631
membership report,631
message format,631
messagetypes,631
monitoring group
membership, 633
multicast routing,685
physicalmulticast
addressing, 636
protocolfield,635
queryformembership
continuation, 633
querymessage, 631
queryrouter,635
routermembership, 632
TTLfield,635
tunneling, 637
typefield,631
WAN,637
ILEC,242,1059
POP,243
image,5
IMAP4,838
IMP,17
impulsenoise,84
IMT-DS, 478
IMT-FT,478
IMT-MC,478
IMT-SC,478
IMT-TC,478
inbox,829
incumbent local
exchange carrier.
SeeILEC
indexofrefraction, 199
indirectdelivery, 647
inducednoise,84infinity
distancevector
routing,664
RIP,665
information
analoganddigital,57
types,5
information field
HDLC,342
InfraredDataAssociation
(IrDA),208
infraredlight,192
infraredwaves,204,207
applications, 208
frequencies, 207
infrastructure network, 421
INITACKchunk,744
INITchunk,744
initial sequence number
(ISN),721
initiation vector(IV),946
innerproduct,387
inputport
packetswitch,232
instability
distancevector
routing,663
instancesuffix,888
InstituteofElectrical &
Electronics Engineers.
SeeIEEE
Integrated Services.
SeeIntServ
integrity, 962,964
AHprotocol, 1000
checking, 966
interactive audio/video, 901
interconnectivity, 20
interdomain routing,659
pathvectorrouting,674
interexchange carrier.
SeeIXC
interface
LSP,668
OSImodel,31
interface message processor.
SeeIMP
interference, 193,267
interframe space.SeeIFS
InterimStandard-95.
SeeIS-95
inter-LATA service,243
interleaving
cellnetwork, 525
framebuilding, 172
synchronousTDM,171
TDM,l72internal,235
internalBGP(I-BGP), 677
International DataEncryption
Algorithm (IDEA),945
International Standards
Organization. SeeISO
International
Telecommunications
Union.SeeITU
International
Telecommunications
Union­
Telecommunication
Standards Sector.
SeeITU-T
Internet, 16~17,241
checksum,299,303
current,17
datagram approach, 581
datagram network, 221
DNS,803
draft,21
history,17
packet-switched
network, 581
standard, 21
internet, 15
concept,611
definition, 17
logicaladdress,611
packet,611,658
packetdelivery, 612
physicaladdress,611
purpose, 817
InternetControlMessage
Protocol. SeeICMP
InternetGroupManagement
ProtocoL SeeIGMP
InternetMailAccess
Protocol, version4.
SeeIMAP4
InternetMobile
Communication, 477
Internetphone,912
InternetProtocol, 579
InternetProtocol Control
Protocol. SeeIPCP
InternetProtocol version4.
SeeIPv4
InternetProtocol, Next
Generation. SeeIPng
InternetProtocol, Version6.
SeeIPv6
Internetradio,902
InternetTV,902
internetwork layer.
SeenetworklayerINDEX 1121
internetwork protocol. SeeIP
internetwork. Seeinternet
internetworking protocol.
SeeIP
INTERNIC, 569
interoperability, 19
Interpret AsControL SeelAC
interpreter, 852
inter-satellite link(ISL),484
intracoded frame,907
intradomain routing,659
intra-LATA service,242
inTransit, 749
IntServ,781
DF,785
problems, 784
RSVP,782
inversedomain,805
mapping, 807
server,805
inversequery,805
INVITEmessage, 921
ionosphere, 203
IP,17,43--44
advantages, 44
analogy,583
congestion, 623
connectionless protocol, 44
datagram, 44
deficiencies, 621
flowcontrol,623
host-to-host protocol, 44
lackoferrorhandling, 621
lackofmanagement
communication, 621
networklayerprotocol, 43
protocols, 43
routing,44
IPaddress,45,52,549,704
ARP,44
binarynotation, 550
depletion, 554
disklessmachine, 618
dotted-decimal
notation, 550
example, 47
format,47
hierarchy, 559
host,705
hostid,553
location, 618
needfor,47
netid,553
notation, 550
RARP,44
unique,549
universal, 5501122 INDEX
IPaddressing, 549
lPpacket,647
lPSecurity. SeelPSec
lPtelephony, 736
lPCP,354
packetformat,354
IPng,584
IPSec,996
modes,996
lPv4,549, 579, 582, 1040
addressspace,550
addressspaceproblems,
566,596
analogy,583
audioandvideo
problems, 596
best-effort delivery, 583
compared tolPv6
header,601
comparison tolPv6,603
congestion handling, 584
connectionless, 583
datagram, 583
deficiencies, 596
headertranslation, 605
IPSec,IOO1
pairedwithTCP,583
reliability, 583
securityproblems, 596
transition toIPv6,603
tunneling, 604
unreliable, 583
IPv4datagram
checksum field,588
destination address
field,588
destination protocol, 587
differentiated
services, 584
fragmentation, 586,590
fragmentation offset
field,587
headerlength
calculation, 586
headerlengthfield,584
hopsallowed,587
identification field,587
loopproblem, 587
precedence subfield, 584
priority,584
protocolfield,587
reassembly, 590
sourceaddressfield,588
time-to-live field,587
TOSbitssubfield, 584
totallengthfield,586
versionfield,584IPv6,549,567,596
addressabbreviation, 567
addressnotation, 567
addressspace,568,597
compared tolPv4
header,601
comparison toIPv4,603
destination address
field,599
destination option,603
ESP,603
extension header,602
extension ofthe
protocol, 597
flowlabel,598,600
flowofpackets,600
fragmentation, 602
headerformat,597
headertranslation, 605
hoplimitfield,598
IPSec,1001
newfeatures, 567,596
newoptions,597
nextheaderfield,598
PadN,602
payloadlengthfield,598
priorityfield,597,599
resource aIlocation, 597
routingprotocols, 597
runsofzero,568
sourceaddressfield,598
sourcerouting,602
transition fromIPv4,603
tunneling, 604
versionfield,597
IPv6address
abbreviation example, 568
consecutive zeros,568
fields,569
lPv4,571
multicast, 570
provider-based, 569
spaceassignment, 568
unicast,569
IPv6packet
baseheader,597
baseheaderfields,597
extension header,597
format,597
payload, 597
lPv6traffic,599
congestion-controlled, 599
flowlabel,601
noncongestion-
controlled, 600
priorityassignments, 599
IrDAport,208Iridium,485
IRTF
IS-95,474,478
dataratesets,476
reversetransmission, 475
ISMband,432
DSSS,432
FHSS,432
ISO,20,29
address,1062
purpose, 29
ISOC
address,1062
isochronous transmission, 135
ISP,653
addrressallocation, 561
local,653
national, 653
PPP,346
regional, 653
issues,454
iterativeresolution, 808
ITM-2000,477
ITV,20
address,1062
ITD-T,20
ATM,523
IVA,736
IXC,1059
POP,244
IXCs,243
J
jamming, 161
Java,852,860
Javaapplet,860
JavaScript, 852,860
jitter,94,913
timestamp, 913
JointPhotographic Experts
Group.SeeJPEG
JPEG,857,904,908
compression, 906
DCT,905
quantization, 906
redundancy, 904
spatialcompression, 907
jumbogroup,166
bandwidth, 166
jumbopayloadoption, 602
K
Kahn,Bob,17
KDC,983
AS,984
Kerberos,983
ticket,983Kepler'slaw,479
Kerberos, 983-984
operation, 984
realm,986
Kevlar,200
key,932,934
private,934
public,934
RSA,949
S-box,939
secret,934
keyedhashfunction, 969
L
L2CAP,440
multiplexing, 441
label
countrydomain,805
genericdomain,805
LAN,395
bridge,454
connection less,538
datarate,14
example, 14
Internet,395
interoperability, 538
logicalsegments, 459
media,14
multicasting, 538
physicaladdress,538
purpose, 14
size,14
switched, 459
virtualconnection
identifier, 538
VLAN,459
wireless, 421
LANemulation.
SeeLANE
LANE,538
ATMLAN,538
client/server model,539
connectionless
protocol, 538
LEC,539
LECS,539
LES,539
LANEclient.SeeLEC
LANEconfiguration server.
SeeLECS
LANs,454
LATA,242,1059
communication, 243
POP,244
latency,90
components, 90
Latin-I,1029LCP,350
codefield,350
PPP,350
leakybucket,777
tokenbucket,780
lease,620
leavereport,631,633
leavereportmessage
destination IPaddress,636
LEC,242,539,1059
POP,243
LECS,539
legacyATMLAN,536
lengthfield,534
lengthindicator, 533,535
LEOsatellite,480,484
lexicographic ordering, 889
LF,204
LI,535
light,192
linebandwidth, 248
linecoding,101
linearblockcode,277
cycliccode,284
minimum distance, 278
line-of-sight
microwaves, 206
line-of-sight propagation,
203,481
antenna,203
link,8,36,162
OSPF,671
point-to-point, 672
stub,673
transient, 672
virtual,673
linkaddress,46
LinkControlProtocol.
SeeLCP
linklocaladdress,572
linkstatepacket.SeeLSP
linkstaterouting,666
LISTcommand, 842
LLC,363,395-397
framing, 396
MAC,396
LMI,522
keepalive mechanism, 522
multicast mechanism, 522
statuschecking, 522
load
delay,765
localaccesstransport area.
SeeLATA
localaddress,571
localareanetwork. SeeLAN
localcallservice,247localcentraloffice,242
localexchange carrier.
SeeLEC
localInternetservice
provider. SeelocalISP
localISP,19
locallogin
procedure, 819
localloop,241-242
ADSL,252
bandwidth, 252
filter,252
signal,247
switching office,242
LocalManagement
Information. SeeLMI
localpart,831
LocalTalk address,46
locator,853
logarithmic function, 1051
logicaladdress,36
logicaladdressing, 549
logicallinkcontrol.
SeeLLC
logicalring,382
logicalstarbackbone, 457
login,818
longsequence ofOs,108
long-distance company, 243
longestmaskmatching, 653
loop
multicast distancevector
routing,686
RPB,687
timeexceeded
message, 624
loopprevention, 675
loopback address,571
looseSOurceroute,602
loosesourceroute
option,596
lossycompression, 906
lostframe,318
low-Earth orbitsatellite,484
low-pass channel, 75,141
band-pass, 79
digitalsignal
approximation, 76-77
limitedbandwidth, 75-76
widebandwidth, 75-76
LSP,667
flooding, 668
generation, 668
M
M2UA,736
M3UA,736MA,365
MAA,827,838
MAC,307,363, 395,969
modules, 397
Standard Ethernet, 398
MACaddress,579,704
MACcontrolsublayer, 409
MACsublayer
FastEthernet, 409
GigabitEthernet, 412
wirelessLAN,423,442
mail,829
mailaccessagents.SeeMAA
mailexchanger, 831
mailserver,825
mailbox, 824,831
management frame,427
Management Information
Base.SeeMIB
manager, 877-878
activeopen,895
database, 878
function, 891
remotereboot,878
Manchester
Ethernet, 402
Manchester coding,109
transition, 109
man-in-the-middle attack,
955-956
mappedaddress,571
mapping
dynamic, 612
hostfile,798
logicaltophysical
address,612
static,612
marker,786
markuplanguage, 855
mask,553
classless addressing,
556,559
mastergroup,166
masterstation,435
maximum burstsize,762
maximum transferunit.
SeeMTU
mBlnB,115
mBnL,111
MBONE,693MD5,967
MDC,969
media
guided,192
unguided, 203
mediaaccesscontrol.
SeeMACINDEX 1123
mediagatewaycontrol,736
mediaplayer,909
medium, 4
mediumaccess
contention, 364
GigabitEthernet, 412
random,364
medium-Emth orbit
satellite,481
membership report,631,633
destination IPaddress,635
MEOsatellite,480-481
mesh,9
advantages, 10
backbone, 10
definition, 9
disadvantages, 10
port,9
meshtopology, 34
message, 4,965
e-mail,830
messageauthentication code.
SeeMAC
messagedigest,965,968
secrecy,965
message switching, 214
messagetransferagents.
SeeMTA
messagetransport part.
SeeMTP
message-oriented
protocol, 736
metafile,909
metric,658,671
OSPF,671
TOS,659
typeofservice,671
MF,204
MFSK,147
MIB,878,886
accessing simple
variable, 887
agent,886
example, 887
indexes,889
instancedefinition, 888
lexicographic ordering, 889
objectcategories, 886
objectidentifier tree,887
role,879
Tableidentification, 888
mibobject,882
microswitch, 234
microwaves, 204,206
applications, 207
band,206
frequencies, 2061124 INDEX
microwaves-Cont.
homantenna,207
IrDAport,208
parabolic dish
antenna,206
propagation, 206
unidirectional, 206
unidirectional
antenna,206
MID,535
MIME,831
contentsubtype,833
content-description
header,834
content-Id header,833
content-transfer-encoding
header,833
content-type
header,833
headers,832
NVTASCII,831
textdatatype,833
typesofdata,833
versionheader,832
minimum bandwidth, 104
minimum Hamming
distance, 274-275
parity-check code,278
minislot, 261
mixedarchitecture
LAN,537
mixer,916
mixing,916
MLT-3,113
mobilestation(MS),467
mobileswitching center.
SeeMSC
modeofoperation, 945
modem,80,241,248-249
function, 248
Shannon formula, 250
standards, 249
V.32,249
Y.32bis,26l
Y.33,261Y.34bis,249
Y.90,250
Y.92,25l
modification detection code.
SeeMDC
modulararithmetic, 270
modulation, 143
AM,153
analog-to-analog, 153
Bluetooth, 437
DSSS,432
FHSS,432PM,154
HR-DSSS, 434
OFDM,434
PM,155
transmission, 79
trelliscoding,249
modulation rate,103
modulator
function, 248
modulo2arithmetic, 270
modulo2binarydivision, 286
moduloarithmetic
addition, 270
subtraction, 270
modulus, 270
monoalphabetic
substitution, 935
morefragment bit,591
MOSPF,685
CBT,690
MotionPictureExperts
Group.SeeMPEG
MP3,903
compression, 904
datarates,904
MPEG,904,907
B-frame, 908
frametypes,907
I-frame,907
P-frame, 907
temporal compression, 907
versions, 908
MPEGaudiolayer3,903
MSC,467
handoff,469
receiving asignal,469
transmission ofsignal,468
MSS,769
MTA,825,834
client,834
server,834
MTP,246
MT-RJ,201MTU,589,639
fragmentation, 602
maximum length,590
SCTP,752
valuesforprotocols, 589
multicast address,400
IPv6,570
IPv6permanent, 570
IPv6transient, 570
multicast backbone.
SeeMBONE
multicast distancevector
routing,686
DVMRP,690multicast linkstate
routing,685
Multicast OpenShortestPath
First.SeeMOSPF
multicast router,632
groupid,632
purpose,633
multicast routing,682
designated parent,688
shortestpathtree,682
source-based tree,683
multicasting, 630,678-679
applications, 630,681
dissemination, 681
distancelearning, 682
emulation, 681
LAN,538
newsdissemination, 681
real-time, 915
routerinterface, 679
RSVP,782
teleconferencing, 682
tunneling, 693
UDP,715
unicasting, 681
multidrop, 8
multihomed AS,677
multi-homing, 738
multilevel ASK,145
multilevel binarycoding,110
multilevel coding,111
multilevel FSK.SeeMFSK
multilevel multiplexing, 174
multiline transmission, three
level.SeeMLT-3
multimode,199
opticalfiber,199
step-index, 199
multipleaccess,363.
SeealsoMA
multipleslot
multiplexing, 174
multipleunicasting, 680-681
multicasting, 681
multiple-bit error,270,273
multiple-secondary
communication, 438
multiple-stream delivery, 737
multiplexer, 162
multiplexing, 161,525, 707
definition, 161
L2CAP,441
manytoone/oneto
many,161
transport layer,707
multiplexing
identification, 535multiplicative decrease,
771-772
multiplicative inverse,949
multipoint, 8,11
multipoint configuration, 34
Multipurpose InternetMail
Extensions. SeeMIME
multistage switch,228,
231-233
banyan,233
blocking, 229
time-space-time
(TST),231
music
sampling rate,902
MUX.Seemultiplexer
N
NAK
inpoll,381
Selective Repeat
ARQ,336
nameserver
hierarchy, 802
namespace,798
centralauthority, 798
distribution, 801
flat,798
hierarchical, 798
name-address resolution, 806
NAP,18
NAT,563
National Instituteof
Standards and
Technology. SeeNIST
naturalbase,1050
naturalsampling, 121
NAV,425
NCP,17,353
netid,553
Netscape,830
network, 7,790
categories, 13
criteria,7
definition, 17
hybrid,1006
performance, 7
private,1006
reliability, 8
networkaccesspoint.
SeeNAP
networkaddress,557
networkaddresstranslation.
SeeNAT
networkcapacity, 765
Network ControlProtocol.
SeeNCPnetworkinterface card.
SeeNIC
networklayer,36,547,579,
701,795,929
atdestination, 581
atrouter,581
atsource,580
logicalAddressing, 36
packet,36,547
responsibilities, 36
routing,36-37,547
TCPIIP,43
networklayerreliability, 708
networklength
GigabitEthernet, 413
networkmanagement,
873,879
accounting
management, 877
configuration, 874
faultmanagement, 875
performance
management, 876
programming analogy,880
securitymanagement, 876
networkperformance,
89,764
networksecurity, 8
networkservice,582
networksupportlayers,31
networktonetwork
interfaces. SeeNNI
networkvirtualtenninal.
SeeNVT
network-specific method,648
next-hop method,648
NIC,400
Ethernet, 400
stationaddress,44
NIST,943
NNI,526-527
VPIlength,527
nooperation option,594
node,7,213
nodeidentifier, 570
node-to-node delivery, 703
noise,84
bursterror,269
coaxialcable,196
crosstalk, 84
digitalservice,247
impulse, 84
induced,84
thermal,84
noiseless channel, 86,
307,312
noisychannel, 87,318non-blocking switch,230
non-coherent BFSK,147
noncongestion-controlled
traffic,GOO
non-periodic composite
signal,67-68
non-periodic signal,58
frequency, 74
nonpersistent connection, 868
non-return tozero.SeeNRZ
nonnalresponse mode.
SeeNRM
normalized error,126
no-transition mobility, 422
NRM,340
NEtZ,106-107, 144
ASK,144
BFSK,147
BPSK,149
NEtZ-I,107
synchronization, 108
NRZ-Invert,107
NEtZ-L,107
baselinewandering, 107
polarityswitch,108
synchronization, 108
NEtZ-Level, 107
internet,354
nullsuffix,800
numbersystem
comparison, 1040
transformation, 1041
NVT,41,819
character set,819
controlcharacters, 819
FTP,841
TCPIIPstack,819
TELNET,819
tokens,819
Nyquist
bitrate,86
Nyquistbitrate,86
Nyquistformula, 104
Shannon capacity, 88
Nyquistnoiseless channel, 86
Nyquisttheorem, 121,902
frequency, 121
o
objectidentifier, 881
octalsystem,1037
octet,550
oddnumberoferrors,296
OFB,947
OFDM,433
offset,64
offsetfield,591omnidirectional antenna,205
on-demand audio/
video,901
one'scomplement
arithmetic, 298
one-slotframe,439
one-to-many relationship, 936
one-to-one relationship, 935
one-wayness, 966
OOK,I44
OpenShortestPathFirst.
SeeOSPF
opensystem,29
OpenSystemsInterconnection.
SeeOSI
open-loop congestion
control,765
operating system
locallogin,819
NVT,819
operation, 234
opticalfiber,198
advantages, 202
applications, 201
ATM,523
attenuation, 202
bandwidth, 202
cableTV,202
cladding, 200
composition, 200
connectors, 200
core,200
corrosive materials, 202
cost,203
density,199
disadvantages, 203
electromagnetic noise,202
expertise, 203
graded-index multimode,
198-199
HFC,257
installationl
maintenance, 203
Kevlar,200
LAN,202
light,198
lightweight,203
multimode, 198
outerjacket,200
performance, 201
propagation modes,198
reflection, 198
single-mode, 198-199
sizes,200
standardization, 491
step-index multimode, 198
tapping,203INDEX 1125
unidirectional
propagation, 203
WDM,168
options
endofoption,595
function, 594
IPv4datagram, 594
loosesourceroute,596
nooperation option,594
recordrouteoption,595
strictsourceroute,595
timestamp, 596
OPTIONS message, 921
ORoperation, 557
orbit,479
orthogonal frequency­
divisionmultiplexing
(OFDM),433
orthogonal sequence, 386,389
oscillator, 144
OSImodel,29,32,43
application layer,41
architecture, 30
datalinklayer,34
grouping offunctions, 30
header,32
layerinterface, 31
layeroverview, 32
layers,29-30,33
layerstraversed, 30
networklayer,36,547
networksupportlayers,31
organization, 31
peer-to-peer process,30
physicallayer,30,33
presentation layer,39
sessionlayer,39
summary oflayers,42
TCPIIP,29,42--43
trailer,32
transport layer,37,701
usersupportlayers,32
OSPF,659,671
linktypes,671
metric,671
networkasalink,671
stublink, 673
transient link,672
virtuallink,673
outbox,829
Outlook, 830
out-of-order segment, 732
outputfeedback mode.
SeeOFB
outputport
packetswitch,232
outstanding frame,3251126 INDEX
p
packet,658
SCTP,739
packetformat
SCTP,742
packetpayloadtype,533
packetpriority,599
packetswitch,224
components, 232
outputport,233
switching fabric,233
packetswitching, 214
IPv4,583
packettoobig,639
packet-filter firewall,1022
packet-switched
network, 214
Pad1option,602
padding, 587
AHprotocol, 999
chunk,743
endofoptionoption,595
Ethernet, 399
RTP,918
PadN,602
page,852
paging,469,475
PAM,121
PAP,352
parabolic dishantenna,206
paralleltransmission, 131
parameter problem
message, 624
ICMPv6,639
parity-check bit,282
parity-check code,278
parkedstate,435
PartiallyQualified Domain
Name.SeePQDN
PASScommand, 844
passiveopen,723
password, 352
Password Authentication
Protocol. SeePAP
path
virtual-circuit
network, 222
pathattribute, 677
non-transitive, 677
ORIGIN, 677
transitive, 677
pathattributes
AS]ATH,677
NEXT-HOP, 677
pathmessage, 782
pathMTUdiscovery
technique, 602pathvectorrouting,674
loops,675
policyrouting,676
sharing,675
P-box,939
peF,423,425
AP,425
repetition interval,426
PCFIFS.SeePIFS
PCM,121
bandwidth, 128
coding,127
decoding, 127
filter,128
sampling, 121
PCS,477
PDU
LLC,396
peakamplitude, 59
peakdatarate,762
peer-to-peer process,30
perceptual encoding, 903
performance, 7
checksum, 301
Hamming code,283
performance
management, 876
capacity, 876
response time,876
throughput, 876
traffic,876
period,58,60,479
example, 60
inverse,60
units,61
periodicanalogsignal,59
periodiccomposite
signal,67
periodicsignal,58-59
frequency, 74
periodicupdate,663
permutation
finalDES,941
initialDES,941
permutation box.
SeeP-box
persistence method
I-persistent, 372
non-persistent
approach, 372
p-persistent, 373
persistence methods, 372
persistent connection, 868
personal areanetwork
(PAN),435
Personal Communications
System(peS),477P/Fbit,343
P-frame,908
Phase,155
phase,142,153
AM,153
ASK,143
definition, 63
example, 64
FM,154
FSK,146
offset,64
PM,155
PSK,148
sinewave,65
phasemodulation. SeePM
phaseshift,63
phaseshiftkeying.
SeePSK
PHP,859
physical, 520
physicaladdress,45-47,
52,612
ARP,44
authority, 46
needfor,612
RARP,44
sizeandformat,46
physicallayer,33,55
ATM,529
bitrepresentation, 33
bitsynchronization, 34
circuitswitching, 215
datarate,34
Ethernet, 397,402
FrameRelay,520
function, 33
lineconfiguration, 34
OSImodel,30
purpose, 33
signals,57
tasks,55
TCPIIP,43
topology, 34
transmission media,191
transmission mode,34
wireless, 432
physicallayerprocessor, 232
physicalringtopology, 382
piconet,435
PIFS,425
piggybacking, 312,339,343,
720,722
example, 345
Go-Back-N ARQ,339
wirelesstransmission, 426
pilotchannel,475
PIM,692PIM-DM,692
PIM-SM,692
pipelining, 323
pixel,S,71,903,907
plaintext, 932
plane,1030
PLAYmessage, 911
playback buffer,914
PM,153
pointcontroller, 426
pointcoordination function.
SeePCF
pointofpresence. SeePOP
pointerquery,805
point-to-point, 8,10
definition, 8
mesh,9
point-to-point
configuration, 34
point-to-point
connection, 213
point-to-point link,672
Point-to-Point Protocol.
SeePPP
poisonreversed, 664
polarcoding,107
polarwith8-zerosubstitution.
SeeB8ZS
policyrouting,676
poll,343,381
polling,380
poll,381
select,381
polyalphahetic
substitution, 935
polynomial, 291
addition, 291
characteristics, 297
CRC,291
division, 292
multiplying, 292
shifting,292
subtracting, 291
POP,243
POP3,838
port,705
portaddress,49
portnumber,704
ephemeral, 704
ICMP,623
process,705
well-known, 705,709
PostOfficeProtocol,
version3.SeePOP3
POTS,241
power,192
satellite,480PPM,432
PPP,346
addressfield,348
authentication, 352
authentication state,349
controlfield,348
deadstate,349
establishment state,349
flagfield,348
frame,348
ISP,346
LCP,350
multilink, 355
multiplexing, 350
networking state,349
openstate,350
optionnegotiation, 351
payloadfield,348
protocolfield,348
termination state,350
transition states,349
PQDN
suffix,800
preamble, 398
predicted frame,907
predictive encoding, 903
presentation layer,39
compression, 41
encryption, 40
responsibilities, 40
translation, 40
primary
Bluetooth, 435
inpolling,381
primaryaddress,747
primaryserver,803
primarystation,340,380
priorityfield,599
priorityqueueing, 776
privacy,161,962
AHprotocol, 1000
privateaddress
NAT,563
privatekey,933-934, 986
privatenetwork,
1005-1006
Ipaddress,1006
privateuseplane
(PUP),1032
process-ta-process
commumcation,709,715
process-ta-process
delivery, 703
Project802,395
propagation delay,221
CSMA,370
LEO,484propagation speed,402
distortion, 83
wavelength, 64
propagation time,90-91
circuitswitching, 218
CSMA,371
latency,90
propagation speed,90
protocol,S, 19,30
definition, 19
elements, 19
protocolfield
AHprotocol, 999
ProtocolIndependent
Multicast. SeePIM
protocolIndependent
Multicast, DenseMode.
SeePIM-DM
Protocol Independent
Multicast, SparseMode.
SeePIM-SM
provideridentifier, 570
provider-based
address,569
proxyARP,617
proxyfirewall,1023
proxyserver,868
pruning,689
pseudoheader,712
purpose, 712
pseudoterminal
driver,819
pseudoternary coding,110
PSK,142,148,249
bandwidth example, 150
limitations, 152
modern,249
withASK,152
psychoacoustics, 903
publickey,933-934, 986
Diffie-Hellman, 954
publickeyinfrastructure
(PKI),989
public-key cryptography.
Seealsoasymmetric-key
cryptography
RSAalgorithm, 949
pullprogram, 828
pullprotocol, 838
pulseamplitude modulation.
SeePAM
pulsecodemodulation.
SeePCM
pulsepositionmodulation
(PPM),432
pulserate,103
pulsestuffing,174pureALOHA, 365
throughput, 368
pureATMLAN,536
pushoperation, 726
pushprogram, 828
pushprotocol, 837
PVC,528
ATM,528
establishment, 528
Q
Q.931,924
QAM,142,252
bandwidth, 152
trelliscoding,249
variations, 152
QoS,775
admission control,780
ATM,789
Bluetooth,441
DF,785
FrameRelay,787
howtoimprove, 776
IntServ,781
leakybucket,777
resourcereservation, 780
switched network, 786
trafficshaping,777
QPSK,149-150
constellation, 151
quadrature amplitude
modulation. SeeQAM
quadrature PSK.SeeQPSK
qualityofservice.SeeQoS
quantization, 125,906
non-uniform, 127
uniform, 127
zone,125
quantization error,126
quantization level,126
quantization noise
V90,250
query
DNS,809
querymessage, 625,631
destination IPaddress,635
ICMP,621
ICMPv4andICMPv6, 640
ICMpv6,639
response time,633
special,633
queryrouter,634-635
questionrecord,811
queue,764
input,764
output,764
overflow inUDP,714INDEX 1127
UDP,714
UDPclientsite,714
UDPoverflow, 715
UDPport,714
UDPserversite,714
queuingtime,92
QUITcommand, 844
R
radiogovernment.
SeeRG
radiolayer,436
radiowave,192,204
band,205
ionospheric
propagation, 203
mdiowaves,192,204
omnidirectional, 205
penetration, 205
RAM,231
TSI,231
randomaccess,364
mndomaccessmemory.
SeeRAM
ranging,260
RARP,43
firstboot,44
ICMPv6,596
logicaladdress,618
physicalmachine, 618
purpose, 44
RARPreply,618
RARPrequest,618
RBOC,1059
RC5,945
RCH,257
realm,986
real-time
playback buffer,914
threshold,914
real-time audio,596
IPv6,567
real-time audio/video
example, 912
real-time data
timerelationship, 912
real-time intemctive audio/
video,912
Real-Time Streaming
Protocol (RTSP),911
real-time traffic
errorcontrol,916
mixer,916
multicasting, 915
RTP,916
sequence number,915
TCP,9161128 INDEX
real-time traffic-Cant.
timestamp, 914
translation, 915
translator, 915
UDP,916
real-time transmission, 4
Real-time Transport Control
Protocol. SeeRTCP
Real-time Transport Protocol.
SeeRTP
receiveslidingwindow, 324
receiver, 4,300
flowcontrol,311
reservation, 782
SCTPerrorcontrol,751
SCTPflowcontrol,748
receiverwindow
(rwnd),730
recordrouteoption,595
pointer-length
comparison, 595
recursive resolution, 808
redirectmessage, 624
purpose, 624
redirection
ICMPv6,639
redundancy, 269,904
checksum, 298
spreadspectrum, 181
reflection, 198
refraction, 198
Regional BellOperating
System.SeeRBOC
regionalcablehead,257
Regional InternetService
Providers orregional
ISP.SeeregionalISP
regionalISP,19
regionaloffice,241
REGISTER message, 921
registered port,705
registrar, 811
registrar server,922
Registration! Administration!
Status(RAS),924
regulatory agencies, 21
REI,344
relayagent,619
reliability, 7-8,775
reliableservice
SCTP,738
reliabletransport layer
service,708
remainder
CRC,288
cycliccode,294
remotebridge,458rendezvous, 684
rendezvous router,684,690
selection, 691
repeater
amplifier, 447
HDSL,255
hub,447
location, 447
ring,12
segment, 446
repetition interval,426
RequestforComment.
SeeRFC
RequestToSend(RTS),425
reservation, 379,781
refreshing, 784
reservation frame,379
reserved address,571
resolution, 903
iterative, 808
nametoaddress,806
recursive, 808
resolver, 806
resource allocation, 218
resource record,811
resource reservation,
226,780
Resource Reservation
Protocol. SeeRSVP
resources
circuitswitching, 215
response
DNS,809
response time,876
Resvmessage, 782
RETRcommand, 842
retransmission, 732
correction, 269
Go-Back-N, 327
retransmission policy,766
retransmission timeout
(RTO),732
reusefactor,468
GSM,473
IS-95,476
reverseaddressresolution
protocol.See RARP
reversepathbroadcasting.
SeeRPB
reversepathforwarding.
SeeRPF
reversepathmulticasting.
SeeRPM
RFC,21,1063
RG,196
coaxialcable,196
ratings,196Rijndael algorithm, 943
ring,9,12
advantages, 12
definition, 12
disadvantages, 12
dual,12
repeater, 12
ringtopology, 34
RIP,665
port,1065
RIPNIC,569
RJ45,193
Rn,326
RNR,344
roaming, 469
root,668
rootserver,803
rotarytelephone, 244
rotation, 939
rotationcipher,939
round,940
AES,944
roundcipher,940
AES,943
roundkey,941
router,36
address,626
areaborder,671
backbone, 671
designated parent,688
fragmentation, 589
inputport,232
multicast, 632
routeradvertisement
message, 626
routersolicitation and
advertisement message
function, 626
ICMPv6,640
routersolicitation message, 626
routing
distancevector,660
example, 654
multicast, 682
networklayer,36-37,547
RoutingInformation
Protocol. SeeRIP
routingprocessor, 233
packetswitch,232
routingprotocol, 658
multicast, 678
routingtable,220,224,648,
656,658
addedbyredirection
ftag,657
distancevector
routing,663dynamic, 656,658
flagsfield,656
gatewayflag,656
hierarchy, 653
host-specific flag,657
interface field,656
linkstaterouting,667
maskfield,656
modified byredirection
flag,657
networkaddressfield,656
nexthopaddressfield,656
reference countfield,657
shortestpathtree,670
static,656
upflag,656
updating of,624
usefield,657
RPB,687
RPF,688
RPC
port,1065
RPF,686
RPB,688
RPM,689
graftmessage, 689
prunemessage, 689
RR,343
RSA,949
keys,949
realisticexample, 951
Rspec,781
RSVP,781-782
IntServ,782
message, 782
reservation merging, 783
reservation style,784
RTCP,919
application specific
message, 920
byemessage, 920
message types,919
portnumber,920
receiverreport,920
RTP,919
senderreport,919
sourcedescription
message, 920
RTO,732
RTP,916
contributor, 918
contributor count,918
extension header,918
header,917
marker,918
padding, 918
payloadtype,918portnumber,919
RTCP,919
sequence number,918
synchronization
source,918
timestamp, 918
UTP,916
versionfield,917
run-length encoding, 843
rwnd,749
RZ,108
complexity, 108
disadvantage, 108
signalchange,108
values,108
S
SA,399
SACKchunk,753
sampleandhold,121
sampling, 121
PCM,121
sampling frequency, 121
sampling interval, 121
sampling rate,121,902
example, 127
humanvoice,127
telephone company, 124
SAR,532
satellite,478
frequency band,481
geosynchronos, 481
geosynchronous, 481
trunk,242
satellitecommunication, 478
satellitenetwork, 478
satelliteorbit,479
satelliteperiod,479
sawtooth signal,1048
S-box,939
scalability, 784
DF,785
scatternet, 435
scheduling, 776
FIFOqueue,776
priorityqueue,777
weighted fairqueueing, 777
SCO,439
scrambling, 118
script
COl,859
SCTP,732
acknowledgment
number,741
association, 737
chunk,739
dataransfer,746datatransfervsdata
delivery, 747
features, 736
flowcontrol,748
header,743
packetformat,742
reliableservice,738
stream,740
verification tag,743
SCTPassociation, 743
SCTPheader,740
checksum field,743
destination portaddress
field,743
sourceportaddress
field,743
SCTPpacket,739
vsTCPsegment, 740
SDL
2BIQ,111
SDSL,255
SEAL,535
searching
classless addressing, 655
secondary
Bluetooth, 435
inpolling,381
secondary server,803
secondary station,
340,380
secrecy,964-965
secretkey,934
secret-key cryptography.
Seesymmetric-key
cryptogtaphy
secret-key encryption
key,933
SecureHashAlgorithm.
SeeSHA-1
security,7-8
authentication, 962,991
FHSS,183
integrity, 962,991
nonrepudiation, 962,991
privacy,962,991
securitymanagement, 876
securityparameter index.
SeeSPI
segment, 38,406,446, 701,
718,721
format,721
headerfields,721
IPdatagram, 45
size,721
TCP,45
TCP/lP,45
segmenttype,535segmentation
L2CAP,441
segmentation andreassembly.
SeeSAR
select
addressing, 381
frame,381
polling,381
Selective Repeat,766
Selective RepeatARQ,332
design,334
variables, 337
window,333
windowsize,334
self-synchronization, 105
semantics, 19
sendslidingwindow, 324
Sender,300
sender,4,773
flowcontrol,311
SCTPerrorcontrol,752
SCTPflowcontrol,749
sequence number,318,324,
532,535,719,914
ICMP,623
range,318
sequence numberfield,318
sequence number
protection, 532
serialtransmission, 131-132
advantage, 132
classes,131
conversion device,132
types,132
server,704
primary,803
root,803
secondary, 803
UDPqueue,714
WWW,852
serverprogram, 705
portnumber,705
serviceclass,781,789
controlled-load, 782
guaranteed, 781
servicetype.SeeTOS
service-point address,
38,701
service-point addressing, 38
service-type limitation, 784
DF,785
SessionInitiation Protocol.
SeeSIP
sessionkey,952
TGS,984
sessionlayer,39
dialogcontrol,39INDEX 1129
responsibilities, 39
synchronization, 39
setup,215
virtual-circuit network,
221,223
SETUPmessage, 911
setuprequest,224
SFD,398
S-frame, 341,343
SHA-I,967
Shannon,87
Shannon capacity, 87
example, 87
noisychannel,87
Nyquistformula, 88
telephone line,87
shaper,786
sharedexplicitstyle,784
shared-group tree
CBT,691
sharing,661
distancevector
routing,661
pathvectorrouting,675
sheath.196
SHF,204
shieldedtwisted-pair, 193
shift,1044
shiftcipher,936
shiftkeying,143
shiftregister,290
shortinterframe space
(SIFS),425
shortest path tree,668
linkstaterouting,667
multicast routing,682
root,668
routingtable,670
unicastrouting,682
SI,739
SIFS,425
signal
amplitude, 59
analoganddigital,58
aperiodic, 58
CDMA,388
composite periodic
analog,59
degradation, 12
non-periodic, 58
periodic, 58
types,95-96
signalbandwidth, 248
signalelement,
102,142
signallevel,86
signalpoint,2451130 INDEX
signalrate,103
2B1Q,111
datarate,103
Manchester, 110
NRZ-IandNRZ-L, 108
worstcase,103
signaltransport port,245
signaling connection control
point,246
Signaling SystemSeven.
SeeSS7
signal-to-noise ratio.
SeeSNR
simpleandefficient
adaptation layer.
SeeSEAL
simpleciphers,938
SimpleMailTransfer
Protocol. SeeSMTP
SimpleNetwork Management
Protocol. SeeSNMP
simplest protocol, 312
algorithm, 314
design,313
receiversite,314
sendersite,314
simplex, 6,34
simultaneous open,725
sinewave,59,1043
characteristics, 59,
65,142
frequency, 60
horizontal shift,1044
period,60
verticalshift,1045
single-bit error,
267-268,294
example, 268
frequency, 268
two,295
single-mode, 199
density,199
distortion, 199
opticalfiber,199
single-secondary
communication, 437
single-stage switch
blocking, 229
SIP,736,920
addresses, 921
messages, 921
modules, 921
tracking, 922
sitelocaladdress,572
skypropagation, 203
ionosphere, 203
slavestation,435slidingwindow, 324
slottime,401
collision, 401
propagation speed,402
slottedALOHA, 369
throughput, 369
vulnerable time,369
slowstart,769,868
slowstartthreshold, 770
SMI,881
ASN.1,882
BER,884
datatype,881
encoding, 884
encoding method,881
functions, 881
objectidentifier, 881
objectname,881
objectrepresentation, 882
objecttype,882
objects,881
role,879
sequence ofstructured
type,883
sequence structured
type,883
simpledatatype,882
simpletype,883
simpletypeexamples, 883
structured datatype,882
structured type,883
treestructure, 882
SMTP,834
clientcommands, 835
commands, 835
concept, 834
HTTP,861
mailtransferphases,837
port,1065
responses, 835-836
Sn,319,325
SNMP,877,891
agent,877
agentdatabase, 878
BER,893
clientprogram, 878
client/server
mechanism, 897
concept, 877
data,893
errorindexfield,893
errorstatusfield,893
errortypes,893
format,892
function, 877
GetBulkRequest, 892
GetNextRequest, 891GetRequest, 891
header,893
InformRequest, 892
management basics,878
manager, 877-878
message elements, 893
PDU,891
port,1065
report,892
requestID,892-893
response, 892
role,878
securityparameters, 893
serverprogram, 878
SetRequest, 892
tag,893
trap,892
UDPPORTS, 895
VarBindList field,893
version,893
SNMPv3,893
security, 897
SNMPv2,897
SNR,84
decibel,84
high,84
indB,88
low,84
Shannon capacity, 87
SNRdB,126
socketaddress,706
IPheader,706
pair,706
portnumber,706
softhandoff, 469
IS-95,477
softstate,784
SONET,530
ATM,530
byteinterleaving, 504
video,903
WDM,168
sourceaddress.SeeSA
sourcequenchmessage,
623,639
sourceroutingbridge,453
sourceroutingextension
header,602
sourceserviceaccesspoint
(SSAP),396
source-based tree
multicast distancevector
routing,686
space,231
space-division switch,227
advantage, 231
time-division, 231spanning tree
algorithm, 452
spatialcompression, 907
speakernode,674
initialization, 674
specialquery
message, 633
spectrum, 154-155
speedoflight,65
SPI,999
splithorizon, 664
splitter,254
cableTV,256
splitterless ADSL,254
spreadspectrum, 180
bandwidth,181
spreading process, 181
spreading, 161
squarewavesignal,1046
SREJ,344
SS7,218,245
datalinklayer,246
networklayer,246
physical layer,246
transport layer,246
upperlayers,246
SSN,739
ssthresh, 770
ST,535
staircase signal,130
Standard Ethernet, 397
standards, 19
categories, 20
creationcommittees, 20
needfor,19
ratification, 21
standards organizations, 20
star,9,11,24
advantages, 10
centralcontroller, 10
disadvantages, 11
star-ring topology, 382
startbit
asynchronous
transmission, 133
startframedelimiter.
SeeSFD
state
multicast routing,685
staticdatabase, 620
staticmapping, 612
limitations, 612
overhead, 612
staticrouting,655
staticroutingtable,655
statictable,658
stationaddress,44statistical TDM,179
addressing, 179
bandwidth, 180
slotsize,180
synchronization bit,180
step-index multimode, 199
stopbit
asynchronous
transmission, 133
stop-and-wait, 315
design,315
receiversite,317
sendersite,315
Stop-and-WaitARQ,318-
319
design,319
efficiency, 322
Go-Back-N,331
receiversite,321
sendersite,320
STORcommand, 842
STP,193
straightpermutation, 940
straight-tip connector
(ST),201
stream
definition, 45
SCTP,740
streamdelivery, 716
streamidentifier. SeeSI
streamofbits,55
streamsequence number.
SeeSSN
streaming, 909
streaming liveaudio!video,
901,912
streaming server,910
streaming storedaudio!
video,901
streaming server,910
streaming serverand
RTSP,911
webserver,909
webserverandmeta
file,909
streaming storedaudio!
visual,908
strictsourceroute,602
strictsourcerouteoption,595
concept,595
rules,596
strongcollision, 967
stubAS,676
subblock, 559
subnet
classless addressing, 559
subnetidentifier field,570subnetmasking
ICMPv6,640
subnetting, 554,647
Subscriber Channel
Connector (SC),201
subscriber identifier, 570
substitution, 935
monoalphabetic, 935
substitution box.
SeeS-box
substitution cipher,935
S-box,939
suffix,800
supergroup, 166
supernet, 554
supervisory frame.
SeeS-frame
supplementary ideographic
plane(SIP),1032
supplementary multilingual
plane(SMP),1032
supplementary specialplane
(SSP),1032
SVC,528-529
ATM,528-529
switch,37,2l3,233,408
banyan,233
Batcher-banyan, 235
bridge,408
crossbar, 228,233
logicalstarbckbone, 457
multistage, 228
non-blocking, 230
space-division, 227
structure, 227
telephone network, 242
time-division, 230
time-space-time
example, 231
two-layer, 454
switched backbone, 457
switched Ethernet, 407
switched/56, 248
subscriber, 248
switching
concept,213
example, 213
methods, 214
needfor,213
nodes,213
spacevstimedivision, 231
switching fabric,232-233
packetswitch,232
switching office,241-242
switching table,224
symmetric digitalsubscriber
line.SeeSDSLsymmetric key
Diffie-Hellman, 952,955
symmetric-key cryptography,
932-933
SYNfloodingattack,725
SYNsegment, 724
SYN+ACK,724
synchronization
asynchronous
transmission, 133
blockcoding,115,117
bytelevel,133
clock,105
example, 105
IS-95,474
NRZ-I,108
NRZ-L,108
TDMA,384
synchronization points,39
synchronous connection­
oriented (SCO)
link,439
synchronous TDM,169
datarate,170
frame,170
synchronous transmission,
131,134
advantage, 135
example, 134
grouping ofbits,134
receiverfunction, 134
synchronization, 134
syndrome, 279
Hamming code,282
syntax,19
T
Tline,177
digitaltransmission, 177
T-lline,177
capacity, 178
datarate,178
frame,177
overhead, 177
synchronization bit,177
table
virtual-circuit
network, 223
tablelookup,233
tag
format,856
tandemoffice,241
tandemswitch,243
POP,243
tangent,1046
tap,11,256
TCB,745INDEX 1131
TCP,17,45,583, 703,708
andIPv4,583
buffer,717,725
checksum, 722
circularbuffer,717
connection-oriented
protocol, 723
DNS,812
encapsulation, 723
errorcontrol,731,751
full-duplex, 718
fUll-duplex mode,723
function, 45
ICMP,623
OSImodel,42
ports,1065
pseudoheader, 722
pushbit,726
pushoperation, 726
pushingdata,725
real-time traffic,916
reliableservice,719
segment, 718,721
segmentre-ordering, 45
segmentation, 45,843
sequence number,45
SIP,920
streamdelivery, 716
streamtransport
protocol, 45
streaming liveaudio!
video,912
stream-oriented
protocol, 726
transport layerprotocol, 43
urgentdata,726
vsSCTP,736
well-known port
number,709
TCPheader
acknowledgment number
field,72l
checksum field,722
controlfield,722
destination portaddress
field,721
headerlengthfield,722
optionsfield,723
reservedfield,722
sequence number
field,72l
sourceportaddress
field,72l
urgentpointerfield,723
windowsizefield,722
TCPsegment
vsSCTPpacket,7391132 INDEX
TCP/IP,43
addresses, 45,52
application layer,42,45
application layerandOSI
model,45
datalinklayer,43
filetransfer,840
hierarchical structure, 43
hierarchy, 43
Ip,582
networklayer,43
NVT,819
OSImodel,29,42--43
physicalanddatalink
layers,43
physicallayer,43
standard filetransfer,840
transport layer,43--44
UDP,45
TCPIIPprotocolsuite,42
TDD-TDMA,437
TDM,162,169
applications, 179
circuit-switched
network,214
concept, 169
datarate,170
dataratemanagement, 173
emptyslot,173
framesynchronization, 175
framingbit,175
TDMA,385
timeslot,169
TDMA,383-384,473,478
Bluetooth,437
TDM,385
teardown
virtual-circuit network, 221
TEARDOWN message, 912
teardown phase,226
telecommunication, 3
Telecommunications Actof
1996,242,1059
teleconferencing, 682
Teledesic, 486
telephone company, 218
telephone network, 241
analogleasedservice,247
analogservices, 247
bandwidth, 247
components, 241
datatransfer,245
digitalservice,247
signaling, 245
signaling system,244
telephone subscriber
line,80telephone system
analogswitched
service,165
hierarchy, 166
multiplexing, 165
telephone USerport,246
telephony signalling, 736
TELNET,817-849
character mode,824
client,819
defaultmode,823
DONTcommand, 822
embedding, 820
linemode,824
mode,823
offertoenable,822
optionnegotiation, 822
sendingcontrol
character, 821
sendingdata,820
suboption negotiation, 822
timesharing, 818
userinterface, 823
WILLcommand, 822
WONTcommand, 822
temporal compression, 907
temporal masking, 904
Ten-Gigabit Ethernet, 397,
416
terminal, 818
terminal network. See
TELNET
termination
SCTP,748
TFTP
port,1065
TGS,984
AS,984
Kerberos, 984
thermalnoise,84
thickEthernet.
SeeIOBASE5
Thicknet. SeeIOBase5
thinEthernet. SeelOBase2
thirdharmonic, 68
three-node instability, 664
three-way handshaking, 723,
727,744
throughput, 90,764-765,876
bandwidth, 90
CSMA/CD, 376
load,765
pureALOHA, 368
slottedALOHA, 369
ticket,983
ticket-granting server.
SeeTGStimedivisionmultipleaccess.
SeeTDMA
timeexceeded message, 624
latefragments, 624
time-to-live field,624
timeslot
switching, 231
time-division multiplexing.
SeeTDM
time-division switch,
227,230
proandcon,231
time-domain plot,65
time-limited signal,1049
time-out, 731
timer,326
Selective RepeatARQ,339
time-slot interchange.
SeeTSI
timestamp, 913
ICMPv6,640
RTP,918
senderreport,919
timestamp messages
clocksynchronization, 626
round-trip time,626
timestamp option,596
timestamp requestandreply
messages, 626
time-to-live
caching, 809
time-to-live field,624
timing,19
T-line
analogtransmission, 177
burstydata,518
DSrelationship, 177
E-line,178
framesize,177
multiplexing, 177
token,381
tokenbucket,777,779
leakybucket,780
meter,786
tokenbus,382
tokenpassing,381
network, 382
tollcall,243
tollcallservice,247
tollfreecall,243
topology
definition, 8
TOS,584
categories, 585
interpretations, 584
valuesforapplication
programs, 585TP,526
traffic,876
framesize,524
trafficcontrol
FrameRelay,787
PVC,787
SVC,787
trafficdescriptor, 761
trafficprofile,762
trafficshaping,777
transceiver, 404
transient link
costassignment, 673
graphical representation,
673
transitAS,677
transition
strategies, 603
transition phasediagram, 349
transition strategy,603
headertranslation, 605
tunneling, 604
translation, 915-916
presentation layer,40
translator, 915
transmission, 57,526
AMPS,470
baseband, 75
D-AMPS, 471
digitalsignal,74
IS-95,474
modulation, 79
serial,131
Transmission Control
Protocol. SeeTCP
transmission controlprotocol.
SeeTCP
transmission impairment,
80,88
transmission medium, 55
location, 191
physicallayer,55
transmission mode,131
transmission paths.SeeTP
transmission sequence
number.SeeTSN
transmission time,91
bandwidth,91
latency,91
transport layer,37,
44,45,701
connection control,38
demultiplexing, 707
errorcontrol,38,702
flowcontrol,38
multiplexing, 707
protocols, 44,708real-time traffic,916
reassembly, 38
responsibilities, 37,44,701
segmentation, 38
service-point addressing,
38,701
TCP,45
TCPIIP,43-44
transport mode,996
transposition
DES,941
transposition cipher,
935,937
P-box,939
trap,878
trellis-coding, 249
triangulation, 482
triggered update,663
trigonometric functions, 1043
trigonometric identities, 1046
TripleDES,943
2keys,943
3keys,943
trunk,241-242
TSI
example, 230
RAM,231
TSN,739
Tspec,781
TST,231
tunneling, 604,637
multicasting, 693
VPN,1007
TV,167
TVchannel, 71
twisted-pair, 192-193
applications, 195
categOlies, 193
components, 193
DSL,195
interference, 193
LAN,195
localloop,242
perfonnance, 194
RJ45,193
telephone network, 195
twists,193
twisted-pair cable,193
twisted-pair Ethernet.
See1OBase-T
twisting, 193
two-dimensional parity
check,280
two-node loop
instability, 664
typeofservice.SeeTOS
typeprefix,568U
UA,824,828
command-driven, 829
envelope, 830
envelope addresses, 830
GUI-based, 829
mailformat,830
mailsummary, 830
message, 830
message body,830
message header,830
receiving mail,830
types,829
UDP,43,45,703,707-708
advantages, 709
checksum, 712-713
compared toTCP,45
connectionless, 709
connectionless
service,713
decapsulation, 713
DNS,812
encapsulation, 713
flowanderrorcontrol,713
forsimplecommunication,
715
ICMP,623
incoming queue,714
internalcontrol
mechanism, 715
management programs,
715
multicasting and
broadcasting, 715
operation, 713
outgoing queue,714
portcreation, 714
portunreachable, 714-715
ports,1065
process-to-process
protocol, 45
queueoverflow, 714
queuing, 714
real-time traffic,916
route-updating
protocols, 715
RTP,916
RTPport,919
SIP,920
sizerestriction, 713
SNMP,895
transport layerprotocol, 43
unreliable, 709
uses,715
vsSCTP,736
well-known port
number,709UDPport
RTCP,920
U-frame, 341,344
codes,344
connection, 345
function, 344
systemmanagement, 341
types,344
UHF,204
ultraviolet light,192
unguided media,192,203
UNI,526
VPIlength,527
unicastaddress,46,400,569
unicastrouting,682
shortestpathtree,682
unicastroutingtable
RPF,686
unicasting, 630,678
multiple, 680
routerinterface, 679
Unicode, 1029
plane,1030
unidirectional antenna, 206
uniformresource locator.
SeeURL
unipolar coding,106
NRZ,106
UNls,527
universal ADSL,254
unnumbered frame.
SeeU-frame
unreliable transport layer
service,708
unshielded twistedpair.
Seetwisted-pair
unspecified address,571
updating
distancevectorrouting,
662
pathvectorrouting,675
uplink,481
uploading
V90,250
URGbit,727
urgentbyte,726
URL
alias,853
anchor,857
components, 853
host,853
HTIP,853
locators, 853
pathname, 853
portnumber,853
protocol, 853
user,526INDEX 1133
useragent.SeeUA
USERcommand, 843
userdatagram, 710
checksum example, 712
checksum field,711
destination portnumber
field,711
format,710
lengthcalculation, 711
lengthfield,711
pseudoheader, 712
sourceportnumber
field,710
userdatagram protocol.
SeeUDP
usermobilelink(UML),484
usernetworkinterface.
SeeUNI
usersupportlayers,32
user-to-user ID,535
UTP,195.
Seealsotwisted-pair
DU,535
Um,534
V
v'32,249
QAM,249
v'32bis,249
V34bis,249
v'90,250
uploading, 250
v'92,251
VanAllenbelt,481
variablebitratetraffic,762
variable-length packet
leakybucket,779
VC,526
cellnetwork, 526
example, 527
VCI,222,527
length,527
VPCswitch,529
VCO,147
VCs,526
VDSL,255
verification tag,740
veryhighbitratedigital
subscriber line.
SeeVDSL
verylowfrequency. SeeVLF
VHF,204
video,6,596,902
compression, 904
IPv6,567
videoconferencing, 912
violation, 1191134 INDEX
virtualcircuit
IntServ,781
virtualcircuitidentifier.
SeeVCI
virtualcircuitnetwork
datatransferphase,223
virtualcircuitswitching
cknow1edgment, 225
virtualcircuits.SeeVC
virtualconnection identifier
(VCI),536
virtuallink,671
virtuallocalareanetwork.
SeeVLAN
virtualpath.SeeVP
virtualpathidentifier
(VPI),536
virtualpathidentifier. SeeVPI
virtualprivatenetwork.
SeeVPN
virtual-circuit
network, 214,221
addressing, 222
phases,223
visiblelight,192
VLAN
802.1Q,462
advantages, 463
automatic
configuration, 462
broadcast domain,460
communication between
switches, 462
concept,458
configuration, 461
frametagging,462
grouping byIP
address,461
grouping byMAC
address,461
grouping bymultiple
characteristics, 461
grouping byport
number,461logicalLAN,459
manualconfiguration, 461
membership
characteristics, 461
multicast IPaddress,461
semiautomatic
configuration, 462
tablemaintenance, 462
TDM,462
VLF,204
VOFR,522
PCM,522
voice
sampling rate,902
VOFR,522
VoiceOverFrameRelay.
SeeVOFR
voiceoverIP,912,920
voltage-controlled oscillator.
SeeVCO
volts,59
VP,526
example, 527
VPCswitch
cellrouting,529
example, 529
mechanism, 529
VPI,527
NNI,527
UNI,527
VPCswitch,529
VPls,527,529
VPN,1004,1007
method,1007
tunneling, 1007
V-series, 249
vulnerable time,367
CSMA,371
pureALOHA, 368
slottedALOHA, 369
W
Walshtable,389
WAN
size,14WATS,247
wave-division multiplexing.
SeeWDM
wavelength, 64
medium, 64
period,64
propagation speed,64
W-CDMA,478
WDM,162,167
concept, 167
dense,168
opticalfiber,168
SONET,168
weakcollision, 967
Web
functions, 853
Webpage,852
body,856
head,856
HTML,855
structure, 856
tag,856
Webportal,854
Website,851
weighted fair
queueing, 777
well-known port,705
list,715,1065
queue,714
well-known portnumbers
SCTP,736
wideareatelephone service.
SeeWATS
wide-band CDMA,478
wildcard filter
style,784
WILLcommand, 822
window
Selective Repeat
ARQ,334
windowsize,769
basisof,769
windowing policy,766wireless, 421
addressing mechanism, 428
controlframe,428
CSMA/CA, 423
CSMAlCD, 423
dataframe,428
framecontrolfield,426
frameformat,426
frametypes,427
MAClayerframe,426
MACsublayer, 423
management frame,427
NAV,425
wirelesscommunication, 203
wirelessEthernet, 421
wirelessLAN
stationtypes,422
wireless LAN
station,422
wirelessnetwork
CSMAlCA, 378
WorldWideWeb.
SeeWWW
WWW,851
concept, 851
document types,854
staticdocument, 855
x
Xray,192
X.25,517
X.509,989
xDSL,251
XOR,271,278,286
Hamming distance, 274
XORcipher,938-939
y
Yahoo,839
z
zone,802
zonefile,802